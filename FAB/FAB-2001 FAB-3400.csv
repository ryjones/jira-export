Summary,Issue key,Issue id,Parent id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Log Work,Log Work,Log Work,Log Work,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Cloners),Inward issue link (Cloners),Inward issue link (Cloners),Outward issue link (Cloners),Outward issue link (Cloners),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Outward issue link (Duplicate),Outward issue link (Duplicate),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Business Value),Custom field (Commit Levels),Custom field (Current Status),Custom field (Design),Custom field (Design Status),Custom field (Documentation Impact),Custom field (Documentation Status),Custom field (Epic Color),Custom field (Epic Link),Custom field (Epic Name),Custom field (Epic Status),Custom field (Executed),Custom field (Found in Commit),Custom field (Function Test Status),Custom field (Must Fix),Custom field (Original story points),Custom field (Parent Link),Custom field (Rank),Custom field (Release Note),Custom field (Release Note Required),Custom field (Root Cause Analysis),Custom field (SDK Impact),Custom field (Sample/Tutorial),Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Sprint,Custom field (Steps to Reproduce),Custom field (Story Points),Custom field (System Test Impact),Custom field (Target end),Custom field (Target start),Custom field (Team),Custom field (Team),Custom field (Test Plan),Custom field (Test Result),Custom field (Test Result Details),Custom field (Test Type),Custom field (Triaged),Custom field (Usage),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Workaround),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitCommitsReferenced),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
"orderer service batching broken for non-default channel ID, 1 channel, mult orderers",FAB-2001,14503,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Ratnakar,scottz,scottz,02/Feb/17 8:21 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,02/Jun/17 1:17 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-orderer,,,,0,qa,quality,reproduction-requested,,,,,"TXs recvd on multiple orderers (using same channel) are batched and delivered separately only by the recipient orderer

Tested on Feb 01 2017 using:
commit 5d9e4ede298ab646ac918dc5b034c7d319dd1d9a
commit date:   Mon Jan 30 14:34:38 2017 +0000

1. Using 1 new ""testchannel00000"" with 3 kafka orderers:
2. cd $GOPATH/src/github.com/hyperledger/fabric
3. CORE_PEER_COMMITTER_LEDGER_ORDERER=127.0.0.1:7050 peer channel create -c testchannel00000
4. Send a TX to each orderer at same time, on ""testchannel00000"".
EXPECTED RESULT:
Transactions should be put into single batch, and after 10 secs the batch
should be delivered (duplicated by each orderer).
ACTUAL RESULT (FAILURE):
Orderer service fails to batch them together. And after batchTimeout (10 secs)
each orderer delivers a unique batch with only the transaction that was sent to it.


======================================================================
Below are similar tests for comparison (which pass):

===============
RESULT: PASS:
1. Using 1 default channel ""testchainid"" with 3 orderers:
2. Send a TX to each orderer at same time, on ""testchainid"".
- Orderer service works fine. It puts them all in one batch after 
  batchtimeout(10secs), and all orderers deliver it.

===============
RESULT: PASS:
1. Using 3 new channels with 1 orderer:
2. cd $GOPATH/src/github.com/hyperledger/fabric
3. export CORE_PEER_COMMITTER_LEDGER_ORDERER=127.0.0.1:7050
3. peer channel create -c ""testchannel00000""
4. peer channel create -c ""testchannel00001""
5. peer channel create -c ""testchannel00002""
6. Send a TX on each channel at same time to the orderer.
- Orderer service works fine. Since each TX is in separate channel, each is put
  in its own batch, and after batchtimeout(10secs), each batch is delivered by
  the orderer on its own channel.
","Lenovo laptop running Linux, vagrant, docker containers for each orderer and kafka-broker",ChristopherFerris,kchristidis,Ratnakar,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jun/17 12:29 AM;suryalnvs;broadcast_timestamp_msp.go;https://jira.hyperledger.org/secure/attachment/10897/broadcast_timestamp_msp.go","02/Feb/17 8:20 AM;scottz;bug1_details.txt;https://jira.hyperledger.org/secure/attachment/10416/bug1_details.txt","02/Jun/17 12:29 AM;suryalnvs;deliver_stdout_msp.go;https://jira.hyperledger.org/secure/attachment/10898/deliver_stdout_msp.go",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpd3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,,,,,,,,,,,,,,ChristopherFerris,kchristidis,Ratnakar,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/17 9:13 AM;scottz;For example:
 OTE_TXS=5 ORDERER_GENESIS_ORDERERTYPE=kafka OTE_KAFKABROKERS=3 OTE_ORDERERS=3
For this test with 5 transactions, 1 channel (non-default name) and 3 orderers
EXPECT to see:  1 block delivered (the same one should be delivered on all orderers) after 10 secs
FAILURE OBSERVED:  transactions sent to different orderers are NOT batched together:
Consumer recvd a block, o 2 c 0 blkNum 1 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 3
Consumer recvd a block, o 1 c 0 blkNum 1 numtrans 1
in compute(): totalTxRecv[]= [3 1 1], totalBlockRecv[]= [1 1 1]
This shows that
Orderer 0 delivers 3 transactions in 1 block, block number 1.
Orderer 1 delivers 1 transaction in a different block number 1.
Orderer 2 delivers 1 transaction in yet another different block number 1.;;;","14/Feb/17 12:19 AM;kchristidis;Folks, let me know what the progress is on this, and whether you'd like me to help.;;;","01/Mar/17 6:46 AM;scottz;Still fails using Feb 27th commit # 29d7fc035df697a68d271d628e693c556354486f
for a new non-default channel ID name, AND ALSO FAILS using default testchainid.;;;","27/May/17 7:24 AM;ChristopherFerris;[~scottz] this says affectedVersion alpha2, yet filed in Feb when alpha hadn't even been cut. Is this still a verified issue?;;;","02/Jun/17 12:27 AM;suryalnvs;+*Pre-req:*+
 * Generate certs using the cryptogen tool for the clients and orderer
 * Launch the network with following configuration:
      _2 Orderers (with BATCHSIZE=100)_
      _3 Kafka brokers (3 zookeepers)_
 
*_Steps to run the test:_*
 1. Create a channel 'mychannel'

 2. Start the deliver clients for two orderers
 *Terminal 1:*
{code}
 /deliver_stdout_msp -server localhost:7050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}

*Terminal 2:*
{code}
 ./deliver_stdout_msp -server localhost:8050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}

 3. Start broadcast clients
     Send 110 transactions to the Orderer0 and Orderer1

*Terminal 3:*
{code}
./broadcast_timestamp_msp -server localhost:7050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}

*Terminal 4:*
{code}
./broadcast_timestamp_msp -server localhost:8050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}

*OUTPUT:*
As a result of the above execution here is the result (seen in Ternminal 1 & 2)
{code:java}
Total Transactions Received in block 0 :  1
Total Transactions Received in block 1 :  100
Total Transactions Received in block 2 :  100
Total Transactions Received in block 3 :  20
{code}
{color:#14892c}*we see the blocks are getting batched up properly and issue is no more reproducible, hence this issue can be closed*
{color}

*NOTE:*
* Tested on alpha2 based code/commit level
* Please refer more details here, https://jira.hyperledger.org/browse/FAB-3993, [https://gerrit.hyperledger.org/r/#/c/9625/]
 Also attached the source file for broadcast_timestamp_msp (added changes to broadcast_timestamp to read msps of the peers);;;","02/Jun/17 1:22 AM;Ratnakar;Verified the issue on Alpha2 commit level with few changes made to the clients to enable TLS.

Closing the issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create unit test for chaincode events,FAB-2002,14504,13227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pmullaney,pmullaney,pmullaney,02/Feb/17 8:51 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 6:01 AM,,,,,v1.0.0,v1.0.0-alpha1,,fabric-sdk-node,,,,0,,,,,,,,Test generation and reception of chaincode event,,pmullaney,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxju7:",,,,,,Sprint 5 - Consensus,Sprint 7 - nodeSDK,Sprint 8 - nodeSDK,Sprint 9 - nodeSDK,Sprint 10 - nodeSDK,Sprint 11 - SDK node,Sprint 12 - SDK node,Sprint 13 - SDK node,Sprint 14 - SDK node,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,pmullaney,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
endorser tests are failing in behave while registering user,FAB-2003,14505,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,02/Feb/17 9:32 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Mar/17 7:48 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"endorser tests are failing while registering user. Run make behave from fabric master on latest commit. 

Below is the log from behave log file:

@endorser
Feature: Endorser # features/endorser.feature:10
  As a application developer
  I want to get endorsements and submit transactions and receive events
  @FAB-184
  Scenario Outline: Basic deploy endorsement for chaincode through GRPC to multiple endorsers -- @1.1 Orderer Options                                                       # features/endorser.feature:37
    Given we compose ""docker-compose-next-4.yml""                                                                                                                            # steps/peer_basic_impl.py:69 22.751s
    And I wait ""1"" seconds                                                                                                                                                  # steps/peer_basic_impl.py:121 1.005s
    And I register with CA supplying username ""binhn"" and secret ""7avZQLwcUe9q"" on peers                                                                                    # steps/peer_basic_impl.py:659 0.002s
      | vp0 |
    When user ""binhn"" creates a chaincode spec ""cc_spec"" of type ""GOLANG"" for chaincode ""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02"" with args # steps/endorser_impl.py:21 0.007s
      | funcName | arg1 | arg2 | arg3 | arg4 |
      | init     | a    | 100  | b    | 200  |
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/endorser_impl.py"", line 23, in step_impl
          userRegistration = bdd_test_util.getUserRegistration(context, enrollId)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_test_util.py"", line 74, in getUserRegistration
          raise Exception(""User has not been registered: {0}"".format(enrollId))
      Exception: User has not been registered: binhn
",,jeffgarratt,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjuf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jeffgarratt,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Feb/17 1:32 AM;jeffgarratt;So far focusing on orderer.feature and bootstrap.feature.  The endorser.feature will fail due to v1 updates and will be addressed asap.;;;","10/Mar/17 7:47 AM;jeffgarratt;Reworked behave features.  Endorser feature is currently not used.  May soon be removed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
bootstrap tests are failing while running make behave,FAB-2004,14506,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,02/Feb/17 9:34 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Mar/17 7:47 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Bootstrap tests are failing while running make behave from fabric master branch on latest commits:

Below is the error log observed from vagrant environment:

   | peerOrg1     |
    And the user ""dev0Org0"" creates config Tx ""configTx1"" using signedConfigEnvelope ""createChannelSignedConfigEnvelope1""                                                                        # steps/bootstrap_impl.py:191 0.001s
    And the user ""dev0Org0"" broadcasts config Tx ""configTx1"" to orderer ""orderer0"" to create channel ""com.acme.blockchain.jdoe.Channel1""                                                         # steps/bootstrap_impl.py:198 0.004s
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 203, in step_impl
          bootstrap_util.broadcastCreateChannelConfigTx(context=context, composeService=orderer, chainId=channelId, user=user, configTxEnvelope=configTxEnvelope)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 745, in broadcastCreateChannelConfigTx
          user.broadcastMessages(context=context,numMsgsToBroadcast=1,composeService=composeService, chainID=chainId ,dataFunc=dataFunc, chainHeaderType=common_dot_common_pb2.CONFIGURATION_TRANSACTION)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 168, in broadcastMessages
          abStub = self.getABStubForComposeService(context, composeService)
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 188, in getABStubForComposeService
          channel = getGRPCChannel(*bdd_test_util.getPortHostMapping(context.compose_containers, composeService, 7050))
        File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_test_util.py"", line 95, in getPortHostMapping
          if port_protocol in container.ports:
      TypeError: argument of type 'NoneType' is not iterable

      Captured stdout:
      Will copy gensisiBlock over at this point
",,jeffgarratt,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jeffgarratt,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Feb/17 1:33 AM;jeffgarratt;This occurs when one of the services has exited unexpectedly.  Try a 'docker ps -a' to verify that one of the services has exited.  Check the log and see the isse which is causing this.  I suspect it is an orderer failure due to misconfig.;;;","10/Mar/17 7:46 AM;jeffgarratt;This should now be resolved as of https://gerrit.hyperledger.org/r/#/c/7085/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[EXPERIMENTAL in v1.1] Integrate the Identity Mixer technology to support unlinkability for signing transactions (MVP),FAB-2005,14508,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dubovitskaya,dubovitskaya,dubovitskaya,02/Feb/17 11:17 PM,25/Sep/18 1:54 AM,28/Oct/23 2:58 AM,09/Mar/18 4:24 AM,v1.1.0,,,,v1.1.0,,,fabric-crypto,,,15/Aug/17 12:00 AM,4,MembershipServices,Release-planning-1.1-TechPreview,review-needed,Security,,,,"IBM Identity Mixer is a cryptographic protocol suite for strong privacy-preserving authentication, signatures, and transfer of certified attributes.
 Its trust model and security guarantees are similar to what is ensured by standard X.509 certificates, but the underlying cryptographic algorithms provide more advanced privacy features, such as unlinkability, minimal attribute disclosure and predicates over attributes, efficiently.

This Issue is for the MVP contribution only. The MVP part of the Identity Mixer contribution to the Hyperledger fabric consists of the following packages:
 # a core Identity Mixer crypto package (in Go lang) that implements basic cryptographic algorithms (key generation, signing, verification, zero-knowledge proofs);
 # membership service provider (MSP) implementation for signing and verifying the transactions using the Identity Mixer crypto package;
 # a script for generating issuer and user keys and issuing credentials with attributes using the Identity Mixer crypto package;
 # integration into the MSP config and support for switching between different MSPs in fabric;
 # e2e demo script.

The first version of the Identity Mixer crypto library provides the following functionality:
 * generating the issuer (CA) keys,
 * issuing certificates in a form of Identity Mixer credentials,
 * signing messages and selectively disclosing attributes from the certificates in a fully unlinkable manner, and
 * verifying such signatures.

IBM Identity Mixer technology is built from the blind signature schemes that support multiple messages and efficient zero-knowledge proofs of possession of a signature. 
 All cryptographic building blocks and protocols are provably secure and were published at the top conferences and verified by the scientific community.

This particular Identity Mixer implementation uses a pairing-based signature scheme that 
 is described in detail by [Au et al.|http://link.springer.com/chapter/10.1007/978-3-540-28628-8_4] and zero-knowledge proofs to prove knowledge of a signature that is described in detail by [Camenisch et al.|http://eprint.iacr.org/2016/663.pdf] It requires only one dependency - the [Miracl crypto library|https://github.com/miracl/amcl/tree/master/go] licensed under Apache v2.0 that is already included in Fabric v1.0.",,ashutosh_kumar,baohua,daijianw,davidkhala,denyeart,DrVadson,dubovitskaya,geahaad,grapebaba,Hangyu_FJH,jexek,JonathanLevi,lfeagan,liangxueping2015,mffrench,MichaelWang,raccoonrat,snowy13,toddinpal,tsrb,vdods,vvnick,wangheng,weeds,wutongtree,xixuejia,yingmsky,yoheiueda,zmanian,,,,,576000,158400,,0%,576000,158400,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7120,,,,,,,,,,,,,FABC-588,FABJ-327,FAB-6453,FABN-689,FABC-592,FAB-7746,FAB-10120,,,"28/Mar/17 3:12 AM;dubovitskaya;Idemix MSP for Hyperledger.doc;https://jira.hyperledger.org/secure/attachment/10618/Idemix+MSP+for+Hyperledger.doc","16/Nov/17 5:39 PM;dubovitskaya;idemix-hyperledger-playback-final.pptx;https://jira.hyperledger.org/secure/attachment/13345/idemix-hyperledger-playback-final.pptx",,,,,,,,,,,,,,,Unset,,Unset,,,Signing transactions unlinkably with Identity Mixer (MVP: e2e demo),,,,Unset,,,,"1|hzxjv3:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,baohua,daijianw,davidkhala,denyeart,DrVadson,dubovitskaya,geahaad,grapebaba,Hangyu_FJH,jexek,JonathanLevi,lfeagan,liangxueping2015,mffrench,MichaelWang,raccoonrat,snowy13,toddinpal,tsrb,vdods,vvnick,wangheng,weeds,wutongtree,xixuejia,yingmsky,yoheiueda,zmanian,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Aug/17 9:16 PM;weeds;Most of the tasks have crs for this- this is likely 1.5 weeks needed. They have already implemented the MSP for identity mix in golang, but they have to hook into the client SDK. WE need guidance from client SDK person. ;;;","11/Aug/17 9:20 PM;weeds;Note this is a technology that we can pull in from another project, so why we can reuse a lot of code.

 ;;;","20/Aug/17 6:36 PM;baohua;Would be better to give links on the mix introduction and how's the process like ""https://www.zurich.ibm.com/identity_mixer/"".

Then it will be more clear how to be integrated with existing fabric architecture.

Thanks!;;;","03/Oct/17 10:43 PM;denyeart;[~elli-androulaki] [~dubovitskaya]

It sounds like the first target for SDK would be java sdk.  But there is only a JIRA work item for go sdk.  Please clarify and create java sdk work item (assuming it is needed).;;;","04/Oct/17 12:31 AM;dubovitskaya;[~denyeart] 

Actually, after talking to developers and considering the ongoing client project that uses Node SDK and needs Idemix, we decided to integrate into the node SDK first.

I updated the sdk issue accordingly. ;;;","29/Oct/17 8:06 AM;JonathanLevi;Hi everybody, to clarify: is this currently planned to be part of the 1.1 release, or part of the 1.2 and merged on top of 1.1 ?

Thank you, Jonathan;;;","30/Oct/17 8:42 AM;dubovitskaya;Hi Jonathan,

so far this is considered for the Tech Preview for 1.1.

We are ready for a playback with the e2e demo. The java-idk integration is in progress.

Regards,

Maria;;;","01/Nov/17 3:47 AM;dubovitskaya;For clarity I am changing this Epic to the e2e demo support and opening another Epic for java-sdk integration. 

There is only 1 CR that is left to be merged for this Epic.;;;","01/Nov/17 3:49 AM;JonathanLevi;Thank you for the update [~dubovitskaya].
Have merged a few related CRs... we will be waiting for the Java SDK CRs then.;;;","09/Mar/18 4:24 AM;denyeart;Marking as Done as an experimental feature in 1.1.

Will be made production ready in FAB-10120.

Will be extended with additional capabilities in  FAB-5733.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip publish external endpoints to peers other organizations,FAB-2007,14510,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,02/Feb/17 11:42 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Mar/17 4:42 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,"In some cases, peers in the same organization should communicate by connecting to endpoints only route-able from within the organization, and when communication with peers in different organizations, they should connect to endpoints that are route-able from outside the organization.

We need to add to gossip the ability to do that.

My plan is to add another endpoint, and to have the signature over a GossipMessage that contains an AliveMessage to be signed over a message that contains the internal endpoint as nil, and then the peer signs the GossipMessage it'll add the internal endpoint and the signature over the internal endpoint and then send the message.

When a peer forwards a GossipMessage that contains an alive message to a different peer outside of its organization, it'll delete the inner endpoint's ip address. ",,lmars,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzx633:",,,,,,Sprint 10 - Gossip,Sprint 11 - Gossip,Sprint 12 - Gossip,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,lmars,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CreateCompositeKey() and SplitCompositeKey() need to be order preserving,FAB-2008,14511,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,denyeart,denyeart,03/Feb/17 12:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Feb/17 12:36 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Make updates to CreateCompositeKey() and SplitCompositeKey() to ensure that PartialCompositeKeyQuery is order preserving.

Example using marbles02:

expected composite key:
""marbles\u0000color~name\u0000blue\u0000marble1\u0000""

expected partial composite key range query for blue marbles:
startkey=“marbles\u0000color~name\u0000blue\u0000""",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-758,,,,,,,,,"1|hzx7pr:",,,,,,Sprint 11 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add internal API RetrieveTxByBlockNumTranNum,FAB-2009,14512,13911,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,denyeart,denyeart,03/Feb/17 12:56 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,06/Feb/17 9:46 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"History database returns the list of (blockNum,tranNum) that
updated a key.
RetrieveTxByBlockNumTranNum will allow kvledger
to retrieve transaction history for this list of key updates.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjvj:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB Query Data Wrapper fails for some conditions,FAB-2010,14513,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,03/Feb/17 12:57 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 9:37 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"The data query wrapper used to ""wrap"" CouchDB queries for the ledger will fail for some instances of numbers and for complex queries using cascading operators.",,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx65z:",,,,,,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ImportError: No module named sha3 error,FAB-2011,14514,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,rameshthoomu,rameshthoomu,03/Feb/17 1:04 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Mar/17 7:45 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Run behave tests using below command:
make behave BEHAVE_OPTS=""-D logs=Y -o testsummary.log --junit --format=pretty""

*Below is the error in vagrant:*

vagrant@hyperledger-devenv:v0.2.2-2a123fe:/opt/gopath/src/github.com/hyperledger/fabric_latest$ cd bddtests/
vagrant@hyperledger-devenv:v0.2.2-2a123fe:/opt/gopath/src/github.com/hyperledger/fabric_latest/bddtests$ behave -k  features/bootstrap.feature
Exception ImportError: No module named sha3
Traceback (most recent call last):
  File ""/usr/local/bin/behave"", line 11, in <module>
    sys.exit(main())
  File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 109, in main
    failed = runner.run()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 672, in run
    return self.run_with_paths()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 678, in run_with_paths
    self.load_step_definitions()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 658, in load_step_definitions
    exec_file(os.path.join(path, name), step_module_globals)
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 304, in exec_file
    exec(code, globals, locals)
  File ""steps/bootstrap_impl.py"", line 18, in <module>
    import bootstrap_util
  File ""/opt/gopath/src/github.com/hyperledger/fabric_latest/bddtests/steps/bootstrap_util.py"", line 20, in <module>
    import sha3
ImportError: No module named sha3
vagrant@hyperledger-devenv:v0.2.2-2a123fe:/opt/gopath/src/github.com/hyperledger/fabric_latest/bddtests$",,afrojewelz,jeffgarratt,murrekatt,rameshthoomu,szoghybe,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1801,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjvr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,afrojewelz,jeffgarratt,murrekatt,rameshthoomu,szoghybe,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/17 9:22 PM;murrekatt;Ran into the same after setup of dev env (http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv/) and then building (http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build/) ;;;","10/Mar/17 7:46 AM;jeffgarratt;This is resolved with most recent updates and the new README.md which explains procedure for proper setup of python using virtual environments.;;;","12/May/17 11:09 PM;szoghybe;The README instructions referred to above are at the bottom of [https://github.com/hyperledger/fabric-sdk-java]

My complete Vagrantfile config.vm.synced_folder bloc is:

config.vm.synced_folder "".."", ""#\{SRCMOUNT}""
 config.vm.synced_folder "".."", ""/opt/gopath/src/github.com/hyperledger/fabric""
 config.vm.synced_folder ""fabric-sdk-java-master/src/test/fixture/sdkintegration"", ""/opt/gopath/src/github.com/hyperledger/fabric/sdkintegration""
 config.vm.synced_folder ENV.fetch('LOCALDEVDIR', ""..""), ""#\{LOCALDEV}"";;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Version from CouchDB QueryResult,FAB-2015,14518,13116,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,03/Feb/17 2:25 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Feb/17 11:50 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Version is no longer required in the QueryResult structure.  This also keeps the CouchDB layer to be more generic, since the CouchDB data layer is used by consumers other than Ledger.",,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjwf:",,,,,,Sprint 7 - Ledger,Sprint 10 - Ledger,Sprint 11 - Ledger,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Parse block metadata for invalid transaction/deliver to clients,FAB-2017,14520,13227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,harrisob@us.ibm.com,pmullaney,pmullaney,03/Feb/17 5:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,01/Mar/17 3:23 AM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,Blocks contain all transactions including invalid ones. The transactional event support needs to provide a valid/invalid indication when delivering tx events.,,jimthematrix,pmullaney,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjwv:",,,,,,Sprint 5 - Consensus,Sprint 7 - nodeSDK,Sprint 8 - nodeSDK,Sprint 9 - nodeSDK,Sprint 10 - nodeSDK,Sprint 11 - SDK node,Sprint 12 - SDK node,Sprint 13 - SDK node,Sprint 14 - SDK node,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,jimthematrix,pmullaney,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/17 1:52 AM;jimthematrix;[~pmullaney] note that BlockMetadataIndex.TRANSACTIONS_FILTER in the block has been changed from bit array to byte array (so that reason code for rejection can be set in that byte);;;","01/Mar/17 3:23 AM;jimthematrix;included in https://gerrit.hyperledger.org/r/#/c/6565/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write gossip protocol overview topic,FAB-2018,14521,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,joshhus,joshhus,joshhus,03/Feb/17 6:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Apr/17 7:34 PM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"Write fabric v1 gossip protocol overview topic. 
Ours is specifically a ""gossip-based data dissemination protocol."" 
Design doc: https://docs.google.com/document/d/157AvKxVRqgeaCTSpN86ICa5x-XihZ67bOrNMc5xLvEU/edit#heading=h.rrii36vrca54)",,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2317,,,,,,,,,"1|hzxjx3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/17 6:35 AM;joshhus;https://gerrit.hyperledger.org/r/#/c/5717/1/docs/gossip.md;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test get started process doc on Windows,FAB-2019,14522,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,joshhus,joshhus,03/Feb/17 6:28 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Jun/17 11:11 PM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,"Test the getting started with v1.0 doc, (on Windows machine).
http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html



",,joshhus,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-46,FAB-1998,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjxb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,joshhus,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Feb/17 7:35 AM;joshhus;As documented at: http://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/
Step 1: Install Docker on Windows
Result 1: Success. Lacked minimum Win 10 version + build, but routed to ""Docker Toolbox"" install.
Now have Docker Toolbox installed and Oracle VM VirtualBox manager.;;;","04/Feb/17 6:32 AM;joshhus;Result: Prereqs. and setup steps: Complete. Success.;;;","04/Feb/17 7:14 AM;joshhus;Step 2: curl steps.
a) Add a quick cmd step to verify that my curl download/install was successful. I don't know that it was.
b) Running the curl -L etc. command from the directory just created above. Getting a ""system cannot find the path specified"" error.
c) Note: For the earlier Docker steps, the --version etc. cmds worked, but some of the others test cmds, from the Docker site testing page, did not. ... e.g. docker ps ""cannot find the file specified""
d) I got to the Oracle VM VirtualBox Manager dialog; if I needed to create a ""New"" VM at that time, I didn't yet; we don't explicitly say to. 
d) Will return to the ""What to know before you install"" section on the Docker page and review: https://docs.docker.com/docker-for-windows/#/what-to-know-before-you-install;;;","11/Apr/17 9:12 PM;mastersingh24;getting started does not work on Windows.  Part of this is a point in time statement for the alpha images as we run into the chaincode file permissions error.  Basically, Docker Toolbox uses VirtualBox under the covers and when you mount volumes in Docker Toolbox you end up with 777 for file permissions.  https://gerrit.hyperledger.org/r/#/c/7679/  should fix this issue but unfortunately it is not included in the alpha images;;;","09/Jun/17 11:11 PM;mastersingh24;this is done and work is underway to improve;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
To Test calling chaincode from another chaincode over channels,FAB-2021,14524,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Ratnakar,Ratnakar,03/Feb/17 10:05 AM,23/Jan/20 3:49 AM,28/Oct/23 2:58 AM,23/Jan/20 3:49 AM,,,,,,,,,,,,0,quality,stale-item,,,,,,Call one chaincode that runs on one channel from another chaincode that runs on another channel,,Ratnakar,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjxr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/17 3:26 AM;Ratnakar;[~suryalnvs] Made the required changes and awaiting for others dependent patches to go first.
Assigning it to him;;;","23/Jan/20 3:49 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use common blockstorage for both Peer and Orderer,FAB-2022,14525,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,03/Feb/17 5:22 PM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,06/Feb/17 11:30 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Move the block storage related code from fabric/core/peer/ledger to /fabric/common package so that this can be reused by both Peer (for peer ledger) and Orderer (orderldeger),,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7pb:",,,,Unset,,Sprint 11 - Ledger,,,,,,,,,,,,,Unset,,,,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetTransactionById should return transaction with valid indicator,FAB-2024,14527,14094,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,denyeart,denyeart,03/Feb/17 11:03 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 3:11 AM,,,,,,,,,,,,0,,,,,,,,"[FAB-2024] Add valid indicator to GetTransactionById

When clients retrieve a transaction from ledger, they need to know whether the
transaction was validated or invalidated by committing peer.

GetTransactionByID API needs to retrieve the transaction Envelope
from block storage, and return it to a client, and indicate whether the
transaction was validated or invalidated by committing peer. So that the
originally submitted transaction Envelope is not modified, a new
ProcessedTransaction wrapper is returned.",,denyeart,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjy7:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,denyeart,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Feb/17 12:33 AM;denyeart;[~ruslankryukov] I have a changeset out there if you'd like to review:
https://gerrit.hyperledger.org/r/#/c/5503/;;;","07/Feb/17 12:58 AM;ruslankryukov;[~denyeart] Hello! I would like to implement populating and referencing to this flag. Don't you mind?;;;","07/Feb/17 3:12 AM;denyeart;[~ruslankryukov] Thanks, that would be great.  I've created another sub-task (FAB-2071) for populating the isValidated flag and assigned to you.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Ledger serviceability - Finalize error handlng, logging, tracing for v1",FAB-2025,14528,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,,denyeart,denyeart,03/Feb/17 11:39 PM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,11/Mar/18 10:22 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,ledger,,,,,,,"Finalize error handlng, logging, tracing for v1.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3578,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-758,,,,,,,,,"1|hzx7jj:",,,,Unset,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric protos do not conform to proto style guide,FAB-2026,14529,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jyellick,jyellick,04/Feb/17 12:49 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 7:59 AM,,,,,v1.0.0,,,fabric-orderer,fabric-peer,,,0,,,,,,,,"The fabric protos follow inconsistent naming conventions, which make it difficult to predict how to reference fabric proto messages.

The official proto style guide is here:

https://developers.google.com/protocol-buffers/docs/style

The fabric needs to bring its protos into line to be consistent according to this style guide before the release of v1 when non-backward compatible proto changes will be off the table",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx69j:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix proto style for fields that will regenerate without golang changes,FAB-2027,14530,14529,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,04/Feb/17 12:51 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 7:59 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,"Protoc makes a best effort to convert proto style into the target language style.

For golang, this means 'underscore_separated_names' become 'UnderscoreSeparatedNames'.  This means that these fields can be changed with no corresponding go changes.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjyf:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
artifacts for docker container logs,FAB-2028,14531,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rameshthoomu,rameshthoomu,04/Feb/17 1:10 AM,24/Apr/19 11:45 PM,28/Oct/23 2:58 AM,24/Apr/19 11:45 PM,,,,,,,,,,,,0,,,,,,,,"Provide docker container log details for unit-tests in Jenkins.

In existing approach we are executing unit-tests in a docker container with  log_driver: none. With the above approach docker container logs are not printing out and it's very hard to identify the failure. Proposed fix is to store docker container log output in a artifact and publish this artifact after every build.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjyn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/17 11:23 PM;rameshthoomu;Patch has been submitted https://gerrit.hyperledger.org/r/#/c/6097 and it's in review;;;","24/Apr/19 11:45 PM;rameshthoomu;Patch has been abandon with the comments provided by Greg.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix proto enum styles,FAB-2029,14532,14529,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jyellick,jyellick,04/Feb/17 1:13 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 7:58 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjyv:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix proto fields with upper case abbreviations,FAB-2030,14533,14529,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jyellick,jyellick,04/Feb/17 1:14 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 7:59 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,"Some fields like txID cannot be translated to tx_id without breaking code, because the resulting golang field becomes TxId.  This issue is to handle these cases.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjz3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove the artificial 2sec pause due to FAB-1862,FAB-2031,14534,13227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,04/Feb/17 4:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,04/Feb/17 6:22 AM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,"Because of FAB-1862, block events are sent before the blocks are fully committed, as a result the end-to-end.js test had to use an artificial 2sec pause to allow the block to be committed.

Since FAB-1862 has now been fixed, we don't need that pause any longer.",,jimthematrix,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjzb:",,,,,,Sprint 5 - Consensus,Sprint 7 - nodeSDK,Sprint 8 - nodeSDK,Sprint 9 - nodeSDK,Sprint 10 - nodeSDK,Sprint 11 - SDK node,Sprint 12 - SDK node,Sprint 13 - SDK node,Sprint 14 - SDK node,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,jimthematrix,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add system performance tests to CI,FAB-2032,14535,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,dongming,dongming,04/Feb/17 4:24 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,19/May/17 4:40 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"Add basic performance tests to daily CI.
First add some ""dummy"" scripts, which will fail when invoked from Jenkins daily runs.
Then add all the actual test scripts as they are written; refer to testplan doc for details:
https://docs.google.com/spreadsheets/d/1_IdXCuYMKkqXr3Za0pVnFP3sP1jBcNbYnTJGV-nSkxI/edit#gid=1813008746
",,bmos299,ChristopherFerris,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3559,FAB-3807,FAB-3808,FAB-3810,FAB-3811,FAB-3812,FAB-3814,FAB-3815,FAB-3816,FAB-3817,FAB-3818,FAB-3819,FAB-3820,FAB-3821,FAB-3822,FAB-3823,FAB-3824,FAB-3825,FAB-3826,FAB-3832,FAB-3833,FAB-3834,FAB-3835,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1017,,,,,,,,,"1|hzx2x3:",,,,Unset,,Sprint 11 - Quality,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,Sprint 18 - Quality,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/17 11:11 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8111/;;;","29/Apr/17 1:58 AM;bmos299;[~dongming] in the future let's put in the links so Chris does not have to do this work.;;;","29/Apr/17 10:23 AM;ChristopherFerris;thanks;-);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Switch to 'channel' instead of 'chain' in protos,FAB-2033,14536,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,04/Feb/17 6:23 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:06 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,,,,,,,,"Apparently a community decision was made to settle on the word 'channel' to describe the set of resources (including backing hash chain structure) as opposed to the word 'chain' which is used throughout the code.

It is not reasonable to attempt to transition the nomenclature inside the code away from the word chain to the word channel in the near term, as this would require too much work.  However, the proto messages should stick with us for a very long time, so it makes sense to make the modification there before we cut the v1 release.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx69r:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
False build results in fabric sdk node CI jobs,FAB-2035,14538,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,04/Feb/17 11:28 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,07/Feb/17 3:51 AM,,,,,,,,,,,,0,,,,,,,,"Observed false build results on fabric sdk node CI (Jenkins) builds. CI is executing further commands irrespective of the lint errors executed in ""gulp"" command.

```+ gulp
21:22:02 [21:22:02] Using gulpfile /w/workspace/fabric-sdk-node-verify-x86_64/gopath/src/github.com/fabric-sdk-node/gulpfile.js
21:22:02 [21:22:02] Starting 'lint'...
21:22:08 [21:22:08] 
21:22:08 /w/workspace/fabric-sdk-node-verify-x86_64/gopath/src/github.com/fabric-sdk-node/test/unit/end-to-end.js
21:22:08   315:6  error  Expected indentation of 4 tabs but found 5  indent
21:22:08   316:6  error  Expected indentation of 4 tabs but found 5  indent
21:22:08   317:5  error  Expected indentation of 3 tabs but found 4  indent
21:22:08 
21:22:08 ✖ 3 problems (3 errors, 0 warnings)
21:22:08 
21:22:08 [21:22:08] 'lint' errored after 6.01 s
21:22:08 [21:22:08] ESLintError in plugin 'gulp-eslint'
21:22:08 Message:
21:22:08     Failed with 3 errors
21:22:08 + rm -rf node_modules/fabric-ca-client```",Jenkins CI,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjzr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/17 3:51 AM;rameshthoomu;fixed this issue from CI. With this fix, now sdk node build will fail if there are any errors while checking go ""linter"";;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Vendor external dependencies in the .car package,FAB-2036,14539,15060,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,04/Feb/17 10:15 PM,27/Nov/19 3:11 AM,28/Oct/23 2:58 AM,17/Jun/17 9:05 PM,,,,,,,,,,,,0,,,,,,,,"Today, ""chaintool build/buildcar"" command relies on ccenv/go-get to provide dependencies it relies on such as the chaincode shim.  Going forward, the peer side of the process should be locked down and not allow external network access.  Therefore, the proposal is as follows:

# ""chaintool build"" will continue to function as it does today.  That is, it will execute commands that will pull in external dependencies when necessary for the convenience of the chaincode developer.  This command is not used by the peer.
# ""chaintool package"" will package up any dependencies necessary on a per-platform basis (e.g. go-list) and in a per-platform manner (e.g. go-vendor)
# ""chaintool buildcar"" will assume that the .car file is completely self-contained and only use dependencies that are included in the .car package.  This will be the mode that the peer uses.",,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjzz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jun/17 1:40 AM;greg.haskins;Fix submitted: https://gerrit.hyperledger.org/r/#/c/10645/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide mechanism to refer to config-relative file paths,FAB-2037,14540,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,04/Feb/17 10:39 PM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,26/Apr/17 9:55 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"There is a general shortcoming in the current architecture related to the configuration of external paths.  Consider a yaml key like ""foo.bar.path = path/to/foobar"".  This pattern is currently used for things like x509 certificates, etc.  The problem is when any code tries to utilize the key using standard techniques (e.g. os.Open(viper.GetString(""foo.bar.path"")) this will only succeed if the path is relative to the $CWD of the peer binary.

This has generally worked to date because we were only supporting and operating with software built from and run within the fabric.git repository, where those paths happened to exist.  Fast forward to the near future when we want to install the peer and its config using Linux Standards Base-esq techniques (e.g. config in /etc, binary in /usr/bin, etc) and this quickly becomes awkward.  We could work-around things by setting the peer $CWD to the path of the configuration, but that is hacky.  A better solution is to formally support the notion of config-relative paths with a substrate layer that can be used throughout the code base.

for example:

func GetConfigPath(key string) (string, error)

where ""GetConfigPath(""foo.bar.path"") would return ""/etc/hyperledger/fabric/peer/path/to/foobar"" if the config were located in /etc/hyperledger/fabric/peer and the key equated to ""path/to/foobar"".  Of course, absolute paths would be passed untouched.",,greg.haskins,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3160,FAB-3161,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3095,,,,,,,,,"1|hzxk07:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,greg.haskins,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Feb/17 2:55 AM;greg.haskins;Adding some additional detail.  My thoughts are as follows:

In an ""installed runtime"" environment, we will have generally three components

# One or more read-only configuration files (e.g. /etc/hyperledger/foo.cfg)
# One or more binaries (e.g. /usr/sbin/peer)
# One or more writeable data stores (e.g. /var/hyperledger).

One of the problems we have consistently struggled with is that lots of code makes certain assumptions about paths that could be classified as falling into one of two categories:

# assuming that $(GOPATH)/src/github.com/hyperledger/fabric path exists
# assuming that our current working dir $CWD is something related to fabric.git structure.

It should be noted that fabric.git structure (whether it be case 1 or 2) can/should not be assumed as we will/should not have the source tree included in an installation.

Now, one could suggest that the static config path (e.g. /etc/hyperledger) could replicate the topology of fabric.git w.r.t. the relevant configuration files, and we simply set the $CWD of the process accordingly before starting it and this is technically an option.  However I would discourage it.  $CWD is typically used in R/W capacity, and therefore it would be far more natural to set it to something like /var/hyperledger than anything under /etc.  If we had no other choice, this could be used as a last resort.

However, what I am suggesting is this is $CWD=/etc/.. is suboptimal for a variety of reasons.  Here is what I consider the ideal based on other projects I have put together.

# Do not set configuration elements as environment variables that are directly* read (e.g. MSP_CFG_PATH).  Configuration elements should all be initially defined in the configuration file(s).  Overrides are ok, of course.
# Do allow the path to the top-level configuration file to be specified (e.g. ""-c path/to/file"" or PEER_CFG_PATH are ok)
# Some sensible default for the top-level configuration file location that is relative to the development tree is fine (e.g. default-path == ""../peer/core.yaml"")
# Assume that any _external_ references in the configuration structure are either absolute FQPs, or relative to the config file itself.  E.g. if a configuration element specifies ""foo/bar/baz.txt"" and the config file was loaded from ./exampleconfig/config.yaml, assume this means ./exampleconfig/foo/bar/baz.txt.  If the config file was loaded from /etc/hyperledger/config.yaml, assume it means /etc/hyperledger/foo/bar/baz.txt.  This would mean we could have ./exampleconfig as the default in fabric.git but override it as necessary (e.g. from the sysvinit/systemd script or within the Dockerfile).

(*) Two exceptions: Viper overrides of configuration-file elements are fine.  And because of the way Viper works, an environment variable to specify the top-level configuration file (e.g. PEER_CFG_PATH) are ok.;;;","17/Feb/17 3:06 AM;greg.haskins;BTW: One of the reasons I say all this is: consider the fragility we have seen with the scheme in place when someone adds MSP_CFG_PATH but only updates the ENV keys for some of the Dockerfiles/compositions.  Things break.

If the above were followed (say ./exampleconfig/ contains the entire config/files needed) then installers (e.g. .rpm/.deb/Dockerfiles) need only follow a simple rule: copy ./exampleconfig/* to /etc/hyperledger/foo and set ""-c"" accordingly.  No more fragility.
;;;","17/Feb/17 3:20 AM;kchristidis;Thank you for expanding on the original post. Rules 2-4 are clear. Rule 1 is not.

Questions:
- Is a configuration element the path to a config file?
- What does reading directly mean?
- What would reading indirectly mean?;;;","17/Feb/17 3:46 AM;greg.haskins;Thanks Kostas,

The following address your questions above as items (1), (2), (3).

# By ""configuration elements"" I was thinking of really any type of parameterization of the program (command line args, environment variables, yaml keys) etc.
# What I meant was, don't try to add ad-hoc parameters and then directly read them such as: `path := os.Getenv(""MSP_CFG_PATH"") + viper.GetString(""peer.mspConfig"")`.  I am not suggesting that everything must be yaml/viper, but what I am suggesting is that some kind app-centralized notion of ""this is how I get config parameters"" is important over ad-hoc solutions such as above.  If one part of the program interprets viper.GetString(""peer.tls.cert"") as implicitly ""./""+path and  viper.GetString(""peer.mspConfig"") implicitly as os.GetEnv(""MSP_CFG_PATH"") + path, this is bad.
# Reading indirectly would be to use what I alluded to above: some kind of app-centric central library.  so viper.GetBool(""some.boolean"") is fine for booleans, and perhaps configutil.GetPath(""peer.tls.cert"") for strings that should be interpreted as either FQPs or config-relative.;;;","17/Feb/17 5:02 AM;kchristidis;That clears it for me, thank you. (Good suggestions all.);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document that Chaincode cannot read back written values in same transaction,FAB-2045,14548,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,binhn,sstone1,sstone1,05/Feb/17 5:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,06/Jun/17 2:52 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,Documentation,,,,,,"I am trying to port some chaincode from v0.6 to v1.0.
 I am running my v1.0 tests against the recent Docker images from the Hyperledger Hackfest.
 This chaincode makes calls to read data that it has written in the same transaction, but the data always seems to be read as nil:
{code:java}
err = stub.PutState(""test"", ""hello world"")
...
value, err = stub.GetState(""test"") // value == nil, should be ""hello world""
{code}
This does not match up with the design here, nor the previous behaviour in v0.6: [https://github.com/hyperledger/fabric/blob/master/core/ledger/ReadWriteSet.md]

In particular: _Also, if a transaction reads a value for a key that the transaction itself has written before, the last written value is returned instead of the value present in the committed snapshot; one implication of this is that if a transaction writes a value for a key before reading it from the committed snapshot, the key does not appear in the read set of the transaction._

Looking at the code it seems that lockBasedTxSimulator.GetState() does not look at the RWSet to see if a new value has been written in the current transaction.

I had a stab at an initial fix which seemed to fix the problem:
{code:java}
// GetState implements method in interface `ledger.TxSimulator`
func (s *lockBasedTxSimulator) GetState(ns string, key string) ([]byte, error) {
        // uncomment following lines for fix
	// value, ok := s.rwset.GetFromWriteSet(ns, key)
	// if ok {
        //      // use latest value from rwset rather than committed value from db
	// 	return value, nil
	// }
	return s.helper.getState(ns, key)
}
{code}
However it looks like a more complicated fix will be needed for lockBasedQueryExecutor for handling range queries?

In Review https://gerrit.hyperledger.org/r/#/c/10023/",,binhn,Clayton Sims,denyeart,manish-sethi,mastersingh24,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/17 6:17 AM;sstone1;reproduce.go;https://jira.hyperledger.org/secure/attachment/10419/reproduce.go",,,,,,,,,,,,,,,,,,,,FAB-758,,,,,,,,,"1|hzx4s7:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,binhn,Clayton Sims,denyeart,manish-sethi,mastersingh24,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Feb/17 10:19 PM;mastersingh24;we don't currently support ""read your own writes"" in v1.0

[~denyeart] [~manish-sethi] any other comments?;;;","06/Feb/17 10:43 PM;manish-sethi;I think that I forgot to correct the documentation while remove the RYW support in V1.0. Will fix it in the ReadWriteSet.md against this Jira item.;;;","06/Feb/17 11:10 PM;denyeart;That's right, v1 has a different model where the transaction execution is a proposal to apply something to state, rather than applying it to state.  Therefore there is not a good option for reading your writes on complex state queries. Other consensus driven databases behave in a similar way. 
 [~manish-sethi] could you use this work item to make the update to ReadWriteSet.md that you referenced. And then we'll also need to explain the behavior in the external chaincode authoring documentation.  ;;;","11/Feb/17 4:50 AM;sstone1;As per my comments in CR https://gerrit.hyperledger.org/r/#/c/5707/, updating the design documentation to reflect the changes is not sufficient:

I think the chaincode documentation needs to be updated to reference the transaction behaviour. One, because it's more likely chaincode developers will read it then a design document, and two because it's misleading:

https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim#ChaincodeStubInterface

// PutState writes the specified `value` and `key` into the ledger.
PutState(key string, value []byte) error

With the current behaviour, that's wrong. PutState does not write anything into the ledger. It puts it into the write set for the current transaction simulation.
;;;","11/Feb/17 9:18 PM;manish-sethi;As Simon pointed out in the comments for https://gerrit.hyperledger.org/r/#/c/5707, fixing the doc - ReadWriteSet.md should not be resolution of this Jira item. This Jira item is about fixing the chaincode documentation.

Created a separate Jira (https://jira.hyperledger.org/browse/FAB-2192) for fixing ReadWriteSet.md and unassigned myself for now. Does anyone know who is working on chaincode docs?;;;","01/Jun/17 10:20 PM;binhn;[~manish-sethi] [~muralisr]

I've been working on the chaincode doc [https://gerrit.hyperledger.org/r/#/c/9263/]  so let me take this one then;;;","02/Jun/17 12:48 AM;denyeart;[~binhn] Thanks for updating the chaincode readthedocs.

Actually I am planning to do a final pass to finalize all function comments in:

[https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim#ChaincodeStubInterface]

and was going to use this defect to do that.  But I can create a separate defect to do that.  Either way is fine, just let me know which route you'd like to take.;;;","02/Jun/17 1:12 AM;binhn;[~denyeart]

In Review [https://gerrit.hyperledger.org/r/#/c/10023/]

 ;;;","06/Jun/17 2:53 AM;Clayton Sims;CR merged so marking done;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AccessControlShim not available in chaincode base image,FAB-2046,14549,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,angelo.decaro,sstone1,sstone1,05/Feb/17 6:10 AM,10/Oct/18 8:05 PM,28/Oct/23 2:58 AM,10/Oct/18 8:05 PM,,,,,Future,,,fabric-crypto,,,,0,,,,,,,,"I am trying to port some chaincode from v0.6 to v1.0.
I am running my v1.0 tests against the recent Docker images from the Hyperledger Hackfest.
It seems that the ReadCertAttribute() method has moved from the usual ""shim"" package to ""github.com/hyperledger/fabric/accesscontrol/impl"".
However this package is not included in the chaincode base image and so this ""impl"" package and a couple of other required packages from the Hyperledger Fabric source needs to be vendored into the chaincode directory in order to deploy.

{code:none}
$ grep -R ReadCertAttribute .
./accesscontrol/api.go:	ReadCertAttribute(attributeName string) ([]byte, error)
./accesscontrol/impl/chaincode.go://ReadCertAttribute is used to read an specific attribute from the transaction certificate, *attributeName* is passed as input parameter to this function.
./accesscontrol/impl/chaincode.go://  attrValue,error:=stub.ReadCertAttribute(""position"")
./accesscontrol/impl/chaincode.go:func (shim *AccessControlShim) ReadCertAttribute(attributeName string) ([]byte, error) {
./examples/chaincode/go/asset_management_with_roles/asset_management_with_roles.go:	callerRole, err := impl.NewAccessControlShim(stub).ReadCertAttribute(""role"")
./examples/chaincode/go/asset_management_with_roles/asset_management_with_roles.go:	callerAccount, err := impl.NewAccessControlShim(stub).ReadCertAttribute(""account"")
./examples/chaincode/go/authorizable_counter/authorizable_counter.go:	val, err := impl.NewAccessControlShim(stub).ReadCertAttribute(""position"")
$ tar tf build/goshim.tar.bz2 | grep accesscontrol
$
{code}
",,angelo.decaro,binhn,Clayton Sims,elli-androulaki,muralisr,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzwrvr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,angelo.decaro,binhn,Clayton Sims,elli-androulaki,muralisr,sstone1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/17 10:37 AM;Clayton Sims;Binh - I talked to Murali and thought this one would fall to you.;;;","08/Feb/17 10:37 AM;Clayton Sims;Can you take a look;;;","08/Feb/17 12:23 PM;muralisr;The recent image refactoring probably caused this failure (but [~greg.haskins] [~mastersingh24] likely know full details).

One thing.. ACL support is not there on the chaincode side yet (CRs https://gerrit.hyperledger.org/r/#/c/5143/ and https://gerrit.hyperledger.org/r/#/c/5091/ will go some way towards ACL support). So even if you those APIs were available, they would be unusable. 

Adding [~adc]. 

Just saw this was assigned [~binhn]... more appropriate to assign to [~adc];;;","08/Mar/17 7:56 AM;binhn;Currently, at the fabric level, access is controlled by policies on the channel, where accessing chaincode requires writer policy. See this document for detail https://github.com/hyperledger/fabric/blob/master/docs/policies.md

There are some system APIs for the system chaincode to make custom access decision based on policies https://gerrit.hyperledger.org/r/#/c/6731  However, those are not (yet) considered for chaincode. The plan is to offer a separate library for chaincode to use that also includes attributes, but it is likely post 1.0.

For now (alpha), you may use GetCreator() ([]byte, error) to retrieve the transactor's cert and make decision based on that. ;;;","09/Mar/17 10:56 PM;Clayton Sims;Lower priority based on Weds scrum call.;;;","08/Apr/17 4:46 AM;binhn;I am moving this to post 1.0 as it require cert attributes;;;","29/Nov/17 9:45 PM;elli-androulaki;Added the right Angelo De Caro :);;;","10/Oct/18 8:05 PM;angelo.decaro;this issue does not exists anymore, the accesscontrol package is not available anymore;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add delete by ID to CouchDB Layer,FAB-2047,14550,14096,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,chris.elder,chris.elder,05/Feb/17 6:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Feb/17 11:47 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Add the capability to delete records by ID to the CouchDB layer.  This is a generic feature available all users of CouchDB.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk1z:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation needs to reflect administrator requirements for updating peer x509,FAB-2048,14551,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,greg.haskins,greg.haskins,05/Feb/17 11:46 AM,23/Jan/20 3:49 AM,28/Oct/23 2:58 AM,23/Jan/20 3:49 AM,,,,,,,,fabric-docs,,,,0,stale-item,,,,,,,"For reference, see: https://github.com/hyperledger/fabric/blob/923bf3a8e774249344b09c535b726799aec865bd/core/chaincode/chaincode_support.go#L318",,ChristopherFerris,greg.haskins,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxk27:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,greg.haskins,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Feb/17 11:47 AM;greg.haskins;or, alternatively, creatively solve the issue in code (such as via the Stop() handler as [~muralisr] suggested);;;","18/Apr/18 9:38 PM;ChristopherFerris;[~greg.haskins] this is ancient, but marked HIGH... is it still relevant? Can it be closed?;;;","23/Jan/20 3:49 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate whether BDD test for building chaincode is broken,FAB-2051,14554,,Task,Closed,FAB,Fabric,software,denyeart,,,Lowest,Invalid,greg.haskins,greg.haskins,greg.haskins,05/Feb/17 12:09 PM,30/Jul/19 10:03 AM,28/Oct/23 2:58 AM,30/Jul/19 10:03 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,https://github.com/hyperledger/fabric/blob/923bf3a8e774249344b09c535b726799aec865bd/bddtests/context_endorser.go#L57,,ChristopherFerris,greg.haskins,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk2n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,greg.haskins,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jun/17 7:40 PM;ChristopherFerris;[~greg.haskins] is this still relevant? Can it be closed?;;;","30/Jul/19 10:03 AM;mastersingh24;BDD replace with integration tests;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Finish ledger API GetHistoryForKey(),FAB-2052,14555,13911,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,05/Feb/17 6:11 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 11:21 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Finish ledger API GetHistoryForKey()

Finish the implementation for ledger API GetHistoryForKey().

Lookup the history of key updates by blockNum:tranNum.

For each history record, retrieve the txID and key value
from block storage. This requires passing a block storage handle
into the history query executor, and exposing the block storage
test environment to other packages. Historic txID and key value
is returned to client to enable simple provenance scenarios.

Added tests for GetHistoryForKey() including recovery scenarios.
One recovery test required a fix to block storage syncIndex().
Also tested end-to-end with peer.
",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk2v:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move gossip proto under protos/,FAB-2053,14556,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,05/Feb/17 9:29 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,07/Feb/17 5:52 PM,,,,,,,,,,,,0,,,,,,,,"Currently the gossip proto files are under gossip/proto/
They need to be moved to be under protos/.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxk33:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger syncIndex() always re-indexes last block indexed,FAB-2054,14557,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,denyeart,denyeart,05/Feb/17 11:43 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Feb/17 11:55 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Need to skip the last block indexed within syncIndex().  See the code at:
/fabric/common/blkstorage/fsblkstorage/blockfile_mgr.go.",,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-758,,,,,,,,,"1|hzx7pz:",,,,,,Sprint 11 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Feb/17 8:22 PM;manish-sethi;Changing it from bug to task as it does not change the external behavior in any manner.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetHistoryForKey should indicate key deletions,FAB-2055,14558,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,denyeart,denyeart,06/Feb/17 12:05 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,04/Apr/17 4:49 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,GetHistoryForKey should indicate key deletions as well as key modifications.,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-199,,,,,,,,,"1|hzx57r:",,,,Unset,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,Unset,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetHistoryForKey should indicate timestamp of key modification,FAB-2056,14559,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,denyeart,denyeart,06/Feb/17 12:07 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,04/Apr/17 4:50 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"* Since there is no system wide common time, we can use the timestamp of the submitted transaction for now (in the payload.header.ChannelHeader).",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-199,,,,,,,,,"1|hzx57z:",,,,Unset,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 4:50 AM;denyeart;Done in FAB-2055.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update client SDKs to GRPC 1.1.x library,FAB-2059,14562,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,06/Feb/17 5:56 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,08/Mar/17 12:55 PM,,,,,,,,fabric-sdk-node,fabric-sdk-py,,,0,,,,,,,,"A new version of the GRPC library was released - v1.1.x

Recommend that all of the SDKs for languages which use the C core update to this version.  That includes both NodeJS and Python SDKs",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5xr:",,,,Unset,,Sprint 12 - SDK node,Sprint 13 - SDK node,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end tests are failing on fabric-sdk-node commit# a8ff8cd,FAB-2060,14563,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,rameshthoomu,rameshthoomu,06/Feb/17 4:14 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,08/Feb/17 10:04 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"*Follow below steps to recreate this issue:*

Step1: Build peer and orderer images on Fabric latest commits
Step2: Build fabric ca image on fabric-ca latest commit
Step3: Pull latest code or  commit# a8ff8cd from sdk-node and execute end-to-end.js after install npm

Build log reference: 
https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/82/console
https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/77/console

 recoveryParam: 1 }
00:19:40 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
00:19:40 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:191:13)
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
00:19:40 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
00:19:40 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
00:19:40     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:191:13)
00:19:40     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
00:19:40 [31m[2017-02-05 00:19:40.589] [ERROR] E2E - [39mdeploy proposal was bad
00:19:40 [31m[2017-02-05 00:19:40.590] [ERROR] E2E - [39mdeploy proposal was bad
00:19:40 not ok 3 Failed to send Proposal or receive valid response. Response null or status is not 200. exiting...
00:19:40   ---
00:19:40     operator: fail
00:19:40     at: process._tickCallback (internal/process/next_tick.js:103:7)
00:19:40   ...
00:19:40 [32m[2017-02-05 00:19:40.591] [INFO] E2E - [39mDisconnecting the event hub
00:19:40 not ok 4 Failed to get transaction notification within the timeout period
00:19:40   ---
00:19:40     operator: fail
00:19:40     at: process._tickCallback (internal/process/next_tick.js:103:7)",Jenkins CI,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1741,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk3j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Feb/17 12:07 AM;rameshthoomu;*peer logs:*
f4125848bea488e5e1cfc85db5ac0) lock
2017-02-06 14:53:05.240 UTC [chaincode-platform] func1 -> ERRO 2fb Failed to generate platform-specific docker build: could not decode url: ChaincodeSpec's path/URL cannot be empty
2017-02-06 14:53:05.245 UTC [dockercontroller] deployImage -> ERRO 2fc Error building images: Failed to generate platform-specific docker build: could not decode url: ChaincodeSpec's path/URL canno                                        t be empty
2017-02-06 14:53:05.245 UTC [dockercontroller] deployImage -> ERRO 2fd Image Output:
********************

********************
*fabric-sdk-node Commit#*

https://github.com/hyperledger/fabric-sdk-node/commit/a8ff8cdec52cb4ca80db3488599347bbf77b033f
;;;","07/Feb/17 2:19 AM;bmos299;This one is needed to cut the Alpha release.   I talked to Binh, and we want the Alpha to work with the gettingstarted in the docs, so please let us know what we would need to change externally (i.e. no more dockerfile, etc).  Thanks, bmos299;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip inter-org confidentiality,FAB-2061,14564,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,06/Feb/17 4:19 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,23/Apr/17 6:20 AM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,"The current membership infrastructure leaks information to organizations that might be confidential.
Let’s assume for simplicity that we have 3 organizations: X, Y, Z and only 2 channels: A and B, and the membership of channel A is: {X, Y} and the membership of channel B is: {Y, Z} .
AliveMessages and peer identities of organization X would be disseminated to organization Z although organization X and Z don’t share any channel. 
It might be that organization X doesn’t want organization Z to know anything about its peers.

An additional problem exists: if X and Y are in channel A, and Y and Z are in channel B, and X and Z are in channel C, then alive messages from X reach Y and then Z, and then Z knows that X and Y have a channel (A) that Z isn't part of (B or C).

In order to tackle this - we need (probably) to fine-grain more the membership routing policies, so that each org would gossip about a foreign org, only to that foreign org.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzx59j:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to be able to leverage Organization-Unit based access control policies,FAB-2062,14565,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,06/Feb/17 5:47 PM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,14/Feb/17 4:54 AM,,,,,,,,fabric-crypto,,,,0,Security,,,,,,,"Within this item we aim to offer the ability to support policies that authorize identities based on the organization units an identity belongs to.
This task can be broken down into the following parts:
 - ensure that definition of MSPPrincipals using OrganizationUnit is sound
 - implement the getOrganizationUnit method of MSP identities
 - enhance the language we use to describe access policies to support organization-unit-based classification of MSP identities


",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2089,,,,,,,,,"1|hzx6f3:",,,,Unset,,Sprint 11 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to have be able to leverage an MSP with its internal upgrade policy,FAB-2063,14566,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ales,elli-androulaki,elli-androulaki,06/Feb/17 5:53 PM,23/Jan/20 3:50 AM,28/Oct/23 2:58 AM,23/Jan/20 3:50 AM,,,,,Future,,,fabric-crypto,,,,0,Security,stale-item,,,,,,This item refers to the implementation to a policy of type MSP. This indicates policies defined within an MSP infrastructure for the latter to assess MSP reconfiguration rights/requests.,,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2089,,,,,,,,,"1|hzxb13:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/17 5:48 PM;elli-androulaki;This, [~jyellick] confirmed that will not be necessary for v1. So moving it to backlog.;;;","13/Apr/17 3:04 AM;elli-androulaki;This is for post v1.1.;;;","23/Jan/20 3:50 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add documentation for ""good practice for use of MSPs"" in MSPs document",FAB-2067,14570,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,elli-androulaki,elli-androulaki,elli-androulaki,07/Feb/17 2:46 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,19/Apr/17 6:49 PM,,,,,DUPLICATE,,,fabric-crypto,,,,0,,,,,,,,"We need documentation on good practices associated to MSPs and their use.
The mapping between an MSP and organization of the system, admin-policies, revocation lists, etc.",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2090,,,,,,,,,"1|hzx5fr:",,,,Unset,,Sprint 12 - Crypto,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 15 - Crypto,Sprint 16 - Crypto,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/17 6:49 PM;elli-androulaki;Duplicate with FAB-2094.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an MSP user I would like to enhance SatisfiesMSPPrincipal call with options,FAB-2068,14571,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,07/Feb/17 2:51 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,14/Feb/17 4:54 AM,,,,,,,,fabric-crypto,,,,0,Security,,,,,,,"Within this item we target on enhancing MSPPrincipal validation function (SatisifesMSPPrincipal) with signature-based options. This would automatically enable us to support admin policies vs. admin identities within an MSP, and expose it to the developer leveraging MSP functionalities. ",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2089,,,,,,,,,"1|hzx6fb:",,,,Unset,,Sprint 11 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As a fabric-developer I want to investigate the ways to authenticate ConnectionEstablish gossip messages,FAB-2069,14572,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,07/Feb/17 3:07 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,22/Feb/17 4:18 PM,,,,,,,,fabric-crypto,,,,0,Security,,,,,,,"ConnectionEstablished messages are needed to be confirmed to having derived from members of a blockchain network. One way to authenticate such messages is that the peer checks the signature against all channel MSPs/readers. Another way would be that there is an automated way of updating some central MSPManager structure. Last but not least, we could allow for ConnectionEstablished messages go unauthenticated till the scope of the messages they include is revealed.",,angelo.decaro,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1554,,,,,,,,,"1|hzx68n:",,,,Unset,,Sprint 11 - Crypto,Sprint 12 - Crypto,,,,,,,,,,,,Unset,,,,,,,,,,,angelo.decaro,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/17 11:25 PM;angelo.decaro;[~elli-androulaki] Just to make sure I understood: Is this related to updated of the local MSP?;;;","21/Feb/17 6:11 PM;elli-androulaki;[~yacovm] do we still need this you think?;;;","21/Feb/17 6:19 PM;yacovm;Need what, the JIRA item, or the ability to authenticate the connection-established messages?
We call https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L443-L447 at connection establishment which calls https://github.com/hyperledger/fabric/blob/master/gossip/identity/identity.go#L115 which (in production) does https://github.com/hyperledger/fabric/blob/master/peer/gossip/mcs/mcs.go#L117-L137

;;;","22/Feb/17 4:17 PM;elli-androulaki;Ok, will open a bug for the middle function. Angelo and I found a way to have this perform better :);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Populate isValidated protobuf flag upon transaction queries,FAB-2071,14574,14094,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ruslankryukov,denyeart,denyeart,07/Feb/17 3:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,27/Feb/17 7:38 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,For example upon qscc GetTransactionById() the returned transaction envelope should indicate if the transaction was validated or not.,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2243,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk47:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/17 7:38 PM;denyeart;Done in FAB-2243.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to be able to update Local MSP without needing to reboot the peer,FAB-2072,14575,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,mathiasb303,elli-androulaki,elli-androulaki,07/Feb/17 3:12 AM,23/Jan/20 10:55 PM,28/Oct/23 2:58 AM,23/Jan/20 10:55 PM,,,,,Future,,,fabric-crypto,,,,2,Security,stale-item,,,,,,"This is a proposal on how to enhance peer API to support updates to local MSP without requiring the peer to (re-)boot.

In the future this API can be extended to configure other aspects of a peer's operation.

We aim to fully support this capability via extending CSCC with an ""updateMSP"" function, in three stages:
 # At the first stage we assume that the peer's admin is able to create in the peer's filesystem a folder to include the new msp configuration; subsequently the peer's admin would only need to request the peer to reload its local msp from this folder (FAB-6254)
 # At a second stage, the peer's admin would pass to the peer the entire new msp configuration and ask from the peer to load msp updates from the request's arguments (FAB-7249)
 # Adjust the way gossip advertises the gossip identifier of the peer (PKI-ID) in a way that can be renewed when the signing identity of the peer is renewed (as part of its local MSP update). This FAB design is still in progress.

In both cases, the peer would need to update its .yaml file with the updated msp information.

 

 ",,binhn,denyeart,elli-androulaki,mastersingh24,nyet,shanlusun,sykesm,TiantianGao,tylerwince,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,Unset,Unset,,FAB-3167,,,,,Unset,,,,"1|hzx6kv:",,,,Unset,Unset,Sprint 12 - Crypto,Sprint 13 - Crypto,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,denyeart,elli-androulaki,mastersingh24,nyet,shanlusun,sykesm,TiantianGao,tylerwince,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/17 10:03 PM;elli-androulaki;Here we would need to explore if finer grained access control is needed...;;;","15/Feb/17 6:28 PM;elli-androulaki;Here it was decided to go for manual update of local MSPs. [~binhn] [~muralisr] [~ales] [~adc] [~yacovm] to confirm this would be fine for V1.
If this is the case, we can list this item to the ""Backlog"".;;;","15/Feb/17 6:48 PM;yacovm;{quote}Here it was decided to go for manual update of local MSPs{quote}

I think that manually maintaining local MSPs is a mistake.
* How do you keep local MSPs of peers in sync? Even after taking into account the fact that the local MSPs are only used for intra-org cert/identity validation, you are basically inducing a hand-made constraint on an operations team of a fabric installation - now they need to keep this information up to date.
* When a peer joins a channel, it uses the local MSP. It means that if some revocation has occurred, or an addition/change of either a peer-Org admin, or a (however rare) change of the org rootCA, you need to propagate this information to all peers in the organization.
* Local MSPs are loaded at peer boot time. How do you ""refresh"" it on-the-fly? I assume you don't expect peers to be restarted to reload the local MSP configuration (of course, they can read periodically from the file system, but that's also a certain problem that I wanted to point in the current setup)

In my opinion, for alpha we should go with what we have due to the time constraints, but all MSP-related stuff need to be as automated and intervention-free as possible.

I think that if we can have an identity channel not only the problems above would be solved, but we would also drastically simplify the channel creation process.
Right now, if we have *m* orgs, one of the orgs creates a channel and the other *m-1* orgs have to send that org their rootCA certs out of band, and then that org operator needs to create either a configuration file manually, or a configuration file with a directory structure and do lots of stuff manually.
Since this is out of band, there is no way to script/automate this *outside of fabric* because if we have different orgs- the only common technical entity they have is that they all run fabric- therefore, I think that fabric should automate this root CA dissemination process, and an identity channel is a way to automate it.

Also tagging here [~jyellick] and [~mastersingh24] ,and [~C0rWin] maybe they have some comments too. ;;;","15/Feb/17 7:40 PM;elli-androulaki;So, just to make this clear. I agree we will need to automate this and I am in favor of an identity channel based approach. The decision I mentioned above was taken in a discussion with [~binhn] and [~muralisr], it referred to v1 and to my understanding the reason was time constraints. 
Revised my statement above regarding the ""marking of this item"" as it was admittedly misleading.

;;;","15/Feb/17 11:26 PM;binhn;[~yacovm] We can and should leverage existing tools to do software update;;;","17/Feb/17 1:16 AM;mastersingh24;I don't think that configuration of the ""local MSP"" should ever go through the ordering service / channels.
I also think we are going a bit overboard on thinking that this is going to be a frequent thing which happens.

If we need to make it better for an organization to manage the ""crypto"" material for the peers - agreed.  We need good peer admin APIs and maybe some admin tooling around this (e.g. a mgmt / admin console that can connect to all the peers in my org).  We could easily allow you to update / push a new root certificate, etc.;;;","17/Feb/17 2:20 AM;mastersingh24;Is this about updating the ""local MSP"" (aka identity of peers) or about updating the MSPs for the orgs within a channel?

I think we should support a model where we have a ""identity channel"" in the ordering service which deals with all MSPs for the ""network"" and then broadcasts updates to all relevant channels.  I believe this is what [~jyellick] had proposed?;;;","17/Feb/17 2:55 AM;yacovm;All I'm saying is that it's a big disadvantage that organizations have to send other organizations certificates out of band in order to create a channel.
Updates that are infrequent *and* intra-org, like changing root CA certs of the organization, could of course go not through the ordering service, but I think that MSP management that is inter-org, should not be maintained by the fabric participants, but by the fabric ordering service just like in the identity channel idea you mentioned here. ;;;","17/Feb/17 3:27 AM;elli-androulaki;[~mastersingh24] what you said is correct for the identity channel. 
In addition (I think thats where [~yacovm] was going), one could leverage the unique per MSP identifier to have peers update their local MSP (CAs, CRLs) according to valid Identity channel's updates that  refer to their MSP. 
Adding @jyellick to confirm.

Updating the singing identity of a peer of course would only be possible by manual intervention by the peer's admin.

For v1, we can only go manual for everything given that there is no enough time. But for the level of ""manual"" did you mean having an admin API implemented by next week, or as an addon in the weeks to follow?
;;;","17/Feb/17 2:18 PM;mastersingh24;[~ellaki] I was not expecting ""admin"" API for next week but its something I think we are going to need once we really start trying to configure everything;;;","17/Feb/17 5:03 PM;elli-androulaki;[~mastersingh24] understood, thanks!;;;","08/Apr/17 4:58 AM;binhn;I am moving this to post 1.0;;;","13/Mar/18 11:59 AM;denyeart;Removing v1.2 tag - not a top priority per maintainer v1.2 planning meeting.;;;","04/Jan/19 2:20 AM;tylerwince;Has there been any update on this issue?;;;","23/Jan/20 3:50 AM;sykesm;Stale;;;","23/Jan/20 7:49 AM;nyet;Re-opening, this affects us.;;;","23/Jan/20 10:55 PM;sykesm;Per the comment in the parent issue, we have moved to an RFC based process for Fabric.

Given the interest in this issue, I'd request that you propose an RFC here: https://github.com/hyperledger/fabric-rfcs/tree/master

Thanks.;;;",,,,,,,,,,,,,,,,,,,,,,,
Implement hierarchical configtx structure,FAB-2073,14576,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,07/Feb/17 3:46 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,25/Feb/17 4:32 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"The current configuration structure is a flat list, which causes some problems, especially when attempting to differentiate between the roles of ordering organizations and peer organizations.  A hierarchical model is slightly more complex from a data structure perspective, but is more natural and expressive.

This work should be careful to ensure that the older model can be supported in the degenerate case.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx69b:",,,,Unset,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,13.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consistently refer to Configuration* as Config in protos,FAB-2074,14577,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,07/Feb/17 3:46 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk5r:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test for Gossip protocol ,FAB-2075,14578,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,AdnanChoudhury,AdnanChoudhury,07/Feb/17 4:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-quality,,,,0,gossip,,,,,,,1) Create test descriptions for the Gossip Protocol test plans. 2) Develop the tests 3) Run tests manually+in the CI ,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk5z:",,,,,,Sprint 11 - consensus,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"add flags when running driver.sh script, for some config yaml variables",FAB-2076,14579,14306,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,scottz,scottz,scottz,07/Feb/17 6:25 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Feb/17 7:22 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk67:",,,,,,Sprint 10 - Quality,Sprint 11 - Quality,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,Sprint 17 - Quality,,,,,,,,,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Access control for lifecycle system chaincode ,FAB-2077,14580,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wlahti,wlahti,07/Feb/17 6:47 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,13/Apr/17 3:42 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"We need a way to implement access control for the lifecycle system chaincode. 

We anticipate this to be split into four different sub-tasks (assuming success on sub-task 1): 
1. determine if we can add a lifecycle policy to the configuration block to handle access control 
2. implement the lifecycle policy and add it to the configuration block
3. figure out how to use the MSP API to validate the transaction based on the policy and identity of the caller
4. use the MSP API within the endorser system chaincode",,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxk6f:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:41 PM;muralisr;[~wlahti]  [~angelo.decaro] 's ACL SCC CRs  take care of this
https://gerrit.hyperledger.org/r/#/c/7671/
https://gerrit.hyperledger.org/r/#/c/7651/
https://gerrit.hyperledger.org/r/#/c/6279/
https://gerrit.hyperledger.org/r/#/c/7649/

Closing this one

(We really need an Invalid category);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer on the orderer side I want to check channel ACLs upon processing orderer type of messages,FAB-2078,14581,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,07/Feb/17 7:20 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,22/Feb/17 4:30 PM,,,,,,,,fabric-crypto,,,,0,Security,,,,,,,"This work-item includes the authentication of channel-scoped messages received by the orderers against that channel's readers and writers. In particular orderers should check
- whether the message creator if broadcast, was submitted by an entity satisfying channel.writers policy
- whether the message creator if deliver, was submitted by an entity satisfying channel.readers policy
",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1329,,,,,,,,,"1|hzxk5b:",,,,Unset,,Sprint 12 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/17 6:25 PM;elli-androulaki;Some work around this has been done by Jason Yellick. Jason Yellick would you confirm this? If so, we ll indicate we only do ""review"" here.
Thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to enable the orderers with chain creation acls upon a chain creation request,FAB-2079,14582,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,07/Feb/17 7:22 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,22/Feb/17 4:25 PM,,,,,,,,fabric-crypto,,,,0,Security,,,,,,,Here we want to enhance the orderers with logic of checking a chain creation specific policy upon a chain creation request.,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1329,,,,,,,,,"1|hzxk4v:",,,,Unset,,Sprint 12 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/17 5:51 PM;elli-androulaki;Some work around this has been done by [~jyellick]. [~jyellick] would you confirm this? If so i ll just update the title to reflect that we will only be reviewing this.
Thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to ensure that peers perform channel policy checks against received proposals,FAB-2080,14583,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,07/Feb/17 7:26 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,21/Feb/17 9:55 PM,,,,,,,,fabric-crypto,,,,0,Security,,,,,,,"Peers upon receiving a proposal need to ensure that the creator of the proposal is within the channel.Writers set.

In the specific case of an lccc proposal, the peer needs to check that the creator complies with the lccc policy (chaincode creation policy).

",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1329,,,,,,,,,"1|hzxk53:",,,,Unset,,Sprint 12 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode-chaincode invocation needs to allow calling system chaincode,FAB-2081,14584,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,07/Feb/17 7:56 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,20/Apr/17 9:37 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,Chaincode to chaincode invocation works only if the called chaincode is a user chaincode. ,,angelo.decaro,denyeart,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk6n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,denyeart,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 12:07 AM;angelo.decaro;[~muralisr] may you put more details in to better understand under which condition that should happen? For example, a reader of the channel should be allowed to do that or it needs to be an admin? What about chainless scenarios?;;;","03/Mar/17 3:27 AM;muralisr;[~angelo.decaro] I'm not sure one size will fit all. Would it be better If we divide access into two parts
# At the system chaincode level - ""can this SCC be called from Chaincode at all""  and ""can this SCC called by an external user at all (say from SDK)"" ?
# Within the Invoke - ACL using based on proposal

With that, we can use (1) to completely eliminate cases where a SCC should not be called all except by the fabric (escc, vscc, etc). That will leaver user written SCCs that are written specifically for such accesses. Then we can leave (2) to the user.

Now, (1) is not currently there in the system chaincode framework. But we can easily add support for that as attributes to the SCC.

For now I'll create two tasks for this (1)  to get the mechanics of the bug fixed so CC-SCC call can be done (2) to implement the security aspects.

[~binhn] ;;;","12/Apr/17 6:53 AM;denyeart;[~muralisr] [~binhn] [~adc]
Is this needed for 1.0.0? Is it a defect or new feature?;;;","20/Apr/17 9:36 AM;muralisr;per my 02/Mar/17 comment above this is being handled in two parts. This is a dup of the following
* https://jira.hyperledger.org/browse/FAB-2997 - takes care of ""don't invoke some scc thru proposals"" and ""don't invoke some scc thru cc2cc""
* ACL checks done for various SCCs - https://jira.hyperledger.org/browse/FAB-2969 https://jira.hyperledger.org/browse/FAB-2103 https://jira.hyperledger.org/browse/FAB-2969 https://jira.hyperledger.org/browse/FAB-2969

Given all the attention above to SCC calls this is clearly a dup. Closing this out.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
batchsize change is ignored when using non-default channel ID,FAB-2083,14586,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,scottz,suryalnvs,suryalnvs,07/Feb/17 11:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,02/Mar/17 8:15 AM,v1.0.0,,,,v1.0.0,,,fabric-orderer,,,,0,quality,,,,,,,"Test failures found with this and later loads, by Surya and Scott:
commit 5d9e4ede298ab646ac918dc5b034c7d319dd1d9a
commit date: Mon Jan 30 14:34:38 2017 +0000

When using the default testchainid, the same test passes (only 3 blocks delivered as expected).

When using a non-default channelID name such as test-chan.00000
with 1 channel, 1 orderer, either kafka or solo:
even though I change the batchSize to 20 on the command line, it still uses the default batchSize (10).
OTE_TXS=55  ORDERER_GENESIS_BATCHSIZE_MAXMESSAGECOUNT=20  ./ote

Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 10
Consumer recvd a block, o 0 c 0 blkNum 2 numtrans 10
Consumer recvd a block, o 0 c 0 blkNum 3 numtrans 10
Consumer recvd a block, o 0 c 0 blkNum 4 numtrans 10
Consumer recvd a block, o 0 c 0 blkNum 5 numtrans 10
Consumer recvd a block, o 0 c 0 blkNum 6 numtrans 5
in compute(): totalTxRecv[]= [55], totalBlockRecv[]= [6]
Error: Unexpected Block count 6 (expected 3) on ordIndx=0 channelIDs[0]=test-chan.00000, chanSentTxTotal=55 BatchSize=20","Linux 16.04, vagrant, docker containers for each orderer and kafka-broke",scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Feb/17 11:16 AM;suryalnvs;output.txt;https://jira.hyperledger.org/secure/attachment/10423/output.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk73:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/17 8:14 AM;scottz;Close this issue. It was retested and PASSED on March 1st, using
fabric-ca commit # c9fb04e0f795589485915883fcbca3ae2fc0aaad (current as of 5pm March 1st)
fabric commit # 29d7fc035df697a68d271d628e693c556354486f (current as of Feb 27);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Marbles Chaincode needs to explicity maintain PartialCompositeKey indices,FAB-2085,14588,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,balaji.viswanathan,balaji.viswanathan,balaji.viswanathan,07/Feb/17 4:18 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Feb/17 12:32 AM,,,,,v1.0.0-alpha1,,,fabric-ledger,,,,0,,,,,,,,"Chaincode needs to maintain the PartialCompositeKey index explicitly on Delete or Update of a key/value in state
",,balaji.viswanathan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7q7:",,,,,,Sprint 11 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,balaji.viswanathan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fetch a block which contains a transaction,FAB-2086,14589,14094,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ruslankryukov,ruslankryukov,ruslankryukov,07/Feb/17 6:07 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Feb/17 12:35 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"I have a transaction id and I need to get a block, which contains this transaction. ",,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk7j:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to be able to leverage MSP admin based access control policies,FAB-2087,14590,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,07/Feb/17 7:36 PM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,24/Feb/17 6:09 PM,,,,,,,,fabric-crypto,,,,0,Security,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2089,,,,,,,,,"1|hzxk4f:",,,,Unset,,Sprint 12 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to be able to perform proper access control on event registration upon received requests,FAB-2088,14591,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,elli-androulaki,elli-androulaki,07/Feb/17 7:56 PM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,20/Apr/17 7:07 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,Security,,,,,,,"As per today's discussion with [~jimthematrix], [~binhn], [~muralisr]:

Ultimately, this issue aims at the implementation of a channel-basis access control check upon an event registration request.
Currently event infrastructure does not support per-chain requests. Therefore we can identify the following steps towards enforcing access control at event registration.

1. Treat the event registration as a chain-free request, and request that the creator of an event registration request is a member of the same organisation as the peer the request is submitted to. Limitations: (i) requires an one-to-one mapping between MSPs and organisations (also considered by current gossip protocols), (ii) cannot accommodate cases of applications that do not own their own peer. 

2. Ensure that the creator of the event registration request is allowed to read all the channels the peer (the request is submitted to ) has joined. This assumes a static channel configuration and the check is needed to be repeated each time the peer joins a new channel. 

3. Ensure that the creator of the event registration request is allowed to read all the channels the peer (the request is submitted to) has joined. This assumes a dynamic channel configuration, and the check needs to be repeated each time a new (valid) config block is received. 

4. The creator registers on events on a per-channel basis, and read policies of the intended channel are checked. This check needs to be repeated each time that channel's is reconfigured. ",,binhn,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1329,,,,,,,,,"1|hzx5dz:",,,,Unset,,Sprint 16 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/17 6:11 PM;elli-androulaki;This was decided to be tackled at a later time, when event registration infrastructure is in place.
Therefore this  will be moved to a later sprint.

Adding [~mastersingh24], [~jimthematrix] for confirmation. ;;;","11/Apr/17 7:04 AM;binhn;Any guess on workload? #1 would be easiest as we already have a function to do that for local MSP, but others would require more work, especially we need code to decide whether to deliver events or not based on which channel the listeners can access.;;;","14/Apr/17 1:27 AM;elli-androulaki;Right (1) would be easier, and in the end i am not sure (2) would buy us a lot. That is, it is not clear to me whether it would be feasible to have clients from Org1, and peers from Org2, and clients to have joined all the channels peers have joined. ;;;","14/Apr/17 7:48 PM;elli-androulaki;Ok, so Jim's CR https://gerrit.hyperledger.org/r/#/c/7905/ is very close to what (1) needs. @adc, can you work with Jim on this?
Thanks!;;;","19/Apr/17 6:46 AM;binhn;https://gerrit.hyperledger.org/r/#/c/7905;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to implement MSP primitives for MPS-dependent policy evaluation,FAB-2089,14592,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,elli-androulaki,elli-androulaki,07/Feb/17 8:07 PM,12/Sep/18 6:54 PM,28/Oct/23 2:58 AM,12/Sep/18 6:54 PM,,,,,Future,,,fabric-crypto,,,,0,Security,,,,,,,"This relates to the implementation of :
 - SatisfiesMSPPrincipal function of MSPs with support for Admin of MSPs 
 - SatisfiesMSPPrincipal function of MSPs with support for OrganizationUnit of MSPs
 - Internal MSP reconfiguration policies",,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-5,,MSP-dependent policies support,To Do,,,Unset,,,,"1|hzxk7r:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jul/18 9:34 PM;ChristopherFerris;[~elli-androulaki] can this be marked Done?;;;","12/Sep/18 6:54 PM;elli-androulaki;Yes, indeed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to do a security review over security-sensitive components of the system,FAB-2090,14593,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,elli-androulaki,elli-androulaki,07/Feb/17 8:11 PM,21/Jul/18 4:09 AM,28/Oct/23 2:58 AM,28/Jun/17 4:12 PM,,,,,,,,,,,,0,,,,,,,,"This review relates to the following components:
 - MSP operation
 - ACL design 
 - Reconfiguration of channels and channel related parameters
",,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-7,,"Security-review of reconfiguration, ACLs/MSP",To Do,,,Unset,,,,"1|hzxk7z:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/17 9:03 AM;ChristopherFerris;[~elli-androulaki] is this done?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I need to decide on LCCC endorsement/invocation access policy and way to pass this policy to LCCC,FAB-2091,14594,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,07/Feb/17 10:11 PM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,20/Apr/17 7:06 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1329,,,,,,,,,"1|hzxp7b:",,,,Unset,,Sprint 12 - Crypto,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 16 - Crypto,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/17 7:20 PM;elli-androulaki;Here we need to distinguish chainless and non-chainless invocations of LCCC:
 - chainless (only relevant for install/uninstall functions) we check the peer MSP admin
 - non-chainless (relevant for chaincode instantiate/terminate and others) we check the chain admin policy

Blocker for this: specify an admin policy at chain genesis time that only requires one signature to be satisfied.;;;","01/Mar/17 7:22 PM;elli-androulaki;Related CRs:

https://gerrit.hyperledger.org/r/#/c/6421/
reversion of this one: https://gerrit.hyperledger.org/r/#/c/6471/
;;;","13/Apr/17 3:51 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/6421/ needs rebase [~ales];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I need to document MSP-related assumptions & best practices,FAB-2094,14597,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,elli-androulaki,elli-androulaki,elli-androulaki,08/Feb/17 1:58 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,03/May/17 11:58 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"Assumptions we need to document:

1) Certificate expiration. 
Here we decided to go for real-time being used to assess whether a certain certficate is valid or not. 
The assumption is that the certificates are renewed way before they expire, e.g., a month before such that the clock skew of the committing peers will not be affected by this.
This item is here to ensure that this assumption is properly stated into the MSP document.

2) MSP Identifier. 
Here we need to assume that the MSPidentifier is set upon agreement among the application participants. In the future orderers are to enforce this, via the identity channel but currently we assume that the admins of the chain have properly investigated the MSPs they allow to appear in the chain including a correctness check on the mapping between MSP identifiers and configuration. It may as well be that the MSPIdentifier is taken after an MSP's administrator.

3) Distinction between clients and peers.
This is deemed not to be critical for now but we should add to the MSP document best-practices when distinction between the two is necessary.

",,binhn,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5dr:",,,,Unset,,Sprint 11 - Crypto,Sprint 12 - Crypto,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 15 - Crypto,Sprint 16 - Crypto,,,,,,,,Unset,,,,,,,,,,,binhn,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 3:20 AM;binhn;This seems to be dup of [fab-2067] ?;;;","11/Apr/17 3:36 AM;elli-androulaki;Yes :( Not sure i can close jira items...;;;","13/Apr/17 3:46 AM;ChristopherFerris;[~binhn] [~ellaki] if this is a duplicate, then change the fixVersion to Duplicate and mark Done.;;;","20/Apr/17 6:41 AM;elli-androulaki;Hi, removed the duplicate. It was indeed one :(
CR associated to this jira: https://gerrit.hyperledger.org/r/#/c/8273/
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove xxxCryptoHelper to mocks,FAB-2096,14599,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 3:23 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"The real crypto helper was added, but the mock one was left in the real binary, moving to mocks.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk8v:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ConfigNext proto,FAB-2097,14600,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 3:29 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"Rather than modify the config protos and the config producers, parsing, and consumers all at once, this CR adds only the new protos, without removing the old, and makes the minimal changes required only to use the new proto format while on the wire.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk93:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add delete to ledger for CouchDB ,FAB-2098,14601,14096,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,08/Feb/17 3:46 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 11:41 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Enable delete for ledger using CouchDB.  If a value of null is passed as a value, then delete the CouchDB record by the ID.",,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk9b:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create TOC,FAB-2099,14602,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,bmos299,Clayton Sims,Clayton Sims,08/Feb/17 4:00 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,29/Mar/17 1:47 AM,,,,,v1.0.0-alpha1,,,fabric-docs,,,,0,Documentation,quality,,,,,,reorganize the left hand margin TOC in RTD docs to be a bit more oriented to end users coming to the platform.,,bmos299,Clayton Sims,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2277,,,,,,,,,"1|hzx4x3:",,,,Unset,,Sprint 11 - Documentation,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,Unset,,,,,,,,,,,bmos299,Clayton Sims,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/17 9:13 AM;bmos299;I will be working on this one.  I have received good feedback from many people and will get a patch set submitted tomorrow or Thursday.;;;","15/Feb/17 6:24 AM;bmos299;Nick has this one about done.  We are using the staging, http://fabric-rtd.readthedocs.io/en/latest/, so we can probably can this one open until a patch set merges the TOC into master.;;;","17/Feb/17 4:06 AM;markparz;Nick has TOC done, and will push today ;;;","29/Mar/17 12:46 AM;markparz;Still need to make some tweaks to the TOC. Collapse all the sections, and change a couple locations of items. Nick has this;;;","29/Mar/17 12:57 AM;markparz;Barry, I think this can be closed correct?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test Gossip with Overriden endpoint,FAB-2100,14603,14578,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,AdnanChoudhury,AdnanChoudhury,08/Feb/17 4:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"Set up the fabric network over two different physical machines with Gossip endpoints being overriden with the new gossip config option. https://gerrit.hyperledger.org/r/#/c/5163/ and test that if gossip works.

 ",,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk9j:",,,,,,Sprint 11 - consensus,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move orderer shared config definitions to common,FAB-2101,14604,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 5:11 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk9r:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move application shared config from peer to common,FAB-2102,14605,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 5:34 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Just as with the orderer configuration, having the peer configuration in a separate package is problematic, so this CR moves it to common.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxk9z:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I need to to ensure proper chain access rights of invokers in CC to CC case,FAB-2103,14606,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,08/Feb/17 5:41 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,23/Apr/17 4:07 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,In CC to CC case we need to ensure that the invoker has read-access to the callee's chain.,,angelo.decaro,elli-androulaki,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1329,,,,,,,,,"1|hzx5fb:",,,,Unset,,Sprint 12 - Crypto,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 15 - Crypto,Sprint 16 - Crypto,,,,,,,,,Unset,,,,,,,,,,,angelo.decaro,elli-androulaki,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/17 9:20 PM;angelo.decaro;So, I did an investigation and it turns out that during a CC2CC invocation, handler's checkACL method is invoked. It remains to give an actual implementation of that method.;;;","15/Feb/17 9:36 PM;elli-androulaki;Great!;;;","19/Apr/17 6:48 PM;elli-androulaki;Related CR: https://gerrit.hyperledger.org/r/#/c/6279/
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move channel shared config to common,FAB-2104,14607,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 6:04 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"The orderer and application config were both recently moved to common.  For the sake of consistency, the channel config should be moved from its current location in common under configtx like orderer and application.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxka7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add simple configuratoin schema protos,FAB-2105,14608,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 6:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"Because the new configtx format is so much more flexible than the original, we need to make sure that it is locked down to keep people from going crazy with it.  The restrictions can be relaxed as the use cases are made, but initially the goal is to restrict the configuration to a minimal set and loosen from there.

To do this, protos for a simple schema should be defined so that the configtx manager can enforce the restrictive configuration scheme.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkaf:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create orderer configtx schema,FAB-2106,14609,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 6:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkan:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create application configtx schema,FAB-2107,14610,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 6:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkav:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create channel configtx schema,FAB-2108,14611,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 6:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkb3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Build documentation for every commit and ensure the build is successful and render the documentation properly,FAB-2111,14614,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rameshthoomu,rameshthoomu,rameshthoomu,08/Feb/17 7:55 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,08/Jan/18 11:32 PM,,,,,v1.0.0,,,fabric-docs,,,,1,Documentation,quality,,,,,,"Build documentation for every commit and ensure the build is successful and render the documentation properly. 

Existing documentation build process works only after the patch is merged. This approach is leading to broken links, and hiding missing page configurations.

Proposed plan is to build documentation for every patch set and make sure build is successful.

",,bmos299,ChristopherFerris,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx33j:",,,,Unset,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,Sprint 17 - Documentation,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/17 10:53 PM;rameshthoomu;This still in discussion.. After recent updates, now Fabric docs are building on RTD with new Sphinx theme. RTD (readthedocs) only supports github.. RTD build process doesn't support gerrit requests. I see two ways we can implement this

1) Run CI job to execute ""make"" from docs folder and copy all html files to a hosting documentation server ( Question: 1) who will provide this? 2) It's difficult to maintain multiple copies in hosting site for every patch.

2) Ask committer to verify the documentation build before submit patch and check the documentation output is passed as per new theme.

[~bmos299] any inputs?;;;","30/Mar/17 4:11 AM;rameshthoomu;[~bmos299] I have made changes to CI script to publish docs to gh-pages.. This approach overrides existing files on github repo. couple of observations here:

1) we have to forcibly update staging git hub account every time
2) We can not sync staging and production github in sync with the above process
3) update staging environment for every verify request is a big process and not suitable in this case. RTD will have only one reference URL to refer document changes. ;;;","14/Apr/17 12:23 AM;ChristopherFerris;[~rameshthoomu] [~bmos299] can I get an update on where this stands? ;;;","14/Apr/17 1:11 AM;bmos299;[~rameshthoomu] [~nickgaski] [~ibmmark]

Let me see if I understand this one...
1.  Everything works fine for code merged to master
2.  This Task is pertinent to the verify process using a staging environment.   The item is that the url to the staging environment will be the same and could result in one .rst file overlaying/regression a previous one.  This only applies to the verify process and the viewing by the reviewers/maintainers may not provide the actual .rst file.

I think the chances of this are really slim and the actual merged code is never impacted.  I don't think we need to spend too much time on this one.  The actual .rst will still be in the PR and can be reviewed, regardless if a regression occurred.  Is this true?

If there is not a quick fix for this, I think the risk is greater than a complex fix as we never break the build or the community doc.;;;","14/Apr/17 1:21 AM;ChristopherFerris;So, if we build and have hosted at rtd, I don't think that we can have a true staging of a CR. We need a verify build that writes to nexus to a CR-specific staging location that the submitter or reviewer can check. For the merge job, we can let RTD host etc as we have now. [~bmos299] [~rameshthoomu] [~nickgaski] [~markparz];;;","08/Aug/17 2:16 AM;ChristopherFerris;[~rameshthoomu] status of this?;;;","24/Oct/17 1:04 AM;rameshthoomu;As mentioned in the Rocket chat, I would like to add a new job in fabric to generate the RTD formatted doc output and display on jenkins console. Please access the HTML report out put here (In sandbox for test purpose) [https://jenkins.hyperledger.org/sandbox/job/doc-test/HTML_Report/ |https://jenkins.hyperledger.org/sandbox/job/doc-test/HTML_Report/]

This saves lot of document writers time.. Just submit a patch and verify the result on jenkins console.;;;","15/Nov/17 11:33 PM;rameshthoomu;https://jenkins.hyperledger.org/sandbox/job/fabric-docs-x86_64/fabric_docs_output/;;;","21/Nov/17 11:02 PM;rameshthoomu;As discussed, will inject conditional step step in jenkins to trigger this doc build verify job, only when .rst files are changed in fabric patch sets.;;;","08/Jan/18 11:31 PM;rameshthoomu;this change has been submitted and merged. fabric-doc-build CI job triggers only when a change set contains .rst or .md changes

https://jenkins.hyperledger.org/view/fabric/job/fabric-docs-build-x86_64/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Writing Chaincode v0.6 FAQ for v1.0 library,FAB-2112,14615,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,nickgaski,joshhus,joshhus,08/Feb/17 7:55 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,22/Mar/18 7:01 AM,v1.0.0,v1.0.0-beta,,,,,,fabric-docs,,,,0,,,,,,,,"See: http://hyperledger-fabric.readthedocs.io/en/v0.6/FAQ/chaincode_FAQ/ 
and http://hyperledger-fabric.readthedocs.io/en/latest/FAQ/chaincode_FAQ/

Some issues here to look at: page needs edit, scrap or rewrite for v1.0 doc:
1. chaincode isn't strictly the ""fabric's interpretation"" of smart contract algorithm. 
2. chaincode isn't only executed during the consensus process
3. Fabric doesn't support a stateless UTXO model. (or does it? it says we do.)
4. chaincode can't be written in any language - only Go or Java - section needs clarity on chaincode applications / smart contracts languages vs. system chaincode and fabric chaincode languages. Update reference to 2016. 

",,joe-alewine,joshhus,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkbb:",,,,,,Sprint 11 - Quality,,,,,,,,,,,,,,,,,,,,,,,,joe-alewine,joshhus,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/17 8:14 AM;joshhus;Title also - chaincode isn't limited to those 2 things right.;;;","03/Jun/17 6:47 PM;mastersingh24;[~nickgaski] - I know there is work on documenting chaincode - can you update / close this when appropriate?;;;","22/Mar/18 7:01 AM;joe-alewine;Closing this. Have two docs on chaincode now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add architecture and refactor docs,FAB-2113,14616,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,08/Feb/17 8:25 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,08/Feb/17 8:27 AM,,,,,v1.0.0-alpha1,,,fabric-docs,,,07/Feb/17 12:00 AM,0,,,,,,,,add architecture overview and deep dive. Refactor the index.md to be more oriented to users.,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxkbj:",,,,Unset,,Sprint 11 - Documentation,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create fabric-docs repo to serve as host repo for sub-projects of fabric,FAB-2114,14617,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,08/Feb/17 8:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Jun/17 11:25 AM,,,,,v1.0.0,,,fabric-docs,,,,3,,,,,,,,"create fabric-docs repo to serve as host repo for sub-projects of fabric. Modeled after open daylight docs https://github.com/opendaylight/docs. needs Gerrit repo, github mirror and fabric maintiners with 2+2 rules.

submodules: (I think this is right)

[submodule ""docs/submodules/fabric""]
	path = docs/submodules/fabric
	url = ../fabric
	branch = master
	ignore = dirty
[submodule ""docs/submodules/fabric-sdk-node""]
	path = docs/submodules/fabric-sdk-node
	url = ../fabric-sdk-node
	branch = master
	ignore = dirty
[submodule ""docs/submodules/fabric-ca""]
	path = docs/submodules/fabric-ca
	url = ../fabric-ca
	branch = master
	ignore = dirty",,ChristopherFerris,ryjones,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4xb:",,,,,,Sprint 11 - Documentation,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,ChristopherFerris,ryjones,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/17 8:55 AM;yacovm;Just trying to understand how the docs will be generated.
We have lots of google docs in: https://wiki.hyperledger.org/community/fabric-design-docs
Will we need to move everything to markdown or something?

or is it only for code documentation? ;;;","08/Feb/17 11:17 PM;ChristopherFerris;this is for us to have a single RTD that builds all of the sub-projects docs into one release. The design docs and so forth should remain in the wiki or jira.;;;","18/Apr/17 9:45 AM;ryjones;this is still blocked on deciding the path forward;;;","25/May/17 7:46 AM;ryjones;Is this proposal dead?;;;","17/Jun/17 11:26 AM;ryjones;the repo exists:

[https://gerrit.hyperledger.org/r/#/admin/projects/fabric-docs]

how and when the project populates it is up to the project;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Splash Page for Documentation,FAB-2115,14618,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,markparz,bmos299,bmos299,08/Feb/17 9:21 AM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,29/Mar/17 12:44 AM,,,,,v1.0.0-alpha1,,,fabric-docs,,,21/Feb/17 12:00 AM,0,documentation,,,,,,,Create a splash page for the documentation that provides an introduction to the fabric and guides users to our public social media sites and repos.,,bmos299,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/17 1:03 AM;markparz;Screen Shot 2017-02-15 at 8.10.24 PM.png;https://jira.hyperledger.org/secure/attachment/10516/Screen+Shot+2017-02-15+at+8.10.24+PM.png","18/Feb/17 1:05 AM;markparz;Screen Shot 2017-02-15 at 8.11.36 PM.png;https://jira.hyperledger.org/secure/attachment/10517/Screen+Shot+2017-02-15+at+8.11.36+PM.png",,,,,,,,,,,,,,,,Unset,,,FAB-2277,,,,,,,,,"1|hzx4wv:",,,,Unset,,Sprint 11 - Quality,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/17 10:59 AM;joshhus;Okay so this isn't a splash page for documentation, it's a splash page for all of fabric. True? ... Which routes users to documentation (RTD), and also social media, perhaps developerWorks, and repos. And YouTube? ... is that the idea, that it's a splash page for everything fabric, not just docs. ... i.e. the splash page for Corda is for Corda, not just Corda documentation.;;;","08/Feb/17 11:06 AM;bmos299;Yes. ;;;","09/Feb/17 10:51 AM;markparz;Working on this... sent an email to the community on this and the index, hoping for feedback and potentially some help..;;;","11/Feb/17 12:57 AM;joshhus;I believe Chris indicated he was working on this. I can contribute some HTML and .css if nec. ... Note the example we looked at is javascript heavy.

The example (View page source) also included full/absolute URL references to its linked content; note relative links to local dirs are preferred when doable 

Are we going for a ""vanity"" URL? - I presume so -- www.hyperledger-fabric.io appears to be available.;;;","11/Feb/17 1:36 AM;ChristopherFerris;WIP splash page design https://christo4ferris.github.io/fabric-docs/ comments welcome;;;","11/Feb/17 1:37 AM;ChristopherFerris;if we can secure that vanity URL that would be a Good Thing(tm)... GH Pages provides support for this. LMK when we have bagged the domain. ;;;","11/Feb/17 3:11 AM;bmos299;1.  I don't really like the background color. ---It is too engineering like.  I think a more abstract image.  Let's get a UX person to look.
2.  I think we need some really eye catching background and some really eye-popping logo that gets associated with fabric
3.  I like for community to have direct links to, obviously the hyperledger community, but to things like rocket chat.  Something where the immediately make a comment someone responds to.  ....even like a 'chat now' that sends a question to a general rocket chat channel.  Heck, we got their attention, let's help them. 
4.  In the 'What Differentiates Hyperledger Fabric' ...great points, but maybe everyone of those takes you to a link.  (could be something in RTD).

Thanks,  Barry;;;","11/Feb/17 3:59 AM;joshhus;Ey, a good starting point. My comments, merely my first impressions/reactions (and agree with Barry to get UX in on this; I'll flag Sean):

Let's clearly decide on the breadth of the splash page AUDIENCE - ANYBODY interested in blockchain or fabric blockchain? - only TECHNICAL folks? Includes BUSINESS folks? etc.

# I was expecting a ""splash"" page in the sense of the Corda splash - i.e. expecting almost no text - links only - and a full color background. No scrolling, or paragraphs to read. Not saying this is wrong, just a different type of ""splash.""
# Didn't mind the purplish color - how is that ""engineering""? ... Maybe try the text on top of it as BLACK though instead of white. Either that, or darken the purple a little bit.
# I like the Hyperledger atomic graphic - on a corda-like splash, that would be a much larger background image that spans the entire screen. I'd recommend that.
# HYPERLEDGER text as ALL CAPS and then Fabric text as intiial caps, and at sort of the same font size but not quite, are disjointed. Are these in the same font. 
# The text is a little bit neutral, not necessarily wrong though - I was expecting a bit more marketing flair for a splash page. The idea is to make a splash. I could try a version of text and post. 
# The differentiation text says why fabric, but doesn't say why blockchain, I imagine that was intended. To some the splash page might be missing the MORE SECURE, MORE EFFICIENT, MORE TRANSPARENT, MORE TRUSTED ""business"" level messages. 
# I think that we're agnostic with respect to cryptocurrency is a key fabric difference also. Though maybe that's still open - if any cryptocurrency could be plugged in/required. And maybe that we're immutable in the true sense - no forks. 

;;;","11/Feb/17 4:57 AM;ChristopherFerris;Responses:

Josh 1) Corda splash page does scroll and there are multiple sections. I tried to keep the initial page view as clean and comprehensive as possible. All you really need (IMO) is that. I can shrink the banner horizontally slightly to keep the complete description above the fold.

Josh 2) the color can be easily changed. I was exploring with something from the standard GH Pages template colors (sort of a green->aqua gradation) so that it wasn't obviously a GH pages generated content.

Josh 3) I wanted the logo to be roughly the same size as ""Fabric"" font. It is close but someone with keener eye for that sort of thing could make it exact. 

Barry 2) I also have Sean thinking about a Fabric logo, too. I don't think we want the Hyperledger logo to be TOO large.

Josh 4) we have no control over the Hyperledger logo. We cannot change that.

Josh 5) I just copied what we have in the docs today. Spice it up all you like;-)

Josh 6) I don't think we need ""Why Blockchain"".

Josh 7) we do not want to mention cryptocurrency on anything Hyperledger with the possible exception that Fabric is NOT dependent on mining or cryptocurrency. 

Barry 3) the Community page which the link takes you to has all those links (chat, wiki, mailing lists. etc)


;;;","11/Feb/17 4:59 AM;ChristopherFerris;Also, I am all for a nice image but that needs Design help and all kinds of IP clearance etc. Not something I can nor want to do at this stage. If someone else wants to pick this up, fine. As to the color. I am not married to the color. I just chose sometihg different than GH Pages gave me as default.;;;","11/Feb/17 5:20 AM;joshhus;I'm fine, just giving my take ... see what others say. ;;;","11/Feb/17 5:31 AM;markparz;cool deal, great start, nice and clean!

My feeling is that we should have a little more flashy, for this reason... As I mentioned on the call divide out the biz folks with the dev folks, and biz folks would like more flash, but that's not a big deal, starting to get the content / info is great. Plus couple of the community members provided feedback for an operational section for Admin folks, which I think is a great idea as we move forward. 

With that said, If we deem this is good enough, colors are easy to change... I like the format better than the first few schemes :)

Since this is HLF, I would want to do less linking to generalized community stuff. We do need links to the project, but more focused. 

I agree, I still think ""why blockchain"" is much more generalized topic, that should be the whole HL level for all projects.

Yes, Sean had some logo's that he was playing with sometime last year... but I wasn't digging any of them personally. I think we need to go back to the drawing board. Would love some artist in the community to propose some... Opened FAB-2185

On Barry 3 item, we can create some new wiki or html pages to concentrate totally on fabric... i.e. Fabric mailing lists(plus maybe some of the more general, Slack icon w/ #fabric-XYZ channel guide for understanding, etc. ;;;","12/Feb/17 12:55 AM;bmos299;Sounds good Mark. Something as soon as they are see our doc...they have a portal directly to us.  I really like the way softlayer has a 'live chat' button. ;;;","13/Feb/17 3:22 AM;joshhus;Corda has their ""tech docs"" distinct from this marketing splash page content, whidh gives a clear line between the two. See splash content vs. https://docs.corda.net/. I'd suggest the same split for us.

Notice Corda also uses multiple background images / art on splash - 1) black/grey nodes/wires; 2) red/white atomic structure/lines; and 3) blue/yellow/red ropes. ... All three say the same thing (woven/interconnect) but in rather different ways, both conceptually and graphically; for UX to analyze. 

Using a hyperledger logo, only, the same size as the font - okay for the docset pages but likely under-doing it for the splash/marketing pages.;;;","13/Feb/17 3:49 AM;joshhus;Make sure ours is mobile device-friendly also. Corda's is, I checked it on Android/Motorola smartphone (small screen). ;;;","16/Feb/17 8:17 AM;ChristopherFerris;[~joshhus] yes, it is mobile friendly.;;;","16/Feb/17 8:18 AM;ChristopherFerris;FWIW, I have mocked it up in my fork of fabric (old one) 

https://github.com/christo4ferris/fabric-docs

The code is scattered, but it would be straight-forward to merge in hyperledger-fabric repo.

;;;","17/Feb/17 4:07 AM;markparz;Created an alternate look of the splash and need to continue to add sections, and figure out how to make public to gain feedback;;;","17/Feb/17 5:54 AM;joshhus;Cool new background image of the brain synapses. Visually, however, its randomness appears incongruous wrt our artificial intelligence / structured hyperledger fabric (hexagon?) un-natural logo. 

Likewise, each area of our brains serve unique functions, and are not duplicates/redundant with other areas. The argument could be made that hyperledger fabric is now like a brain, however, with the various different channels / different exchanges and ordering service, etc. doing ""different"" things from one POV.

My $0.02.;;;","18/Feb/17 1:03 AM;markparz; !Screen Shot 2017-02-15 at 8.10.24 PM.png|thumbnail! ;;;","18/Feb/17 1:06 AM;markparz; !Screen Shot 2017-02-15 at 8.11.36 PM.png|thumbnail! 

Couple of screens shots of similar to what Chris did, but adds some icons that can click to specific fabric items of interest like documentation and such.... obviously can changed around however, the community asked for more icon esk browsing to relevant items... ;;;","18/Feb/17 1:08 AM;markparz;Attached some screen caps of what I massaged Chris' page into, we can change the color as well... Chris didn't like the green... I also added some icon navigation to relevant items for Fabric, based on what the community asked for.. we can switch those around. Have interest from IT People corp as well to work on this [~movee2005];;;","29/Mar/17 12:44 AM;markparz;IT People corp already put a proposal and published Fabricnetworks.org... so closing this one.. looks great, thanks folks!;;;",,,,,,,,,,,,,,,,,
Ensuring the mkdoc.yml files are all written,FAB-2116,14619,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Clayton Sims,bmos299,bmos299,08/Feb/17 10:07 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,14/Apr/17 12:24 AM,,,,,v1.0.0-alpha1,,,fabric-quality,,,24/Feb/17 12:00 AM,0,Documentation,quality,,,,,,"The documentation is being over-hauled and the mkdoc.yml, which pretty much represents the build file for readthedocs has been reordered.  Things have been added, and others removed.  We need to make sure all the documentation in this file are complete by the end of the month.  ",,bmos299,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2117,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxkbr:",,,,Unset,,Sprint 11 - Documentation,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 12:24 AM;ChristopherFerris;This is no longer relevant;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need to update our documentation and links for v1.0 Alpha,FAB-2117,14620,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,bmos299,bmos299,08/Feb/17 11:24 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,14/Apr/17 7:03 AM,,,,,v1.0.0,,,fabric-docs,,,21/Feb/17 12:00 AM,1,Documentation,quality,,,,,,"There are three stories linked to this epic and associated with the items above.
1.  Creating an effective splash page.   If you go into: https://www.corda.net/.   They have some really great high level information that is easy to follow.  
- this is critical as it outlines all the writing that needs done.
https://jira.hyperledger.org/browse/FAB-2115

2. Develop the technology to display the information.  I can see for the Documentation tab they dive into Sphinx.  The pages are built with Sphinx using a theme provided by Read The Doc (RTD). Our CI environment already uses RTD but not Sphinx.  Ramesh is working converting our RTD to Sphinx.  There is actually a conversion he is experimenting with for the doc formats.    The general look and feel of the main page (www.corda.net) -- it would be great to get input from some of the UX experts on what the options are to enhance the experience.
https://jira.hyperledger.org/browse/FAB-2111

3.   Writing the content.  Once everyone agrees on item 1.  Now assignments can be assigned.  Some the documents should have a writer and a technical contact that work jointly. 
https://jira.hyperledger.org/browse/FAB-2116
",,bmos299,ChristopherFerris,ishihara.shun,joshhus,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2116,FAB-2115,FAB-2111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,ghx-label-9,,Update Community On-Line Documentation,To Do,,,,,,,"1|hzx4xr:",,,,Unset,,Sprint 11 - Quality,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,ishihara.shun,joshhus,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/17 1:21 AM;ChristopherFerris;for #1 a github page should suffice. We need someone with html/css design skills to pull together a page that is not IBM branded in any way, but could introduce a Fabric logo and like Corda simple UX to getting the code, docs and links to chat, stack-overflow, and so forth.

#2 I am unconvinced of an immediate need to change the style. However, we do need to get to a concise TOC and page organization.

#3 is MOST important. I have said that the devs should be writing and ID folk cleaning up the grammar etc and publishing the CRs as quickly as we can. Most important is HOW TO USE. Second comes stuff like high-level arch, capabilities, etc. though that is also important. It is more important that when we make code available that people can use without getting frustrated. Frustrated devs will just leave and not come back. We cannot afford this.;;;","09/Feb/17 2:01 AM;joshhus;# Agree, in an ideal world all doc topics (Jira Issues) would have a writer assigned and a technical contact assigned. Currently ID adds multiple ""Reviewers"" to our CRs, who may or may not also be ""Maintainers"" (who can vote).
# The current TOC is too large/expanded, in part, because some files are very large, with a number of sub-headings within a single .md (markdown) file. Splitting these files into multiple parent/child .md files is likely to improve the current TOC experience, because the subtopics would then only display (presumably) once the parent topic is clicked on in the TOC.
# Not opposed to moving to Sphinx, but we went down this road before and decided on RTD - and the free plan that it provides with github account. RTD is Sphinx-like but doesn't actually use Sphinx - i.e. need to identify the benefits to moving to Sphinx proper. One such benefit is a ""vanity"" URL - whatever we want basically, whereas RTD requires the ""readthedocs"" string in the URL: http://hyperledger-fabric.readthedocs.io/en/latest/ ... Another is potentially more control over the TOC display/colors etc., whereas RTD forces a ""theme"" which we aligned with Intelledger last year (http://intelledger.github.io/). Intelledger doc does employ Sphinx proper, if I recall.
# All of this is done under the Linux Foundation Hyperledger Fabric Community umbrella, which has its own processes, which we are complying with.
# Splash page - Notice that the splash page for Corda is for all of Corda, not just Corda documentation.;;;","14/Apr/17 12:14 AM;bmos299;[~nickgaski] is this story complete?  The mkdoc.yml is a thing of the past now that we build with Sphinx isn't it?;;;","14/Apr/17 1:37 AM;nickgaski;while the content is still ongoing, this transition is indeed complete.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Fabric peer, order and CA have various cfg env styles",FAB-2118,14621,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,baohua,baohua,baohua,08/Feb/17 12:06 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,25/Apr/17 12:01 PM,,,,,v1.0.0,,,,,,,1,common-components,,,,,,,"Currently, there are different styles of variables among these fabric projects.

*PEER_CFG_PATH*                          =    /etc/hyperledger/fabric
*ORDERER_CFG_PATH*                  =    /etc/hyperledger/fabric/orderer
*CORE_PEER_MSPCONFIGPATH*  =   $PEER_CFG_PATH/msp/sampleconfig
*FABRIC_CA_HOME*                        =    /etc/hyperledger/fabric-ca

And, peer has its own msp path under the cfg path, while orderer has the msp path as `../msp`

So suggest to make these changes to update the cfg variables, to avoid more mistakes in future.

1. To keep them aligned and easy to understand, suggest to update the PEER_CFG_PATH to /etc/hyperledger/fabric/peer, and use name FABRIC_ORDERER_CFG. Also the peer will have its own msp path as  $FABRIC_PEER_CFG/msp.
2. The orderer is using  ORDERER_CFG_PATH=/etc/hyperledger/fabric/orderer, would suggest to rename as FABRIC_ORDERER_CFG=/etc/hyperledger/fabric/orderer. Also the orderer will have its own msp path as  $FABRIC_ORDERER_CFG/msp.
3. fabric-ca is using a FABRIC_CA_HOME as both cfg and home dir, would suggest to have a separate cfg env like `FABRIC_CA_CFG`. While keep the FABRIC_CA_HOME as the home dir path.
4. CORE_PEER_MSPCONFIGPATH is supported in the yaml file, while others are not controlled by the yaml file.

In summary, would like to change those env and values as the following, and also enable the setup in yaml file.

*CORE_PEER_CFGPATH*                =    /etc/hyperledger/fabric/peer
*CORE_ORDERER_CFGPATH*        =    /etc/hyperledger/fabric/orderer
*CORE_PEER_MSP_CFGPATH*      =   $PEER_CFG_PATH/msp/sampleconfig

*FABRIC_CA_CFGPATH*                   =    /etc/hyperledger/fabric/ca

And possible specially for ca-client and ca-server,
*FABRIC_CA_CFG_CLIENT*   =  /etc/hyperledger/fabric/ca/client
*FABRIC_CA_CFG_SERVER* =  /etc/hyperledger/fabric/ca/server

Welcome for comments to see if this change makes sense.

Thanks!",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-101,,,,,FABC-101,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkbz:",,,,,,Sprint 11 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move configtx filter to orderer,FAB-2120,14623,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Feb/17 1:54 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"When configtx was moved from orderer to common it brought along the configtx.Filter, which is inherently an orderer concept and violates the rule of not importing from common into orderer.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkcf:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer should check/reject golang chaincode deployments for binary artifacts,FAB-2122,14625,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,greg.haskins,greg.haskins,greg.haskins,08/Feb/17 10:01 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Jul/17 9:21 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The deployment payload for golang is expected to contain golang packages under /src.  This is then expanded into $GOPATH within the chaincode execution environment.  However, a malicious guest could technically include anything they want in the tarball, including binaries under /bin or /pkg.  It is not clear if this could be exploited as an attack surface, but its also clearly a gaping hole and not difficult to fix.

Proposal is we should scan the tarball so that it only includes files that match a pattern like

/src/.*\.(go|c|yaml)",,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkcv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Feb/17 1:47 AM;greg.haskins;Fix submitted for review: https://gerrit.hyperledger.org/r/#/c/6059/;;;","09/Jul/17 9:21 PM;greg.haskins;Not sure why this was reopened when the work was completed many months ago.  I am assuming this was an error.  If intentional, please provide a rationale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
publish v1.0-preview images from sfhackfest images,FAB-2123,14626,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ChristopherFerris,ChristopherFerris,08/Feb/17 11:28 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Apr/17 9:29 PM,,,,,v1.0.0-alpha1,,,,,,,1,build-system,,,,,,,"@all @mastersingh24 @lehors and I were just discussing a few things and the subject of the alpha release came up (what a surprise!)
clearly there is a lot of interest on the part of people coming to the project to have v1.0 images that they can use and explore
yet, as we have discussed, we aren't really ready for alpha
one compromise we discussed, which I think the three of us agreed would be worth considering, was to take the images we created for the hackfest last week, and publish those to dockerhub/u/hyperledger as fabric-xxx:v1.0-preview images - update the docs accordingly so that they gettingstarted.md points to these images and promote it as ready for developer preview.
basically, we would not release these from a build (there's some additional bootstrap cruft that makes this intenable just yet)",,ChristopherFerris,ishihara.shun,jimthematrix,jyellick,mastersingh24,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkd3:",,,,,,Sprint 11 - Quality,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,ishihara.shun,jimthematrix,jyellick,mastersingh24,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Feb/17 11:36 PM;jimthematrix;so just to clarify, the proposal is to release the alpha based on the hackfest experience which would be a significant subset of the six-part experience that [~mastersingh24] laid out in the #fabric-maintainers channel right (guess hence the ""compromise"")?

I don't have a problem with that from the technical point of view, we need to make sure the Getting Started instructions pulls the node.js SDK from the v1.0-alpha branch instead of master (the two are not compatible due to removal of dockerfile-contents in deployment proposal). this also needs to be tested to make sure the few updates added to v1.0-alpha since the hackfest have not broken anything, I don't believe that's the case but need to make sure.;;;","09/Feb/17 1:48 AM;mastersingh24;we need to make sure we package this all up in a tight bundle, but I think that this is the best approach IF we must get something out soon.
my take is that the current master is no better than the hackfest stuff in terms of usability, etc

but not sure that we should republish versus just telling people where to get them from the current published location;;;","09/Feb/17 1:49 AM;yacovm;I would prefer if we can fix the script https://github.com/hyperledger/fabric/blob/master/examples/sfhackfest/channel_test.sh with https://gerrit.hyperledger.org/r/#/c/5691/, with testing it of course. ;;;","09/Feb/17 1:52 AM;muralisr;I think sooner we get this out so people can play with the better so +1...provided  docs and scripts are good of course. When I tested it did look (pretty close at least).;;;","09/Feb/17 2:01 AM;jyellick;I'm a little wary of frustrating users by giving them something that looks blessed, but is going to change in non-backwards compatible ways.  If we decide to go forward with this, I think we need to clearly communicate that users should assume details will change and anything they build on top will very likely be invalidated before v1.  Do we see people wanting to pick up these images if they understand that?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Finalize ledger chaincode APIs,FAB-2124,14627,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,denyeart,denyeart,09/Feb/17 12:17 AM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,17/Feb/17 9:36 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx667:",,,,Unset,,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename chaincode API RangeQueryState() and PartialCompositeKeyQuery(),FAB-2125,14628,14627,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,09/Feb/17 12:27 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 5:02 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Finalize v1 chaincode API names.

Motivation - make it clear that RangeQueryState() and
PartialCompositeKeyQuery() are getters similar to
GetState() and GetQueryResult().

RangeQueryState() ==> GetStateByRange()
PartialCompositeKeyQuery() ==> GetStateByPartialCompositeKey()",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkdb:",,,,,,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move MSP configtx handler to configtx/handlers,FAB-2126,14629,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Feb/17 12:55 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkdj:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a network participant, I would like, graphical, way to install a peer and join to a network",FAB-2127,14630,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,markparz,markparz,09/Feb/17 1:13 AM,23/Jan/20 3:50 AM,28/Oct/23 2:58 AM,23/Jan/20 3:50 AM,,,,,,,,fabric-peer,,,,0,help-wanted,stale-item,Usability,,,,,It would be nice to have a GUI installation of a peer node where you can graphically go through all the required steps to installing a peer on a machine and connecting to an ordering service. ,,markparz,muralisr,rmohta,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxkdr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,markparz,muralisr,rmohta,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 4:00 PM;muralisr;[~ibmmark] any update on this ? we have made good progress in scripting and doc but i'm sure we can do a lot more. Anything planned for 1.0 time frame ?;;;","03/May/17 3:32 AM;markparz;This will have to be a future item for sure.;;;","20/Jun/17 10:02 AM;rmohta;I'm assuming, this would be a web-based component. Something like an onboarding platform. I can help with this one, if no one is working on it.;;;","27/Jun/17 5:40 AM;markparz;Awesome [~rmohta] thanks!!;;;","23/Jan/20 3:50 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
enable --peer-chaincodedev mode in the new deployment model,FAB-2128,14631,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,09/Feb/17 1:32 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,18/Mar/17 11:31 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"The new deployment model is described in https://jira.hyperledger.org/browse/FAB-1783.

In the new model, ""-peer-chaincodedev=true"", has to be treated differently as the running chaincode is not tied to one channel but has to serve multiple channels.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1783,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-37,,,,,,,,,"1|hzxkdz:",,,,,,Sprint 11 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Initialize all config handlers via configtx initializer,FAB-2130,14633,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Feb/17 1:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxke7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SDK/API for Orderer operations,FAB-2131,14634,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,varadatibm,varadatibm,09/Feb/17 2:04 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,11/May/17 10:40 PM,,,,,WON'T FIX,,,fabric-orderer,,,,0,,,,,,,,"In order to build a UI to administer the orderer we need the following APIs... ideally Node SDK, gRPC would be a good start

Add Root Cert for an Org (Config on the Membership channel?)
Get channel policy 
List participants
Create Channel
List channels
Get (Genesis) Block on Channel
Submit Config transaction (add member to channel)
Submit Config transaction (update policy on channel)",,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1678,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxkef:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
marbles02 chaincode fails to delete a marble,FAB-2133,14636,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,Nishi,Nishi,09/Feb/17 3:33 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Feb/17 7:26 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Using the latest marbles chaincode, deleting a marbles does not delete a marble.

Deleting a marble threw ""Failed to decode JSON.."" error from code snippet below.

 err = json.Unmarshal([]byte(jsonResp), &marbleJSON)
 if err != nil {
                jsonResp = ""{\""Error\"":\""Failed to decode JSON of: "" + marbleName + ""\""}""
                return shim.Error(jsonResp)
        }

Upon observation, code to json.Unmarshal was taking an empty string (jsonResp) upon changing it to valAsBytes returned from GetState a marble could be deleted successfully.
",,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7qf:",,,,,,Sprint 11 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add function for creating multiple producers per chnl per orderer,FAB-2135,14638,14306,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,09/Feb/17 7:24 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 12:57 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkf3:",,,,,,Sprint 10 - Quality,Sprint 11 - Quality,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,Sprint 17 - Quality,,,,,,,,,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/17 12:57 AM;scottz;Closing this here, in order to move this task out of 1805 to be included instead within enhancement FAB-2212.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Chaincode query fails if the querying peer is not Gossip Leader, even though peer has joined the channel",FAB-2136,14639,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,AdnanChoudhury,AdnanChoudhury,09/Feb/17 8:11 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Feb/17 1:38 AM,,,,,,,,fabric-gossip,fabric-quality,,,0,,,,,,,,"Steps to reproduce:
1. Following the guideline in the ""getting started"" document (http://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/) setting up a 3 peer network. The only exception is peer2 has ""PEER_GOSSIP_ORGLEADER=false"". Docker-compose is attached. [^docker-compose-goosip-error.yaml] 
2. From the same doc ( (http://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/), channel is created, all 3 peers join it, deploy and invoke the chaincode.
3. Querying the chaincode from peer0, peer1 works, but querying from peer2 gives error:

{code:java}
Error: Error endorsing query: rpc error: code = 2 desc = failed to obtain cds for mycc - transaction not found mycc/myc2
{code}

Expected: 
Query passes with query result ""90"" for the given example.

Note: The images used are the sfhackfest images. ",,AdnanChoudhury,vishwass,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/17 8:10 AM;AdnanChoudhury;docker-compose-goosip-error.yaml;https://jira.hyperledger.org/secure/attachment/10425/docker-compose-goosip-error.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkfb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,vishwass,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Feb/17 1:40 AM;AdnanChoudhury;As all the three peers belong to different organizations, and each of them are the sole peers from their respective orgs, all of them have to be leaders. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
orderer service batching broken using new BATCHTIMEOUT,FAB-2137,14640,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,09/Feb/17 8:40 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,02/Jun/17 3:01 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-orderer,,,,0,qa,reproduction-requested,,,,,,"SIMPLE batching works with default values, but NOT when setting some environment variables to non-default values. This bug is for problems seen when changing the BatchTimeout.

Simple batching works ok when using default values:
solo orderer
default channel = testchainid
default batchtimeout = 10s
Broadcast/Send 4 TX or 14 TX
After 10 secs, the 4 transactions are batched and delivered as expected,
and the total number of blocks = 2.
 
Refer to FAB-2001 for problems when change the channel ID.
For this bug, we kept the default testchainid.
HOWEVER, for this bug:
Run same test, using ORDERER_GENESIS_BATCHTIMEOUT=20s
Instead of seeing the same result after waiting 20 secs for the 2nd batch,
we see a random number of batches (typically between 5 .. 13)
Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 2 numtrans 5
Consumer recvd a block, o 0 c 0 blkNum 3 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 4 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 5 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 6 numtrans 2
Send Duration (seconds):    0
Consumer recvd a block, o 0 c 0 blkNum 7 numtrans 2
Recovery Duration (secs):   2
waitSecs for last batch:    2
Error: Unexpected Block count 7 (expected 2)
Total deliveries received TX       [     14]
Total deliveries received Blocks  [      7]

Same goes for Kafka (works with default timeout, but not if we change it):
Run same test, using ORDERER_GENESIS_BATCHTIMEOUT=20s and
OTE_TXS=14 ORDERER_GENESIS_ORDERERTYPE=kafka OTE_KAFKABROKERS=3
and we see incorrect batches data like this:
Consumer recvd a block, o 0 c 0 blkNum 1 numtrans 1
Consumer recvd a block, o 0 c 0 blkNum 2 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 3 numtrans 5
Consumer recvd a block, o 0 c 0 blkNum 4 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 5 numtrans 2
Consumer recvd a block, o 0 c 0 blkNum 6 numtrans 2
Error: Unexpected Block count 6 (expected 2)
Total deliveries received TX on each ordr      [     14]
Total deliveries received Blocks on each ordr  [      6]
",,ChristopherFerris,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxjnz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/17 9:18 AM;scottz;Test failures found with
commit 5d9e4ede298ab646ac918dc5b034c7d319dd1d9a
commit date: Mon Jan 30 14:34:38 2017 +0000;;;","26/Feb/17 8:14 AM;kchristidis;Scott, can you confirm whether this issue persists? If so, I'll look into it.;;;","01/Mar/17 8:43 AM;scottz;Test still fails, using Feb 27 commit # 29d7fc035df697a68d271d628e693c556354486f . We see different results with each test invocation, but typically see 6 - 9 blocks delivered, each containing one or two transactions.

vagrant@hyperledger-devenv:v0.3.0-8d582eb:/opt/gopath/src/github.com/hyperledger/fabric/bddtests/regression/go/ote$ OTE_KAFKABROKERS=2 CONFIGTX_ORDERER_ORDERERTYPE=kafka OTE_TXS=11 CONFIGTX_ORDERER_BATCHTIMEOUT=20s ./ote
...
TEST <commandline> OTE_TXS=11 CONFIGTX_ORDERER_ORDERERTYPE=kafka OTE_KAFKABROKERS=2 ote  RESULT=FAILED: TX Req=11 BrdcstACK=11 NACK=0 DelivBlk=[7] DelivTX=[11] numChannels=1 batchSize=10
;;;","12/May/17 7:07 AM;ChristopherFerris;[~scottz] is this still an issue? Please reverify, thanks. Also, is this in the automated CI test suite?;;;","02/Jun/17 2:56 AM;suryalnvs;+*Pre-req:*+
 * Generate certs using the cryptogen tool for the clients and orderer
 * Launch the network with following configuration:
 _2 Orderers (with BATCHTIMEOUT=20s)_
 _3 Kafka brokers (3 zookeepers)_

*_Steps to run the test:_*
 1. Create a channel 'mychannel'

2. Start the deliver clients for two orderers
 *Terminal 1:*
{code:java}
 /deliver_stdout_msp -server localhost:7050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}
*Terminal 2:*
{code:java}
 ./deliver_stdout_msp -server localhost:8050 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp -mspID Org1MSP -seek -2
{code}
3. Start broadcast clients
     Send 110 transactions to the Orderer0 and Orderer1

*Terminal 3:*
{code:java}
./broadcast_timestamp_msp -server localhost:7050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer0.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer0.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}
*Terminal 4:*
{code:java}
./broadcast_timestamp_msp -server localhost:8050 -chainID mychannel -messages 110 -tls -cafile ./crypto-config/ordererOrganizations/example.com/orderers/orderer1.example.com/tls/ca.crt -chainID mychannel -overridehostname orderer1.example.com -mspDir ./crypto-config/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -mspID Org1MSP
{code}
*OUTPUT:*
 As a result of the above execution here is the result (seen in Ternminal 1 & 2)
{code:java}
Date is 2017-06-01 17:48:04.866544776 +0000 UTC
Transactions received in block : 1
Date is 2017-06-01 17:49:13.941226096 +0000 UTC
Transactions received in block : 100
Date is 2017-06-01 17:49:14.750159895 +0000 UTC
Transactions received in block : 100
Date is 2017-06-01 17:49:34.766522326 +0000 UTC
Transactions received in block : 20
{code}
{color:#14892c}*we see the blocks are getting batched up as per batchtimeout configuration and issue is no more reproducible, hence closing this issue.*
{color}

*NOTE:*
 * Tested on alpha2 based code/commit level
 * Please refer more details here, https://jira.hyperledger.org/browse/FAB-3993, [https://gerrit.hyperledger.org/r/#/c/9625/], source files are attached to FAB-2001;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
multichannel Deploy is failing  on commit# 4ed176b,FAB-2138,14641,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,rameshthoomu,rameshthoomu,09/Feb/17 8:53 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,22/Feb/17 11:23 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Deploy is failing on *commit#4ed176b:* (https://github.com/hyperledger/fabric/commit/4ed176bc119c36de963a712e96685bde9fcbe573)

Steps to reproduce: 
1) git checkout to commit #4ed176b from fabric repo
Build peer, orderer and ccenv images from above commit (make docker)
2) pull latest commit from fabric-ca repository and build CA image
3) modify the docker image reference to hyperledger and spinup the dokcer-compose script as mentioned in the gettingstarted.md document (https://github.com/hyperledger/fabric/blob/master/docs/gettingstarted.md)
4) After network is launched, exec into CLI container and execute deploy command as specified in the document.

*Below is the error log:*

Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority

Attached is the error log for more information

Working Commit# f71d8a19fb183e54dc8944e2200560b4a5cc848f
{panel}
",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Feb/17 8:51 AM;rameshthoomu;4ed176b_failed_commit.txt;https://jira.hyperledger.org/secure/attachment/10426/4ed176b_failed_commit.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkfj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/17 12:25 PM;rameshthoomu;Tested multichannel functionality on latest commits and observed this functionality is working as expected.;;;","22/Feb/17 11:23 PM;rameshthoomu;Now the deploy tx divided into install and instantiate. This issue has been created on feb-8th and now the deploy process is changed. Closing this issue and tagging to FAB-2409;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BCCSP Config should take HMAC function in constructor,FAB-2139,14642,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ashutosh_kumar,ashutosh_kumar,09/Feb/17 11:33 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,01/Mar/17 7:17 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,security,,,,,,,"Current BCCSP constructor  : New(securityLevel int, hashFamily string, keyStore bccsp.KeyStore) does not take HMAC method as input. I think , HMAC method should be part of constructor.",,angelo.decaro,ashutosh_kumar,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5yf:",,,,,,Sprint 11 - Crypto,Sprint 12 - Crypto,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,ashutosh_kumar,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 7:08 PM;angelo.decaro;What do you mean? Fixed the hash family, the HMAC algorithm is then well defined.;;;","17/Feb/17 11:40 PM;ashutosh_kumar;[~adc] , let me try to understand : You are saying that , HMAC function should correspond  the BCCSP hash family ? ;;;","01/Mar/17 7:17 PM;elli-androulaki;I mark this as DONE after the discussion we had a couple of weeks ago.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BCCSP Config should take HMAC function in constructor,FAB-2140,14643,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adc,ashutosh_kumar,ashutosh_kumar,09/Feb/17 11:33 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Apr/17 7:45 AM,,,,,WON'T FIX,,,fabric-crypto,,,,0,security,,,,,,,"Current BCCSP constructor  : New(securityLevel int, hashFamily string, keyStore bccsp.KeyStore) does not take HMAC method as input. I think , HMAC method should be part of constructor. I need this for TCert and BCCSP integration work.[~vpaprots] , FYI.",,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-810,,,,,,,,,"1|hzx6jj:",,,,,,Sprint 11 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make hierarchical config components comparable,FAB-2142,14645,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Feb/17 1:38 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkg7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Securing the new deployment model,FAB-2143,14700,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ellaki,muralisr,muralisr,09/Feb/17 10:39 PM,31/Jul/19 12:58 PM,28/Oct/23 2:58 AM,31/Jul/19 12:58 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"There are two aspects to the security of the new deployment model (https://jira.hyperledger.org/browse/FAB-1783)
* securing the package
* securing the instantiation of the package
* linking the secured package with the instantiation

+Securing the package+
The structure of the package would be 
* Envelope
** serialized deploymentSpec
** creator bytes
** policy for chaincode instantiation
** hash of the above
** signature over the above

+Securing the instantiation of the package+
Instantiation is a Proposal to LCCC (life cycle system chaincode) that will go through the usual Peer validation checks. 
* who is the creator of the proposal ? Local MSP Admin 
* who can access this chaincode ? Invoke and instantiate ?

On successful validation, an entry will be created in the LCCC on the channel's ledger
* name of the cc
* version of the cc
* hash from the package

* signature from the package

+Linking the secured package with the instantiation+
The static links between the LCCC entry (described above) and contents of the package provide means to cross check and verify the chaincode.

The LCCC entry will be checked against the chaincode every time the chaincode is launched
* on instantiation
* on bring up the chaincode for an invoke if not already running",,angelo.decaro,binhn,greg.haskins,mastersingh24,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1783,,,,,,,,,,,,,,,,FAB-2241,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-37,,,,,,,,,"1|hzxkgf:",,,,Unset,,Sprint 11 - Endorser,,,,,,,,,,,,,Unset,,,,,,,,,,,angelo.decaro,binhn,greg.haskins,mastersingh24,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Feb/17 10:49 PM;angelo.decaro;Hi [~muralisr], I would add also the security of the container. Is it true that if a chaincode is instantiated in multiple chain, anyway there is only one container that chaincode?;;;","11/Feb/17 12:58 AM;mne;The new deployment model changes the threat model in the following way:
Different chains belong to different trust domains. By having one chaincode ""instance"" (i.e. one container) handling two chains, this significantly weakens the isolation between the two chains.

Consider the following scenario: Alice and Bob are on chain A, Mallory is on chain B. The same chaincode has been instantiated to both chain A and B. Mallory's incentive is to find out what data is stored on chain A.
Up to now, Mallory's attack surface was limited to the fabric's code, which would handle both chains. Now he has an additional attack vector: the chaincode that handles both chains.
Since the chaincode is not part of the fabric, isolation between the chains is now a responsibility of the chaincode developers as well.
Possible attack venues are invocation parameters as well as anything stored on chain A and processed by the chaincode.
""Full"" compromise of the chaincode in terms of code execution is not even necessary, a confused deputy attack is already enough.

From my perspective, the only clean solution at the moment is to have separate container instances per chain.;;;","11/Feb/17 11:18 PM;binhn;bq. From my perspective, the only clean solution at the moment is to have separate container instances per chain.

The premise of this conclusion doesn't seem to hold: It is assuming that the attack is successful at the container, but that would also be true for separate container per channel. That is, if one were able to attack a container, all bet would be off.

I agreed that it would be more invasive in the case of a single container per chaincode but it doesn't change the important of security on container, which is addressed technically not by us but by Docker community.;;;","13/Feb/17 3:54 PM;mne;[~binhn] I have to disagree. One has to carefully differentiate here between container security, chaincode security and security of the new deployment (i.e. one container instance per chaincode). Let's take them one by one:
1) Container security: indeed, for container infrastructure security, i.e. namespaces, cgroups, etc. we can rely on the docker community / Linux kernel community. 
2) Chaincode security: the fabric runs chaincode in a docker container. From the perspective of the fabric, the chaincode is not trusted - that's why it runs in a container in the first place. At the same time one has to assume that chaincode can contain vulnerabilities and might be exploited. I want to stress again here that this does not necessarily means that an attacker gains code execution, a successful confused deputy attack is sufficient to serve data from Alice and Bob's chain.
3) Security of the new deployment: if the separate chaincode containers are used for chain A and chain B, even a buggy, compromised chaincode can not return data from users of chain A to users of chain B - by design. If the same container instance is used for both chain A and chain B, this isolation is the responsibility of the chaincode and can no longer be ensured by the fabric.;;;","13/Feb/17 10:26 PM;greg.haskins;I think Matthias is generally correct in this assessment.  The threat being referred to has nothing to do with container security, but everything to do with execution context.  The only part I would disagree with is the notion that sharing a code instance in of itself is inherently less secure.  What makes this insecure in our current implementation is the process model we use for chaincode:  The instance stays running effectively under its own control.  Therefore, a well placed cache, ala:

{code:none}
var secrets = make(map[string]string)

func Invoke(user, params) {
    secrets[user] = params
}
{code}

may cause the violation I think Matthias is referring to.  This attack surface is indeed exacerbated by the recent update to the model since the execution context has now been broadened.  All this said, I think the real problem is our execution model and it should probably be addressed at this level.  The ideal scenario would be that chaincode is treated like callbacks and the execution environment more tightly controlled by the peer.  If this were the case, then the new model wouldn't be any less secure than it was prior to CR 5555.  We would, in fact, be more secure all around.
;;;","13/Feb/17 11:51 PM;mne;Thanks Greg, this is a good example of what I meant. Not sure how you want to enforce the execution context though and what it would be comprised of.;;;","14/Feb/17 12:15 AM;greg.haskins;The choice of golang for the chaincode makes this somewhat difficult, as normal hypervisor/kernel controls may adversely impact things like GC.  The only practical solution is probably to start a new process for each invoke.  More research needs to be done.;;;","14/Feb/17 12:47 AM;mne;One process per chain would already be sufficient for isolating chain access. As pointed out above, this could just be done using one container per chain.
Beyond this, I doubt that having one process per invoke would help a lot at the moment. Chaincode developers could still easily persist state (the cache example you described above) on the file system of the container across invocations. So you'd need to reset it in addition before every invocation.;;;","14/Feb/17 1:14 AM;greg.haskins;Sorry, I wasn't clear:  What I meant was a new container per invoke.

I think at this point we should clarify a few terms:

* (docker) image
* (docker) container
* process

In the system prior to CR 5555, each channel carried its own ChaincodeDeploymentSpec.CodePackage which was compiled into its own _image_ and then started as its own container/process.  I think everyone agrees that the creation of a discrete _image_ for the same CodePackage, regardless of the security context, is wasteful.  We can optimize this without controversy.

Next up is the container/process model.  Personally, I think the notion of having 1 peer-wide image serve N containers/process, 1 per channel is _probably_ ok for some number of channels in the 5k-10k range.  If that model were acceptable, the above security concern (at least w.r.t. cross-channel threats) doesn't exist.

My assumption is that is not what we are talking about here though:  I assume we are trying to further optimize by only running 1 peer-wide container/process to serve N channels.  In that model, the attack surface exists and could be mitigated several ways but the most viable way is probably to effectively restart the container/process per request.  Preliminary experiments show this overhead is in the order of about 250ms/request, which isn't fantastic but it also might be fast enough in the context of blockchain applications (because the consensus convergence time is an order of magnitude higher).  We can probably also get clever to improve this, such as pre-loading the executable, etc.  I digress.  As I said, more research is needed.

So, to rephrase, when I said ""start a new process"" I meant start a new container/process, in which case the state including filesystem is ephemeral and wouldn't be subject to the persistence issue you mentioned.  We could mitigate this other ways as well, such as locking down write access to the filesystem (via the apparmor and/or fs permissions).
;;;","14/Feb/17 1:48 AM;mne;Thanks for the clarification. Starting a new container/process per request would improve security beyond the one container/process per channel approach. The decision could also be pushed to the deployer of the fabric by making it a configuration option.

Locking down the container in terms of filesystem access opens up a much broader question: what kind of capabilities are really needed for chaincode (file I/O, network I/O, system calls, etc.)?;;;","14/Feb/17 3:35 AM;binhn;Multichannel on a peer is a deployment option. Nothing prevents people from bringing up an entire new network (or a new set of peers) to support a new channel. Similarly, sharing a chaincode among multiple channels is also optional. Users may deploy a new chaincode for the new channel. In other word, everything can be kept separate as implemented now.

We know that optimization in deployment requires check and balance. One thing that this jira item describes is the ownership of the chaincode, who would sign the chaincode package after it has been reviewed. Honest bugs certainly happen, but I doubt malicious chaincode would enter in this fashion. 

We should evaluate and provide appropriate guidelines for our users depending on their needs, including human process to follow.;;;","14/Feb/17 4:05 AM;mastersingh24;So a few things:

1) Chaincode process itself has no requirements on filesystem, etc.  If someone chooses to use the filesystem, they are likely going to get into real trouble since the filesystem is ephemeral and there is no guarantee that a container will not be destroyed, recreated and restarted

2) Chaincode process itself does not directly read from the state store (it does not write either as write's occur during commit after going through ordering).  Each GetXXX call is actually a remote call that goes back to the peer (the peer knows the context of the ""call"" being made)

Now - on the model - one thing that MIGHT not be apparent here is that if someone so chooses, they could install / instantiate the chaincode on different channels as separate instances (basically when they install the package, they can give it a different name and this will result in it being considered different chaincode even though the package/code bytes are identical).

In terms of security ""holes"", the only way for someone to *possibly exploit* any of this is to modify the shim and/or peer code.  I/we don't see anyway that in the normal case someone would be able to gain insight about what's happening on another channel;;;","14/Feb/17 4:27 AM;greg.haskins;I feel like we are talking about different things here.

To be clear: I am not talking about some kind of security concern about merely running the same ""application"" in two different channels (regardless of whether those channels are of the same fabric or not).  Rather, I am talking about the security concern that would arise if the peer applied an optimization when it detects that the same application is instantiated on different channels, and it optimizes the deployment such that one container/process services more than one channel.  In that scenario, the current execution model would be conducive to leaking information between channels (intentionally or not) such as through global variables, threads, of filesystem state that transcends invoke() context.

Gari: regarding your point (1) above, I don't think anyone was suggesting legitimate chaincode _should_ do that.  What we are saying is that malicious chaincode _could_ do that to leak state between security domains IFF one instance was allowed to serve both domains.;;;","20/Apr/17 10:37 AM;muralisr;I think we have made quite some progress on securing front. Lots of overlap with other security JIRA items in this space. Will move to [~ellaki] to address as fit.;;;","31/Jul/19 12:58 PM;mastersingh24;Superseded by new lifecycle;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Migrate configtx.Manager to parse ConfigNext,FAB-2144,14701,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 12:06 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"While integrating the ConfigNext proto, adapter code was written to convert it back to the original Config type.  This conversion code needs to go away, and as a first step, the configtx.Manager needs to begin using the updated format.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkgn:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,3.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify configtx.Handler interface to use ConfigValue,FAB-2145,14702,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 12:08 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkgv:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move policies mocks from orderer to common,FAB-2146,14703,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 12:33 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkh3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger GetStateMultipleKeys for CouchDB should use rich query internally,FAB-2147,14704,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,balaji.viswanathan,balaji.viswanathan,10/Feb/17 1:05 AM,23/Jun/21 8:14 AM,28/Oct/23 2:58 AM,23/Jan/20 3:50 AM,,,,,Future,,,fabric-ledger,,,,0,Ledger,stale-item,,,,,,GetStateMultipleKeys currently loops through GetState for each of the keys. For CouchDB this translates to individual HTTP queries. Instead we should use a $in operator and a rich JSON query,,balaji.viswanathan,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18507,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7l3:",,,,Unset,,Sprint 11 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,Unset,,,,,,,,,,,balaji.viswanathan,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:50 AM;sykesm;Stale;;;","23/Jun/21 8:07 AM;denyeart;As explained at [https://github.com/apache/couchdb/issues/1852] , $or and $in queries use an index, but they do a full scan of all documents in the index, so you don't get the expected performance of an index. Therefore GetStateMultipleKeys should use the native CouchDB bulk retrieve API - all_docs with a set of keys passed in the body. I've created FAB-18507 for this support.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate policies from ConfigItem to ConfigGroup,FAB-2149,14706,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 2:25 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkhj:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate channel config from ConfigItem to ConfigGroup,FAB-2150,14707,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 2:50 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkhr:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate orderer config from ConfigItem to ConfigGroup,FAB-2151,14708,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 3:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkhz:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate application config from ConfigItem to ConfigGroup,FAB-2152,14709,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 3:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxki7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Split orderer config into local and genesis components,FAB-2155,14712,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 4:37 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,This split is necessary to prepare to migrate the orderer genesis creation into the common package to use as a starting point for generating genesis material.,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkiv:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move orderer viper enhancements to common,FAB-2156,14713,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 5:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"Before moving the orderer genesis generation to common, it needs the enhanced viper support added by the orderer.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkj3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip retry connection to bootstrap peers,FAB-2157,14714,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,10/Feb/17 6:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Mar/17 4:44 PM,,,,,,,,,,,,0,,,,,,,,"In gossip, if a peer starts up and the bootstrap peers aren't available, a reconnection attempt isn't being made.
This is risky especially in automatically-managed environments like the cloud where machines can come up automatically and there is a large number of them and no one analyzes their logs in real-time. ",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxkjb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move orderer genesis config to common,FAB-2162,14719,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 11:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxklz:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move orderer provisional bootstrapper to common/configtx/tool,FAB-2163,14720,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 11:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkm7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy transaction content is too huge (about 70 MB) to display in Peer DEBUG logs.,FAB-2165,14722,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Ratnakar,Ratnakar,10/Feb/17 12:58 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 12:43 AM,,,,,v1.0.0,,,fabric-gossip,fabric-peer,,,0,quality,,,,,,,"while deploying chaincode, a huge binary data (probably deploy payload message , which is about 70 MB) been displayed in debug console logs.


It is good to Display only the required information for debugging , instead of displaying the whole binary data.

A gist of logs for reference.

{code}

2017-02-09 23:01:08.936 UTC [protoutils] validateEndorserTransaction -> INFO 09b validateEndorserTransaction info: there are 1 actions
2017-02-09 23:01:08.936 UTC [protoutils] validateEndorserTransaction -> INFO 09c validateEndorserTransaction info: signature header is valid
2017-02-09 23:01:08.950 UTC [protoutils] ValidateTransaction -> INFO 09d ValidateTransactionEnvelope returns err %!s(<nil>)
2017-02-09 23:01:08.950 UTC [txvalidator] VSCCValidateTx -> INFO 09e [XXX remove me XXX] Transaction type, ENDORSER_TRANSACTION
2017-02-09 23:01:08.950 UTC [txvalidator] VSCCValidateTx -> INFO 09f Invocation of LCCC detected, no further VSCC validation necessary
2017-02-09 23:01:08.779 UTC [gossip/comm#-1] Send -> INFO 092 Entering, sending channel:""myc1"" tag:CHAN_AND_ORG dataMsg:<payload:<seqNum:1 data:""\n\206\001\010\001\022@}OMhd#{\221S\263\""\302\204\330\001
^\345\021W#\264\323\216\036\313\022e\240\265\244\346\271:p\216\224\373s\t\0238\363\2718\273\231y\274\""\215\004\256\315G\205#u\322^\350u\177\311\200\032@\tHJ\214\223\204./\000C\026\003\033AO\236B\017\277\22
1O\307\t\032\347A\177\037;*\003\222\213\224Q\231\020N\310\226y\264\264\033\354g\306gG\225\306f[V\310F:i\364\310\312\237\326\304\022\364\354\216\014\n\357\354\216\014\n\241\354\216\014\n\200\010\n8\010\003\
""\004myc1*$7ba34337-da31-45dc-998c-6b35f0d35f46:\010\022\006\022\004lccc\022\303\007\n\246\007\n\007DEFAULT\022\232\007-----BEGIN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfz
ELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxM
TExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpF
fiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpP
IMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCI
bfmuLpMwKQj38=\n-----END -----\n\022\030\035\2519\310\035\332\231\207\366\003-\327\031iJ9\205!\013\201\225t\215U\022\231\344\216\014\032\224\344\216\014\n\303\007\n\246\007\n\007DEFAULT\022\232\007-----BEG
IN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDA
K\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZh
YnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQU
HAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCID
f9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\n-----END -----\n\022\030\035\2519\310\035\332\231\207\366\003-\327\031iJ9\205!
{code}
",,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkmf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 12:43 AM;Ratnakar;Not seeing this issue any more on latest commit level *3a61f6b61be404eb778d5d1be5179795eca218d0*.
Closing the issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Panic upon instantiate without version provided,FAB-2166,14723,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,denyeart,denyeart,10/Feb/17 1:03 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Apr/17 4:54 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"I don't see instructions for how to run instantiate yet.  I attempted this:

peer chaincode instantiate -C myc1 -n marbles -c '{""Args"":[""init""]}'

Got a peer panic as follows:

panic: ---empty version---(chain=myc1,chaincode=marbles,version=,txid=863c198a-f07b-49bf-8527-971a2f3f37a1,syscc=false,proposal=0xc4214d2280

goroutine 896 [running]:
panic(0xaa1d80, 0xc42152f2c0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/common/ccprovider.NewCCContext(0xc42154a358, 0x4, 0xc42152f248, 0x7, 0x0, 0x0, 0xc42142e000, 0x24, 0x0, 0xc4214d2280, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/common/ccprovider/ccprovider.go:137 +0x9b4
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode(0x117dc60, 0x7ff783a3c370, 0xc42142e1e0, 0xc42154a358, 0x4, 0xc2ba30, 0x16, 0xc42142e000, 0x24, 0xc4214d2280, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:118 +0x56e
github.com/hyperledger/fabric/core/endorser.(*Endorser).simulateProposal(0x117dc60, 0x7ff783a3c370, 0xc421527980, 0xc42154a358, 0x4, 0xc42142e000, 0x24, 0xc4214d2280, 0xc421527fb0, 0x11487e0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:165 +0x16d
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0x117dc60, 0x7ff783a3c370, 0xc421527980, 0xc4215279e0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:318 +0x433
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler(0xb57660, 0x117dc60, 0x7ff783a3c370, 0xc421527980, 0xc4202bb4c0, 0x0, 0x0, 0x411b6c, 0x1160440, 0x7ff700000001)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:99 +0x27d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc4201beb40, 0x1147000, 0xc4214cdc20, 0xc4213412c0, 0xc4200fd050, 0x11289a0, 0xc421527950, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:580 +0xa2d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4201beb40, 0x1147000, 0xc4214cdc20, 0xc4213412c0, 0xc421527950)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:737 +0x6ad
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc42156f400, 0xc4201beb40, 0x1147000, 0xc4214cdc20, 0xc4213412c0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:402 +0xab
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:403 +0xa3",,denyeart,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxam7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Feb/17 9:18 PM;muralisr;Will fix and provide a test case shortly. Thanks [~denyeart];;;","13/Apr/17 4:54 PM;muralisr;peer chaincode instantiate -n mycc -c '{""Args"":[""init"", ""a"", ""100"", ""b"", ""200""]}' -o 127.0.0.1:7050
Error: Chaincode version is not provided for instantiate
Usage:
  peer chaincode instantiate [flags]

This is now fixed. Closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer command line help is not helpful,FAB-2167,14724,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,denyeart,denyeart,10/Feb/17 1:08 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Jun/17 12:05 PM,,,,,v1.0.0,,,fabric-peer,,,,0,help-wanted,,,,,,,"I attempted ""peer chaincode"" looking for guidance on how to call instantiate, but it just provides the list of valid functions like 'instantiate' and a bunch flags. It doesn't indicate which flags are required for which functions, or any sample text.",,binhn,ChristopherFerris,Clayton Sims,denyeart,guoger,muralisr,weeds,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkmn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,Clayton Sims,denyeart,guoger,muralisr,weeds,wlahti,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 4:57 PM;muralisr;This is a big usability issue (the peer CLI interface is something that is used a lot and should have a good look and instructions). 

Going to leave this as 1.0 but going to bump up the priority as this is something that'll stick out badly.;;;","20/Apr/17 9:16 AM;muralisr;This is a problem with all CLI commands. Adding ""help wanted"" tag. If no one picks it up will try to get to it in 1.0.;;;","22/Apr/17 11:27 AM;guoger;[~muralisr] Hi, is this something that a newbie could start with?;;;","22/Apr/17 1:13 PM;muralisr;[~guoger] I don't see why not. CLI is at the user level and easier for a beginner to the fabric to start to dig into it.

Also, some more information ... [~greg.haskins] introduced https://github.com/alecthomas/kingpin to handle command line for cryptogen https://gerrit.hyperledger.org/r/#/c/8269 ... and I believe the long time goal was to use that to clean up peer CLI as well.

I wonder  if this CR of cleaning up help can be a part of that. 

;;;","22/Apr/17 4:42 PM;guoger;[~muralisr] Awesome! I only have some basic knowledge about v0.6 now but I'll give it a try! I'll keep you posted about progress. Could you shepherd this work? Thanks!;;;","23/Apr/17 12:38 PM;muralisr;[~guoger] happy to help in any way I can. ;;;","12/May/17 4:55 AM;ChristopherFerris;Hi [~guoger] - we should talk;) Ping me (@cbf) on RocketChat - I should be around this evening.;;;","31/May/17 11:35 PM;Clayton Sims;Jay - how's it going on this one?;;;","01/Jun/17 12:14 AM;guoger;[~Clayton Sims] Still need couple of days to compile my notes into a doc. Will submit a draft patch over the weekend. Sorry for the delay, took some time to familiarize myself with the project :P;;;","03/Jun/17 1:19 AM;weeds;Jay- Thanks! we are just really glad to have you on board. Welcome to the team!;;;","03/Jun/17 1:23 AM;muralisr;[~denyeart] Wouldn;t classify this as a ""High"" bug... let me lower it to medium and do change it back if you disagree.;;;","07/Jun/17 8:56 PM;muralisr;[~guoger] any update on this ? We could do this post 1.0 if you like if [~denyeart] agrees.;;;","12/Jun/17 9:11 PM;guoger;[~muralisr] hi, sorry for the delay, I just posted a review here: https://gerrit.hyperledger.org/r/#/c/10463/
I refactored command implementation so flags could be categorized more easily and we need lesser code adding new flag. Essentially it's changed to use a map to maintain a list of flags, which could be assigned to specific sub-commands. So when adding new flag, we could just add that flag to the map, and refer to it using flag name as key at individual command impl. Otherwise, we need to duplicate code for every single one of commands using the flag.

I'm working on other parts of commands now, let me know what you think.

Yes we could do it post 1.0 if you think appropriate, although remaining work should be straightforward, as long as you agree with this approach. thx!;;;","13/Jun/17 2:25 AM;wlahti;My initial notes after checking out [https://gerrit.hyperledger.org/r/#/c/10463/]:

general note: shouldn't channel be used in place of chain?
{code:java}
Flags:
-C, --chainID string The chain on which this command should be executed (default ""testchainid""){code}
invoke:
 - doesn't need path flag, does need channel flag added

instantiate:
 - doesn't need path flag

install
 - command isn't found by CLI

{code:java}
Usage:
peer chaincode [command]
Available Commands:
instantiate Deploy the specified chaincode to the network.
invoke Invoke the specified chaincode.
package Package the specified chaincode into a deployment spec.
query Query using the specified chaincode.
signpackage Sign the specified chaincode package
upgrade Upgrade chaincode.{code}
query:
 - doesn't need path flag, does need channel flag added

 ;;;","13/Jun/17 3:03 AM;binhn;[~wlahti]  yes, we should change ""chainID"" to ""channelID"" and ""chain"" to ""channel"". ;;;","13/Jun/17 6:36 AM;muralisr;[~wlahti] thanks much for the report.

[~guoger] The command line reporting is significantly better than before, thank you!  Can you make the corrections from [~wlahti] and [~binhn] review above please ?;;;","13/Jun/17 4:57 PM;guoger;[~wlahti][~muralisr] I updated the patch to address comments and added `channel` subcommand as well. Appreciate your review!;;;",,,,,,,,,,,,,,,,,,,,,,,
Unable to deploy chaincode using certificates generated from behave tests (Similar to sfhackfest),FAB-2168,14725,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,Ratnakar,Ratnakar,10/Feb/17 1:52 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 6:58 AM,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,"Commit Level : 8d2701a2de9bf958a6393cce34003c9261bf043f


It is possible to deploy with default channel ""testchainid"" on a single peer.
However, if we want to deploy chaincode on multiple orgs connected to a channel using the behave generated certs it is throwing the below error 
Please NOTE: These certs are used for sfhackfest (https://github.com/hyperledger/fabric/tree/master/examples/sfhackfest/tmp/peer0) with anchor (-a) in the channel creation command 

{code}
Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority
{code}


The step-by-step instructions for using the default channel are outlined here https://github.com/hyperledger/fabric/blob/master/docs/channel-setup.md


*Pre-requisites:*

* Vagrant 
* Generate cert data from behave folder
  cd /opt/gopath/src/github.com/hyperledger/fabric/bddtests
  behave -k features/bootstrap.feature.

  The above command generates certs for each org and stores under volume folder,
  For one run this is how it looks on my machine : {panel}bddtests/volumes/peer/7bbe3559ef4711e6866c0800275fb08f/peer0{panel}

* generate anchorPeer.txt with the below details (attached for reference)
  {code}127.0.0.1
  7051
  << Certificate data from peer0 signerCert goes here >>{code}
  Refer attached file  [^anchorPeer.txt] 

*Terminal Tab1*  - Start Orderer

{panel}ORDERER_GENERAL_LOGLEVEL=debug ./orderer{panel}

*Terminal Tab2* - 
{panel}CORE_PEER_GOSSIP_IGNORESECURITY=true CORE_PEER_MSPCONFIGPATH=opt/gopath/src/github.com/hyperledger/fabric/bddtests/volumes/peer/7bbe3559ef4711e6866c0800275fb08f/peer0 peer node start --peer-defaultchain=false {panel}

*Terminal Tab3* : Chain create/ Join and Deploychaincode 

run the below shell script

{code}
#!/bin/bash

export CORE_PEER_GOSSIP_IGNORESECURITY=true
export CORE_PEER_MSPCONFIGPATH=opt/gopath/src/github.com/hyperledger/fabric/bddtests/volumes/peer/7bbe3559ef4711e6866c0800275fb08f/peer0
export CORE_PEER_COMMITTER_LEDGER_ORDERER=127.0.0.1:7050

peer channel create -c myc1 -a anchorPeer.txt

peer channel join -b myc1.block

peer chaincode deploy -C myc1 -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
sleep 120
peer chaincode invoke -C myc1 -n mycc -c '{""Args"":[""invoke"",""a"",""b"",""10""]}'

sleep 10

peer chaincode query -C myc1 -n mycc -c '{""Args"":[""query"",""a""]}'
{code}

while executing the deploy step it fails , attached the logs for both  [^peer-logs.txt]  and  [^deploy-failure.txt]  logs.",,denyeart,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Feb/17 1:44 PM;Ratnakar;anchorPeer.txt;https://jira.hyperledger.org/secure/attachment/10502/anchorPeer.txt","10/Feb/17 1:50 PM;Ratnakar;deploy-failure.txt;https://jira.hyperledger.org/secure/attachment/10501/deploy-failure.txt","10/Feb/17 1:50 PM;Ratnakar;peer-logs.txt;https://jira.hyperledger.org/secure/attachment/10500/peer-logs.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkmv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 1:13 AM;Ratnakar;Not seeing the failure when I do invokes as before 

{code}
2017-02-10 04:33:46.398 UTC [msp] Setup -> INFO 021 MSP manager setup complete, setup 1 msps
Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority
{code}

However unable to see the query results which works when verified with native binaries.

{code}
root@12df719e6ec5:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode invoke -C myc1 -n mycc -c '{""Args"":[""put"",""a"",""8qewiuyeiwqe9ijcknx,mcn,mxzn987098709870987987097098709870""]}'
2017-02-16 16:10:24.038 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-16 16:10:24.040 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-16 16:10:24.040 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-16 16:10:24.043 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0A80080A38080322046D7963312A2464...37393837303937303938373039383730 
2017-02-16 16:10:24.043 UTC [msp] Sign -> DEBU 005 Sign: digest: 207CAD83AF04041F431F76EF6C40981BED81E3EE749AF0EDF566A8E1AFEA81EA 
2017-02-16 16:10:24.063 UTC [SW_BCCSP] createKeyStoreIfNotExists -> INFO 006 KeyStore path [/tmp] missing [true]: [<clean>]
2017-02-16 16:10:24.063 UTC [SW_BCCSP] createKeyStore -> DEBU 007 Creating KeyStore at [/tmp]...
2017-02-16 16:10:24.063 UTC [SW_BCCSP] createKeyStore -> DEBU 008 KeyStore created at [/tmp].
2017-02-16 16:10:24.063 UTC [SW_BCCSP] openKeyStore -> DEBU 009 KeyStore opened at [/tmp]...done
2017-02-16 16:10:24.064 UTC [msp] Sign -> DEBU 00a Sign: plaintext: 0A80080A38080322046D7963312A2464...CEB68C02FE62464D29482E223D393F9F 
2017-02-16 16:10:24.064 UTC [msp] Sign -> DEBU 00b Sign: digest: F6FDEAD35E652D2F8AD0E81052B49A6FB4D7A35441F527CE4BEEE7D7DF8A4675 
2017-02-16 16:10:24.065 UTC [chaincodeCmd] chaincodeInvokeOrQuery -> INFO 00c Invoke result: version:1 response:<status:200 message:""OK"" payload:""OK"" > payload:""\n \005b$SUn\365\323\353\262\320K\234\301\273\036\266\031\324T\t(\3261\006jj\224\025\031\366\232\022d\nY\002\004lccc\001\004mycc\004\001\001\001\001\000\000\004mycc\000\001\001a\000:8qewiuyeiwqe9ijcknx,mcn,mxzn987098709870987987097098709870\000\032\007\010\310\001\032\002OK"" endorsement:<endorser:""\n\007DEFAULT\022\222\003-----BEGIN -----\nMIIBCzCBsgICA+gwCgYIKoZIzj0EAwIwEzERMA8GA1UEAwwIcGVlck9yZzAwHhcN\nMTcwMTI0MTk1NTQ1WhcNMTgwMTI0MTk1NTQ1WjAQMQ4wDAYDVQQDDAVwZWVyMDBZ\nMBMGByqGSM49AgEGCCqGSM49AwEHA0IABAaE7jdt9VVGTSgwTnKn+r8/ZSQxEruT\nx8++HEmLMM3ae5MkqhiPqvBQIY5JiBMKNKrB7brZWpWishR2yB3cBOswCgYIKoZI\nzj0EAwIDSAAwRQIgFq+ACI//NZgmJb2uyuJ4TFWD9xDf0C2FYSUCZE4eo8ICIQCa\nYXlXCyNbP2hvd7+sJPmyBSvZRzf/jfMdTZaDKlEr7Q==\n-----END -----\n"" signature:""0D\002 ,\206\033\355\273\267\215\343\3369\035&!x\217)n\201\213\036\306D\362\230\325ne\033nU \306\002 ~z\200/\3179>\035\\\345\250\331ajxO\316\266\214\002\376bFM)H.\""=9?\237"" > 
2017-02-16 16:10:24.065 UTC [main] main -> INFO 00d Exiting.....
{code}


{code}
root@12df719e6ec5:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode query -C myc1 -n mycc -c '{""Args"":[""get"",""a""]}'
2017-02-16 16:10:47.866 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-16 16:10:47.869 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-16 16:10:47.869 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-16 16:10:47.871 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0A80080A38080322046D7963312A2430...12046D7963631A080A036765740A0161 
2017-02-16 16:10:47.871 UTC [msp] Sign -> DEBU 005 Sign: digest: 82932F85C3A3E7949D0EAABC9B3FD5FC976B7AD2D6CAB2BDB20ABBF3E76FF93A 
Query Result: 
2017-02-16 16:10:47.877 UTC [main] main -> INFO 006 Exiting.....
{code};;;","12/Apr/17 6:58 AM;denyeart;[~Ratnakar]
I believe this is fixed.  If you still see the issue please re-open.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dynamically generate test genesis material,FAB-2169,14726,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 2:55 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkn3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove ConfigItem references from protos and code,FAB-2170,14727,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Feb/17 4:57 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxknb:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove '*Next' from structures,FAB-2172,14729,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,11/Feb/17 12:23 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxknr:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy from node app fails on sfhackfest images,FAB-2173,14730,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,Ratnakar,Ratnakar,11/Feb/17 12:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,16/Apr/17 10:17 PM,,,,,v1.0.0,WON'T FIX,,fabric-docs,,,,0,quality,,,,,,,"Solved by - https://gerrit.hyperledger.org/r/#/c/6217/1

After this change https://gerrit.hyperledger.org/r/#/c/5621/, merged into Node-sdk, 
the latest node app won't work against hackfestImages , those images expects Dockerfile which is not the case with latest node app.

Two ways to solve the problem :

1. pick the old node changes using the below command:
   {core}curl -OOOOOO https://raw.githubusercontent.com/hyperledger/fabric-sdk-node/e64871fb82efa171cb427acf32ebfa2707ecb939/examples/balance-transfer/{config.json,deploy.js,helper.js,invoke.js,query.js,package.json} {core}

2. Preferable and neat solution as [~jimthematrix] suggested, to use alpha branch
  {code}
curl -OOOOOO https://raw.githubusercontent.com/hyperledger/fabric-sdk-node/v1.0-alpha/examples/balance-transfer/{config.json,deploy.js,helper.js,invoke.js,query.js,package.json}
  {code}


Need the doc to be updated with the later command.
",,ChristopherFerris,markparz,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxknz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 4:13 AM;markparz;[~jimthematrix] Is there a bug issue for this under SDK? this requires a code change as well as doc, this covers the doc change. ;;;","16/Apr/17 10:17 PM;ChristopherFerris;I'm going to close this as the hackfest images are no longer relevant.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"DUPLICATE: As an administrator, I need better runtime monitoring capabilities for the fabric",FAB-2174,14731,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,denyeart,denyeart,11/Feb/17 12:45 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,12/Mar/18 2:57 AM,,,,,,,,,,,,0,,,,,,,,"Feedback from solutions:

Provide basic information about deployed chain code on the chain, such as chain code ID, its deployed time, etc；For each chain code, with proper permission, provide invoke/query metrics data such as TPS, consensus latency(average, 50%, 85%), broken down into different chain code API (function)；Provide storage usage information on peer node. (@huangssh, Nov 16, 2016)",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3389,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxko7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/18 2:57 AM;denyeart;Closing as dup of FAB-3389.  I've added the requests here to FAB-3389 description.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploy is failing on end-to-end after install/instantiate changes made in fabric,FAB-2175,14732,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisr,rameshthoomu,rameshthoomu,11/Feb/17 1:29 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,20/Feb/17 12:24 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"*Description:*
Observed ""deploy"" is failing on end-to-end after install/instantiate changes made in fabric.

Docker Log file: https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/100/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/dockerlogfile.log

Commit Levels: https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/98/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/commit_history.log",Jenkins CI,jimthematrix,muralisr,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-215,,,FABN-215,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkof:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jimthematrix,muralisr,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 4:23 AM;muralisr;[~rameshthoomu] did you try with latest ?;;;","17/Feb/17 8:04 AM;rameshthoomu;[~muralisr] Will test this scenario on latest commits and update the status here;;;","17/Feb/17 9:00 AM;muralisr;This might be more of a SDK issue while the new model is being incorporated into it... should clear up shortly (hopefully).

[~harrisob@us.ibm.com];;;","19/Feb/17 1:19 AM;muralisr;[~rameshthoomu] hopefully fixed with the latest SDK/master. Can you verify please ?;;;","20/Feb/17 11:27 AM;jimthematrix;[~rameshthoomu] please verify with the latest fabric and node sdk;;;","20/Feb/17 12:24 PM;rameshthoomu;Tested end-to-end on latest commits and observed it's working as expected. Please see the latest build result here https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/141/console;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ConfigUpdate proto,FAB-2176,14733,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,11/Feb/17 1:43 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,16/Feb/17 3:33 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"In order to stabilize the protos, the ConfigUpdate protos need to go in first.  The existing code can be adapted simply to depend on a ConfigUpdate write set which includes the entire config.  Then, the actual partial config updates can be built on top of it.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkon:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
support for SDK based install,FAB-2177,14734,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,11/Feb/17 2:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 8:23 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"With the new deploy model where the installation is on the file system, we cannot use the deploy proposal (or the new ""instantiate"" proposal) to install the code - that proposal will turn into a TX and we don;t want to ship the bytes to the channel.

The ""on peer"" install is not quite satisfactory for developers who have to log on to a peer to install before they do anything.  

This task will implement a new ""install"" Invoke command on the LCCC whose only purpose is to put the code on the file system. It is the equivalent of the ""peer chaincode install..."" command except that it will also go through the endorsement process.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1783,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-37,,,,,,,,,"1|hzxkov:",,,,,,Sprint 11 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename json ledger implementation,FAB-2178,14735,13711,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,11/Feb/17 3:02 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Mar/17 5:40 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"In preparation for bringing in the common file ledger implementation, rename the existing orderer file ledger as the json ledger.",,kchristidis,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkp3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,kchristidis,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/17 3:38 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/5857/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The BCCSP HMAC function should return []byte instead of Crypto Object type,FAB-2182,14739,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,adc,ashutosh_kumar,ashutosh_kumar,11/Feb/17 4:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,01/Mar/17 1:35 AM,,,,,v1.0.0,,,,,,,0,Security,,,,,,,"bccsp.HMACTruncated256AESDeriveKeyOpts should return []byte instead of aesKey Object. This is failing TCert code integration to BCCSP. I am looking for same behavior as HMAC(key []byte , message []byte)[]byte. [~vpaprots] , can you please provide any workaround , if available ? ",,angelo.decaro,ashutosh_kumar,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-660,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkpz:",,,,,,Sprint 11 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,ashutosh_kumar,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/17 11:59 PM;angelo.decaro;[~ash1kumar][~vpaprots] So it looks to me this would be difficult to achieve with HSM because the output of the HMAC might be sensitive and not exportable. ;;;","14/Feb/17 12:27 AM;ashutosh_kumar;Can you have 2 functions : 
# Generating Key Object and 
# Generating Byte array ? 

Just an advice.;;;","14/Feb/17 1:12 AM;ashutosh_kumar;I tried this piece of code : 
buff := new(bytes.Buffer)
		buffError := binary.Write(buff, binary.LittleEndian, tidxKey)
		*if buffError != nil {
			return nil, fmt.Errorf(""tidx byte conversion faield with error : %s "", buffError)
		}*

where tidxKey is 
tidxKey, tidxKeyError := tm.BCCSP.KeyDeriv(expansionValue, &bccsp.HMACTruncated256AESDeriveKeyOpts{Temporary: true, Arg: tidx})

While executing the code , got this error : 
*tidx byte conversion failed with error : binary.Write: invalid type *sw.aesPrivateKey*


;;;","14/Feb/17 2:59 AM;ashutosh_kumar;Based on my Rocket Chat conversation with [~vpaprots@ca.ibm.com] : We need to support tm.BCCSP.KeyDeriv(pk2, &bccsp.ECDSAReRandKeyOpts{Temporary: true, *Expansion: /*tidxKeyByte*/ buff.Bytes()*}) for Expnsion argument to be of type bccsp.Key as for TCert work , I want the HMACked Key to be passed as Expansion Argument.;;;","14/Feb/17 3:43 AM;vpaprots;Something like this in bccsp/opts.go

// ECDSAReRandKeyOpts contains options for ECDSA key re-randomization.
type ECDSAReRandKeyOptsFromKey struct {
	Temporary bool
	Expansion Key
}

// Algorithm returns the key derivation algorithm identifier (to be used).
func (opts *ECDSAReRandKeyOptsFromKey) Algorithm() string {
	return ECDSAReRand
}

// Ephemeral returns true if the key to generate has to be ephemeral,
// false otherwise.
func (opts *ECDSAReRandKeyOptsFromKey) Ephemeral() bool {
	return opts.Temporary
};;;","16/Feb/17 1:12 AM;ashutosh_kumar;Based on discussion with [~ellaki] and [~adc] , I have to use the function HMACDeriveKeyOpts to get expansion value. Will give it a try.;;;","01/Mar/17 1:35 AM;ashutosh_kumar;The approach worked. [~vpaprots] is working on alternative approach. Closing it now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetStateByRange API: simple key and composite key collisions,FAB-2183,14740,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Senthil1,Nishi,Nishi,11/Feb/17 4:27 AM,17/Jan/19 7:11 PM,28/Oct/23 2:58 AM,01/May/17 12:00 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"When we do range query on simple keys, it does return composite key as well. For example, the following range query on marble02 chaincode example returns both simple key such as marble2, marble3, and composite key such as color~namebluemarble2, color~namebluemarble2 where it should have returned only marble2 and marble3.

$ peer chaincode query -n mycc1 -v 0 -c {""Args"":[""getMarblesByRange"",""a"",""z""]} -o 127.0.0.1:7050 -C ch1
Query Result: [

{""Key"":""color~namebluemarble3"", ""Record"":} \{""Key"":""color~nameredmarble2"", ""Record"":}

{""Key"":""marble2"", ""Record"":\{""docType"":""marble"",""name"":""marble2"",""color"":""red"",""size"":50,""owner"":""tom""}},
{""Key"":""marble3"", ""Record"":\{""docType"":""marble"",""name"":""marble3"",""color"":""blue"",""size"":70,""owner"":""tom""}}

How fabric can differentiate between a simple or composite so that GetStateByRange() can return only simple keys?
 *Approach-1* _Ledger adds a null character 0x00 as a first character in simple key._
The constructCompositeKey(namespace, key) in ledger check whether the key contains \x00. If it does not contain \x00, then the key is a simple key and add a \x00 in the front of the key. The splitCompositeKey() removes the added \x00 in the front of the key if exist. For this approach to work, we shouldn’t allow 0x00 in original simple key. Still, this approach will not work as PutState() cannot be used for both simple key and composite key when we want to allow \x00 in composite key (added by CreateCompositeKey) but not in simplekey.

*Approach-2*: _Ledger adds a null character 0x00 as a first character in simple key_ This approach is an extension to approach-1. Expose a new chaincode API named PutCompositeState(objectType, attributes, value). Internally, we can call createCompositeKey() instead of exposing an API for that followed by handlePutState(). We have done a similar thing in GetStateByPartialCompositeKey(objectType, attributes). This would simplify the chaincode as well. We can then let chaincode use PutState() API only for simple key and do not allow \x00. At ledger side, we use the approach-1 .

*Approach-3*: _Add a separate namespace for simple and composite key._ Expose two new chaincode APIs named GetCompositeState() and PutCompositeState(). In front to the composite key, chaincode APIs adds c to denote that the key is composite. Similarly, chaincode APIs such as GetState(), PutState(), GetStateByRange() adds ‘s’ in the front of simple key. At ledger side, Next() of each result iterator removes ‘c’ or ‘s’ from the front of each key.

*Approach-4* _Add separate namespace for simple and composite key._ Instead of adding ‘c’ and ‘s’ from chaincode APIs, we can add these namespace in ledger side. For this, we need to expose two new chaincode APIs and ledger APIs named GetCompositeState() and PutCompositeState(). Now, the ledger API adds ‘s’ and ‘c’ and Next() of each result iterator removes ‘c’ or ‘s’ from the front of each key.

*Approach-5* _Chaincode API CreateCompositeKey adds a null character 0x00 as a first character in composite key._ In current implementation of GetStateByRange(), we are not concatenating anything with startKey and endKey. In GetStateByPartialCompositeKey(), we concatenate U+10FFFF with the endKey. Hence, prepending 0x00 on composite key will not induce a collision. For this approach to work, we shouldn’t allow 0x00 as first character in simple key. Still, this approach will not work as PutState() cannot be used for both simple key and composite key when we want to allow \x00 as first character in composite key (added by CreateCompositeKey) but not in simplekey.

If startKey of a range query is empty (for an open ended search), current implementation treats the startKey as 0x00 (null). Hence, we replace the empty startKey with 0x01 to avoid collision. Now, there is no collision when chaincode issues open-ended search like (i) startKey="""" endKey="""", (ii) startKey=""a"" endKey=""z"".

TODO: we need to document somewhere that a simpleKey cannot start with a null (0x00) as we cannot introduce a new chaincode API PutCompositeState() at this time.",,ChristopherFerris,denyeart,Nishi,sanchezl,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABCJ-192,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-758,,,,,,,,,"1|hzx4nb:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,Nishi,sanchezl,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main-emeritius,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 9:13 PM;denyeart;Composite keys (ck) have an objectType prefix. Each part of composite key is delimited by null character, for example (spaces included for visual clarity only):
chaincodeid 0x00 objectType 0x00 ck1 0x00 ck2 0x00	// composite key 

This design ensures that various composite key types have an objectType namespace to guarantee no collisions across types.  For example range queries and partial composite key queries will never overlap.
 
Issue: Simple keys (sk) and composite key objectType are in the same namespace.  Range queries on simple keys will pick up composite keys in an objectType scope. They should be in different scopes to ensure no collisions.  To illustrate the issue, note that simple key and composite key objectType are in the same namespace / level:

chaincodeid 0x00 sk					                   // simple key 
chaincodeid 0x00 objectType 0x00 ck1 0x00 ck2 0x00	   // composite key 



*Solution *
Automatically put simple keys in a reserved namespace, for example the empty “” object space.
Note the simple key and composite key distinct namespaces now (spaces added for visual clarity):
chaincodeid 0x00                    0x00 sk 			        // simple key
chaincodeid 0x00 objectType 0x00 ck1 0x00 ck2 0x00	// composite key 

A range query from a to z on a simple key would look like:

chaincodeid 0x00 0x00 a  TO   chaincodeid 0x00 0x00 z
;;;","13/Apr/17 7:54 PM;Senthil1;Adding [~manish-sethi];;;","14/Apr/17 1:22 AM;denyeart;[~Senthil1]
Approach 2,3,4 are out assuming we do not allow chaincode API changes.

Can approach 1 and approach 5 work, if we document (but don't validate in code) that simple keys, or any part of a composite key, should not contain 0x00?;;;","14/Apr/17 1:39 AM;Senthil1;Yes, both approach would work for that assumption. Currently, we are checking for 0x00 in attributes of composite key and return error if exist. We only need to document for simple keys.

Approach 1 requires change only in ledger side whereas Approach 5 requires change only in chaincode shim. ;;;","14/Apr/17 3:03 AM;denyeart;After discussion with Senthil it was decided to proceed with Approach 5. 
[~Senthil1] Please add any more details to the Approach 5 Description above, for example the unbounded range query impact and anything else you find during imlementation.  Also note the typo ""CreateCompositeCreate"" :-);;;","23/Apr/17 9:55 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8119/;;;","23/Jun/17 12:16 AM;sanchezl;Before this change, it was possible to specify composite keys as parameters to {{getStateByRange()}}, now it is not possible. Was this intended?;;;","23/Jun/17 1:49 AM;Senthil1;Yes, it was intended. Now, getStateByRange() returns only simple keys and getStateByPartialCompositeKey() returns only composite keys. We have different namespaces for simple keys and composite keys to avoid collisions. ;;;","23/Jun/17 4:54 AM;denyeart;[~Senthil1] [~manish-sethi] [~sanchezl]

Let me be devil's advocate and propose relaxing the validation constraint...

If we allowed getStateByRange() to accept composite keys, I can see there would be collisions on the open-ended range queries.

But if we allowed it when both startKey and endKey were included, I think there would be value without issues.

Using the marbles02 example, say I want to query for blue marble1 through blue marble9, where <color,id> is the composite key.  Wouldn't it be safe to query on <blue,marble1> to <blue,marble9>?

So perhaps instead of rejecting all range queries with composite keys, we could relax it and instead validate that the first parts of the composite keys are the same in startKey and endKey. I believe this would protect against the concerns, while allowing range queries within a composite key space.  What do you think?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
node-SDK coucbdb-fabricca-tests.js should fail when 'CouchDB KeyValStore is not set successfully,FAB-2184,14741,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jjjjibm,jjjjibm,jjjjibm,11/Feb/17 4:49 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,20/Feb/17 3:13 PM,,,,,,,,,,,,0,,,,,,,,"jjjjibm 2:34 PM
Hi Caroline.  Consider this excerpt from coucbdb-fabricca-tests.js.

function(kvs) {
t.comment('Setting client keyValueStore to: ' +kvs);
client.setStateStore(kvs);
if (client.getStateStore() === kvs) {
t.pass('Successfully set CouchDB KeyValueStore for client');
} else {
t.pass('CouchDB KeyValStore is not set successfully on this client!');
t.end();
process.exit(1);

Notice the t.pass('Successfully ...)  ELSE t.pass(""..is NOT set successfully ....

Should that be t.FAIL('.... is NOT set successfully ...') ?

cdaughtr 2:37 PM   
 
yes!!!

jjjjibm 2:37 PM 
Ok, I'll write it up. I can make the change if you are busy?

cdaughtr 2:38 PM 
yes, please change it for me... working on the new CC deploy

",,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkq7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jjjjibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Feb/17 3:12 PM;jjjjibm;https://gerrit.hyperledger.org/r/#/c/5957/   merged;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hyperledger Fabric Logo,FAB-2185,14742,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,gtewallace,markparz,markparz,11/Feb/17 5:35 AM,20/Jul/18 11:17 PM,28/Oct/23 2:58 AM,20/Jul/18 11:06 PM,,,,,,,,fabric-docs,,,,0,help-wanted,Usability,,,,,,"Would be nice to have a nice, new, flashy logo for the Fabric, right now we just tag text to the HL logo. Any artist that can whip up some cool graphics?

Linked to FAB-2115",,alexrosen,ChristopherFerris,danoprey,gtewallace,jyellick,kchristidis,markparz,mastersingh24,SarahMills,seanbarclay,sstone1,yuleeandrea,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jun/17 12:24 AM;alexrosen;FabricLogo1-1.png;https://jira.hyperledger.org/secure/attachment/10953/FabricLogo1-1.png","11/Jul/17 7:28 AM;seanbarclay;Hyperledger Logos For Presentation3.pdf;https://jira.hyperledger.org/secure/attachment/11625/Hyperledger+Logos+For+Presentation3.pdf","07/Jun/17 3:34 PM;seanbarclay;Hyperledger Logos for Presentation.pdf;https://jira.hyperledger.org/secure/attachment/10975/Hyperledger+Logos+for+Presentation.pdf","07/Jun/17 3:38 PM;seanbarclay;Hyperledger_branding ideas lowerRes.pdf;https://jira.hyperledger.org/secure/attachment/10976/Hyperledger_branding+ideas+lowerRes.pdf","18/Jul/17 7:51 AM;yuleeandrea;Hyperledger_branding ideas_v2.pdf;https://jira.hyperledger.org/secure/attachment/11694/Hyperledger_branding+ideas_v2.pdf","11/Jul/17 7:28 AM;seanbarclay;Hyperledger_branding ideas_v2.pdf;https://jira.hyperledger.org/secure/attachment/11626/Hyperledger_branding+ideas_v2.pdf","04/Jul/17 9:52 AM;gtewallace;Hyperledger_project_logo_guide.pdf;https://jira.hyperledger.org/secure/attachment/11537/Hyperledger_project_logo_guide.pdf","27/Jul/17 10:01 PM;gtewallace;creative_brief.docx.docx;https://jira.hyperledger.org/secure/attachment/11780/creative_brief.docx.docx","27/Jul/17 5:10 AM;markparz;logos.jpg;https://jira.hyperledger.org/secure/attachment/11777/logos.jpg",,,,,,,,,,,,,,,,,,,,,"1|hzx0c7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,alexrosen,ChristopherFerris,danoprey,gtewallace,jyellick,kchristidis,markparz,mastersingh24,SarahMills,seanbarclay,sstone1,yuleeandrea,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/17 8:43 AM;ChristopherFerris;[~seanbarclay] can we propose a Fabric logo/icon for use by Hyperledger?;;;","25/May/17 3:21 PM;seanbarclay;Cool. We'll share ideas next week (Andrea is out this week). 
Cheers;;;","07/Jun/17 12:24 AM;alexrosen;[~seanbarclay] and [~ChristopherFerris], I've attached a logo that the IT People team proposed for Fabric back in March. If interested, I can get the vector file for iteration.;;;","07/Jun/17 3:33 PM;seanbarclay;Thanks [~alexrosen]. Your mark has some potential. IMHO, the typeface choices not so much.

so i had my team take a different approach. instead of only doing Fabric...I had them come up with a system that could be applied to other projects (e.g. Sawtooth, Composer, Burrow, etc.) that exist as well as be extended to future ones. 

For example, you'll see we tweaked the HP logo to fit within the style of the logos. Sawtooth and Composer logos were also added to cite examples of how they can work together as a projects under Hyperledger. Happy to work with HP Marketing on this more closely if desired. 

I've attached the two best idea explorations we came up with for consideration. 
1) Hyperledger Logos for Presentation.pdf
2) Hyperledger_branding ideas.pdf

[~ChristopherFerris] happy to take one idea and explore it further (along with any requested tweaks). We'll leave it up to the community and you on how you would like to proceed. 

Cheers;;;","11/Jun/17 2:08 AM;danoprey;The marketing committee should be involved in all branding efforts.;;;","11/Jun/17 10:00 AM;ChristopherFerris;+1 to marketing involvement... ;;;","13/Jun/17 1:30 AM;seanbarclay;Great, so what are the next steps with the Marketing Committee? Let us know how we can help.;;;","13/Jun/17 1:35 AM;danoprey;I had a preliminary chat with Greg on the topic this morning. We're going to reach out to the other projects for their views and prioritization. Will keep you posted.;;;","13/Jun/17 1:53 AM;seanbarclay;Groovy. Thanks [~danoprey]. ;;;","15/Jun/17 12:38 PM;seanbarclay;Please feel free to reassign back to me when and if you would like to move forward with one of the directions my team proposed. Thanks!;;;","18/Jun/17 12:55 PM;ChristopherFerris;This needs to be coordinated with Hyperledger Marketing Committee, Greg Wallace and Dan O'Prey. ;;;","20/Jun/17 12:36 AM;danoprey;Hi all, just to keep you posted, Greg and I discussed again today and he's also been chatting with Brian. Making progress and will come back to you shortly.;;;","29/Jun/17 6:48 AM;gtewallace;Hi - we landed on an approach and will have guidelines asap for all projects to create their logos. As soon as I know when the guidelines will be available I will comment here.

thanks so much!;;;","04/Jul/17 9:53 AM;gtewallace;Hi team.

Please find attached here the Hyperledger project logo guidelines.

Let me know if you have any questions.

thank you!

Greg

[^Hyperledger_project_logo_guide.pdf]

 ;;;","07/Jul/17 12:08 AM;gtewallace;Hi everyone,

With Fabric 1.0 coming up soon, I think it would be great to drive towards consensus around a project logo.

If I can ask the submitters of all logo suggestions to please rework them according to the above guidelines and then resubmit for discussion, I think that would be the best way to proceed.

Happy to answer any questions here;;;","07/Jul/17 12:19 AM;seanbarclay;Thanks Greg. We'll make some tweaks to our submissions and recommit to the ticket here. ;;;","07/Jul/17 12:22 AM;seanbarclay;Also if you could clarify the timeline and process for the logo selection via community consensus that would be very helpful to us and others.  Thanks!;;;","07/Jul/17 12:46 AM;gtewallace;just a quick word on process and timing. It looks like Fabric 1.0 is coming soon, so we'd love to get all logo proposals in by Monday 7/10. 

we would ask that all interested parties register their preference and that the community favorite be put forward to the marketing committee - I am  the proxy, so once the community preference is put forward, I will share it with the Marketing Committee Chair and we will ratify it as the logo or come back to the group with suggested changes. As long as the design adheres to the guidelines, we will do our absolute best to defer to the preferences of the community.

thanks!;;;","11/Jul/17 7:29 AM;seanbarclay;Thanks [~gtewallace]. 

Updated design logo proposals Hyperledger_branding ideas_v2.pdf and Hyperledger Logos For Presentation3.pdf have been attached to this ticket. Thanks

[^Hyperledger_branding ideas_v2.pdf]

 [^Hyperledger Logos For Presentation3.pdf]
;;;","15/Jul/17 1:18 AM;gtewallace;thanks [~seanbarclay]!

Love what you've got on page 5 in branding_ideas_v2

One small point is that the words ""Hyperledger"" and ""[Project Name]"" below it should be aligned with one another left.

One question - the Fabric and Composer logos look to have very similar visual styles, which may convey the notion that Composer is for Fabric. Clearly Fabric is the first supported framework, and my understanding is that the plan of intent is for Composer to work with other Hyperledger framewkrs. Given this long term plan, I wonder if having a little more differentiation in the style would be valuable?

In the interest of getting started with the Hyperledger Fabric logo, if you can make the small edit regarding the alignment of Hyperledger and Fabric and get that over to me in the requested formats, I'll begin using it on the web site and elsewhere.

Thanks and look forward to your and others' thoughts on the Composer logo question.;;;","15/Jul/17 3:00 AM;seanbarclay;Thanks [~gtewallace]

We'll send a revision with tightening up the alignment. 

What we set out to do was create a logo system so that other projects could align and unite under the Hyperledger brand- both now and in the future. We even went so far as tweaking the Hyperledger logo so that it would align better. But all of this was intentional. 

 The previous [PDF|https://jira.hyperledger.org/secure/attachment/10976/Hyperledger_branding%20ideas%20lowerRes.pdf] showed preliminary ideas on what that could look like with Fabric, Sawtooth, Composer, etc. The system can evolve and grow, but we think it would set a good tone if implemented. For the latest round we simplified and just showed Fabric and Composer, which our teams both contribute to. 

The complaint in the past that I've heard directly is that the projects don't align or look like part of a larger umbrella.I realize this is subjective, but the proposed design system looked to solve that. A united system would allow Composer to convey that you could pair it with Fabric, but other frameworks as well in the future. 

Alternatively, if you wanted to have distinct logos, taking the composer logo from Hyperledger Logos For Presentation3.pdf might make more sense. 

Thanks again;;;","15/Jul/17 5:12 AM;gtewallace;Now I see, thanks for the explanation.

My sense is that for now, a good step in the right direction is for all the projects to use the guidelines to create their logo. 

Since the guidelines ask for all logos to include ""Hyperledger"" and the project name in the same proportions, I do think this should get us on the path towards a more unified identity across the umbrella and constituent projects.

Realistically, I don't see us going from the current state of nearly no project logos to a fully integrated system in one fell swoop. I do sincerely appreciate the thought, skill and effort that have gone into these PDFs.

 ;;;","15/Jul/17 5:15 AM;danoprey;I agree with Greg. Individual projects need to have the creative freedom to create their own identity whilst ensuring some degree of consistency. I think the framework we landed on is a good compromise.;;;","15/Jul/17 5:33 AM;ChristopherFerris;So, how is this expected to play out? Are the project's maintainers deciding on a logo that was designed with the guidelines in mind and then recommending to Mktg Committee to approve?;;;","24/Jul/17 9:01 PM;gtewallace;[~ChristopherFerris]

yes, that is the process.;;;","24/Jul/17 9:52 PM;gtewallace;[~seanbarclay]

getting caught up here after I was on PTO last week.

I think I should be looking at Hyperledger_branding ideas_v2.pdf - is that right?

Assuming yes, then I think it's looking great. My only question has to do with the first page with the Hyperledger logos. Are these suggestions to replace the current logo? If so, then I would ask that we break these out into a separate file. At present there is no active process underway to rework the Hyperledger organization logo. Should the Marketing Committee determine that this is something it would like to pursue (and any member is totally empowered to advocate for this), then by all means these logos could be submitted as part of that process.

thank you!

Greg;;;","27/Jul/17 1:51 AM;jyellick;Per [~markparz] request for maintainers to vote:

> Hi @here all maintainers, Greg Wallace and I were talking on the logo pieces and we'd like to get a logo finalized and adopted, it was agreed to have the maintainers have the vote on the logo to go with.... while there are suggestions in some of the docs, for all the different projects under Hyperledger, for now let's just focus on fabric. There are a few entries under https://jira.hyperledger.org/browse/FAB-2185?jql=text%20~%20%22logo%22 Please look at the 1- first .png (FabricLogo1-1.png) , 2- Hyperledger_branding ideas_v2.pdf (3rd file) and 3- Hyperledger Logos For Presentation3.pdf (the last file). If you can look these over and place your vote for 1, 2 or 3 (or ""I don't care / hate them all"") by EOD tomorrow it would be greatly appreciated.

My preference would be for 2 - Hyperledger_branding%20ideas_v2.pdf;;;","27/Jul/17 3:01 AM;mastersingh24;2;;;","27/Jul/17 4:23 AM;seanbarclay;[~gtewallace] correct you should be looking at Hyperledger_branding ideas_v2.pdf, posted on 7/17/17. We did include a Hyperledger Project logo update in that PDF to reflect how it could be consistent with a Fabric and Composer logo to create cohesion and unity. Generally, from a branding perspective, you want to achieve that, but I can respect that the Hyperledger project doesn't want to go that route. Again, it's a suggestion to be considered. 

I see that the logos have been put up for an election. If selected, we'll be happy to provide the final files in whatever formats you need. Thanks again;;;","27/Jul/17 4:37 AM;gtewallace;[~seanbarclay]

great - that's what I figured. Yes, I'm keen to see the results of the vote - thanks again for all the work!!

Greg;;;","27/Jul/17 5:11 AM;markparz;Added logos.jpg for current options.;;;","27/Jul/17 3:15 PM;sstone1;[~seanbarclay] [~gtewallace] isn't the suggested Composer logo in these PDFs (the really boring C in a block one) a bit too close to the logo for the Consensus conference - it even uses the same teal colour? [consensus-2017-logo.png|https://coincenter.org/theme/barffle/images/consensus-2017-logo.png?19c75c63a8] ;;;","27/Jul/17 10:02 PM;gtewallace;[~sstone1]

I see your point. I'm not a lawyer, but I doubt it would raise any trademark concerns. that said, this is totally a community effort so [~seanbarclay] please reach out to Simon to collect input on desired direction.

I recommend you consider using a creative brief to structure Simon's feedback.

Attached here is the master Hyperledger Creative Brief that you can use as a start/template.

*EDIT* and since there seems to be momentum on the HL Fabric logo, let's continue moving forward with that one and once we've received plurality of votes in support of a design, let's finalize. Thanks!!;;;","31/Jul/17 9:39 PM;gtewallace;[~markparz]

It would seem we've collected all the votes we are going to get and that the winner is Hyperledger Fabric #2.

Agreed we finalize that one according to the instructions in [^Hyperledger_project_logo_guide.pdf] ?

Thanks again everyone!!

Greg;;;","31/Jul/17 10:59 PM;ChristopherFerris;[~gtewallace] not so fast! There was a new proposal made in RocketChat that seems to have far more support. https://chat.hyperledger.org/channel/fabric-maintainers?msg=mxCtD5PfotLsg2F4o;;;","01/Aug/17 5:29 AM;kchristidis;Recording my vote here: 2B.

(Was a big fan of Greg's idea but since we won't necessarily stick to it for all projects, I may as well go back to 2B.);;;","01/Aug/17 8:23 AM;jimthematrix;I'm also circling back to 2B, now that it's been clarified that this is only for ""Hyperledger Fabric"", so not considering other top level platforms (STL, Burrow, Indy, etc.) or sub-projects under Fabric (fabric-ca, chain-tools etc.), sorry for causing that going around ;-);;;","14/Sep/17 2:31 AM;markparz;Not seen anything else on this..... ie. no more submissions or anything, shall we call 2b a go?;;;","16/Sep/17 12:27 AM;ChristopherFerris;I don't think we should be settling for something that doesn't have lots of strong support. Many of the comments suggested to me that the design while somewhat relevant if we used it more broadly, didn't really knock people's socks off (no offense). ;;;","18/Apr/18 9:47 PM;ChristopherFerris;This is done - Mktg Cte handled, and docs etc have been updated accordingly.;;;"
Fabric Java SDK Documentation corrections,FAB-2186,14743,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,Ratnakar,Ratnakar,11/Feb/17 5:47 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,08/Aug/17 2:02 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Quality,,,,,,,"Fabric Java document has to be updated with the right steps.

For instance to spin the network the instructions below are wrong
 
{code}
cd /hyperledger
docker-compose up
{code}

It should be corrected to
{code}
cd /opt/gopath/src/github.com/hyperledger/fabric-sdk-java/src/test/fixture/src


docker-compose up -d 

OR 

./rundc.sh
{code}
",,ChristopherFerris,markparz,nickgaski,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkqf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,nickgaski,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 4:15 AM;markparz;Dependent on Java SDK completion FAB-759;;;","08/Aug/17 1:52 AM;ChristopherFerris;Is this still relevant [~nickgaski] [~markparz]? If not, please close [~Clayton Sims];;;","08/Aug/17 1:58 AM;nickgaski;can be closed;;;","08/Aug/17 2:02 AM;Clayton Sims;closing.  any one can close ;)

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
V1 Test Plan,FAB-2187,14744,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bmos299,bmos299,bmos299,11/Feb/17 5:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Oct/17 3:14 AM,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,"Please review and provide feedback.  Please add any testcases you'd like as well. If you are interested in participating, please add your name to a test.",,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/17 7:22 AM;bmos299;Fabric%201.0%20Component%20Test%20Coverage(2).xlsx;https://jira.hyperledger.org/secure/attachment/10507/Fabric%25201.0%2520Component%2520Test%2520Coverage%282%29.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx2rz:",,,,,,Sprint 11 - Quality,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,Sprint 19 - Quality,,,,,,,,,,,,,,,,,,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Mar/17 3:49 AM;bmos299;The work is being traced through the google doc at:
https://docs.google.com/spreadsheets/d/1_IdXCuYMKkqXr3Za0pVnFP3sP1jBcNbYnTJGV-nSkxI/edit#gid=970252523;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Scope rich queries to calling chaincode context (query wrapper),FAB-2189,14746,14627,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,11/Feb/17 8:00 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 9:36 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Need to inject chaincodeid filter on rich queries called from chaincode.
This change will add changes to the query wrapper to inject the chaincode id.",,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkqv:",,,,,,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Scope rich queries to calling chaincode context (unit tests),FAB-2190,14747,14627,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,11/Feb/17 8:02 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,15/Feb/17 12:08 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Need to inject chaincodeid filter on rich queries called from chaincode.
This change will add unit tests for injecting the chaincodeid.

",,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkr3:",,,,,,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error endorsing chaincode: rpc error: code = 2 desc = open /var/hyperledger/production/chaincodes/mycctest.1: no such file or directory,FAB-2191,14748,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,david_dornseifer,david_dornseifer,11/Feb/17 8:57 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 6:59 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,Endorser,,,,,,"Running a chaincode instantiate on the latests fabric-peer images available (yeasy)

peer chaincode instantiate  -n mycctest -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v '1' -c '{""Function"":""init"", ""Args"": [""a"",""100"", ""b"", ""200""]}'
2017-02-10 23:00:19.364 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-10 23:00:19.366 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-10 23:00:19.366 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-10 23:00:19.529 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default escc
2017-02-10 23:00:19.529 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 005 Using default vscc
2017-02-10 23:00:19.530 UTC [msp] Sign -> DEBU 006 Sign: plaintext: 0A87080A3F0803220B74657374636861...41554C540A04657363630A0476736363
2017-02-10 23:00:19.530 UTC [msp] Sign -> DEBU 007 Sign: digest: 2B89B22C1101181A16765825BBB8184CFE037BD1BDBAD242F91D0527220871A1
Error: Error endorsing chaincode: rpc error: code = 2 desc = open /var/hyperledger/production/chaincodes/mycctest.1: no such file or directory",,david_dornseifer,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6fj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,david_dornseifer,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 6:59 AM;denyeart;I believe this is fixed.  If you still see the issue please re-open.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update core/ledger/ReadWriteSet.md,FAB-2192,14749,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,manish-sethi,manish-sethi,11/Feb/17 9:04 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,02/Apr/17 10:17 PM,,,,,v1.0.0,,,,,,,0,Ledger,,,,,,,The doc `core/ledger/ReadWriteSet.md` is out of sync with the code and needs to be updated to reflect the current transaction behavior implemented by ledger.,,gregnotso,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkrb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,gregnotso,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/17 11:04 PM;gregnotso;what is the current behavior vs prior behavior?

thx, gm;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update fabric/sdk-node verify and merge CI jobs in Jenkins,FAB-2193,14750,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,12/Feb/17 1:06 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 3:29 AM,,,,,,,,,,,,0,,,,,,,,"{panel:title=Update Fabric/sdk-node Verify and Merge CI Jobs}
Jim requested to update fabric/sdk-node verify and merge CI jobs in Jenkins with gulp test-headless command.
{noformat}
fabric-sdk-node-verify-x86_64
fabric-sdk-node-merge-x86_64
{noformat}

{panel}
",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkrj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/17 3:28 AM;rameshthoomu;patch has been submitted and merged: https://gerrit.hyperledger.org/r/#/c/5967/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CI errors from pb.Response unmarshal errors,FAB-2194,14751,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,muralisr,muralisr,muralisr,12/Feb/17 2:27 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Feb/17 9:13 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"CI shows errors in different places with the same signature

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6699/console
{code:java}
14:34:31  [33munit-tests_1  |[0m removing dir = /tmp/hyperledger/test/tmpdb/ledgersData
14:34:31  [33munit-tests_1  |[0m --- FAIL: TestChaincodeQueryChaincodeUsingInvoke (6.93s)
14:34:31  [33munit-tests_1  |[0m 	exectransaction_test.go:1062: Error initializing chaincode example02(Error deploying chaincode: Failed to unmarshal response for (09205c0c-7b7a-4a66-8a0a-a155481cc377): proto: can't skip unknown wire type 6 for peer.Response)
{code}

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6682/console
{code:java}
13:22:29 [33munit-tests_1  |[0m [31m2017-02-11 13:19:43.382 UTC [chaincode] ExecuteWithErrorFilter -> ERRO 04b[0m ExecuteWithErrorFilter esender error: Failed to unmarshal response for (5985ebea-b283-49d8-aa5a-02bca4fd432e): proto: can't skip unknown wire type 6 for peer.Response
{code}

These are likely due to unmarshalling pb.Response when the ChaincodeMessage does not container pb.Response payload. This can happen when the message contains erros not stemming from chaincode itself (for example, timeout errors).

This has been there for a while but likely got exposed when recent proto work rearranged things a bit.",,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkrr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Feb/17 4:55 AM;mastersingh24;
{code:java}
2017-02-11 16:23:49.134 UTC [chaincode] ExecuteWithErrorFilter -> ERRO 01a ExecuteWithErrorFilter cscc error: Failed to unmarshal response for (4e516518-f434-43db-a5e6-952e92e38c57): proto: peer.Response: wiretype end group for non-group
{code}
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
infinite loop call ,FAB-2195,14752,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,muralisr,muralisr,12/Feb/17 4:20 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/May/17 10:39 PM,v1.0.0-alpha1,,,,,,,fabric-peer,,,,0,,,,,,,,"Ran into this when trying end - to - end test


{code:java}
runtime: goroutine stack exceeds 1000000000-byte limit
fatal error: stack overflow

runtime stack:
runtime.throw(0xbc4f0e, 0xe)
	/opt/go/src/runtime/panic.go:566 +0x95
runtime.newstack()
	/opt/go/src/runtime/stack.go:1061 +0x416
runtime.morestack()
	/opt/go/src/runtime/asm_amd64.s:366 +0x7f

goroutine 227 [running]:
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:78 fp=0xc44158e2a0 sp=0xc44158e298
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e2f0 sp=0xc44158e2a0
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e340 sp=0xc44158e2f0
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e390 sp=0xc44158e340
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc4213fd680, 0xc4214b5800, 0x3a6, 0x3a6, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/handlers/msp/config.go:79 +0x49 fp=0xc44158e3e0 sp=0xc44158e390
{code}

The DeserializeIdentity on MSPConfigHandler calls itself. It should just be removed (or should provide an alternative implementation to the inherited msp.MSPManager's method).

[~jyellick] think this might be yours ?",,jyellick,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkrz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Feb/17 4:45 AM;jyellick;Yes, this slide in during a refactor, thanks for catching it!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve efficiency of subset function,FAB-2196,14753,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,12/Feb/17 11:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxks7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Factor out configtx config map creation,FAB-2197,14754,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,12/Feb/17 2:20 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 7:58 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxksf:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Gossip message signing with envelopes,FAB-2198,14755,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,12/Feb/17 7:55 PM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,01/Mar/17 12:56 AM,,,,,,,,fabric-gossip,,,,0,,,,,,,,"In gossip, every message sent is a GossipMessage.
The gossipMessage contains an inner message and a signature:
{code}
message GossipMessage {
bytes signature = ....
oneof content {
          AliveMessage aliveMsg = ...;
        MembershipRequest memReq = ...
        MembershipResponse memRes = ...
....
}
{code}

The signing and verification is done in the following way:
Signing:
# Signature is nullified
# proto.Marshall is called
# the output bytes are hashed
# the hash is signed by the peer
# the signature is put into the signature field
# the message is sent

Verification:
# The signature is saved aside
# the signature field is nullified
# proto.Marshall is called on the message
# the bytes are hashed
# the signature is verified

This is a problem because protobuf's proto.Marshall doesn't guarantee equal output between different invocations on different hosts.

So the message that is sent over the wire needs to be an envelope message
that will contain the bytes of the actual message, and the signature on the message.

",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-290,,,,,,,,,"1|hzx63j:",,,,Unset,,Sprint 12 - Gossip,Sprint 13 - Gossip,,,,,,,,,,,,Unset,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace peer GRPC server,FAB-2199,14756,14183,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,12/Feb/17 9:52 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Mar/17 10:59 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,Modify peer to use the common GRPC server ,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxksn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/17 4:38 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/5917/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove hardcoding of local MSP id in peer as soon as GOSSIP GETS the MSP ID from the genesis block,FAB-2200,14757,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,12/Feb/17 10:02 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Apr/17 3:18 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,,,ales,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxksv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ales,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/17 2:08 AM;elli-androulaki;Hi, isn't this done?;;;","09/Apr/17 8:12 PM;yacovm;[~ales] [~ellaki] This is done, right? ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate new config from udpated config map,FAB-2201,14758,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,13/Feb/17 1:54 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 7:59 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"The configtx code currently shortcuts by assuming that the writeset contains exactly the entire config.  In order to support partial updates, this writeset should be overlayed on top of the existing config, then transformed back into a new config.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkt3:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Initialize configtx manager from Config, not Writeset",FAB-2202,14759,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,13/Feb/17 3:34 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:03 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"As a transitional mechanism, the config currently depends on the WriteSet containing the entire configuration.  Instead, the config as written in the config envelope needs to be utilized.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxktb:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode FSM errors ,FAB-2203,14760,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,muralisr,muralisr,muralisr,13/Feb/17 4:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 1:49 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6810/console

17:57:51 [33munit-tests_1  |[0m [31m2017-02-12 17:57:47.205 UTC [chaincode] processStream -> ERRO 00d[0m Got error: [2ab427df-69ab-4c96-99b5-aaa14374f864]Chaincode handler FSM cannot handle message (INIT) with payload size (22) while in state: established
17:57:51 [33munit-tests_1  |[0m --- FAIL: TestDeployAndUpgrade (23.38s)
17:57:51 [33munit-tests_1  |[0m 	endorser_test.go:381: Error deploying <upgradeex01>: Transaction returned with failure: [2ab427df-69ab-4c96-99b5-aaa14374f864]Chaincode handler FSM cannot handle message (INIT) with payload size (22) while in state: established
17:57:51 [33munit-tests_1  |[0m FAIL

Thanks to [~yacovm] for pointing out this is different from ""timeout"" errors.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxktj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
re-create file ledger with blkstorage as a backing store,FAB-2204,14761,13711,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,13/Feb/17 1:38 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Mar/17 5:40 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxktr:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate gossip/comm with core.yaml,FAB-2205,14762,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,grapebaba,yacovm,yacovm,13/Feb/17 5:50 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 6:23 PM,,,,,,,,,,,,0,help-wanted,,,,,,,"The following attributes should be configured also with core.yaml.
The logic should be: if the peer/core.yaml attributes are set- they are used.
Else- the defaults in the attached picture are used.
https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L43-L46

Also- the timeout attributes need to be in ""time.Duration"" units.


",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Feb/17 5:49 PM;yacovm;Capture.PNG;https://jira.hyperledger.org/secure/attachment/10505/Capture.PNG",,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxktz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integreate gossip/discovery with peer/core.yaml,FAB-2206,14763,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,grapebaba,yacovm,yacovm,13/Feb/17 5:55 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,15/Mar/17 12:52 PM,,,,,,,,,,,,0,help-wanted,,,,,,,"The following attributes should be able to be configured with peer/core.yaml
https://github.com/hyperledger/fabric/blob/master/gossip/discovery/discovery_impl.go#L32-L37

I suggest that the aliveTimeInterval and aliveExpirationTimeout and reconnectInterval  will be configured,
and the aliveExpirationCheckInterval will not be configured because it can always be simply derived from the aliveExpirationTimeout. 

The default values of the peer/core.yaml should be the values currently in the code.

",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxku7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate gossip/gossip/algo/pull with peer/core.yaml,FAB-2207,14764,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,oldsharp,yacovm,yacovm,13/Feb/17 5:58 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,09/Apr/17 7:32 PM,,,,,,,,,,,,0,help-wanted,,,,,,,"The gossip algo/pull module handles pull-type message dissemination.
https://github.com/hyperledger/fabric/blob/master/gossip/gossip/algo/pull.go#L50-L52
Currently, the wait time of the phases is constant, and needs to be configurable with peer/core.yaml

The defaults need to be the values currently in the code.",,oldsharp,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxkuf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,oldsharp,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Feb/17 6:38 PM;oldsharp;I think it's very similar to the integration process of 'peer.gossip.pullInterval', right?  I'm happy to take this and submit a CR.;;;","13/Feb/17 6:42 PM;yacovm;You mean https://jira.hyperledger.org/browse/FAB-1879 ? If yes - then yeah it's very similar. 
Pick up the gauntlet (assign yourself to the JIRA item) and its yours.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I want to add metadata in each signature to immediately recognize the means for verifying it.,FAB-2208,14765,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,elli-androulaki,elli-androulaki,13/Feb/17 6:38 PM,23/Jan/20 3:50 AM,28/Oct/23 2:58 AM,23/Jan/20 3:50 AM,,,,,Future,,,fabric-crypto,,,,1,Security,stale-item,,,,,,"This relates to including an object identifier (OID) into signature structures as output of the bccsp. This would of course need to be accommodated in software and hsm bccsp version.

Information provided by Tamas Visegrady:

Example structs, with blue highlights for object Ids: signerInfo [so an EC signature, incl. who signed + with which alg]
-------------------------------
  0 204: SEQUENCE {
  3   1:   INTEGER 3
  6  32:   [0]
       :     0B 06 70 18 51 AF DD 31 3A D8 CD 24 C6 EA 18 32       -- SKI [subj key info] of signer
                                                                   --   -> pubkey(SKI) -> ...
       :     A0 24 83 B0 60 B0 8D 59 A5 13 13 B9 B8 C7 CD 2E
 40  11:   SEQUENCE {
 42   9:     OBJECT IDENTIFIER sha-512 (2 16 840 1 101 3 4 2 3)    -- [hash is separately noted]
       :     }
 53  10:   SEQUENCE {
 55   8:     OBJECT IDENTIFIER ecdsaWithSHA512 (1 2 840 10045 4 3 4)
       :     }
 65 139:   OCTET STRING, encapsulates {
 68 136:     SEQUENCE {
 71  66:       INTEGER
       :         00 24 52 19 83 BF 15 21 88 EB 61 E3 E2 54 7A C7   -- R
       :         60 EF 53 E7 3B 75 88 F3 AB 31 37 35 51 DA 31 13
....
139  66:       INTEGER
       :         01 1D F6 96 21 3F FA C3 04 FA 7A 9F 70 F2 0E A8   -- S
       :         CA 46 3D 31 2B 6C 11 A9 69 2D B6 26 75 1B 79 A0
...
       :       }
       :     }
       :   }
-------------------------------
digestInfo:                     -- so just a self-documenting enclosure around a hash
  0  77: SEQUENCE {
  2   9:   OBJECT IDENTIFIER sha-512 (2 16 840 1 101 3 4 2 3)
 13  64:   OCTET STRING
       :     4F 28 5D 0C 0C C7 72 86 D8 73 17 98 B7 AA E2 63
       :     9E 28 27 0D 41 66 F4 0D 76 9C BB DC A5 23 07 14
       :     D8 48 48 3D 36 4E 2F 39 FE 6C B9 08 3C 15 22 9B
       :     39 A3 36 15 EB C6 D5 76 05 F7 C4 3F 69 06 73 9D
       :   }
---------------
00000000: 304d 0609 6086 4801 6503 0402 0304 404f  0M..`.H.e.....@O    --- OID
00000010: 285d 0c0c c772 86d8 7317 98b7 aae2 639e  (]...r..s.....c.
00000020: 2827 0d41 66f4 0d76 9cbb dca5 2307 14d8  ('.Af..v....#...
00000030: 4848 3d36 4e2f 39fe 6cb9 083c 1522 9b39  HH=6N/9.l..<."".9
00000040: a336 15eb c6d5 7605 f7c4 3f69 0673 9d    .6....v...?i.s.
-------------------------------
so these structs are all self-describing.  hw-Miniboot relies on this unambigous decoding to store a hash in the early stages [when it can not yet sign data]; we simply document that in those cases, a digestInfo can be where a signerInfo is expected.

OIDs for digests, incl. digestInfo's:
-----------
319         ""2.16.840.1.101.3.4.2.1         id-sha256               ALGID"",
320         ""2.16.840.1.101.3.4.2.2         id-sha384               ALGID"",
321         ""2.16.840.1.101.3.4.2.3         id-sha512               ALGID"",   -- ex. struct above
322         ""2.16.840.1.101.3.4.2.4         id-sha224               ALGID"",
323         ""2.16.840.1.101.3.4.2.5         id-sha512-224           ALGID"",
324         ""2.16.840.1.101.3.4.2.6         id-sha512-256           ALGID"",
325         ""2.16.840.1.101.3.4.2.7         id-sha3-224             ALGID"",
326         ""2.16.840.1.101.3.4.2.8         id-sha3-256             ALGID"",
327         ""2.16.840.1.101.3.4.2.9         id-sha3-384             ALGID"",
328         ""2.16.840.1.101.3.4.2.10        id-sha3-512             ALGID"",
329         ""2.16.840.1.101.3.4.2.11        id-sha3-shake128        ALGID"",
330         ""2.16.840.1.101.3.4.2.12        id-sha3-shake256        ALGID"",
-----------
this list above should cover any hash function we can think of.",,binhn,elli-androulaki,sykesm,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzwtgc:",,,,Unset,,Sprint 12 - Crypto,Sprint 13 - Crypto,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,elli-androulaki,sykesm,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/17 5:10 AM;binhn;moving to post 1.0;;;","23/Jan/20 3:50 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing behave scenarios/features on ppc64le,FAB-2209,14767,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harsha544,harsha544,harsha544,13/Feb/17 10:52 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,15/Feb/17 4:06 AM,,,,,v1.0.0,,,,,,,0,behave,orderer.feature,,,,,,"Following behave/orderer.features are consistently failing on ppc64le in v1.0 (Master Branch) :-

features/orderer.feature:27  Basic orderer function -- @1.1 Solo Orderer
features/orderer.feature:29  Basic orderer function -- @1.3 Solo Orderer
features/orderer.feature:63  Basic seek orderer function (Utilizing properties for atomic broadcast) -- @1.1 Solo Orderer
features/orderer.feature:65  Basic seek orderer function (Utilizing properties for atomic broadcast) -- @1.3 Solo Orderer
features/orderer.feature:96  Basic orderer function using oldest seek target -- @1.1 Solo Orderer ",,bsmita,harsha544,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkuv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bsmita,harsha544,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Feb/17 12:09 AM;harsha544;The above JIRA Item is addressed by the changeset :- http://gerrit.hyperledger.org/r/5949 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename CONFIGURATION_ to  CONFIG_,FAB-2210,14768,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,13/Feb/17 11:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:03 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"This brings the enums into line, using the word config everywhere instead of a mix of config and configuration.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkv3:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ccenv/goshim build is overzealous in files selected for inclusion,FAB-2211,14769,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,greg.haskins,greg.haskins,14/Feb/17 12:20 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,28/Feb/17 11:17 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The current build uses a combination of ""go list .Deps"" and ""find"" to build a list of files to include in the ccenv container.  This means that files like core/chaincode/shim/java/*.class might be included since core/chaincode/shim is subordinate to the chaincode shim.  Aside from being suboptimal/confusing, this may sometimes lead to problems compiling.  This should be cleaned up.",,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkvb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Feb/17 12:27 AM;greg.haskins;Fix submitted: https://gerrit.hyperledger.org/r/#/c/5953/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OTE Orderer Traffic Engine enhancements,FAB-2212,14770,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,14/Feb/17 12:44 AM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"Add features to the OTE, in fabric/bddtests/regression/go/ote/, for additional testing capabilities. Some ideas are:
# Verify the contents of last block that is received by the consumers on each channel
# Allow test code to select which orderer to spy on
# Allow option to defer creating and attaching masterSpy until later in the test, and a function to trigger it
# Options for changing the size of the broadcast timestamp payload, fixed or dynamic
# Add function for creating multiple producers per chnl per orderer
# Capability to run traffic for a duration, instead of specifying number of TXs to complete
# Authentication of certs of Producer TXs and Consumers invoking deliver()
# Use different chaincodes to send transactions to orderer from producer (api) - this would be a big change
# change Panics to return failure values, so CI can complete all go tests",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3517,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx2wn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,true,"28/Apr/17 1:59 AM;scottz;I have implemented some of these already (2, 3, part of 4, part of 7) in private commits. They touch many function interfaces and there is significant code refactoring.

Current plan (as of May 2017):
 * finish 7 (see subtask FAB-3501)
 * if necessary and if possible: figure out how to break up all the changes into understandable pieces so we can submit a few smaller patch-requests.
 * postpone 1 (but still should do this enhancement)
 * postpone 9 (but still must do it)
 * postpone 4 until needed (the code functionality is mostly done; we just need to add API for user to exercise it)
 * abandon 5
 * abandon 8
 * abandon 6 (this requires a rewrite, and is not simple to do while keeping current design and functionalities);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Embed full CONFIG_UPDATE tx in CONFIG result,FAB-2213,14771,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,14/Feb/17 1:31 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:03 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkvj:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"1st block in chain is block 0, not 1",FAB-2214,14772,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,sanchezl,sanchezl,14/Feb/17 1:56 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,01/Mar/17 3:39 AM,,,,,,,,fabric-ledger,,,,0,common-components,ledger,,,,,,"# Initialize the fsblkstorage provider.
# Get ledger and add blocks.
# Close the provider.
# Re-initialize the fsblkstorage provider.
# Get the previously created ledger.
# ERROR: GetBlockchainInfo().Height is one less than it should be.",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1304,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkvr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disable fabric-verify-power-ppc64le and fabric-merge-power-ppc64le jobs in CI,FAB-2215,14773,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,14/Feb/17 3:41 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Feb/17 4:56 AM,,,,,,,,,,,,0,,,,,,,,"Disable fabric-verify-power-ppc64le and fabric-merge-power-ppc64le jobs in CI till FAB-1784 is fixed.
https://jira.hyperledger.org/browse/FAB-1784.

We have only 5 power nodes in CI, because of 1784 issue, builds are getting stuck in Queue and causing other project builds. Once the FAB-1784 is fixed, will re-enable them in CI.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkvz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Feb/17 12:07 AM;rameshthoomu;Fix had been provided here: https://gerrit.hyperledger.org/r/#/c/6025.. Requested Ry Jones to add power node to sandbox environment. Once done will test this patch in sandbox and enable power jobs in community CI.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make peer error at Ubuntu 16.04,FAB-2218,14776,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,jsong1230,jsong1230,14/Feb/17 8:03 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Apr/17 6:02 AM,,,,,v0.6,,,fabric-build,,,,0,,,,,,,,"I am trying to install Fabric peer v0.6 at 4 Ubuntu 16.04 machines to build a network.
But the following errors always come.
However, I can move to the directory peer and do ""go build""
What can I try more?

##### errors
build/bin/peer
CGO_CFLAGS="" "" CGO_LDFLAGS=""-lrocksdb -lstdc++ -lm -lz -lbz2 -lsnappy"" GOBIN=/opt/gopath/src/github.com/hyperledger/fabric/build/bin go install -ldflags ""-X github.com/hyperledger/fabric/metadata.Version=0.6.2-preview-snapshot-e29f1b6"" github.com/hyperledger/fabric/peer
can't load package: package github.com/hyperledger/fabric/peer: cannot find package ""github.com/hyperledger/fabric/peer"" in any of:
	/usr/lib/go-1.6/src/github.com/hyperledger/fabric/peer (from $GOROOT)
	($GOPATH not set)
Makefile:176: recipe for target 'build/bin/peer' failed
make: *** [build/bin/peer] Error 1",,baohua,jsong1230,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkwn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,jsong1230,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/17 6:17 PM;baohua;Hi, song
From the error msg, seems u do not setup a GOPATH variable.

Pls read the official golang setup documentation, and setup those variable correctly.

https://golang.org/doc/install

Thanks!

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use configuration file for default peer set up,FAB-2219,14777,13120,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,binhn,binhn,14/Feb/17 8:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,08/Apr/17 12:05 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,The current code in start.go and create.go hardcode config from test.  We need to change this to use a config file like common/configtx/tool/genesis.yaml that contains appropriate bootstrap config.,,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkwv:",,,,,,Sprint 4 - Endorser,Sprint 5 - Consensus,Sprint 7 - Endorser,Sprint 8 - Endorser,Sprint 9 - Endorser,Sprint 10 - Endorser,Sprint 11 - Endorser,Sprint 12 - Endorser,Sprint 13 - Endorser,Sprint 14 - Endorser,Sprint 15 - Endorser,,,,,,,,,,,,,,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/17 12:05 AM;muralisr;We have removed hard coded configuration. Default configs driven by core.yaml and orderer's ""testchainid"" remain for dev/test and purposes. Closing this as done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LCCC chaincode record calls should not test for chaincode existence on file system,FAB-2220,14778,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,14/Feb/17 8:46 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,08/Apr/17 12:17 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"LCCC exposes the following ""GET"" api. 
* getid - gets the name given name (basically ""exists"")
* getccdata - gets the record entry for the chaincode given name
* getdepspec - gets the deployment spec for the chaincode given name

Of these only the later needs the chaincode to be available on the peer. Other APIs should not look for the existence of the chaincode.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-37,,,,,,,,,"1|hzx55j:",,,,,,Sprint 11 - Endorser,Sprint 12 - Endorser,Sprint 13 - Endorser,Sprint 14 - Endorser,Sprint 15 - Endorser,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Discovery is not working (PBFT: DISC_HELLO/ DISC_GET_PEERS),FAB-2221,14779,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,baohua,jsong1230,jsong1230,14/Feb/17 10:20 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Apr/17 8:48 PM,,,,,v0.6,WON'T FIX,,fabric-orderer,,,,0,,,,,,,,"I got the following errors.
I have modified core.yaml file for each peer, but not working.
Can I get a sample core.yaml file for peer connection?
Is there any other file to modify to connect peers using PBFT?
Thanks.

### Error
10:15:00.829 [peer] handleChat -> ERRO 042 Error handling message: Peer FSM failed while handling message (DISC_HELLO): current state: created, error: transition canceled with error: Error registering Handler: Duplicate Handler error: {name:""hf02""  172.31.11.114:7051 VALIDATOR }
10:15:02.115 [peer] handleChat -> ERRO 043 Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created
###

### core.yaml (changed part)
{color:red}    id: hf01{color}

    # The privateKey to be used by this peer
    # privateKey: 794ef087680e2494fa4918fd8fb80fb284b50b57d321a31423fe42b9ccf6216047cea0b66fe8365a8e3f2a8140c6866cc45852e63124668bee1daa9c97da0c2a

    # The networkId allows for logical seperation of networks
    # networkId: dev
    # networkId: test
{color:red}    networkId: {mynetwork}{color}

    # The Address this Peer will listen on
    listenAddress: 0.0.0.0:7051
    # The Address this Peer will bind to for providing services
    address: 0.0.0.0:7051
    # Whether the Peer should programmatically determine the address to bind to.
    # This case is useful for docker containers.
 {color:red}   addressAutoDetect: true{color}



    consensus:
    # Consensus plugin to use. The value is the name of the plugin, e.g. pbft, noops ( this value is case-insensitive)
    # if the given value is not recognized, we will default to noops
{color:red}    plugin: pbft{color}


    # PKI member services properties
    pki:
{color:red}        eca:
            paddr: {myip}:7054
        tca:
            paddr: {myip}:7054
        tlsca:
            paddr: {myip}:7054{color}


    discovery:

        # The root nodes are used for bootstrapping purposes, and generally
        # supplied through ENV variables
        # It can be either a single host or a comma separated list of hosts.
{color:red}        rootnode: {myip}:7051{color}",,binhn,ChristopherFerris,jsong1230,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkx3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,jsong1230,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Feb/17 10:20 AM;jsong1230;could you help?;;;","23/Feb/17 11:39 AM;ynamiki;Try with vp0, vp1, ... for peer.id in core.yaml.

bq. For MVP, set the VP's peer.id to vpX, where X is a unique integer between 0 and N-1 (N being the maximum number of VPs in the network

https://gerrit.hyperledger.org/r/gitweb?p=fabric.git;a=blob;f=consensus/pbft/pbft.go;h=d0d30432b342e1a9a99b1718e64ce852258be9ae;hb=e728c5c22160620e189e85be6becb7cbf75d87dc#l92;;;","08/Apr/17 5:54 AM;binhn;Please move to v1.0.0-alpha if the issue has not been resolved. I suggest we close this item;;;","14/Apr/17 8:50 PM;ChristopherFerris;[~jsong1230] closing this because v0.6 is deprecated. Please do try v1.0.0-alpha release, and if you are still having questions about v0.6 you can inquire on rocket chat (https://chat.hyperledger.org/).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Compute config from CONFIG_UPDATE or from CONFIG,FAB-2222,14780,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,14/Feb/17 11:19 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:21 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkxb:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose ledger API GetHistoryForKey() to chaincode,FAB-2223,14781,13911,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,denyeart,denyeart,14/Feb/17 11:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,23/Feb/17 12:22 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Expose ledger API GetHistoryForKey() to chaincode,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkxj:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create organization config handler,FAB-2225,14783,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,14/Feb/17 12:46 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:04 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkxz:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move anchor peers to app org level,FAB-2226,14784,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,14/Feb/17 3:04 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxky7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Encode version uniformly in CouchDB for both JSON and Binary data,FAB-2228,14788,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,balaji.viswanathan,balaji.viswanathan,balaji.viswanathan,14/Feb/17 4:37 PM,23/Jan/20 3:51 AM,28/Oct/23 2:58 AM,23/Jan/20 3:51 AM,,,,,,,,,,,,0,stale-item,,,,,,,"Currently, version in stored in header for JSON data and encoded into the attachment (first few bytes) for binary data. With Data Wrapper approach, the header is distinct from JSON data or attachments and can be used to store version",,balaji.viswanathan,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxkz3:",,,,Unset,,Sprint 11 - Ledger,,,,,,,,,,,,,Unset,,,,,,,,,,,balaji.viswanathan,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/20 3:51 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Scratchpad-v1,FAB-2229,14789,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,elli-androulaki,elli-androulaki,15/Feb/17 12:05 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,12/Apr/18 10:16 PM,,,,,v1.1.0,,,fabric-crypto,,,,0,,,,,,,,"TODO list (time-permitting for v1):
 - Have OUs be represented by an enhanced data structure including OU name and the PKs that appear in the certificate's path to the root CA
 - Have OUs be included as (optional) part of default MSP configuration; in which case we can define an MSP to the level of OU
 - Enhance policy language to accommodate OU-based policies
 - IdentityChannel
 - Have options in the SatisfiesPrincipal to pass in the signer, signature, and message.
 - Include in genesis the type of hash used for txid and bindings.
 - Add OIDs to bccsp generated signatures
 - separate clients from peers and orderers using identity roles",,ChristopherFerris,elli-androulaki,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6fz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,elli-androulaki,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:44 AM;ChristopherFerris;Marked as v1.0.0 but if low priority, might be better if we simply deferred to v1.1;;;","12/Apr/18 10:16 PM;mastersingh24;The stuff we wanted from the list was completed in v1.1;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BCCSP KeyGen method should return CSR also.,FAB-2230,14790,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,elli-androulaki,ashutosh_kumar,ashutosh_kumar,15/Feb/17 12:18 AM,27/Jul/19 9:24 PM,28/Oct/23 2:58 AM,27/Jul/19 9:24 PM,,,,,Future,,,fabric-crypto,,,,0,security,,,,,,,bccsp.KeyGen() returns bccsp.Key which does not have field for CSR. There is a use case where user wants to create CSR request and send it to CA for signing purposes. BCCSP should be able to support this use case.,,ashutosh_kumar,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkzb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/17 12:20 AM;ashutosh_kumar;[~ellaki] , please have this task analyzed and assign some resource on this task.;;;","27/Jul/19 9:24 PM;mastersingh24;We actually have the ability to get the CSR now;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
readthedocs build failing consistently while building documentation from readthedocs,FAB-2231,14791,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rameshthoomu,rameshthoomu,rameshthoomu,15/Feb/17 1:25 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,16/Feb/17 12:05 AM,,,,,v1.0.0,,,,,,,0,build-system,,,,,,,"observed below error while building documentation using readthedocs. I see no new changes added to documentation but could see build is failing when RTD is trying to install/update python packages. 

Similar issue observed in Readthedocs github account. Please refer this link here.. 
https://github.com/rtfd/readthedocs.org/issues/2640

Error Log:

{panel:title=Readthedocs build error log}

File ""/usr/lib/python2.7/runpy.py"", line 162, in _run_module_as_main
    ""__main__"", fname, loader, pkg_name)
  File ""/usr/lib/python2.7/runpy.py"", line 72, in _run_code
    exec code in run_globals
  File ""/usr/local/lib/python2.7/dist-packages/virtualenv.py"", line 2328, in <module>
    main()
  File ""/usr/local/lib/python2.7/dist-packages/virtualenv.py"", line 713, in main
    symlink=options.symlink)
  File ""/usr/local/lib/python2.7/dist-packages/virtualenv.py"", line 925, in create_environment
    site_packages=site_packages, clear=clear, symlink=symlink))
  File ""/usr/local/lib/python2.7/dist-packages/virtualenv.py"", line 1231, in install_python
    shutil.copyfile(executable, py_executable)
  File ""/usr/lib/python2.7/shutil.py"", line 83, in copyfile
    with open(dst, 'wb') as fdst:
IOError: [Errno 40] Too many levels of symbolic links: '/home/docs/checkouts/readthedocs.org/
{panel}

This is blocking our documentation build process. Could you please check this let us know the workaround steps or please provide the fix ASAP. 

",Readthedocs,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkzj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Feb/17 12:05 AM;rameshthoomu;issue is partially fixed here https://github.com/rtfd/readthedocs.org/issues/2640.. Had followup with RTD team and removed virtual env for hyperledger/fabric documentation project. so for now it's working as expected. Closing this issue now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename test config MSP to DEFAULT,FAB-2232,14792,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,15/Feb/17 2:14 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,19/Feb/17 6:21 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxkzr:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add new queries to system chaincodes ,FAB-2234,14794,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,15/Feb/17 3:54 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,07/Mar/17 4:20 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"We need to add queries to system chaincode to:
1. list the installed chaincodes on a peer (LCCC)
2. list the instantiated chaincodes on a channel (LCCC)
3. list all the channels for a given peer (CSCC)",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxkzz:",,,,Unset,,Sprint 12 - Endorser,,,,,,,,,,,,,Unset,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add query to get the installed chaincodes on a peer,FAB-2235,14795,14794,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,15/Feb/17 3:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 11:49 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"This query should provide the names of all the chaincodes installed on a peer and include all of the information (aka arguments passed to ""peer chaincode instantiate"") necessary to then instantiate that chaincode.

The query can be called from CLI as follows:
{code:java}
peer chaincode invoke -C testchainid -n lscc -c '{""Args"":[""getinstalledchaincodes""]}'
{code}
The query will return a ChaincodeQueryResponse proto with the following definition:
{code:java}
// ChaincodeQueryResponse returns information about each chaincode that pertains
// to a query in lccc.go, such as GetChaincodes (returns all chaincodes
// instantiated on a channel), and GetInstalledChaincodes (returns all chaincodes
// installed on a peer)
message ChaincodeQueryResponse {
  repeated ChaincodeInfo chaincodes = 1;
}

// ChaincodeInfo contains general information about an installed/instantiated
// chaincode
message ChaincodeInfo {
  string name = 1;
  string version = 2;
  // the path as specified by the install/instantiate transaction
  string path = 3;
  // the chaincode function upon instantiation and its arguments. This will be
  // blank if the query is returning information about installed chaincodes.
  string input = 4;
  // the name of the ESCC for this chaincode. This will be
  // blank if the query is returning information about installed chaincodes.
  string escc = 5;
  // the name of the VSCC for this chaincode. This will be
  // blank if the query is returning information about installed chaincodes.
  string vscc = 6;
}
{code}
Once this is done, this will need to be exposed on the SDK.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-803,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl07:",,,,,,Sprint 12 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add query to get the instantiated chaincodes on a channel,FAB-2236,14796,14794,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,15/Feb/17 3:59 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 10:06 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"From the CLI, this query can be accessed via: 

{code}
peer chaincode invoke -C testchainid -n lccc -c '{""Args"":[""getchaincodes""]}'
{code}

The output will be ChaincodeQueryResponse proto with the following definition: 

{code}
// ChaincodeQueryResponse returns information about each chaincode that pertains
// to a query in lccc.go, such as GetChaincodes (returns all chaincodes
// instantiated on a channel), and GetInstalledChaincodes (returns all chaincodes
// installed on a peer)
message ChaincodeQueryResponse {
  repeated ChaincodeInfo chaincodes = 1;
}

// ChaincodeInfo contains general information about an installed/instantiated
// chaincode
message ChaincodeInfo {
  string name = 1;
  string version = 2;
  // the path as specified by the install/instantiate transaction
  string path = 3;
  // the chaincode function upon instantiation and its arguments. This will be
  // blank if the query is returning information about installed chaincodes.
  string input = 4;
  // the name of the ESCC for this chaincode. This will be
  // blank if the query is returning information about installed chaincodes.
  string escc = 5;
  // the name of the VSCC for this chaincode. This will be
  // blank if the query is returning information about installed chaincodes.
  string vscc = 6;
}
{code}

Once this is done, this will need to be exposed on the SDK. ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-804,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl0f:",,,,,,Sprint 12 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add query to get all the channels for a given peer,FAB-2237,14797,14794,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,15/Feb/17 3:59 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 11:49 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"This query should provide the names of all the channels a given peer has joined.

The query can be called from CLI as follows: 

{code}
peer chaincode invoke -C testchainid -n cscc -c '{""Args"":[""GetChannels""]}'
{code}

The query will return a ChannelQueryResponse proto with the following definition:
{code}
// ChannelQueryResponse returns information about each channel that pertains
// to a query in lccc.go, such as GetChannels (returns all channels for a
// given peer)
message ChannelQueryResponse {
  repeated ChannelInfo channels = 1;
}

// ChannelInfo contains general information about channels
message ChannelInfo {
  string channel_id = 1;
}
{code}

Once this is done, this will need to be exposed on the SDK. ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-805,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl0n:",,,,,,Sprint 12 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move policy off of Handler to new PolicyHandler,FAB-2238,14798,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,15/Feb/17 4:02 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl0v:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix orderer docker image not finding msp,FAB-2239,14799,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,15/Feb/17 4:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,16/Feb/17 10:31 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl13:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Construction of the chaincode identifier in the new deployment model,FAB-2241,14801,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,elli-androulaki,elli-androulaki,15/Feb/17 5:45 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,13/Apr/17 4:52 PM,,,,,DUPLICATE,,,fabric-peer,,,,0,,,,,,,,"*Background*:

For regulatory reasons installation of software needs to be accompanied by a list of chaincode signers/owners/guarantors, and their signature on the chaincode code (hash). For simplicity we will refer to the latter by the chaincode's ""owners"", and assume that each of these owners can be expressed by means of serialized certificates (""SerializedIdentity"").

In the new deployment model chaincodes acquire an identifier at installation time that is essential to be unique across all chaincodes of a specific blockchain network. This is because, chaincode identifiers are henceforth used in subsequent chaincode instantiation requests (invocations of LCCC) to reference installed chaincodes that are to be instantiated on a given chain. 

In the new deployment model, for instantiation requests for a specific chaincode to be successful, the instantiator (i.e., client requesting the chaincode instantiation using chain's LCCC) needs to be among the LCCC admin list. In addition, the instantiator needs to be one of the owners of the chaincode to be instantiated. 

*Problem*: 

At the lccc (chaincode instantiation) transaction validation time:
 - all peers that have joined the chain are aware of the LCCC admin policy and can run the instantiator data against that policy
 - a subset of peers that have joined the chain are aware of the owners of the chaincode to be instantiated, and therefore only those can check if the instantiator is among them. 

*Suggested Solution*:

Here we suggest a way of constructing the chaincode identifier such that:
 - chaincode identifier is unique per chaincode within a blockchain network installation
 - chaincode identifier can be derived by the chaincode content and metadata
 - the previous issue is tackled 

In the following we assume a chaincode whose source code is represented by CC and its list of owners by OwnCC (denoted as a list of SerializedIdentities). We also assume a collision resistant hash function H. For this chaincode we pick identifier IDcc as follows:
  IDcc = { H(CC) || H(OwnCC) }, where ""||"" denotes concatenation.

At chaincode instantiation time, LCCC would require as parameters: 
 - IDcc
 - OwnCC (to this one there is an optimization if the list is too long)
 - Signatures on IDcc from entities in OwnCC (more info to be added here by [~muralisr] )
Now let that the creator of instantiation proposal / transaction is SerializedIdentity Cr.

At endorsement time (LCCC invocation), an endorser (within LCCC logic) would need to do the following:
 1. Check that H(OwnCC) = LSHalfOf(IDcc), where LastHalfOf(m) returns the least significant half of m.
 2. Deserialize OwnCC to a list of identities 
 3. Check that Cr is included in deserialized OwnCC
 4. Check that Cr is part of LCCC admin policy (provided in the chain's genesis block)
 5. Check the signature of tx/proposal matching the key in Cr
 6. If the checks above succeed, proceed with the processing of instatiation request; otherwise reject.

At validation time (LCCC_VSCC) committing peers would need to do the following:
 1. Check that H(OwnCC) = LSHalfOf(IDcc), where LastHalfOf(m) returns the least significant half of m.
 2. Deserialize OwnCC to a list of identities 
 3. Check that Cr is included in deserialized OwnCC
 4. Check that Cr is part of LCCC admin policy (provided in the chain's genesis block)
 5. Check the signature of tx/proposal matching the key in Cr
 6. (optionally check the simulation result)
 7. If the checks above succeed, apply the simulation results to the locally stored ledger, otherwise reject. 
     This means that peers will look locally if they have installed a chaincode with id IDcc and prepare it for instantiation accordingly. If 
     they don't they simply apply simulation results to the ledger referring to the instantiation of a chaincode with identifier IDcc.

What do we achieve?
 - At the validation of instantiation transaction it is guaranteed that all the peers have the same picture of whether the instantiation should proceed or not.
 - Even if a malicious chain admin tries to bypass OwnCC by creating an alternate ownership list OwnCC' for CC, (e.g., where it's certificate is included), this would result into a different chaincode identifier IDcc' = {H(CC), H(OwnCC')}, that the peers who have actually installed the chaincode will treat it as a chaincode someone else owns/has installed. 

*Additional remarks/extensions*:
 - We need someway of providing Cr, and serialized identities in OwnCC to be serialized in deterministic way.
 - If there are many owners on can build a merkel tree of these and only pass at instantiation time the sibling path of the creator CR's certificate to the root. 
",,angelo.decaro,elli-androulaki,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2143,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxl1b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,angelo.decaro,elli-androulaki,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Feb/17 12:05 AM;angelo.decaro;Isn't it an issue that IDCC does not uniquely identity the pair (CC, OwnCC)?
Where is H(CC) actually used?;;;","13/Apr/17 4:21 PM;muralisr;@elli this is a dup of the contents in https://jira.hyperledger.org/browse/FAB-2859 no ? Close this ?;;;","13/Apr/17 4:52 PM;elli-androulaki;Yes, indeed. Done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
panic: Failed to create Kafka producer - when create non-default channelIDs on kafka orderer,FAB-2242,14802,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,kchristidis,scottz,scottz,15/Feb/17 9:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,27/May/17 5:00 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-orderer,,,,0,qa,quality,,,,,,"Using commit ad986bbf000ff34ebeb8e142cfcd747a01f12617
Date:   Tue Feb 14 18:57:03 2017 +0000
plus some local test tool changes for test tool development (but no changes to fabric code),

Test passes running ""ote"" tool, using:
* solo orderer with 1 channel, default testchainid, and when
* solo orderer with 1 or 2 channels, test-chan.00001, test-chan.00002,
* 1 kafka orderer with 3 kafka brokers and one channel with default channelID.

fabric/bddtests/regression/go/ote$ OTE_CHANNELS=1 CONFIGTX_ORDERER_ORDERERTYPE=kafka OTE_KAFKABROKERS=3  ./ote

Test FAILS when using 1 kafka orderer and 3 kafka-brokers with
one or more non-default channelID, test-chan.00000.

Point of failure is when running the equivalent of this on the command line:
peer channel create -c test-chan.00000

Observe in orderer0 logs the panic on kafka orderer: 

$ docker logs orderer0
2017-02-14 23:48:39.611 UTC [viperutil] EnhancedExactUnmarshal -> INFO 001 map[genesis:map[DeprecatedBatchTimeout:10s DeprecatedBatchSize:99 MB SbftShared:map[RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem] N:1 F:0]] general:map[LedgerType:ram ListenAddress:0.0.0.0 LogLevel:info QueueSize:10 TLS:map[ClientAuthEnabled:false ClientRootCAs:<nil> Enabled:false PrivateKey:<nil> Certificate:<nil> RootCAs:<nil>] Profile:map[Address:0.0.0.0:6060 Enabled:false] MaxWindowSize:1000 ListenPort:5005 GenesisMethod:provisional GenesisFile:./genesisblock] ramledger:map[HistorySize:1000] fileledger:map[Location:<nil> Prefix:hyperledger-fabric-ordererledger] kafka:map[TLS:map[RootCAs:<nil> Enabled:false PrivateKey:<nil> Certificate:<nil>] Retry:map[Stop:60s Period:3s] Verbose:false] sbftlocal:map[CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp PeerCommAddr::6101]]
2017-02-14 23:48:39.614 UTC [orderer/config] completeInitialization -> INFO 002 General.LocalMSPDir unset, setting to ../msp/sampleconfig/
2017-02-14 23:48:39.614 UTC [orderer/config] completeInitialization -> INFO 003 General.LocalMSPID unset, setting to DEFAULT
2017-02-14 23:48:39.614 UTC [orderer/config] completeInitialization -> INFO 004 Validated configuration to: &{General:{LedgerType:ram QueueSize:10 MaxWindowSize:1000 ListenAddress:0.0.0.0 ListenPort:5005 TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]} GenesisMethod:provisional GenesisFile:./genesisblock Profile:{Enabled:false Address:0.0.0.0:6060} LogLevel:info LocalMSPDir:/etc/hyperledger/msp/sampleconfig LocalMSPID:DEFAULT} RAMLedger:{HistorySize:1000} FileLedger:{Location: Prefix:hyperledger-fabric-ordererledger} Kafka:{Retry:{Period:3s Stop:1m0s} Verbose:false Version:{version:[0 9 0 1]} TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]}} Genesis:{DeprecatedBatchTimeout:10s DeprecatedBatchSize:103809024 SbftShared:{N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem]}} SbftLocal:{PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp}}
2017-02-14 23:48:39.670 UTC [configtx/tool/localconfig] Load -> INFO 005 Checking for genesis.yaml at: /etc/hyperledger/fabric
2017-02-14 23:48:39.670 UTC [configtx/tool/localconfig] Load -> INFO 006 Checking for genesis.yaml at: 
2017-02-14 23:48:39.671 UTC [viperutil] EnhancedExactUnmarshal -> INFO 007 map[orderer:map[BatchSize:map[MaxMessageCount:100 AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB] Kafka:map[Brokers:[kafka0:9092,kafka1:9092,kafka2:9092]] OrdererType:kafka Addresses:[0.0.0.0:5005] BatchTimeout:10s]]
2017-02-14 23:48:43.620 UTC [orderer/main] NewServer -> INFO 008 Starting orderer
2017-02-14 23:48:43.620 UTC [orderer/main] main -> INFO 009 Beginning to serve requests
2017-02-14 23:48:50.226 UTC [peer/sharedconfig] ProposeConfig -> WARN 00a Uknown Peer config item with key MSP
2017-02-14 23:48:50.237 UTC [peer/sharedconfig] ProposeConfig -> WARN 00b Uknown Peer config item with key MSP
2017-02-14 23:48:50.239 UTC [peer/sharedconfig] ProposeConfig -> WARN 00c Uknown Peer config item with key MSP
panic: Failed to create Kafka producer: kafka: client has run out of available brokers to talk to (Is your cluster reachable?)

goroutine 59 [running]:
panic(0xa2ce40, 0xc4200da480)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/orderer/kafka.newProducer(0xc42021c8e0, 0x1, 0x1, 0x0, 0x9, 0x0, 0x1, 0xb2d05e00, 0xdf8475800, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/producer.go:51 +0x619
github.com/hyperledger/fabric/orderer/kafka.glob..func2(0xc42021c8e0, 0x1, 0x1, 0x0, 0x9, 0x0, 0x1, 0xb2d05e00, 0xdf8475800, 0x0, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:58 +0xb4
github.com/hyperledger/fabric/orderer/kafka.newChain(0x1001480, 0xc42018adc0, 0x1001d20, 0xc4202dacd0, 0xfffffffffffffffd, 0xc420206690)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:114 +0x37c
github.com/hyperledger/fabric/orderer/kafka.(*consenterImpl).HandleChain(0xc42018adc0, 0x1001d20, 0xc4202dacd0, 0xc4202e98c0, 0x2, 0x2, 0xc4202cb400, 0xc4202dac30)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:83 +0x67
github.com/hyperledger/fabric/orderer/multichain.newChainSupport(0xc42034be20, 0xc42034bc40, 0xc4202e80c0, 0xff91c0, 0x103dae8, 0xc42034bd00)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/chainsupport.go:132 +0x57b
github.com/hyperledger/fabric/orderer/multichain.(*multiLedger).newChain(0xc4202ec000, 0xc4201ea240)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/manager.go:206 +0x237
github.com/hyperledger/fabric/orderer/multichain.(*systemChainCommitter).Commit(0xc4202d1600)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/systemchain.go:55 +0x3c
github.com/hyperledger/fabric/orderer/multichain.(*chainSupport).WriteBlock(0xc4202db4a0, 0xc4202d1980, 0xc4202c3a40, 0x1, 0x1, 0xc4202c3b28, 0x2, 0x8, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/multichain/chainsupport.go:243 +0x53
github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).loop(0xc4203cc000)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:284 +0x13a5
created by github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).Start
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:186 +0x567
",,kchristidis,mastersingh24,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/17 9:22 AM;scottz;2242dockercompose.txt;https://jira.hyperledger.org/secure/attachment/10537/2242dockercompose.txt","28/Feb/17 9:22 AM;scottz;2242errlogs.txt;https://jira.hyperledger.org/secure/attachment/10536/2242errlogs.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl1j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,mastersingh24,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Feb/17 8:14 AM;kchristidis;Scott, can you confirm whether this issue persists? If so, I'll look into it.;;;","28/Feb/17 9:16 AM;scottz;Using commit 29d7fc035df697a68d271d628e693c556354486f (I rebased 2/27 morning), I can still see this issue. I attached logs. This time it occurs both with and without using the default channel name, so I wonder if there is something else going on. 

orderer0     | 2017-02-27 23:47:16.513 UTC [orderer/kafka] newProducer -> DEBU 078 Connecting to Kafka cluster: [127.0.0.1:9092]
orderer0     | panic: Failed to create Kafka producer: kafka: client has run out of available brokers to talk to (Is your cluster reachable?)
;;;","27/May/17 2:08 AM;mastersingh24;[~scottz] Is this still an issue?  It's pretty hard to try to fix this since we are way past this in terms of the code;;;","27/May/17 2:56 AM;scottz;@surya is fixing the OTE tool to work with latest protos and configfiles and TLS, and will rerun most of our bug scenarios maybe next week. However, this one does indeed seem like it has been tested and passes for everyone these days - it is just the process of creating a new named channel in kafka network, requiring communications to be set up correctly with the orderer and the kafka brokers. there is no special requirement to use the OTE tool for this. I think we can agree to close this one.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace Tx Validation bit-array by flags array,FAB-2243,14803,14094,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ruslankryukov,ruslankryukov,ruslankryukov,15/Feb/17 7:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,28/Feb/17 12:38 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,," We want to switch valid from a boolean to an enum, so that we can indicate the reason for the invalidation (txid already exists, vscc validation failure (endorsement policy failure), mvcc validation failure, etc

This CR provides new features to persist and get transaction validation results as reason codes.
Before this CR validation results was saved in a bit array with values True or False. Now they are persisted in uint8 array, which represented as TxValidationFlags object. 

Also reason codes can be populated with ledger method GetTxValidationResultByTxID. They have high availability because are stored in index (blockindex). Besides this now method GetTransactionByID fills ProcessedTransaction.Valid field with a reason code.",,mastersingh24,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2071,,,,,FABJ-135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl1r:",,,,,,Sprint 10 - Ledger,Sprint 11 - Ledger,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,mastersingh24,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Feb/17 5:44 PM;mastersingh24;[~ruslankryukov] - would you mind adding some additional details here on the design you've implemented in the CR?;;;","20/Feb/17 5:13 PM;ruslankryukov;done;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing formatting for peer debug log messages,FAB-2244,14804,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,murrekatt,murrekatt,murrekatt,15/Feb/17 9:48 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 4:33 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,Should use debug logging with formatting.,,murrekatt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7fr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,murrekatt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode instantiate results into peer crash,FAB-2245,14805,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,ales,Ratnakar,Ratnakar,15/Feb/17 11:35 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 12:19 AM,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,"Followed the instructions from section *Vagrant Environment using native binaries*
of this link here https://github.com/asararatnakar/chaincode_sample/blob/master/README.md#vagrant-environment-using-native-binaries

While *instantiating* the chaincode I see the crash in peer
https://github.com/asararatnakar/chaincode_sample/blob/master/README.md#instantiate

instantiate command terminal says peer is dead
{code}
 peer chaincode instantiate -C myc1 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_sample -c '{""Args"":[""""]}'
Error: Error endorsing chaincode: rpc error: code = 13 desc = transport is closing

Usage:
  peer chaincode instantiate [flags]
{code}

A gist of peer logs (attached peer and orderer logs)

{code}
2017-02-15 14:10:23.154 UTC [protoutils] ValidateTransaction -> INFO 03f Header is channel_header:<type:1 timestamp:<seconds:1487167673 > channel_id:""myc1"" > signature_header:<creator:""\n\007DEFAULT\022\232\007-----BEGIN -----\nMIICjDCCAjKgAwIBAgIUBEVwsSx0TmqdbzNwleNBBzoIT0wwCgYIKoZIzj0EAwIw\nfzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNh\nbiBGcmFuY2lzY28xHzAdBgNVBAoTFkludGVybmV0IFdpZGdldHMsIEluYy4xDDAK\nBgNVBAsTA1dXVzEUMBIGA1UEAxMLZXhhbXBsZS5jb20wHhcNMTYxMTExMTcwNzAw\nWhcNMTcxMTExMTcwNzAwWjBjMQswCQYDVQQGEwJVUzEXMBUGA1UECBMOTm9ydGgg\nQ2Fyb2xpbmExEDAOBgNVBAcTB1JhbGVpZ2gxGzAZBgNVBAoTEkh5cGVybGVkZ2Vy\nIEZhYnJpYzEMMAoGA1UECxMDQ09QMFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE\nHBuKsAO43hs4JGpFfiGMkB/xsILTsOvmN2WmwpsPHZNL6w8HWe3xCPQtdG/XJJvZ\n+C756KEsUBM3yw5PTfku8qOBpzCBpDAOBgNVHQ8BAf8EBAMCBaAwHQYDVR0lBBYw\nFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFOFC\ndcUZ4es3ltiCgAVDoyLfVpPIMB8GA1UdIwQYMBaAFBdnQj2qnoI/xMUdn1vDmdG1\nnEgQMCUGA1UdEQQeMByCCm15aG9zdC5jb22CDnd3dy5teWhvc3QuY29tMAoGCCqG\nSM49BAMCA0gAMEUCIDf9Hbl4xn3z4EwNKmilM9lX2Fq4jWpAaRVB97OmVEeyAiEA\n25aDPQHGGq2AvhKT0wvt08cX1GTGCIbfmuLpMwKQj38=\n-----END -----\n"" nonce:""\230\272\330\364N\267\345{,\257\247\025\235\213\232\267\225&\370-\311\227K\037"" > 
2017-02-15 14:10:23.155 UTC [protoutils] validateChannelHeader -> INFO 040 validateChannelHeader info: header type 1
2017-02-15 14:10:23.155 UTC [protoutils] checkSignatureFromCreator -> INFO 041 checkSignatureFromCreator starts
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0x8cba43]

goroutine 149 [running]:
panic(0xafea40, 0xc4200100c0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc420221a40, 0xc4217b7800, 0x3a6, 0x3a6, 0x0, 0x0, 0xc421861c90, 0x1)
	<autogenerated>:1 +0x43
github.com/hyperledger/fabric/core/common/validation.checkSignatureFromCreator(0xc4217b7800, 0x3a6, 0x3a6, 0xc4217959f0, 0x46, 0x46, 0xc4218b5a00, 0x1939, 0x1939, 0xc421861b10, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/msgvalidation.go:129 +0x156
github.com/hyperledger/fabric/core/common/validation.ValidateTransaction(0xc421872840, 0xc421861a20, 0x1, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/msgvalidation.go:345 +0x2b1
github.com/hyperledger/fabric/core/committer/txvalidator.(*txValidator).Validate(0xc421862540, 0xc421862f80, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/committer/txvalidator/validator.go:116 +0x4a9
github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).Commit(0xc421862560, 0xc421862f80, 0x5, 0x7f7a6a6c5000)
	/opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:58 +0xe8
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc4217e0240, 0xc421862f80, 0x0, 0x4, 0xc421861998)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:397 +0x56
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4217e0240)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:294 +0x458
created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:148 +0x692

{code}",,ales,muralisr,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/17 11:33 PM;Ratnakar;orderer-logs.txt;https://jira.hyperledger.org/secure/attachment/10510/orderer-logs.txt","15/Feb/17 11:33 PM;Ratnakar;peer-crash-logs.txt;https://jira.hyperledger.org/secure/attachment/10509/peer-crash-logs.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl1z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ales,muralisr,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/17 11:49 PM;Ratnakar;This is tested on the commit level : *66b3c98c21f564a75cee4a54a16075e1b492db53*
;;;","16/Feb/17 1:27 AM;muralisr;[~Ratnakar] this is a known issue.

Pending config changes caused failures in MSP evaluation. However should not crash but handle elegantly. I beleive [~ales] has a fix for that.;;;","16/Feb/17 11:41 PM;ales;I think this has been solved - could you please confirm?;;;","17/Feb/17 12:19 AM;Ratnakar;[~ales] Verified on commit level *3a61f6b61be404eb778d5d1be5179795eca218d0*
Issue is no more reproducible, closing the issue;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
With new deploy procedure peer0 crashed after instantiating chaincode from CLI,FAB-2246,14806,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,Nishi,Nishi,15/Feb/17 11:41 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 7:02 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Followed steps in 
https://github.com/asararatnakar/chaincode_sample 
from section - ""Using Docker-compose"".

Please find attached docker-compose-channel.yml used in test.

It consistently failed in step2 of Deploy section i..e. during instantiating a chaincode:

Error from peer0 logs:

2017-02-15 14:30:05.553 UTC [gossip/comm#-1] Send -> INFO 569 Entering, sending tag:EMPTY signature:""0E\002!\000\334\215*\346\245a\270\246rX@\322\323\030z\221\306]\347GJ\233k\026\225J\023\376\321\232OB\002 \024\222(j\216\203e*\375\0073]\206A\247\214\362\215\033\261\270\344=\2436\203\350F\003\nT\\"" aliveMsg:<membership:<pkiID:""\037\273\337\266\307\256[\312\266\303Le\301DR\221K3K\366x\205\271\032\355\320\226\211\237H\332\205"" internalEndpoint:<endpoint:""172.21.0.3:7051"" signature:""0E\002!\000\326\016+\215\306\225$\365l.\2124\367\342\374I\202\247\347\0102\301x\244\t\0233\310\226\366\""\273\002 X+x+0$'%\337\233\022\317\216'To\350\235\333\2420N\320\324!V\332\201\n\256\214\350"" > > timestamp:<inc_number:1487168745484341504 seqNum:139 > >  to  0 peers
2017-02-15 14:30:07.424 UTC [protoutils] ValidateProposalMessage -> INFO 56a ValidateProposalMessage starts for signed proposal 0xc4200e7bc0
2017-02-15 14:30:07.424 UTC [protoutils] validateChannelHeader -> INFO 56b validateChannelHeader info: header type 3
2017-02-15 14:30:07.424 UTC [protoutils] checkSignatureFromCreator -> INFO 56c checkSignatureFromCreator starts
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x20 pc=0x8c5c13]

goroutine 1021 [running]:
panic(0xbbb660, 0xc420014050)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/common/configtx/handlers/msp.(*MSPConfigHandler).DeserializeIdentity(0xc42028df40, 0xc421b4a400, 0x3a6, 0x3a6, 0x0, 0x0, 0xc420215e10, 0x1)
	<autogenerated>:1 +0x43
github.com/hyperledger/fabric/core/common/validation.checkSignatureFromCreator(0xc421b4a400, 0x3a6, 0x3a6, 0xc421a8ed70, 0x46, 0x46, 0xc421b48000, 0x4af, 0x4af, 0xc420215e00, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/msgvalidation.go:129 +0x156
github.com/hyperledger/fabric/core/common/validation.ValidateProposalMessage(0xc4200e7bc0, 0xed0365cef, 0x1952bfda, 0x1273380, 0xb1e0, 0x100)
	/opt/gopath/src/github.com/hyperledger/fabric/core/common/validation/msgvalidation.go:81 +0x1bf
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal(0x1297010, 0x7fa516c7a8a8, 0xc4200e7b60, 0xc4200e7bc0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:266 +0x67
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler(0xc2d620, 0x1297010, 0x7fa516c7a8a8, 0xc4200e7b60, 0xc421b352c0, 0x0, 0x0, 0x4416bb, 0x8000, 0xb767c0)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:99 +0x27d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC(0xc4200741b0, 0x1259ae0, 0xc421aa3b90, 0xc420084f00, 0xc4201907e0, 0x1239970, 0xc4200e7b30, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:580 +0xa2d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc4200741b0, 0x1259ae0, 0xc421aa3b90, 0xc420084f00, 0xc4200e7b30)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:737 +0x6ad
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc420215c80, 0xc4200741b0, 0x1259ae0, 0xc421aa3b90, 0xc420084f00)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:402 +0xab
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:403 +0xa3

",,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Feb/17 11:43 PM;Nishi;docker-compose-channel.yml;https://jira.hyperledger.org/secure/attachment/10511/docker-compose-channel.yml",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl27:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 7:01 AM;denyeart;I believe this is fixed, please re-open if you still see the issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test improvements - Performance Traffic Engine (PTE),FAB-2247,14807,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,dongming,dongming,dongming,15/Feb/17 11:41 PM,11/Jan/21 2:36 AM,28/Oct/23 2:58 AM,11/Jan/21 2:36 AM,,,,,v1.0.0,v1.1.0,v1.2.0,fabric-quality,,,,0,quality,,,,,,,"PTE (Performance Traffic Engine) capabilities enhancement, including (not limited):
 - TLS enablment
 - endorsement policy
 - multi-channel support
 - different complexity levels chaincode support (simple, medium, complexity)
 - event handler
 - chain height access
 - multiple user support
 - density: multiple BC networks with its own workload
 - longevity
 - scalability support
 - multiple orderers
 - fabric new features",,btl5037,dinotone,dongming,eragnoli,inatatsu,moriohara,scottz,shimos,sunhwei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3475,FAB-16061,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,,,Test improvements - Performance Traffic Engine (PTE),,,,Unset,,,,"1|hzx30g:",,,,Unset,Unset,Sprint 16 - Quality,Sprint 17 - Quality,Sprint 18 - Quality,Sprint 19 - Quality,,,,,,,,,,,,,,,,,,,,,btl5037,dinotone,dongming,eragnoli,inatatsu,moriohara,scottz,shimos,sunhwei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:11 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v1.0 performance SDKNode - event handler,FAB-2248,14808,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,16/Feb/17 12:15 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 3:40 AM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,support event handler,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxl3b:",,,,,,Sprint 12 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB name needs to be consistent with chain ID,FAB-2249,14809,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,16/Feb/17 12:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,16/Feb/17 1:10 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,The CouchDB database name need to be consistent with the chain ID.  This will require additional checks in addition to the normal couchdb restrictions and some remapping for characters allowed for the chain ID.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6dr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v10 performance SDKNode - multi-level complexity chaincode support,FAB-2250,14810,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,16/Feb/17 12:20 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 3:40 AM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,support multi-level complexity chaincode in perofmrnace SDKNode,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxl3j:",,,,,,Sprint 12 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve information flow ,FAB-2251,14811,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,markparz,markparz,markparz,16/Feb/17 1:37 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,29/Mar/17 12:49 AM,,,,,,,,fabric-docs,,,,0,Documentation,Usability,v1.0,,,,,"Steps to improve the flow of information (not just a docs issue):
 
Fabric launch site - EVERYONE STARTS HERE:

    Create site / splash page - Fab-2115[https://jira.hyperledger.org/browse/FAB-2115] - DONE
    Link directly off HL.org - DONE
    Less words, more graphics - DONE
        Use icon linking - BM tile 'esk -> direct feedback from community
        ""If I see more than a paragraph, 2 at most, I'm just going to start clicking around""
    Create some more higher level videos 
    Create some more technical and intermediate videos and demos
    Need more sample apps & how-to on sample app creation

Current readme docs improvements:

    More graphically pleasing nature
        Investigate sphynx or other use of basic capabilities like hover, etc - DONE
    Improve TOC flow -> DONE
        Proposal put forward to community and being worked
        Mark will open a thread to the community to press for other suggestions / improvements -DONE
        Mark will reach out to community, starting a email thread for suggestions on improvements / gap identification. Have had good feedback, creating more discussion in #fabric-documentation channel - DONE
        Use above email to also point to new #fabric-documentation channel, as well as opening Jira items for new requirements/suggestions, and issues with current doc - DONE

Updates to the HL.org site:

    Feedback from community at Hackathon is hard to find proper links directly off HL.org
        Can't get directly to the wiki pages
        Hard to navigate
    Define what is used for which purpose Wiki, email, rocketchat, etc (community issue)",,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,ghx-label-1,,I need an easy way to navigate documentation for Fabric,To Do,,,,,,,"1|hzx4xj:",,,,Unset,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,Unset,,,,,,,,,,,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/17 12:49 AM;markparz;Last remaining pieces are a series of videos, will break this off and close this item.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Track MSP per org and prevent MSP ID changes in configtx,FAB-2253,14814,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,16/Feb/17 4:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl3z:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
doc epic,FAB-2254,14815,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Clayton Sims,Clayton Sims,16/Feb/17 4:42 AM,17/Jul/19 2:15 AM,28/Oct/23 2:58 AM,18/Feb/17 5:21 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,,,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-3,,doc epic,To Do,,,Unset,,,,"1|hzxl47:",,,,Unset,Unset,Sprint 12 - Documentation,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create ImplicitMetaPolicy policy type,FAB-2255,14816,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,16/Feb/17 5:00 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl4f:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer startup locally is broken,FAB-2257,14818,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,16/Feb/17 5:28 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:28 AM,,,,,,,,,,,,0,,,,,,,,"In fixing the orderer docker startup, the orderer.yaml file was modified to include the LocalMSPDir.  This was required because without the variable in the yaml, the environment variable would not take effect.  However, this orderer.yaml variable was incorrectly set to ../msp when it was being set as a default in code to ../msp/sampleconfig.

Symptoms of this are:

$ ./orderer 
2017-02-15 15:24:32.938 EST [orderer/config] Load -> INFO 001 No orderer cfg path set, assuming development environment, deriving from go path
2017-02-15 15:24:32.939 EST [orderer/config] Load -> INFO 002 Setting ORDERER_CFG_PATH to: /home/yellickj/go/src/github.com/hyperledger/fabric/orderer
2017-02-15 15:24:32.940 EST [viperutil] EnhancedExactUnmarshal -> INFO 003 map[general:map[LocalMSPID:DEFAULT GenesisFile:./genesisblock ListenPort:7050 LogLevel:info MaxWindowSize:1000 ListenAddress:127.0.0.1 TLS:map[Certificate:<nil> RootCAs:<nil> ClientAuthEnabled:false ClientRootCAs:<nil> Enabled:false PrivateKey:<nil>] LocalMSPDir:../msp/ Profile:map[Enabled:false Address:0.0.0.0:6060] QueueSize:10 GenesisMethod:provisional LedgerType:ram] ramledger:map[HistorySize:1000] fileledger:map[Location:<nil> Prefix:hyperledger-fabric-ordererledger] kafka:map[Retry:map[Stop:60s Period:3s] Verbose:false TLS:map[PrivateKey:<nil> Certificate:<nil> RootCAs:<nil> Enabled:false]] sbftlocal:map[PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp] genesis:map[DeprecatedBatchSize:99 MB SbftShared:map[N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem]] DeprecatedBatchTimeout:10s]]
2017-02-15 15:24:32.940 EST [orderer/config] completeInitialization -> INFO 004 Validated configuration to: &{General:{LedgerType:ram QueueSize:10 MaxWindowSize:1000 ListenAddress:127.0.0.1 ListenPort:7050 TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]} GenesisMethod:provisional GenesisFile:./genesisblock Profile:{Enabled:false Address:0.0.0.0:6060} LogLevel:info LocalMSPDir:../msp/ LocalMSPID:DEFAULT} RAMLedger:{HistorySize:1000} FileLedger:{Location: Prefix:hyperledger-fabric-ordererledger} Kafka:{Retry:{Period:3s Stop:1m0s} Verbose:false Version:{version:[0 9 0 1]} TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]}} Genesis:{DeprecatedBatchTimeout:10s DeprecatedBatchSize:103809024 SbftShared:{N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem]}} SbftLocal:{PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp}}
panic: Failed initializing crypto [Could not load a valid ca certificate from directory ../msp/cacerts, err Could not read directory open ../msp/cacerts: no such file or directory, err ../msp/cacerts]

goroutine 1 [running]:
panic(0x970d00, 0xc42023a530)
	/usr/lib/go/src/runtime/panic.go:500 +0x1a1
main.main()
	/home/yellickj/go/src/github.com/hyperledger/fabric/orderer/main.go:90 +0x16f8
",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl4n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer panics when kafka brokers restarted,FAB-2259,14820,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,suryalnvs,suryalnvs,16/Feb/17 7:03 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,01/Mar/17 1:13 AM,v1.0.0,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,Quality,,,,,,"Orderer is generating panics when kafka brokers are restarted while sending multiple transactions due to which the orderer is getting restarted.

Tested on Feb 15 2017 using:
commit: ad986bbf000ff34ebeb8e142cfcd747a01f12617
commit date: Wed Feb 15 15:02:34 2017 +0000

1. Using 1 orderer with 3 kafka brokers, 1 peer and 1 ca
2. cd $GOPATH/src/github.com/hyperledger/fabric/orderer/sampleclients/broadcast_timestamp
3. ./broadcast_timestamp -server 127.0.0.1:5005 -messages 100000
4. docker stop kafka0 kafka1 kafka2; sleep 5; docker start kafka0 kafka1 kafka2
5. After the restart of kafka brokers, a panic happens and orderer restarts and can be seen in orderer logs 

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x534dfe]

goroutine 70 [running]:
panic(0xa40840, 0xc42000c050)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).loop(0xc420072090)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:233 +0x1fe
created by github.com/hyperledger/fabric/orderer/kafka.(*chainImpl).Start
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/kafka/orderer.go:186 +0x567

Expected Result:
Even after the restart of kafka brokers, orderers needs to work as usual without getting restarted.

Actual Result:
Orderer is getting restarted after the restart of kafka brokers while sending transactions 

Here is the output of ""docker ps""  which shows the restart of kafka brokers and orderer.

vagrant@hyperledger-devenv:v0.2.2-aeb3f75:/opt/gopath/src/github.com/hyperledger/fabric/orderer/sample_clients/otd$ docker ps
CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                              NAMES
4d6b096f090d        hyperledger/fabric-peer         ""peer node start""        4 minutes ago      Up 4 minutes       0.0.0.0:7061->7061/tcp             peer0
3cafcda235e5        hyperledger/fabric-orderer      ""orderer""                4 minutes ago      Up 3 minutes       0.0.0.0:5005->5005/tcp, 7050/tcp   orderer0
d2eee76ca8a7        hyperledger/fabric-kafka        ""/docker-entrypoint.s""   4 minutes ago      Up 3 minutes       9092-9093/tcp                      kafka2
76800afdd6c5        hyperledger/fabric-kafka        ""/docker-entrypoint.s""   4 minutes ago      Up 3 minutes       9092-9093/tcp                      kafka0
1697251266d1        hyperledger/fabric-kafka        ""/docker-entrypoint.s""   4 minutes ago      Up 3 minutes       9092-9093/tcp                      kafka1
171fcb0d3b75        rameshthoomu/fabric-ca-x86_64   ""sh -c 'fabric-ca ser""   4 minutes ago      Up 4 minutes       0.0.0.0:7054->7054/tcp             ca0
95ac7ff324bb        hyperledger/fabric-zookeeper    ""/docker-entrypoint.s""   4 minutes ago      Up 4 minutes       2181/tcp, 2888/tcp, 3888/tcp       zookeeper

========================================================================
Below are the successful cases:
========================================================================
1. When any one of the kafka brokers are restarted, the functioning of the orderer is as expected
2. When any  two of the three kafka brokers are restarted, the functioning of the orderer is as expected.



","Lenovo laptop running Linux, vagrant, docker containers for each orderer and kafka-broker",kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2479,,,,,,"17/Feb/17 12:15 AM;suryalnvs;docker-compose.yml;https://jira.hyperledger.org/secure/attachment/10514/docker-compose.yml","16/Feb/17 7:03 AM;suryalnvs;output.log;https://jira.hyperledger.org/secure/attachment/10512/output.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx613:",,,,,,Sprint 12 - consensus,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/17 5:16 AM;kchristidis;Discussed this with [~scottz] and [~suryalnvs] today. This comes down to an out of range offset request error by the orderer's consumer:

{noformat}
The requested offset is outside the range of offsets maintained by the server for the given topic/partition.
{noformat}

It is out of range because the broker that we are accessing does not have access to the latest copy of the log.

Working on a combination of min.isr and req.acks settings to make this work.;;;","26/Feb/17 7:45 AM;kchristidis;This should be taken care of with the fix put forward in:

https://jira.hyperledger.org/browse/FAB-2484 (CR: https://gerrit.hyperledger.org/r/#/c/6535/)

Please let me know if you keep seeing the issue, or if any more clarifications are needed.

If you confirm that the issue is addressed, let us mark it as Done.;;;","01/Mar/17 1:13 AM;kchristidis;Marking this as Done based on the comments from Surya yesterday. If the issue persists, re-open it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode deploy error messages not appearing correctly,FAB-2260,14822,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,chrism28,chrism28,16/Feb/17 10:44 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,04/May/17 4:50 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"I am following the fabric 1.0 Getting Started guide here:
https://hyperledger-fabric.readthedocs.io/en/latest/gettingstarted/

which uses the file:
https://raw.githubusercontent.com/hyperledger/fabric/master/examples/sfhackfest/sfhackfest.tar.gz

I can successfully deploy the sample example_cc.go chaincode (using the Node SDK).

If however I edit example_cc.go and introduce a syntax error the deploy fails but does not display the root cause.
The error I see on the console output is:
{{error: [Peer.js]: GRPC client got an error response from the peer. Error: Failed to deploy chaincode spec(Error creating image: %!s(<nil>))
    at /home/blockchain/dev/hf/node_modules/grpc/src/node/src/client.js:434:17}}

So I have no way of knowing why the chaincode compilation failed.

(I've attached the full output from the deploy command)

",,chrism28,denyeart,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Feb/17 10:43 AM;chrism28;deploy-output1.txt;https://jira.hyperledger.org/secure/attachment/10513/deploy-output1.txt","04/May/17 4:47 AM;wlahti;instantiate-cc-with-syntax-error-logs.txt;https://jira.hyperledger.org/secure/attachment/10702/instantiate-cc-with-syntax-error-logs.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl5b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,chrism28,denyeart,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/17 3:45 AM;jimthematrix;the SDK is simply relaying the error message from the backend. the message has meta characters in it that seems to need fix in the peer code. moving this to the peer component.;;;","12/Apr/17 7:03 AM;denyeart;[~muralisr] [~chrism28]
Is this still an issue?;;;","13/Apr/17 4:16 PM;muralisr;[~wlahti] There has been work done to improve logging at various levels (although your on the chaincode logging itself won't help with this one). In particular I'm thinking of the work to expose docker client logs  (see core.yaml -> attachStdout). Can you look to see if that helps debugging compilation/build issues and request closure please ?
;;;","04/May/17 4:50 AM;wlahti;Tested this with the latest fabric and fabric-sdk-node. I introduced a syntax error in example_cc.go and I see the error message displayed correctly on both the fabric and fabric-sdk-node sides. See output in attached text document for further details. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move handler instantiation into transactional path,FAB-2261,14823,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,16/Feb/17 3:42 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl5j:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Split configtx manager into manager/config/update,FAB-2262,14824,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,16/Feb/17 4:16 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl5r:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetQueryResult chaincode API should allow client to pass in index name.,FAB-2263,14825,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,16/Feb/17 9:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 7:07 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"In CouchDB _find API, use_index parameter can specify which index to utilize for the query.  Since the API should be database agnostic, the new parameter should be a generic metadata parameter, to pass any metadata/properties that the specific DB may require.  Perhaps metadata should be a map, but need to check if there are any portability issues with that across go and java chaincode.

We don't yet have index management capability, but the GetQueryResult API at least needs to account for future indexes.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-199,,,,,,,,,"1|hzx66v:",,,,,,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve how result set batches get mapped to phantom check results,FAB-2264,14826,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,denyeart,denyeart,16/Feb/17 11:24 PM,23/Jan/20 3:51 AM,28/Oct/23 2:58 AM,23/Jan/20 3:51 AM,,,,,Future,,,fabric-ledger,,,,0,stale-item,,,,,,,"Currently chaincode handler will return 100 items to the chaincode container, even if the chaincode ends up not exhausting the list.  All 100 items will go into the RWSet phantom check results though, even though the chaincode client didnt read them.  This should be improved such that only the items that are actually read go on the RWSet phantom check results.

This can be deferred from v1.",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxl5z:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:51 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v10 performance SDKNode - multi orderers support,FAB-2265,14827,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,17/Feb/17 12:14 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,21/Feb/17 7:09 AM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,v1.0 performance SDKNode supports multiple orderers,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxl67:",,,,,,Sprint 12 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetCallerMetadata API returns nothing when called from testchaincode,FAB-2266,14828,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,adc,Nishi,Nishi,17/Feb/17 12:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 7:07 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"goal: to test GetCallerMetadata API available in ""github.com/hyperledger/fabric/core/chaincode/shim/chaincode.go""

Implemented GetCallerMetadata API it from testchaincode as follows:

_func  (t *SimpleChaincode) getCallerMetadata(stub shim.ChaincodeStubInterface) pb.Response {
        fmt.Printf(""- getCallerMetadata \n"")
        metadataAsBytes, err := stub.GetCallerMetadata()
        if err != nil {
                return shim.Error(err.Error())
        }
       fmt.Printf("" metadata from chaincode : %v"", metadataAsBytes)
        return shim.Success(metadataAsBytes)
}
_
Called from CLI command after a successfull install, instantiaite, invoke and query as:
peer chaincode query -C testchainid -n marbles -c '{""Args"":[""getCallerMetadata""]}'

Expected Results: To see some information on metadata (not exactly sure what this would be though)

Actual Result: 
Query Result:
",,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl6f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 7:07 AM;denyeart;GetCallerMetadata has been removed from v1.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v10 performance SDKNode - invoke sanity check,FAB-2267,14829,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,17/Feb/17 12:32 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,21/Feb/17 7:09 AM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,"When executing invoke test, verify the very last invoke by query after the event is recieved. ",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxl6n:",,,,,,Sprint 12 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test item,FAB-2268,14830,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,denyeart,denyeart,17/Feb/17 12:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 4:10 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxamf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v10 performance SDKNode - multiple network support (unique workload),FAB-2269,14831,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,17/Feb/17 1:15 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,01/Mar/17 6:08 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,"As today, the performance SDKNode supports multiple network.  However, each network can only perform the same workload.

Need to support that each network can perform its unique workload.
",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxl6v:",,,,,,Sprint 12 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Unable to deploy chaincode using certificates generated from behave tests with default chainid ""testchainid""",FAB-2270,14832,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,Ratnakar,Ratnakar,17/Feb/17 2:19 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,19/Feb/17 3:09 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Commit Level : **3a61f6b61be404eb778d5d1be5179795eca218d0**


It is possible to deploy with default channel ""testchainid"" on a single peer.
However, if we want to deploy chaincode on multiple orgs on defaultchannel ""testchainid"" using the behave generated certs it is throwing the below error.

{code}
Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority
{code}


The step-by-step instructions for using the default channel are outlined here https://github.com/hyperledger/fabric/blob/master/docs/channel-setup.md


*Pre-requisites:*

* Vagrant 
* Generate cert data from behave folder
  cd /opt/gopath/src/github.com/hyperledger/fabric/bddtests
  behave -k features/bootstrap.feature.

  The above command generates certs for each org and stores under volume folder,
  For one run this is how it looks on my machine : {panel}bddtests/volumes/peer/7bbe3559ef4711e6866c0800275fb08f/peer0{panel}

* Used the docker-compose from here https://github.com/hyperledger/fabric/blob/master/docs/docker-compose-channel.yml
  edit docker-compose with below info

  1. mount certs volume to orderer
{code}
      volumes:
        - .bddtests/volumes/peer/7bbe3559ef4711e6866c0800275fb08f/peer0:/opt/gopath/src/github.com/hyperledger/fabric/orderer/msp
{code}

  2. mount chaincode to peer0 volume 
{code}
         volumes:
        - /var/run/:/host/var/run/
        - ./data/peer0:/etc/hyperledger/fabric/msp/sampleconfig
        - /opt/gopath/src/github.com/hyperledger/fabric/examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
{code}
  3. Also make sure peer is start with defaultchain true
{code}
     command: peer node start --peer-defaultchain=true
{code}
  and start the network
{code}
  docker-compose -f docker-compose-channel.yml up -d
{code}
* Install chaincode on peer0 container
{code}
  docker exec -e GOPATH=/opt/gopath -it peer0 bash
{code}
  execute the below command in container
{code}
  CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 peer chaincode install -C testchainid -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
{code}
* Instantiate from CLI container
{panel}
  docker exec -it cli bash
{panel}
{code}
CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 peer chaincode instantiate -C testchainid -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
{code}

At this step fails to instantiate the chaincode with below error:
{code}
2017-02-16 16:28:08.442 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-16 16:28:08.444 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-16 16:28:08.444 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-16 16:28:08.446 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default escc
2017-02-16 16:28:08.446 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 005 Using default vscc
2017-02-16 16:28:08.446 UTC [msp] Sign -> DEBU 006 Sign: plaintext: 0A87080A3F0803220B74657374636861...41554C540A04657363630A0476736363 
2017-02-16 16:28:08.446 UTC [msp] Sign -> DEBU 007 Sign: digest: 90FF7EF2F5F6AC1AA7B27805E3BA4964D873AFE75F2830C4EA265251D77BE1A8 
Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority

{code}",,Ratnakar,ysim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl73:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,ysim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/17 3:09 PM;Ratnakar;Unable to reproduce the issue on latest commit level : *dd658bf76c68a8791172534e70d71ff28171b96b*

Tried all the three combinations given here
https://github.com/asararatnakar/chaincode_sample#3-using-docker-images;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"returned value not from""GetChainInfo"" on qscc chaincode is not readable",FAB-2271,14833,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Nishi,Nishi,17/Feb/17 3:30 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,22/Feb/17 10:56 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"After a successful install, instantiate, invoke and query using test chainoce ""chaincodeAPIDriver"" issued a CLI command 

 peer chaincode query -C """" -n qscc -c '{""Args"":[""GetChainInfo"",""myc1""]}'

Expected Result: To see ChainInfo results.

Actual Result: �&�C8���f�o��=H�*�|�@���1��)��2l:����{��!�|��_

�w�p�L�'c�q*7+\ܢ���n����q�:��Y#���Ssx�&~gr",,denyeart,muralisr,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl7b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,muralisr,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 12:21 PM;denyeart;The problem is that the response is a serialized proto object which CLI doesn't understand.

[~muralisr] Is it possible for CLI to interpret the serialized proto and print the results in a nice format?;;;","22/Feb/17 9:59 AM;muralisr;[~denyeart]  CLI is a tool with a narrow scope (mainly for dev activities). QSCC APIs are mainly for use from SDKs which will provide controlled access via covering APIs (as opposed to calling chaincode directly).  Users can pretty much call any chaincode from CLI and it would need deep introspection skills to decipher and pretty print arbitrary ""invoke/query"" calls. Beyond its scope, I'd say. ;;;","22/Feb/17 10:56 AM;denyeart;Thanks [~muralisr].  I will close the work item and ask the tester to use SDK once the APIs are available via SDK.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"getHistoryforMarble, fails to print output when used in CLI Command",FAB-2272,14834,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Nishi,Nishi,17/Feb/17 4:07 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Feb/17 12:19 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Inside chaincodeAPiDriver a function ""getHistoryForMarble"" is implemented to call GetHistoryForKey on fabric/core/chaincode/shim/chaincode.go

When I try to invoek this function from CLI as:
peer chaincode invoke -C myc1 -n mycc -c '{""Args"":[""getHistoryForMarble"",""marble1""]}'

Expected Result: To see similar results as displayed on docker container logs as:
[{""TxId"":""a919b1eb-a569-4c03-9d8c-0bea86b95d4b"", ""Value"":{""docType"":""marble"",""id"":1,""name"":""marble1"",""color"":""blue"",""size"":35,""owner"":""tom""}}]

Actual Result:
No output value is returned from CLI command.",,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl7j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 12:19 PM;denyeart;Change the 'invoke' to 'query' and it will print out.
CLI only prints results for 'query'.;;;","20/Feb/17 5:27 AM;Nishi;Verified successfully with query:

peer chaincode query -C myc1 -n mycc3 -c '{""Args"":[""getHistoryForMarble"",""marble1""]}' 
Query Result: [{""TxId"":""1INHI7EzYOV8FvdRa08WcL7hWgB3nK7sHBBpm4Gg0xI="", ""Value"":{""docType"":""marble"",""name"":""marble1"",""color"":""blue"",""size"":35,""owner"":""tom""}}]
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write channels (multichannel) topic,FAB-2274,14836,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,joshhus,joshhus,17/Feb/17 4:14 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,18/Feb/17 12:27 AM,,,,,,,,fabric-quality,,,,0,Documentation,,,,,,,"https://gerrit.hyperledger.org/r/#/c/6017/

by end of your day- if you tell me what is updated- I can try to look on plane tomorrow- provided i have access to the internet on plane. (sometimes that gets iffy depending where you are in flight)


Sharon Weed Cocco
Director Development,Blockchain
e-mail: weeds@us.ibm.com

-----Joshua Horton/Poughkeepsie/IBM wrote: -----
To: Sharon Weed/Raleigh/IBM@IBMUS
From: Joshua Horton/Poughkeepsie/IBM
Date: 02/16/2017 12:21PM
Cc: Mark Parzygnat/Raleigh/IBM@IBMUS, Nicholas Gaski/Raleigh/IBM@IBMUS
Subject: Re: Channels section feedback

The new channels topic, been working it last couple of days, should be in the TOC shortly. 

UX is working a diagram for us to add to the channels topic, which would encompass the table below.

Thanks,

Josh 


--------------------------------------------------------------------------------
Joshua H. Horton
IBM Blockchain Information Development
2455 South Road Poughkeepsie, NY 12601
Email: joshh@us.ibm.com
Tel: 845-433-1711

Inactive hide details for Sharon Weed---02/16/2017 11:44:49 AM---For Channels:  I am not sure pointing to the design documentatSharon Weed---02/16/2017 11:44:49 AM---For Channels:  I am not sure pointing to the design documentation is wise.  Some of these documents

From: Sharon Weed/Raleigh/IBM
To: Joshua Horton/Poughkeepsie/IBM@IBMUS, Nicholas Gaski/Raleigh/IBM@IBMUS, Mark Parzygnat/Raleigh/IBM@IBMUS
Date: 02/16/2017 11:44 AM
Subject: Channels section feedback

--------------------------------------------------------------------------------



For Channels:

I am not sure pointing to the design documentation is wise.  Some of these documents are out of date.

Also, i think it would be helpful to have an example.  While i explained similar to you in class with customers yesterday, they struggled until I gave them an example.  I'd show them a picture (which seems to work with people).

                       Bank A          Bank B           Bank C
channel 1           yes                 yes               no
channel 2           no                  yes               yes
channel 3           yes                 no                yes
channel 4           yes                 yes               yes

yes means they are on cahnnel
no means they are not on channel

In this example, we need to explain that Bank A and Bank B can be endorsers as well as comitters for channel 1.
Bank C can not see the # of transactions... and they can't see the data on the ledger

The reason why I included channel 4 is included is some people think you can't have all participants in a channel- which you can.

Sharon Weed Cocco
Director Development,Blockchain
e-mail: weeds@us.ibm.com
",,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzxl7z:",,,,,,Sprint 12 - Documentation,,,,,,,,,,,,,,,,,,,,,,,,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/17 12:28 AM;markparz;Close as duplicate of 2290;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation section for application interfaces,FAB-2275,14837,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Clayton Sims,Clayton Sims,17/Feb/17 4:24 AM,21/Jul/18 4:08 AM,28/Oct/23 2:58 AM,14/Oct/17 3:36 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,"As a application developer, I need to understand various SDKs, so I develop application code that interacts with Blockchain",,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-5,,Application interfaces documentation ,To Do,,,Unset,,,,"1|hzxl87:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
End-to-end instructions for creating and using a v1 network,FAB-2276,14838,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,nickgaski,nickgaski,17/Feb/17 4:27 AM,03/Apr/19 6:23 PM,28/Oct/23 2:58 AM,14/Apr/17 12:57 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Use docker-compose to spawn a network with ccenv, cli, peers, orderer, ca, cli
Create channel and join peers to channel
Use node program to drive deploy, invoke, query.
Use CLI to create new channel, join channel, install, instantiate chaincode, invoke, query
Troubleshoot any issues",,muralisr,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-7,,Getting Started Section,To Do,,,Unset,,,,"1|hzxl8f:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 4:27 PM;muralisr;[~nickgaski] any update on this Nick ? If everything is done, perhaps close ?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Key concepts section of the table of contents,FAB-2277,14839,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,markparz,markparz,17/Feb/17 4:27 AM,21/Jul/18 4:09 AM,28/Oct/23 2:58 AM,14/Sep/17 2:37 AM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"The sections that should create a complete to include for the overview include:
* Overview
* Why Hyperledger Fabric
* Glossary
* Models (transaction, security)
* Channels
* Chaincode
* consensus - not the module
",,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-9,,"Key concepts - As a developer OR business owner, there needs to be a section that provides a complete overview of the key aspects of Fabric",To Do,,,Unset,,,,"1|hzx4yf:",,,,Unset,Unset,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Node SDK documentation,FAB-2278,14840,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,Clayton Sims,Clayton Sims,17/Feb/17 4:28 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,02/Jul/17 9:14 PM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"As a developer, I need a Node SDK, so I develop application with NodeJS to interact with blockchain. ",,Clayton Sims,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2275,,,,,,,,,"1|hzxl8n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 2:06 AM;markparz;Assigned to Jim, I am sure I saw a Jira item for this already, but can't find it right now. This might be a close as dupe.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Java SDK documentation,FAB-2279,14841,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Clayton Sims,Clayton Sims,17/Feb/17 4:29 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,14/Oct/17 3:36 AM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"As a developer, I need a Java SDK, so I develop application with NodeJS to interact with blockchain. ",,Clayton Sims,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2275,,,,,,,,,"1|hzxl8v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 2:07 AM;markparz;Also assigning to Jim, who may want to give to Rick (I couldn't find his ID);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Python SDK documentation,FAB-2280,14842,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,Clayton Sims,Clayton Sims,17/Feb/17 4:30 AM,05/Jun/20 9:18 PM,28/Oct/23 2:58 AM,05/Jun/20 9:18 PM,,,,,,,,fabric-docs,fabric-sdk-py,,,0,,,,,,,,"As a developer, I need a Python SDK, so I develop application with NodeJS to interact with blockchain. ",,ChristopherFerris,Clayton Sims,hengfun,joshhus,markparz,mastersingh24,palash25,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2275,,,,,,,,,"1|hzx7bj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,hengfun,joshhus,markparz,mastersingh24,palash25,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 9:04 AM;joshhus;They have a wiki that seems pretty thorough at first glance / ready to start doc-ing ... https://wiki.hyperledger.org/projects/fabric-sdk-py.md 

Would be good to have a numbered priority on these doc issues so we, i.e. the community, could tackle them in order. All of them being equally ""High"" doesn't provide actionable information. ;) ;;;","13/Apr/17 3:11 AM;ChristopherFerris;marking as v1.1 since I don't believe the python sdk will be ready for v1.0;;;","26/Apr/17 1:29 AM;markparz;Changed to Future, since everything post v1.0 was tagged with Future.;;;","25/Apr/18 2:56 AM;palash25;Hi there, I've been wanting to get started with contributing to the Hyperledger Project. Is this issue suitable for a beginner like me? If yes then I would like to take a shot at this and if anyone can provide with any resources that might help me with documenting the python sdk that would be much appreciated. (Oh and the wiki link given in the previous comment leads to nowhere, I guess it has been deprecated.);;;","25/Mar/19 4:44 PM;hengfun;H,i I would like to help out. Is this a good place to start?;;;","31/Jul/19 12:54 PM;mastersingh24;[~hengfun]  - most definitely;;;","05/Jun/20 9:16 PM;pandrejko;This has definitely aged out. Python SDK is not officically release but the Python docs are available here: https://github.com/hyperledger/fabric-sdk-py;;;","05/Jun/20 9:18 PM;pandrejko;Content is now available https://github.com/hyperledger/fabric-sdk-py;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Describe the components of v1 getting started network,FAB-2281,14843,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,nickgaski,nickgaski,17/Feb/17 4:33 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Apr/17 12:59 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"explain the pieces provisioned with the getting started tutorial - ca, orderer, cli, peers.",,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,FAB-2282,FAB-2286,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2276,,,,,,,,,"1|hzx53j:",,,,,,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Document prerequisites, curl commands to retrieve dependencies and node code.  ",FAB-2282,14844,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,nickgaski,nickgaski,17/Feb/17 4:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,18/Jun/17 12:43 PM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"outline programming prerequisites, docker versions, xcode, nvm
explain steps to pull network code (docker-compose scripts)
steps to test if network was successfully created
steps to test if peers joined channel
steps to pull node code and install node modules

[~Ratnakar] - I think it would be nice to leverage some of your scripts for SDK testing.  ",,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,FAB-2284,FAB-2286,,,,,,,,,,,,,,,,,,,,,,,FAB-2281,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2276,,,,,,,,,"1|hzx53b:",,,,,,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/17 10:52 PM;ChristopherFerris;[~nickgaski] [~markparz] where are we with this, please?;;;","25/Apr/17 2:56 AM;markparz;This is similar to the getting started, which is almost there, right [~nickgaski] :) 
However, I do need to break some of this apart for doc on individual things like only bring up a peer, OS, etc... ;;;","18/Jun/17 12:44 PM;ChristopherFerris;closing this as it is duplicate of FAB-4246;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Fabric overview (high level) of components, including diagram",FAB-2283,14845,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,markparz,markparz,17/Feb/17 4:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,28/Sep/17 10:31 PM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"Document a brief overview of the fabric, this might be a merge to why fabric. Let's make a high level diagram of the architecture and brief description of the components. Similar to Fab-37.",,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,432000,288000,,0%,432000,288000,,,FAB-4234,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4yn:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:21 AM;ChristopherFerris;What is in review? Link to CR? The overview in v1.0-alpha wasn't much. ;;;","17/Apr/17 10:54 PM;nickgaski;I'm going to leave this open for the time being.  We are planning on creating a diagram to outline the high level components and then provide a brief description of the network topology and various interactions... ;;;","17/Apr/17 11:03 PM;ChristopherFerris;so this is not in review, then but todo?
;;;","18/Apr/17 1:47 AM;nickgaski;[~ChristopherFerris] - yes it's a big To Do.  thanks for updating;;;","18/Apr/17 2:29 AM;markparz;Might be better to put in what we have, and then create a new issue for the topology.;;;","26/Apr/17 12:27 AM;markparz;I sent the diagram of FAB-37 to Design to create a pretty version, however we can just use what's there for now, and change out the image later. ;;;","10/May/17 10:39 PM;markparz;Joe, Anthony O'Dowd, are leading this now, should have some items submitted by 5/12;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use node SDK to drive chaincode,FAB-2284,14846,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,nickgaski,nickgaski,nickgaski,17/Feb/17 4:38 AM,23/Jan/20 3:51 AM,28/Oct/23 2:58 AM,23/Jan/20 3:51 AM,,,,,,,,fabric-docs,,,,0,Documentation,stale-item,,,,,,"use node application to register and enroll a user
deploy chaincode
invoke chaincode - move units from a->b
query the value

I think this is covered by the SDK end-to-end scripts and the marbles application demo.  [~ibmmark] [~bmos299]",,nickgaski,pandrejko,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,FAB-2286,FAB-2287,,,,,,,,,,,,,,,,,,,,,,,FAB-2282,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2276,,,,,,,,,"1|hzx7lz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,nickgaski,pandrejko,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/18 5:59 AM;pandrejko;@bmos - Can this be closed or is there additional work needed here?;;;","23/Jan/20 3:51 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Glossary of terms / components,FAB-2285,14847,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,markparz,markparz,17/Feb/17 4:40 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,29/Mar/17 12:43 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,Need to have an place that clearly defines all the aspects that might not be known that is contained within the architecture or of other documentation.,,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx50n:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/17 12:43 AM;markparz;Completed, need to close... but can't change the fields anymore;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Use CLI to create new channel, join peers, and then drive chaincode",FAB-2286,14848,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,nickgaski,nickgaski,17/Feb/17 4:40 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Apr/17 12:57 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"CLI commands to exercise create and join channel APIs
commands to install and instantiate 
commands to invoke
commands to query",,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,FAB-2287,,,,,,,,,,,,,,,,,,,,,,,,FAB-2281,FAB-2282,FAB-2284,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2276,,,,,,,,,"1|hzx52v:",,,,,,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Troubleshoot the Getting Started Tutorial,FAB-2287,14849,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,nickgaski,nickgaski,17/Feb/17 4:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Apr/17 12:57 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"tips for versioning
docker commands
hard coding peer and orderer IP Addresses 
inspecting logs
inspecting results in CLI container ",,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2286,FAB-2284,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2276,,,,,,,,,"1|hzx53r:",,,,,,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Doc Glossary,FAB-2288,14850,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,joshhus,joshhus,joshhus,17/Feb/17 4:44 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,29/Mar/17 12:54 AM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"Discussion occurred on email - pasting here.
File is glossary.md

Also need to add:

leading peer
anchor peer



 
Here is the glossary comments from me:
Updates or changes in red
(Keith see in pink below for where I need you to comment- please look for multiple places)
(Murali see in this color and comment - see multiple places)
  
Blockchain Network
A blockchain network consists of, at minimum, one peer (responsible for endorsing and committing transactions) leveraging an ordering service, and a membership services component (certificate authority) that distributes and revokes cryptographic certificates representative of user identities and permissions.  Take out what is in red-- I think this will just confuse the situation.

 

Permissioned Network
A blockchain network where any entity (node) is required to maintain a member identity on the network. End users must be authorized and authenticated in order to use the network.  This can be done with fabric-CA or can use a CA sepcified and plugged in. (try to phrase this better please)

  
Peer
Peer is a component that executes, and maintains a ledger of, transactions.  (remove this part)  There are two roles for a peer Add this: Peer has two roles  – endorser and committer.  The architecture has been designed such that a peer is always a committer, but not necessarily always an endorser.  There are policies that define the endorsers.  Peers play no role in the ordering of transactions.

 

 

Member- Keith needs to update this definition- does not seem quite right  
<ks>I agree that this is confusing.  I think we should just use the word ""Participant"" or ""Organization"" and not use ""Member"" for this</ks>
A Member is a participant (such as a company or organization) that operates components - Peers, Orderers, and applications - in the blockchain network.  A member is identified by its CA certificate (i.e. a unique enrollment).   A Member’s peer will be leveraged by end users in order to perform transaction operations on specific channels

  
Transaction
Refers to an operation in which an authorized end user performs read/write operations against the ledger. There are three unique types of transactions - deploy, invoke, and query.-   I would remove this last sentence, as there are now all sorts of things here beside transaction proposal, send to orderer,etc,.. at CLI level.  There is instantiation and install of chainocode,etc,.. I would point to the deeper documentation for commenting on types of transactions,etc,.. 

  
End User
An end user is someone who would interact with the blockchain through a set of published APIs (i.e. the hfc SDK).  You can have an admin user who will typically grant permissions to the Member’s components, and a client user, who, upon proper authentication through the admin user, will drive chaincode applications (deploy, invoke, query) on various channels.  In the case of self-executing transactions, the application itself can also be thought of as the end user.  Remove what is in red

 

Ordering Service
A centralized or decentralized (replace this with""Ordering""-- we don't want to go into centralized/decentalized specifically) service that orders transactions in a block.  You can select different implementations of the “ordering” function - e.g “solo” for simplicity and testing, Kafka for crash fault tolerance, or sBFT/PBFT for byzantine fault tolerance. You can also develop your own protocol to plug into the service.

 

 

Orderer
One of the network entities that form the ordering service. A collection of ordering service nodes (OSNs) will order transactions into blocks according to the network’s chosen ordering implementation. In the case of “solo”, only one OSN is required. Transactions are “broadcast” to orderers, and then “delivered” as blocks to the appropriate channel. (if you mention solo- then you should mention CFTimplementation.  I would just remove solo part)

 

 

Endorser
A specific peer role, where the Endorser peer is responsible for simulating transactions , and in turn preventing unstable or non-deterministic transactions from passing through the network. (remove what is in red- replace with) and signing the transaction based on the policy set.   A transaction is sent to an endorser in the form of a transaction proposal and send the information back to the application layer, which will in turn will send to the orderer  All endorsing peers are currently also committing peers (i.e. they write to the ledger).

 

This actually isn't quite true- you can actually send transactions that don't have a consistent result onto consensus- it will be validated at the comitting peer with VSCC Validated system chain code. We do recommend the application checks this, but I suspect some will go ahead and send to the orderer.

 

 

Committer
A specific peer role, where the Committing peer appends the validated transactions to the channel-specific ledger. If the read/write set is not the same across peers, the transaction will be rejected.  A peer can act as both an endorser and committer, but in more regulated circumstances might only serve as a committer
  
Bootstrap
The initial setup of a network.  There is the bootstrap of a peer network, during which policies, system chaincodes, and cryptographic materials (certs) are disseminated amongst participants, and the bootstrap of an ordering network.  The bootstrap of the ordering network must precede the bootstrap of the peer network, as a peer network is contingent upon the presence of an ordering service. A network need only be “bootstrapped” once.

 

Side notes: 

 

Bootstrapping the network requires creating the network, creating/viewing multiple channels, setting up policies of network, setting up policies for channels, inviting participants to the network and setting up access control on the participants. You do have to have a CA and in that case you need to enroll id, passwords and certificates for applications and peers.

May want to rephrase your bootstrap section as a result of this information-- 

  
 

Block
A batch of ordered transactions, potentially containing ones of an invalid nature, that is delivered to the peers for validation and committal.

I do not know why you think there are transactions that are invalid- I would remove this.

  
System chain  (have Murali verify this definition and the one immediate below)
Contains a configuration block defining the network at a system level.
The system chain lives within the ordering service, and similar to a channel, has an initial configuration containing information such as: root certificates for participating organizations and ordering service nodes, policies, listening address for OSN, and configuration details. Any change to the overall network (e.g. a new org joining or a new OSN being added) will result in a new configuration block being added to the system chain. 

The system chain can be thought of as the common binding for a channel or group of channels. For instance, a collection of financial institutions may form a consortium (represented through the system chain), and then proceed to create channels relative to their aligned and varying business agendas. 

System Chaincode
System Chaincode (SCC) is a chaincode built with the peer and run in the same process as the peer. SCC is responsible for broader configurations of fabric behavior, such as timing and naming services.

 

Channel
A Channel is formed as an offshoot of the system chain; and best thought of as a “topic” for peers to subscribe to, or rather, a subset of a broader blockchain network. A peer may subscribe on various channels and can only access the transactions on the subscribed channels.  Each channel will have a unique ledger, thus accommodating confidentiality and execution of multilateral contracts.

 

I like this better:


With a network created by peers, there are some use cases where some of the transactions may only go to specific peers.  Channels allows you to create a topic for a subset of peers.  As an example, Network has a, b,c, d participants.  A channel can be created that the transactions can only be seen by a,b,and c, whereby participant d does not see the transaction or the ledger.  

  
Dynamic membership
he fabric will allow for endorsers and committers to come and go based on membership, and the blockchain network will continue to operate. Dynamic membership is critical when businesses grow and members need to be added or removed for various reasons.

 

You are missing a T in The up in the beginning

 

Query/Non-Key Value Query
using couchDB 2.0 you now have the capability to leverage an API to perform more complex queries against combinations of variables, including time ranges, transaction types, users, etc.  This feature allows for auditors and regulators to aggregate and mine large chunks of data.

 

Capitlize ""u"" in Using. Remove ""2.0"" we can get into that later into the documentation.

Start with ""There are two ledgers that are currently implemented in fabric by default- level DB and CouchDB.  Users can also plug in their own ledger as a pluggable component. Using,...""""

  
Endorsement System Chaincode
Endorsement System Chaincode (ESCC) is a system chaincode that andles the endorsement policy for specific pieces of chaincode deployed on a network, and defines the necessary parameters (percentage or combination of signatures from endorsing peers) for a transaction proposal to receive a successful proposal response (i.e. endorsement).  Deployments and invocations of user chaincodes both require a corresponding ESCC, which is defined at the time of the deployment transaction proposal for the user chaincode.

 

andles- needs to change to handles

 

Endorsement policy
A blockchain network must establish rules that govern the endorsement (or not) of proposed, simulated transactions. This endorsement policy could require that a transaction be endorsed by a minimum number of endorsing peers, a minimum percentage of endorsing peers, or by all endorsing peers that are assigned to a specific chaincode application. Policies can be curated based on the application and the desired level of resilience against misbehavior (deliberate or not) by the endorsing peers. A distinct endorsement policy for deploy transactions, which install new chaincode, is also required.

 

Endorsements that are required to run a transaction for a chaincode will be validated by the orderer. (ie it will make sure all signatures were obtained before sending to committer)

 

Proposal
A transaction request sent from a client or admin user to one or more peers in a network; examples include deploy, invoke, query, or configuration request.  (you should take out deploy- we have install/instantiate chaincode now)

Deploy (this should be removed)
Refers to the function through which chaincode applications are deployed on chain. A deploy is first sent from the client SDK or CLI to a Lifecycle System Chaincode in the form of a proposal.

 

Membership Services (keith to validate the following two definitions)
Membership Services manages user identities on a permissioned blockchain network; this function is implemented through the fabric-ca component.  fabric-ca is comprised of a client and server, and handles the distribution and revocation of enrollment materials (certificates), which serve to identify and authenticate users on a network

The in-line MembershipSrvc code (MSP) runs on the peers themselves, and is used by the peer when authenticating transaction processing results, and by the client to verify/authenticate transactions. Membership Services provides a distinction of roles by combining elements of Public Key Infrastructure (PKI) and decentralization (consensus). By contrast, non-permissioned networks do not provide member-specific authority or a distinction of roles.

A permissioned blockchain requires entities to register for long-term identity credentials (Enrollment Certificates), which can be distinguished according to entity type. For users, an Enrollment Certificate authorizes the Transaction Certificate Authority (TCA) to issue pseudonymous credentials; these certificates authorize transactions submitted by the user. Transaction certificates persist on the blockchain, and enable authorized auditors to associate, and identify the transacting parties for otherwise un-linkable transactions.

<ks> I would write this section as follows ...
Membership Services authenticates, authorizes, and manages identities on a permissioned blockchain network.

The membership services code that runs in peers and orderers both authenticates and authorizes blockchain operations.  It is a PKI-based implementation of the Membership Services Provider (MSP) abstraction.
The fabric-ca component is an implementation of membership services to manage identities.  In particular, it handles the issuance and revocation of enrollment certificates and transaction certificates.

An enrollment certificate is a long-term identity credential; a transaction certificate is a short-term identity credential which is both anonymous and un-linkable.

</ks> 
Membership Service Provider
The Membership Service Provider (MSP) refers to an abstract component of the system that provides (anonymous) <ks> Remove ""(anonymous)"" as MSP says nothing about anonymity.  This is implemented by fabric-ca.</ks> credentials to clients, and peers for them to participate in a Hyperledger/fabric network. Clients use these credentials to authenticate their transactions, and peers use these credentials to authenticate transaction processing results (endorsements). While strongly connected to the transaction processing components of the systems, this interface aims to have membership services components defined, in such a way that alternate implementations of this can be smoothly plugged in without modifying the core of transaction processing components of the system.

Initialize (Murali to comment on next 3 definitions)
A chaincode method to define the assets and parameters in a piece of chaincode prior to issuing deploys and invocations.  As the name implies, this function should be used to do any initialization to the chaincode, such as configure the initial state of a key/value pair on the ledger.

appshim
An application client used by ordering service nodes to process “broadcast” messages arriving from clients or peers. This shim allows the ordering service to perform membership-related functionality checks. In other words, is a peer or client properly authorized to perform the requested function (e.g. upgrade chaincode or reconfigure channel settings).

osshim
An ordering service client used by the application to process ordering service messages (i.e. “deliver” messages) that are advertised within a channel. 


 
 ",,bmos299,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4yv:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,bmos299,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/17 3:35 AM;markparz;[~muralisr] for the peer section, how about these additions? I wanted to add the committer role as well.
•	Peers - There are two 2 separate runtimes on a single peer – endorser and committer. Both require access to the ledger. In the role of an endorser, a peer executes the request (transaction proposal)through a chaincode installed on a peer (life cycle chaincode). The role of the committer is to write the verified transactions to the ledger. The architecture has been designed such that a peer is always a committer, but not necessarily always an endorser. {color:red}–Define further via use case in the use case section and point to it?{color};;;","18/Feb/17 7:23 AM;joshhus;For the Transaction comment, okay but those additional types are not all performed ""against the ledger"" either, per first sentence. Will figure something out. 

(Note there also isn't one/the ledger anymore. Because we document from the network perspective, there is one ledger per channel.);;;","18/Feb/17 7:40 AM;joshhus;For peer, it's simply a node right, first of all, that subscribes to/belongs to one or more channels. And it gossips with its fellow peers on a channel; it's not only endorsing and committing. Will address. Perhaps that's why [~muralisr] changed ""role"" to ""runtime"" ... ;;;","18/Feb/17 7:47 AM;joshhus;When we get the cross-linking of terms and topics complete, the glossary will improve in usability. For this item, just getting the defs. updated.;;;","18/Feb/17 8:07 AM;joshhus;(For all of these definitions, goal is to keep them simple; we don't need to write the whole doc for the term/concept in the glossary. Will eventually add the links to more / related info.

Proposed Peer definition:

## Peer
A peer is a node that belongs to (subscribes to) one or more network
channels. The main roles performed by peers are endorsing and committing
transactions. A peer always commits valid transactions to its ledger, but
does not necessarily endorse every transaction. To endorse a transaction, the
peer executes the referenced chaincode application, which is installed on
the peer. To commit a transaction, the peer writes the validated transaction  
to its copy of the channel ledger. To remain in sync, peers also broadcast
information across the channel, using the gossip protocol. (See also: Lifecycle
Chaincode, endorsement policy, validation policy, gossip protocol.);;;","18/Feb/17 8:11 AM;joshhus;Hello, 

Moving this discussion to a JIRA issue and linked Gerrit Patch set, FYI.

How do we want to organize the glossary. It's currently partially logical, not entirely, and non-alphabetical. (Potential for retrieval / usability complaints.)

An alphabetical children, by alphabetical parent, method could be done using indentation: e.g.:


Chaincode - definition

indented >     Configuration chaincode: definition
		      Lifecycle chaincode - definition
		      etc. 

Peer - definition
		     Anchor peer: definition
		     Leading peer: definition
		      etc.


(Glossaries are almost never read sequentially in any kind of logical order; they are instead find it, jump to it, repeat.)

Will add this to the JIRA Glossary issue. ;;;","18/Feb/17 8:22 AM;joshhus;Proposed: these would be sub-entries (indented) under the previous general ""Peer"" definition:

Proposed definitions:

### Anchor Peer
(escapes me at the moment, I will come back to it.)

### Leading Peer
Each network member can own multiple peers on a channel. One of these member
peers is designated as the leading peer, which communicates with the ordering
service on behalf of the member peers. The leading peer distributes ordered
transactions to the member peers, for commitment to their replicas of the ledger.
When necessary, an algorithm can be invoked to select the leading peer. ;;;","18/Feb/17 8:24 AM;joshhus;Like the ""Why blockchain"" topic, the ""Blockchain network"" entry is (arguably) too broad/high level to be included in a ""Hyperledger Fabric"" glossary. To be determined ... 

The def. also describes a fabric network more than a ""blockchain"" network - e.g. not all bc networks have endorsers. ... I would delete the term, but not deciding for the community.

(The intro Glossary ""Note"" is arguably contradicted by the subsequent term: 
*Note: This glossary is structured to prioritize new terms and features specific
to architecture.  It makes the assumption that one already possesses a
working familiarity with the basic tenets of blockchain.*)

I deleted the note/added new text, and did the network term edit:

# Hyperledger Fabric Glossary

The glossary includes definitions of terms used in the Hyperledger Fabric 
library, and links to related terms and topics.

## Blockchain Network
A blockchain network consists of, at minimum, one peer
(responsible for endorsing and committing transactions) leveraging an ordering
service, and a membership services component (certificate authority).;;;","18/Feb/17 8:51 AM;joshhus;## Permissioned
Hyperledger Fabric networks are permissioned; all nodes and peers are required 
to maintain a membership identity. End users must also be authorized and authenticated 
through the fabric-CA or an alternative certificate authority plug-in.

(CA applies to only the auth/auth part right - not the membership identity part.);;;","18/Feb/17 10:42 PM;joshhus;For Member discussion - we need to be able to discuss a ""Member"" since we have the concept of Membership. So I think an updated def. of Member is called for here. Participant is more vague, potentially over-inclusive -- risks excluding folks who will participate in the network, but not as a ""Participant"" by our term 

(So let's rephrase this definition, but keep the Member term - my recommendation.) Please weigh in ... 

I will figure out an updated def. of Member. Current def.:

Member- Keith needs to update this definition- does not seem quite right
<ks>I agree that this is confusing. I think we should just use the word ""Participant"" or ""Organization"" and not use ""Member"" for this</ks>
A Member is a participant (such as a company or organization) that operates components - Peers, Orderers, and applications - in the blockchain network. A member is identified by its CA certificate (i.e. a unique enrollment). A Member’s peer will be leveraged by end users in order to perform transaction operations on specific channels;;;","18/Feb/17 11:13 PM;bmos299;What is confusing is what is actually in the community and what is not.  We need to specify if this is new document being written from scratch or an existing document being edited.  For a brand new document, sure, maybe we get it somewhat presentable by work through a Jira item.  Once it is submitted as a patch set, I think from that point forward all edits are done via the patch sets.  I think we (doc team) need to really establish the ground rules to avoid confusion and doc's being updated all over the place.  What do you think?;;;","18/Feb/17 11:34 PM;joshhus;e.g. seems a ""participant"" would have a ""membership identity"" but not be a ""member"" by our defs.;;;","18/Feb/17 11:38 PM;joshhus;[~bmos299] Mark has set this up well in JIRA so that when a writer takes an issue to work, writer changes the Issue to In Progress. Then worked until Done. ... So then anything marked ToDo is open to the community to take. Right any Issue that is edits to an existing doc page include the filename/link to the existing doc in the Issue.;;;","18/Feb/17 11:53 PM;markparz;[~bmos299] it should all be community, maybe I misunderstood your comment... Is there some specific that doesn't look right?;;;","19/Feb/17 12:02 AM;joshhus;End user 

Current and Proposed below:

Current: 
End User
An end user is someone who would interact with the blockchain through a set of published APIs (i.e. the hfc SDK). You can have an admin user who will typically grant permissions to the Member’s components, and a client user, who, upon proper authentication through the admin user, will drive chaincode applications (deploy, invoke, query) on various channels. In the case of self-executing transactions, the application itself can also be thought of as the end user. Remove what is in red

Proposed: 
End User
An end user (person or self-executing application) interacts with the fabric network through an SDK API. For example, an admin end user would manage permissions (using ACL lists) for the specific member-owned components, including the member organization's ordering nodes, peers and chaincode applications. A client end user, with authentication and authorization from an administrator, would deploy chaincode applications to various channel peers. (See also: member.);;;","19/Feb/17 12:33 AM;joshhus;Ordering Service term: current and proposed:

Current:

Ordering Service
A centralized or decentralized (replace this with""Ordering""-- we don't want to go into centralized/decentalized specifically) service that orders transactions in a block. You can select different implementations of the “ordering” function - e.g “solo” for simplicity and testing, Kafka for crash fault tolerance, or sBFT/PBFT for byzantine fault tolerance. You can also develop your own protocol to plug into the service.

Proposed:

(Reviewers note: the ordering service also does some other stuff, this proposed definition is currently limited to the ordering task only - feel free to weigh in on the priority of adding that other stuff here, or perhaps instead for another glossary term.)

Ordering Service
A defined collective of nodes that orders transactions, using a pluggable ordering protocol, and writes them to a discrete block. The specific ordering protocol could be the basic SOLO orderer, the Kafka Crash Fault-Tolerant (CFT) protocol, or a Byzantine Fault-Tolerant (BFT) implementation. (Note that a **consensus** protocol is properly limited to an algorithm, such as PFBT, that manages the consensus messaging problem.) To optimize fabric network performance, security and scalability, no ordering nodes are peers, and no peers are ordering nodes. (See also: block, consensus, leading peer, ordering protocol.) 
;;;","19/Feb/17 12:43 AM;bmos299;I am seeing the doc changes go from email to jira to gerrit...isn't this too much cut and paste of the same changes?  It just seems we make a jira item line to a patch set, have the patch set link to the jira item and make comments in gerrit.  Wouldn't this save a lot of work?  Just my opinion.;;;","19/Feb/17 1:36 AM;joshhus;I suggest that we already have the orderer concept covered, by the ordering service definition / leave it out for now. Feel free to weigh in.

(I don't think the service ""delivers"" the transactions to the member's leading peer (on a channel); technically, the leading peer pulls the ordered transactions. (If that's a valuable distinction to some.)

Current:

Orderer
One of the network entities that form the ordering service. A collection of ordering service nodes (OSNs) will order transactions into blocks according to the network’s chosen ordering implementation. In the case of “solo”, only one OSN is required. Transactions are “broadcast” to orderers, and then “delivered” as blocks to the appropriate channel. (if you mention solo- then you should mention CFTimplementation. I would just remove solo part)

Proposed:

Remove ""Orderer"", as a distinct term/entry, from glossary - ordering nodes are described by the Ordering Service definition, and other term definitions, such as Peer. ;;;","19/Feb/17 2:19 AM;joshhus;Endorser term/def. current and proposed.

(Reviewers: Note this will be located as one of the subentry terms/defs., under the main ""Peer"" term and definition, in Glossary.)

(Question: What determines whether or not an unsigned / not endorsed / i.e. failed endorsement transaction is forwarded to the ordering service? - Is that Lifecycle Chaincode - the current proposed definition below assumes so.) 

Current:

Endorser
A specific peer role, where the Endorser peer is responsible for simulating transactions , and in turn preventing unstable or non-deterministic transactions from passing through the network. (remove what is in red- replace with) and signing the transaction based on the policy set. A transaction is sent to an endorser in the form of a transaction proposal and send the information back to the application layer, which will in turn will send to the orderer All endorsing peers are currently also committing peers (i.e. they write to the ledger).

This actually isn't quite true- you can actually send transactions that don't have a consistent result onto consensus- it will be validated at the comitting peer with VSCC Validated system chain code. We do recommend the application checks this, but I suspect some will go ahead and send to the orderer.

Proposed: 

(a sub-entry under the ""Peer"" term/def. umbrella):

### Endorsing Peer
An endorsing peer receives a transaction proposal (request) from the **SDK** and executes the transaction. The endorsing peer then applies the channel **endorsement policy** to the transaction results, to either endorse (sign) the transaction, or not. The endorsing peer then returns the transaction results,
signed or unsigned, to the SDK. The SDK then forwards signed (endorsed) transactions to the **ordering service**; **Lifecycle Chaincode** for the channel dictates whether or not the SDK also forwards unsigned transactions for ordering. Depending on the endorsement policy, all peers on a channel may or may not be 
endorsing peers for any specific transaction proposal. (See also: deterministic chaincode, endorsement policy, Lifecycle Chaincode, SDK.);;;","19/Feb/17 2:31 AM;joshhus;[~bmos299] That wouldn't save work for this long/debated item - the current method saves work, my opinion, by facilitating ongoing review / debate in JIRA, in a single place/version, while I continue work the remaining terms. Avoids me pushing, and reviewers managing, many multiple patch sets. ... For this doc item anyway - lots of items (glossary), lots of comments and input and Q&As, this method is working.
https://jira.hyperledger.org/browse/FAB-2288?focusedCommentId=21011&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-21011

If you guys disagree I can push a patch set to Gerrit, though do all reviewers use it? I'm still using email also, because of the color-coding of the comments. - color not preserved in JIRA.;;;","19/Feb/17 4:16 AM;joshhus;""Committer"" term/def. current and proposed:

Current:

Committer
A specific peer role, where the Committing peer appends the validated transactions to the channel-specific ledger. If the read/write set is not the same across peers, the transaction will be rejected. A peer can act as both an endorser and committer, but in more regulated circumstances might only serve as a committer. 

Proposed:

Committing Peer
A committing peer validates ordered blocks of transactions and commits (appends) the blocks to its replica of the channel ledger. All peers, including endorsing peers, are committing peers, because all peers maintain one or more ledgers (one ledger per channel). Committing peers also mark each transaction in the ordered block as valid or invalid, by applying the **validation policy** for the channel. (See also: ledger, Lifecycle Chaincode, validation policy.);;;","19/Feb/17 5:25 AM;joshhus;""Bootstrap"" current and proposed:

For this one I'll do Proposed first:

Proposed:  

(Review comment: this def. needs to be refined/limited to an HL fabric bootstrap. Fabric
network ""setup"" and ""installation"" are separate topics. ""bootstrap"" has specific  
implications in IT generally; bringing networked nodes online without fully
re-booting all OS-es in a network, I believe is the general idea.)
(Gerrit patch coming soon). ) 

Current: 

Bootstrap
The initial setup of a network. There is the bootstrap of a peer network, during which policies, system chaincodes, and cryptographic materials (certs) are disseminated amongst participants, and the bootstrap of an ordering network. The bootstrap of the ordering network must precede the bootstrap of the peer network, as a peer network is contingent upon the presence of an ordering service. A network need only be “bootstrapped” once.

Side notes:

Bootstrapping the network requires creating the network, creating/viewing multiple channels, setting up policies of network, setting up policies for channels, inviting participants to the network and setting up access control on the participants. You do have to have a CA and in that case you need to enroll id, passwords and certificates for applications and peers.

May want to rephrase your bootstrap section as a result of this information-- ;;;","19/Feb/17 6:00 AM;joshhus;Block: current and proposed.

(Reviewer note: to answer the comment below, there are valid and invalid transactions, and they are marked as such in the ledger, in non-hashed, queryable data. ... If the objection is that this invalid designation is not part of the hashed ""block"", proper, that's true I believe; but an invalid transaction is still written to the ledger, as hashed Tx. ... Seems we should add an term. and definition for an ""invalid transaction"" - one that fails the validation policy for the channel. What else - one that could get sent for ordering / inclusion even though no peers ""endorsed"" it? Would all of these not-endorsed transactions subsequently also fail the validation policy, always? I guess so. Will attempt an invalid transaction entry and definition, Please weigh in.) ... (And I'll add my questions/comments as such to the Gerrit patch set.)

p.s. I was instructed to dump ""batch"" as a term for v1.0.

p.p.s. Need confirmation that it is the ""Lifecycle Chaincode"" that determines when a block is ""done"" / no new TX - e.g. This could be after x number of Tx in block, and/or after x amount of time without a new Tx added to block, etc. 

Current:

Block
A batch of ordered transactions, potentially containing ones of an invalid nature, that is delivered to the peers for validation and committal.

I do not know why you think there are transactions that are invalid- I would remove this.

Proposed:

Block: 
A block is a self-contained unit of a number of ordered transactions, which is eventually written to the channel ledger. Like each transaction within a block, each block is also cryptographically-linked by a series of unique hashtags. Lifecycle Chaincode determines when a block gets ordered and signed, by the ordering service, and broadcast to the channel leading peer. Committing peers then run the validation policy against the ordered block, mark transactions as valid or invalid (in non-hashed data for query), and commit (append) the block to the ledger.
;;;","19/Feb/17 6:18 AM;joshhus;System Chain and System Chaincode. Current only:

System chain (have Murali verify this definition and the one immediate below)
Contains a configuration block defining the network at a system level.
The system chain lives within the ordering service, and similar to a channel, has an initial configuration containing information such as: root certificates for participating organizations and ordering service nodes, policies, listening address for OSN, and configuration details. Any change to the overall network (e.g. a new org joining or a new OSN being added) will result in a new configuration block being added to the system chain.

The system chain can be thought of as the common binding for a channel or group of channels. For instance, a collection of financial institutions may form a consortium (represented through the system chain), and then proceed to create channels relative to their aligned and varying business agendas.

System Chaincode
System Chaincode (SCC) is a chaincode built with the peer and run in the same process as the peer. SCC is responsible for broader configurations of fabric behavior, such as timing and naming services.;;;","19/Feb/17 6:25 AM;joshhus;Channel: Current and Proposed:

Current:

Channel
A Channel is formed as an offshoot of the system chain; and best thought of as a “topic” for peers to subscribe to, or rather, a subset of a broader blockchain network. A peer may subscribe on various channels and can only access the transactions on the subscribed channels. Each channel will have a unique ledger, thus accommodating confidentiality and execution of multilateral contracts.

I like this better:

With a network created by peers, there are some use cases where some of the transactions may only go to specific peers. Channels allows you to create a topic for a subset of peers. As an example, Network has a, b,c, d participants. A channel can be created that the transactions can only be seen by a,b,and c, whereby participant d does not see the transaction or the ledger. 


Proposed: (don't know yet if anchor is correct here)

A channel is a private line of communication between two or more specific network members, for the purpose of conducting private and confidential transactions. A channel is defined by an anchor peer for each member, the shared ledger, chaincode applications and the ordering service nodes. Each transaction on the network is executed on a channel, where each party must be authenticated and authorized to transact on that channel. Although any one anchor peer can belong to multiple channels, and therefore maintain multiple ledgers, no ledger data can pass from one channel to another.;;;","19/Feb/17 7:58 AM;joshhus;Dynamic Membership: Current and Proposed:

Current:

Dynamic membership
he fabric will allow for endorsers and committers to come and go based on membership, and the blockchain network will continue to operate. Dynamic membership is critical when businesses grow and members need to be added or removed for various reasons.

You are missing a T in The up in the beginning

Proposed:

I would delete from glossary, or fix the term and definition - membership at the org. level exists. and then for peers we have members of members? we can't really say we have members of members with a straight face. so this could be dynamic something, but not dynamic ""membership"". ;;;","19/Feb/17 8:36 AM;joshhus;Query Current and Proposed:

(Note Proposed now sounds like we recommend Couch over Level, if that's what we want to do.)

Current:

Query/Non-Key Value Query
using couchDB 2.0 you now have the capability to leverage an API to perform more complex queries against combinations of variables, including time ranges, transaction types, users, etc.  This feature allows for auditors and regulators to aggregate and mine large chunks of data.

Capitlize ""u"" in Using. Remove ""2.0"" we can get into that later into the documentation.

Start with ""There are two ledgers that are currently implemented in fabric by default- level DB and CouchDB.  Users can also plug in their own ledger as a pluggable component. Using,...""""

Proposed: 

## Query
The fabric provides two ledger database programs to choose from: LevelDB and CouchDB. Alternative pluggable database programs are also supported. CouchDB leverages an API for performing queries against multiple variables, including time ranges, transaction types and user names. This complex query feature allows authorized users, including auditors and regulators, to aggregate and mine large chunks of data from the ledger.
  ;;;","19/Feb/17 8:46 AM;joshhus;New addition: Gossip Protocol: 

Proposed:

## Gossip Protocol
The gossip data dissemination protocol performs three functions on a fabric network: 1) manages peer discovery and channel membership; 2) disseminates ledger data across all peers on the channel; and 3) syncs ledger state across all peers on the channel. Gossip broadcasting operates by peers receiving
messages from other peers on the channel, and then forwarding these messages to randomly-selected peers. This cycle continually repeats, with the result of channel membership, ledger and state information being kept current and in sync.;;;","19/Feb/17 9:18 AM;joshhus;Endorsement System Chaincode: Current and Proposed:

(Review Question here: does ESCC manage both whether or not a peer signs the transaction, and also whether or not an unsigned transaction is forwarded by the SDK to the orderer? -- Or is the latter lifecycle chaincode. I think some of the percentage/numbers stuff in the ""current"" text is instead lifecycle chaincode,  that controls forwarding (or not) to the ordering service.) 

Current:

Endorsement System Chaincode
Endorsement System Chaincode (ESCC) is a system chaincode that andles the endorsement policy for specific pieces of chaincode deployed on a network, and defines the necessary parameters (percentage or combination of signatures from endorsing peers) for a transaction proposal to receive a successful proposal response (i.e. endorsement). Deployments and invocations of user chaincodes both require a corresponding ESCC, which is defined at the time of the deployment transaction proposal for the user chaincode.

andles- needs to change to handles

Proposed: 

## Endorsement System Chaincode
Endorsement System Chaincode (ESCC) defines the transaction **endorsement policy**  for each specific chaincode application. Following transaction execution, each endorsing peer applies the endorsement policy for the invoked chaincode application. Each endorsing peer then either signs (endorses) its transaction results, or does not sign, based on the endorsement policy, and returns its results to the SDK. (See also: Lifecycle Chaincode.)
;;;","19/Feb/17 9:25 AM;joshhus;Endorsement Policy. Current and Proposed.

Keeping this Proposed text short b/c we have it pretty much covered already by the previous ESCC definition.

Current:

Endorsement policy
A blockchain network must establish rules that govern the endorsement (or not) of proposed, simulated transactions. This endorsement policy could require that a transaction be endorsed by a minimum number of endorsing peers, a minimum percentage of endorsing peers, or by all endorsing peers that are assigned to a specific chaincode application. Policies can be curated based on the application and the desired level of resilience against misbehavior (deliberate or not) by the endorsing peers. A distinct endorsement policy for deploy transactions, which install new chaincode, is also required.

Endorsements that are required to run a transaction for a chaincode will be validated by the orderer. (ie it will make sure all signatures were obtained before sending to committer)

Proposed: 
## Endorsement Policy
The endorsement policy for a chaincode application determines whether or not an endorsing peer signs (endorses) a specific transaction proposal, or not. (See also: Endorsement System Chaincode.);;;","19/Feb/17 10:02 AM;joshhus;Proposal and Deploy: Current and Proposed.

(Are we saying ""deploy"" is to be replaced now, everywhere, with install or instantiate? That's a big hit to the library.)

(A ""configuration request"" is just an invoke of system chaincode, right. It's an invoke.)

Current: 

Proposal
A transaction request sent from a client or admin user to one or more peers in a network; examples include deploy, invoke, query, or configuration request. (you should take out deploy- we have install/instantiate chaincode now)

Proposed:

Proposal:
A proposal is a transaction request sent from the SDK to a channel for endorsement. Each proposal is either a deploy/install/instantiate, invoke or query request. The term *proposal* is used to indicate that execution of a transaction does not guarantee that the transaction will be appended to the ledger. (See also: endorsing peer.)


(Deploy is marked for deletion it seems. Or change to install/instantiate.) 

Deploy (this should be removed)
Refers to the function through which chaincode applications are deployed on chain. A deploy is first sent from the client SDK or CLI to a Lifecycle System Chaincode in the form of a proposal.;;;","19/Feb/17 11:30 PM;joshhus;Membership Services and MSP:

Current:

Membership Services (keith to validate the following two definitions)
Membership Services manages user identities on a permissioned blockchain network; this function is implemented through the fabric-ca component.  fabric-ca is comprised of a client and server, and handles the distribution and revocation of enrollment materials (certificates), which serve to identify and authenticate users on a network

The in-line MembershipSrvc code (MSP) runs on the peers themselves, and is used by the peer when authenticating transaction processing results, and by the client to verify/authenticate transactions. Membership Services provides a distinction of roles by combining elements of Public Key Infrastructure (PKI) and decentralization (consensus). By contrast, non-permissioned networks do not provide member-specific authority or a distinction of roles.

A permissioned blockchain requires entities to register for long-term identity credentials (Enrollment Certificates), which can be distinguished according to entity type. For users, an Enrollment Certificate authorizes the Transaction Certificate Authority (TCA) to issue pseudonymous credentials; these certificates authorize transactions submitted by the user. Transaction certificates persist on the blockchain, and enable authorized auditors to associate, and identify the transacting parties for otherwise un-linkable transactions.

<ks> I would write this section as follows ...
Membership Services authenticates, authorizes, and manages identities on a permissioned blockchain network.

The membership services code that runs in peers and orderers both authenticates and authorizes blockchain operations.  It is a PKI-based implementation of the Membership Services Provider (MSP) abstraction.
The fabric-ca component is an implementation of membership services to manage identities.  In particular, it handles the issuance and revocation of enrollment certificates and transaction certificates.

An enrollment certificate is a long-term identity credential; a transaction certificate is a short-term identity credential which is both anonymous and un-linkable.

</ks> 
Membership Service Provider
The Membership Service Provider (MSP) refers to an abstract component of the system that provides (anonymous) <ks> Remove ""(anonymous)"" as MSP says nothing about anonymity.  This is implemented by fabric-ca.</ks> credentials to clients, and peers for them to participate in a Hyperledger/fabric network. Clients use these credentials to authenticate their transactions, and peers use these credentials to authenticate transaction processing results (endorsements). While strongly connected to the transaction processing components of the systems, this interface aims to have membership services components defined, in such a way that alternate implementations of this can be smoothly plugged in without modifying the core of transaction processing components of the system.

Proposed:

## Membership Services
Membership services authenticates, authorizes, and manages identities on a
permissioned blockchain network. (All Hyperledger Fabric networks are 
permissioned.) The membership services code that runs in peers and ordering nodes
both authenticates and authorizes blockchain operations. It is a PKI-based
implementation of the Membership Services Provider (MSP) abstraction. The
`fabric-ca` component is an implementation of membership services for managing
identities. In particular, `fabric-ca` issues and revokes enrollment certificates
(eCerts) and transaction certificates (tCerts). eCerts are long-term identity
credentials; tCerts are short-term identity credentials, which are both anonymous
and unlinkable.

## Membership Service Provider
The Membership Service Provider (MSP) is an abstract system component that provides
credentials to clients and peers. Credentials are used by clients to authenticate
transactions, and by peers to authenticate (endorse) transaction results. The
MSP supports pluggable implementations of the Membership Services component,
without requiring any modification of core transaction processing components.

(EOF) 
;;;",,,,,,,,
Modeling concepts & descriptions,FAB-2289,14851,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,markparz,markparz,markparz,17/Feb/17 4:45 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Apr/17 12:32 AM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"We need to describe at a high level how Fabric accomplishes work such as transactions and security.

Nick/Josh,

Here is my feedback on transaction data model.  I honestly think the section would really be called data model possibly- not transaction data model.. .There are transactions and transaction flow... and there is data model. Outlining what is the data on the immutable ledger is quite important.  So, I walked away thinking the structure and what it covers doesn't feel quite right to me for transaction data model and hard to follow the way it starts out.  If I were to lay out topics in this section, I would do the following (see in bold with comments behind each):
(I think you can use the material you have also written, but i think there is more to do here)

- what is the model of the data: You define the data as Assets and Asset Registries is the data to be stored and exchanged across the business network.. This is NOT crypto currency only.. you can trade money if you define the asset as money, if asset is pianos that move around the world,.. .  Now one can do UTXO mode which has a particular format (ie entry is spent/not spent,.. it must add up every time in a transaction-Chris Ferris should comment  here on how he likes to define this here)

- The ledger : it is immutable, it is read/write sets that are signed transactions.  Ledger can be shared across all in the network, or you can have ledgers that are only for a set of participants (relating to channel). We should probably mention here that if you want to encrypt your payload- you can and what ""encrypt this"" means. (ie is it SHA0-256,etc,.?)

The Hyperledger-fabric data model allows for (here's where I would include bullet points in no great order at this point)
-properties (things like immutable, it's file based,.)
- all the things actually on the ledger in detail: configuration block on the ledger, read/write set,etc,.
- transactions are ordered coming from consensus
- how couchdb level db are related to it
- what goes on the ledger is validated (ie goes through VSCC, but explain in human layman terms) pointing to below section
- ask chris what else to ask here

Chaincode-Here is explanation  of chaincode related to data model-- What is put on the ledger is enforced by chaincode which has a series of transactions.  the Transaction is proposed to move asset a from bank 1 to bank 2.  Maybe defining this at a high level as it relates to the data model.

PArticipants
I think you do need to describe here who can access what data, based on being a permissioned network.

Transactions

Transactions are used to read and write to the ledger and going through the actual flow of transaction proosal, send to orderer, get an event to validate what's on the ledger or a failure of transaction going onto the block (be careful how i've identified events here)
This is where you go through the transaction flow, particularly explaining transaction ordering and transaction validation
",,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4z3:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/17 1:03 AM;markparz;Transaction model is good, need to review fabric model;;;","13/Apr/17 3:22 AM;ChristopherFerris;link to CR? Or, is this Done?;;;","23/Apr/17 10:48 PM;ChristopherFerris;[~markparz] is this still needed? done? in progress?;;;","26/Apr/17 12:32 AM;markparz;No, this is complete.. updated in the models, and glossary address the comments. closing;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Description of channels at a high level,FAB-2290,14852,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,markparz,markparz,17/Feb/17 4:49 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,17/Apr/17 9:24 PM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,High level description of what channels are and why they are a key differentator in Fabric,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4zb:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Feb/17 5:19 AM;joshhus;Dup, perhaps: 
https://jira.hyperledger.org/browse/FAB-2274;;;","18/Feb/17 12:26 AM;markparz;For Channels:

I am not sure pointing to the design documentation is wise. Some of these documents are out of date.

Also, i think it would be helpful to have an example. People struggle uwithout an example. Show them a picture (which seems to work with people).

Bank A Bank B Bank C
channel 1 yes yes no
channel 2 no yes yes
channel 3 yes no yes
channel 4 yes yes yes

yes means they are on cahnnel
no means they are not on channel

In this example, we need to explain that Bank A and Bank B can be endorsers as well as comitters for channel 1.
Bank C can not see the # of transactions... and they can't see the data on the ledger

The reason why I included channel 4 is included is some people think you can't have all participants in a channel- which you can.;;;","18/Feb/17 12:27 AM;markparz;https://gerrit.hyperledger.org/r/#/c/6017/;;;","13/Apr/17 3:24 AM;ChristopherFerris;that CR is very dated and was never merged. I will convert to rst and resubmit.;;;","13/Apr/17 3:31 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7985/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Overview of Chaincode,FAB-2291,14853,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,markparz,markparz,17/Feb/17 4:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Jun/17 4:05 AM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,Need a high level overview of what chaincode is and how it relates to Smart Contracts,,beauson45,binhn,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4518,,,,,,,,FAB-4020,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4xz:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,beauson45,binhn,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 3:19 AM;ChristopherFerris;[~ibm.hlfab.aha.jira] who has this?;;;","21/Apr/17 6:35 AM;markparz;Nick said he wanted it;;;","12/May/17 7:29 AM;binhn;https://gerrit.hyperledger.org/r/#/c/9263/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Discuss consensus/non-determinism and how fabric handles this avoidance,FAB-2292,14854,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,markparz,markparz,17/Feb/17 4:54 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,18/Apr/17 1:10 AM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,Discuss how the Fabric prevents non-deterministic code via the different checks and balances.,,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4y7:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/17 6:02 AM;markparz;[~nickgaski] how about this for consensus... I couldn't find you patch set in gerrit..

In distributed ledger technology, consensus has recently become synonymous with a specific algorithm, in a single function.  However, consensus is much more and in Hyperledger Fabric v1 consensus shows this differentiation and broad scope, and true meaning of what consensus. In a nutshell, v1 defines, consensus as the verification of the correctness of a set of transactions constituting a block. To achieve consensus it means agreement on the order and result of the transaction has occurred via a number of checks and balances through the lifecycle of any given transaction, from endorsement to commitment. These checks and balances include ESCC to verify that the endorsers agree this transaction is valid at a particular point in time. Proper orders of the transactions, and validation to avoid a double spend. MVCC & VSCC, before committing a block of transactions to the ledger, validate the results and signatures are in place, which are required from the endorsers. 

For more term definition see the glossary (link) or technical description (link to flow)
;;;","13/Apr/17 3:20 AM;ChristopherFerris;aside from grammar, looks like a good start [~nickgaski];;;","18/Apr/17 1:10 AM;nickgaski;closing.  we bundled this info (with better grammar!) into the fabric model section;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Demos - add marbles, car lease, commercial paper, and art auction",FAB-2293,14855,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,nickgaski,nickgaski,17/Feb/17 4:55 AM,21/Jul/18 4:09 AM,28/Oct/23 2:58 AM,06/Jul/18 9:46 PM,,,,,,,,fabric-peer,,,,0,Documentation,help-wanted,node-SDK,v1.0,,,,"need to port demos and make compatible with v1 code base, and document how to use
prioritized in order: marbles, art auction, car lease, commercial paper ",,kenmazsyma,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,576000,576000,,0%,576000,576000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-2,,Add Demos to v1 documentation,To Do,,,Unset,,,,"1|hzxcfr:",,,,Unset,Unset,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,kenmazsyma,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document marbles demo against v1 architecture ,FAB-2294,14856,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,nickgaski,nickgaski,17/Feb/17 4:59 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,08/Aug/17 2:14 AM,,,,,Future,WON'T FIX,,fabric-peer,,,,0,Documentation,help-wanted,node-SDK,v1.0,,,,convert marbles code and document instructions to function against v1 network and new code base,,ChristopherFerris,markparz,nickgaski,rmohta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2293,,,,,,,,,"1|hzxanj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,markparz,nickgaski,rmohta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/17 1:56 PM;rmohta;[~nickgaski] I have started working on this. Can you please confirm if the updates to the code should be pushed to https://github.com/IBM-Blockchain/marbles or some other repo? ;;;","26/Apr/17 1:54 AM;markparz;Hi Rohit..Are you working on the document or something else? There is a item waiting to be merged here https://gerrit.hyperledger.org/r/#/c/7997/ check it out and make comments on this if you see something wrong. ;;;","26/Apr/17 11:39 AM;rmohta;[~markparz] I am working on the same. I'll try your setup now and let you know how it goes;;;","26/Apr/17 1:53 PM;rmohta;[~markparz] steps mentioned in your commit is good. I will edit my commits to reflect your document on how to setup Marbles v3 locally and test them. This is for https://github.com/IBM-Blockchain/marbles. 

PR to IBM-Blockchain: https://github.com/IBM-Blockchain/marbles/pull/93
If [~nickgaski] and [~markparz] are OK, I can update the documentation with the content from the rst file in gerrit change set.;;;","08/Aug/17 2:15 AM;ChristopherFerris;Closing this. IBM published this and Marbles is still an ibm-blockchain repo. If Marbles is contributed as a sample app, then we can reconsider.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Minor fixes to configtx/template,FAB-2295,14857,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,17/Feb/17 4:59 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,18/Feb/17 3:56 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"1. Remove confusing comment on `NewChainCreationTemplate`.
2. Add comments to exported variables.
3. Extend test so that it checks policy name.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxl93:",,,,Unset,,Sprint 12 - consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Feb/17 5:12 AM;kchristidis;https://gerrit.hyperledger.org/r/6107;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Latest ""Overview"" topic",FAB-2296,14858,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,joshhus,joshhus,17/Feb/17 5:01 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,23/Apr/17 10:53 PM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"https://gerrit.hyperledger.org/r/#/c/6109/2/docs/overview.md

Overview topic feedback, from email:

For bullets:

- HSM is really important to mention- it is a diffentiators
- the fact we have different SDKs (ie Java SDK, Nodejs, Python)
-Access control on who can query or submit transactions 
- able to update chaincode (version control)

",,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/17 4:05 AM;joshhus;overviewALT.md;https://jira.hyperledger.org/secure/attachment/10635/overviewALT.md","30/Mar/17 4:05 AM;joshhus;overview_current.rst;https://jira.hyperledger.org/secure/attachment/10633/overview_current.rst","30/Mar/17 4:05 AM;joshhus;overview_long.md;https://jira.hyperledger.org/secure/attachment/10634/overview_long.md",,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4zr:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 1:04 AM;markparz;Been redone a few times, need to verify we have the latest out there.;;;","30/Mar/17 4:05 AM;joshhus;Okay after researching the patch set and merge conflicts etc. here's what I've found:

There were originally two versions of this overview topic, a longer one and a shorter one (attached, in the earlier .md RTD format). 
While those were being worked / debated / reviewed, a third, newer overview.rst topic took precedence, and is now published at: http://fabric-rtd.readthedocs.io/en/latest/overview.html 

;;;","30/Mar/17 4:09 AM;joshhus;If either of the earlier versions (2 .md files attached) are desired, the selected one could be renamed and published and added to TOC, as a ""Functional summary"" or some new name. ... Or, perhaps merged in with the newer overview.rst file/topic.;;;","30/Mar/17 4:25 AM;joshhus;Once a direction is chosen, we can work in the bullets posted above, if / where appropriate:

#     HSM is really important to mention- it is a diffentiators
#     the fact we have different SDKs (ie Java SDK, Nodejs, Python)
        -Access control on who can query or submit transactions
#     able to update chaincode (version control)
;;;","15/Apr/17 12:55 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8045/;;;","16/Apr/17 12:00 AM;ChristopherFerris;needed to fix formatting. https://gerrit.hyperledger.org/r/#/c/8069/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document art auction against v1 architecture ,FAB-2297,14859,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,movee2005,nickgaski,nickgaski,17/Feb/17 5:03 AM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,20/Jul/18 11:05 PM,,,,,,,,fabric-docs,,,,0,Documentation,help-wanted,node-SDK,v1.0,,,,convert art auction code and document instructions to function against v1 network and new code base,,bmos299,ChristopherFerris,joe-alewine,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2293,,,,,,,,,"1|hzx52n:",,,,Unset,,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,joe-alewine,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:15 AM;ChristopherFerris;are we contributing art auction to Hyperledger? If not, this does not belong in this JIRA. [~bmos299] [~ibm.hlfab.aha.jira];;;","14/Apr/17 12:05 AM;bmos299;The application has been ported to 1.0.  I think we just need to add some documentation around it.  What do you think [~ibmmark] [~nickgaski]?;;;","23/Apr/17 10:41 PM;ChristopherFerris;Is IT People contributing art auction to Hyperledger? If not, please close this as not a Hyperledger story;;;","08/Aug/17 2:13 AM;ChristopherFerris;What is the status of this? [~Clayton Sims] maybe you can track down whether IT People plan to contribute art auction as a sample app?;;;","23/Mar/18 7:24 AM;joe-alewine;This appears abandoned. Closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document Marbles against v1 architecture ,FAB-2298,14860,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,nickgaski,nickgaski,17/Feb/17 5:04 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,26/Apr/17 1:59 AM,,,,,DUPLICATE,,,fabric-peer,,,,0,Documentation,help-wanted,node-SDK,v1.0,,,,convert marbles and document instructions to function against v1 network and new code base,,bmos299,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,432000,432000,,0%,432000,432000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2293,,,,,,,,,"1|hzxan3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:09 AM;ChristopherFerris;Are we contributing car lease sample? If not this doesn't belong here. [~bmos299];;;","13/Apr/17 11:59 PM;bmos299;[~ChristopherFerris] modified for the support for marbles instead of car lease.  I now [~nickgaski] is working on the conversation. ;;;","26/Apr/17 1:42 AM;markparz;Nick completed this... needs to be reviewed;;;","26/Apr/17 1:59 AM;markparz;closing this as a dupe of FAB-2294;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document commercial paper against v1 architecture,FAB-2299,14861,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,nickgaski,nickgaski,17/Feb/17 5:05 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,18/Jun/17 12:49 PM,,,,,Future,,,fabric-peer,,,,0,Documentation,help-wanted,node-SDK,v1.0,,,,convert CP code and document instructions to function against v1 network and new code base,,ChristopherFerris,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,432000,432000,,0%,432000,432000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2293,,,,,,,,,"1|hzxanb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/17 12:49 PM;ChristopherFerris;closing this as irrelevant CP is not a Hyperledger sample;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Tutorials - writing chaincode, api explanations, docker compose, developer videos",FAB-2300,14862,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,nickgaski,nickgaski,17/Feb/17 5:29 AM,21/Jul/18 4:09 AM,28/Oct/23 2:58 AM,06/Jul/18 9:33 PM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"learn chaincode for v1 - with explanation of apis
docker compose examples with different networks and configs
youtube videos and links
fabric-ca",,ChristopherFerris,nickgaski,petroccoC,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-4,,Tutorials for v1,To Do,,,Unset,,,,"1|hzx4zz:",,,,Unset,Unset,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,nickgaski,petroccoC,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jul/18 9:33 PM;ChristopherFerris;This is already done;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Learn chaincode v1,FAB-2301,14863,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,barath.oct@gmail.com,nickgaski,nickgaski,17/Feb/17 5:37 AM,31/Jul/19 12:53 PM,28/Oct/23 2:58 AM,31/Jul/19 12:53 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"end to end example of go code showing a wide array of the available apis, methods and functions
 
Barath to work on this ",,barath.oct@gmail.com,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,432000,432000,,0%,432000,432000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2300,,,,,,,,,"1|hzxl9b:",,,,Unset,,Sprint 12 - Documentation,,,,,,,,,,,,,Unset,,,,,,,,,,,barath.oct@gmail.com,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Docker-compose configurations,FAB-2302,14864,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,nickgaski,nickgaski,17/Feb/17 5:39 AM,30/Jul/19 12:54 PM,28/Oct/23 2:58 AM,30/Jul/19 12:54 PM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"various docker-compose scenarios showing different network configs
and manipulation of environment variables ",,mastersingh24,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,432000,432000,,0%,432000,432000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2300,,,,,,,,,"1|hzx7cv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jul/19 12:54 PM;mastersingh24;not the direction we are headed;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Developer videos,FAB-2303,14865,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,markparz,nickgaski,nickgaski,17/Feb/17 5:40 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,26/Apr/17 1:38 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,Links to Hyperledger Fabric youtube channel ,,markparz,nickgaski,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2300,,,,,,,,,"1|hzx7db:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,markparz,nickgaski,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 1:38 AM;markparz;Done;;;","14/Jun/17 12:41 AM;zamrokk;Where can we watch these videos ?  Thanks;;;","14/Jun/17 3:46 AM;markparz;hi [~zamrokk] https://www.youtube.com/channel/UCCFdgCWH_1vCndMPVqQlwZw;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Why Fabric? doc topic,FAB-2304,14866,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,nickgaski,joshhus,joshhus,17/Feb/17 5:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,23/Apr/17 10:49 PM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"Here is my feedback on what i saw so far

Points I did not see

- Permissioned networks also allow for certain scenarios involving where you don't want anyone to see the asset transactions. As an example say Bank a and Bank b want to trade assets-- The number of transactions and the value of the asset or what that asset is is not something you want John Smith to see. (1st paragraph)

- while stated implicitly, I think we need to say Channels allows for clear data partioning for confidentiality.

This wasn't the original why fabric- but wanted to get my point in.

http://fabric-rtd.readthedocs.io/en/latest/whyfabric/

Why Hyperledger Fabric?

The Hyperledger Fabric project is delivering a blockchain platform designed to allow the exchange of an asset or the state of an asset to be consented upon, maintained, and viewed by all parties in a permissioned group. A key characteristic of Hyperledger Fabric is that the asset is defined digitally, with all participants simply agreeing on its representation/characterization. As such, Hyperledger Fabric can support a broad range of asset types; ranging from the tangible (real estate and hardware) to the intangible (contracts and intellectual property).

The technology is based on a standard blockchain concept - a shared, replicated ledger. However, Hyperledger Fabric is based on a permissioned network, meaning all participants are required to be authenticated in order to participate and transact on the blockchain. Moreover, these identities can be used to govern certain levels of access control (e.g. this user can read the ledger, but cannot exchange or transfer assets). This dependence on identity is a great advantage in that varying consensus algorithms (e.g. byzantine or crash fault tolerant) can be implemented in place of the more compute-intensive Proof-of-Work and Proof-of-Stake varieties. As a result, permissioned networks tend to provide higher transaction throughput rates and performance.

Once an organization is granted access to the blockchain network, it then has the ability to create and maintain a private channel with other specified members. For example, let’s assume there are four organizations trading jewels. They may decide to use Hyperledger Fabric because they trust each other, but not to an unconditional extent. They can all agree on the business logic for trading the jewels, and can all maintain a global ledger to view the current state of their jewel market (call this the consortium channel). Additionally, two or more of these organizations might decide to form an alternate private blockchain for a certain exchange that they want to keep confidential (e.g. price X for quantity Y of asset Z). They can perform this trade without affecting their broader consortium channel, or, if desired, this private channel can broadcast some level of reference data to their consortium channel.

This is powerful! This provides for great flexibility and potent capabilities, along with the interoperability of multiple blockchain ledgers within one consortium. This is the first of its kind and allows organizations to curate Hyperledger Fabric to support the myriad use cases for different businesses and industries. Hyperledger Fabric has already been successfully implemented in the banking, finance, and retail industries.

We welcome you to the Hyperledger Fabric community and are keen to learn of your architectural and business requirements, and help determine how Hyperledger Fabric can be leveraged to support your use cases.
",,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx507:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/17 4:07 AM;markparz;We should also start out by describing what the problem is and how fabric resolves: 

Early blockchain technology serves a set of purposes but is often not well-suited for the needs of specific industries, especially Enterprise business. Some of these needs include better transaction processing speed, identity without transparency, security and more. To meet the demands of modern markets, the fabric is created as flexible platform, based on an industry-focused design that addresses the multiple and varied requirements of specific industry use cases, extending the learning of the pioneers in this field while also addressing issues such as scalability. The fabric provides a new approach to enable permissioned networks, privacy, and confidentially as a blockchain network.

;;;","18/Feb/17 4:11 AM;markparz;The above might be a better overview and we have a bullet list of items the fabric does... let's talk to [~johnwolpert] [~jwolpert] on this one, he has some thoughts.;;;","13/Apr/17 3:33 AM;ChristopherFerris;this is merged, but not linked into the docs.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Why Blockchain? doc topic,FAB-2305,14867,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,joshhus,joshhus,17/Feb/17 5:46 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Apr/17 3:34 AM,,,,,WON'T FIX,,,fabric-docs,,,,0,Documentation,,,,,,,"https://gerrit.hyperledger.org/r/#/c/4999/

There's disagreement as to whether this topic is too high level to belong in a 
""Why Hyperledger Fabric"" doc library.",,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx50f:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/17 5:32 AM;markparz;This should be a HL project why topic and is something on the whitepaper workgroup mission;;;","31/Mar/17 12:05 AM;joshhus;Okay, I'm not personally on that HL workgroup - how to facilitate that publication. And/or pub at the HL Project level? 
Alternatively, or also, possibly a devworks blog article. ? ;;;","04/Apr/17 1:28 AM;markparz;Check out this link: 
https://wiki.hyperledger.org/groups/whitepaper/whitepaper-wg

Ping Mic on Rocket, he is leading the effort if I recall.;;;","13/Apr/17 3:34 AM;ChristopherFerris;closing this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"admin operations, ordering service configs , best practices",FAB-2306,14868,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,nickgaski,nickgaski,17/Feb/17 5:49 AM,25/Sep/19 4:06 PM,28/Oct/23 2:58 AM,06/Jul/18 9:53 PM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,Contains the pertinent information for a sys admin starting and configuring a network ,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,432000,432000,,0%,432000,432000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-6,,Network Configuration ,To Do,,,Unset,,,,"1|hzx50v:",,,,Unset,Unset,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Administration and Operations,FAB-2307,14869,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,nickgaski,nickgaski,17/Feb/17 5:52 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,20/Jul/18 11:06 PM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"sys admin info for generating and uploading certs, determining and defining policies ",,bmkor,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,FAB-2309,FAB-2310,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2306,,,,,,,,,"1|hzx7bz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmkor,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Governance/hosting location/Ledger parts in planning guide,FAB-2308,14870,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,markparz,nickgaski,nickgaski,17/Feb/17 5:53 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,20/Jul/18 11:05 PM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"Documentation to discuss specific sections in a planning guide, there will be many pieces. This particular story will start with :

 

Overview

Governance

Hosting location

Ledger",,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,FAB-2309,FAB-2310,FAB-3774,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3774,,,,,,,,,"1|hzx333:",,,,Unset,,Sprint 17 - Documentation,,,,,,,,,,,,,Unset,,,,,,,,,,,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 1:37 AM;markparz;Working on this... have some documentation that Joe is looking over as it's sort of scattered and we need to map to right spots before committing;;;","10/May/17 10:45 PM;markparz;This is a work in progress, putting piece by piece in current Gerrit commit is : https://gerrit.hyperledger.org/r/#/c/8593/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Start a Network,FAB-2309,14871,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,nickgaski,nickgaski,17/Feb/17 5:57 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,18/Jun/17 12:48 PM,,,,,DUPLICATE,,,fabric-docs,,,,0,Documentation,,,,,,,Steps that must be completed to start a network,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2308,FAB-2307,,,,,,,,,,FAB-4073,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2306,,,,,,,,,"1|hzxl9j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Debugging,FAB-2310,14872,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,nickgaski,nickgaski,17/Feb/17 5:58 AM,23/Jan/20 3:51 AM,28/Oct/23 2:58 AM,23/Jan/20 3:51 AM,,,,,Future,,,fabric-docs,,,,0,Documentation,stale-item,,,,,,Steps and tips to debug networking issues ,,ChristopherFerris,nickgaski,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2307,FAB-2308,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7cf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,nickgaski,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jul/18 9:54 PM;ChristopherFerris;removed from stale epic;;;","23/Jan/20 3:51 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Logging control ,FAB-2311,14873,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,nickgaski,nickgaski,17/Feb/17 5:59 AM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,18/Jun/17 12:49 PM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,help-wanted,,,,,,Logging control - minimize and filter network logs.  Devops folks have made considerable headway on this ....,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2306,,,,,,,,,"1|hzx7c7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move config value handlers to their own package,FAB-2312,14874,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Feb/17 6:00 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxl9r:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Architecture topic - consolidate versions, make it right",FAB-2313,14875,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,joshhus,joshhus,joshhus,17/Feb/17 6:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,21/Apr/17 6:32 AM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"https://gerrit.hyperledger.org/r/#/c/6113/

There are a few versions floating around, need to consolidate/finalize.

 
",,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2317,,,,,,,,,"1|hzx513:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 8:39 AM;joshhus;
Here are the specific docs that we have in the build currently for architecture. Will post to the Issues: http://fabric-rtd.readthedocs.io/en/latest/FAQ/architecture_FAQ/

[6:17]  
http://fabric-rtd.readthedocs.io/en/latest/architecture/

[6:18]  
http://fabric-rtd.readthedocs.io/en/latest/arch-deep-dive/

[6:18]  
I didn't write any of them. Why are they at the bottom of the TOC? don't know.

[6:20]  
What I did write on architecture is this; it's higher level than the others. https://gerrit.hyperledger.org/r/#/c/6113/1/docs/architecture.md

;;;","17/Feb/17 11:48 PM;markparz;relates to bug Fab-1705;;;","13/Apr/17 3:35 AM;ChristopherFerris;I have no idea what this means. Is it still relevant? [~ibm.hlfab.aha.jira];;;","21/Apr/17 6:32 AM;markparz;this was completed as part of a greater move of items from .6;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
General doc input,FAB-2314,14876,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,markparz,joshhus,joshhus,17/Feb/17 6:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Apr/17 12:36 AM,v1.0.0,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"Couple of points:

 1) More iterative updates

2) We need to have the major headings in a different color to pop out on the index board on left

3) The transaction model topic, security model, multichannel, smart contracts, consensus topics need a overall heading- it's too messy for the overview section otherwise.

4) The overview section needs to be more about ""why"" than just technology overview.  This is missing from a lot of the sections.  this is the feedback I got in Hyperledger hackfest in December So as an example- Yes, what is multichannel- great, but why do we need it?  

In some cases, they will only need one channel- everyone will be able to see, say images.  These images allow people to determine if the details they want. So it makes sense that any company can be on the blockchain to see the data.
Others have clearly stated they need Channels- they need 3 people on a channel to do bilateral communications.  They do not even trust encryption to keep the data private and fear that because these transactions may even occur over a 10 year period, that if encryption is broken, everyone being on blockchain is not enough. As a result, multichannel helps with data partitioning.. data only goes to those who need to know.

d) With my comments in above, we need to ensure we cover  the following beyond multichain (which can exist in current sections).
Many of these or competitive advantages that we have and are ahead of the curve on.
I've added a few words here to help

§Plug-ability to enable flexibility in development and deployment 
–Identity (MSP) – bring your own identity, support for multiple providers

–Consensus – no one size fits all algorithm 

–Data Store – support various data store models (KV, NoSQL, RDBMS; Complex query / transaction history on an asset)--- (Clearly the importance the level db implementation makes it very difficult to perform complex queries and transaction history)

§Native SDKs: SDK specification for developers implemented in any language (Node.js, Java initial support--- people need different support given the skills they have on board 

§Access control on who can query or submit transactions

§HSM (Hardware Security Module) support: Modified and unmodified PKCS11 for t-cert generation ->HSM allows for an added layer of security protection that is needed with solutions

",,ChristopherFerris,joshhus,markparz,raccoonrat,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx51b:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,raccoonrat,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:36 AM;ChristopherFerris;[~ibm.hlfab.aha.jira] I have no idea what this is about.;;;","26/Apr/17 12:36 AM;markparz;This was opened from an email from someone.... I reviewed it, there were a couple of nuggets that have been resolved, or we're not at a spot that can be discussed as new features need to be implemented first. ... so closing this out. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger topic,FAB-2315,14877,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,joshhus,joshhus,17/Feb/17 6:29 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,29/Mar/17 12:58 AM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"Ledger doc topic.

",,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2317,,,,,,,,,"1|hzx533:",,,,,,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
education and how to's,FAB-2316,14878,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,markparz,markparz,17/Feb/17 6:40 AM,21/Jul/18 4:08 AM,28/Oct/23 2:58 AM,17/Feb/17 6:43 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,This is a section for understanding how to do specific items in Fabric.,,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-8,,Tutorials - education / how to do things in fabric,To Do,,,Unset,,,,"1|hzxl9z:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Feb/17 6:43 AM;markparz;dup of 2300;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deep dive for each architectural component ,FAB-2317,14879,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,nickgaski,nickgaski,17/Feb/17 7:24 AM,23/Jan/20 3:51 AM,28/Oct/23 2:58 AM,23/Jan/20 3:51 AM,,,,,Future,,,fabric-docs,,,,0,common-components,Documentation,help-wanted,stale-item,,,,"Overview
deeper dive
Peers - endorser committer 
policies and system cc 
ordering service
pluggable implementations 
gossip
read write semantics
security and crypto 
transaction flow
components
fabric-ca
",,indirajith,nickgaski,phillipviana,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,432000,432000,,0%,432000,432000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-1,,Architecture ,To Do,,,Unset,,,,"1|hzx51j:",,,,Unset,Unset,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,indirajith,nickgaski,phillipviana,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:51 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Architecture overview,FAB-2318,14880,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,markparz,nickgaski,nickgaski,17/Feb/17 7:25 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Apr/17 12:33 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,broad overview of the components and interaction ,,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2317,,,,,,,,,"1|hzx51r:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 12:33 AM;markparz;Closing as dupe of FAB-2283;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement hierarchical policies storage,FAB-2319,14881,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Feb/17 7:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxla7:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup channel config values,FAB-2321,14883,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Feb/17 11:23 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlan:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow config items to specify modification policy relatively,FAB-2322,14884,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Feb/17 1:31 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlav:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add implicit meta policy evaluation support to policy manager,FAB-2323,14885,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Feb/17 3:04 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlb3:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add default reader/writer/admin policies to orderer genesis,FAB-2324,14886,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Feb/17 3:47 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlbb:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add reader/writer/admin policies to individual orgs,FAB-2325,14887,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Feb/17 4:25 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 3:46 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlbj:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support golang 1.8,FAB-2327,14889,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,17/Feb/17 9:45 PM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,27/Sep/17 8:02 PM,,,,,v1.1.0,,,,,,,0,common-components,,,,,,,"golang 1.8 comes out, with better compiling performance.

https://blog.golang.org/go1.8

May take golang 1.8 as the default compiler.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2945,FAB-2946,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlc7:",,,,Unset,,Sprint 4,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/17 10:31 AM;baohua;Any Feedback or advice is welcome.

Thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI command to instantiate chaincode fails when argument -n has uppercase chars,FAB-2330,14892,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,Nishi,Nishi,18/Feb/17 12:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Apr/17 4:17 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"I could give uppercase chars to argument -n name of chaincode during install CLI command
peer chaincode install -C myc1 -n ccAPIDriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver

But using the same chanicode name for instantiate failed with following message

vagrant@hyperledger-devenv:v0.2.2-aaa998e:/opt/gopath/src/github.com/hyperledger/fabric$ peer chaincode instantiate -C myc1 -n ccAPIDriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver -c '{""Args"":[""""]}'
Error: Error endorsing chaincode: rpc error: code = 2 desc = Error starting container: API error (500): {""message"":""Error parsing reference: \""dev-jdoe-ccAPIDriver-1.0\"" is not a valid repository/tag""}


Had to change value in argument -n to lowercase in install and instantiate to make it work as follows:

peer chaincode install -C myc1 -n ccapidriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver
peer chaincode instantiate -C myc1 -n ccapidriver -v 1.0 -p github.com/hyperledger/fabric/examples/chaincodeAPIDriver -c '{""Args"":[""""]}'",,denyeart,Nishi,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlcf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 7:09 AM;denyeart;[~2020Nishi]
Does the problem still occur?;;;","12/Apr/17 10:10 PM;Nishi;Chaincode could be installed and instantiated successfully with chaincode name having upper case characters.  Invoke and Query were also successfully on this instantiated chaincode having uppercase characters in installed name.

Tested with chaincodeName=MYCC0, testMYCC0 on marbles02 example.
Verified on commit level: *a076bbada80cbcda4825c62233f16290edb1d1b1*;;;","12/Apr/17 10:59 PM;wlahti;[~Nishi] Unless I'm misreading your comment, you're saying this has been fixed and this JIRA item can be closed?;;;","13/Apr/17 4:17 AM;wlahti;Chatted with Nishi and confirmed that the issue has been addressed and this JIRA item can be closed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Architecture - Ordering serivce ,FAB-2332,14894,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,AnilSingh,markparz,markparz,18/Feb/17 12:34 AM,10/Jan/20 1:53 AM,28/Oct/23 2:58 AM,10/Jan/20 1:53 AM,,,,,,,,fabric-docs,fabric-orderer,,,0,Documentation,,,,,,,Need to understand the details of of the ordering service architecture at a deep technical level,,AnilSingh,ChristopherFerris,indirajith,joe-alewine,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2317,,,,,,,,,"1|hzxlcv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AnilSingh,ChristopherFerris,indirajith,joe-alewine,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Aug/17 2:01 AM;ChristopherFerris;We could definitely use some documentation on the orderer beyond the minimal how to configure the kafka ordering service.;;;","09/May/19 10:21 PM;AnilSingh;I will start documenting. I had a look at documentation on the orderer to configure the kafka ordering service and yes this could definitely be a starting point.;;;","10/Jan/20 1:53 AM;joe-alewine;We now have several docs, as well as an exhaustive white paper, covering this material. If there is something more specific that should be done a new Jira can be opened.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add tool for creationg genesis material and creating config transactions,FAB-2335,14897,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,18/Feb/17 1:21 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxldb:",,,,Unset,,,,,,,,,,,,,,5.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add application and msp configuration to genesis.yaml,FAB-2336,14898,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,18/Feb/17 1:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:28 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxldj:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Review Use Cases for v1.0 changes,FAB-2337,14899,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,joshhus,joshhus,18/Feb/17 1:35 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,03/May/17 7:12 PM,v1.0.0,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"This topic was moved from v0.6 doc; needs to be vetted for v1.0 changes, unless that's been done already (not to my knowledge). 

http://fabric-rtd.readthedocs.io/en/latest/biz/usecases/",,ChristopherFerris,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx51z:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Apr/17 8:37 AM;ChristopherFerris;unclear to me why we wouldn't simply link to the wiki for the requirements WG which is developing use cases. None of the use cases documented for v0.6 actually mapped to implementation, so I think we should simply nuke this content and link to https://wiki.hyperledger.org/groups/requirements/use-case-inventory.;;;","29/Apr/17 8:50 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8745/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Search doesn't maintain apostrophe in heading name,FAB-2338,14900,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,joshhus,joshhus,18/Feb/17 1:46 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,16/Apr/17 10:19 PM,,,,,v1.0.0,WON'T FIX,,fabric-docs,,,,0,,,,,,,,"Strange (minor) bug in the RTD search results: they don't pick up / display punctuation in a heading name. e.g. What's Included >> What s Included in the search results.

See ""The pieces"" section:

http://fabric-rtd.readthedocs.io/en/latest/search.html?q=v1.0",,ChristopherFerris,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx527:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/17 10:19 PM;ChristopherFerris;This is not a Fabric bug, but a RTD bug if anything. closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add simple tool to write out a genesis block,FAB-2339,14901,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,18/Feb/17 1:57 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:28 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,Please refer to the file {{configtxgen.md}} in the fabric/docs directory for usage of this tool.,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxldr:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
develop sample Java app using Fabric Java SDK,FAB-2340,14902,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,18/Feb/17 2:04 AM,24/Jul/18 7:39 PM,28/Oct/23 2:58 AM,18/Feb/17 2:05 AM,,,,,v1.0.0-alpha1,,,fabric-quality,,,,0,quality,,,,,,,"This task is to create a Java Sample program to consume Fabric Java SDK jar.

Basic functionality that should be covered as part of this task:

1. Consume a Solo Ordere, Ca Server, and peers
2. Use default chain id *testchainid* ( SDK is not yet ready with multichannel)
3. Enroll Admin user which is backed in fabric-ca server (refer server-config.json)
4. Deploy go language based chaincode (Send proposal to endorser and send the response with payload to orderer and wait for the response from peer)
5. Verify Invoke/ Transaction
6. Query chaincode
",,Ratnakar,Vishal3152,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxldz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,Vishal3152,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/17 2:05 AM;Ratnakar;* Uploaded the code here https://github.com/ratnakar-asara/FabricJavaSample
* Updated instructions in ReadMe along with [~bmos299];;;","24/Jul/18 7:38 PM;Vishal3152;Here is fabric java client that loads a network [connection profile|https://hyperledger.github.io/composer/latest/reference/connectionprofile]  file and then use it to simplify the steps needed to setup and use the network.
 * [https://github.com/vishal3152/HyperledgerFabric-Java-Client];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
nil CodePackage is valid,FAB-2341,14903,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,muralisr,muralisr,18/Feb/17 2:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,18/Feb/17 5:57 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Getting the following error from the peer on instantiate

{{Error: Error endorsing chaincode: rpc error: code = 2 desc = failure opening codepackage gzip stream: EOF}}

[~greg.haskins] pointed out ChaincodeDeploymentSpec.CodePackage is probably nil which turned out to be the case.

Deployment spec carries many information besides CodePackage. CodePackage will be nil in certain cases such as while instantiating (need the parameters of the chaincode such as name, version but the system will look for code on the peer). So nil CodePackage is a valid.",,greg.haskins,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxle7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/17 2:14 AM;greg.haskins;Fix submitted: https://gerrit.hyperledger.org/r/#/c/6161/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Encode MSPs into genesis block,FAB-2342,14904,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,18/Feb/17 2:53 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:28 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlef:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transaction in the glossary needs to be updated,FAB-2344,14906,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,markparz,markparz,18/Feb/17 4:14 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,15/Apr/17 11:49 PM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"States - There are three unique types of transactions - deploy, invoke, and query.",,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2277,,,,,,,,,"1|hzx4zj:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/17 7:18 AM;joshhus;What am I missing here? Don't see the actual update or suggested update. Will check the original emailed record. ;;;","14/Apr/17 11:51 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7279/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Direct crypto usage in some modules disables plug-ability of BCCSP,FAB-2345,14907,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,angelo.decaro,binhn,binhn,18/Feb/17 5:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,18/Apr/17 5:44 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,v1.0,,,,,,,"The following modules must be fixed:

/common/util/utils.go:	""crypto/rand""
./common/util/utils.go:	""crypto/sha256""
./gossip/state/payloads_buffer_test.go: ""crypto/rand""
./msp/identities.go:    ""crypto/rand""
./msp/identities.go:    ""crypto/x509""
./msp/mspimpl.go:       ""crypto/x509/*""
./orderer/kafka/util.go:        ""crypto/tls x509""
./orderer/mocks/util/util.go:   ""crypto/rand""
./orderer/mocks/util/util.go:   ""crypto/rsa""
./orderer/mocks/util/util.go:   ""crypto/x509""
./orderer/mocks/util/util.go:   ""crypto/x509 and others""
./orderer/sbft/backend/backend.go:      ""crypto/*""
./orderer/sbft/backend/backend_test.go: ""crypto/*""
./orderer/sbft/connection/connection.go:        ""crypto/sha256, tls,x509""
./orderer/sbft/connection/connection_test.go:   ""crypto/sha256""
./orderer/sbft/simplebft/crypto.go:     ""crypto/sha256""
./orderer/sbft/simplebft/testsys_test.go:       ""crypto/*""
./orderer/sbft/simplebft/testsys_test_test.go:  ""crypto""
./peer/common/anchors.go:       ""crypto/x509""

",,angelo.decaro,binhn,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp7r:",,,,,,Sprint 16 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,binhn,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/17 1:56 PM;angelo.decaro;So, here is the current status:
crypto/sha256: only used in tests and this is fine.
x509,tls, crypto/rand: BCCSP does not cover this anyway
rsa and ecdsa: are actually used by sbft. Shall we replace those calls by invocation to BCCSP?;;;","14/Apr/17 8:41 PM;elli-androulaki;[~binhn], [~mastersingh24], what do you think?;;;","14/Apr/17 11:13 PM;binhn;This is code hardening and we should address. I wouldn't worry about those in SBFT as it needs to be written post 1.0;;;","18/Apr/17 5:39 PM;elli-androulaki;Ok, so I mark this item as done for V1, and open a new one for post v1, for sbft-specific crypto calls.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TOC items and some other content things,FAB-2346,14908,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,joshhus,joshhus,18/Feb/17 6:24 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Apr/17 12:52 AM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"----------------------------------------------------------------------------------

B. Things that need updating in the current build / Barry's repo / build:

(I'm omitting from this list, all the ""WIP"" topics, b/c I think those are well-tracked already / have Jira issues.)

#     Release notes: http://fabric-rtd.readthedocs.io/en/latest/releases/
#     Nit / low FYI text in ""command"" table at the bottom too small: http://fabric-rtd.readthedocs.io/en/latest/chaincode/
#     TOC tweaks - a) ""Docker Compose"" caps. b) Are we going to use the ""smart contracts"" term – or instead ""chaincode applications"" only? c) ""CP Paper"" is redundant.
#     Notice – in some cases we point to doc that is NOT in the fabric/docs dir, but in other dirs, such as fabric/dev-setup.... There are some fabric/apis etc. directories also ... These will need some confirmation that the devs have updated their content in there for v1.0 ... e.g. this page still references Vagrant: http://fabric-rtd.readthedocs.io/en/latest/dev-setup/build/
#     Nit / low ... I don't like use of ""the blockchain"" ... there is no one ""blockchain"" that everyone uses. Even on one network, there are mutliple ""blockchains"" (ledgers with crypto-linked ""chain"" of blocks). So blockchain is a concept / abstraction, not a physical object. And can be used as a noun - ""we're using blockchain"" or an adjective - ""we're using a ""blockchain network"". See http://fabric-rtd.readthedocs.io/en/latest/carlease/ ...
#     While we're on car lease, let's at some point add title/registration tracking, and renewal / transfer of title/ownership, and insurance and registration renewal and proofs of purchase and not expired status. Also since we're selling the used car, also show me the carfax / vehicle history.
#     Usage FAQ: http://fabric-rtd.readthedocs.io/en/latest/FAQ/usage_FAQ/ (esp. ""validating node"" and the specific error message, which should be moved to Troubleshooting.)
#     ""Troubleshooting"" is currently limited to ""Docker Troubleshooting"" so it should either be renamed as such, or expanded to include other problems / error msgs. (It's also labeled ""optional"" ... which isn't really true for those having the problem. - delete ""optional"".) http://fabric-rtd.readthedocs.io/en/latest/asset_trouble/
#     TOC - ""Multi Channel"" - change to ""Channels"" and point to the new topic.
#     ""Consensus"" WIP http://fabric-rtd.readthedocs.io/en/latest/consensus/ ... text says that consensus is used as a ""broader term than ordering to include the entire transactional flow"" ... We should change that text--we don't want to reinvent the established concept of ""consensus algorithms"" or ""consensus protocols."" ... I think what we mean here is that depending on the plug-in used for the ordering component, it may or may not be a ""consensus"" algorithm/protocol. ... e.g. PFBT is a consensus protocol because it solves, to a degree, the consensus problem - which is when message recipients receive divergent conflicting messages, basically. (I'm not certain that SOLO and Kafka are also truly consensus protocols in that they solve the consensus problem - that a protocol orders stuff doesn't mean that it necessarily solves the consensus problem. ... I will have to look into that more.) If all agree, I can take the Consensus topic.
#     TOC: Appendix: ""Development process and code"" is limited to just ""Fabric development process and code"" so needs a rename.
#     TOC: Gerrit heading - there are a number of adjacent topics at same level as Gerrit heading that are also Gerrit topics.
#     Contributing - Legal Stuff - we have the signoff, but do we need to add the hooks for the ChangeID? ... (and is that really ""legal"" stuff? - scary.) http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#legal-stuff
#     Nit / low - some of our links that take the user to an external site we should be opening a new browser tab for them. - someone goes to an external site, click a few times, and then can't find their way back to us easily. e.g. we link to https://jira.hyperledger.org/secure/Dashboard.jspa from http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#coding-guidelines ... (and while we're there, it's fewer than eight, not less than, in Maintainers.)
# ",,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1705,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2254,,,,,,,,,"1|hzx52f:",,,,,,Sprint 12 - Documentation,Sprint 13 - Documentation,Sprint 14 - Documentation,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,joshhus,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Feb/17 6:26 AM;joshhus;This was stuff found tangentially, during the ""move files from v0.6 directory examination, but separate tasks than that issue.  ;;;","13/Apr/17 3:16 AM;ChristopherFerris;Do we still need this [~ibm.hlfab.aha.jira]?;;;","26/Apr/17 12:51 AM;markparz;Monster bug.... 
(I'm omitting from this list, all the ""WIP"" topics, b/c I think those are well-tracked already / have Jira issues.)

#     -Release notes: http://fabric-rtd.readthedocs.io/en/latest/releases/- Done
#     -Nit / low FYI text in ""command"" table at the bottom too small: http://fabric-rtd.readthedocs.io/en/latest/chaincode/- Redone
#     -TOC tweaks - a) ""Docker Compose"" caps. b) Are we going to use the ""smart contracts"" term – or instead ""chaincode applications"" only? c) ""CP Paper"" is redundant.- Gone / Done
#     -Notice – in some cases we point to doc that is NOT in the fabric/docs dir, but in other dirs, such as fabric/dev-setup.... There are some fabric/apis etc. directories also ... These will need some confirmation that the devs have updated their content in there for v1.0 ... e.g. this page still references Vagrant: http://fabric-rtd.readthedocs.io/en/latest/dev-setup/build/- Done
#     -Nit / low ... I don't like use of ""the blockchain"" ... there is no one ""blockchain"" that everyone uses. Even on one network, there are mutliple ""blockchains"" (ledgers with crypto-linked ""chain"" of blocks). So blockchain is a concept / abstraction, not a physical object. And can be used as a noun - ""we're using blockchain"" or an adjective - ""we're using a ""blockchain network"". See http://fabric-rtd.readthedocs.io/en/latest/carlease/ ...- Naming that is philosophical 
#     -While we're on car lease, let's at some point add title/registration tracking, and renewal / transfer of title/ownership, and insurance and registration renewal and proofs of purchase and not expired status. Also since we're selling the used car, also show me the carfax / vehicle history.- New requirement if desired to pursue
#     -Usage FAQ: http://fabric-rtd.readthedocs.io/en/latest/FAQ/usage_FAQ/ (esp. ""validating node"" and the specific error message, which should be moved to Troubleshooting.)- Page no longer exists, so assuming it has been updated.... Done
#     -""Troubleshooting"" is currently limited to ""Docker Troubleshooting"" so it should either be renamed as such, or expanded to include other problems / error msgs. (It's also labeled ""optional"" ... which isn't really true for those having the problem. - delete ""optional"".) http://fabric-rtd.readthedocs.io/en/latest/asset_trouble/- Living doc to be expanded... Done
#     -TOC - ""Multi Channel"" - change to ""Channels"" and point to the new topic.- Done
#     -""Consensus"" WIP http://fabric-rtd.readthedocs.io/en/latest/consensus/ ... text says that consensus is used as a ""broader term than ordering to include the entire transactional flow"" ... We should change that text--we don't want to reinvent the established concept of ""consensus algorithms"" or ""consensus protocols."" ... I think what we mean here is that depending on the plug-in used for the ordering component, it may or may not be a ""consensus"" algorithm/protocol. ... e.g. PFBT is a consensus protocol because it solves, to a degree, the consensus problem - which is when message recipients receive divergent conflicting messages, basically. (I'm not certain that SOLO and Kafka are also truly consensus protocols in that they solve the consensus problem - that a protocol orders stuff doesn't mean that it necessarily solves the consensus problem. ... I will have to look into that more.) If all agree, I can take the Consensus topic.- Exactly what we want to do, many spots that require 'consensus', or agreement. Consensus comes from the life cycle of the transaction, not just a protocol. Hence the topic, which Nick and I wrote. Done.
#     -TOC: Appendix: ""Development process and code"" is limited to just ""Fabric development process and code"" so needs a rename.- Reworked... Done
#    - TOC: Gerrit heading - there are a number of adjacent topics at same level as Gerrit heading that are also Gerrit topics.- reworked..Done
#     -Contributing - Legal Stuff - we have the signoff, but do we need to add the hooks for the ChangeID? ... (and is that really ""legal"" stuff? - scary.) http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#legal-stuff- Yup, accurate
#    - Nit / low - some of our links that take the user to an external site we should be opening a new browser tab for them. - someone goes to an external site, click a few times, and then can't find their way back to us easily. e.g. we link to https://jira.hyperledger.org/secure/Dashboard.jspa from http://fabric-rtd.readthedocs.io/en/latest/CONTRIBUTING/#coding-guidelines ... (and while we're there, it's fewer than eight, not less than, in Maintainers.)- Not going to implement or worry about at this time. Done;;;","26/Apr/17 12:52 AM;markparz;Went through all of these items, and verified we are good to close all these (or a a couple with different dispositions, of not going to fix, or open a requirement).... closing;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Switch orderer Docker files to proper ENV vars,FAB-2348,14910,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,18/Feb/17 9:38 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,20/Feb/17 2:05 AM,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,"In short, FAB-2162 configures the provisional bootstrapper via the `genesis.yaml` file and the `CONFIGTX_` ENV var prefix.

Before that, the bootstrapper would be set via the `orderer.yaml` file and the `ORDERER_` ENV var prefix.

The Kafka-related Docker environments set the orderer type via the ORDERER_ ENV var prefix and were not updated accordingly.

As a result, post FAB-2162, anyone bringing up any of the ordererXkafkaY networks was actually bringing up Y Kafka brokers without reason -- they were still running solo.

This changeset fixes this.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlf3:",,,,,,Sprint 12 - consensus,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/17 1:49 AM;kchristidis;https://gerrit.hyperledger.org/r/6187;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify configtx ingress to require CONFIG_UPDATE,FAB-2349,14911,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,18/Feb/17 3:38 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:04 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlfb:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change location of SerializedIdentity from msp/identities.proto to protos/msp/msp_principal.proto,FAB-2350,14912,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,18/Feb/17 4:53 PM,21/Jul/18 3:57 AM,28/Oct/23 2:58 AM,07/Apr/17 4:09 AM,,,,,,,,fabric-crypto,,,,0,,,,,,,,"This is for fixing this TODO inside /fabric/protos/msp/msp_principal.proto:

// TODO: Bring msp.SerializedIdentity from fabric/msp/identities.proto here. Reason below.
// SerializedIdentity represents an serialized version of an identity;
// this consists of an MSP-identifier this identity would correspond to
// and the bytes of the actual identity. A serialized form of
// SerializedIdentity would govern ""Principal"" field of a PolicyPrincipal
// of classification ""ByIdentity"".",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2420,,,,,,,,,"1|hzx5af:",,,,Unset,,Sprint 14 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fine tune peer subcomponent log levels,FAB-2351,14913,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,yacovm,yacovm,18/Feb/17 9:49 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,29/Apr/17 3:36 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The peer has many components that all derive their startup logging levels from [peer/core.yaml | https://github.com/hyperledger/fabric/blob/master/peer/core.yaml#L33] and sometimes a developer/administrator is interested in running the peer with all sub-component log levels set to DEBUG/INFO but a certain sub-component to be silenced (set to WARNING/ERROR).

I think it could be good if you could also set in the peer/core.yaml a logging level per sub-component which if defined, would override the log level all sub-components inherit from.",,amber-zhang,benjsmi,binhn,dbshah,denyeart,scottz,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/17 10:06 PM;benjsmi;screenshot-1.png;https://jira.hyperledger.org/secure/attachment/10651/screenshot-1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4tb:",,,,,,Sprint 12 - Endorser,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,amber-zhang,benjsmi,binhn,dbshah,denyeart,scottz,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/17 10:29 PM;denyeart;For example, many of us want to run peer with CORE_LOGGING_LEVEL=DEBUG, but want to silence a chatty component like gossip, which is only possible today from CLI such as:

peer logging setlevel gossip/comm#-1 ERROR
peer logging setlevel gossip/discovery#0.0.0.0:7051 ERROR
peer logging setlevel gossip/gossip#0.0.0.0:7051 ERROR

(Note - ideally the part after the # should not be required).;;;","18/Feb/17 10:31 PM;denyeart;I tagged Will Lahti, but anybody else is welcome to pick this up before Will gets to it.;;;","20/Feb/17 2:02 AM;binhn;Somehow we need to figure out and support a hierarchy specification;  that is from CLI, we should be able to do

   {{peer logging setlevel gossip ERROR}}

which would set all gossip* to ERROR.  This might be possible if we list all controllable subcomponents in the core.yaml such that the CLI could figure out any subcomponents. For example,


{noformat}
   gossip: warning 
      comm: error
      client: info
{noformat}


a subtree extract would provide all the children of gossip, and the CLI may override their logging level.;;;","20/Feb/17 2:09 AM;yacovm;An idea I thought of was to embed go-logging's Logger, and when someone does: https://github.com/op/go-logging/blob/master/logger.go#L112
register the subcomponent (the prefix before the ""/"") to a shared map in the flogging package, and then iterate over all these components and adjust the log levels appropriately. 
I guess there is a catch in this though- the components might load after the flogging loads.

[~wlahti] what do you think? ;;;","10/Apr/17 10:07 PM;benjsmi;I would like to +1 or otherwise add my support/request to this issue/work item.  When we deploy networks to our service internally, the tendency/desire is to start them with debug-level logging s.t. we can ensure everything is functioning properly.

The result of this, however is that 99% of the logs that come into the logging service for an _at rest_ (meaning, no one's deploying chaincode or running transactions) are at the DEBUG level.  The description from our SRE folks is there should probably be plenty of logs that are at INFO, TRACE, or even SILLY levels if those are options.  SRE also suggests that if those aren't options, they probably should be.

Example data set from staging Bluemix service:
 !screenshot-1.png|thumbnail! 

This is not just a Bluemix service issue, however. I'm certain that customers will want to have more fine-grained control over the amount and types of logs they receive for a single component.  Taking the peer as an example, we need to not see 99% of logs in the debug level.  SRE suggested that the split should be more even between these more fine-grained/detailed levels.;;;","12/Apr/17 12:05 AM;wlahti;This JIRA will be addressed through a series of three CRs, the first of which has already been merged.

1. https://gerrit.hyperledger.org/r/#/c/7281/ adds the ability to set log levels using regular expressions - merged
2. https://gerrit.hyperledger.org/r/#/c/7421/ stores the log levels at the end of peer startup to enable a quick revert of all log levels - awaiting code review
3. the final CR will update the Fabric codebase to use flogging.MustGetLogger() in place of logging.MustGetLogger() so that the above CRs can be completely enabled. 
 
 ;;;","12/Apr/17 12:10 AM;wlahti;[~benjsmi] That's great feedback and should definitely be a point of emphasis going forward. I opened another JIRA a while back (https://jira.hyperledger.org/browse/FAB-1870) to start formalizing a set of logging guidelines. I think that item would be a better place to incorporate your feedback and track the progress.;;;","12/Apr/17 2:34 AM;benjsmi;I had added my next point of feedback to FAB-1870.;;;","21/Apr/17 7:19 AM;jimthematrix;+1, a customer is also trying to debug their system so logging is set to debug and the logs are filling up very quickly from the gossip messages;;;","26/Apr/17 6:50 PM;amber-zhang;Hi Will,

In this version, dynamic setting logging level doesn't work. Details, please see below.

root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer -v 
Fabric peer server version 1.0.0-snapshot-d4cc809
2017-04-26 09:47:45.376 UTC [main] main -> INFO 001 Exiting.....

root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer logging setlevel gossip warning
2017-04-26 09:28:33.889 UTC [cli/logging] setLevel -> INFO 001 Log level set for peer module 'gossip': WARNING
2017-04-26 09:28:33.889 UTC [main] main -> INFO 002 Exiting.....
root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer logging getlevel gossip
2017-04-26 09:28:39.565 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-26 09:28:39.565 UTC [main] main -> INFO 002 Exiting.....
root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer logging getlevel gossip
2017-04-26 09:28:53.288 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-26 09:28:53.288 UTC [main] main -> INFO 002 Exiting.....
root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer logging setlevel gossip WARNING
2017-04-26 09:29:07.352 UTC [cli/logging] setLevel -> INFO 001 Log level set for peer module 'gossip': WARNING
2017-04-26 09:29:07.352 UTC [main] main -> INFO 002 Exiting.....
root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer logging getlevel gossip
2017-04-26 09:29:10.963 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-26 09:29:10.963 UTC [main] main -> INFO 002 Exiting.....
root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer logging setlevel gossip ERROR  
2017-04-26 09:45:30.642 UTC [cli/logging] setLevel -> INFO 001 Log level set for peer module 'gossip': ERROR
2017-04-26 09:45:30.642 UTC [main] main -> INFO 002 Exiting.....
root@d842b23d2b16:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer logging getlevel gossip
2017-04-26 09:45:35.090 UTC [cli/logging] getLevel -> INFO 001 Current log level for peer module 'gossip': DEBUG
2017-04-26 09:45:35.090 UTC [main] main -> INFO 002 Exiting.....;;;","26/Apr/17 9:07 PM;wlahti;I posted a variant of this information in a few RocketChat channels and can be sure this information is included in some documentation somewhere:

For environments similar to the one created using `./network_setup.sh up`, I recommend the following method to suppress certain log modules within peer docker containers. :
1. connect to the CLI container `docker exec -it cli bash`
2. run the setlevel command with the CORE_PEER_ADDRESS environment variable provided to specify which peer you'd like to run the command against and the module name you would like to update: for example, `CORE_PEER_ADDRESS=peer1:7051 peer logging setlevel gossip warning` (making sure to update the peer address in the environment variable to the value for your environment). ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade GRPC package to version 1.1.x,FAB-2352,14914,14562,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,18/Feb/17 10:46 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,21/Feb/17 8:22 PM,,,,,v1.0.0,v1.0.0-alpha1,,fabric-sdk-node,,,,0,,,,,,,,"Based on experience with v0.6 and hfc, looks like the GRPC C library which forms the basis of the NodeJS grpc package has added some significant stability improvements.  With this change we will simply bump the version in package.json",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlfj:",,,,,,Sprint 12 - SDK node,Sprint 13 - SDK node,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Feb/17 11:05 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/6203/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Substitute orderer hash function to sha256 ,FAB-2354,14916,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,19/Feb/17 1:39 AM,01/Dec/20 5:26 PM,28/Oct/23 2:58 AM,21/Feb/17 5:46 PM,,,,,,,,fabric-crypto,,,,0,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18358,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6fr:",,,,Unset,,Sprint 12 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Feb/17 1:42 AM;elli-androulaki;The goal is here to also add bccsp.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"orderer panics: cannot load MSP config for org SampleOrg; could not read directory msp/sampleconfig/cacerts",FAB-2356,14918,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,jyellick,scottz,scottz,19/Feb/17 4:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,20/Mar/17 12:21 AM,v1.0.0,,,,v1.0.0,,,fabric-orderer,,,,0,quality,,,,,,,"Using commit 9751802, Feb 18 2pm EST, cannot launch network. The orderer panics and restarts repeatedly. Orderer logs follow below.

jason, this follows your other fixes  a6eaf31 (6193) and b78e929 (6171), but now seeing a different (but similar type) error loading files. If this belongs in MSP or other team, of course feel free to reassign and change component field.

2017-02-18 18:48:40.962 UTC [configtx/tool/localconfig] Load -> INFO 004 Checking for configtx.yaml at: 
2017-02-18 18:48:40.969 UTC [viperutil] EnhancedExactUnmarshal -> INFO 005 map[application:map[Organizations:<nil>] profiles:map[SampleSingleMSPSolo:map[Application:map[Organizations:[map[Name:SampleOrg ID:DEFAULT MSPDir:msp/sampleconfig AnchorPeers:[map[Host:127.0.0.1 Port:7051]]]]] Orderer:map[Kafka:map[Brokers:[127.0.0.1:9092]] Organizations:[map[ID:DEFAULT MSPDir:msp/sampleconfig AnchorPeers:[map[Host:127.0.0.1 Port:7051]] Name:SampleOrg]] OrdererType:solo Addresses:[127.0.0.1:7050] BatchTimeout:10s BatchSize:map[MaxMessageCount:10 AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB]]] SampleInsecureSolo:map[Orderer:map[OrdererType:solo Addresses:[127.0.0.1:7050] BatchTimeout:10s BatchSize:map[MaxMessageCount:10 AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB] Kafka:map[Brokers:[127.0.0.1:9092]] Organizations:<nil>] Application:map[Organizations:<nil>]]] organizations:[map[Name:SampleOrg ID:DEFAULT MSPDir:msp/sampleconfig AnchorPeers:[map[Host:127.0.0.1 Port:7051]]]] orderer:map[OrdererType:solo Addresses:[0.0.0.0:5005] BatchTimeout:10s BatchSize:map[AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB MaxMessageCount:10] Kafka:map[Brokers:[127.0.0.1:9092]] Organizations:<nil>]]
2017-02-18 18:48:40.969 UTC [common/configtx/tool/provisional] New -> CRIT 006 Error loading MSP configuration for org SampleOrg: Could not load a valid ca certificate from directory msp/sampleconfig/cacerts, err Could not read directory open msp/sampleconfig/cacerts: no such file or directory, err msp/sampleconfig/cacerts
panic: Error loading MSP configuration for org SampleOrg: Could not load a valid ca certificate from directory msp/sampleconfig/cacerts, err Could not read directory open msp/sampleconfig/cacerts: no such file or directory, err msp/sampleconfig/cacerts

goroutine 1 [running]:
panic(0xa23320, 0xc420351950)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc42016dd70, 0xb30d52, 0x2e, 0xc42034b7c0, 0x2, 0x2)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/common/configtx/tool/provisional.New(0xc420339550, 0x13, 0xc420339550)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/provisional/provisional.go:118 +0x1319
",linux x86 vagrant docker-compose,bmos299,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlfz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,jyellick,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/17 11:26 PM;bmos299;Ratanakar and Scott are evaluating the configuration.;;;","22/Feb/17 11:52 PM;bmos299;...changing to high from highest.;;;","23/Feb/17 12:10 AM;jyellick;How is the orderer being started?

This is a symptom of starting the orderer in the ad-hoc dev environment (while not working in fabric.git) which attempts to generate a genesis block dynamically.

The recommended path for configuring the orderer is to:

1. Execute the {{configtxgen}} tool to generate a genesis block.
2. Copy this genesis block to the container/machine where the orderer is to be started.
3. Start the orderer specifying the {{ORDERER_GENERAL_GENESISMETHOD=file}} and {{ORDERER_GENERAL_GENESISFILe=/path/you/configured}}

Please see {{fabric/docs/configtxgen.md}} for more details on this process.

Note, the reason why you should absolutely not dynamically generate the genesis block outside of a dev environment, is that marshaling is not deterministic (and this is not just theoretical for configuration, this is actual) and so if you attempt to start for instance 2 Kafka orderers, each dynamically bootstrapped, there's a very high probability that each instance will have a different genesis hash, and the two blockchains will start (and stay) in a diverged state.

The error you are seeing is because in the default development mode, the orderer will attempt to invoke the {{configtxgen}} tool under the covers.  The default config in {{configtx.yaml}} references {{msp/sampleconfig}} which is present in the fabric.git root.

If you are still convinced that you would like to dynamically generate the genesis block, then I recommend that you pass {{ORDERER_GENERAL_GENESISPROFILE=SimpleInsecureSolo}} which will not attempt to include any MSP definitions, and will workaround this problem.;;;","28/Feb/17 9:00 AM;scottz;OK, I believe I was correctly using the dev environment, but will write this off to tester error, having only partially understood and adapted to the the new  file method from the provisional method. I will be working more to understand this and use the new file method in coming days and will create new bugs if issues found.
In the meantime, is it appropriate to panic, when someone configures incorrectly, or should the orderer handle things more gracefully here?  I would think the latter, but am open to discussion. The orderer could be used for other orgs and networks and channels, etc, and we wouldn't want to take them down too, would we?;;;","11/Mar/17 3:27 AM;jyellick;If this is resolved, can we close it?;;;","12/Mar/17 6:59 AM;scottz;Although the test steps may be suspect, the error remains a panic. That should be addressed with this issue.;;;","13/Mar/17 11:51 PM;jyellick;This panic is triggered by {{logger.Panicf}} purposefully when the configuration specified is incorrect and the orderer cannot start.  I'm not sure what there is to address?  We could change this to a {{logger.Fatalf}} but this simply provides less debug information and makes testing the failure cases in unit tests much more painful.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Join failed with ""failure while looking up the ledger""",FAB-2357,14919,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,19/Feb/17 4:41 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 5:28 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Join command fails with

{code:java}
vagrant@hyperledger-devenv:v0.3.0-351f1b8:/opt/gopath/src/github.com/hyperledger/fabric$ peer channel join -b myc.block
2017-02-18 19:34:22.072 UTC [SW_BCCSP] createKeyStoreIfNotExists -> INFO 001 KeyStore path [/tmp] missing [false]: [<clean>]
{code}

Not all proposals are on channels (and have a ledger). Some proposals such as to the CSCC for join is ""channelless"".

In this instance, the failure is due to attempting to access the ledger for doing TX uniqueness checks. Given there's no ledger, we have to bypass ledger based uniqueness checks.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7dz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Master is broken,FAB-2359,14921,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jyellick,jyellick,19/Feb/17 5:57 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Apr/17 8:30 AM,v1.0.0-alpha1,,,,v1.0.0-alpha1,,,,,,,0,,,,,,,,"$ go test ./core/common/validation/
--- FAIL: TestValidateConfigTx (0.01s)
	config_test.go:56: ValidateTransaction failed, err Transaction is not valid. Got [], expected [G3GHI9vBQahR3+2QodO1RRSM9Xz3u3day6odPwjSKoI=]
FAIL
FAIL	github.com/hyperledger/fabric/core/common/validation	0.032s
",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlgf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update node-sdk CI job to run end-to-end test from integratation folder,FAB-2360,14922,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,19/Feb/17 6:02 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,20/Feb/17 12:27 PM,,,,,,,,,,,,0,,,,,,,,"After merge of this patch (https://github.com/hyperledger/fabric-sdk-node/commit/691af6351dcd7b19c90572fce546990c1ccc626d) now end-to-end.js program is moved to test/integration folder.. This change impacted CI job failure as CI is referring to test/node/end-to-end.js. 

Refer new folder structure to run end-to-end.js in verify and Merge CI jobs.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlgn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Feb/17 12:26 PM;rameshthoomu;Patch has been submitted and merged https://gerrit.hyperledger.org/r/#/c/6229/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create LocalSigner mocks,FAB-2361,14923,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,19/Feb/17 6:21 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:04 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlgv:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I need to make hashes used throughout fabric configurable (v1),FAB-2362,14924,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,19/Feb/17 7:30 PM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,14/Mar/18 8:57 PM,,,,,v1.1.0,,,fabric-crypto,,,,0,,,,,,,,"Ultimate goal of two jira items FAB-2362 and FAB-3296 is to work towards the following :
 - retrieve hashes used within the context of a chain (proposal, txid, binding, block) from chain genesis block (*almost done - rest for post v1*)
 - [subtask of FAB-2362] retrieve hashes used within a signature from a (hardcoded) MSP property (FAB-3293)
 - [subtask of FAB-3296] retrieve chain-less operation hashes from local configuration of peers/orderers (FAB-3294) - post v1
 - [subtask of FAB-3296] enable MSP crypto configuration be retrieved at peer setup time or channel genesis (FAB-3295) - post v1

Side change-sets needed are:
 - Remove the usage of BCCSP default opts",,ChristopherFerris,Clayton Sims,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14400,14400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2420,,,,,,,,,"1|hzx5lb:",,,,Unset,,Sprint 13 - Crypto,Sprint 14 - Crypto,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/17 7:32 PM;elli-androulaki;What sort of hashing should we use for a channel creation request. This is submitted to the system channel, but the submitters do not have read access to that chain...;;;","07/Apr/17 4:06 AM;elli-androulaki;[~adc] I believe this is done right?;;;","13/Apr/17 3:48 AM;ChristopherFerris;Is this done? If so, please link Gerrit CRs [~adc] [~ellaki];;;","18/Apr/17 4:48 PM;elli-androulaki;Hi [~ChristopherFerris], the related CR is this one: 
https://gerrit.hyperledger.org/r/#/c/6617/;;;","21/Apr/17 6:29 PM;elli-androulaki;Ok, so after discussion between [~mastersingh24], [~adecaro], we concluded we can break this one into few pieces and have only MSP refactoring contained in v1.0. 
We can add later the configuration enablement of hash family on MSP when we have better ideas of making this not overly complex for the developer.;;;","03/May/17 5:00 AM;Clayton Sims;It looks like the change set is abandoned.   What is eta to complete the pieces needed for v1.;;;","03/May/17 5:07 AM;elli-androulaki;Adding [~adecaro]. I believe the v1 parts is almost done. There are a few lines of code to be modified to my knowledge but Angelo can confirm or not :);;;","04/May/17 2:14 AM;elli-androulaki;Moving the rest of the work needed to post v1, given latest discussion with [~muralisr], [~jimthematrix], [~Clayton Sims], [~adc] in today's scrum.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create common config update codepath,FAB-2364,14926,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,20/Feb/17 3:06 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:04 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlhb:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Instantiate fails with Java chaincode,FAB-2365,14927,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,sanchezl,Ratnakar,Ratnakar,20/Feb/17 3:57 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,01/Mar/17 11:47 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"Verified on commit level *{panel}ef962ca41be5343c942d10741c44b06399017cd6{panel}*
Steps followed to reproduce the issue.

*+Vagrant Window 1:+*
Start the Orderere

{panel}
ORDERER_GENERAL_LOGLEVEL=debug orderer
{panel}

*+Vagrant Window 2:+*
Start the peer

{panel}
peer node start
{panel}

*+Vagrant Window 3:+*

_*Install chaincode*_
{code}
peer chaincode install -l java -n simplesample -v 1.0 -p /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/java/SimpleSample -c '{""Args"": [""init"", ""a"",""100"", ""b"", ""200""]}'
{code}

This is successful and result is :
{panel}
Installed remotely response:<status:200 payload:""OK"" > 
{panel}

{code}
peer chaincode instantiate -l java -n simplesample -v 1.0 -p 
/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/java/SimpleSample -c '{""Args"": [""init"", ""a"",""100"", ""b"", ""200""]}'
{code}

While executing of the above command, one can see a container launched 

docker ps
{panel}
CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS               NAMES
7ec4eaab9cdb        dev-jdoe-simplesample-1.0   ""java -jar chainco...""   4 minutes ago       Up 4 minutes                            dev-jdoe-simplesample-1.0
{panel}

chiancode container below messages

{code}
docker logs -f dev-jdoe-simplesample-1.0 
Feb 19, 2017 6:16:49 PM org.hyperledger.java.shim.ChaincodeBase newPeerClientConnection
INFO: Inside newPeerCLientConnection
Feb 19, 2017 6:16:49 PM io.grpc.internal.TransportSet$1 call
INFO: Created transport io.grpc.netty.NettyClientTransport@2e949597(/0.0.0.0:7051) for /0.0.0.0:7051
Feb 19, 2017 6:16:49 PM io.grpc.internal.TransportSet$TransportListener transportReady
INFO: Transport io.grpc.netty.NettyClientTransport@2e949597(/0.0.0.0:7051) for /0.0.0.0:7051 is ready
{code}

also _*docker images*_ comes up
{panel}
REPOSITORY                     TAG                             IMAGE ID            CREATED             SIZE
dev-jdoe-simplesample-1.0      latest                          c4023eaa5463        3 minutes ago       1.46 GB
{panel}

However instantiate command fails with below error
{code}
Error: Error endorsing chaincode: rpc error: code = 2 desc = Timeout expired while starting chaincode simplesample:1.0(networkid:dev,peerid:jdoe,tx:l6esTPG8I5+xexAEvI9RV+T9B2fNB3I3mLNDWcl7pfI=)
{code}

And peer logs show below error message.
{code}
2017-02-19 18:45:11.796 UTC [ccprovider] NewCCContext -> INFO 047 NewCCCC (chain=,chaincode=lccc,version=0.7.0-snapshot-ef962ca,txid=HbAfqfC/rJtr6mATZmoJpMtXlp+YlZZ3gKT61FK3tj8=,syscc=true,proposal=0xc42151cd20,canname=lccc:0.7.0-snapshot-ef962ca
2017-02-19 18:45:31.856 UTC [gossip/comm#-1] func1 -> WARN 048 0.0.0.0:7051, PKIid:[] isn't responsive: EOF
2017-02-19 18:46:21.861 UTC [gossip/comm#-1] func1 -> WARN 049 0.0.0.0:7051, PKIid:[] isn't responsive: EOF
2017-02-19 18:46:47.160 UTC [protoutils] ValidateProposalMessage -> INFO 04a ValidateProposalMessage starts for signed proposal 0xc4213280c0
2017-02-19 18:46:47.160 UTC [protoutils] validateChannelHeader -> INFO 04b validateChannelHeader info: header type 3
2017-02-19 18:46:47.160 UTC [protoutils] checkSignatureFromCreator -> INFO 04c checkSignatureFromCreator starts
2017-02-19 18:46:47.160 UTC [protoutils] checkSignatureFromCreator -> INFO 04d checkSignatureFromCreator info: creator is &{DEFAULT DEFAULT}
2017-02-19 18:46:47.160 UTC [protoutils] checkSignatureFromCreator -> INFO 04e checkSignatureFromCreator info: creator is valid
2017-02-19 18:46:47.160 UTC [protoutils] checkSignatureFromCreator -> INFO 04f checkSignatureFromCreator exists successfully
2017-02-19 18:46:47.160 UTC [protoutils] validateChaincodeProposalMessage -> INFO 050 validateChaincodeProposalMessage starts for proposal 0xc4213b34f0, header 0xc420139ff0
2017-02-19 18:46:47.160 UTC [protoutils] validateChaincodeProposalMessage -> INFO 051 validateChaincodeProposalMessage info: header extension references chaincode name:""lccc"" 
2017-02-19 18:46:47.160 UTC [ccprovider] NewCCContext -> INFO 052 NewCCCC (chain=testchainid,chaincode=lccc,version=0.7.0-snapshot-ef962ca,txid=l6esTPG8I5+xexAEvI9RV+T9B2fNB3I3mLNDWcl7pfI=,syscc=true,proposal=0xc4213b34f0,canname=lccc:0.7.0-snapshot-ef962ca
2017-02-19 18:46:47.161 UTC [ccprovider] NewCCContext -> INFO 053 NewCCCC (chain=testchainid,chaincode=simplesample,version=1.0,txid=l6esTPG8I5+xexAEvI9RV+T9B2fNB3I3mLNDWcl7pfI=,syscc=false,proposal=0xc4213b34f0,canname=simplesample:1.0
2017-02-19 18:47:11.869 UTC [gossip/comm#-1] func1 -> WARN 054 0.0.0.0:7051, PKIid:[] isn't responsive: EOF
2017-02-19 18:48:01.871 UTC [gossip/comm#-1] func1 -> WARN 055 0.0.0.0:7051, PKIid:[31 187 223 182 199 174 91 202 182 195 76 101 193 68 82 145 75 51 75 246 120 133 185 26 237 208 150 137 159 72 218 133] isn't responsive: connection error: desc = ""transport is closing""
2017-02-19 18:49:16.882 UTC [gossip/comm#-1] func1 -> WARN 056 0.0.0.0:7051, PKIid:[] isn't responsive: EOF
2017-02-19 18:51:21.887 UTC [gossip/comm#-1] func1 -> WARN 057 0.0.0.0:7051, PKIid:[] isn't responsive: EOF
2017-02-19 18:51:56.973 UTC [chaincode] processStream -> ERRO 058 Error handling chaincode support stream: stream error: code = 1 desc = ""context canceled""
2017-02-19 18:51:57.086 UTC [chaincode] Launch -> ERRO 059 launchAndWaitForRegister failed Timeout expired while starting chaincode simplesample:1.0(networkid:dev,peerid:jdoe,tx:l6esTPG8I5+xexAEvI9RV+T9B2fNB3I3mLNDWcl7pfI=)
{code}

_As a result of this Invoke/Query fails._",,Ratnakar,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2501,,,,,,,,,,,,,,"20/Feb/17 3:57 AM;Ratnakar;orderer.txt;https://jira.hyperledger.org/secure/attachment/10519/orderer.txt","20/Feb/17 3:57 AM;Ratnakar;peer-logs.txt;https://jira.hyperledger.org/secure/attachment/10518/peer-logs.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlhj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate channel creation onto configupdate common path,FAB-2366,14928,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,20/Feb/17 6:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:04 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlhr:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused orderer.yaml options,FAB-2367,14929,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,20/Feb/17 6:49 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,26/Feb/17 8:05 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlhz:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
crash with badly constructed transaction payload,FAB-2368,14930,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,20/Feb/17 7:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,20/Apr/17 9:24 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"We get a runtime panic if for some reason the Transaction does not contain a valid TransactionAction


{code:java}
panic: runtime error: index out of range

goroutine 146 [running]:
panic(0xb0eb40, 0xc420010100)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/protos/utils.GetActionFromEnvelope(0xc420072000, 0xc02, 0xc02, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/utils/proputils.go:472 +0xf4
github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb.(*historyDB).Commit(0xc421409100, 0xc4216b5e60, 0x36, 0xc4215cc500)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb/historyleveldb.go:112 +0x294
github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).Commit(0xc4213f9300, 0xc4216b5e60, 0x1, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:232 +0x3db
github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*closableLedger).Commit(0xc421409220, 0xc4216b5e60, 0x0, 0x0)
        <autogenerated>:1 +0x54
github.com/hyperledger/fabric/core/committer.(*LedgerCommitter).Commit(0xc4214a3100, 0xc4216b5e60, 0x5, 0x2)
        /opt/gopath/src/github.com/hyperledger/fabric/core/committer/committer_impl.go:62 +0x121
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock(0xc4214a4cf0, 0xc4216b5e60, 0x1, 0x4, 0xc42166dfb8)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:397 +0x56
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc4214a4cf0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:294 +0x458
created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:148 +0x692
{code}

This happened because the nodejs client was out of sync on protos, but still, this should be handled gracefully.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7fz:",,,,,,Sprint 12 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric v0.6 PBFT is not working with 4 peers,FAB-2374,14936,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,jsong1230,jsong1230,20/Feb/17 9:30 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 7:11 AM,,,,,v0.6,,,fabric-peer,,,,0,,,,,,,,"I got the following error messages with PBFT setting (4 instances in AWS) in Fabric v0.6.
Is there any clue?
Thanks.
===================================================================
21:26:24.043 [peer] handleChat -> ERRO 27b Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created
21:26:25.656 [consensus/pbft] sendViewChange -> INFO 27c Replica 0 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:25.656 [consensus/pbft] recvViewChange -> INFO 27d Replica 0 received view-change from replica 0, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:25.656 [consensus/pbft] recvViewChange -> WARN 27e Replica 0 already has a view change message for view 1 from replica 0
21:26:27.686 [consensus/pbft] sendViewChange -> INFO 27f Replica 0 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:27.687 [consensus/pbft] recvViewChange -> INFO 280 Replica 0 received view-change from replica 0, v:1, h:0, |C|:1, |P|:0, |Q|:1
21:26:27.687 [consensus/pbft] recvViewChange -> WARN 281 Replica 0 already has a view change message for view 1 from replica 0",,denyeart,jsong1230,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlj3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,jsong1230,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Feb/17 11:55 AM;ynamiki;[The comment in FAB-2221|https://jira.hyperledger.org/browse/FAB-2221?focusedCommentId=21128&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-21128] might also work for this.;;;","12/Apr/17 7:11 AM;denyeart;Issue does not occur on v1, closing.
If you have follow-on questions please use rocket.chat #fabric-questions channel.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB tests fail intermittently - need to disable in CI environment,FAB-2375,14938,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,20/Feb/17 11:55 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,21/Feb/17 1:40 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Receive intermittent errors during unit test such as:
08:55:26 [32munit-tests_1 [0m 2017/02/20 08:55:25 Couch DB error status code=500 error={""error"":""internal_server_error"",""reason"":""No DB shards could be opened."",""ref"":2413987899}

CouchDB tests were recently introduced to CI in:
https://gerrit.hyperledger.org/r/#/c/6091/

We will disable the CouchDB tests in CI until the issue is resolved.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2378,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx66n:",,,,,,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance tool to output channel creation tx,FAB-2377,14940,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 1:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:28 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxljr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB tests fail intermittently - resolve root cause,FAB-2378,14941,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,21/Feb/17 1:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,23/Feb/17 3:27 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Receive intermittent errors during unit test such as:
08:55:26 [32munit-tests_1 [0m 2017/02/20 08:55:25 Couch DB error status code=500 error={""error"":""internal_server_error"",""reason"":""No DB shards could be opened."",""ref"":2413987899}

CouchDB tests were recently introduced to CI in:
https://gerrit.hyperledger.org/r/#/c/6091/

Disabled in:
https://jira.hyperledger.org/browse/FAB-2375
https://gerrit.hyperledger.org/r/#/c/6281/

Need to resolve root cause and then re-enable the tests.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2375,FAB-2388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx673:",,,,,,Sprint 12 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Feb/17 3:27 AM;denyeart;Will be fixed in FAB-2388;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
output from getBinding from test chaincode is not readable when used in CLI Command,FAB-2380,14943,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adc,Nishi,Nishi,21/Feb/17 3:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 7:14 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"vagrant@hyperledger-devenv:v0.3.0-ef962ca:/opt/gopath/src/github.com/hyperledger/fabric$ peer chaincode query -C myc1 -n mycc -c '{""Args"":[""getBinding""]}'
Query Result: 坦*�������e���i�oY��g��骹�J�

getBinding as in testchaincode:

func  (t *SimpleChaincode) getBinding(stub shim.ChaincodeStubInterface) pb.Response {
        fmt.Printf(""- getBinding \n"")
        bindingAsBytes, err := stub.GetBinding()
        if err != nil {
                return shim.Error(err.Error())
        }
       fmt.Printf("" binding from chaincode : %v"", bindingAsBytes)
        return shim.Success(bindingAsBytes)
}
",,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlk7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 7:14 AM;denyeart;Binding is binary and not meant to be viewed from a UI. Closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
output from getTxTimeStamp from test chaincode is not readable when used in CLI Command,FAB-2381,14944,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adc,Nishi,Nishi,21/Feb/17 3:15 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,12/Apr/17 7:17 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Command: peer chaincode query -C myc1 -n mycc -c '{""Args"":[""getTxTimeStamp""]}'
Output: Query Result: ��&zz��f맲�`�
                           :�>��۳X
���


code getTxTimeStamp as in testchaincode:

func (t *SimpleChaincode) getTxTimeStamp(stub shim.ChaincodeStubInterface) pb.Response {
        fmt.Printf(""- getTxTimestamp \n"")
        txTimeAsBytes, err := stub.GetBinding()
        if err != nil {
                return shim.Error(err.Error())
        }
       fmt.Printf("" txTimeBytes : %v"", txTimeAsBytes)
        return shim.Success(txTimeAsBytes)
}
",,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlkf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 7:17 AM;denyeart;Timestamp is an object, to view it you would have to convert it to a string, for example:
time.Unix(response.Timestamp.Seconds, int64(response.Timestamp.Nanos)).String())

Closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB unit-tests fail intermittently,FAB-2388,14951,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,21/Feb/17 4:25 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,01/Mar/17 4:41 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,"If the couchDB unit tests are enabled, it has been observed that the test intermittently fails with the following errors:
{code}
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Entering handleRequest()  method=PUT  url=http://couchdb:5984/couch_util_testdb
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 HTTP Request: PUT /couch_util_testdb HTTP/1.1
10:17:25 [32munit-tests_1  |[0m Host: couchdb:5984
10:17:25 [32munit-tests_1  |[0m User-Agent: Go-http-client/1.1
10:17:25 [32munit-tests_1  |[0m Content-Length: 0
10:17:25 [32munit-tests_1  |[0m Accept: application/json
10:17:25 [32munit-tests_1  |[0m Content-Type: application/json
10:17:25 [32munit-tests_1  |[0m Accept-Encoding: gzip
10:17:25 [32munit-tests_1  |[0m 
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Exiting handleRequest()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Created database couch_util_testdb 
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Exiting CreateDatabaseIfNotExist()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Entering DropDatabase()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Entering handleRequest()  method=DELETE  url=http://couchdb:5984/couch_util_testdb
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 HTTP Request: DELETE /couch_util_testdb HTTP/1.1
10:17:25 [32munit-tests_1  |[0m Host: couchdb:5984
10:17:25 [32munit-tests_1  |[0m User-Agent: Go-http-client/1.1
10:17:25 [32munit-tests_1  |[0m Content-Type: application/json
10:17:25 [32munit-tests_1  |[0m Accept-Encoding: gzip
10:17:25 [32munit-tests_1  |[0m 
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Exiting handleRequest()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Dropped database couch_util_testdb 
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Exiting DropDatabase()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Entering CreateConnectionDefinition()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Created database configuration  URL=[http://couchdb:5984]
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Exiting CreateConnectionDefinition()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Entering CreateDatabaseIfNotExist()
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Entering handleRequest()  method=GET  url=http://couchdb:5984/couch_util_testdb
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 HTTP Request: GET /couch_util_testdb HTTP/1.1
10:17:25 [32munit-tests_1  |[0m Host: couchdb:5984
10:17:25 [32munit-tests_1  |[0m User-Agent: Go-http-client/1.1
10:17:25 [32munit-tests_1  |[0m Accept: multipart/related
10:17:25 [32munit-tests_1  |[0m Accept-Encoding: gzip
10:17:25 [32munit-tests_1  |[0m 
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Couch DB error  status code=500  error={""error"":""internal_server_error"",""reason"":""No DB shards could be opened."",""ref"":2413987899}
10:17:25 [32munit-tests_1  |[0m 2017/02/20 10:17:25 Error during CouchDB CreateDatabaseIfNotExist() for dbName: couch_util_testdb  error: Couch DB Error: No DB shards could be opened.
{code}

To reproduce:
1. Run ""couchdb start"" from inside fabric to spin up CouchDB container.
2. from fabric/core/util/couchdb, run ""go test ./...""

Observation: 
1) Reporter was able to reproduce it at least once in approximately 10 runs in local X86 machine.
2) The error occurs in different places in different runs.
3) Z machine report to be updated. ",,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2378,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxllj:",,,,Unset,,Sprint 12 - Ledger,,,,,,,,,,,,,Unset,,,,,,,,,,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/17 4:44 AM;AdnanChoudhury;Solved in https://gerrit.hyperledger.org/r/#/c/6365/ The issue was the async nature of the database deletion issue in CouchDB 2.x.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create common config value handler root,FAB-2391,14954,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 5:21 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:27 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlm7:",,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a PreCommit hook to config transactions,FAB-2392,14955,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 6:46 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:28 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlmf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v10 Performance Traffic Engine - update to latest protos,FAB-2393,14956,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,21/Feb/17 7:15 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 5:43 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,"Update PTE to the latest protos regarding chaincode deployment based on frabric-sdk-node updates
Update to the following commit levels:
fabric commit level: 2fc6bc606bc5f732d9b04ce28e1d28dfbd220173
fabric-sdk-node commit level: 0344555f9671117941e5337e589e5692c49e4683
fabric-ca commit level: 18babf81a771b53dcd86d3149f4eb888bb80a7c7",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxlmn:",,,,,,Sprint 12 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move chanel config to shared handler root,FAB-2394,14957,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 7:34 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:28 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlmv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move orderer config to shared handler root,FAB-2396,14959,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 12:30 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxln3:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move organization config onto common Proposer,FAB-2397,14960,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 1:19 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlnb:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[FAB-DOC]character ` is put in a wrong position in the capture Architecture Deep Dive section 2.11,FAB-2398,14961,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,alexliu,alexliu,alexliu,21/Feb/17 1:34 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,22/Apr/17 5:30 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,"in the Capture `Architecture Deep Dive` Section `2.11`,i found a character ""`"" outside.
marked it in pic attachment.",,alexliu,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Feb/17 1:34 PM;alexliu;Screen Shot 2017-02-20 at 10.17.35 PM.png;https://jira.hyperledger.org/secure/attachment/10524/Screen+Shot+2017-02-20+at+10.17.35+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlnj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,alexliu,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/17 3:20 PM;alexliu;commit https://gerrit.hyperledger.org/r/#/c/6309/;;;","21/Feb/17 3:32 PM;alexliu;https://gerrit.hyperledger.org/r/#/c/6309/;;;","16/Apr/17 10:38 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8083/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move application org config to common Proposer,FAB-2399,14962,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,21/Feb/17 1:44 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlnr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow OUs to be contained in MSP description,FAB-2400,14963,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,21/Feb/17 6:42 PM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,24/Apr/17 12:47 AM,,,,,v1.0.0,,,fabric-crypto,,,,1,,,,,,,,"This is the item involving extending our default MSP implementation to include an OU specificiation in its description, and subsequently deem as valid certificates that are signed by one of the listed root / intermediate CAs and their organizational unit equals the one in the MSP configuration.

This item consists of three sub-tasks:

A) Update of fabric MSP configuration as follows:
    - Root CAs (*done*)
    - Intermediate CAs (*done*)
    - (a list of) a list of OU identifier (*almost done*: field is there but is not used)
    - Admin (*done*)
    - CRL (*done*)

This is reflected to extended FabricMSPConfig to include an additional field (*done*)
   - repeated FabricOUIdentifier OUs 

where FabricOUIdentifier is a an additionally defined message in common package defined as follows (*done*)
   - byte[]/string certifiersIdentiifer // hash of certificate chain to the root
   - string OrganizationalUnit // current organizational unit identifier

B) Update the fabric MSP setup, and ValidateIdentity, GetOrganizationalUnit function implementation as follows:
   - Setup is to take as input the OUs and stored within the MSP (*todo*)
   - ValidateIdentity would need to check if the OUs listed within the identity match the OUs of the MSP state (*todo*: perhaps by using the satisfiesMSPPrincipal function that is already implemented :))
   - GetOrganizationalUnit function needs to be changed to return FabricOUIdentifiers (*done*)

C) Computation of the FabricOUIdentifier.certifiersIdentifier is to be computed as follows (*done*): 
    - Get certificate's certification chain to the top (created at validation time), let it be CertChain. 
    - Compute the hash (CertChain), say HCertChain
    - Set FabricOUIdentifier.certifiersIdentifier to HCertChain


",,binhn,elli-androulaki,mastersingh24,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10800,10800,,0%,10800,10800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5f3:",,,,Unset,,Sprint 12 - Crypto,Sprint 13 - Crypto,Sprint 16 - Crypto,,,,,,,,,,,Unset,,,,,,,,,,,binhn,elli-androulaki,mastersingh24,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Feb/17 6:45 PM;elli-androulaki;Inviting [~ales], and [~adc] to discuss this. ;;;","21/Feb/17 8:05 PM;mastersingh24;so the assumption here is that an MSP could have one or more distinct root / intermediate CAs and therefore we need to tie one or more OUs to the correct certificate chain?

;;;","21/Feb/17 8:38 PM;elli-androulaki;Correct.;;;","08/Apr/17 5:09 AM;binhn;I am moving this to post 1.0;;;","18/Apr/17 5:17 PM;elli-androulaki;Hi, according to the discussion on fabric-crypto, this item needs to be accommodated in v1.
As a part of this has been accommodated via two jira items 
 - FAB 3039: to add certification path inside the OU definition
 - FAB XXX: to add support for OU-based principals in the policy framework (checking if an identity includes a set of OUs) 
I will update the description above to reflect the remaining work to offer this capability.
 ;;;","21/Apr/17 6:26 PM;elli-androulaki;Related CR: 
https://gerrit.hyperledger.org/r/#/c/8345/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disallow configuration of block hashing algorithm,FAB-2404,14967,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,jyellick,jyellick,21/Feb/17 11:54 PM,23/Jan/20 3:52 AM,28/Oct/23 2:58 AM,23/Jan/20 3:52 AM,v1.0.0,v1.0.0-alpha1,v1.0.1,v1.0.2,,,,fabric-orderer,,,,0,common-components,stale-item,,,,,,"The hashing algorithm for the system used to be fixed at SHAKE256, this was changed to SHA2-256, but additionally an option for SHA3-256 was added.  Because the block hashing is hardcoded in so many places, we cannot actually support switching this hashing algorithm currently.",,jyellick,kchristidis,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlon:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jyellick,kchristidis,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/17 9:13 PM;kchristidis;[~jyellick]: I know this is post-v1, but can we outline the plan of attack here?;;;","25/Aug/17 12:02 AM;jyellick;This can probably be invalidated, it's low priority, and will probably only be addressed when the hashing algorithm is actually configurable.;;;","01/Oct/17 4:30 AM;mastersingh24;[~kchristidis] [~jyellick] New Feature?  future release obviously;;;","23/Jan/20 3:52 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can Not Run Behave To Create Bootstrap Artifacts,FAB-2406,14969,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jeffgarratt,bmos299,bmos299,22/Feb/17 1:32 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,28/Feb/17 1:50 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"I am trying to create the bootstrap artifacts to do an E2E run.  I am following the instructions as described in FAB-1141 (gerrit patch set 6257) and using vagrant.  I am using commit  *9b972b2e8eb0957580de09230ea390f627b576ad* and receiving the following error using command:
{panel}
behave -k -D cache-deployment-spec features/bootstrap.feature
{panel}

{code}
vagrant@hyperledger-devenv:v0.3.0-a5714ce:/opt/gopath/src/github.com/hyperledger/fabric/bddtests$ behave -k -D cache-deployment-spec features/bootstrap.feature
Exception TypeError: Couldn't parse file content!
Traceback (most recent call last):
  File ""/usr/local/bin/behave"", line 11, in <module>
    sys.exit(main())
  File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 109, in main
    failed = runner.run()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 672, in run
    return self.run_with_paths()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 677, in run_with_paths
    self.load_hooks()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 631, in load_hooks
    exec_file(hooks_path, self.hooks)
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 304, in exec_file
    exec(code, globals, locals)
  File ""environment.py"", line 3, in <module>
    from steps.docgen import DocumentGenerator
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/docgen.py"", line 16, in <module>
    from bootstrap_util import getDirectory
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 40, in <module>
    import orderer_util
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 23, in <module>
    import devops_pb2
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/devops_pb2.py"", line 16, in <module>
    import chaincode_pb2 as chaincode__pb2
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/chaincode_pb2.py"", line 27, in <module>
    dependencies=[chaincodeevent__pb2.DESCRIPTOR,google_dot_protobuf_dot_timestamp__pb2.DESCRIPTOR,])
  File ""/usr/local/lib/python2.7/dist-packages/google/protobuf/descriptor.py"", line 824, in __new__
    return _message.default_pool.AddSerializedFile(serialized_pb)
TypeError: Couldn't parse file content!
vagrant@hyperledger-devenv:v0.3.0-a5714ce:/opt/gopath/src/github.com/hyperledger/fabric/bddtests$
{code}

I think some of the people are hitting this issue, and some are not experiencing the problem. ",,bmos299,harsha544,jeffgarratt,rameshthoomu,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/17 12:19 AM;bmos299;6389.console;https://jira.hyperledger.org/secure/attachment/10531/6389.console","23/Feb/17 11:47 PM;rameshthoomu;behave_2406_CI failure.txt;https://jira.hyperledger.org/secure/attachment/10530/behave_2406_CI+failure.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlov:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,harsha544,jeffgarratt,rameshthoomu,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/17 10:52 PM;rameshthoomu;Observed the same issue in Jenkins (CI).. Build Reference is here: https://jenkins.hyperledger.org/sandbox/job/fabric-verify-behave-x86_64/5/consoleText;;;","23/Feb/17 4:46 AM;jeffgarratt;I have the changes for this one but a rebase now has an issue due to channel/writer policy requirement.  Trying to get in touch with either [~jyellick] or [~muralisr] to get last bit done.  Will update asap.;;;","23/Feb/17 7:00 AM;jeffgarratt;Pushed a CR https://gerrit.hyperledger.org/r/#/c/6389/

Fails on deployment due to:
'''
 The proposal does not comply with the channel writers for channel com.acme.blockchain.jdoe.Channel1, error No such policy type: Application/Writers)
'''

Notified [~rameshthoomu] to allow him to verify.;;;","23/Feb/17 12:22 PM;bmos299;Hi Jeff, it looks like it got a lot further.  Is there where you now expect it to fail?

{code}
    When user ""dev0Org0"" connects to deliver function on orderer ""orderer0""                                                                                                                                 # None
    And user ""dev0Org0"" sends deliver a seek request on orderer ""orderer0"" with properties                                                                                                                  # None
      | ChainId                           | Start | End |
      | com.acme.blockchain.jdoe.Channel1 | 1     | 1   |
    Then user ""dev0Org0"" should get a delivery ""deploymentTransaction11Block"" from ""orderer0"" of ""1"" blocks with ""1"" messages within ""1"" seconds                                                            # None

context.failed = True

Failing scenarios:
  features/bootstrap.feature:181  Bootstrap a development network with 4 peers (2 orgs)  and 1 orderer (1 org), each having a single independent root of trust (No fabric-ca, just openssl) -- @1.1 Orderer Options

0 features passed, 1 failed, 0 skipped
0 scenarios passed, 1 failed, 0 skipped
12 steps passed, 1 failed, 24 skipped, 2 undefined
Took 0m3.112s

You can implement step definitions for undefined steps with these snippets:

@when(u'user ""dev0Org0"" creates a transaction ""deploymentTransaction1"" from proposal responses ""deploymentProposalResponses""')
def step_impl(context):
    raise NotImplementedError(u'STEP: When user ""dev0Org0"" creates a transaction ""deploymentTransaction1"" from proposal responses ""deploymentProposalResponses""')

@when(u'the user ""dev0Org0"" broadcasts transaction ""deploymentTransaction1"" on channel ""com.acme.blockchain.jdoe.Channel1"" to orderer ""orderer0""')
def step_impl(context):
    raise NotImplementedError(u'STEP: When the user ""dev0Org0"" broadcasts transaction ""deploymentTransaction1"" on channel ""com.acme.blockchain.jdoe.Channel1"" to orderer ""orderer0""')


{code}
;;;","23/Feb/17 11:45 PM;jeffgarratt;It should get past this.  It appears to be failing on the docker compose step.  Can you post the complete console output?;;;","23/Feb/17 11:53 PM;rameshthoomu;With gerrit patch 
{noformat}
https://gerrit.hyperledger.org/r/#/c/6389
{noformat}
we are able to proceed further in CI but getting below error. Attached log file here.

{code:java}
Exception TypeError: Couldn't build proto file into descriptor pool!
Invalid proto descriptor for file ""peer/chaincodeevent.proto"":
protos.ChaincodeEvent.chaincodeID: ""protos.ChaincodeEvent.chaincodeID"" is already defined in file ""chaincodeevent.proto"".
protos.ChaincodeEvent.txID: ""protos.ChaincodeEvent.txID"" is already defined in file ""chaincodeevent.proto"".
protos.ChaincodeEvent.eventName: ""protos.ChaincodeEvent.eventName"" is already defined in file ""chaincodeevent.proto"".
protos.ChaincodeEvent.payload: ""protos.ChaincodeEvent.payload"" is already defined in file ""chaincodeevent.proto"".
protos.ChaincodeEvent: ""protos.ChaincodeEvent"" is already defined in file ""chaincodeevent.proto"".
{code}

 [^behave_2406_CI failure.txt]  ;;;","24/Feb/17 12:20 AM;bmos299;Hi Jeff, I am attaching the console for the failure.  Ramesh and I are working on getting the same failure in CI.  Once we do we can work through the CI. ;;;","24/Feb/17 12:21 AM;bmos299;The attachment is 6389.console.;;;","24/Feb/17 2:17 AM;rameshthoomu;[~jeffgarratt] now CI is failing with the same error what [~bmos299] mentioned above. Please see the build output here: https://jenkins.hyperledger.org/sandbox/job/fabric-verify-behave-x86_64/26/consoleText;;;","24/Feb/17 2:34 AM;jeffgarratt;[~rameshthoomu] and [~bmos299], this looks much better!!!  It is strange that you are getting this failure, but this scenario will not pass anyway given the current state of the system.  Says that ""dump_publickey"" is not in the module, but it is definitely due to ""from OpenSSL import crypto"" import.

This seems very strange.  Is it repeatable?;;;","24/Feb/17 2:37 AM;rameshthoomu;Yes [~jeffgarratt] it is much better now.. Yes. it's is reproducible in Jenkins CI. I can re-test this in vagrant environment;;;","25/Feb/17 11:20 PM;Ratnakar;the keystore artifacts should be named as below , for bootstrap artifacts to work for e2e usecase
*keystore/9346057e86eafe76e698497d6ec3c20af8ad5cecb72b8c1386f91f0f13fe0831_sk* ;;;","27/Feb/17 11:39 PM;rameshthoomu;[~jeffgarratt] Observed below error while running behave tests on latest commits:

{noformat}
    Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 261, in step_impl
          signedProposal = endorser_util.signProposal(proposal=proposal, entity=user, signersCert=signersCert)
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/bddtests/steps/endorser_util.py"", line 67, in signProposal
          entity.verifySignature(signature=signature, signersCert=signersCert, data=proposalBytes)
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 189, in verifySignature
          vk = ecdsa.VerifyingKey.from_der(crypto.dump_publickey(crypto.FILETYPE_ASN1, signersCert.get_pubkey()))
      AttributeError: 'module' object has no attribute 'dump_publickey'
{noformat}

Build Reference is here: https://jenkins.hyperledger.org/sandbox/job/fabric-verify-behave-x86_64/1/consoleText;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
check in network launcher,FAB-2407,14970,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,22/Feb/17 1:33 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,31/Mar/17 2:30 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,"Check in network launcher to hyperledger fabric.
The launcher can create a network for test based on user's options, such as number of peers, orderers, kafka vs solo, db type etc.   This can be used by developers and testers. ",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4vr:",,,,,,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Policy manager not respecting absolute paths,FAB-2408,14971,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,22/Feb/17 1:40 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:27 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlp3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Unable to execute E2E test , fails at instantiating chaincode step",FAB-2409,14972,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisr,Ratnakar,Ratnakar,22/Feb/17 1:59 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,25/Feb/17 11:35 PM,,,,,v1.0.0,,,fabric-peer,,,,0,Endorser,v1.0,,,,,,"Commit Level: *9b972b2e8eb0957580de09230ea390f627b576ad*

Followed the instructions from JIRA FAB-1141 and Gerrit : https://gerrit.hyperledger.org/r/#/c/6257/
and generated required artifacts from behave using the below command 

{panel}
	behave -k -D cache-deployment-spec features/bootstrap.feature
{panel}

Used docker-compose from bddtests https://github.com/hyperledger/fabric/blob/master/bddtests/docker-compose-next-4.yml as a reference.

Changed 4th peer (peer3) to CLI container to execute the channel creation , join , install & instantiate commands

(https://github.com/hyperledger/fabric/blob/master/bddtests/docker-compose-next-4.yml#L54)


Also, used configtxtool to generate the genesis.block and Channel Txn with below commands

{code}
configtxgen
configtxgen -profile SampleSingleMSPSolo -outputBlock genesis.block -channelID myc1
configtxgen -profile SampleSingleMSPSolo -outputCreateChannelTx myc1 -channelID myc1 
{code}

Modified the docker-compose file accordingly to use the genesis block and myc1 channel transaction.


Executed the below commands (a shell script single_channel.sh inside the cli container )
{code}
cd chaincode_sample
docker-compose up -d
docker logs -f cli
{code}


Channel creation , joing channela and chaincode installation on a remote peer are successful, however it fails at instantiation.

Below are the gist of failure logs

{code}
2017-02-21 16:10:05.137 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-21 16:10:05.138 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-21 16:10:05.138 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-21 16:10:05.138 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default escc
2017-02-21 16:10:05.138 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 005 Using default vscc
2017-02-21 16:10:05.138 UTC [msp] Sign -> DEBU 006 Sign: plaintext: 0A8A050A54080322046D7963312A4061...41554C540A04657363630A0476736363 
2017-02-21 16:10:05.138 UTC [msp] Sign -> DEBU 007 Sign: digest: 0ACBD07CCDAA259AA08C7C6311A01C517F4E92C33772FD41F414267A3E6702F5 
Error: Error endorsing chaincode: rpc error: code = 2 desc = The creator certificate is not valid, err The supplied identity is not valid, Verify() returned x509: certificate signed by unknown authority

Usage:
  peer chaincode instantiate [flags]

Global Flags:
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode

{code}


All the artificts and docker-compose enclosed with this issue.",,bmos299,muralisr,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2467,,,,,,"22/Feb/17 1:57 AM;Ratnakar;chaincode_sample_Feb21.zip;https://jira.hyperledger.org/secure/attachment/10525/chaincode_sample_Feb21.zip","22/Feb/17 7:39 AM;Ratnakar;configtx.yaml;https://jira.hyperledger.org/secure/attachment/10528/configtx.yaml","22/Feb/17 7:38 AM;Ratnakar;core.yaml;https://jira.hyperledger.org/secure/attachment/10526/core.yaml","22/Feb/17 7:38 AM;Ratnakar;orderer.yaml;https://jira.hyperledger.org/secure/attachment/10527/orderer.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlpb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,muralisr,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/17 6:21 AM;Ratnakar;Got the working version of yaml files from murali and required commands

{code}
make configtxgen
make peer 
make orderer

configtxgen -outputBlock orderer.block -outputCreateChannelTx myc1 -profile ThreeOrgs -channelID myc1

ORDERER_GENERAL_GENESISMETHOD=file ORDERER_GENERAL_GENESISFILE=orderer.block ORDERER_GENERAL_LOCALMSPDIR=msp/localMspConfig ORDERER_GENERAL_LOCALMSPID=OrdererMSP orderer

CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer node start --peer-defaultchain=false

 peer channel create -c myc1

CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer channel join -b myc1.block

CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0

CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0

 CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer chaincode instantiate -C threeorgs -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
{code};;;","22/Feb/17 7:38 AM;Ratnakar;There is a dependency with the changeset https://gerrit.hyperledger.org/r/#/c/5955
We must provide *-P* policy option during instantiating chaincode

{code}
CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer chaincode instantiate -C myc1 -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -P ""AND('PEER0.member')""
{code}

Invoke/Query works with normal commands
{code}
CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer chaincode invoke -C myc1 -n mycc -c '{""Args"":[""invoke"",""a"",""b"",""10""]}'
CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig CORE_PEER_LOCALMSPID=PEER0 peer chaincode query -C myc1 -n mycc -c '{""Args"":[""query"",""a""]}'
{code};;;","22/Feb/17 7:38 AM;Ratnakar;Adding core.yaml, ordere.yaml and configtx.yaml file for reference.;;;","22/Feb/17 11:23 AM;Ratnakar;There is a dependency with this patch https://gerrit.hyperledger.org/r/#/c/6335 as well to make End-to-End scenario work;;;","22/Feb/17 3:41 PM;Ratnakar;When tried with a Docker-compose using peer and orderer images, with the above patchsets applied. 

I am stuck at this stage where unable to succeed with invoke
{code}
2017-02-22 06:28:54.753 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-22 06:28:54.754 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-22 06:28:54.754 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-22 06:28:54.754 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0A8A050A54080322046D7963312A4031...7570697375706F697275736F69756F75 
2017-02-22 06:28:54.755 UTC [msp] Sign -> DEBU 005 Sign: digest: 8F72A67AD73CB022F49CCB8A2C22322C2A3757164FA550F7F60B8DC68291862E 
Error: Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for mycc - transaction not found mycc/myc1
{code}

And peer logs says chaincode transaction is not available on this chain
{code}
2017-02-22 06:29:09.829 UTC [shim] sendChannel -> DEBU 495 [71c7dc32]before send
2017-02-22 06:29:09.829 UTC [shim] sendChannel -> DEBU 496 [71c7dc32]after send
2017-02-22 06:29:09.829 UTC [shim] afterResponse -> DEBU 497 [71c7dc32]Received RESPONSE, communicated (state:ready)
2017-02-22 06:29:09.829 UTC [shim] handleGetState -> DEBU 498 [71c7dc32]GetState received payload RESPONSE
2017-02-22 06:29:09.829 UTC [lccc] Invoke -> ERRO 499 ChaincodeId: mycc does not exist on channel: myc1(err:chaincode not found mycc)
2017-02-22 06:29:09.829 UTC [shim] func1 -> DEBU 49a [71c7dc32]Transaction completed. Sending COMPLETED
2017-02-22 06:29:09.829 UTC [shim] func1 -> DEBU 49b [71c7dc32]Move state message COMPLETED
{code};;;","22/Feb/17 10:52 PM;bmos299;To summarize where this bug stands:

1.  To get the local E2E flow to work two patch sets need merged:
 Patch set https://gerrit.hyperledger.org/r/#/c/5955 (verified) and https://gerrit.hyperledger.org/r/#/c/6335 (not verified).
*This needs reviewed and merged asap*
2.  With these two patch sets Ratnakar then gets the local E2E flow working (native binaries in vagrant).  However, when he then leverages a real network via docker-compose, the invoke fails.  We will open a new bug for this issue. 

Thanks, Barry 

;;;","23/Feb/17 10:54 PM;bmos299;Current State: Patch set 6355 is merged.  Patch set 5955 is not and looking in gerrit it is dependent on https://gerrit.hyperledger.org/r/#/c/6379.    ;;;","24/Feb/17 4:16 AM;bmos299;Hi Murali, Ratnakar and I ran your instructions provided, pulling in the fixes as directed.  We both fail on the instantiate:


{code}
ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric# CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_LOCALMSPID=Org0MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig peer channel join -b foo.block
Join Result:
2017-02-23 19:04:44.992 UTC [main] main -> INFO 001 Exiting.....
root@ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric# CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=Org1MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer1/localMspConfig peer channel join -b foo.block
Join Result:
2017-02-23 19:05:16.196 UTC [main] main -> INFO 001 Exiting.....
root@ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric# CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer2:7051 CORE_PEER_LOCALMSPID=Org2MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer2/localMspConfig peer channel join -b foo.block
Join Result:
2017-02-23 19:05:41.695 UTC [main] main -> INFO 001 Exiting.....
root@ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric# CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer3:7051 CORE_PEER_LOCALMSPID=Org3MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer3/localMspConfig peer channel join -b foo.block
Join Result:
2017-02-23 19:05:53.357 UTC [main] main -> INFO 001 Exiting.....
root@ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric# CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_LOCALMSPID=Org0MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0
Installed remotely response:<status:200 payload:""OK"" >
root@ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric# CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=Org1MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer1/localMspConfig peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0
Installed remotely response:<status:200 payload:""OK"" >
root@ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric# CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=Org1MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer1/localMspConfig peer chaincode instantiate -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -C foo -P ""OR('Org0MSP.member','Org1MSP.member','Org0MSP.member','Org3MSP.member')""
Error: Error endorsing chaincode: rpc error: code = 2 desc = The proposal does not comply with the channel writers for channel foo, error Failed to reach implicit threshold of 3 sub-policies, required 3 remaining

Usage:
  peer chaincode instantiate [flags]

Global Flags:
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode

root@ebe010a9a0f1:/opt/gopath/src/github.com/hyperledger/fabric#

{code}

Here are the directions (info for the general reader) that Murali sent out:
{code}
Scenario
4 orgs with MSPs
Orderer genesis block generated with configtxgen
Channel foo generated with configtxgen
Endorsement policy for invokes - 1 of 4 members from the 4 orgs

Prereqs tested with
https://gerrit.hyperledger.org/r/#/c/6379/ - CR to be merged
https://gerrit.hyperledger.org/r/#/c/5955 - CR to be merged 


Test

Build
make
make peer-docker
make orderer-docker
make configtxgen

In Vagrant ...

generate the genesis block for orderer in ""fabric"" folder
configtxgen -outputBlock fourorgs.orderer.block -profile FourOrgs
orderer.yaml used by the orderer container


start the network
docker-compose -f docker-e2e.yml up


(4 orgs with one peer each.... the anchor peer is also an org leader ... Yacov, in this case we are not really testing gossip as each peer is directly getting block from orderer correct ? Will be nice to test variatios...this could be a next step to branch off into gossip based tests).

verify 5 containers started
docker ps

create the channel tx for foo
configtxgen -outputCreateChannelTx foo.tx -profile FourOrgs -channelID foo

where configtx.yml is


exec CLI
docker exec -it cli bash

create the channel
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 peer channel create -c foo -f foo.tx

The channel create command is using foo.tx from the configtxgen tool.

join the channel
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_LOCALMSPID=Org0MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig peer channel join -b foo.block

CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=Org1MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer1/localMspConfig peer channel join -b foo.block

CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer2:7051 CORE_PEER_LOCALMSPID=Org2MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer2/localMspConfig peer channel join -b foo.block

CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer3:7051 CORE_PEER_LOCALMSPID=Org3MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer3/localMspConfig peer channel join -b foo.block

The channel join command is using the foo.block from the ""peer channel create"" command.

install on 0 and 1 (but not on 2 or 3)
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_LOCALMSPID=Org0MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0

CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=Org1MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer1/localMspConfig peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0

instantiate from1 on channel foo...
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=Org1MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer1/localMspConfig peer chaincode instantiate -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -C foo -P ""OR('Org0MSP.member','Org1MSP.member','Org0MSP.member','Org3MSP.member')""

(note the Endorsement Policy to be validated by VSCC)

...but query on 0, should work as we installed the CC on 0 and 1
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_LOCALMSPID=Org0MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig peer chaincode query -n mycc -v 0 -c '{""Args"":[""query"",""a""]}' -C foo

...and invoke on 0, shoud work as 0 has the CC
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer0:7051 CORE_PEER_LOCALMSPID=Org0MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer0/localMspConfig peer chaincode invoke -n mycc -v 0 -c '{""Args"":[""invoke"",""a"",""b"",""10""]}' -C foo

...now install on 2 too
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer2:7051 CORE_PEER_LOCALMSPID=Org2MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer2/localMspConfig peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v 0

...and query on 2 which should work as it has been getting the commits
CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005 CORE_PEER_ADDRESS=peer2:7051 CORE_PEER_LOCALMSPID=Org2MSP CORE_PEER_MSPCONFIGPATH=examples/chaincode_sample/crypto/peer/peer2/localMspConfig peer chaincode query -n mycc -v 0 -c '{""Args"":[""query"",""a""]}' -C foo

{code};;;","24/Feb/17 10:23 PM;muralisr;[~bmos299] [~Ratnakar] can you try with latest ... a default ACL check was being too strict. Till we get the abolity to specify policy, reverting that check with https://gerrit.hyperledger.org/r/#/c/6471;;;","24/Feb/17 10:34 PM;Ratnakar;[~muralisr] Made same changes yesterday night and verified End-to-End is working with those changes.;;;","25/Feb/17 1:24 AM;Ratnakar;Could see peer and orderer crahsed with latest code *709d87b30060937c26b434db8baf9796b529449a*
{code}
CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS                      PORTS               NAMES
63640f1ad2c7        hyperledger/fabric-peer      ""peer node start -...""   11 seconds ago      Exited (2) 10 seconds ago                       peer3
4438096f0a86        hyperledger/fabric-peer      ""sh -c './script.s...""   11 seconds ago      Up 10 seconds                                   cli
efa4ca85075d        hyperledger/fabric-peer      ""peer node start -...""   11 seconds ago      Exited (2) 11 seconds ago                       peer2
52573c09d81e        hyperledger/fabric-peer      ""peer node start -...""   12 seconds ago      Exited (2) 11 seconds ago                       peer1
bb6f5c16457f        hyperledger/fabric-peer      ""peer node start -...""   12 seconds ago      Exited (2) 11 seconds ago                       peer0
1ac6fdf4966d        hyperledger/fabric-orderer   ""orderer""                13 seconds ago      Exited (2) 12 seconds ago                       orderer
{code}
{panel}
docker logs -f orderer
{panel}
{code}
vagrant@hyperledger-devenv:v0.3.0-7a2afe2:/opt/gopath/src/github.com/hyperledger/fabric/chaincode_sample$ docker logs -f orderer 
2017-02-24 16:18:21.313 UTC [viperutil] EnhancedExactUnmarshal -> INFO 001 map[genesis:map[DeprecatedBatchTimeout:10s DeprecatedBatchSize:99 MB SbftShared:map[N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem]]] general:map[GenesisProfile:SampleInsecureSolo TLS:map[PrivateKey:<nil> Certificate:<nil> RootCAs:<nil> ClientAuthEnabled:false ClientRootCAs:<nil> Enabled:false] GenesisFile:/var/hyperledger/orderer/orderer.block LocalMSPDir:/var/hyperledger/orderer/localMspConfig LedgerType:ram ListenAddress:0.0.0.0 GenesisMethod:file BCCSP:map[Default:SW SW:map[FileKeyStore:map[KeyStore:<nil>] Hash:SHA3 Security:256]] LocalMSPID:OrdererMSP Profile:map[Address:0.0.0.0:6060 Enabled:false] LogLevel:debug ListenPort:7050] ramledger:map[HistorySize:1000] fileledger:map[Prefix:hyperledger-fabric-ordererledger Location:<nil>] kafka:map[Retry:map[Period:3s Stop:60s] Verbose:false TLS:map[Certificate:<nil> RootCAs:<nil> Enabled:false PrivateKey:<nil>]] sbftlocal:map[CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp PeerCommAddr::6101]]
2017-02-24 16:18:21.314 UTC [orderer/config] completeInitialization -> INFO 002 Validated configuration to: &{General:{LedgerType:ram ListenAddress:0.0.0.0 ListenPort:7050 TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]} GenesisMethod:file GenesisProfile:SampleInsecureSolo GenesisFile:/var/hyperledger/orderer/orderer.block Profile:{Enabled:false Address:0.0.0.0:6060} LogLevel:debug LocalMSPDir:/var/hyperledger/orderer/localMspConfig LocalMSPID:OrdererMSP BCCSP:0xc420212da0} RAMLedger:{HistorySize:1000} FileLedger:{Location: Prefix:hyperledger-fabric-ordererledger} Kafka:{Retry:{Period:3s Stop:1m0s} Verbose:false Version:{version:[0 9 0 1]} TLS:{Enabled:false PrivateKey: Certificate: RootCAs:[] ClientAuthEnabled:false ClientRootCAs:[]}} Genesis:{DeprecatedBatchTimeout:10s DeprecatedBatchSize:103809024 SbftShared:{N:1 F:0 RequestTimeoutNsec:1000000000 Peers:map[:6101:sbft/testdata/cert1.pem]}} SbftLocal:{PeerCommAddr::6101 CertFile:sbft/testdata/cert1.pem KeyFile:sbft/testdata/key.pem DataDir:/tmp}}
2017-02-24 16:18:21.316 UTC [SW_BCCSP] createKeyStoreIfNotExists -> INFO 003 KeyStore path [/var/hyperledger/orderer/localMspConfig/keystore] missing [false]: [<clean>]
2017-02-24 16:18:21.316 UTC [SW_BCCSP] openKeyStore -> DEBU 004 KeyStore opened at [/var/hyperledger/orderer/localMspConfig/keystore]...done
2017-02-24 16:18:21.316 UTC [BCCSP_FACTORY] initBCCSP -> DEBU 005 Initialize BCCSP [SW]
2017-02-24 16:18:21.316 UTC [msp] getPemMaterialFromDir -> DEBU 006 Reading directory /var/hyperledger/orderer/localMspConfig/cacerts
2017-02-24 16:18:21.317 UTC [msp] getPemMaterialFromDir -> DEBU 007 Inspecting file /var/hyperledger/orderer/localMspConfig/cacerts/ordererOrg0.pem
2017-02-24 16:18:21.318 UTC [msp] getPemMaterialFromDir -> DEBU 008 Reading directory /var/hyperledger/orderer/localMspConfig/signcerts
2017-02-24 16:18:21.319 UTC [msp] getPemMaterialFromDir -> DEBU 009 Inspecting file /var/hyperledger/orderer/localMspConfig/signcerts/orderer0Signer.pem
2017-02-24 16:18:21.319 UTC [msp] getPemMaterialFromDir -> DEBU 00a Reading directory /var/hyperledger/orderer/localMspConfig/admincerts
2017-02-24 16:18:21.320 UTC [msp] getPemMaterialFromDir -> DEBU 00b Inspecting file /var/hyperledger/orderer/localMspConfig/admincerts/ordererOrg0.pem
2017-02-24 16:18:21.321 UTC [msp] getPemMaterialFromDir -> DEBU 00c Reading directory /var/hyperledger/orderer/localMspConfig/intermediatecerts
2017-02-24 16:18:21.321 UTC [msp] NewBccspMsp -> DEBU 00d Creating BCCSP-based MSP instance
2017-02-24 16:18:21.321 UTC [msp] GetLocalMSP -> DEBU 00e Created new local MSP
2017-02-24 16:18:21.321 UTC [msp] Setup -> DEBU 00f Setting up MSP instance OrdererMSP
2017-02-24 16:18:21.321 UTC [msp] newIdentity -> DEBU 010 Creating identity instance for ID &{OrdererMSP IDENTITY}
2017-02-24 16:18:21.321 UTC [msp] newIdentity -> DEBU 011 Creating identity instance for ID &{OrdererMSP IDENTITY}
2017-02-24 16:18:21.321 UTC [msp] newIdentity -> DEBU 012 Creating identity instance for ID &{OrdererMSP IDENTITY}
2017-02-24 16:18:21.322 UTC [msp] getSigningIdentityFromConf -> DEBU 013 Could not find SKI [9346057e86eafe76e698497d6ec3c20af8ad5cecb72b8c1386f91f0f13fe0831], trying KeyMaterial field: Key type not recognized
panic: Failed initializing crypto [KeyMaterial not found in SigningIdentityInfo]

goroutine 1 [running]:
panic(0xa868c0, 0xc4202466f0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:90 +0x1725

{code};;;","25/Feb/17 6:12 AM;Ratnakar;Need to cherrypick the changes from https://gerrit.hyperledger.org/r/#/c/6489 to get the E2E test work.

also need to modifications to keystore of peer and orderer
ex:
_keystore/9346057e86eafe76e698497d6ec3c20af8ad5cecb72b8c1386f91f0f13fe0831_sk_
;;;","25/Feb/17 10:58 PM;Ratnakar;Verified on latest commit *ea7015e722cb751efeb0f827470f58a79a15b9c9*
E2E scenario is working , Ramesh is Integrating the scripts in CI.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Add block validation policy to config,FAB-2410,14973,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,22/Feb/17 1:59 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,26/Feb/17 8:05 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx91r:",,,,Unset,,Sprint 12 - consensus,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify GetPKIidOfCert function of gossip mcs.go to derive its value from hash(PK),FAB-2411,14974,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,22/Feb/17 2:20 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,10/Apr/17 10:29 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"This item requires modification of the GetPKIidOfCert function within mcs implementation in gossip, such that we derive the PKIid of a cert from the PK of the certificate and not of the hash of the SerializedIdentity (protobuf marshalled version of Certificate). 

The reason is that protobuf marshalling may be leading to different marshalled versions of the same certificate, and thus leading to different PKIids for the same certificate. ",,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp87:",,,,,,Sprint 12 - Crypto,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 15 - Crypto,Sprint 16 - Crypto,,,,,,,,,,,,,,,,,,,,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/17 5:24 AM;yacovm;So, if I could iterate over the MSP managers and the local MSP and try to *DeserializeIdentity* with any of them, I'd get back an *Identity* but that doesn't have a method for getting the public key.

# What if I add to the *Identity* interface a method that returns the PKI-ID? After all, the *msp.identity* actually has a field that's an x509 certificate. 
# I see that the BCCSP MSP and the *msp.identity* struct are very tightly coupled, and that the only implementation of an *Identity* is currently the *identity*, right? 
# I assume what I can do to be as forward compatible as possible, is to prepend some string that identifies an identity that is derived from an x509 certificate (or that identifies a BCCSP MSP?) and then hash the concatenated byte slice, to avoid collisions of identities that have the same public key but are used in different PKIs? 

[~ales] [~angelo.decaro] Your thoughts are also welcome.;;;","09/Apr/17 11:04 PM;yacovm;This one is now merged.
Thanks for the job, Angelo.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Install python modules & softhsm2 in Sandbox minions,FAB-2412,14975,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ryjones,rameshthoomu,rameshthoomu,22/Feb/17 4:07 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,28/Feb/17 11:20 PM,,,,,,,,,,,,0,,,,,,,,"few more modules added to the list mentioned in FAB-1141. @ry Could you please install below python modules in one of the Sandbox minion

{panel}
sudo pip install b3j0f.aop
sudo pip install -U ""jinja2""
{panel}

Also, I see a requirement installing ""softhsm2"" in CI minions from @jim. I see a shell script which installs softhsm2.. https://github.com/hyperledger/fabric/blob/master/images/testenv/install-softhsm2.sh. Could you please install this aswell in Sandbox..",,rameshthoomu,ryjones,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2427,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlpj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,ryjones,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Feb/17 7:50 AM;vpaprots;also `apt-get install libtool`;;;","22/Feb/17 9:36 AM;ryjones;https://gerrit.hyperledger.org/r/#/c/6333/;;;","28/Feb/17 11:20 PM;rameshthoomu;@ry submitted patch and it is merged. Closing this issue;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As an Org admin, I want to generate a config transaction to create a channel",FAB-2417,14980,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,22/Feb/17 7:48 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,13/Apr/17 4:01 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"CLI generates transaction based on default config (mainly msp/sampleconfig with DEFAULT id).

Now that the `configtxgen` tool is available, we can use more natural workflow to generate desired channel transaction.

Assuming such a transaction called `mychannel.tx` is generated using `configtxgen` tool for channel `mychannel` the following command will consume and submit that output to the orderer to create a channel
      peer channel create -c mychannel -f  /path/to/mychannel.tx

The `peer channel create -c mychannel` will continue to work to create channel with default config",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlqn:",,,,,,Sprint 12 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add MSPManager mock structures,FAB-2418,14981,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,22/Feb/17 1:58 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:26 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlqv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Polish/harden/optimize security code,FAB-2420,14983,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,elli-androulaki,elli-androulaki,22/Feb/17 4:20 PM,25/Sep/18 9:35 PM,28/Oct/23 2:58 AM,25/Sep/18 9:35 PM,,,,,Future,,,fabric-crypto,,,,0,,,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-3,,Security code hardening,To Do,,,Unset,,,,"1|hzxlr3:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jul/18 9:34 PM;ChristopherFerris;[~elli-androulaki] can this be marked Done?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CRL setup optimization,FAB-2421,14984,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ales,elli-androulaki,elli-androulaki,22/Feb/17 4:33 PM,23/Jan/20 3:52 AM,28/Oct/23 2:58 AM,23/Jan/20 3:52 AM,,,,,Future,,,fabric-crypto,,,,0,stale-item,,,,,,,"This relates to setting up the CRL such that 
 - all the security checks on the CRL signer is done 
 - a link between a CA with its CRL is created such that identity validation is faster",,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-8792,,,,,,,,,"1|hzzjyv:",,,,Unset,,Sprint 13 - Crypto,Sprint 14 - Crypto,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:52 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Optimize the validate identity function in gossip mcs,FAB-2422,14985,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,22/Feb/17 4:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,22/Apr/17 1:28 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"As discussed 
 - check first if the provided identity is a member of the local msp and if so, process it with that
 - iterate afterwards over the channels the peer has joined
",,Clayton Sims,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2420,,,,,,,,,"1|hzx5hj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,elli-androulaki,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Apr/17 8:10 PM;yacovm;This is done, right?
https://github.com/hyperledger/fabric/blob/master/peer/gossip/mcs/mcs.go#L238-L298;;;","13/Apr/17 3:02 AM;elli-androulaki;Let's check if this is still feasible to optimise this operation.;;;","14/Apr/17 12:44 AM;Clayton Sims;Trying to assign to one single component.  so removed gossip.    if its better to assign to gossip go ahead.  ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
HOW to enable TLS,FAB-2423,14986,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,zhangyijie,zhangyijie,22/Feb/17 6:31 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,14/Apr/17 8:42 PM,,,,,v0.6,WON'T FIX,,fabric-docs,,,,0,,,,,,,,"This is my configuration. How to set TLS? Is there more detail document ??   docker vm need open TLS ?
{code:java}
membersrvc.yaml:
  server:
        gomaxprocs: -1
        rootpath: ""/var/hyperledger/production""
        cadir: "".membersrvc""
        port: "":7054""

        # TLS certificate and key file paths
        tls:
            cert:
                file: ""/var/hyperledger/share/tlsca.crt""
            key:
                file: ""/var/hyperledger/share/tlsca.key""

security:
    # Either 256 or 384   (note: must be the exact same value as specified in the core.yaml file)
    level: 256

    # Either SHA2 or SHA3 (note: must be the exact same value as specified in the core.yaml file)
    hashAlgorithm: SHA3

    # The server host CN (Common Name) to be used (needs to match the TLS Server Certificate)
    serverhostoverride: OBC

    # Boolean (true/false) value indicating whether TLS should be used between the client and
    # the various CA services (ECA, TCA, TLSCA, ACA)
    tls_enabled: true

    # A PEM-encoded (X509 v3, Base64) certificate to use for establishing the TLS connection
    # between the client and the ACA service
    client:
       cert:
           file:_

core.yaml
    tls:
        enabled:  true
        cert:
            file: ""/var/hyperledger/share/tlsca.crt""
        key:
            file: ""/var/hyperledger/share/tlsca.key""
        # The server name use to verify the hostname returned by TLS handshake
        serverhostoverride: OBC

    # PKI member services properties
    pki:
        eca:
            paddr: localhost:7054
        tca:
            paddr: localhost:7054
        tlsca:
            paddr: localhost:7054
        tls:
            enabled: true
            rootcert:
                file: ""/var/hyperledger/share/tlsca.crt""
            # The server name use to verify the hostname returned by TLS handshake
            serverhostoverride: OBC

docker-compose.yml

membersrvc:
  image: hyperledger/fabric-membersrvc:x86_64-0.6.1-preview
  volumes:
  - /c/Users/xps15/share:/var/hyperledger/share
  - /c/Users/xps15/share/membersrvc.yaml:/opt/gopath/src/github.com/hyperledger/fabric/membersrvc/membersrvc.yaml
  ports:
    - ""7054:7054""
  command: membersrvc

vp0:
  image: hyperledger/fabric-peer:x86_64-0.6.1-preview
  volumes:
  - /var/run/docker.sock:/var/run/docker.sock
  - /c/Users/xps15/share:/var/hyperledger/share
  - /c/Users/xps15/share/core.yaml:/opt/gopath/src/github.com/hyperledger/fabric/peer/core.yaml
  ports:
    - ""7050:7050""
    - ""7051:7051""
    - ""7052:7052""
  environment:
    - CORE_PEER_ADDRESSAUTODETECT=true
    - CORE_VM_ENDPOINT=unix:///var/run/docker.sock
    - CORE_LOGGING_LEVEL=DEBUG
    - CORE_PEER_PKI_ECA_PADDR=membersrvc:7054
    - CORE_PEER_PKI_TCA_PADDR=membersrvc:7054
    - CORE_PEER_PKI_TLSCA_PADDR=membersrvc:7054
    - CORE_PEER_PKI_TLS_ENABLED=true
    - CORE_PEER_PKI_TLS_ROOTCERT_FILE=/var/hyperledger/share/tlsca.crt
    - CORE_PEER_PKI_TLS_SERVERHOSTOVERRIDE=OBC
    - CORE_SECURITY_ENABLED=true
    - CORE_SECURITY_PRIVACY=false
    - CORE_CHAINCODE_STARTUPTIMEOUT=600000
    - CORE_PEER_ID=vp0
    - CORE_SECURITY_ENROLLID=test_vp0
    - CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT
  command: sh  -c ""sleep 30; peer node start""
{code}
exception like:
33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debugf -> DEBU 013�[0m [validator.test_vp0] Keystore opened at [/var/hyperledger/production/crypto/validator/test_vp0/ks]...done
�[33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debug -> DEBU 014�[0m [validator.test_vp0] Registering node crypto engine...
�[33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debug -> DEBU 015�[0m [validator.test_vp0] Initiliazing TLS...
�[33mvp0_1 |�[0m �[36m07:10:02.768 [crypto] Debugf -> DEBU 016�[0m [validator.test_vp0] Loading external certificate at [/var/hyperledger/share/tlsca.crt]...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 017�[0m [validator.test_vp0] Initiliazing TLS...Done
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 018�[0m [validator.test_vp0] Getting ECA client...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debugf -> DEBU 019�[0m [validator.test_vp0] Dial to addr:[membersrvc:7054], with serverName:[OBC]...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 01a�[0m [validator.test_vp0] TLS enabled...
�[33mvp0_1 |�[0m �[36m07:10:02.769 [crypto] Debug -> DEBU 01b�[0m [validator.test_vp0] Getting ECA client...done
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01c�[0m [validator.test_vp0] Failed requesting read certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01d�[0m [validator.test_vp0] Failed requesting ECA certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01e�[0m [validator.test_vp0] Failed getting ECA certificate [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 01f�[0m [validator.test_vp0] Failed retrieving ECA certs chain [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 020�[0m [validator.test_vp0] Failed registering node crypto engine [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure].
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 021�[0m [validator.test_vp0] Failed registering peer [test_vp0]: [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure]
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] Errorf -> ERRO 022�[0m [validator.test_vp0] Failed registering [test_vp0]: [rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure]
�[33mvp0_1 |�[0m �[31m07:10:12.775 [crypto] RegisterValidator -> ERRO 023�[0m Failed registering validator [test_vp0] with name [test_vp0] [rpc error: code = 14 desc = grpc: RPC fai",,ChristopherFerris,zhangyijie,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlrb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,zhangyijie,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 8:41 PM;ChristopherFerris;[~zhangyijie] http://hyperledger-fabric.readthedocs.io/en/v0.6/Setup/TLSSetup.html is all there is in the docs. I suggest either upgrading to v1.0.0-alpha release or inquiring on rocket chat (https://chat.hyperledger.org). 

As for any prospect of updating the v0.6 documents, that release has been deprecated so that the community can focus on getting v1.0 released and solid as a rock. Sorry.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip consult MSP policies when authenticating peers in channels,FAB-2424,14987,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,22/Feb/17 9:54 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,02/Mar/17 12:08 AM,,,,,,,,,,,,0,,,,,,,,"Currently, in gossip - the peer checks decides whether a fellow peer is eligible for receiving blocks in a channel by checking if it is in the right organization by extracting its organization ID from the peer identity.

In some use-cases it is not enough, i.e: if all the peers use the same root CA.
Therefore, we need to also make the peer consult the policies that are in the configuration block of the channel, and check whether a channel readers policy asserts that the peer in question is eligible to read blocks.

",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxlrj:",,,,,,Sprint 12 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Install python modules & softhsm2 in Vagrant Baseimage,FAB-2427,14990,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,rameshthoomu,rameshthoomu,22/Feb/17 11:25 PM,28/Oct/18 3:12 AM,28/Oct/23 2:58 AM,28/Oct/18 3:12 AM,,,,,,,,,,,,0,,,,,,,,"Install new python modules to test behave test scenarios in Vagrant ""Baseimage"" environment. Below are the modules required: More information regarding behave test is available in FAB-1141 https://jira.hyperledger.org/browse/FAB-1141


{code:java}
sudo pip install --upgrade grpcio-tools
sudo pip install ""pysha3==1.0b1""
sudo pip install pyopenssl
sudo pip install ecdsa
sudo pip install python-slugify
sudo pip install b3j0f.aop
sudo pip install -U ""jinja2""
{code}

Also, I see a requirement to install
{code:java}
 ""softhsm2"" 
{code}
in vagrant baseimage. Script is available here to install softhsm2 
{noformat}
https://github.com/hyperledger/fabric/blob/master/images/testenv/install-softhsm2.sh
{noformat}
",,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2412,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlrz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Oct/18 3:12 AM;mastersingh24;behave is gone;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move root value handler from configtx to configvalues,FAB-2428,14991,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Feb/17 12:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:26 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxls7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Only validated transactions should be committed to History Database,FAB-2429,14992,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,denyeart,denyeart,23/Feb/17 12:43 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,02/Mar/17 9:38 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,Need to check validation flag before committing transaction writes to History Database,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx61z:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consider Identity.Serialize may return a different byte representation of marshalled identity ,FAB-2430,14993,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,23/Feb/17 1:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,18/Apr/17 9:47 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,We would need to find a workaround there for uses of identity.Serialize that are used for identity comparison check. One such occurrence is the gossip getPKIidFromCertificate (another jira item) and another one is the satisfiesPolicy function inside msp/mspimpl.go. This work-item refers to the latter.,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2420,,,,,,,,,"1|hzxp7j:",,,,,,Sprint 13 - Crypto,Sprint 14 - Crypto,Sprint 15 - Crypto,Sprint 16 - Crypto,,,,,,,,,,,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/17 4:05 AM;elli-androulaki;[~ales], isn't this already done? :);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Encode anchor peers from configtx.yaml,FAB-2432,14995,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,23/Feb/17 2:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:26 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlsf:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add retry logic for failed CouchDB interactions,FAB-2437,15000,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,23/Feb/17 5:54 AM,21/Jul/18 3:55 AM,28/Oct/23 2:58 AM,01/Mar/17 9:30 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Network connection failures and CouchDB error 500 status code should be retried at least once before returning error to high level components.,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx61j:",,,,Unset,,Sprint 12 - Ledger,Sprint 13 - Ledger,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ChainCode creating transactions,FAB-2438,15001,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,23/Feb/17 9:02 AM,23/Jan/20 3:52 AM,28/Oct/23 2:58 AM,23/Jan/20 3:52 AM,,,,,,,,,,,,0,stale-item,,,,,,,"Ability to create and synchronously execute a new Fabric transaction from user ChainCode.

*+API+*

A user CC should be able to initiate creation and execution, in a similar manner to transactions created by clients using the Fabric Client SDK. The creation, signing and execution of the transaction proposal is done by the local peer on the user CC's behalf.
",,aleksandar.likic@gmail.com,fredbi,nauqnew,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1788,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlt3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic@gmail.com,fredbi,nauqnew,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:52 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add sample genesis profile for Kafka,FAB-2439,15002,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,23/Feb/17 9:31 AM,21/Jul/18 3:56 AM,28/Oct/23 2:58 AM,27/Feb/17 6:44 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"# Introduce a bare-minimum genesis profile for Kafka
# Update the Kafka-related Docker environments under `bddtests",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxltb:",,,,Unset,,Sprint 12 - consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Feb/17 12:02 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6465/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Client Request Broadcast to Specified Subledgers,FAB-2440,15003,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,23/Feb/17 11:42 AM,12/Jul/19 8:33 PM,28/Oct/23 2:58 AM,12/Jul/19 8:33 PM,,,,,,,,,,,,0,,,,,,,,"In a multichannel Fabric setup, where members all have deployed the same chaincode but have sub-ledgers, the client sometimes doesn't know which subledger(s) will respond to its request (or more generally handle its message). In such cases, the client should have the ability to broadcast its request to multiple subledger(s) at once. 

*+API+*

The client should be able to request delivery of a transaction proposal request to one or many channels. Once each peer receives the request, the invoked user CC will examine the request and execute (if its logic determines that responding is appropriate). Handling the results of this execution is out of scope of this ticket.

See also FAB-2585.
",,aleksandar.likic@gmail.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1152,FABN-641,,FAB-1021,FAB-2585,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxltj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic@gmail.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Self-Signed TCerts,FAB-2441,15004,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,23/Feb/17 12:06 PM,21/Jul/18 4:08 AM,28/Oct/23 2:58 AM,20/Mar/18 5:02 AM,,,,,Future,,,fabric-ca,fabric-crypto,,,0,MembershipServices,,,,,,,"Ability for the Client SDK to generate self-signed TCerts.

+*Motivation*+

* Remove need for fetching T-Cert batches from a SPOF Fabric-CA

+*Heigh Level Flow*+

* Client SDK obtains ECert from a CA recognized by the ledger.
* Client SDK derives a key from the ECert key.
* Client SDK signs transaction with derived key.
* Client SDK sends transaction to endorser, along with proof of derivation (ECert and derivation data) as transient.
* Endorser runs the appropriate Client Certificate Validator (FAB-2447)
* After endorsement the Client uses the same method to broadcast the transaction to the Ordering Service.
* The Ordering Service validates the caller the same way the Endorser did, by calling the appropriate Client Certificate Validator.

+*Changes to the Client SDK*+

The application should be able to configure Client SDK to sign transactions with derived keys instead of pulling batches of TCerts from a Fabric-CA.

+*Changes to the Endorser*+

* FAB-2447
* Client Certificate Validator implementation that supports this use case

+*Changes to the Ordering Service*+

* FAB-2447
* Client Certificate Validator implementation that supports this use case

+*Changes to the Committer*+

* FAB-2447
* Client Certificate Validator implementation that supports this use case
",,aleksandar.likic@gmail.com,baohua,ChristopherFerris,denyeart,Hangyu_FJH,JonathanLevi,ruslankryukov,silentspark,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2447,FABC-37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,,,,,,,Unset,,,,"1|hzxltr:",,,,Unset,Unset,Sprint 15 - Membership Service,,,,,,,,,,,,,,,,,,,,,,,,aleksandar.likic@gmail.com,baohua,ChristopherFerris,denyeart,Hangyu_FJH,JonathanLevi,ruslankryukov,silentspark,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/17 4:04 AM;smithbk;Thinking more about this, I have some follow up comments/questions ...

* A disadvantage to this self-signed tcert approach is that anonymity and unlinkability are not preserved if there is a rogue peer or orderer, since they have access to the ecert in order to run the proof, right?   I know this still provides a way to be anonymous and unlinkable to someone looking on the ledger, but it seems like a false sense of security since it would be vulnerable to other attacks.  Maybe I'm missing something though.

* The fabric-ca-server can be deployed so that it is not a SPOF, if that is the real goal.  It can run in a cluster.   See https://jira.hyperledger.org/browse/FAB-2654.  To handle a site outage, multiple intermediate CA clusters in different sites could be deployed with DB failover/replication between sites.  Of course, clients would either need to be configured to manually failover or to use a DNS-based failover solution such as http://help.dnsmadeeasy.com/dns-failover/configure-dns-failover/configure-dns-failover/

* That said, I agree that it would still be very desirable to have a solution which does not require going to the fabric-ca-server to get batches of tcerts.  Obviously one solution is to issue an intermediate CA cert to the app itself so that it can issue tcerts directly (not self-signed in this case).  This may work for a web app (few in number and relatively static) but not a mobile app since these intermediate CA certs would need to be pushed to a config block.  Are you trying to solve for a web app or mobile app?   Even for a web app, there may be complexities that I'm missing.
;;;","15/Apr/17 5:07 AM;ChristopherFerris;Is this a story or an epic? Seems rather more like an epic. Also, needs to be updated with the components affected. [~smithbk];;;","26/May/17 2:08 PM;JonathanLevi;Why is this still *In Progress* since 29/Mar/17 ?;;;","27/May/17 3:40 AM;JonathanLevi;Thank you.;;;","20/Mar/18 5:02 AM;denyeart;IdentityMixer will be used instead of TCerts. Closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error on setup with docker,FAB-2442,15005,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,sodiaan,sodiaan,23/Feb/17 6:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,24/Feb/17 7:00 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Here http://hyperledger-fabric.readthedocs.io/en/latest/asset_setup/
on step http://hyperledger-fabric.readthedocs.io/en/latest/asset_setup/#use-docker-to-spawn-network-entities-createjoin-a-channel
I got error ""ERROR: In file './docker-compose-gettingstarted.yml' service 'version' doesn't have any configuration options. All top level keys in your docker-compose.yml must map to a dictionary of configuration options.""",,rameshthoomu,sodiaan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxltz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,sodiaan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Feb/17 11:14 PM;sodiaan;the docker-compose version is 1.5.2, this is the problem, I upgraded and now it works;;;","23/Feb/17 11:14 PM;sodiaan;please add this information to documentation;;;","24/Feb/17 7:00 AM;rameshthoomu;[~sodiaan]: Steps are added in once of the fabric documentation. Sure will add these steps in fabric docs. Just to capture note: Version: '2' support in docker-compose 1.5.2 is not available.. Please follow below link to upgrade docker-compose

If you are running on ubuntu
{code:java}
curl -L ""https://github.com/docker/compose/releases/download/1.8.0/docker-compose-$(uname -s)-$(uname -m)"" > /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
docker-compose version
{code}

If you running on ""Power"" platform:

{code:java}
apt-get install docker.io
pip install docker-compose
{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As a fabric developer I want the access control library to use BCCSP for all cryptographic operations,FAB-2443,15006,13136,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,angelo.decaro,angelo.decaro,angelo.decaro,23/Feb/17 6:54 PM,27/Jul/19 9:03 PM,28/Oct/23 2:58 AM,27/Jul/19 9:03 PM,,,,,,,,fabric-crypto,,,,0,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlu7:",,,,,,Sprint 9 - Crypto,Sprint 10 - Crypto,Sprint 12 - Crypto,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an application developer I want to have examples on how to use the access control library,FAB-2444,15007,13136,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,23/Feb/17 6:55 PM,28/Jul/19 1:24 AM,28/Oct/23 2:58 AM,28/Jul/19 1:24 AM,,,,,,,,fabric-crypto,,,,0,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxluf:",,,,,,Sprint 9 - Crypto,Sprint 10 - Crypto,Sprint 12 - Crypto,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename access control  to IdentityX,FAB-2445,15008,13136,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,23/Feb/17 6:59 PM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,06/Jul/18 10:47 PM,,,,,,,,fabric-crypto,,,,0,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlun:",,,,,,Sprint 9 - Crypto,Sprint 10 - Crypto,Sprint 12 - Crypto,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add labels to fabric containers and docker images,FAB-2446,15009,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,24/Feb/17 2:22 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,26/Feb/17 2:11 PM,,,,,,,,fabric-peer,,,,0,quality,,,,,,,"Docker provides the ability to label many or it resources, including images and containers. These labels can then be used as filters when managing your docker environment.

To begin with, we can add the following labels to chain code containers:
* org.hyperledger.fabric.chaincode.id.name
* org.hyperledger.fabric.chaincode.id.version
* org.hyperledger.fabric.chaincode.type
* org.hyperledger.fabric.version
* org.hyperledger.fabric.version.base

This would be helpful in a development environment to enable quickly identifying chain code containers and images.",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxluv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pluggable Validation of Client Certificate,FAB-2447,15010,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,24/Feb/17 3:05 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,12/Apr/18 10:22 PM,,,,,v1.1.0,,,,,,,0,,,,,,,,"Ability to customize the validation of client certificate based on deployment specific security requirements. The customized validation is a plugin (e.g., custom system chain code - FAB-2454).

Examples

* FAB-2441

+*Changes to Endorser*+

Enable using a custom logic to validate the client certificate.

+*Changes to Ordering Service*+

Enable using a custom logic to validate the client certificate.

+*Changes to Committer*+

Enable using a custom logic to validate the client certificate.",,aleksandar.likic@gmail.com,binhn,ruslankryukov,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2441,,,,,,,,,,,,,FABC-37,,,FAB-4207,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlv3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic@gmail.com,binhn,ruslankryukov,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Mar/17 3:30 AM;binhn;[~aleksandar.likic@gmail.com] Have you looked at [BCCSP|https://github.com/hyperledger/fabric/blob/master/bccsp/bccsp.go]?  There is also a document posted on https://jira.hyperledger.org/browse/FAB-354
;;;","15/Mar/17 8:14 AM;aleksandar.likic@gmail.com;[~binhn] Yes, BCCSP should be used for all crypto operations. This story is not about replacing BCCSP, it is to enable FAB-2441.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add generic proto intializer for Proposer framework,FAB-2448,15011,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,24/Feb/17 3:53 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,11/Mar/17 3:26 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlvb:",,,,,,,,,,,,,,,,,,2.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Client SDK - Transient Data Handling,FAB-2450,15013,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,24/Feb/17 4:36 AM,21/Jul/18 3:54 AM,28/Oct/23 2:58 AM,02/May/17 6:31 AM,,,,,,,,,,,,1,,,,,,,,"- Allow client to include transient data to TP Request.
- Signed portion of a transaction proposal created by the Client SDK should not include transient data.

",,aleksandar.likic@gmail.com,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABG-16,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlvj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic@gmail.com,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
readthedocs builds is failing after commit# 55219e3,FAB-2451,15014,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,24/Feb/17 4:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:58 AM,27/Feb/17 1:12 AM,,,,,,,,,,,,0,,,,,,,,"Readthedocs build is failing after commit # 5219e3


{noformat}
ERROR   -  file not found: /home/docs/checkouts/readthedocs.org/user_builds/hyperledger-fabric/checkouts/latest/docs/FAQ/architecture_FAQ.md 
ERROR   -  Error building page FAQ/architecture_FAQ.md 
{noformat}
",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlvr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Feb/17 1:12 AM;rameshthoomu;RTD builds are working as expected now...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
performance traffic engine (PTE) enhancement - multi channel support,FAB-2452,15015,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,24/Feb/17 5:45 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Apr/17 2:41 AM,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,To add multi channel support,,dongming,raccoonrat,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzx35b:",,,,,,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,,,,,,,,,,,,,,,,,,,,dongming,raccoonrat,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Node sdk ""end-to-end"" tests are failing after commit merge # 425028f",FAB-2453,15016,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisr,rameshthoomu,rameshthoomu,24/Feb/17 5:57 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,28/Feb/17 5:32 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Description: Node sdk ""end-to-end"" tests are failing after merge commit # 425028f

*Build log:*

{noformat}
18:47:45 [34mdebug[39m: [Peer.js]: Peer.sendProposal - Start
18:47:45 [34mdebug[39m: [Peer.js]: Peer.sendProposal - Start
18:47:45 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: The proposal does not comply with the channel writers for channel testchainid, error Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
18:47:45     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
18:47:45 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The proposal does not comply with the channel writers for channel testchainid, error Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
18:47:45     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:9:3695)
18:47:45     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
18:47:45 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: The proposal does not comply with the channel writers for channel testchainid, error Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
18:47:45     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
18:47:45 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The proposal does not comply with the channel writers for channel testchainid, error Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
18:47:45     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:9:3695)
18:47:45     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
18:47:45 [34mdebug[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The proposal does not comply with the channel writers for channel testchainid, error Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
18:47:45 [34mdebug[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The proposal does not comply with the channel writers for channel testchainid, error Failed to reach implicit threshold of 1 sub-policies, required 1 remaining
18:47:45 [31m[2017-02-23 18:47:45.365] [ERROR] E2E - [39minstantiate proposal was bad
18:47:45 [31m[2017-02-23 18:47:45.365] [ERROR] E2E - [39minstantiate proposal was bad
18:47:45 not ok 5 Failed to send instantiate Proposal or receive valid response. Response null or status is not 200. exiting...
18:47:45   ---
18:47:45     operator: fail
18:47:45     at: promise.then.then (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/end-to-end.js:239:8)
18:47:45   ...
18:47:45 [32m[2017-02-23 18:47:45.367] [INFO] E2E - [39mDisconnecting the event hub
{noformat}

Jenkins CI Build Log output:
{noformat}
https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/156/console
{noformat}

dockerlog file: 

{noformat}
https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/156/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/dockerlogfile.log
{noformat}
",Jenkins CI environment,bmos299,jimthematrix,rameshthoomu,zuochuanmin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlvz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,jimthematrix,rameshthoomu,zuochuanmin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Feb/17 5:10 PM;jimthematrix;[~rameshthoomu] this was a problem in the backend signature validation policy logic. it's since been rectified by the work from [~muralisr];;;","27/Feb/17 11:00 AM;rameshthoomu;[~jimthematrix] Observed below error while executing FIT job in Jenkins, Below is the error log:


{noformat}
00:56:18 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: Illegal file detected in payload: "".""
00:56:18     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
00:56:18 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Illegal file detected in payload: "".""
00:56:18     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:9:3695)
00:56:18     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
00:56:18 [31merror[39m: [Peer.js]: GRPC client got an error response from the peer. Error: Illegal file detected in payload: "".""
00:56:18     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
00:56:18 [31merror[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Illegal file detected in payload: "".""
00:56:18     at Object.callback (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:9:3695)
00:56:18     at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
00:56:18 [34mdebug[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Illegal file detected in payload: "".""
00:56:18 [34mdebug[39m: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: Illegal file detected in payload: "".""
00:56:18 [31m[2017-02-27 00:56:18.228] [ERROR] E2E - [39minstall proposal was bad
00:56:18 [31m[2017-02-27 00:56:18.228] [ERROR] E2E - [39minstall proposal was bad
00:56:18 not ok 3 Failed to send install Proposal or receive valid response. Response null or status is not 200. exiting...
00:56:18   ---
00:56:18     operator: fail
00:56:18     at: promise.then.then (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/end-to-end.js:144:8)
00:56:18   ...
00:56:18 [32m[2017-02-27 00:56:18.231] [INFO] E2E - [39mDisconnecting the event hub
{noformat}

*Build Reference: *https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/169/consoleFull;;;","28/Feb/17 5:32 AM;bmos299;Problem resolved as per *commit 29d7fc035df697a68d271d628e693c556354486f*.
;;;","01/Aug/17 5:15 PM;zuochuanmin;I encountered the same issue in latest version: 1.0.0.
How to fix this issue?  Because of this issue, I cannnot create my own channel, peer channel create always failed.
Anyone can help me ,thanks a million in advance.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As a network architect I want the ability to plugin non standard system chaincode ,FAB-2454,15017,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,muralisr,markparz,markparz,24/Feb/17 6:43 AM,11/Aug/19 6:03 PM,28/Oct/23 2:59 AM,11/Aug/19 6:03 PM,,,,,Future,,,fabric-peer,,,,0,chaincode,,,,,,,"Create the ability where you can plug in system chaincode, this would provide the ability to add to system chaincode. This would provide another 3 types of chaincode:
1) user 2) system and 3) pluggable system",,aleksandar.likic,denyeart,markparz,mastersingh24,muralisr,ruslankryukov,troyronda,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6719,,,FAB-5688,FAB-5460,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlw7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic,denyeart,markparz,mastersingh24,muralisr,ruslankryukov,troyronda,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:58 PM;muralisr;[~ibmmark] moving this to 1.1 (especially pluggable scc) as we need to looking into golang 1.8 support.;;;","21/Apr/17 6:30 AM;markparz;agreed;;;","27/Jun/17 6:28 AM;vdods;Just to be clear, would this include the ability to specify a custom endorsement policy via golang, say during chaincode installation/instantiation?;;;","14/Jul/17 12:02 AM;aleksandar.likic;LInk to the proposal (draft): https://docs.google.com/document/d/1NXz8fraX3O6PkXrcNyXklNHWZG-UeXHad0yUuP34f7w/edit#heading=h.4p7xi5bvhxdr;;;","20/Jul/17 3:20 AM;vdods;If the endorsement policy were to be customized, it would make sense not to specify it at the peer level, but at the channel level – a peer may be part of several unrelated channels, each having their own rules regarding transactions (i.e. endorsement policies).;;;","20/Jul/17 10:24 AM;aleksandar.likic;Added a section on SCC deployment to draft proposal at [https://docs.google.com/document/d/1NXz8fraX3O6PkXrcNyXklNHWZG-UeXHad0yUuP34f7w/edit#heading=h.4p7xi5bvhxdr] ;;;","25/Oct/17 9:10 AM;troyronda;Please see pluggable system implementation at [https://gerrit.hyperledger.org/r/#/c/14753/] (FAB-6719) - needs reviewers :).

 ;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","11/Aug/19 6:03 PM;mastersingh24;We actually do support this today, but plan to remove this in 2.x;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Misleading log message in endorser.go,FAB-2455,15018,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,24/Feb/17 8:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlwf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
endorser proposal ACL needs to be configurable,FAB-2457,15020,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ellaki,muralisr,muralisr,24/Feb/17 11:20 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,26/Apr/17 10:38 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Currently there is no means to specify the policy to use for checking ACL for proposals. The default policy of > 50% admins would not work for most situations (unlike the committer side VSCC validations). Its more reasonable to say ""is this creator issuing proposal an admin"" as opposed to ""are there >50% admins signing off on this proposal"".

In any case this needs to be revisited. Till then propose we revert checkACL to allow proposals through.",,binhn,denyeart,elli-androulaki,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7e7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,denyeart,elli-androulaki,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Feb/17 3:34 PM;binhn;It is not 1 policy fits all. 

I would suggest the following:
1) LCCC & CSCC:  local admins only but unfortunately we have to handle specific functions that are channel admins
2) QSCC is readers since it provides ledger query API
3) All other chaincode invokes on a channel are channel writers
;;;","25/Feb/17 2:20 AM;elli-androulaki;Hi Binh,

Would you be fine with the following arrangement? 

LCCC & CSCC & QSCC chainless  =>  are only allowed to be invoked by local admins 
non-chainless LCCC => chaincodeAdmin of the chain the proposal refers to 
non-chainless QSCC chainless  =>  are only allowed to be invoked by channel readers
other application chaincodes => invoked allowed within channel writers

The issue so far has been that we use the same policy for non-chainless LCCC and admin policy used for reconfiguration. The latter uses a threshold signature based policy that the former cannot accommodate due to the singularity of the proposal creator (we can only have one signature). 

After talking to @jyellick, we would need to have an additional policy for that defining identities that are allowed to ""instantiate"" chaincodes, and invoke these type of chaincodes. 
In the short term though it would make sense to lower the threshold of signatures required in the admin policy to one, till we have this additional policy in.

What do you think? 
;;;","01/Mar/17 7:05 AM;binhn;[~ellaki]  SCC may operate on any channels since it is not restricted to the chaincode APIs, but often SCC is invoked with a channel in the parameter. However, each function behaves differently depending on the implementation, so I think ACL on SCC should be left to SCC to implement per function, except when a CC calling SCC.

A CC is always called on a channel and can only operate within that channel. When a CC calls an SCC, as part of the API, it has to specify a channel. So the ACL for that (CC2SCC) can be done outside of the SCC, and we can apply the same criteria as CC2CC.

Assuming ability to extract a policy available, we need to provide a function that, given a policy and a proposal (or header), determines ACL so that SCC may call.

Examples
LCCC has functions that operate outside of channel such as Install and GetInstalledChaincodes. These functions require local MSP admins; whereas, Instantiate and other functions, that require a channel, can access if the user is a member of channel admins or writers or readers. Similarly for CSCC. JoinChannel requires local MSP admins, but others require channel policies as appropriate. On the other hand, QSCC is a ledger structure query, so ACL should be based on channel readers.
;;;","01/Mar/17 10:09 PM;elli-androulaki;Ok, so regarding 

> A CC is always called on a channel and can only operate within that channel. When a CC calls an SCC, as part of the API, it has to specify a channel. So the ACL for that (CC2SCC) can be done outside of the SCC, and we can apply the same criteria as CC2CC.
Is there a chance indeed of a CC invoking an SCC? If the answer is ""currently no, but in the future it may be the case"" we think we should forbid such a call. Angelo's CR on CC2CC does that already after a discussion he and Murali had.

> Assuming ability to extract a policy available, we need to provide a function that, given a policy and a proposal (or header), determines ACL so that SCC may call.
A couple of clarification questions here: 
  - when you say ability to extract a policy available, do you refer to a policy object? policy is actually the expression of the ACL, and evaluating permissions of a signer against it is as simple as invoking policy.evaluate method.
  - where should the policy be extractable from? it seems to me that for requests/proposals that are not within a channel's scoped it is always only the peer msp admin's that should be considered. For channel scoped proposals, a policy from the channel genesis should be considered. Taking a closer look on what the latter can be 
       * chain-scoped LCCC (instantiate/terminate chaincodes): chaincode instantiators of the channel
       * chain-scoped QSCC (queries on the chaincodes/blocks of a channel): channel readers should be checked
  - for chainless proposals, though we want policies to be extractable, we do not want them to be configurable, correct? E.g., have the peer yaml contain a policy the peer should be authenticating LCCC install/uninstall requests.




;;;","12/Apr/17 4:56 AM;denyeart;[~muralisr][~adc][~ales][~ellaki] Is this still needed or has it already been covered and therefore can be closed? If still valid, is it a story or a bug?  Is it required for 1.0.0?;;;","19/Apr/17 7:58 PM;elli-androulaki;If we do this, can't we extend this config of the peer to define a peer's trustzone? Essentially, policy defining which identities should be allowed to receive StateInfo messages of peers. [~yacovm] [~C0rWin].;;;","19/Apr/17 8:04 PM;yacovm;Currently - peers receive StateInfo messages from peers that their orgs are channel members, *and* that they know the name of the channel - what benefit does your approach give?
There is an overhead of computing the policy over a peer (signature verification overhead).;;;","20/Apr/17 9:10 AM;muralisr;This belongs to all the ACL work that is being done.. assigning it to [~ellaki] for handling.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement serialize method of Identity,FAB-2458,15021,14052,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,oldsharp,lafenicecc,lafenicecc,24/Feb/17 12:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,28/Feb/17 4:06 PM,,,,,,,,fabric-sdk-py,,,,0,,,,,,,,,,lafenicecc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1637,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxgtz:",,,,,,Sprint 4,,,,,,,,,,,,,,,,,,,,,,,,lafenicecc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement serialize method of SigningIdentity,FAB-2459,15022,14052,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,oldsharp,lafenicecc,lafenicecc,24/Feb/17 12:48 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,28/Feb/17 4:06 PM,,,,,v1.0.0,,,fabric-sdk-py,,,,0,,,,,,,,,,lafenicecc,oldsharp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlwv:",,,,,,Sprint 4,,,,,,,,,,,,,,,,,,,,,,,,lafenicecc,oldsharp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/17 2:27 AM;oldsharp;Duplicated with FAB-2458, should be abandoned.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Remove unused properites  ""validatorEnabled"" from core/peer/config.go",FAB-2460,15023,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Hangyu_FJH,Hangyu_FJH,Hangyu_FJH,24/Feb/17 2:32 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,30/Mar/17 11:37 AM,,,,,v1.0.0,,,fabric-peer,,,,0,v1.0,,,,,,,Since the peer.validator.enabled property has been removed from core.yaml. This should also be cleaned up in core/peer/config.go,,Hangyu_FJH,t-watana,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlx3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Hangyu_FJH,t-watana,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/17 2:11 PM;Hangyu_FJH;looks like there is a circular import issue on this. 
The first make results not allowing to delete items in this folder fabric/core/peer;;;","13/Mar/17 8:56 AM;Hangyu_FJH;after running goimports, it passed the verification phase, now it is under review.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot install Java chaincode via CLI,FAB-2461,15024,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,sanchezl,sanchezl,sanchezl,24/Feb/17 3:47 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,01/Mar/17 11:42 PM,,,,,,,,fabric-peer,,,,0,quality,,,,,,,"When trying to install java chaincode:
{{Error: Error getting chaincode code chaincode: Error getting chaincode package bytes: Cannot collect chaincode files from empty input}}",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlxb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-introduce paging for range queries and rich queries,FAB-2462,15025,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,balaji.viswanathan,denyeart,denyeart,24/Feb/17 8:45 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,25/Apr/17 10:45 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,Need to re-introduce paging between shim and peer so that query results can be returned in batches of 100.,,balaji.viswanathan,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2531,FAB-2809,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-757,,,,,,,,,"1|hzx4j3:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,balaji.viswanathan,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/17 6:30 PM;balaji.viswanathan;I was looking at this and there seems to be multiple issue with this.

1. Incorrect Null checks. Closes the iterator when more results exist
@@ -721,7 +724,7 @@ func (handler *Handler) handleGetStateByRange(msg *pb.ChaincodeMessage) {
                        keysAndValues = append(keysAndValues, &keyAndValue)
                }
 
-               if qresult != nil {
+               if qresult == nil {
                        rangeIter.Close()
                        handler.deleteQueryIterator(txContext, iterID)
                }
@@ -811,7 +814,7 @@ func (handler *Handler) handleQueryStateNext(msg *pb.ChaincodeMessage) {
                                chaincodeLogger.Errorf(""Failed to get query result from iterator. Sending %s"", pb.ChaincodeMessage_ERROR)
                                return
                        }
-                       if qresult != nil {
+                       if qresult == nil {
                                break
                        }
@@ -998,7 +1001,7 @@ func (handler *Handler) handleGetQueryResult(msg *pb.ChaincodeMessage) {
                        keysAndValues = append(keysAndValues, &keyAndValue)
                }
 
-               if qresult != nil {
+               if qresult == nil {
                        executeIter.Close()
                        handler.deleteQueryIterator(txContext, iterID)
                }
 

2. How we handle RangeQueries and Rich queries

in core/chaincode/handler.go:
handleQueryStateByRange expects QueryResult of type ledger.KV (line: 722)
handleGetQueryResult expects QueryResult of type ledger.QueryRecord (line: 999)

However, when used in iterator. The Next() call will land up with handleQueryStateNext()  which will then need to have knowledge of how the iterator was created. The QueryIterator just holds an UUID now and does not contain this information.  It currently handles this as KV (line 820). 

Why do we need namespace qualified QueryRecord from ledger when all calls to ledger are qualified with ns?;;;","23/Apr/17 8:42 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7255/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Signing fails on install proposal ,FAB-2463,15026,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisrini,rickr,rickr,24/Feb/17 11:22 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,01/Mar/17 12:07 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The peer is not accepting signature on install proposal. The very same testcase is working ona Feb 21 build.  I upgraded fabric to Feb 24 and now see a return that signature on the creator is invalid .q

UNKNOWN: The creator's signature over the proposal is not valid, err The signature is invalid

commit 9a3aa1defe797fa128b76146fac6f51b2de654b1
Merge: b274f53 75f1344
Author: Yacov Manevich <yacovm@il.ibm.com>
Date:   Fri Feb 24 13:10:18 2017 +0000

2017-02-24 14:09:02.286 UTC [chaincode] HandleMessage -> DEBU 259 [ed0899a1]Fabric side Handling ChaincodeMessage of type: INIT in state ready
2017-02-24 14:09:02.286 UTC [chaincode] filterError -> DEBU 25a Ignoring NoTransitionError: no transition
2017-02-24 14:09:02.286 UTC [chaincode] processStream -> DEBU 25b [ed0899a1]sending state message INIT
2017-02-24 14:09:02.286 UTC [shim] func1 -> DEBU 25c [ed0899a1]Received message INIT from shim
2017-02-24 14:09:02.286 UTC [shim] handleMessage -> DEBU 25d [ed0899a1]Handling ChaincodeMessage of type: INIT(state:ready)
2017-02-24 14:09:02.286 UTC [shim] enterInitState -> DEBU 25e Entered state ready
2017-02-24 14:09:02.286 UTC [shim] enterInitState -> DEBU 25f [ed0899a1]Received INIT, initializing chaincode
2017-02-24 14:09:02.286 UTC [qscc] Init -> INFO 260 Init QSCC
2017-02-24 14:09:02.286 UTC [shim] func1 -> DEBU 261 [ed0899a1]Init get response status: 200
2017-02-24 14:09:02.286 UTC [shim] func1 -> DEBU 262 [ed0899a1]Init invoke succeeded. Sending COMPLETED
2017-02-24 14:09:02.286 UTC [shim] func1 -> DEBU 263 [ed0899a1]Move state message COMPLETED
2017-02-24 14:09:02.286 UTC [shim] handleMessage -> DEBU 264 [ed0899a1]Handling ChaincodeMessage of type: COMPLETED(state:ready)
2017-02-24 14:09:02.286 UTC [shim] func1 -> DEBU 265 [ed0899a1]send state message COMPLETED
2017-02-24 14:09:02.287 UTC [chaincode] processStream -> DEBU 266 [ed0899a1]Received message COMPLETED from shim
2017-02-24 14:09:02.287 UTC [chaincode] HandleMessage -> DEBU 267 [ed0899a1]Fabric side Handling ChaincodeMessage of type: COMPLETED in state ready
2017-02-24 14:09:02.287 UTC [chaincode] HandleMessage -> DEBU 268 [ed0899a1-8731-4860-a26b-3ac4027dec5e]HandleMessage- COMPLETED. Notify
2017-02-24 14:09:02.287 UTC [chaincode] notify -> DEBU 269 notifying Txid:ed0899a1-8731-4860-a26b-3ac4027dec5e
2017-02-24 14:09:02.287 UTC [sysccapi] deploySysCC -> INFO 26a system chaincode qscc/testchainid(github.com/hyperledger/fabric/core/chaincode/qscc) deployed
2017-02-24 14:09:02.287 UTC [lockbasedtxmgr] Done -> DEBU 26b Done query executer/ tx simulator [ea03f9f1-b695-4cfe-bf05-a5863757b176]
2017-02-24 14:09:02.287 UTC [nodeCmd] serve -> INFO 26c Deployed system chaincodes on testchainid
2017-02-24 14:09:02.287 UTC [peer] Initialize -> INFO 26d Loading chain testchainid
2017-02-24 14:09:02.287 UTC [ledgermgmt] OpenLedger -> INFO 26e Opening leadger with id = testchainid
2017-02-24 14:09:02.287 UTC [peer] Initialize -> WARN 26f Failed to load ledger testchainid(Ledger already opened)
2017-02-24 14:09:02.287 UTC [peer] Initialize -> DEBU 270 Error while loading ledger testchainid with message Ledger already opened. We continue to the next ledger rather than abort.
2017-02-24 14:09:02.287 UTC [nodeCmd] serve -> INFO 271 Starting peer with ID=name:""jdoe"" , network ID=dev, address=0.0.0.0:7051
2017-02-24 14:09:02.289 UTC [logging] SetModuleLevel -> DEBU 272 Module 'error' logger enabled for log level: WARNING
2017-02-24 14:09:02.289 UTC [logging] SetModuleLevel -> DEBU 273 Module 'msp' logger enabled for log level: WARNING
2017-02-24 14:09:08.516 UTC [eventhub_producer] registerHandler -> DEBU 29c registerHandler BLOCK
2017-02-24 14:09:08.519 UTC [protoutils] ValidateProposalMessage -> INFO 29d ValidateProposalMessage starts for signed proposal 0xc4200181b0
2017-02-24 14:09:08.519 UTC [protoutils] validateChannelHeader -> INFO 29e validateChannelHeader info: header type 3
2017-02-24 14:09:08.520 UTC [protoutils] checkSignatureFromCreator -> INFO 29f checkSignatureFromCreator starts
2017-02-24 14:09:08.520 UTC [protoutils] checkSignatureFromCreator -> INFO 2a0 checkSignatureFromCreator info: creator is &{DEFAULT DEFAULT}
2017-02-24 14:09:08.520 UTC [protoutils] checkSignatureFromCreator -> INFO 2a1 checkSignatureFromCreator info: creator is valid",,bmos299,Clayton Sims,jyellick,muralisr,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlxj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,Clayton Sims,jyellick,muralisr,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Feb/17 12:12 AM;jyellick;This is working as designed.  The policy for the chaincode instantiation is the default Admins policy, which requires a majority of admins to sign the proposal.  In this case, the proposal is not being signed by an admin, so, the proposal is rejecting it claiming (correctly) that the signature is not valid.;;;","25/Feb/17 12:25 AM;rickr;That's nice is it true for install too which I've reported on above ?  The peer is not accepting signature on *install* proposal;;;","25/Feb/17 11:58 PM;Clayton Sims;changed fixed version to show up in Barry's hotlist.;;;","26/Feb/17 12:06 AM;muralisr;[~rickr] Let me try and recreate.. can you attach some instructions to setup and test please ? ;;;","27/Feb/17 2:08 AM;muralisr;[~jimthematrix] would your research/fix in https://gerrit.hyperledger.org/r/#/c/6543  along with using the right config help with this too ?;;;","01/Mar/17 12:07 AM;bmos299;Jim mentioned this bug is resolved. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable Power CI builds for Hyperledger Fabric 1.0,FAB-2464,15027,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,bsmita,bsmita,25/Feb/17 12:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,04/Mar/17 10:33 PM,,,,,,,,,,,,0,build-system,,,,,,,Please enable verify and merge jobs for Power platform for Fabric CI.,,bsmita,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlxr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bsmita,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/17 1:22 AM;bsmita;Ramesh dropped the CR in http://gerrit.hyperledger.org/r/6631

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ability to distribute UCC in binary form,FAB-2465,15028,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,troyronda,troyronda,25/Feb/17 12:28 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,10/Aug/17 1:21 AM,,,,,DUPLICATE,,,,,,,0,,,,,,,,"As a fabric application developer, I want the ability to deploy user chaincode in pre-built form so that each member organizations' peers do not need to build the UCC (nor need to have the source code on the peer).

Note: the controls on allowing organizations to examine the source code or build their own images is separate from the deployment issue. i.e., each channel and member organization can still make a decision on whether to deploy the UCC without requiring the source code to be built and available to the fabric peer itself.

Sufficient pre-built targets will need to be provided to handle the possible environments of a fabric network.",,aleksandar.likic,ruslankryukov,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlxz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic,ruslankryukov,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Aug/17 1:22 AM;aleksandar.likic;Duplicate of FAB-5460;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check chaincode version for restricted characters,FAB-2466,15029,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,25/Feb/17 1:15 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,06/Apr/17 9:14 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,The chaincode name and channel name currently have a set of restricted characters that cannot be used. The chaincode version does not and should reject supplied chaincode versions that contain those characters. ,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxly7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/17 9:14 AM;wlahti;Fixed via https://jira.hyperledger.org/browse/FAB-2922;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"configtxgen failed to generate orderer block, and E2E test blocked ",FAB-2467,15030,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,Nishi,Nishi,25/Feb/17 1:29 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Feb/17 11:21 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Commit Level: *f6512a0e1a335a427ec86fed8ef1836c2bb742aa*
Along with two cherrypicks:
    https://gerrit.hyperledger.org/r/#/c/6379/ - CR to be merged
    https://gerrit.hyperledger.org/r/#/c/5955 - CR to be merged 

First step in E2E test

{panel}
configtxgen -outputBlock fourorgs.orderer.block -profile FourOrgs
{panel}


failed with following error:
{code}
2017/02/24 16:26:37 Loading configuration
2017/02/24 16:26:37 Checking for configtx.yaml at: 
2017/02/24 16:26:37 Checking for configtx.yaml at: 
2017/02/24 16:26:37 Checking for configtx.yaml at: /opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool
2017/02/24 16:26:37 map[profiles:map[FourOrgs:map[Orderer:map[Kafka:map[Brokers:[127.0.0.1:9092]] Organizations:[map[Name:OrdererOrg ID:OrdererMSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/orderer/localMspConfig]] OrdererType:solo Addresses:[127.0.0.1:7050] BatchTimeout:10s BatchSize:map[MaxMessageCount:10 AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB]] Application:map[Organizations:[map[AnchorPeers:[map[Host:172.18.0.3 Port:7051]] Name:Org0 ID:Org0MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer0/localMspConfig] map[AnchorPeers:[map[Port:7051 Host:172.18.0.4]] Name:Org1 ID:Org1MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer1/localMspConfig] map[Name:Org2 ID:Org2MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer2/localMspConfig AnchorPeers:[map[Host:172.18.0.5 Port:7051]]] map[MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer3/localMspConfig AnchorPeers:[map[Host:172.18.0.6 Port:7051]] Name:Org3 ID:Org3MSP]]]]] organizations:[map[Name:OrdererOrg ID:OrdererMSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/orderer/localMspConfig] map[Name:Org0 ID:Org0MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer0/localMspConfig AnchorPeers:[map[Host:172.18.0.3 Port:7051]]] map[Name:Org1 ID:Org1MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer1/localMspConfig AnchorPeers:[map[Port:7051 Host:172.18.0.4]]] map[Name:Org2 ID:Org2MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer2/localMspConfig AnchorPeers:[map[Host:172.18.0.5 Port:7051]]] map[Name:Org3 ID:Org3MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer3/localMspConfig AnchorPeers:[map[Host:172.18.0.6 Port:7051]]]] orderer:map[OrdererType:solo Addresses:[127.0.0.1:7050] BatchTimeout:10s BatchSize:map[AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB MaxMessageCount:10] Kafka:map[Brokers:[127.0.0.1:9092]] Organizations:<nil>] application:map[Organizations:<nil>]]
2017/02/24 16:26:37 KeyStore path [/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/orderer/localMspConfig/keystore] missing [false]: [<clean>]
2017/02/24 16:26:37 Setting up the MSP manager failed, err KeyMaterial not found in SigningIdentityInfo
panic: Setting up the MSP manager failed, err KeyMaterial not found in SigningIdentityInfo

goroutine 1 [running]:
panic(0x898720, 0xc420252ef0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc420159920, 0x970059, 0x29, 0xc420252eb0, 0x1, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/common/configvalues/msp.TemplateGroupMSP(0xc420229d48, 0x2, 0x2, 0xc42023c820, 0xa)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configvalues/msp/config_util.go:61 +0xba5
github.com/hyperledger/fabric/common/configtx/tool/provisional.New(0xc420220230, 0x8, 0xc420220230)
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/provisional/provisional.go:125 +0x10bc
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/configtxgen/main.go:47 +0x317
{code}",,Nishi,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2409,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlyf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Feb/17 1:42 AM;rameshthoomu;[~rameshthoomu] and Murali observed the same error after following the steps mentioned above. Linking this issue to FAB-2409 for better tracking. 


{noformat}
(hyp) vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com/hyperledger/fabric$ configtxgen -outputBlock fourorgs.orderer.block -profile FourOrgs
2017/02/24 16:40:11 Loading configuration
2017/02/24 16:40:11 Checking for configtx.yaml at:
2017/02/24 16:40:11 Checking for configtx.yaml at:
2017/02/24 16:40:11 Checking for configtx.yaml at: /opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool
2017/02/24 16:40:11 map[orderer:map[Organizations:<nil> OrdererType:solo Addresses:[127.0.0.1:7050] BatchTimeout:10s BatchSize:map[AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB MaxMessageCount:10] Kafka:map[Brokers:[127.0.0.1:9092]]] application:map[Organizations:<nil>] profiles:map[FourOrgs:map[Orderer:map[Organizations:[map[Name:OrdererOrg ID:OrdererMSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/orderer/localMspConfig]] OrdererType:solo Addresses:[127.0.0.1:7050] BatchTimeout:10s BatchSize:map[AbsoluteMaxBytes:99 MB PreferredMaxBytes:512 KB MaxMessageCount:10] Kafka:map[Brokers:[127.0.0.1:9092]]] Application:map[Organizations:[map[Name:Org0 ID:Org0MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer0/localMspConfig AnchorPeers:[map[Host:172.18.0.3 Port:7051]]] map[Name:Org1 ID:Org1MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer1/localMspConfig AnchorPeers:[map[Host:172.18.0.4 Port:7051]]] map[Name:Org2 ID:Org2MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer2/localMspConfig AnchorPeers:[map[Host:172.18.0.5 Port:7051]]] map[Name:Org3 ID:Org3MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer3/localMspConfig AnchorPeers:[map[Host:172.18.0.6 Port:7051]]]]]]] organizations:[map[Name:OrdererOrg ID:OrdererMSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/orderer/localMspConfig] map[Name:Org0 ID:Org0MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer0/localMspConfig AnchorPeers:[map[Host:172.18.0.3 Port:7051]]] map[Name:Org1 ID:Org1MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer1/localMspConfig AnchorPeers:[map[Host:172.18.0.4 Port:7051]]] map[Name:Org2 ID:Org2MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer2/localMspConfig AnchorPeers:[map[Host:172.18.0.5 Port:7051]]] map[Name:Org3 ID:Org3MSP MSPDir:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/peer/peer3/localMspConfig AnchorPeers:[map[Host:172.18.0.6 Port:7051]]]]]
2017/02/24 16:40:11 KeyStore path [/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode_sample/crypto/orderer/localMspConfig/keystore] missing [false]: [<clean>]
2017/02/24 16:40:11 Setting up the MSP manager failed, err KeyMaterial not found in SigningIdentityInfo
panic: Setting up the MSP manager failed, err KeyMaterial not found in SigningIdentityInfo

goroutine 1 [running]:
panic(0x898720, 0xc42023bd10)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201952c0, 0x970059, 0x29, 0xc42023bcd0, 0x1, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x127
github.com/hyperledger/fabric/common/configvalues/msp.TemplateGroupMSP(0xc420227d48, 0x2, 0x2, 0xc420233420, 0xa)
        /opt/gopath/src/github.com/hyperledger/fabric/common/configvalues/msp/config_util.go:61 +0xba5
github.com/hyperledger/fabric/common/configtx/tool/provisional.New(0xc42021d050, 0x8, 0xc42021d050)
        /opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/provisional/provisional.go:125 +0x10bc
main.main()
        /opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool/configtxgen/main.go:47 +0x317
(hyp) vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com/hyperledger/fabric$
{noformat}


;;;","25/Feb/17 11:16 PM;rameshthoomu;Pulled latest fabric commit# ea7015e722cb751efeb0f827470f58a79a15b9c9 and tested e2e scenario.
E2E scenario is working as expected. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unnecessary header messages from configtx messages,FAB-2468,15031,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,25/Feb/17 2:02 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"After an audit with Elli, it's been concluded that the ChannelHeader embedded in the configtx.proto Config and ConfigUpdate messages are unnecessary, that the only piece of information needed is the ChannelId.

By removing these, the messages will be simpler to construct and understand.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlyn:",,,,Unset,,,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix gossip proto style,FAB-2470,15033,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jyellick,jyellick,25/Feb/17 3:09 AM,21/Jul/18 3:53 AM,28/Oct/23 2:59 AM,08/Apr/17 6:31 PM,,,,,,,,fabric-gossip,,,,0,,,,,,,,The gossip protos were moved under fabric/protos after the fabric/protos were restyled to conform to proto style guidelines.  The gossip protos need to be brought in line with this.,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxlz3:",,,,Unset,,,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix gossip proto style proto only,FAB-2471,15034,15033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,25/Feb/17 3:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-gossip,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlzb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix gossip proto enum style,FAB-2472,15035,15033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,25/Feb/17 3:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-gossip,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlzj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix gossip proto pkiID style,FAB-2473,15036,15033,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,25/Feb/17 3:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-gossip,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxlzr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move application config to common Proposer,FAB-2477,15040,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,25/Feb/17 6:50 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm0n:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Issue with Peer-to-Peer TLS,FAB-2478,15041,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,farhan3,farhan3,25/Feb/17 7:16 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,02/Apr/17 10:43 PM,v0.6,v1.0.0,,,v1.0.0,v1.0.0-alpha1,,,,,,0,,,,,,,,"When Peer A is trying to communicate with Peer B, Peer A acts as the client and Peer B acts as the server. This means Peer A calls {{fabric/core/comm/connection.go#InitTLSForPeer()}}. However, this method is wrong. More specifically, the following line:

{code}
creds, err = credentials.NewClientTLSFromFile(viper.GetString(""peer.tls.cert.file""), sn)
{code}

The method being called ({{NewClientTLSFromFile}}) is from [gprc-go|https://github.com/grpc/grpc-go/blob/master/credentials/credentials.go#L205]. The first parameter to this method is a PEM file containing Root CAs that are trusted. If you look at the source for this (https://github.com/grpc/grpc-go/blob/master/credentials/credentials.go#L214), it creates a {{NewCertPool}} and adds the certs from the provided PEM file. These certs are the Root CAs that should be trusted when the connection is being established.

However, the cert file being given as a parameter in {{fabric/core/comm/connection.go#InitTLSForPeer()}} is the cert file of Peer A, not the Root CA cert!

Instead of {{""peer.tls.cert.file""}}, it should be {{""peer.tls.rootcert.file""}}. This would mean that the rootcert, which has signed Peer A cert and Peer B cert, is the added to the NewCertPool and the TLS connection can be established.


In order for P2P TLS to work at the moment in v0.6 and v1.0, all peers must be using the same self-signed certificate, which is wrong. The above fix will only resolve the issue in v1.0 because {{peer.tls.rootcert.file}} is already defined in core.yaml. However, in v0.6 there is no {{peer.tls.rootcert.file}}.",,farhan3,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-740,FAB-1728,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm0v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,farhan3,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/17 10:43 PM;mastersingh24;Not going to fix this for v0.6 but this is fixed already for v1.0.0;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Log consumer errors,FAB-2479,15046,14820,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,26/Feb/17 4:56 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Feb/17 6:46 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,,,,,,,This changeset introduces a listenForErrors goroutine that listens for and logs any errors that happen during the consumption of a Kafka partition (i.e. chain).,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2259,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm13:",,,,,,Sprint 12 - consensus,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/17 5:21 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6525/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve orderer.yaml formatting and text,FAB-2480,15047,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,26/Feb/17 5:17 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,27/Feb/17 6:46 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"We use the ### lines to signal that the maximum line width is 80 characters, but lines with more than 80 characters keep creeping in. This changeset fixes that, plus a bunch of inconsistencies of the copy-editing kind.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2483,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxm1b:",,,,Unset,,Sprint 12 - consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/17 5:21 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6527/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve configtx.yaml formatting & text,FAB-2483,15050,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,26/Feb/17 5:29 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,27/Feb/17 6:46 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2480,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxm1z:",,,,Unset,,Sprint 12 - consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/17 5:32 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6533/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prevent unclean leader election,FAB-2484,15051,14820,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,26/Feb/17 6:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Feb/17 6:46 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,,,,,,,"Kafka ships with the `unclean.leader.election.enable` setting set to `true`. For our use case, this default is wrong as it trades consistency off for availability.

Concretely, consider this worst-case scenario that goes against every proper practice:
- Two brokers: B0 and B1
- A replication factor of 2
- `min.insync.replicas` set to 1 (the default)

Assume B1 is the partition leader replica (though this doesn't really matter).

B1 receives a batch of messages from an ordering service node, and writes them to disk. B0 does the same, replicating B1.

We shut B0 down.

We send a new batch of messages to the cluster (read: B1); B1 writes them to disk.

We shut B1 down and then bring B0 up.

If we send a new batch of messages to the cluster (read: B0), it will write them to disk using _re-using (some/all of) the offsets that B1 had used for its last batch of messages. This means we are rewriting the blockchain, which is obviously unacceptable.

This changeset prevents this from happening.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm27:",,,,,,Sprint 12 - consensus,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/17 6:14 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6535/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
docker-compose is not being cleaned up from unit tests,FAB-2485,15052,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,troyronda,rameshthoomu,rameshthoomu,26/Feb/17 10:27 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,30/Mar/17 12:34 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"unit-tests are not starting with couchdb error in vagrant environment

on fresh vagrant environment follow below steps to reproduce this error:

*Step 1*: Run *make docker* from fabric directory
*Step 2:* Upon successful execution of `make docker` execute `*docker images*` should display peer, orderer, couchdb and other images
/hyperledger/fabric$ docker images

{noformat}
REPOSITORY                     TAG                             IMAGE ID            CREATED             SIZE
hyperledger/fabric-couchdb     latest                          1332ee04bd10        7 minutes ago       1.48 GB
hyperledger/fabric-couchdb     x86_64-0.7.0-snapshot-6daec3f   1332ee04bd10        7 minutes ago       1.48 GB
{noformat}

*Step3*: Run `*make unit-test*`.. Unit-tests should start after executing make unit-test

+Below is the result in vagrant:+
{code:java}
docker tag hyperledger/fabric-peer hyperledger/fabric-peer:x86_64-0.7.0-snapshot-6daec3f
cd unit-test && docker-compose up --abort-on-container-exit --force-recreate && docker-compose down
WARNING: The TEST_PKGS variable is not set. Defaulting to a blank string.
Recreating 931e2f7015ce_931e2f7015ce_931e2f7015ce_931e2f7015ce_couchdb
Recreating 54a7df37190d_54a7df37190d_54a7df37190d_54a7df37190d_unittest_vp_1

ERROR: for vp  No such image: sha256:9e95b8dbeca0cfc6ebaf4b89c47438756345c25e66eaaf7011cf4dcd35eb00a1

ERROR: for couchdb  No such image: sha256:4e109bf5798cec75baed0a594c1d79c946d2600675a886f039d3ba5d23760018
ERROR: Encountered errors while bringing up the project.
Makefile:117: recipe for target 'unit-test' failed
make: *** [unit-test] Error 1
vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com}
{code}


*How to reproduce*
Reproduce by:
* Killing unit-tests in the middle of the run (after docker-compose up has completed but prior to down).
* Run make dist-clean all

*Known Issue*
https://github.com/docker/compose/issues/1113
",,AdnanChoudhury,denyeart,rameshthoomu,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2569,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm2f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,denyeart,rameshthoomu,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Feb/17 3:21 PM;denyeart;[~AdnanChoudhury] can you take a look?;;;","27/Feb/17 6:12 AM;AdnanChoudhury;Unable to reproduce at the latest commit level:

{code:java}
commit 22ede4798fa1ab4459391dba4b6def80aab0f053
Merge: 2e7728d 72c03f1
Author: Srinivasan Muralidharan <muralisr@us.ibm.com>
Date:   Sun Feb 26 18:32:45 2017 +0000
{code}


[~rameshthoomu] Can you give the commit level you tested? 
Also, the error log indicates that in addition to couchdb, same error happened for ""vp"" container. 
The couchdb images I have in my vagrant are:

{code:java}
hyperledger/fabric-couchdb     latest                          d5d6162a0b20        8 minutes ago       1.48 GB
hyperledger/fabric-couchdb     x86_64-0.7.0-snapshot-22ede47   d5d6162a0b20        8 minutes ago       1.48 GB

{code}
;;;","01/Mar/17 5:04 AM;rameshthoomu;Able to run ""make unit-tests"" now but I am seeing ""illegal file mode"" error on chaincode02;;;","01/Mar/17 6:13 AM;denyeart;[~rameshthoomu] There was an illegal file mode issue fixed on Saturday.  Are you on the latest?;;;","02/Mar/17 3:33 AM;rameshthoomu;I am fabric latest commit and not observing the issue what I created here but I see ""illegal filemode while deploying chaincode spec""  https://jira.hyperledger.org/browse/FAB-2569
;;;","02/Mar/17 4:13 AM;denyeart;ok, that issue is different than the prior file mode issue.
Since the issue in this Bug cannot be reproduced, I will close.;;;","26/Mar/17 11:28 AM;troyronda;I encountered this issue outside vagrant on the 1.0 alpha release tag. I had to cleanup docker-compose.

in the unit-test directory, run docker-compose down (or docker-compose rm)
;;;","26/Mar/17 1:06 PM;troyronda;See https://gerrit.hyperledger.org/r/#/c/7447/
;;;","30/Mar/17 12:34 AM;troyronda;Changes have been merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup outdated core.yaml entries for ledger,FAB-2486,15053,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,ChristopherFerris,denyeart,denyeart,26/Feb/17 3:23 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,30/Apr/17 9:04 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,I believe the entire 'sync' section needs to be removed.,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-758,,,,,,,,,"1|hzx4n3:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Apr/17 10:16 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8747/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Handle CouchDB name collisions due to similar named channels,FAB-2487,15054,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,denyeart,denyeart,26/Feb/17 10:49 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,14/Jun/17 10:30 AM,,,,,v1.0.0,,,fabric-ledger,,,,5,,,,,,,,"Channel name becomes the CouchDB database name.  There is some name mapping logic introduced in: [https://gerrit.hyperledger.org/r/#/c/6051/].

The existing name mapping logic can cause collisions in CouchDB database name, for example channel my_channel and my.channel would both result in my_channel couchdb database. Need to protect from collisions.",,binhn,ChristopherFerris,denyeart,jyellick,kchristidis,manish-sethi,SjirNijssen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx4qv:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,denyeart,jyellick,kchristidis,manish-sethi,SjirNijssen,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/17 2:37 AM;Clayton Sims;this one is medium.  is that because it is a low likelihood of collisions? or some other reason?

 ;;;","10/Jun/17 10:22 PM;denyeart;[~Clayton Sims] Yes, this is Medium because the likelihood of encountering this in a real world deployment is low.

That being said, it will be easier to deal with pre-1.0 release than post-1.0 release, therefore I still think the fix should be targeted for 1.0.;;;","13/Jun/17 8:34 AM;ChristopherFerris;What makes us believe that the collision likelihood will be low? There isn't necessarily going to be a central authority for channel names. It could be completely decentralized. This also creates a security vulnerability because the collision would not necessarily be spotted before someone exploited by snarfing someone else's data.

I think it should be targeted for 1.0 as well, and to track suggest we mark this as High.;;;","13/Jun/17 10:49 AM;manish-sethi;Submitted a CR for fixing this - https://gerrit.hyperledger.org/r/#/c/10501;;;","13/Jun/17 10:58 PM;jyellick;The orderer also enforces channel names to comply with Kafka topic semantics.  The following is from {{fabric/common/configtx/manager.go}}

{noformat}
// validateChainID makes sure that proposed chain IDs (i.e. channel names)
// comply with the following restrictions:
//      1. Contain only ASCII alphanumerics, dots '.', dashes '-'
//      2. Are shorter than 250 characters.
//      3. Are not the strings ""."" or "".."".
//
// Our hand here is forced by:
// https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/common/Topic.scala#L29
{noformat}

So, the example given with underscores is not an allowable name.  It seems like the question is the conversion between {{.}} and {{-}}?;;;","13/Jun/17 11:41 PM;manish-sethi;[~jyellick] - Couch puts more limitations on this. For instance, it allows only small caps [a-z] within alphanumerics. Also, the first char cannot be a number. In the current impl, everything always changed to lower-case.

Are kafka channel names case sensitive?;;;","13/Jun/17 11:42 PM;binhn;Given the info from [~jyellick] above, and if the orderer could also eliminate period ""."" and uppercase from the channel name then we would be able to use channel name the same as db name without any needs from transformation.

However, discussed with [~jyellick] about eliminating uppercase from orderer seems more pervasive, and not what we want to take on at this point, so I am voting for doing db name transformation.;;;","13/Jun/17 11:46 PM;jyellick;Yes, the Kafka topic names are case sensitive.  The link from above appears to have broken, but here is one that works. 

https://github.com/apache/kafka/blob/ad3dfc6ab25c3f80d2425e24e72ae732b850dc60/core/src/main/scala/kafka/common/Topic.scala

I would suggest updating the {{validateChainID}} method referenced above, but there are other consumers of this method which rely on the case sensitivity, so I'm not sure it's a great idea for v1.

Seems like we need this to go in on the ledger side.;;;","13/Jun/17 11:51 PM;manish-sethi;For simplicity, I would be in the favor of  modifying `validateChainID` such that it imposes the naming limitations from the ledger as well. In other words, allow chain names only from the intersection of kafka and couch valid names sets.

Otherwise, there could always be a situation where the channel get created but the db could not got created (e.g., transformed named got longer than allowed by couch etc.). The channel could finally lead to an unusable state.;;;","13/Jun/17 11:57 PM;ChristopherFerris;This has reached the threshold of five votes and may be merged following review.;;;","13/Jun/17 11:59 PM;kchristidis;I am fine with that. Please tag me as a reviewer when you submit this.

Q: What makes eliminating uppercase pervasive?;;;","14/Jun/17 12:08 AM;jyellick;> For simplicity, I would be in the favor of  modifying `validateChainID` such that it imposes the naming limitations from the ledger as well. In other words, allow chain names only from the intersection of kafka and couch valid names sets.

Agreed this is simpler.

> Q: What makes eliminating uppercase pervasive?

We rely on mixed case names for our config keys, and validate them using this same function.  I thought this was used in more places, but it appears to be largely test code, so this is less invasive than I expected.

I can put together a CR if we agree this is the right approach.


;;;","14/Jun/17 12:12 AM;manish-sethi;I am good with this (modifying `validateChainID`);;;","14/Jun/17 12:31 AM;jyellick;Proposed fix in: https://gerrit.hyperledger.org/r/10535;;;","14/Jun/17 5:04 AM;manish-sethi;Pushed a dependent CR [https://gerrit.hyperledger.org/r/#/c/10541.] Though this clean up does not change the behavior in any manner as long as the names follow the restriction imposed by the change in the parent CR ([https://gerrit.hyperledger.org/r/10535]) and most of the code would behave a noop. Still, better to clean up to reflect the current reality.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Change layout of packages under orderer,FAB-2489,15056,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,kchristidis,kchristidis,27/Feb/17 12:36 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,08/Mar/18 12:19 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"They layout of the `orderer` package doesn't quite make sense anymore. For instance, ""kafka"", ""sbft"", and ""solo"" should not be on the same level as ""multichain"" - they serve different purposes. There are also SBFT-related files on the top level dir that really need to go (network_test.go, sbft_test.go).

Packages and files need to be renamed and re-arranged, so as to be more expressive and convey the relationship between the modules.

We will use this issue to document how we want the new structure to look like. Once we have reached agreement on the new layout, I'll push the respective changeset.",,ChristopherFerris,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3186,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1608,,,FAB-5263,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpdb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Feb/17 12:39 AM;kchristidis;Current layout:

{quote}common:
- blockcutter
- bootstrap
- broadcast
- configtxfilter
- deliver
- filter
- sigfilter
- sizefilter

configupdate

kafka

ledger:
- file
- fsledger
- ram

localconfig

mocks:
- blockcutter
- multichain
- util

multichain

sample_clients
- broadcast_config
- broadcast_timestamp
- deliver_stdout
- single_tx_client

sbft

solo

main.go
network_test.go
orderer.yaml
README.md
sbft_test.go
server.go{quote};;;","27/Feb/17 1:00 AM;kchristidis;Suggested layout:

{quote}common:
- blockcutter
- bootstrap
- - file
- broadcast
- deliver
- filter (w/ contents of current filter package)
- - configtx (used to be: configtxfilter)
- - signature (used to be: sigfilter)
- - size (used to be: sizefilter)
- multichain

impl: (is there a better name?)
- kafka
- sbft (w/ old contents plus the following)
- - network_test.go
- - sbft_test.go
- solo

ledger:
- file
- json
- ram

mocks (w/ contents unchanged)

sample_clients (w/ contents unchanged)

main.go
orderer.yaml
server.go{quote}

README.md should probably find a new home (under a new name) in the docs directory.

TODO:
- Undecided on where ""configupdate"" ends up. It's not included in the suggested layout above. Need to study its code.
- Inspect filter/configtxfilter/sigfilter/sizefilter to make sure there are no import cycles.
- I'm conflicted on whether ""orderer.yaml"" is the right filename. ""localconfig.yaml"" seems more expressive.;;;","14/Apr/17 10:49 PM;ChristopherFerris;[~kchristidis] I added ""Future"" label for fixVersion. If this is for v1.0.0 please update accordingly, otherwise Future. Thanks... I am trying to use this as an indicator that we have dealt with the issue - there is so much junk to wade through.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable cross-channel state queries in leveldb and couchdb,FAB-2490,15057,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,27/Feb/17 2:17 AM,23/Jan/20 3:53 AM,28/Oct/23 2:59 AM,23/Jan/20 3:53 AM,,,,,Future,,,fabric-ledger,,,,3,stale-item,,,,,,,"Scenario:
Company has bi-lateral channels with 10 business partners. Ledger holds contract data.
Company wants to query all contracts matching certain attributes, irrespective of the business partner channel.  Since they have access to all the data, they should be able to do a single query across the channels, instead of having to do 10 different queries.",,denyeart,StevenLynn,sykesm,takakir,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,,,,,,,Unset,,,,"1|hzx7kn:",,,,Unset,Unset,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,denyeart,StevenLynn,sykesm,takakir,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:53 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
golang codepackage should only contain relevant source files,FAB-2493,15060,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,greg.haskins,greg.haskins,27/Feb/17 6:56 AM,16/Jan/20 10:32 PM,28/Oct/23 2:59 AM,16/Jan/20 10:32 PM,v1.0.0-alpha2,,,,Future,,,fabric-peer,fabric-sdk-node,,,6,external,sdk-triaged,,,,,,"Code packages should be as lean as possible, containing only the go/c/h files necessary to compile the chaincode into a binary.  This includes the chaincode application any of its dependencies, direct or transitive.

Today, we basically copy the entire $GOPATH/src regardless of its relevance to the chaincode application.  For developers that work with go on multiple projects, this often may lead to many more dependencies being deployed than is strictly necessary.

We should be able to use the techniques outlined here:

https://dave.cheney.net/2014/09/14/go-list-your-swiss-army-knife

",,ChristopherFerris,denyeart,fredbi,greg.haskins,guoger,heatherp,mastersingh24,muralisr,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4819,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3095,,,,,,,,,"1|hzx49b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,denyeart,fredbi,greg.haskins,guoger,heatherp,mastersingh24,muralisr,troyronda,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Mar/17 11:26 AM;greg.haskins;Re-opening because the SDK has only been partially fixed and the CLI hasn't been fixed at all.;;;","08/Mar/17 11:43 PM;greg.haskins;Fix submitted for the peer: https://gerrit.hyperledger.org/r/#/c/6991/;;;","17/Apr/17 1:53 PM;jimthematrix;[~greg.haskins] should this be marked Done now?;;;","28/May/17 6:54 PM;mastersingh24;[~greg.haskins] - Don't we want / need to do this one?;;;","29/May/17 10:13 AM;greg.haskins;[~mastersingh24] In my opinion, yes.  I had submitted CR6991 for the peer side but it languished in review so I abandoned it for reconsideration after the code freeze.;;;","30/May/17 9:50 PM;muralisr;+1 This has direct usability impact. ;;;","31/May/17 2:22 PM;denyeart;[~greg.haskins] I assume the Fix Version should be 1.0.0, especially since this has 5 votes now... I'm making that update now...;;;","31/May/17 9:45 PM;greg.haskins;I've reopened CR 6991 for merge consideration.  (Still needs a rebase, etc, but I will tackle that next);;;","01/Jun/17 12:54 AM;ChristopherFerris;This has reached the needed number of votes, removing from review-needed. The change may be merged.;;;","06/Jun/17 12:18 AM;jimthematrix;[~greg.haskins] nice work in the CLI go code. since the implementation relies on launching `go list` command externally, it can be replicated in node.js and other SDKs as a future improvement as an optional alternative to setting up the `vendor` folder manually. do you want to leave this open for the SDKs to implement that or create separate JIRAs? I'm leaning toward the latter.;;;","06/Jun/17 12:27 AM;greg.haskins;[~jimthematrix] I was originally thinking the former.  But to your point, that might be easier to track if we have them broken out.  Perhaps subtasks so the linkage remains?;;;","07/Jun/17 12:42 AM;jimthematrix;I created 3 subtasks to capture the work in individual repos. the first one against the fabric was marked as done to reflect the result of your CR 6991.

the other two are marked as `Future`. I also changed the Improvement itself (this JIRA) to `Future` and `In progress`;;;","09/Jun/17 7:09 PM;guoger;IIUC, this change would require the environment (docker image) contains `go` executable. However, it seems that `fabric-baseos`, which is depended upon by `fabric-peer`, does not install `go`. Shouldn't this be problematic? I'm trying beta release and got error `failed with error: ""exec: not started""`, which is caused by `go` cmd not found. thx!;;;","09/Jun/17 8:54 PM;muralisr;[~guoger] The image to be used is `fabric-tools`.  For example of usage, take a look at examples/e2e_cli /docker-compose-cli.yaml please.  ;;;","10/Jun/17 11:50 AM;greg.haskins;[~guoger] the fundamental problem is that the peer container was intended to only serve as a minimal container for running a peer node.  As such, it was intentionally packed into baseos, which is intentionally as minimal as possible.  Unfortunately, people started to (ab)use the peer container as a CLI too. I am of the opinion that docker is great in general, but not as a vehicle for CLI.  In any case, as [~muralisr] points out, ""fabric-tools"" was created as a replacement for the use case of driving the CLI from a docker container.;;;","19/Jun/17 11:37 AM;greg.haskins;Unassigning myself since I may or may not be involved in the SDK ports.;;;","16/Jan/20 10:32 PM;heatherp;I'm closing this off, as I think it's stale - feel free to re-open;;;",,,,,,,,,,,,,,,,,,,,,,,
Panic upon peer startup when state db recovery is needed (CouchDB),FAB-2498,15065,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,27/Feb/17 4:25 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,01/Mar/17 9:31 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x9d89df]

goroutine 1 [running]:
panic(0xb49b20, 0xc4200140c0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb.(*VersionedDB).GetLatestSavePoint(0xc4203b28c0, 0xc42021d2b0, 0x9c6041, 0x7f7821f07398)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go:405 +0x7f
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*LockBasedTxMgr).GetLastSavepoint(0xc420303f90, 0xbb1140, 0xc42036f500, 0x7f7821f07398)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_txmgr.go:52 +0x33
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*LockBasedTxMgr).ShouldRecover(0xc420303f90, 0x3, 0xc4203b2900, 0x7f7821f07398, 0xc4203b2900, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/lockbased_txmgr.go:112 +0x2f
github.com/hyperledger/fabric/core/ledger/kvledger.(*kvLedger).recoverDBs(0xc42035c980, 0xc42035c980, 0xc420303f90)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:83 +0x1ca
github.com/hyperledger/fabric/core/ledger/kvledger.newKVLedger(0xc4203a3a28, 0x4, 0x11df180, 0xc4203c48e0, 0x11de980, 0xc4203b28c0, 0x11dc880, 0xc4203b2900, 0xc42021d4f0, 0x748933, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger.go:62 +0x1b6
github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Open(0xc42000cac0, 0xc4203a3a28, 0x4, 0x4, 0x1216320, 0x0, 0x21891f6b00413ae8)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:142 +0x294
github.com/hyperledger/fabric/core/ledger/ledgermgmt.OpenLedger(0xc4203a3a28, 0x4, 0x0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:95 +0x227
github.com/hyperledger/fabric/core/peer.Initialize(0xc9b218)
	/opt/gopath/src/github.com/hyperledger/fabric/core/peer/peer.go:96 +0x171
github.com/hyperledger/fabric/peer/node.serve(0xc420235220, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:199 +0x84b
github.com/hyperledger/fabric/peer/node.glob..func1(0x11c7500, 0xc420235220, 0x0, 0x1, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:75 +0x3f
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x11c7500, 0xc4202351f0, 0x1, 0x1, 0x11c7500, 0xc4202351f0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x11c7d80, 0xf, 0xc42015ed78, 0x7)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x11c7d80, 0x10, 0xc42015ed78)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x52d",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx61b:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make Org Name and Org ID the same in configtxgen yaml,FAB-2499,15066,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,27/Feb/17 10:22 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,19/Apr/17 3:48 AM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,"Hi.

A comment about the configuration:

    - &Org0
        # DefaultOrg defines the organization which is used in the sampleconfig
        # of the fabric.git development environment
        Name: Org0MSP

        # ID to load the MSP definition as
        ID: Org0MSP



The org Name and ID need to be the same because the org names that are returned from the Organizations() method, which gossip uses is actually the Org Name above (in bold), and the MSP-IDs of the peers are the IDs of the org above.

https://github.com/hyperledger/fabric/blob/master/common/configvalues/api.go#L45-L48
// Application stores the common shared application config
type Application interface {
	// Organizations returns a map of org ID to ApplicationOrg
	Organizations() map[string]ApplicationOrg
}

If they are not the same, it causes problems for gossip and make the gossip layer think the peers of its own org are not in its channel, and since this configuration is probably done in the same way by all org operators - most likely the gossip layer would
consider all peers not in the channel.

I suggest that we either:
Delete the Name and leave the ID 
Delete the ID and leave the Name
Change the implementation of Application so that the keys of the map are the IDs and not the Names.


This wasn't known until yesterday, and I have made a change set in gossip that ignores such a bad join channel config and logs an error ( https://gerrit.hyperledger.org/r/#/c/6513/ ) but I think it's better not to let the users/operators shoot themselves in the foot.


[~jyellick] [~binhn]
",,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxm3r:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/17 1:42 AM;scottz;From an operator's perspective, there are two possible solutions.
# Eliminate one of the configuration environment variables (either Name or ID) in the Organization section for the PeerOrgs in conffigtx.yaml. It is silly and confusing to define two things that must be equivalent based on internal reasons. Of course, this requires cleaning up the code - and impacts test scripts and tools in and out of fabric, so doing this soon is VERY desirable before even more dependencies and scripts are written.
# Leave both items in the config file. This makes sense only if they serve different purposes for the customer, in how they think and manage their network. Choosing this option means the customer can set them to different strings - which means we need to enhance the code to work when they are set to different values (which implies changing the title of this jira issue).
;;;","18/Apr/17 5:28 AM;yacovm;I pushed a change set to take care of this so the requirement above will not be needed: https://gerrit.hyperledger.org/r/#/c/8121/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use preferred form of CMD instruction in Dockerfile.in,FAB-2500,15067,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sanchezl,sanchezl,sanchezl,28/Feb/17 12:29 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,01/Mar/17 2:53 AM,,,,,,,,fabric-build,,,,0,quality,,,,,,,"The array form of the Dockerfile CMD instruction is preferred over the ""shell"" form of the instruction. The shell form of the instruction starts a shell first, and then executes the command, resulting in an extra process in the container. ",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Start notification is lost when installing Java chaincode,FAB-2501,15068,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,sanchezl,sanchezl,sanchezl,28/Feb/17 12:41 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,01/Mar/17 11:43 PM,,,,,,,,fabric-peer,,,,0,quality,,,,,,,"Timeout occurs when installing Java chain code. 

peer logs display, before eventually timing out:
{{[chaincode] notifyDuringStartup -> DEBU 2f2 nothing to notify (dev mode ?)}}
",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2365,,,,,,,,,,,"28/Feb/17 12:44 AM;sanchezl;behave.log;https://jira.hyperledger.org/secure/attachment/10533/behave.log","28/Feb/17 12:44 AM;sanchezl;install_instantiate_a_first_version_chaincode_via_cli_1_2__orderer.log;https://jira.hyperledger.org/secure/attachment/10534/install_instantiate_a_first_version_chaincode_via_cli_1_2__orderer.log","28/Feb/17 12:44 AM;sanchezl;install_instantiate_a_first_version_chaincode_via_cli_1_2__peer.log;https://jira.hyperledger.org/secure/attachment/10535/install_instantiate_a_first_version_chaincode_via_cli_1_2__peer.log",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm47:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
End-to-End Test flow from CLI,FAB-2503,15070,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,28/Feb/17 1:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,04/Mar/17 5:48 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,A chaincode_example02 based end-to-end flow verification from CLI Commands using docker-compose and artifacts generated using behave,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm4n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/17 10:59 PM;Ratnakar;Submitted the chanmegs with End-to-End flow https://gerrit.hyperledger.org/r/#/c/6607;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can Not Run Behave To Create Bootstrap Artifacts - Next Error,FAB-2504,15071,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jeffgarratt,bmos299,bmos299,28/Feb/17 2:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,07/Mar/17 5:28 AM,v1.0.0,,,,v1.0.0,,,,,,,0,,,,,,,,"Hi Jeff, Ramesh and I are both getting the following error when running at commit level *29d7fc035df697a68d271d628e693c556354486f*


Can Not Run Behave To Create Bootstrap Artifacts
vagrant@hyperledger-devenv:v0.3.0-29d7fc0:/opt/gopath/src/github.com/hyperledger/fabric/bddtests$ clear
vagrant@hyperledger-devenv:v0.3.0-29d7fc0:/opt/gopath/src/github.com/hyperledger/fabric/bddtests$ behave -k -D cache-deployment-spec features/bootstrap.feature
Exception TypeError: Couldn't parse file content!
Traceback (most recent call last):
  File ""/usr/local/bin/behave"", line 11, in <module>
    sys.exit(main())
  File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 109, in main
    failed = runner.run()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 672, in run
    return self.run_with_paths()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 677, in run_with_paths
    self.load_hooks()
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 631, in load_hooks
    exec_file(hooks_path, self.hooks)
  File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 304, in exec_file
    exec(code, globals, locals)
  File ""environment.py"", line 3, in <module>
    from steps.docgen import DocumentGenerator
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/docgen.py"", line 16, in <module>
    from bootstrap_util import getDirectory
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 40, in <module>
    import orderer_util
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 23, in <module>
    import devops_pb2
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/devops_pb2.py"", line 16, in <module>
    import chaincode_pb2 as chaincode__pb2
  File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/chaincode_pb2.py"", line 27, in <module>
    dependencies=[chaincodeevent__pb2.DESCRIPTOR,google_dot_protobuf_dot_timestamp__pb2.DESCRIPTOR,])
  File ""/usr/local/lib/python2.7/dist-packages/google/protobuf/descriptor.py"", line 824, in __new__
    return _message.default_pool.AddSerializedFile(serialized_pb)
TypeError: Couldn't parse file content!
vagrant@hyperledger-devenv:v0.3.0-29d7fc0:/opt/gopath/src/github.com/hyperledger/fabric/bddtests$

Also Fhttps://jira.hyperledger.org/browse/FAB-1141 has the pip installs needed in vagrant.  Can we add these commands to the vagrant environment?",,bmos299,Clayton Sims,harsha544,jeffgarratt,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1742,,,,,,,,,,,,,,,,,,,,,,"05/Mar/17 3:18 AM;bmos299;behave.txt;https://jira.hyperledger.org/secure/attachment/10561/behave.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm4v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,Clayton Sims,harsha544,jeffgarratt,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/17 2:20 AM;jeffgarratt;Appears to be older artifacts around.  The lastest CR should address.  It is in flight.;;;","28/Feb/17 2:58 AM;bmos299;Thanks Jeff.  I thought it was my error so I did everything from scratch and then Ramesh mentioned he had the same error.

Let me know if you need anything. ;;;","04/Mar/17 5:18 AM;Clayton Sims;Did you get the fix in per this mornings call?
;;;","04/Mar/17 10:28 PM;bmos299;Hi Jeff, I cherry picked the open CR for https://gerrit.hyperledger.org/r/#/c/6389/ and got the following:


e
    And I wait ""2"" seconds                                                                                                                                                                                   # None
    And user ""dev0Org0"" sends deliver a seek request on orderer ""orderer0"" with properties                                                                                                                   # None
      | ChainId                           | Start | End |
      | com.acme.blockchain.jdoe.Channel1 | 2     | 2   |
    Then user ""dev0Org0"" should get a delivery ""deliveredInvokeTx1Block"" from ""orderer0"" of ""1"" blocks with ""1"" messages within ""1"" seconds                                                                  # None

context.failed = True

Failing scenarios:
  features/bootstrap.feature:263  Bootstrap a development network with 4 peers (2 orgs)  and 1 orderer (1 org), each having a single independent root of trust (No fabric-ca, just openssl) -- @1.1 Orderer Options

0 features passed, 1 failed, 0 skipped
0 scenarios passed, 1 failed, 0 skipped
21 steps passed, 1 failed, 38 skipped, 0 undefined
Took 0m7.188s
vagrant@hyperledger-devenv:v0.3.0-29d7fc0:/opt/gopath/src/github.com/hyperledger/fabric/bddtests$

Let me know your thoughts.

Thanks.
;;;","05/Mar/17 12:33 AM;jeffgarratt;Getting ready to address with https://gerrit.hyperledger.org/r/#/c/6389/

Gonna review with Binhn and Barry in a minute, and hopefully this will address all of the current issues with behave.;;;","05/Mar/17 1:50 AM;jeffgarratt;Walked through https://gerrit.hyperledger.org/r/#/c/6389/ with Binhn successfully. Waiting for merge.;;;","05/Mar/17 3:19 AM;bmos299;Hi Jeff, I just uploaded my latest run, behave.txt.  Can you take a look and comment when you get a chance.
Thanks. ;;;","05/Mar/17 4:25 AM;jeffgarratt;https://gerrit.hyperledger.org/r/#/c/6389/ merged;;;","05/Mar/17 9:30 AM;rameshthoomu;[~jeffgarratt] : Tested Behave on latest fabric commits and observed the same error. 

cd bddtests && behave -k -D cache-deployment-spec features/bootstrap.feature
before_step: <steps.contexthelper.ContextHelper instance at 0x7f7fc071f3f8>

      
{code:java}
Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 271, in step_impl
          signedProposal = endorser_util.signProposal(proposal=proposal, entity=user, signersCert=signersCert)
        File ""/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/bddtests/steps/endorser_util.py"", line 106, in signProposal
          entity.verifySignature(signature=signature, signersCert=signersCert, data=proposalBytes)
        File ""/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 189, in verifySignature
          vk = ecdsa.VerifyingKey.from_der(crypto.dump_publickey(crypto.FILETYPE_ASN1, signersCert.get_pubkey()))
      AttributeError: 'module' object has no attribute 'dump_publickey'
      
      Captured stdout:
      Will copy gensisiBlock over at this point 
      Returning GRPC for address: 0.0.0.0:32768
      dev0Org0 received reply: status: SUCCESS
      , counter = 1
      Done
      Start and end = 0/0
      
      SeekInfo = start {
        specified {
        }
      }
      stop {
        specified {
        }
      }
      behavior: FAIL_IF_NOT_READY    
      Done receiving blocks

{code}

*Jenkins Build Status:* https://jenkins.hyperledger.org/sandbox/job/behave/1/consoleText;;;","05/Mar/17 9:48 AM;jeffgarratt;[~rameshthoomu] Did you follow the steps in the README.md to setup the python environment?  These steps will ensure that your python env is correct (Or at least as close as possible).;;;","07/Mar/17 5:28 AM;bmos299;Thanks for the help Jeff. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Make config sequence explicit, and all config updates sequential",FAB-2511,15078,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,28/Feb/17 6:32 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm5r:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,3.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end tests are failing with signature is invalid error after merge fabric commit# e3dc14d,FAB-2514,15081,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jimthematrix,rameshthoomu,rameshthoomu,28/Feb/17 6:57 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,28/Feb/17 11:18 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"end-to-end tests are failing in node-sdk after the fabric commit# e3dc14db46113aaf92562e0d49a2fa614df63f1d merge. Below is the error log


{noformat}
21:25:38 error: [Peer.js]: GRPC client got an error response from the peer. Error: The creator's signature over the proposal is not valid, err The signature is invalid
21:25:38     at /w/workspace/e2e/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
21:25:38 error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The creator's signature over the proposal is not valid, err The signature is invalid
21:25:38     at Object.callback (/w/workspace/e2e/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:9:3695)
21:25:38     at /w/workspace/e2e/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
21:25:38 error: [Peer.js]: GRPC client got an error response from the peer. Error: The creator's signature over the proposal is not valid, err The signature is invalid
21:25:38     at /w/workspace/e2e/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:434:17
21:25:38 error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The creator's signature over the proposal is not valid, err The signature is invalid
21:25:38     at Object.callback (/w/workspace/e2e/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:9:3695)
21:25:38     at /w/workspace/e2e/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:437:14
21:25:38 debug: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The creator's signature over the proposal is not valid, err The signature is invalid
21:25:38 debug: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: Error: The creator's signature over the proposal is not valid, err The signature is invalid
21:25:38 [2017-02-27 21:25:38.673] [ERROR] E2E - install proposal was bad
21:25:38 [2017-02-27 21:25:38.673] [ERROR] E2E - install proposal was bad
21:25:38 not ok 3 Failed to send install Proposal or receive valid response. Response null or status is not 200. exiting...
21:25:38   ---
21:25:38     operator: fail
21:25:38     at: promise.then.then (/w/workspace/e2e/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/end-to-end.js:144:8)
21:25:38   ...

{noformat}

Build Reference for more details:
https://jenkins.hyperledger.org/sandbox/job/e2e/36/console",Jenkins CI,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm67:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Feb/17 11:18 PM;rameshthoomu;end-to-end tests are working as expected on latest commits. Build Reference here: https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer needs to instantiate chaincode using deploymentspec from install,FAB-2524,15091,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisr,greg.haskins,greg.haskins,28/Feb/17 11:53 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,05/Mar/17 11:33 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"We currently perform LCCC deploy/upgrade operations using the deployment-spec passed in at deploy/upgrade time.  Aside from the appropriateness of using a deployment-spec for this API, there is the additional issue that we need to use the proper deployment-spec.  Only the specification provided at install() time would generally be considered correct.  This means we either need to force our clients to formulate a correct CDS, or worse, we operate blindly without one.  This materializes in odd ways, such as forcing the chaincodePath to be set, or instantiating a CAR type payload but ending up with a GOLANG payload instead (since this is the default)",,greg.haskins,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm7r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/17 11:51 PM;muralisr;[~ghaskins] {{Only the specification provided at install() time would generally be considered correct.}}
Agreed... and we should not have to need to send chaincode when doing instantiate.  I think I know what's happening. Will work on this today and update by EOD.;;;","02/Mar/17 1:55 PM;muralisr;[~greg.haskins] The CLI actually sends the instantiate without the CodePackage set. I also tried without the path as well. So the following command works in CLI

{code:java}
peer chaincode instantiate -n mycc -v 0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
{code}


Having said that it is true that it is important to make sure that code provided in {{instantiate}} is not used. 

The right way to do that is to not overload ChaincodeDeploymentSpec but use it only for {{install}}.

Propose for now we add a check during endorsement to return an error if CodePackage is set in ChaincodeDeploymentSpec for {{instantiate}} and {{upgrade}}.

Let me submit a CR with that for review.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consolidate config components to single directory,FAB-2526,15093,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,28/Feb/17 1:01 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,08/Mar/17 12:00 PM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm87:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/17 1:14 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6613/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode launchAndWaitForRegister failed,FAB-2527,15094,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,satheeshk,zerppen,zerppen,28/Feb/17 5:13 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Mar/17 12:02 PM,v0.6,,,,v0.6,,,fabric-peer,,,,0,chaincode,,,,,,,"Merging methods into fabric v0.6 JAVAChaincode from fabric-sdk-java v0.6 ,such as getRows/setEvent/,adding dependencies of build.gradle .And changing  Markfile  line 220 to ""echo core/chaincode/shim/java | tar -jcT - > $(@D)/javashimsrc.tar.bz2"" .Then I excuted make clean/make peer successfully.So,I excuted peer node start .In this step,i cannot see the information   ""[genesis] funcl -> INFO 00f Creating genesis bock"" after repeating several times.The result was that I always got the message ""[chaincode] Launch -> ERRO 01a launchAndWaitForRegister failed Timeout expired while starting chaincode"" when I excute peer chaincode deploy repeating several times though raising startuptimeout and deploytimeout 3 times.

After deleting the directory /var/hyperledger/production/* and recovering all fabric I  changed except raising startuptimeout and deploytimeout 3 times and the debug module of core.yaml ,then excuting ""make clean""/""make peer""/""peer node start""/""peer chaincode deploy"" ,the debug information is in Attachment.",ubuntu 16.4,zerppen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/17 12:34 PM;zerppen;Screen Shot 2017-03-01 at 10.01.08.png;https://jira.hyperledger.org/secure/attachment/10546/Screen+Shot+2017-03-01+at+10.01.08.png","01/Mar/17 12:34 PM;zerppen;Screen Shot 2017-03-01 at 11.31.18.png;https://jira.hyperledger.org/secure/attachment/10545/Screen+Shot+2017-03-01+at+11.31.18.png","01/Mar/17 12:34 PM;zerppen;Screen Shot 2017-03-01 at 11.31.36.png;https://jira.hyperledger.org/secure/attachment/10544/Screen+Shot+2017-03-01+at+11.31.36.png","01/Mar/17 12:34 PM;zerppen;Screen Shot 2017-03-01 at 11.31.51.png;https://jira.hyperledger.org/secure/attachment/10543/Screen+Shot+2017-03-01+at+11.31.51.png","01/Mar/17 12:34 PM;zerppen;Screen Shot 2017-03-01 at 11.32.18.png;https://jira.hyperledger.org/secure/attachment/10542/Screen+Shot+2017-03-01+at+11.32.18.png","01/Mar/17 12:34 PM;zerppen;Screen Shot 2017-03-01 at 11.32.29.png;https://jira.hyperledger.org/secure/attachment/10541/Screen+Shot+2017-03-01+at+11.32.29.png",,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm8f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,zerppen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect spelling and typos,FAB-2528,15095,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,murrekatt,murrekatt,murrekatt,28/Feb/17 9:42 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,23/Apr/17 9:50 PM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,,,ChristopherFerris,murrekatt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm8n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,murrekatt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 2:57 AM;ChristopherFerris;Any details would be welcomed. Are you still planning on submitting a fix(es)? [~murrekatt];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip Conn store - thread safety bug,FAB-2529,15096,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,28/Feb/17 10:16 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,02/Mar/17 12:08 AM,,,,,,,,,,,,0,,,,,,,,"When the gossip comm layer is shutdown, the connection store
is also shutdown as a result.
While a connection is deleted/added, and the conn store is shutdown
at the same time- a concurrent map read-write occures.
",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxm8v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
devmode support broken,FAB-2530,15097,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,muralisr,greg.haskins,greg.haskins,28/Feb/17 11:41 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 11:06 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,Support for devmode has been broken since the CR5555/channels work.  This is a critical function for debugging chaincode ,,denyeart,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm93:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 11:06 AM;denyeart;I did devmode recently, I think this is working now.  Please re-open if there is still an issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Range queries fail after iterating beyond 100 items,FAB-2531,15098,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,28/Feb/17 11:50 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,08/Mar/17 11:04 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"Peer sends 100 results to shim.
When shim asks for 101st item, the request for the next 100 goes back to peer and it fails with:

2017-02-28 12:01:34.649 UTC [chaincode] processStream -> DEBU 6559 [f7c0a169]Received message QUERY_STATE_NEXT from shim
2017-02-28 12:01:34.649 UTC [chaincode] HandleMessage -> DEBU 655a [f7c0a169]Fabric side Handling ChaincodeMessage of type: QUERY_STATE_NEXT in state ready
2017-02-28 12:01:34.649 UTC [chaincode] afterQueryStateNext -> DEBU 655b Received GET_STATE_BY_RANGE, invoking get state from ledger
2017-02-28 12:01:34.649 UTC [chaincode] afterQueryStateNext -> DEBU 655c Exiting QUERY_STATE_NEXT
2017-02-28 12:01:34.649 UTC [chaincode] filterError -> DEBU 655d Ignoring NoTransitionError: no transition
*2017-02-28 12:01:34.651 UTC [chaincode] func1 -> ERRO 655e query iterator not found. Sending ERROR*",,denyeart,lignyxg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2809,,,FAB-2462,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx62n:",,,,,,Sprint 12 - Ledger,Sprint 13 - Ledger,,,,,,,,,,,,,,,,,,,,,,,denyeart,lignyxg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Feb/17 11:55 PM;denyeart;Provide a short term fix for v1 beta.
Long term fix will be done in FAB-2462.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode.proto schema no longer makes sense and is confusing clients,FAB-2532,15099,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Won't Do,,greg.haskins,greg.haskins,28/Feb/17 11:52 PM,23/Jan/20 3:53 AM,28/Oct/23 2:59 AM,23/Jan/20 3:53 AM,,,,,v1.0.0,,,,,,,0,stale-item,,,,,,,"We currently have a ""one-size fits all"" approach in the protocol schema for dealing with chaincode deployment and upgrade.  Part of this is a vestige from the time before upgrade, non-golang code, and the NVP/CLI architecture.

For example: ""path"" makes sense if you are an NVP from the old architecture and need to know where the find the source.  However, once the code is packaged, we are overloading ""path"" to mean ""golang package"".  And this doesn't make sense if you are deploying something != golang, such as CAR or JAVA.

Another thing that doesn't make sense is we include the Type of chaincode in every invoke.  This is only relevant when the chaincode is deployed/upgraded.

This became substantially worse with the advent of CR5555 and the new delineation between install() and instantiate().  We are still using a deployment-spec for instantiate/upgrade when they really should only be referring to an image that was installed by install().

There are numerous examples of this nature in the current schema that I won't outline right here.  However, the net effect of all this is that the overloading is very confusing to clients.  The result is that it's not very clear how to drive the API.  I see a combination of clients hammering fields that have no meaning because either they have to to work-around a bug, or they are unsure if its needed.  In other cases, bugs are cropping up because a field that should have not been relevant to complete the desired function still has validation checks that are enforcing its inclusion.

An overhaul of the chaincode.proto is desperately needed, and I would suggest it is important to get this part of the ABI right now rather than be stuck with it for v1.0 and beyond.",,greg.haskins,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxm9b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,greg.haskins,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:53 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
instantiate is not properly qualifying image lookups with .version field,FAB-2533,15100,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,28/Feb/17 11:56 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,01/Mar/17 6:08 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The instantiate() validation logic includes a check to see if the image being referred to is present.  However, it doesn't seem to include the version qualifier, leading to the likelihood of a false positive.",,greg.haskins,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm9j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Mar/17 5:54 AM;muralisr;[~greg.haskins] The check during instantiate is an existence check. As only one version of a chaincode can be installed on the channel, it merely checks if the named chaincode exists on the channel - and issues an error if it does.  I think its working correctly... do let me know if i'm missing anything.;;;","01/Mar/17 6:08 AM;greg.haskins;Ah!  I read that wrong [~muralisr].  Very sorry.  Will close;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sending initiate proposal causes Peer panic,FAB-2536,15103,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,wlahti,rickr,rickr,01/Mar/17 12:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 10:07 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"I can run end2end with the test chain testchainid  install/initiate/invoke/query
I then change the test so it creates a new chain and joins a peer on the foo chain then runs the a same test.  The install chain code seems to work ok. But the initiate proposal results in a peer panic.

Logs provided ","Java SDK.  Fabric level  7134f9f270317958fc5718762882930c3a2d4a38
Date:   Mon Feb 27 20:48:34 2017 +0000",angelo.decaro,binhn,Clayton Sims,rickr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-92,,,,,,,,,,,,,,,,,,,,,,"02/Mar/17 2:45 AM;wlahti;foo.configtx;https://jira.hyperledger.org/secure/attachment/10548/foo.configtx","01/Mar/17 12:35 AM;rickr;orderer..20170228102936.log;https://jira.hyperledger.org/secure/attachment/10539/orderer..20170228102936.log","01/Mar/17 12:35 AM;rickr;peer.20170228102936.log;https://jira.hyperledger.org/secure/attachment/10540/peer.20170228102936.log","01/Mar/17 12:35 AM;rickr;sdk.20170228102936.log;https://jira.hyperledger.org/secure/attachment/10538/sdk.20170228102936.log",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxm9z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,binhn,Clayton Sims,rickr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 2:44 AM;wlahti;The problem was caused by the foo.configtx file in src/test/fixture for the java-sdk, which did not include any MSP information. I generated a new foo.configtx using {code}configtxgen -outputCreateChannelTx foo.configtx -profile SampleSingleMSPSolo -channelID foo{code} and end2end for java now runs successfully for channel foo. 

I still need to look into why the lack of MSP information is causing a panic on the peer and make sure the code can handle that situation gracefully. ;;;","02/Mar/17 4:30 AM;binhn;If msp is nil, referencing a struct variable would cause this segment violation

mspimpl.go, line 480
    if sId.Mspid != msp.name

msp.name would panic

[~adc] [~ales];;;","02/Mar/17 11:16 PM;binhn;I think we need to introduce Recover() to all ingresses to prevent someone from able to bring down the network.;;;","02/Mar/17 11:46 PM;angelo.decaro;[~binhn] How would that be possible? There is no way to reach the DeserializeIdentity function on instance msp if msp itself is nil. Also, sId is not nil at that time. Am I missing something?;;;","02/Mar/17 11:57 PM;angelo.decaro;It might be that the problem is in mspmgrimpl.go#67. If one calls GetIdentityDeserializer for a non-existing channel, then GetIdentityDeserializer creates a new MSP manager but does not initialize it and mspmgrimpl.go#67 would panic then. Just an hypothesis. ;;;","03/Mar/17 1:18 AM;binhn;[~adc] yes, a function can be invoked on a nil object -- funny thing in golang http://grokbase.com/t/gg/golang-nuts/151v0s0vp1/go-nuts-how-can-go-execute-a-method-of-a-nil-pointer;;;","04/Mar/17 5:19 AM;Clayton Sims;wil update comments with cr number
;;;","04/Mar/17 5:23 AM;wlahti;The CR to ensure that the peer doesn't panic in this situation has been pushed to gerrit for code review: https://gerrit.hyperledger.org/r/#/c/6801/;;;","09/Mar/17 4:53 AM;wlahti;The CR with the bug fix was merged into master last night. ;;;","10/Mar/17 11:44 PM;wlahti;[~rickr] Can you try the end2end tests with the old config.tx without MSP information and ensure that the peer no longer panics? Once you've done that, can you close out this bug?;;;","13/Mar/17 10:07 PM;rickr;[~wlahti]  Seems not to panic :

orderer_1  | 2017-03-13 13:05:08.635 UTC [orderer/multichain] Apply -> DEBU 125 Rejecting channel creation because: Failed to create config manager and handlers: Error deserializing key IngressPolicyNames for group /Channel/Orderer: Unexpected key IngressPolicyNames
orderer_1  | 2017-03-13 13:05:08.635 UTC [orderer/common/broadcast] Handle -> WARN 126 Rejecting broadcast message because of filter error: Rejected by rule: *multichain.systemChainFilter
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen tool doc needs to be updated,FAB-2537,15104,,Story,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,kchristidis,Ratnakar,Ratnakar,01/Mar/17 12:57 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,25/Apr/17 6:26 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,"
{code}
Creating a channel

The tool can also output a channel creation tx by executing

configtxgen -profile <profile_name> -outputCreateChannelTx <output.txname>

This will output a marshaled Envelope message which may be sent to broadcast to create a channel.
{code}

For generating channel configuration transaction, must supply *-channelID <channelID-name>* flag as well, which would be used while creating the channel.

",,kchristidis,melwindmello,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxma7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,melwindmello,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 3:03 PM;kchristidis;Do you mean may instead of must? The tool uses a default value if the flag is not set.;;;","21/Apr/17 3:08 PM;kchristidis;At any rate: https://gerrit.hyperledger.org/r/#/c/8341/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
During installation of chaincode on a peer in E2E test failed with panic,FAB-2539,15106,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Nishi,Nishi,01/Mar/17 1:27 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 11:09 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Scenario:

Network:
1 orderer
4 peers (peer0, peer1, peer2, peer3)

Bring network with orderer, peer0, peer2, peer3 cli

Test Execution:

1. Create 100 channels.
2. Join all peer0, peer2, peer3 on all channels
3. Install Chaincode on peer0 and peer2
4. Instantiate chaincode from peer2 on all channels
5. Query initial values from peer0 on all channels
6. Invoke on chaincode from peer0 on all channels

7. Install on peer3 
8. Query from peer3 on all channels

Test step 7 failed with following messages from docker logs -f cli


{noformat}
===================== Invoke transaction on PEER0 on ORG0 is successful ===================== 
2017-02-28 15:14:33.918 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-28 15:14:33.922 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-28 15:14:33.922 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-02-28 15:14:33.925 UTC [golang/hash] collectChaincodeFiles -> DEBU 004 not using input for hash computation for path:""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02"" name:""mycc"" version:""1.0""  
2017-02-28 15:14:33.925 UTC [golang/hash] getCodeFromFS -> DEBU 005 getCodeFromFS github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
2017-02-28 15:14:33.926 UTC [util] HashFilesInDir -> DEBU 006 hashFiles /opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
2017-02-28 15:14:33.928 UTC [container] WriteGopathSrc -> INFO 007 rootDirectory = /opt/gopath/src
2017-02-28 15:14:33.928 UTC [container] WriteFolderToTarPackage -> INFO 008 rootDirectory = /opt/gopath/src
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x30 pc=0x82810d]

goroutine 1 [running]:
panic(0xc09ac0, 0xc420014080)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage.func1(0xc4202d58b0, 0x43, 0x0, 0x0, 0x12c2180, 0xc4205f0930, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:65 +0xad
path/filepath.walk(0xc4202259c0, 0x32, 0x12ce9a0, 0xc42041f520, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:372 +0x22e
path/filepath.walk(0xc4205f0000, 0x2d, 0x12ce9a0, 0xc42032a340, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.walk(0xc4202c9ef0, 0x26, 0x12ce9a0, 0xc42032a270, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.walk(0xc4203104c0, 0x1a, 0x12ce9a0, 0xc42032a1a0, 0xc4202254c0, 0x0, 0x0)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.walk(0xc4202fccd0, 0xf, 0x12ce9a0, 0xc42032a0d0, 0xc4202254c0, 0x0, 0xc4202d4501)
	/opt/go/src/path/filepath/path.go:376 +0x344
path/filepath.Walk(0xc4202fccd0, 0xf, 0xc4202254c0, 0xcdfb28, 0x1)
	/opt/go/src/path/filepath/path.go:398 +0xd5
github.com/hyperledger/fabric/core/container/util.WriteFolderToTarPackage(0xc4202ca900, 0xc4202fccd0, 0xf, 0xc4202d4550, 0x48, 0xc420153740, 0x0, 0xc4202fc860, 0xc420151908)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:104 +0x1d1
github.com/hyperledger/fabric/core/container/util.WriteGopathSrc(0xc4202ca900, 0x7ffc10150cee, 0x47, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/util/writer.go:120 +0x1e1
github.com/hyperledger/fabric/core/chaincode/platforms/golang.writeChaincodePackage(0xc420310060, 0xc4202ca900, 0xc420225480, 0x40)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/package.go:36 +0xee
github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).GetDeploymentPayload(0x130c198, 0xc420310060, 0x130c198, 0x0, 0x0, 0x4a5831, 0x130c198)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:173 +0x12c
github.com/hyperledger/fabric/core/chaincode/platforms.GetDeploymentPayload(0xc420310060, 0x0, 0xc4201d18f8, 0x3, 0xcdffc0, 0x3)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/platforms.go:74 +0x5d
github.com/hyperledger/fabric/core/container.GetChaincodePackageBytes(0xc420310060, 0x0, 0x0, 0x0, 0x0, 0x110150cdf)
	/opt/gopath/src/github.com/hyperledger/fabric/core/container/vm.go:100 +0xaa
github.com/hyperledger/fabric/peer/chaincode.getChaincodeBytes(0xc420310060, 0xc420310001, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:63 +0x168
github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall(0xc4201fa6c0, 0xc4202c6060, 0x0, 0x6, 0xc4202c9a40, 0x9, 0x9)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:105 +0x2b1
github.com/hyperledger/fabric/peer/chaincode.installCmd.func1(0xc4201fa6c0, 0xc4202c6060, 0x0, 0x6, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:44 +0x52
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4201fa6c0, 0xc4201ffe60, 0x6, 0x6, 0xc4201fa6c0, 0xc4201ffe60)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x12b6ce0, 0xf, 0xc420010035, 0x7)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x12b6ce0, 0x5b, 0xc420010035)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x52d
!!!!!!!!!!!!!!! Chaincode installation on remote peer PEER3 is Failed !!!!!!!!!!!!!!!!
========== ERROR !!! Please check peer logs to verify the issue ===========
===================== FAILED to execute E2E Scenario ===================
{noformat}
==

 ",,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmaf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 11:08 AM;denyeart;Similar scenarios have succeeded on alpha release.  Please re-open if there is still an issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode installation on a remote peer fails,FAB-2540,15107,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,AdnanChoudhury,AdnanChoudhury,01/Mar/17 1:34 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,04/Oct/17 5:38 AM,,,,,,,,,,,,0,,,,,,,,"*Scenario*: I have two organizations, each with two peer (peer0 and peer1 belogs to org0, peer2 and peer3 belongs to org1), 3 of the peers reside in the same vagrant, the fourth peer (peer3) resides in another vagrant (so its a remote peer). Both vagrants belong to same network and can ping each other. 

(This is based on 4 peer example from https://github.com/ratnakar-asara/e2e)

The docker-compose in vagrant1 is:

{code:java}
version: '2'
services:

  orderer:
    container_name: orderer
    image: hyperledger/fabric-orderer
    environment:
      - ORDERER_GENERAL_LOGLEVEL=debug
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/orderer.block
      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/localMspConfig
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric
    command: orderer
    volumes:
    - ./crypto/orderer:/var/hyperledger/orderer
    ports:
      - 7050:7050
  
  peer0:
    container_name: peer0
    extends:
      file: peer-base/peer-base.yaml
      service: peer-base
    environment:
      - CORE_PEER_ID=peer0
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:7050
      - CORE_PEER_MSPCONFIGPATH=/var/hyperledger/msp/peer0/localMspConfig
      - CORE_PEER_LOCALMSPID=Org0MSP
      - CORE_PEER_GOSSIP_ENDPOINT=9.42.137.243:7051
    volumes:
        - /var/run/:/host/var/run/
        - ./crypto/peer/:/var/hyperledger/msp/
        - ./examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
    ports:
      - 7051:7051
      - 7053:7053
    depends_on:
      - orderer

  peer1:
    container_name: peer1
    extends:
      file: peer-base/peer-base.yaml
      service: peer-base
    environment:
      - CORE_PEER_ID=peer1
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0:7051
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:7050
      - CORE_PEER_MSPCONFIGPATH=/var/hyperledger/msp/peer1/localMspConfig
      - CORE_PEER_LOCALMSPID=Org0MSP
      - CORE_PEER_GOSSIP_ENDPOINT=9.42.137.243:8051
    volumes:
        - /var/run/:/host/var/run/
        - ./crypto/peer/:/var/hyperledger/msp/
        - ./examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
    ports:
      - 8051:7051
      - 8053:7053
    depends_on:
      - orderer
      - peer0

  peer2:
    container_name: peer2
    extends:
      file: peer-base/peer-base.yaml
      service: peer-base
    environment:
      - CORE_PEER_ID=peer2
      - CORE_PEER_GOSSIP_BOOTSTRAP=peer0:7051
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:7050
      - CORE_PEER_MSPCONFIGPATH=/var/hyperledger/msp/peer2/localMspConfig
      - CORE_PEER_LOCALMSPID=Org1MSP
      - CORE_PEER_GOSSIP_ENDPOINT=9.42.137.243:9051
    volumes:
        - /var/run/:/host/var/run/
        - ./crypto/peer/:/var/hyperledger/msp/
        - ./examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
    ports:
      - 9051:7051
      - 9053:7053
    depends_on:
      - orderer
      - peer0
      - peer1

  cli:
    container_name: cli
    image: hyperledger/fabric-peer
    tty: true
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_LOGGING_LEVEL=DEBUG
      - CORE_NEXT=true
      - CORE_PEER_ID=cli
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:7050
      - CORE_PEER_ADDRESS=peer0:7051
      - CORE_PEER_GOSSIP_IGNORESECURITY=true
      - CORE_PEER_LOCALMSPID=Org0MSP
      - CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/msp/sampleconfig
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: sh -c './script.sh | tee  results.log 2>&1; sleep 100000'
    #command: /bin/bash
    volumes:
        - /var/run/:/host/var/run/
        - ./examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
        - ./crypto/orderer/channel.tx:/opt/gopath/src/github.com/hyperledger/fabric/peer/channel.tx
        - ./crypto/peer/peer0/localMspConfig:/opt/gopath/src/github.com/hyperledger/fabric/msp/sampleconfig
        - ./crypto:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e/crypto/
        - ./script.sh:/opt/gopath/src/github.com/hyperledger/fabric/peer/script.sh
        - ./results.log:/opt/gopath/src/github.com/hyperledger/fabric/peer/results.log
    depends_on:
      - orderer
      - peer0
      - peer1
      - peer2

{code}

docker-compose in vagrant2:

{code:java}
version: '2'

services:

  peer3:
    container_name: peer3
    extends:
      file: peer-base/peer-base.yaml
      service: peer-base
    environment:
      - CORE_PEER_ID=peer3
      - CORE_PEER_GOSSIP_BOOTSTRAP=9.42.137.243:7051
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=9.42.137.243:7050
      - CORE_PEER_MSPCONFIGPATH=/var/hyperledger/msp/peer3/localMspConfig
      - CORE_PEER_LOCALMSPID=Org1MSP
      - CORE_PEER_GOSSIP_ENDPOINT=9.42.137.242:9051
    volumes:
        - /var/run/:/host/var/run/
        - ./crypto/peer/:/var/hyperledger/msp/
        - ./examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
        - ./myc1.block:/opt/gopath/src/github.com/hyperledger/fabric/peer/myc1.block
    ports:
      - 7051:7051
      - 7053:7053

{code}

Steps to reproduce:
In vagrant1, 
1) up the docker-compose-file ( creates cli, orderer, peer0, peer1, peer2 container) 
2) Create the channel from cli
3) add peer0,1,2 to the channel 
4) install chaincode in peer0, peer2 
in vagrant2:
1) up the docker-compse (creates peer3)
2) join peer3 to the channel (with the myc21.block file generated)
3) install chaincode fails with the following error:

{code:java}
root@ed3f605d80bc:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer chaincode install -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
2017-02-28 16:31:50.673 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-02-28 16:31:50.674 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-02-28 16:31:50.674 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
panic: runtime error: index out of range

goroutine 1 [running]:
panic(0xc0b000, 0xc4200140b0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).ValidateSpec(0x130e338, 0xc420312060, 0x130e338, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:87 +0x36d
github.com/hyperledger/fabric/peer/chaincode.checkSpec(0xc420312060, 0x6, 0xc42019c29c)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:51 +0xf1
github.com/hyperledger/fabric/peer/chaincode.getChaincodeBytes(0xc420312060, 0xc420312001, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:59 +0x147
github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall(0xc4201df440, 0xc420214780, 0x0, 0x6, 0xc4203061e0, 0x9, 0x9)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:105 +0x2b1
github.com/hyperledger/fabric/peer/chaincode.installCmd.func1(0xc4201df440, 0xc420214780, 0x0, 0x6, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:44 +0x52
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4201df440, 0xc4202145a0, 0x6, 0x6, 0xc4201df440, 0xc4202145a0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x12b8ce0, 0xf, 0xc420012075, 0x7)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x12b8ce0, 0x29, 0xc420012075)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x52d

{code}
",,AdnanChoudhury,harsha544,oleksandr.borysenko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxman:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,harsha544,oleksandr.borysenko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 11:05 PM;oleksandr.borysenko;Hi [~AdnanChoudhury],
Please check your environment variables.
Maybe you don't have GOPATH inside your container
I had same error
{code}
<chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0     
panic: runtime error: index out of range

goroutine 1 [running]:
panic(0xc2c3a0, 0xc4200140b0)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).ValidateSpec(0x13467e0, 0xc4202a20a0, 0x13467e0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:87 +0x36d
github.com/hyperledger/fabric/peer/chaincode.checkSpec(0xc4202a20a0, 0x6, 0xc42016e3fc)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:51 +0xf1
github.com/hyperledger/fabric/peer/chaincode.getChaincodeBytes(0xc4202a20a0, 0xc4202a2001, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:59 +0x147
github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall(0xc4201bf200, 0xc4201e8780, 0x0, 0x6, 0xc4202b4000, 0x9, 0x9)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:107 +0x2b1
github.com/hyperledger/fabric/peer/chaincode.installCmd.func1(0xc4201bf200, 0xc4201e8780, 0x0, 0x6, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:46 +0x52
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4201bf200, 0xc4201e8660, 0x6, 0x6, 0xc4201bf200, 0xc4201e8660)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x12f0cc0, 0xf, 0xc420185b58, 0x7)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x12f0cc0, 0x28, 0xc420185b58)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x52d
{code}

it helps me
{noformat}
export GOPATH=/opt/gopath
{noformat};;;","04/Oct/17 5:38 AM;AdnanChoudhury;This work is abandoned in favor of using the Cello tool. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add tool to create various crypto configs to bootstrap a network,FAB-2544,15111,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,01/Mar/17 3:40 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,15/Apr/17 6:08 AM,,,,,v1.0.0,,,fabric-orderer,fabric-peer,,,0,,,,,,,,"There are a number of artifacts which are required in order to bootstrap a fabric network and be able to test features such as membership, channels, endorsement policies, etc.

Some of these artifacts can be generated by BDD, some from various CLIs and tools, but it's pretty hard to get things going.

This tool will attempt to bring together as many pieces as possible",,ChristopherFerris,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmbj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 3:36 AM;ChristopherFerris;how does this relate to FAB-2181?;;;","13/Apr/17 3:51 PM;muralisr;[~mastersingh24] also, the other two tasks are mostly done as well ? anything left or improvements can be handled in a sepearate JIRA so this can be closed ? ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate crypto material based on user input,FAB-2545,15112,15111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,01/Mar/17 3:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,02/Mar/17 8:47 PM,,,,,v1.0.0,v1.0.0-alpha1,,fabric-orderer,fabric-peer,,,0,,,,,,,,"Generate local and verifying MSP file structures based on configurable number of peer organizations, peers per organization and number of orderer nodes",,CarlXK,guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmbr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,CarlXK,guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/May/17 11:49 AM;guoger;Shouldn't this line [https://github.com/hyperledger/fabric/blob/master/common/tools/cryptogen/main.go#L260] be `

err = renderOrgSpec(&orgSpec, ""orderer"")`?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate yaml file for configtx tool,FAB-2546,15113,15111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,01/Mar/17 3:44 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Apr/17 6:07 AM,,,,,WON'T FIX,,,fabric-orderer,fabric-peer,,,0,,,,,,,,"once the crypto material has been generated, use it to create a configtx.yaml which can then be used as input to the configtx tool",,kchristidis,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmbz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 3:22 AM;kchristidis;Not quite clear to me what we're trying to achieve here? (And with which binary?);;;","15/Apr/17 6:05 AM;mastersingh24;actually - I'm going to close this as won't fix since I think the best thing to do is to create an item to create a unified CLI tool for dealing with all Fabric runtime components;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate orderer genesis block and channel config and create channel transaction,FAB-2547,15114,15111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,,mastersingh24,mastersingh24,01/Mar/17 3:46 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Apr/17 6:08 AM,,,,,WON'T FIX,,,fabric-orderer,fabric-peer,,,0,,,,,,,,Use the configtx.yaml file output to automatically generate a genesis block and create channel transaction,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmc7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow concurrent config proposals,FAB-2552,15119,14381,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,01/Mar/17 6:47 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:23 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmdb:",,,,,,Sprint 11 - consensus,Sprint 13 - Consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Have configtx manager track deserialized values,FAB-2554,15121,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,01/Mar/17 9:44 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmdr:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Remove implicit 'behave' from the ""make all"" target",FAB-2556,15123,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sheehan,greg.haskins,greg.haskins,01/Mar/17 11:03 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,11/Mar/18 10:22 PM,,,,,v1.2.0,,,fabric-peer,,,,0,,,,,,,,"To my knowledge, the behave tests still do not work in all circumstances and they are generally sensitive to the host environment's prerequisites.  Therefore, lets remove behave as an implicit target.  Note that the explicit targets e.g. ""make behave"" will continue to function, and we can always add it back to 'all' when it makes sense to do so.",,grapebaba,greg.haskins,rameshthoomu,sheehan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmdz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,grapebaba,greg.haskins,rameshthoomu,sheehan,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Mar/17 11:07 AM;grapebaba;+1(y);;;","08/Mar/18 1:17 AM;sheehan;[~rameshthoomu] would this have any impact on CI?;;;","08/Mar/18 2:14 AM;rameshthoomu;[~sheehan] no impact on CI as we don't run `make all` target.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove overlapping chaincode tests to reduce UT time,FAB-2557,15124,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,01/Mar/17 1:12 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Mar/17 5:12 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"The chaincode tests are more integration than UT tests (due to historical reasons). This makes them take a lot of time to complete UT. There is many overlapping functions so removing some of them would not take away coverage. Some examples - (1) there's no need for a separate deploy test as chaincode is deployed in many tests.  (2) Http based deploy is not necessary as chaincode package assembly is purely a client side function now (CLI and SDK are ""clients"").

In this task we will ""t.Skip()"" tests with a comment explaining rationale for the removal.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5bj:",,,,,,Sprint 13 - Endorser,Sprint 14 - Endorser,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GetQueryResult() query re-write is not correct,FAB-2560,15127,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,01/Mar/17 3:55 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,02/Mar/17 4:08 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"From fabric-ledger channel:

Query is getting re-written in fabric with duplicate ""data"" wrappers.

Query in chaincode:

{""selector"":{""docTypeId"":3,""oriRe"":""SMP"",""ctB"":""CTB"",""valDt"":""1990-12-24"",""orB"":""YYY"",""tD"":""TD"",""cuVoB"":52,""cuIoBu"":""AA"",""cuSt"":""NA""}}

Result:

2017-03-01 06:48:14.782 UTC [statecouchdb] ApplyQueryWrapper -> DEBU 441 Rewritten query with data wrapper: {""selector"":{""$and"":[{""chaincodeid"":""marbles""},{""data.cuIoBu"":""AA"",""data.cuVoB"":52,""data.data.ctB"":""CTB"",""data.data.cuSt"":""NA"",""data.docTypeId"":3,""data.orB"":""YYY"",""data.oriRe"":""SMP"",""data.tD"":""TD"",""data.valDt"":""1990-12-24""}]}}

See the problem in red:
{
   ""selector"":{
      ""$and"":[
         {
            ""chaincodeid"":""marbles""
         },
         {
            ""data.cuIoBu"":""AA"",
            ""data.cuVoB"":52,
{color:red}            ""data.data.ctB"":""CTB"",
            ""data.data.cuSt"":""NA"",{color}
            ""data.docTypeId"":3,
            ""data.orB"":""YYY"",
            ""data.oriRe"":""SMP"",
            ""data.tD"":""TD"",
            ""data.valDt"":""1990-12-24""
         }
      ]
   }
}",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx61r:",,,,,,Sprint 13 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add an example script that can be used to spin up a network with CouchDB  ,FAB-2565,15132,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,01/Mar/17 11:56 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,16/Mar/17 2:44 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"Will use the fabric-couchDB image instead of vanilla X86 couchDB.
",,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmfb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Light Chaincode Event,FAB-2567,15134,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,02/Mar/17 1:04 AM,23/Jan/20 3:53 AM,28/Oct/23 2:59 AM,23/Jan/20 3:53 AM,,,,,,,,,,,,0,stale-item,,,,,,,"Ability to send a chaincode event to client without committing a transaction.

+*Motivation*+

At the moment, the Fabric doesn't have a mechanism for delivery of an asynchronous event to a client in cases when the client doesn't know in advance which peer will deliver the event. For example, if the client requests a global query (FAB-1153, FAB-2440), it doesn't know which peer will perform the service. The result of the global query needs to be delivered somehow to the client. The solution proposed here uses the existing chaincode event mechanism in Fabric to achieve this.

Currently, to raise a chaincode event, one needs to commit a transaction to a ledger. Sometimes the overhead of the transaction commit is not desirable. This is especially true for queries, where there is no change to the system state. This solution doesn't require a transaction commit.

+*API*+

* A client uses Client SDK to register as a chaincode event listener with a peer or a set of peers on a channel dedicated to delivering such events. When registering, the client expresses its interest in an event name.
* User CC that wants to deliver an event to a client (that is unknown to it) calls the Light Chaincode Event System Chaincode (LCESCC) on a peer on the messaging channel (where the client is listening on) to create a new chaincode event and deliver it to the client. Passing the parameters required for the User CC to call the LCESCC, like the peers where the the client is listening on and the event name, is left to the application.

+*Security*+

Messages delivered by peers - service providers to clients requesting the service should be private between the service provider and the client. Some of the security measures that should be considered are:
* Prevent a client to register to listen to all chaincode events in the system. It should be possible to configure the peer to raise exception if a client attempts to register without expressing its interest in a non-empty event name.
* Data encryption at the application level.

+*Changes to the Client SDK*+

Client SDK has to allow the client to register as a listener to a named chaincode event. The Client SDK Specification currently doesn't regulate event handling. For example, Node.JS client SDK currently allows the client to listen only to block events.

+*Changes to Fabric Core*+

Implement a configuration option to prevent a client to register for listening of all chaincode events. When this new feature is turned on, a client would have to express interest in a non-empty event name.
",,aleksandar.likic@gmail.com,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmfr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic@gmail.com,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:53 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Illegal file mode detected while deploy chaincode spec,FAB-2569,15136,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,greg.haskins,rameshthoomu,rameshthoomu,02/Mar/17 1:45 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Apr/17 9:55 PM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Illegal file mode detected  while deploying chaincode spec. I see this error in Vagrant environment and it is reproducible. 

{noformat}

unit-tests_1  | 2017-03-01 15:29:06.038 UTC [peer] func1 -> INFO 002 Auto detected peer address: 172.17.0.4:21212
unit-tests_1  | getting deployment spec for chaincode spec: type:GOLANG chaincode_id:<path:""github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example01"" name:""example01"" version:""0"" > input:<args:""init"" args:""a"" args:""100"" args:""b"" args:""200"" >
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func2 -> ERRO 003 chaincode ended with err: Received nil message, ending chaincode support stream
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func2 -> ERRO 004 chaincode ended with err: Received nil message, ending chaincode support stream
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func2 -> ERRO 005 chaincode ended with err: Received nil message, ending chaincode support stream
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func2 -> ERRO 006 chaincode ended with err: Received nil message, ending chaincode support stream
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func1 -> ERRO 007 chaincode-support ended with err: Received nil message, ending chaincode stream
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func1 -> ERRO 008 chaincode-support ended with err: Received nil message, ending chaincode stream
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func1 -> ERRO 009 chaincode-support ended with err: Received nil message, ending chaincode stream
unit-tests_1  | 2017-03-01 15:29:30.345 UTC [inproccontroller] func1 -> ERRO 00a chaincode-support ended with err: Received nil message, ending chaincode stream
unit-tests_1  | removing dir = /tmp/hyperledger/test/tmpdb/ledgersData
unit-tests_1  | --- FAIL: TestExecuteDeployTransaction (26.33s)
unit-tests_1  |         exectransaction_test.go:363: Error deploying <example01>: Error deploying chaincode: Illegal file mode detected for file src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example01/chaincode_example01.go: 100777

{noformat}

*file permission on chaincode_example01.go file:*

{code:java}
vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example01$ ls -ltr
total 3
-rwxrwxrwx 1 vagrant vagrant 3014 Mar  1 14:50 chaincode_example01.go

{code}
",Vagrant Environment,denyeart,greg.haskins,JonathanLevi,mastersingh24,rameshthoomu,silliman,zhangchao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2485,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7dr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,greg.haskins,JonathanLevi,mastersingh24,rameshthoomu,silliman,zhangchao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/17 1:47 AM;rameshthoomu;Git commit level# *d9a3e02 *Merge ""[FAB-2529] Gossip Conn store - thread safety bug"";;;","02/Mar/17 4:11 AM;denyeart; https://jira.hyperledger.org/browse/FAB-2482 was not related to this problem.;;;","29/Mar/17 10:29 AM;zhangchao;The vagrant mount the local fabric folder in windows onto guest linux with permission 777, all files have 0777 mode. This is because 777 is max permission in order that all files can be read/write/execute. I change the mount option to 0666, but failed to execute binary files. 
Here is the vagrant mount issue: http://serverfault.com/questions/398414/vagrant-set-default-share-permissions ;;;","05/Apr/17 9:58 AM;JonathanLevi;I'm on it.;;;","15/Apr/17 8:56 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7679/  should have resolved this issue.
[~greg.haskins] - can you verify and close if my assertion is correct?;;;","15/Apr/17 9:51 PM;greg.haskins;That is correct.  Will close.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consider re-adding or removing known peers to gossip membership requests,FAB-2570,15137,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,yacovm,yacovm,02/Mar/17 2:46 AM,30/Jul/19 11:59 AM,28/Oct/23 2:59 AM,30/Jul/19 11:59 AM,,,,,,,,,,,,0,,,,,,,,"As part of https://jira.hyperledger.org/browse/FAB-2007 gossip is going to only expose public ip addresses to peers outside of a peer's organization if the peers in question are configured with such, and not expose such peers to outside organizations if they are not.

On the other hand, in membership requests, a list of known peers is sent as an optimization to avoid sending back a list of dead peers.
Since when a peer sends a membership request to a remote peer can't authenticate the remote peer prior to sending the send, this is a security issue.

Therefore, I am removing this optimization in FAB-2007 and will revisit it later on when time permits.",,lmars,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmg7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lmars,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jul/19 11:59 AM;mastersingh24;No activity in a year or more;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow parsing of config outside of the configtx.Manager,FAB-2574,15141,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,02/Mar/17 4:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmgn:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
orderer service kills grpc connection with broadcast client after kafka brokers all stopped and started,FAB-2575,15142,,Story,Closed,FAB,Fabric,software,denyeart,,,Lowest,Won't Do,nickgaski,scottz,scottz,02/Mar/17 5:12 AM,10/Jan/20 1:54 AM,28/Oct/23 2:59 AM,10/Jan/20 1:54 AM,v1.0.0-alpha2,,,,,,,fabric-docs,,,,0,qa,quality,,,,,,"During retests after FAB-2259 was fixed, using Feb 27 conmit # 29d7fc035df697a68d271d628e693c556354486f, we encountered other errors.

Execute test ORD97. This includes a sequence of events while traffic is running:
docker stop kafka0 kafka1 kafka2 && sleep 20 && docker start kafka0 kafka1 kafka2

Problems observed:
1. Seven transactions are unaccounted for; they were acknowledged received by the orderer service, but never delivered in a batch
2. Although the orderer does not panic, the service never resumes as expected after KBs recover:

$ go test -run ORD97
========== OTE testname=ORD-97 TX=50000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1

Files are attached, but here are some of the key output and logs:

Total TX broadcasts Requested to Send     50000
Total TX broadcasts send success ACK      17397
Total TX broadcasts sendFailed - NACK     32603
Total Send-LOST TX (Not Ack or Nack))         0
Total Recv-LOST TX (Ack but not Recvd)        7
Total deliveries received TX on each ordrr     [  17390   17390   17390]
Total deliveries received Blocks on each ordrr [   1739    1739    1739]

2017-03-01 18:24:26.867 UTC [orderer/kafka] Send -> INFO 31744 Failed to send message to chain partition 74657374636861696e6964/0 on the Kafka cluster: kafka: client has run out of available brokers to talk to (Is your cluster reachable?)
2017-03-01 18:24:26.867 UTC [orderer/kafka] Enqueue -> ERRO 31745 Couldn't post to 74657374636861696e6964/0: kafka: client has run out of available brokers to talk to (Is your cluster reachable?)
",,joe-alewine,jyellick,kchristidis,scottz,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2582,FAB-2604,,,,,"02/Mar/17 5:11 AM;scottz;fail1-ote-stdout.txt;https://jira.hyperledger.org/secure/attachment/10550/fail1-ote-stdout.txt","02/Mar/17 5:11 AM;scottz;fail1_orderer0_logs.txt;https://jira.hyperledger.org/secure/attachment/10549/fail1_orderer0_logs.txt","08/Jun/17 12:09 AM;suryalnvs;kafka0.txt;https://jira.hyperledger.org/secure/attachment/10986/kafka0.txt","08/Jun/17 12:09 AM;suryalnvs;kafka1.txt;https://jira.hyperledger.org/secure/attachment/10987/kafka1.txt","08/Jun/17 12:10 AM;suryalnvs;kafka2.txt;https://jira.hyperledger.org/secure/attachment/10988/kafka2.txt","08/Jun/17 12:10 AM;suryalnvs;kafka3.txt;https://jira.hyperledger.org/secure/attachment/10989/kafka3.txt","08/Jun/17 12:10 AM;suryalnvs;orderer0.txt;https://jira.hyperledger.org/secure/attachment/10990/orderer0.txt","08/Jun/17 12:10 AM;suryalnvs;orderer1.txt;https://jira.hyperledger.org/secure/attachment/10991/orderer1.txt","08/Jun/17 12:10 AM;suryalnvs;orderer2.txt;https://jira.hyperledger.org/secure/attachment/10992/orderer2.txt","08/Jun/17 12:11 AM;suryalnvs;ote_FAB2575.txt;https://jira.hyperledger.org/secure/attachment/10993/ote_FAB2575.txt",,,,,,,,Unset,,,,,,,,,,,,"1|hzxmgv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,joe-alewine,jyellick,kchristidis,scottz,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/17 5:38 AM;scottz;These logs appeared after the last kafka-broker was stopped. I expected the Service_Unavailable errors. But then after they are restarted, we see http errors (which were NOT seen when stopping the kafka-brokers). The connection between my Producer clients and the orderers should never have been broken when the kafka-brokers were restarted (which should break only the connection between orderer and kafka-broker, right?).

Broadcast error on TX 5270 (the first error for Producer-o2-c0 after 5269 ACKs); 2017-03-01 19:33:56.417952166 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Broadcast error on TX 5461 (the first error for Producer-o1-c0 after 5460 ACKs); 2017-03-01 19:33:56.41872936 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Broadcast error on TX 5935 (the first error for Producer-o0-c0 after 5934 ACKs); 2017-03-01 19:33:56.421273538 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
All the kafka brokers are restarted 0 1 2, 2017-03-01 19:34:16.303906105 +0000 UTC
2017/03/01 19:34:20 transport: http2Client.notifyError got notified that the client transport was broken EOF.
2017/03/01 19:34:20 transport: http2Client.notifyError got notified that the client transport was broken EOF.
2017/03/01 19:34:20 transport: http2Client.notifyError got notified that the client transport was broken EOF.
2017/03/01 19:34:20 transport: http2Client.notifyError got notified that the client transport was broken read tcp 127.0.0.1:34750->127.0.0.1:5005: read: connection reset by peer.
2017/03/01 19:34:20 transport: http2Client.notifyError got notified that the client transport was broken read tcp 127.0.0.1:34754->127.0.0.1:5005: read: connection reset by peer.
2017/03/01 19:34:20 transport: http2Client.notifyError got notified that the client transport was broken read tcp 127.0.0.1:34756->127.0.0.1:5005: read: connection reset by peer.
;;;","05/Jun/17 1:16 PM;kchristidis;When reproducing this, please make sure that the ""verbose"" flag for Kafka logs is set to true: [https://github.com/hyperledger/fabric/blob/master/bddtests/dc-orderer-base.yml#L17]

Please also attach the logs from every ordering service node used in this run.;;;","07/Jun/17 4:30 AM;weeds;assigned to scott until information is obtained for Kostas- Please reassign at appropriate time. Thanks!;;;","07/Jun/17 7:33 AM;scottz;This problem was reproduced today, using 4 kafka brokers, min_isr=2.

ORD97 passes when we stop 3 of 4 KBs (and we closed FAB-2604), but still fails when docker stop all (4) of the KBs:
stop 0, 1, 2, 3, sleeep 20, start 3, 2, 1, 0

Surya is rerunning, and collecting all the logs.;;;","08/Jun/17 1:23 AM;kchristidis;The logs are not collected at DEBUG level. Please repeat and re-attach.;;;","08/Jun/17 1:46 AM;kchristidis;BTW, this is how I'm reproducing your test and it's passing: [https://gerrit.hyperledger.org/r/#/c/10285/]

But perhaps I'm missing something, let's see.;;;","09/Jun/17 12:49 AM;scottz;Observation: When we see the first failure after taking down the kafkabrokers, it is 503 Service Unavailable. As the broadcastclient continues to broadcast transactions, we see EOF err responses.

Observation: When we connected a NEW broadcast client after the kafkabrokers recovered, it was able to successfully send transactions which were delivered in blocks successfully. So it looks like the problem is not ""orderer service does not resume"", but rather the problem is ""grpc connection between broadcast clients and orderer gets shut down when fewer than min_isr kafkabrokers are running and orderer service becomes unavailable""

We are wondering if the EOF we are seeing (for all but the first failed broadcast transaction) is being returned from our side of the grpc connection ClientStream being used by our broadcast client; we suspect the orderer shuts down the grpc connection from its side when the 503 error first occurred. Our remaining concern is WHY would it do that? Sure, we could enhance the broadcast client to reattempt another grpc connection automatically - but I don't see why that should be necessary.

 ;;;","09/Jun/17 1:34 AM;jyellick;> We are wondering if the EOF we are seeing (for all but the first failed broadcast transaction) is being returned from our side of the grpc connection ClientStream being used by our broadcast client;

Yes, I believe this is the case

> we suspect the orderer shuts down the grpc connection from its side when the 503 error first occurred. 

Correct, the orderer closes the connection after reporting any error via {{Broadcast}} (or {{Deliver}})

> Our remaining concern is WHY would it do that?

This decision actually has some significant history attached to it, this was not always the behavior.  In brief, there was a particular bug around returning a rate limiting HTTP 429 in an earlier incarnation of the Broadcast API (this status no longer is returned).  This led to scenarios where some errors were treated fatally, and other scenarios are not.  This made error processing difficult for the client, and it was concluded that simpler is better.  Clients must handle reconnect on server disconnect, so why not let this common code handle all errors, rather than require the client to implement custom error dependent logic.;;;","09/Jun/17 3:25 AM;kchristidis;Scott: Given the comments above, are we good to close?;;;","09/Jun/17 4:29 AM;scottz;[~kchristidis] , your test is passing because a new grpc connection is created for every broadcast. Ours creates a single broadcast connection, and sends all the transactions using that same one.

[~jyellick] It is understandable that an error within the communication path between broadcast client and orderer could result in tearing down the grpc connection, requiring broadcast client to create one again. However, this 503 is an indication of the orderer recognizing a downstream problem, between the orderer and kafkabrokers. The orderer is embedding a 503 return code within a good message that signifies a failure to complete the request, not a connection error. Your decision creates a situation where we could see a huge flurry of activity in a network with many broadcast clients, all trying simultaneously to reestablish grpc connections to the orderers - when the problem is really within the orderer service (connections between orderers and kafkabrokers or kafkabrokers stopped). We may need to test and revisit this decision in future.

Note the grpc connections between orderer and deliver-clients never drop in our tests, and they remain stable the entire time. ;;;","09/Jun/17 4:51 AM;kchristidis;> We may need to test and revisit this decision in future.

That is fine.

> Note the grpc connections between orderer and deliver-clients never drop in our tests, and they remain stable the entire time. 

Understood. I believe this is what's causing this: https://jira.hyperledger.org/browse/FAB-4172?focusedCommentId=25758&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-25758

Going back to what this JIRA is all about, what remains for this issue to be closed? I may well be missing something.;;;","09/Jun/17 11:35 PM;scottz;I agree to allow code to remain as is, but would like to repurpose this bug to be used for a documentation enhancement to add a note about the connection management. That is, should the client wish to retry or send new transactions to the orderer after a failure, it is the broadcast client's responsibility to recreate the grpc connections (via the SDK API) because the fabric orderer service tears down the grpc connection for ANY type of error - even if the error is internal to the orderer service rather than a problem with the grpc connection itself. I struggled to find an ideal place where we could add this in the fabric or fabric-sdk-node doc pages. My suggestions:
 * create an SDK Implementer's Guide
 * create a TroubleShooting Guide which contains a list of errors, and possible suggested resolutions
 * [http://hyperledger-fabric.readthedocs.io/en/latest/FAQ/architecture_FAQ.html#application-side-programming-model]

 

 ;;;","09/Jun/17 11:38 PM;kchristidis;[~nickgaski]: See Scott's comment above – could we add that note somewhere?;;;","10/Jan/20 1:54 AM;joe-alewine;With Kafka deprecated, this can probably be closed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Leader election tests are failing in CI,FAB-2576,15143,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,C0rWin,C0rWin,02/Mar/17 7:50 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,06/Mar/17 11:37 PM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"After leader election integration was merged into master there are a few cases where leader election tests failed during CI:

1. https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7859/consoleFull
2. https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7878/consoleFull

Need to take closer look on test and validate whenever failures are false positive or indeed real issues. If first is correct need to harness the test and make sure to minimize/remove false alarms.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmh3:",,,,,,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add JSON rendering of the configResult ,FAB-2577,15144,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,02/Mar/17 8:59 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmhb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move utility functions to proper file,FAB-2578,15145,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 9:28 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,07/Mar/17 1:05 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"`CreateNextBlock` and `GetBlock` are utility functions and as such, they belong to `util.go`.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmhj:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 9:35 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6693/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix inconsistencies in orderer/ledger pkg,FAB-2579,15146,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 9:30 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,07/Mar/17 1:05 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"1. Remove the stuttering that was prevalent in filenames and package names throughout the package.
2. Updates function definitions where appropriate
3. Makes the layout of ""ram"" and ""json"" implementation consistent with the ""file"" one by moving the relevant functions to `factory.go`
4. Switches all panic calls to their logger-equivalents. (We will be doing this for all packages inside `orderer`.)",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmhr:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 9:35 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6695/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix return of unexported type,FAB-2580,15147,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 9:31 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,07/Mar/17 1:05 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"`NewTestChain` --an exported function-- would return `ramLedger`, an unexported type. This changeset fixes that by changing the function to its unexported equivalent.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmhz:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 9:36 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6697/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix if-else statements in deliver tests,FAB-2581,15148,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 9:32 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,07/Mar/17 1:05 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"A set of if blocks end with return statements in `deliver_test.go`, meaning there's no reason for a corresponding else block.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmi7:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 9:36 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6699/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
lost transactions and divergent orderers after stop and start all kafka brokers,FAB-2582,15149,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,02/Mar/17 10:11 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,05/Jun/17 11:54 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-orderer,,,,0,qa,reproduction-requested,,,,,,"Similar test and results as FAB-2575, with additional problems:

Even if the network halts, we do not expect to see the orderers out of sync, or lost transactions.
Sometimes we observe in final totals: LOST transactions and the orderers are not consistent

Execute ORD97 which runs orderer traffic while executing this command sequence:
docker stop kafka0 kafka1 kafka2 && sleep 20 && docker start kafka0 kafka1 kafka2",,scottz,suryalnvs,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2575,,,,,,,,,"02/Mar/17 10:09 AM;scottz;fail_2575_part2_stdout.txt;https://jira.hyperledger.org/secure/attachment/10551/fail_2575_part2_stdout.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmif:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,scottz,suryalnvs,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/17 5:06 AM;suryalnvs;During retests using *commit 3b40efaee8584fd2662c59c0f7fc5a1a18c38f58, Date: Fri Jun 2 03:00:52 2017 +0000*, *OTE testname=ORD-97 TX=100000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1,* here are the logs

Producer-o1-c0 failed to broadcast TX 18037 (ACK=18037 NACK=1), 2017-06-04 19:45:11.269346816 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Producer-o2-c0 failed to broadcast TX 18022 (ACK=18022 NACK=1), 2017-06-04 19:45:11.273714936 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Producer-o0-c0 failed to broadcast TX 18201 (ACK=18201 NACK=1), 2017-06-04 19:45:11.339148899 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
All the kafka brokers are restarted, 2017-06-04 19:46:06.64164905 +0000 UTC

Send Duration (seconds):  257
Recovery Duration (secs):  21
waitSecs for last batch:   21
PRODUCERS   OrdererIdx  ChannelIdx ChannelID              TX Target         ACK        NACK
                     0           0 mychannel                  33334       18201       15133
                     1           0 mychannel                  33333       18037       15296
                     2           0 mychannel                  33333       18022       15311
CONSUMERS   OrdererIdx  ChannelIdx ChannelID                    TXs     Batches
                     0           0 mychannel                  54260         543
                     1           0 mychannel                  54260         543
                     2           0 mychannel                  54260         543
Not counting genesis blks (1 per chan)        1
Total TX broadcasts Requested to Send    100000
Total TX broadcasts send success ACK      54260
Total TX broadcasts sendFailed - NACK     45740
Total Send-LOST TX (Not Ack or Nack))         0
Total Recv-LOST TX (Ack but not Recvd)        0 
Total deliveries received TX on each ordrr     [  54260   54260   54260]
Total deliveries received Blocks on each ordrr [    543     543     543]
TEST ORD-97 Every ACked TX was delivered, but failures occurred: RESULT=FAILED: TX Req=100000 BrdcstACK=54260 NACK=45740 DelivBlk=[543 543 543] DelivTX=[54260 54260 54260] numChannels=1 batchSize=100

 I haven't seen any lost transactions during multiple retests, *{color:#14892c}so issue is no more reproducible.{color}*;;;","05/Jun/17 6:01 AM;weeds;Scott- do you think we should close this since it's not reproducible anymore?  obviously, we are on new levels of code, but want to confirm with you.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"first TX of new broadcast client is NACKed, sometimes",FAB-2583,15150,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,02/Mar/17 10:37 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,05/Jun/17 9:49 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-orderer,,,,0,qa,reproduction-requested,,,,,,"In some test iterations it works, but occasionally when connecting a new broadcast client to an orderer, it fails to send even one transaction successfully. In this test, we connect 3 producers (broadcast clients) - one to each orderer. Only one fails; the others send msgs just fine.

vagrant@hyperledger-devenv:v0.3.0-64a7ca4:/opt/gopath/src/github.com/hyperledger/fabric/bddtests/regression/go/ote$ go test -run ORD97
========== OTE testname=ORD-97 TX=100000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1

Using DEFAULT channelID = testchainid
Finished creating all CONSUMERS clients
Finished creating all 3 PRODUCERs at 2017-03-02 01:03:10.385641961 +0000 UTC
Broadcast error on TX 1 (the first error for Producer-o0-c0 after 0 ACKs); 2017-03-02 01:03:12.394240667 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE


Some code snippet:

        b := newBroadcastClient(client, chanID)
        time.Sleep(2 * time.Second)
                b.broadcast([]byte(fmt.Sprintf(""Testing %s %v %s"", myName, time.Now(), extraTxData)))
                err = b.getAck()
                if err != nil {
                                logger(fmt.Sprintf(""Broadcast error on TX %d (the first error for %s after %d ACKs); %v, err: %v"", i+1, myName,  (*txSentCntrP), time.Now(), err))

 + + + + +
Note: I reran the test several times. The logs attached happen to refer to a testrun where the failure occurred at this time:

Broadcast error on TX 1 (the first error for Producer-o0-c0 after 0 ACKs); 2017-03-02 01:32:39.043012559 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
",,scottz,suryalnvs,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/17 10:34 AM;scottz;fail_firstBroadcast.txt;https://jira.hyperledger.org/secure/attachment/10552/fail_firstBroadcast.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmin:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,scottz,suryalnvs,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/17 4:24 AM;suryalnvs;I tried the above scenario multiple times using *OTE testname=ORD-97 TX=100000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1* on commit *3b40efaee8584fd2662c59c0f7fc5a1a18c38f58*, Date: Fri Jun 2 03:00:52 2017 +0000 in vagrant and TLS enabled, but haven't seen the behavior as mentioned above, *{color:#14892c}so issue is no more reproducible.{color}*;;;","05/Jun/17 5:59 AM;weeds;Scott - should we close this now, given new levels of code etc,.?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable configtxgen to print JSON block config representation,FAB-2584,15151,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,02/Mar/17 11:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmiv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer Configuration Reader System Chaincode,FAB-2585,15152,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,02/Mar/17 12:28 PM,12/Jul/19 8:33 PM,28/Oct/23 2:59 AM,12/Jul/19 8:33 PM,,,,,,,,,,,,0,,,,,,,,"Ability to read a restricted subset of the local peer configuration from a user chaincode.

*+Motivation+*

In the context of the use case described by FAB-2440, the user CC processing the client request is invoked on the channel specified by the client. Typically, it's a channel that is shared among multiple Organizations - potential service providers. To determine whether or not it can fulfill the request, the user CC queries the Organization's local sub-ledger. As the chains must have unique names within a network, local sub-ledgers belonging to different Organizations must have different names. In order to perform a query on the Organization's local sub-ledger, a user CC needs to know the sub-ledger name. The local sub-ledger name could be stored in the local peer as a configuration parameter which name has been agreed upon among the Organizations (service providers) for that type of service. User CC is able to access the local peer's configuration parameters via the Peer Configuration Reader System Chaincode (PCRSCC).

*+Configuration Access Restrictions+*

PCRSCC must allow a deployer to limit user CC's access to the local peer's configuration to a specific subset of the peer's configuration parameters.",,aleksandar.likic@gmail.com,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2440,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmj3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic@gmail.com,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
can't install my own chaincode via CLI,FAB-2587,15154,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,kletkeman,kletkeman,02/Mar/17 1:22 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,05/Feb/18 7:40 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Following the instructions for installation of chaincode onto peer leads to this cli command:

docker exec -it cli bash

And later to this cli command:

CORE_PEER_ADDRESS=peer0:7051 peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0

The problem I see is that /opt/gopath is mapped into the cli container, but as with vagrant it only maps the hyperledger project. I am always forced to add /local-dev to the vagrant environment so that I can build my own chaincode.

But with the cli container, local-dev is not mapped at all, and so this trick cannot even be attempted.

The philosophy of having all cli instruction based on chaincode that resides in the fabric project itself creates a barrier to entry for those of us building and deploying chaincode from other github projects. Each new feature seems to create the same roadblock.

It would be very useful to use a separate hyperledger project for samples to force developers to accommodate the most common development and production path. Even though there are other ways to perform these tasks, the loss of REST in v1 leaves only the CLI as a reasonably short path to testing chaincode without a significant barrier. ",,bmos299,ChristopherFerris,denyeart,greg.haskins,kletkeman,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmjj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,denyeart,greg.haskins,kletkeman,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/17 2:39 AM;kletkeman;By the way, one simple fix would be to add the project paths under local-dev to /opt/gopath ... the reason being that anyone doing chaincode dev in their own project is already forced to hang that stuff under /local-dev using the ENV VAR;;;","04/Mar/17 3:03 AM;bmos299;Hi Kim, this is a great point, and as you point out, the loss of the REST in V1 leaves the CLI as the primary testing chaincode option.  Do you think this is a bug? The cli is working as designed.  Maybe we can talk with Binh and Murali and make this a high enhancement request.  What do you think?
Thanks, Barry;;;","04/Mar/17 3:08 AM;greg.haskins;I personally would not recommend using the CLI from a docker container.  Run a native CLI for a more natural experience.  The doc should probably be changed.;;;","04/Mar/17 3:12 AM;greg.haskins;I should add: ""make native"" or more precisely ""make peer"" will build a native peer binary, assuming you have all the prerequisites met of course.  If you run this from within vagrant devenv, you should.  If you run it elsewhere, you may have to set your system up properly first.;;;","04/Mar/17 5:01 AM;kletkeman;[~bmos299] Not a bug, as Greg mentions. But an omission in how the cli container has mapped folders. Vagrant maps /opt/gopath to the GOPATH content, but scrubs away everything except hyperledger project. It allows the LOCAL-DEV var to map another work area though, and that works ok. Still have to execute ""export GOPATH=/opt/gopath:/local-dev"" to actually be able to build your stuff, but that's a small price. If local-dev were passed along in the container mappings for cli, then the same fix would work.

However, ideally, we'd stop conflating /opt/gopath with hyperledger only and just map everything there that is already on the path. 

[~greg.haskins] I was following the instructions verbatim as this is the only way to retain any sanity in the middle of a maelstrom :-) ... but I agree with you that doing it the old way (natively at the vagrant ssh prompt) would be ideal. Do you know any reason why we are being told to do this from inside the cli container? And would I have to do something for a native cli to be able to execute using that container? Thx.;;;","25/Mar/17 11:27 PM;kletkeman;By the way, I was never able to get the cli built and running properly on the native Mac. Hopefully, that option will be made viable as a build option in the future ... or the container version will be fixed to have purview over the entire GOPATH and not just the Hyperledger subset.;;;","12/Apr/17 11:18 AM;denyeart;[~bmos299] [~ghaskins]
To help get closure on this one, could you summarize in your opinion what enhancement(s) / decision(s) are needed for this one? And who would be a logical person to work on it? And is it needed for v1.0.0?;;;","12/May/17 7:42 AM;ChristopherFerris;[~bmos299] I'm going to say that this isn't a bug as much as it is possible need of a new feature. The UX sucks, but that's not a bug. Can we reclassify this?;;;","26/May/17 1:46 AM;ChristopherFerris;[~kletkeman] there's been no follow-up. The UX needs to be improved no doubt, but this is possible and working as of alpha2. Reclassifying as improvement and deferring for Future release.;;;","26/May/17 2:53 AM;kletkeman;[~ChristopherFerris] [~bmos299] [~greg.haskins] [~denyeart]
 My apologies for being late to my own party here. I'm swamped, as are all of you.

EDIT: I just realized that you wrote that it **is** possible. I must have skimmed your reply the first time. Anyway, thanks.

ORIGINAL RESPONSE: V0.6 was difficult to learn, but once you learned it, it was easy to test. I used POSTMAN and our Monitoring UI regularly. I never used the CLI once I found POSTMAN. By contrast, v1 is considerably more difficult for developers, and I need only point to Greg's own alpha2 thread written as a true expert on v1 with respect to the difficulties he regularly experiences when writing and debugging real applications on v1. 

V1 has no general REST interface (not counting Composer here). The CLI container does not map onto chaincode outside of the fabric's own project space. So there is no simple technology just to get going with your own chaincode unless you hack it into the fabric's space (and only rank beginners are willing to do that).

However, since the CLI can be used to create channels, and since Composer can be used for everything else (with limitations that are slowly disappearing), one supposes that we can consider the CLI issue with Go chaincode to be non-critical. I remain uncomfortable with such an obvious pain point for early users. 

 ;;;","05/Feb/18 7:39 PM;mastersingh24;There does not seem to be an action to take here.  Cleaning up of the CLI and our tools is something we need to do, but I believe this particular situation has been handled;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix unkeyed fields in sbft composite literal,FAB-2588,15155,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 2:57 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,07/Mar/17 1:05 AM,,,,,,,,fabric-orderer,,,,0,sbft,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmjr:",,,,,,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 2:58 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6719/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up top-level orderer pkg,FAB-2589,15156,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 3:15 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,07/Mar/17 1:04 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"1. Switch all panic calls to their logging-enabled equivalents.
2. For simplicity's sake all logger calls that take a format specifier but just print a single argument at the end of the string have been converted to their no-format equivalents. There is no reason to say `logger.Errorf(""Failed to listen: %s"", err)`. `logger.Error(""Failed to listen:"", err)` returns the _exact_ same output (including an automatically inserted space before the argument).
3. Remove unnecessary log-level setting call. If the call to `InitFromSpec` is fed with junk, it will default to the INFO level anyway.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmjz:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 3:17 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6721/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move utility functions to separate file,FAB-2590,15157,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 3:37 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,04/Mar/17 3:52 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,This changeset introduces a getLedgerDir function that returns the path of the ledger directory. It also places this and all the other utility functions of the main package into a separate file.,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmk7:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce file ledger option,FAB-2591,15158,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,02/Mar/17 3:43 PM,21/Jul/18 3:53 AM,28/Oct/23 2:59 AM,07/Mar/17 6:01 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"This changeset allows the user to choose the file ledger, introduced in a previous changeset.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmkf:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Mar/17 3:44 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6725/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove peer/util/util.go,FAB-2594,15161,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,C0rWin,C0rWin,C0rWin,02/Mar/17 10:17 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,03/Mar/17 2:35 AM,,,,,,,,,,,,0,,,,,,,,"There is a package *peer/util/util.go* with not used functionality, the function:

{code}
func GetCliFilePath() string {
	localStore := viper.GetString(""peer.fileSystemPath"")
	if !strings.HasSuffix(localStore, ""/"") {
		localStore = localStore + ""/""
	}
	localStore = localStore + ""client/""
	return localStore
}
{code}

is never used in the project and this is the only function in the file. Since this is an obsolete the file need to be removed.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmkv:",,,,,,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end (cli) tests are failing with Error: Ordering service endpoint  is not valid or missing,FAB-2595,15162,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,rameshthoomu,rameshthoomu,02/Mar/17 11:10 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,02/Mar/17 11:20 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,"Observed end-to-end (CLI) tests are failing after merge Patch Set https://gerrit.hyperledger.org/r/#/c/6691/. Below is the error log from CLI container

{code:java}
---- Using default channel 'mychannel'
Chanel name : mychannel
[36m2017-03-02 12:51:23.354 UTC [logging] InitFromViper -> DEBU 001[0m Setting default logging level to DEBUG for command 'channel'
[36m2017-03-02 12:51:23.354 UTC [msp] GetLocalMSP -> DEBU 002[0m Returning existing local MSP
[36m2017-03-02 12:51:23.354 UTC [msp] GetDefaultSigningIdentity -> DEBU 003[0m Obtaining default signing identity
Error: Ordering service endpoint  is not valid or missing
Usage:
  peer channel create [flags]
{code}

tested on fabric commit# c956be0
CI build Reference#  
https://jenkins.hyperledger.org/sandbox/job/e2e_FIT_power/26/console
https://jenkins.hyperledger.org/sandbox/job/e2e_FIT_s390x/12/console",Vagrant & CI Environments,binhn,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxml3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Mar/17 11:18 PM;binhn;We need to change the CLI in the docker file to pass in the orderer:port;;;","02/Mar/17 11:20 PM;bmos299;By adding the *-o ordering_host:port* to every cli command addresses this problem. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change /api/v1/cfssl/ prefix on fabric-ca-server endpoints to /api/v1/ prefix,FAB-2597,15164,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,02/Mar/17 11:38 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,28/Mar/18 11:28 PM,,,,,,,,fabric-ca,,,,0,,,,,,,,"The SDKs are currently using the ""/api/v1/cfssl/"" prefixed endpoints.
They should be changed to use the ""/api/v1/"" prefix.",,baohua,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,CE-29,FABP-85,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4e7:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,baohua,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 4:23 AM;smithbk; http://gerrit.hyperledger.org/r/8173 [FAB-2597] Del cfssl prefix from REST APIs;;;","19/Apr/17 11:42 AM;baohua;I agree to remove the cfssl prefix, while suggest we keep the ""api/v1"" prefix for further upgrading.
This is quite common in the RESTful API service.;;;","19/Apr/17 8:48 PM;smithbk;http://www.lexicalscope.com/blog/2012/03/12/how-are-rest-apis-versioned/ has some interesting info on this
When I look at the content at that link rather than just the author's beginning paragraph, I see a lot more variance.

My preference is that REST APIs can most often be made backwards compatible by modifying the body of a POST.
For example, if I want a POST request to do something different, then I add a new option to the body of the POST.
All of the fabric-ca-server APIs are POST requests with one exception: GET /info
In that case, I would favor a simple query parm.

In the rare case where I can't use one of these schemes, I would just create a new URI with a different name and deprecate the other one if I want.

Some disadvantages I see to version numbers are:
1) They are not as flexible as other schemes because they are strictly linear.  Let's say I have an API which returns field F1.  In version 2, it returns fields F1 and F2.  And in version 3, it returns fields F1, F2, and F3.   Suppose further that returning these fields require some computation on the server.  Now, suppose I only want to return fields F1 and F3.  I can't do this with a version number, but I could do it with either a change to the body of a POST or a (or two) query parms on a GET.
2) Not self-documenting.  I have to read the documentation to map a version number to its semantics.


;;;","20/Apr/17 1:29 AM;mastersingh24;I agree with [~baohua] for the following reasons:

1) In the history of the fabric project we have never been able to maintain backwards compatibility with a single API
2) I think having multiple versions is actually more clear especially if we add APIs (and perhaps even want to change APIs)
3) Combining 1) and 2), this allow us to release a new version of fabric-ca with an updated API while at the same time supporting old clients
;;;","20/Apr/17 10:56 PM;smithbk;OK, I changed http://gerrit.hyperledger.org/r/8173 to use the ""/api/v1"" prefix.
For now, I will not be removing the ""no prefix"" endpoints because it would require changing a bunch of small changes to other client code.
This can be cleaned up later after all SDKs are changed to use ""/api/v1"" prefixes.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Race condition between peer startup and CouchDB startup,FAB-2600,15167,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,AdnanChoudhury,denyeart,denyeart,03/Mar/17 12:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,03/Mar/17 11:14 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"In docker environment, peer and CouchDB start up at same time.
If CouchDB has not initialized by the time peer needs it, peer startup will panic.
Need to extend retries to handle these race conditions.

This change will update retry timeouts (using a back off approach) and number of retries.
Post-beta, there will be a more comprehensive retry strategy, to give clients the ability to specify retry logic (e.g. initial Verification vs Commit vs Endorsement will each want different retry logic). ",,AdnanChoudhury,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx62f:",,,,,,Sprint 13 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a fabric-ca-client enroll option to store artifacts in MSP directory structure,FAB-2602,15169,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,03/Mar/17 1:19 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,13/Mar/17 11:17 PM,,,,,,,,fabric-ca,,,,0,,,,,,,,"The purpose of this feature is to provide a greater degree of integration between fabric-ca and fabric.  In particular, it is meant to hide the structure of the MSP directory for those who are using the fabric-ca.

This is done by adding support for the ""-m"" option as follows to the enroll (and reenroll) commands:
{code}
fabric-ca-client enroll -u http://user:pass@host:7054 -M <msp-directory>
{code}

This command will store artifacts as follows:
1) the ecert key at <msp-directory>/keystore/<enrollment-ID>.pem
2) the ecert cert at <msp-directory>/signcerts/<enrollment-ID>.pem
3) the root cert at <msp-directory>/cacerts/<root-CA-name>.pem

#1 and #2 are already part of the enroll command.
For #3, the fabric-ca-server will support a new GET /info endpoint which returns server public info including the root CA name and root CA cert.   The GET /info call will not require an authorization header.   The root CA name is a unique name given to each root CA in a blockchain network.   The default root CA name is the domain name of the host where the root fabric-ca-server is started.

Also add support for another fabric-ca-client command as follows:
{code}
fabric-ca-client getcacert -u http://host:7054 -M <msp-directory>
{code}
This will do only #3 above.

As an example of the use of these commands, consider a blockchain network with 3 root fabric-ca-servers: fca1, fca2, and fca3.  In other words, there are 3 members in the network and they are all using fabric-ca.  In order to initialize the local MSP for peer1 that is associated with fca1, you may do as follows:
{code}
fabric-ca-client enroll -u http://peer1:peer1secret@fca1:7054 -M <mspdir>
fabric-ca-client getcacert -u http://fca2:7054 -M <mspdir>
fabric-ca-client getcacert -u http://fca3:7054 -M <mspdir>
{code}
The resulting MSP directory would contain 3 certs in cacerts (e.g. fca1.pem, fca2.pem, and fca3.pem), peer1's ecert at signcerts/peer1.pem and peer1's ecert key at keystore/peer1.pem.",,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmlz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/17 2:27 AM;mastersingh24;[~keithsmith]  this looks good.  does this mean that the enroll API will now return the certificate chain for the issuing CA as well as the enrollment public key?;;;","03/Mar/17 4:07 AM;smithbk;Yes, the enroll response will contain the cert chain of the issuing CA, which is the same as will be returned by the GET /info call.
I'm also trying to consider the following two cases:
1) root fabric-ca-server is issued a CA cert by a corporate CA
    In this case, we may want to include the corporate CA's cert in the chain.
2) root fabric-ca-server is issued a CA cert by a non-corporate CA (e.g. Verisign)
    In this case, we wouldn't want to include Verisign in the chain.
To handle both cases, the root fabric-ca-server will simply check for the existence of a root.pem file (configurable name).
If it exists, I'll just use it and it could itself be a chain.  If it doesn't exist, then I'll use the CA cert itself.

The bottom line is that I want the 1st cert in this chain that is returned to be the cert that should be a root of trust in the ordering service.

Does this sound correct?
;;;","03/Mar/17 4:18 AM;mastersingh24;What you have above should work.  I don't think we'll see case 2) very often (if at all).  I think in case 1) we'd definitely need to make the corporate chain available in many cases;;;","07/Mar/17 4:32 AM;smithbk;http://gerrit.hyperledger.org/r/6921;;;","07/Mar/17 11:37 AM;smithbk;http://gerrit.hyperledger.org/r/6943;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change and export dir where ledgers are kept,FAB-2603,15170,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,03/Mar/17 1:45 AM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,05/Mar/17 11:45 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"1. Ledgers were maintained as directories inside a ""blocks"" directory. Semantically speaking, this doesn't quite make sense -- you'd expect to find blocks under a ""blocks"" directory.

2. The name of this directory should be an exported constant so that other packages can access it programmatically. The orderer package for instance, needs this info in order to construct the proper directories for its ledger.

This changeset addresses both of these issues.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmm7:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/17 2:48 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6749/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TX redelivered when stop kafka brokers 0 1 2 start 2 1 0, when 500,000 TX",FAB-2604,15171,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,scottz,scottz,scottz,03/Mar/17 2:16 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,29/Sep/17 12:43 AM,v1.0.0-beta,,,,Unverifiable,,,fabric-orderer,,,,0,kafka,,,,,,,"An extra transaction is delivered. It seems it may be happening after kafka brokers restart, after having been stopped. It is hard to reproduce and seems to require lots of traffic running (500,000 TX, but not reproduced with 300,000). 

Execute OTE test ORD97, sending 500,000 TXs to 3 orderers (and 3 kafka brokers), using this sequence:
###       docker stop kafka0 && sleep 20 && docker stop kafka1 && sleep 20 && docker stop kafka2 && sleep 20 && docker start kafka2 && sleep 20 && docker start kafka1 && sleep 20 && docker start kafka0

 .../fabric/bddtests/regression/go/ote$     go test -timeout 30m -run ORD97
========== OTE testname=ORD-97 TX=500000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF
Using DEFAULT channelID = testchainid
",,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2575,,,,,,,,,"07/Jun/17 4:21 AM;suryalnvs;docker-compose-base.yaml;https://jira.hyperledger.org/secure/attachment/10961/docker-compose-base.yaml","07/Jun/17 4:21 AM;suryalnvs;docker-compose-cli.yaml;https://jira.hyperledger.org/secure/attachment/10960/docker-compose-cli.yaml","03/Mar/17 2:58 AM;scottz;fail_PlusExtraTX_ORD97.txt;https://jira.hyperledger.org/secure/attachment/10554/fail_PlusExtraTX_ORD97.txt","03/Mar/17 2:14 AM;scottz;fail_extraTX_ORD97_3.txt;https://jira.hyperledger.org/secure/attachment/10553/fail_extraTX_ORD97_3.txt","07/Jun/17 4:21 AM;suryalnvs;kafka0.log;https://jira.hyperledger.org/secure/attachment/10962/kafka0.log","07/Jun/17 4:21 AM;suryalnvs;kafka1.log;https://jira.hyperledger.org/secure/attachment/10963/kafka1.log","07/Jun/17 4:21 AM;suryalnvs;kafka2.log;https://jira.hyperledger.org/secure/attachment/10964/kafka2.log","07/Jun/17 4:21 AM;suryalnvs;kafka3.log;https://jira.hyperledger.org/secure/attachment/10965/kafka3.log","07/Jun/17 4:22 AM;suryalnvs;orderer0.log;https://jira.hyperledger.org/secure/attachment/10966/orderer0.log","07/Jun/17 4:22 AM;suryalnvs;orderer1.log;https://jira.hyperledger.org/secure/attachment/10967/orderer1.log","07/Jun/17 4:22 AM;suryalnvs;orderer2.log;https://jira.hyperledger.org/secure/attachment/10968/orderer2.log","07/Jun/17 4:27 AM;suryalnvs;ote_FAB2604.log;https://jira.hyperledger.org/secure/attachment/10969/ote_FAB2604.log",,,,,,,,,,,,,,,,,,"1|hzxmmf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/17 3:08 AM;scottz;Attached test output logs fail_PlusExtraTX_ORD97.txt, where you can see a block delivered at 17:54:06 containing less than 10 TXs, approx 11 seconds after the last kafka-broker was restarted (and 30 seconds after the 2nd one was restarted). The funny thing is that (refer to FAB-2575) there are no more transactions being acknowledged by the orderers after 17:52:55, when the service became unavailable. So this blocknyumber 4106 with 4 Transactions must have been sitting in the kafka-brokers when they were stopped and only got delivered after the KBs recovered.

Note this (extra/duplicate TX delivered) does not happen every time. Sometimes the orderers all stay in sync and all deliver the same number of transactions that were ACKd.;;;","05/Jun/17 8:20 AM;suryalnvs;I tried the above scenario multiple times using *OTE testname=ORD-97 TX=100000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=3 oteSpy=OFF producersPerCh=1* on commit *3b40efaee8584fd2662c59c0f7fc5a1a18c38f58*, Date: Fri Jun 2 03:00:52 2017 +0000 in vagrant and TLS enabled. I can see an extra transaction being delivered described as above. Also attaching the log for reference.;;;","05/Jun/17 12:44 PM;kchristidis;Thanks for re-running this. I have the following questions:
 # What is your setup? Can you please attach your docker-compose.yml file? You bring down 3 brokers and the log says ""All the kafka brokers are restarted"" but the default configuration we should be using employs 4 brokers. Why the difference?
 # You send 500K transactions to the ordering service. Do you wait for a SUCCESS response before sending the next transaction? (Not implying you should, but trying to get a better sense of _how_ the test works.)
 # I'll also need an almost line-by-line explanation of the attached log. Which lines in the log are considered OK, and which are normal? Is ""Producer-o2-c0 failed to broadcast TX 19488 (ACK=19488 NACK=1), 2017-06-04 23:07:16.629858188 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE"" an expected line? I don't know. What does ""Producer-o2-c0 broadcast error delay period (120) ended (ACK=19488 NACK=120), 2017-06-04 23:09:16.776974927 +0000 UTC"" mean? What does ""Broadcast error on last TX 166666 of Producer-o2-c0: EOF"" mean? What does ""Producer-o2-c0 finished sending broadcast msgs: ACKs 19488 NACK 147178 (errDelayCntr 120) Other 0 , 2017-06-04 23:09:27.425772331 +0000 UTC"" mean?
 # Does each transaction carry a unique payload? If not, can we make it unique? And then, can we modify the test so that it returns a list of the ACK'd transactions? This way we can compare that list with the list retrieved by the orderers (via a Deliver RPC with start = oldest and stop = newest) and quickly identify the extra transaction.
 # Related to the above, the title refers to this extra transaction as ""redelivered"". How are we certain that this is the case? Do we already use a method such as the one described in step 4? If not, it may well be a transaction from the NACK set, or a Kafka-internal CONNECT or TTX transaction that gets packaged into the blocks when it shouldn't.

Given the difficulty of reproducing this, it is important that we get detailed logs from the faulty run, by setting `ORDERER_KAFKA_VERBOSE=true` as in the [preferred configuration files|https://github.com/hyperledger/fabric/blob/master/bddtests/dc-orderer-base.yml#L17] and following the suggestion in step 4. Please also attach the logs from every ordering service node used in this run.;;;","06/Jun/17 5:46 AM;suryalnvs;[~kchristidis] Attached the docker-compose files, kafka3 and orderer0 logs with kafka verbose set to true.;;;","06/Jun/17 5:53 AM;kchristidis;[~suryalnvs]: Thank you for this. Can you please have a look at the questions I posted above, and let me know what the answers are?;;;","06/Jun/17 6:00 AM;kchristidis;Also, can you please provide the orderer logs for all OSNs?;;;","06/Jun/17 10:41 AM;scottz; 
1. docker-compose.yml file was attached today. We reran the test and obtained new logs using VERBOSE and 4 or 5 kafka brokers. Surya can explain exactly the details, if you would like to sit and review together.
 
2. Producer client sends a msg, waits for a TX Ack (i.e. not a delivery), and proceeds to next one.
 
3. We can get together tomorrow and explain it. Agree it can be confusing at first. When we take down an orderer to which a producer is connected, that producer will see NACKs counted thereafter until it finishes sending the planned number of transactions. (It slows down to 1 per second for a couple minutes, to give the restarted orderer or KB a chance to recover and have possible success in future transactions; otherwise it zips through the rest of its allotment too quickly.) The 503 is when kafkabrokers are not available, and also leads to a NACK, although in this case the orderer is still working fine (and knows there are not enough KBs to provide a service).
 
4.Yes, each transaction includes a string with the producer/orderer/channel and a timestamp. That could be a huge number of transactions to dump for each orderer. Do you really need to see ACKd transactions? I would think you want to see the Delivered blocks of transactions, and just check them for duplicates.
 
5. We are not certain; we are just counting delivered TXs. How could orderer deliver a NACK'd transaction? If you know what the kafka-internal transactions differ from ours, we might be able to quickly search for them too.;;;","07/Jun/17 4:45 AM;suryalnvs;I reran the above scenario multiple times with the modifications suggested to use 4 KBs and set MIN_ISR=2. The goal is still to stop enough KBs such that the network halts for a time period, in this case we stop 3 out of the 4.

So today we were using *OTE testname=ORD-97 TX=500000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=4 oteSpy=OFF producersPerCh=1* on commit *c50e0dd1ca1ea96cb69503fc83a302c53eff96a6**,* ***Date: Tue Jun 6 13:36:08 2017 +0000* in vagrant and TLS enabled. 
The test is to basically restart the 3 kafka brokers out of 4 when sending the traffic to orderers (kafka_min_insync=2). The restart of the kafka brokers is done using the command ""{color:#14892c}docker stop kafka0 && sleep 20 && docker stop kafka1 && sleep 20 && docker restart kafka2 && sleep 20 && docker start kafka1 && sleep 20 && docker start kafka0{color}"" among the available 4 kafka brokers and observed successful delivery of all the transactions to orderers and batching up transactions into blocks in the orderers. The test is able to pass successfully and this issue is not reproducible.  

 ;;;","07/Jun/17 4:56 AM;kchristidis;Thank you both for your help in figuring this out. Closing this, but if you see something fishy, feel free to reopen.;;;","22/Jun/17 4:31 AM;scottz;Reproduced again today using beta+ load. As suggested previously, we will proceed to try to identify the extra transactions, to confirm if they are actually extra or redelivered transactions or if they are some other thing causing counts to be incorrect.;;;","22/Jun/17 6:32 AM;suryalnvs;ubuntu@hyperledger-devenv:307c903:/opt/gopath/src/github.com/hyperledger/fabric/test/tools/OTE$ *go test -run ORD97 -timeout 120m*
==========
========== OTE testname=ORD-97 TX=500000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=4 oteSpy=DEFER producersPerCh=1
OTE_MASTERSPY=<ignored>                            masterSpy=DEFER
OTE_SPY_ORDERER=                                   spyOrd=0
CONFIGTX_ORDERER_BATCHSIZE_MAXMESSAGECOUNT=        batchSize=500
CONFIGTX_ORDERER_BATCHTIMEOUT=                     batchTimeout=30
CORE_LOGGING_LEVEL=
CORE_LEDGER_STATE_STATEDATABASE=
Launching network:  cd ../../../examples/fabric-docker-compose-svt && ./network_setup.sh -s -n 1
Results of exec command: docker ps -a
stdout=CONTAINER ID        IMAGE                          COMMAND                  CREATED             STATUS                              PORTS                                              NAMES
85268eb965cf        hyperledger/fabric-testenv     ""/bin/bash -c 'sle...""   47 seconds ago      Exited (0) Less than a second ago                                                      cli
2d78b9204bae        hyperledger/fabric-orderer     ""orderer""                48 seconds ago      Up 47 seconds                       0.0.0.0:9050->7050/tcp                             orderer2.example.com
94d4ca1d6047        hyperledger/fabric-orderer     ""orderer""                48 seconds ago      Up 47 seconds                       0.0.0.0:7050->7050/tcp                             orderer0.example.com
d74c63593c10        hyperledger/fabric-orderer     ""orderer""                48 seconds ago      Up 47 seconds                       0.0.0.0:8050->7050/tcp                             orderer1.example.com
fea725a956b7        hyperledger/fabric-kafka       ""/docker-entrypoin...""   50 seconds ago      Up 49 seconds                       9093/tcp, 0.0.0.0:9094->9092/tcp                   kafka1
5934f071f92f        hyperledger/fabric-kafka       ""/docker-entrypoin...""   50 seconds ago      Up 49 seconds                       9093/tcp, 0.0.0.0:9096->9092/tcp                   kafka2
e0a02835dca1        hyperledger/fabric-kafka       ""/docker-entrypoin...""   50 seconds ago      Up 49 seconds                       0.0.0.0:9092->9092/tcp, 9093/tcp                   kafka0
2835dd643611        hyperledger/fabric-kafka       ""/docker-entrypoin...""   50 seconds ago      Up 48 seconds                       9093/tcp, 0.0.0.0:9098->9092/tcp                   kafka3
0523b6a2361f        hyperledger/fabric-peer        ""peer node start -...""   53 seconds ago      Up 50 seconds                       0.0.0.0:9051->7051/tcp, 0.0.0.0:9053->7053/tcp     peer0.org2.example.com
19be3bde454d        hyperledger/fabric-peer        ""peer node start -...""   53 seconds ago      Up 50 seconds                       0.0.0.0:8051->7051/tcp, 0.0.0.0:8053->7053/tcp     peer1.org1.example.com
d2c7c705bfbf        hyperledger/fabric-peer        ""peer node start -...""   53 seconds ago      Up 51 seconds                       0.0.0.0:7051->7051/tcp, 0.0.0.0:7053->7053/tcp     peer0.org1.example.com
ec946d519f69        hyperledger/fabric-ca          ""sh -c 'fabric-ca-...""   53 seconds ago      Up 50 seconds                       0.0.0.0:8054->7054/tcp                             ca_peerOrg2
4a16752c9542        hyperledger/fabric-peer        ""peer node start -...""   53 seconds ago      Up 49 seconds                       0.0.0.0:10051->7051/tcp, 0.0.0.0:10053->7053/tcp   peer1.org2.example.com
60a70a7a0ab1        hyperledger/fabric-zookeeper   ""/docker-entrypoin...""   53 seconds ago      Up 51 seconds                       2181/tcp, 2888/tcp, 3888/tcp                       zookeeper2
5b2d7e8c24f5        hyperledger/fabric-zookeeper   ""/docker-entrypoin...""   53 seconds ago      Up 52 seconds                       2181/tcp, 2888/tcp, 3888/tcp                       zookeeper0
8f90cfb1eeb6        hyperledger/fabric-zookeeper   ""/docker-entrypoin...""   53 seconds ago      Up 52 seconds                       2181/tcp, 2888/tcp, 3888/tcp                       zookeeper1
77b79a0a911a        hyperledger/fabric-ca          ""sh -c 'fabric-ca-...""   53 seconds ago      Up 52 seconds                       0.0.0.0:7054->7054/tcp                             ca_peerOrg1

Using 1 new channelIDs, e.g. testchan321
Finished creating all CONSUMERS clients
Producer-o1-c0 successfully broadcast TX 0 (ACK=1 NACK=0), 2017-06-21 21:09:57.705905229 +0000 UTC
Producer-o2-c0 successfully broadcast TX 0 (ACK=1 NACK=0), 2017-06-21 21:09:57.71177524 +0000 UTC
Producer-o0-c0 successfully broadcast TX 0 (ACK=1 NACK=0), 2017-06-21 21:09:57.736477814 +0000 UTC
stop all the Kafka brokers, 0 1 2 3, 2017-06-21 21:10:29.658083787 +0000 UTC
*docker stop kafka0 && sleep 20 && docker stop kafka1 && sleep 20 && docker start kafka1 && sleep 20 && docker start kafka0*
Producer-o0-c0 failed to broadcast TX 1788 (ACK=1788 NACK=1), 2017-06-21 21:10:56.396022608 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Producer-o1-c0 failed to broadcast TX 2419 (ACK=2419 NACK=1), 2017-06-21 21:10:56.399470933 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
Producer-o2-c0 failed to broadcast TX 2330 (ACK=2330 NACK=1), 2017-06-21 21:10:56.400266684 +0000 UTC, err: Got unexpected status: SERVICE_UNAVAILABLE
All the kafka brokers are restarted, 2017-06-21 21:11:37.156081639 +0000 UTC
===== Test calling startMasterSpy on orderer  1  at  2017-06-21 21:12:34.658159242 +0000 UTC
=== startSpyDefer proceeding to startConsumerMaster to spy on orderer1
2017-06-21 21:12:34.675 UTC [msp] getMspConfig -> INFO 013 intermediate certs folder not found at [../../../examples/fabric-docker-compose-svt/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp/intermediatecerts]. Skipping.: [stat ../../../examples/fabric-docker-compose-svt/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp/intermediatecerts: no such file or directory]
2017-06-21 21:12:34.676 UTC [msp] getMspConfig -> INFO 014 crls folder not found at [../../../examples/fabric-docker-compose-svt/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp/intermediatecerts]. Skipping.: [stat ../../../examples/fabric-docker-compose-svt/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp/crls: no such file or directory]
2017-06-21 21:12:34.676 UTC [msp] getMspConfig -> INFO 015 MSP configuration file not found at [../../../examples/fabric-docker-compose-svt/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp/config.yaml]: [stat ../../../examples/fabric-docker-compose-svt/crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp/config.yaml: no such file or directory]
Producer-o1-c0 broadcast error delay period (120) ended (ACK=2419 NACK=120), 2017-06-21 21:12:56.512982144 +0000 UTC
Producer-o0-c0 broadcast error delay period (120) ended (ACK=1788 NACK=120), 2017-06-21 21:12:56.513045431 +0000 UTC
Producer-o2-c0 broadcast error delay period (120) ended (ACK=2330 NACK=120), 2017-06-21 21:12:56.513295731 +0000 UTC
Broadcast error on last TX 166666 of Producer-o2-c0: EOF
Producer-o2-c0 finished sending broadcast msgs: ACKs       2330  NACK 164336 (errDelayCntr 120)  Other 0 , 2017-06-21 21:13:14.391939496 +0000 UTC
Broadcast error on last TX 166666 of Producer-o1-c0: EOF
Producer-o1-c0 finished sending broadcast msgs: ACKs       2419  NACK 164247 (errDelayCntr 120)  Other 0 , 2017-06-21 21:13:14.84969967 +0000 UTC
Broadcast error on last TX 166668 of Producer-o0-c0: EOF
Producer-o0-c0 finished sending broadcast msgs: ACKs       1788  NACK 164880 (errDelayCntr 120)  Other 0 , 2017-06-21 21:13:14.977187382 +0000 UTC
Send Duration (seconds):  202
Recovery Duration (secs):  46
waitSecs for last batch:   45
PRODUCERS   OrdererIdx  ChannelIdx ChannelID              TX Target         ACK        NACK
                     0           0 mychannel0                166668        1788      164880
                     1           0 mychannel0                166666        2419      164247
                     2           0 mychannel0                166666        2330      164336
Print only the first 3 chans of only the first 3 ordererIdx (and the last ordererIdx if masterSpy is present), plus any others that contain failures.
Totals numOrdIdx=4 numChanIdx=1 numCONSUMERS=4
CONSUMERS   OrdererIdx  ChannelIdx ChannelID                    TXs     Batches
                     0           0 mychannel0                  6545          14
                     1           0 mychannel0                  6545          14
                     2           0 mychannel0                  6545          14
                     3           0 mychannel0                  6545          14  * MasterSpy on orderer 1
Not counting genesis blks (1 per chan)        1
Total TX broadcasts Requested to Send    500000
Total TX broadcasts send success ACK       6537
Total TX broadcasts sendFailed - NACK    493463
Total Send-LOST TX (Not Ack or Nack))         0
Total Recv-LOST TX (Ack but not Recvd)       *-8* 
Total deliveries received TX on each ordrr     [   6545    6545    6545    6545]
Total deliveries received Blocks on each ordrr [     14      14      14      14]
TEST ORD-97 BAD! Some EXTRA TX were delivered by orderer service! RESULT=FAILED: TX Req=500000 BrdcstACK=6537 NACK=493463 DelivBlk=[14 14 14 14] DelivTX=[6545 6545 6545 6545] numChannels=1 batchSize=500
--- FAIL: Test_ORD97_100000TX_1ch_3ord_kafka_3kbs (342.92s)
    ote_test.go:242: TEST ORD-97 BAD! Some EXTRA TX were delivered by orderer service! RESULT=FAILED: TX Req=500000 BrdcstACK=6537 NACK=493463 DelivBlk=[14 14 14 14] DelivTX=[6545 6545 6545 6545] numChannels=1 batchSize=500
FAIL
exit status 1
FAIL    github.com/hyperledger/fabric/test/tools/OTE    342.945s

 

We are calculating the transactions using length of Block.Data.Data in each block. We are getting too many transactions in the above case.;;;","22/Jun/17 11:25 PM;kchristidis;Until this can be reproduced deterministically, and we've got wayyyy more details on what's going on (I know you guys are working on it based on the suggestions given above), I will lower its priority and label it as Unverifiable.;;;","11/Aug/17 10:34 PM;kchristidis;Any updates on this one?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
deliver_stdout client hard-codes starting point,FAB-2605,15172,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,03/Mar/17 3:04 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,05/Mar/17 11:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmmn:",,,,,,Sprint 13 - Consensus,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/17 3:11 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6751/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable deliver_stdout to seek to oldest/newest/single-block,FAB-2606,15173,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,03/Mar/17 3:41 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,05/Mar/17 11:45 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,"The `deliver_stdout` client is useful for debugging. This changeset allows us to seek to oldest, newest, or extract a single block.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmmv:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Mar/17 6:21 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/6753/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v10 PTE - multiple event hubs support,FAB-2607,15174,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,03/Mar/17 3:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,03/Mar/17 11:31 PM,,,,,,,,fabric-quality,,,,0,,,,,,,,PTE supports multiple event hubs.  Each hub is associated with one peer.,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxmn3:",,,,,,Sprint 12 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
First Attempt at Scalability Testing,FAB-2608,15175,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,scottz,bmos299,bmos299,03/Mar/17 4:31 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,29/Apr/17 3:42 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"We want to do some baseline scalability testing with:

Network setup: 4 - Peers, 1 - orderer, 2 Kafka, 1 zookeeper
Running:
10 - chaincodes (2 different endorsement policies) 
100 - channels

And performing and invoke and query on every chaincode on every channel. ",,bmos299,Ratnakar,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/17 12:09 PM;Ratnakar;screenshot-1.png;https://jira.hyperledger.org/secure/attachment/10563/screenshot-1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx30f:",,,,,,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,Sprint 17 - Quality,,,,,,,,,,,,,,,,,,,,bmos299,Ratnakar,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/17 12:17 PM;Ratnakar;Ran the script available here  https://github.com/asararatnakar/perf-test.git on a remote Ubuntu machine .
Commit level on this repo is *https://github.com/asararatnakar/perf-test/tree/c297abc7f1d78d703ff428e4e6006a5ba9e7b5df*

 !screenshot-1.png|thumbnail! 

*+Machine details:+*

1) *$lsb_release -a*
{panel}
No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 14.04.5 LTS
Release:	14.04
Codename:	trusty
{panel}


*3) CPU*
{code}
grep -c processor /proc/cpuinfo
4

# cat /proc/cpuinfo
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 62
model name	: Intel(R) Xeon(R) CPU E5-2658 v2 @ 2.40GHz
stepping	: 4
microcode	: 0x427
cpu MHz		: 2400.000
cache size	: 25600 KB
physical id	: 0
siblings	: 2
core id		: 0
cpu cores	: 2
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 13
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss ht syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc aperfmperf pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm ida arat epb pln pts dtherm fsgsbase tsc_adjust smep
bogomips	: 4800.00
clflush size	: 64
cache_alignment	: 64
address sizes	: 42 bits physical, 48 bits virtual
power management:

processor	: 1
vendor_id	: GenuineIntel
cpu family	: 6
model		: 62
model name	: Intel(R) Xeon(R) CPU E5-2658 v2 @ 2.40GHz
stepping	: 4
microcode	: 0x427
cpu MHz		: 2400.000
cache size	: 25600 KB
physical id	: 0
siblings	: 2
core id		: 1
cpu cores	: 2
apicid		: 1
initial apicid	: 1
fpu		: yes
fpu_exception	: yes
cpuid level	: 13
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss ht syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc aperfmperf pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm ida arat epb pln pts dtherm fsgsbase tsc_adjust smep
bogomips	: 4800.00
clflush size	: 64
cache_alignment	: 64
address sizes	: 42 bits physical, 48 bits virtual
power management:

processor	: 2
vendor_id	: GenuineIntel
cpu family	: 6
model		: 62
model name	: Intel(R) Xeon(R) CPU E5-2658 v2 @ 2.40GHz
stepping	: 4
microcode	: 0x427
cpu MHz		: 2400.000
cache size	: 25600 KB
physical id	: 1
siblings	: 2
core id		: 0
cpu cores	: 2
apicid		: 2
initial apicid	: 2
fpu		: yes
fpu_exception	: yes
cpuid level	: 13
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss ht syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc aperfmperf pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm ida arat epb pln pts dtherm fsgsbase tsc_adjust smep
bogomips	: 4800.00
clflush size	: 64
cache_alignment	: 64
address sizes	: 42 bits physical, 48 bits virtual
power management:

processor	: 3
vendor_id	: GenuineIntel
cpu family	: 6
model		: 62
model name	: Intel(R) Xeon(R) CPU E5-2658 v2 @ 2.40GHz
stepping	: 4
microcode	: 0x427
cpu MHz		: 2400.000
cache size	: 25600 KB
physical id	: 1
siblings	: 2
core id		: 1
cpu cores	: 2
apicid		: 3
initial apicid	: 3
fpu		: yes
fpu_exception	: yes
cpuid level	: 13
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts mmx fxsr sse sse2 ss ht syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts nopl xtopology tsc_reliable nonstop_tsc aperfmperf pni pclmulqdq ssse3 cx16 pcid sse4_1 sse4_2 x2apic popcnt tsc_deadline_timer aes xsave avx f16c rdrand hypervisor lahf_lm ida arat epb pln pts dtherm fsgsbase tsc_adjust smep
bogomips	: 4800.00
clflush size	: 64
cache_alignment	: 64
address sizes	: 42 bits physical, 48 bits virtual
power management:


{code}


*3) Memory:*
{code}
free -m
             total       used       free     shared    buffers     cached
Mem:          7985       4127       3857          4        359       3126
-/+ buffers/cache:        641       7343
Swap:         4095          0       4095


$cat /proc/meminfo
MemTotal:        8176744 kB
MemFree:         3956140 kB
Buffers:          368584 kB
Cached:          3201680 kB
SwapCached:            0 kB
Active:          1751540 kB
Inactive:        2010712 kB
Active(anon):     192868 kB
Inactive(anon):     4192 kB
Active(file):    1558672 kB
Inactive(file):  2006520 kB
Unevictable:           0 kB
Mlocked:               0 kB
SwapTotal:       4194300 kB
SwapFree:        4194300 kB
Dirty:                 0 kB
Writeback:             0 kB
AnonPages:        191984 kB
Mapped:            70448 kB
Shmem:              5076 kB
Slab:             347564 kB
SReclaimable:     311568 kB
SUnreclaim:        35996 kB
KernelStack:        2464 kB
PageTables:        11704 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:     8282672 kB
Committed_AS:    1715008 kB
VmallocTotal:   34359738367 kB
VmallocUsed:      164428 kB
VmallocChunk:   34359499320 kB
HardwareCorrupted:     0 kB
AnonHugePages:     69632 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:       85952 kB
DirectMap2M:     8302592 kB

{code}
;;;","07/Mar/17 12:20 PM;Ratnakar;Used the Endorsement Policy
{code}
-P ""OR	('Org0MSP.member','Org1MSP.member')""
{code}

It is not possible to use  Endorsement policy with *AND* from CLI .;;;","11/Mar/17 11:55 AM;Ratnakar;Executed one more run on March 10th fabric commit level :  *32959205a7ae8fc499a764c8b0e567f000f3a846*

Test Objective:
* Create Network with the below configuration
  1 zookeeper
  1 orderer
  2 kafka brokers
  2 Organizations , with each organization containing 2 peers
* Create  100 channels
* Join all 4 peers on to the 100 channels
* Install 10 chaincodes (The same chaincode installed with a different name) on each peer
* For each channel ---> for each chaincode -> Query/Invoke/Query (QIQ) on each peer

Test Details: 
* Script used from this repo https://github.com/asararatnakar/perf-test
* Commit level on this repo *a3f5f4454868b1fd69b8814cf1f62109ebcfe5d2*
* commnds used to run the test

{code}
cd fabric 
make docker

cd examples

git clone https://github.com/asararatnakar/perf-test e2e

cd e2e
git reset --hard a3f5f4454868b1fd69b8814cf1f62109ebcfe5d2
./generateCfgTrx.sh mychannel 100

CHANNEL_NAME=mychannel CHANNELS_NUM=100 CHAINCODES_NUM=10 ENDORSERS_NUM=4 docker-compose up &>docker-logs.txt &
sleep 15 && docker logs -f cli

{code}

Execution Time: *64210* secs (~ 18 hrs)
Test Result : *Passed*

Please see the details updated here : https://docs.google.com/spreadsheets/d/1_IdXCuYMKkqXr3Za0pVnFP3sP1jBcNbYnTJGV-nSkxI/edit#gid=57508105;;;","29/Apr/17 3:42 AM;scottz;As implied by the previous comments, this jira is completed. Results are noted above, and for more similar tests by searching for ""Scalability"" on this test plan which documents the test description, results, commit#, etc, at https://docs.google.com/spreadsheets/d/1_IdXCuYMKkqXr3Za0pVnFP3sP1jBcNbYnTJGV-nSkxI/edit#gid=57508105
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
enable system chaincode to be called from another chaincode,FAB-2609,15176,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,03/Mar/17 4:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,19/Apr/17 4:52 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"The CC1-call-CC2 will not work as work if CC2 is a system chaincode as the setup for system chaincodes are different from user chaincodes. In this task we will enable calling of system chaincode from user chaincode. 

However there's another part to securing the call that needs to be done to complete this. That'll be addressed in another task (discussion in https://jira.hyperledger.org/browse/FAB-2081 on that).",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2081,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmnb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/17 4:52 PM;muralisr;There has been a bit of mix up... actually https://gerrit.hyperledger.org/r/#/c/7119/ (attached to FAB-2081 but should really have been attached to this JIRA) fixes this JIRA. FAB-2081 is meant for fixing the security aspects of this. Closing this as done and continuing the discussion in 2081.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
VSCC. block correctness validation on peers within a channel,FAB-2611,15178,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,YuryAndreev,YuryAndreev,YuryAndreev,03/Mar/17 6:48 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,21/Apr/17 9:24 PM,,,,,v1.0.0,,,fabric-peer,,,,0,validation,vscc,,,,,,"Add in fabric/core/scc/vscc/validator_onevalidsignature.go two following methods:
1) ValidateBlockByTxID
2) ValidateLast100Blocks
--
I have patch with this changes and I solve this task, can I make pull request?
--
Description.
1) ValidateBlockByTxID

Call: peer chaincode query -n 'vscc' -c '{\""Args\"":[\""ValidateBlockByTxID\"", \""$chainid\"",\""$transactionId\""]}'

where $transactionId and $chainid custom argument

By function ValidateBlockByTxID we validate block and validate all transaction in the block and return information about transaction.

2) ValidateLast100Blocks

Call: peer chaincode query -n 'vscc' -c '{\""Args\"":[\""ValidateLast100Blocks\"", \""testchainid\""]}'

By function ValidateLast100Blocks we validate block and validate all transaction in the block and return information about blocks.

add proto file for results methods

message BlockInfo {
    uint64 number = 1;
    repeated Signature signatures = 2;
    string previousHash = 3;
    string dataHash = 4;
    repeated string transactionIDs = 5;
}

message Signature {
    string CommonName = 1;
    bytes signature = 2;
}

message TransactionInfo {
    string TxID = 1;
    string ChainID = 2;
    google.protobuf.Timestamp timestamp = 3;
    string CreatorCertCommonName = 4;
    repeated string EndorsementCertCommonNameList = 5;
    repeated bytes ProposalHashList = 6;
    string Data = 7;
}

message ValidateInfo {
    BlockInfo BlockInfo = 1;
    TransactionInfo TransactionInfo = 2;
}

message ValidateLedgerInfo {
    repeated BlockInfo blockInfoList = 1;
}",,muralisr,YuryAndreev,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmnz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,muralisr,YuryAndreev,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/17 9:48 PM;muralisr;[~YuryAndreev] If I understand correctly, these are functions for user to get information on transaction in blocks.  Can you provide information on what is actually being ""validated"" ?

In any case, there's a ""qscc"" system chaincode that deals with block queries. For instance currently it returns the following information and may be more appropriate for this type of functions

{code:java}
const (
        GetChainInfo       string = ""GetChainInfo""
        GetBlockByNumber   string = ""GetBlockByNumber""
        GetBlockByHash     string = ""GetBlockByHash""
        GetTransactionByID string = ""GetTransactionByID""
        GetBlockByTxID     string = ""GetBlockByTxID""
)
{code}


You maybe able 
* use the qscc methods to get the blocks and do any additional work on them on client side
* modify existing methods in qscc to do the above
* (as a last resort) introduce new functions in qscc 

VSCC is meant to be used internally by the committer on receiving blocks from the orderer and is not meant to be invoked externally for query purposes.  

[~denyeart] [~binhn];;;","20/Mar/17 5:56 PM;YuryAndreev;https://gerrit.hyperledger.org/r/#/c/7103/;;;","20/Apr/17 9:14 AM;muralisr;This is not a bug but a feature in review in https://gerrit.hyperledger.org/r/#/c/7103/.

The JIRA request was created by [~YuryAndreev] who is also implementing it. Moving this to [~YuryAndreev].;;;","21/Apr/17 9:24 PM;YuryAndreev;Abandoned;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enabled configtxgen to print configtx as JSON,FAB-2612,15179,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,03/Mar/17 7:13 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:24 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmo7:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
root permissions setting up on msp directory after running fabric unit-tests,FAB-2613,15180,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,rameshthoomu,rameshthoomu,03/Mar/17 7:27 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Apr/17 1:09 PM,,,,,v1.0.0,,,fabric-quality,,,,0,build-system,,,,,,,"Observed root permissions are setting up on ""msp"" directory after running fabric unit-tests. with this we are unable to delete ""workspace"" from ""power"" and ""z"" Jenkins builds. We observed this is causing because of the mount implemented in ""unit-test/docker-compose.yaml"" file.

https://github.com/rameshthoomu/fabric/blob/master/unit-test/docker-compose.yml#L25

as a workaround we are deleting workspace manually using cron job but this has to fix soon.
https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-power-ppc64le/418/console
",Jenkins CI,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmof:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 1:09 PM;rameshthoomu;This issue is not reproducing now..;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e test with multi channel multi chaincode scenario fails at invoke,FAB-2614,15181,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,Nishi,Nishi,03/Mar/17 8:01 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,04/Mar/17 3:12 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Tested on commit level: *9ab37a56b9d7e6c98c10cce7256c1ca696dc6ce5*

1. Orderer 1; Kafka Brokers 2; num of peers: 4,  num of channels: 2, num chaincodes: 4, chaincode used: chaincode_example02
2. Create 2 channels
3. Join all 4 peers on all channels
4. Install 4 chaincodes on all peers
5. Instantiate first 2 chaincodes on peer0 on both channels with endorsement policy - OR('Org0MSP.member','Org1MSP.member')
6. Instantiate next 2 chaincodes on peer2 on both channels with endorsement policy - AND('Org0MSP.member','Org1MSP.member')
7. Next 
{code}
    for each channel {
       for each chaincode {
         for each peer {
              query value of a 
              Invoke 
              query for updated value of a
         }
      }
    }
              
{code}
Test failed on channel-1, chanicode 3, peer0 with below error on all peers
{code}

peer2        | 2017-03-02 21:50:57.835 UTC [txvalidator] VSCCValidateTx -> ERRO 001 VSCC check failed for transaction txid=de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94, error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer2        | 2017-03-02 21:50:57.839 UTC [txvalidator] Validate -> ERRO 002 VSCCValidateTx for transaction txId = de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer1        | 2017-03-02 21:50:57.839 UTC [txvalidator] VSCCValidateTx -> ERRO 001 VSCC check failed for transaction txid=de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94, error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer1        | 2017-03-02 21:50:57.839 UTC [txvalidator] Validate -> ERRO 002 VSCCValidateTx for transaction txId = de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer0        | 2017-03-02 21:50:57.844 UTC [txvalidator] VSCCValidateTx -> ERRO 003 VSCC check failed for transaction txid=de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94, error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer0        | 2017-03-02 21:50:57.844 UTC [txvalidator] Validate -> ERRO 004 VSCCValidateTx for transaction txId = de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer3        | 2017-03-02 21:50:57.853 UTC [txvalidator] VSCCValidateTx -> ERRO 001 VSCC check failed for transaction txid=de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94, error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer3        | 2017-03-02 21:50:57.853 UTC [txvalidator] Validate -> ERRO 002 VSCCValidateTx for transaction txId = de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy

{code}

Please find attached : docker-compose.yaml, multi_channel,sh(has cli commands used in test), Multichannel-Multichaincode-VSCC Error Logs.txt",,bmos299,Nishi,peoplehlj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/17 7:48 AM;Nishi;Multichannel-Multichaincode-VSCC Error Logs.txt;https://jira.hyperledger.org/secure/attachment/10555/Multichannel-Multichaincode-VSCC+Error+Logs.txt","03/Mar/17 7:48 AM;Nishi;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10557/docker-compose.yaml","03/Mar/17 7:48 AM;Nishi;multichannel.sh;https://jira.hyperledger.org/secure/attachment/10556/multichannel.sh",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmon:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,Nishi,peoplehlj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/17 8:25 AM;Nishi;Test ran successfully, when the above test scenario was modified as follows:

Instantiating all 4 chaincodes on single peer i.e. peer0 on both channels with one endorsement policy - OR('Org0MSP.member','Org1MSP.member')

instead of steps 5 and 6 as described above.



;;;","03/Mar/17 7:59 PM;bmos299;Let's look at this one.  Could the vscc be failing because the transaction is only endorsed by one peer?  If this is the case this is not a highest bug, but if the message in the was not clear, we need to make sure it identifies what failed in the vscc check.;;;","04/Mar/17 3:13 AM;bmos299;The cli does not support AND for endorsement policy as it goes to a single peer.  Marking as DONE. ;;;","30/Aug/17 7:08 PM;peoplehlj;Hi all,

Do you have any code sample that SDK could invoke chaincode by AND endorsement policy, thanks so much!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove references to IngressPolicyNames and EgressPolicyNames,FAB-2615,15182,14576,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,03/Mar/17 9:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmov:",,,,,,Sprint 11 - consensus,Sprint 12 - consensus,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Potential crash due to FIXME in cauthdsl,FAB-2616,15183,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,03/Mar/17 9:55 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:24 AM,,,,,,,,,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmp3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
nil pointer exception during phantom key validation,FAB-2618,15185,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,manish-sethi,manish-sethi,03/Mar/17 5:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,03/Mar/17 10:18 PM,,,,,,,,fabric-ledger,,,,0,Ledger,,,,,,,"A transaction tx_1, during simulation, performs a range scan for key_1 - key_n. Now, if the last key (key_n) get deleted by another transaction that gets committed before tx_1, a nil check is required in the validation code.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx627:",,,,,,Sprint 13 - Ledger,,,,,,,,,,,,,,,,,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"end-to-end (node sdk) tests are failing with ""Unhandled 'error' event",FAB-2621,15188,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jimthematrix,rameshthoomu,rameshthoomu,03/Mar/17 11:27 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,04/Mar/17 1:11 PM,,,,,v1.0.0,,,,,,,0,build-system,,,,,,,"observed end-to-end (node sdk) tests are failing consistently with ""Unhandled 'error' event error.. Below is the error log.. 

https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/191/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/dockerlogfile.log

*commit levels:* :

=======> FABRIC PEER COMMIT NUMBER - 260775e =======> FABRIC CA COMMIT NUMBER - 7893e27 =======> FABRIC SDK NODE COMMIT NUMBER - b95036b

{code:java}
14:13:51 events.js:160
14:13:51       throw er; // Unhandled 'error' event
14:13:51       ^
14:13:51 
14:13:51 Error: Connect Failed
14:13:51     at ClientDuplexStream._emitStatusIfDone (/w/workspace/e2e_FIT_x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:201:19)
14:13:51     at ClientDuplexStream._readsDone (/w/workspace/e2e_FIT_x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:169:8)
14:13:51     at readCallback (/w/workspace/e2e_FIT_x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/grpc/src/node/src/client.js:242:12)
14:13:51 Build step 'Execute shell' marked build as failure
{code}

Build References# 
https://jenkins.hyperledger.org/sandbox/view/FIT/job/e2e_FIT_x86_64/19/console (x86)
https://jenkins.hyperledger.org/sandbox/view/FIT/job/e2e_FIT_s390x/38/console (s390x)
https://jenkins.hyperledger.org/sandbox/job/e2e_FIT_power/32/console (power)

Have to test this in vagrant environment.. Will update the status with the latest result.. ",Jenkins CI,Clayton Sims,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-329,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmpr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/17 6:58 AM;Clayton Sims;Ramesh you have a fix for this now - correct?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException after zoo-keeper-kafka socket error,FAB-2622,15189,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,Nishi,Nishi,03/Mar/17 11:40 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,17/Apr/17 10:04 PM,v1.0.0,,,,v1.0.0,,,fabric-orderer,,,,0,qa,,,,,,,"Tested on commit level: *9ab37a56b9d7e6c98c10cce7256c1ca696dc6ce5*

1. Orderer 1; Kafka Brokers 2; num of peers: 4,  num of channels: 100, num chaincodes: 10, chaincode used: chaincode_example02
2. Create 100 channels
3. Join all 4 peers on all channels
4. Install 10 chaincodes on all peers
5. Instantiate all chaincodes on peer0 on all channels with endorsement policy - OR('Org0MSP.member','Org1MSP.member')
6. Next 
{code}
    for each channel {
       for each chaincode {
         for each peer {
              query value of a 
              Invoke 
              query for updated value of a
         }
      }
    }
              
{code}

Test failed on channel-8, chanicode-4, peer0 with below snippets from docker logs.

{code}

kafka1       | [2017-03-03 07:46:55,683] INFO [Group Metadata Manager on Broker 1]: Removed 0 expired offsets in 112 milliseconds. (kafka.coordinator.GroupMetadataManager)
kafka1       | [2017-03-03 07:54:06,678] INFO Client session timed out, have not heard from server in 4158ms for sessionid 0x15a91c6da880000, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:54:18,355 [myid:] - INFO  [SessionTracker:ZooKeeperServer@358] - Expiring session 0x15a91c6da880000, timeout of 6000ms exceeded
zookeeper    | 2017-03-03 07:56:02,407 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15a91c6da880000 type:ping cxid:0xfffffffffffffffe zxid:0xfffffffffffffffe txntype:unknown reqpath:n/a Error Path:null Error:KeeperErrorCode = Session expired
zookeeper    | 2017-03-03 07:56:39,432 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x15a91c6da880000
kafka1       | [2017-03-03 07:55:03,040] INFO zookeeper state changed (Disconnected) (org.I0Itec.zkclient.ZkClient)
kafka1       | [2017-03-03 07:56:54,806] INFO Opening socket connection to server zookeeper.e2e_default/172.18.0.2:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)
......
......
kafka1       | [2017-03-03 07:57:04,989] INFO Opening socket connection to server zookeeper.e2e_default/172.18.0.2:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:05,004] INFO Socket connection established to zookeeper.e2e_default/172.18.0.2:2181, initiating session (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:57:05,648 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@192] - Accepted socket connection from /172.18.0.3:50578
zookeeper    | 2017-03-03 07:57:06,311 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@921] - Client attempting to renew session 0x15a91c6da880000 at /172.18.0.3:50578
zookeeper    | 2017-03-03 07:57:06,343 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@666] - Invalid session 0x15a91c6da880000 for client /172.18.0.3:50578, probably expired
zookeeper    | 2017-03-03 07:57:06,365 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@192] - Accepted socket connection from /172.18.0.3:50598
zookeeper    | 2017-03-03 07:57:06,762 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@921] - Client attempting to renew session 0x15a91c6da880000 at /172.18.0.3:50598
zookeeper    | 2017-03-03 07:57:07,065 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@1008] - Closed socket connection for client /172.18.0.3:50578 which had sessionid 0x15a91c6da880000
zookeeper    | 2017-03-03 07:57:07,066 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@666] - Invalid session 0x15a91c6da880000 for client /172.18.0.3:50598, probably expired
kafka1       | [2017-03-03 07:57:07,197] INFO Unable to reconnect to ZooKeeper service, session 0x15a91c6da880000 has expired, closing socket connection (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:57:07,125 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@213] - Ignoring unexpected runtime exception
zookeeper    | java.nio.channels.CancelledKeyException
zookeeper    | 	at sun.nio.ch.SelectionKeyImpl.ensureValid(SelectionKeyImpl.java:73)
zookeeper    | 	at sun.nio.ch.SelectionKeyImpl.readyOps(SelectionKeyImpl.java:87)
zookeeper    | 	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:182)
zookeeper    | 	at java.lang.Thread.run(Thread.java:745)
kafka1       | [2017-03-03 07:57:07,243] INFO zookeeper state changed (Expired) (org.I0Itec.zkclient.ZkClient)
kafka1       | [2017-03-03 07:57:07,424] INFO Initiating client connection, connectString=zookeeper:2181 sessionTimeout=6000 watcher=org.I0Itec.zkclient.ZkClient@61230f6a (org.apache.zookeeper.ZooKeeper)
zookeeper    | 2017-03-03 07:57:07,633 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@1008] - Closed socket connection for client /172.18.0.3:50598 which had sessionid 0x15a91c6da880000
kafka1       | [2017-03-03 07:57:09,624] INFO Opening socket connection to server zookeeper.e2e_default/172.18.0.2:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:57:09,625 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@192] - Accepted socket connection from /172.18.0.3:50600
kafka1       | [2017-03-03 07:57:09,705] INFO Socket connection established to zookeeper.e2e_default/172.18.0.2:2181, initiating session (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:57:10,019 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@928] - Client attempting to establish new session at /172.18.0.3:50600
kafka1       | [2017-03-03 07:57:10,196] INFO EventThread shut down (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:10,762] INFO Session establishment complete on server zookeeper.e2e_default/172.18.0.2:2181, sessionid = 0x15a91c6da880001, negotiated timeout = 6000 (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:57:10,762 [myid:] - INFO  [SyncThread:0:ZooKeeperServer@673] - Established session 0x15a91c6da880001 with negotiated timeout 6000 for client /172.18.0.3:50600
kafka1       | [2017-03-03 07:57:10,836] INFO zookeeper state changed (SyncConnected) (org.I0Itec.zkclient.ZkClient)
kafka1       | [2017-03-03 07:57:17,271] INFO Creating /controller (is it secure? false) (kafka.utils.ZKCheckedEphemeral)
kafka1       | [2017-03-03 07:57:17,488] INFO Result of znode creation is: OK (kafka.utils.ZKCheckedEphemeral)
kafka1       | [2017-03-03 07:57:17,489] INFO 1 successfully elected as leader (kafka.server.ZookeeperLeaderElector)
zookeeper    | 2017-03-03 07:57:19,878 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15a91c6da880001 type:delete cxid:0x13 zxid:0x1c txntype:-1 reqpath:n/a Error Path:/admin/preferred_replica_election Error:KeeperErrorCode = NoNode for /admin/preferred_replica_election
kafka1       | [2017-03-03 07:57:20,222] INFO re-registering broker info in ZK for broker 1 (kafka.server.KafkaHealthcheck)
kafka1       | [2017-03-03 07:57:20,816] INFO Creating /brokers/ids/1 (is it secure? false) (kafka.utils.ZKCheckedEphemeral)
zookeeper    | 2017-03-03 07:57:20,841 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15a91c6da880001 type:create cxid:0x14 zxid:0x1d txntype:-1 reqpath:n/a Error Path:/brokers Error:KeeperErrorCode = NodeExists for /brokers
zookeeper    | 2017-03-03 07:57:20,844 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@649] - Got user-level KeeperException when processing sessionid:0x15a91c6da880001 type:create cxid:0x15 zxid:0x1e txntype:-1 reqpath:n/a Error Path:/brokers/ids Error:KeeperErrorCode = NodeExists for /brokers/ids
kafka1       | [2017-03-03 07:57:21,052] INFO Result of znode creation is: OK (kafka.utils.ZKCheckedEphemeral)
kafka1       | [2017-03-03 07:57:21,053] INFO Registered broker 1 at path /brokers/ids/1 with addresses: PLAINTEXT -> EndPoint(cacb2350345a,9092,PLAINTEXT) (kafka.utils.ZkUtils)
kafka1       | [2017-03-03 07:57:21,099] INFO done re-registering broker (kafka.server.KafkaHealthcheck)
kafka1       | [2017-03-03 07:57:21,139] INFO Subscribing to /brokers/topics path to watch for new topics (kafka.server.KafkaHealthcheck)
kafka1       | [2017-03-03 07:57:34,054] INFO Client session timed out, have not heard from server in 5322ms for sessionid 0x15a91c6da880001, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:35,103] INFO zookeeper state changed (Disconnected) (org.I0Itec.zkclient.ZkClient)
zookeeper    | 2017-03-03 07:57:34,004 [myid:] - INFO  [SessionTracker:ZooKeeperServer@358] - Expiring session 0x15a91c6da880001, timeout of 6000ms exceeded
zookeeper    | 2017-03-03 07:57:34,306 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x15a91c6da880001
zookeeper    | 2017-03-03 07:57:35,012 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@357] - caught end of stream exception
zookeeper    | EndOfStreamException: Unable to read additional data from client sessionid 0x15a91c6da880001, likely client has closed socket
zookeeper    | 	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
zookeeper    | 	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:203)
zookeeper    | 	at java.lang.Thread.run(Thread.java:745)
zookeeper    | 2017-03-03 07:57:35,133 [myid:] - INFO  [SyncThread:0:NIOServerCnxn@1008] - Closed socket connection for client /172.18.0.3:50600 which had sessionid 0x15a91c6da880001
zookeeper    | 2017-03-03 07:57:36,961 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@192] - Accepted socket connection from /172.18.0.3:50628
kafka1       | [2017-03-03 07:57:36,848] INFO Opening socket connection to server zookeeper.e2e_default/172.18.0.2:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:57:37,191 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@921] - Client attempting to renew session 0x15a91c6da880001 at /172.18.0.3:50628
zookeeper    | 2017-03-03 07:57:37,243 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@666] - Invalid session 0x15a91c6da880001 for client /172.18.0.3:50628, probably expired
kafka1       | [2017-03-03 07:57:37,102] INFO Socket connection established to zookeeper.e2e_default/172.18.0.2:2181, initiating session (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:37,243] INFO zookeeper state changed (Expired) (org.I0Itec.zkclient.ZkClient)
zookeeper    | 2017-03-03 07:57:37,643 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@1008] - Closed socket connection for client /172.18.0.3:50628 which had sessionid 0x15a91c6da880001
kafka1       | [2017-03-03 07:57:37,244] INFO Initiating client connection, connectString=zookeeper:2181 sessionTimeout=6000 watcher=org.I0Itec.zkclient.ZkClient@61230f6a (org.apache.zookeeper.ZooKeeper)
kafka1       | [2017-03-03 07:57:37,629] INFO Unable to reconnect to ZooKeeper service, session 0x15a91c6da880001 has expired, closing socket connection (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:38,673] INFO EventThread shut down (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:38,739] INFO Waiting for keeper state SyncConnected (org.I0Itec.zkclient.ZkClient)
zookeeper    | 2017-03-03 07:57:45,775 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@192] - Accepted socket connection from /172.18.0.3:50630
kafka1       | [2017-03-03 07:57:45,403] INFO Opening socket connection to server zookeeper.e2e_default/172.18.0.2:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:45,775] INFO Socket connection established to zookeeper.e2e_default/172.18.0.2:2181, initiating session (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:57:45,887 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@928] - Client attempting to establish new session at /172.18.0.3:50630
zookeeper    | 2017-03-03 07:57:48,616 [myid:] - INFO  [SyncThread:0:ZooKeeperServer@673] - Established session 0x15a91c6da880002 with negotiated timeout 6000 for client /172.18.0.3:50630
kafka1       | [2017-03-03 07:57:48,619] INFO Session establishment complete on server zookeeper.e2e_default/172.18.0.2:2181, sessionid = 0x15a91c6da880002, negotiated timeout = 6000 (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:57:49,513] INFO zookeeper state changed (SyncConnected) (org.I0Itec.zkclient.ZkClient)
zookeeper    | 2017-03-03 07:58:21,186 [myid:] - WARN  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@357] - caught end of stream exception
zookeeper    | EndOfStreamException: Unable to read additional data from client sessionid 0x15a91c6da880002, likely client has closed socket
zookeeper    | 	at org.apache.zookeeper.server.NIOServerCnxn.doIO(NIOServerCnxn.java:228)
zookeeper    | 	at org.apache.zookeeper.server.NIOServerCnxnFactory.run(NIOServerCnxnFactory.java:203)
zookeeper    | 	at java.lang.Thread.run(Thread.java:745)
kafka1       | [2017-03-03 07:58:19,921] INFO Client session timed out, have not heard from server in 4370ms for sessionid 0x15a91c6da880002, closing socket connection and attempting reconnect (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:58:20,208] INFO zookeeper state changed (Disconnected) (org.I0Itec.zkclient.ZkClient)
zookeeper    | 2017-03-03 07:58:25,415 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@1008] - Closed socket connection for client /172.18.0.3:50630 which had sessionid 0x15a91c6da880002
kafka1       | [2017-03-03 07:58:23,239] INFO Opening socket connection to server zookeeper.e2e_default/172.18.0.2:2181. Will not attempt to authenticate using SASL (unknown error) (org.apache.zookeeper.ClientCnxn)
zookeeper    | 2017-03-03 07:58:25,793 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxnFactory@192] - Accepted socket connection from /172.18.0.3:50638
zookeeper    | 2017-03-03 07:58:26,072 [myid:] - INFO  [SessionTracker:ZooKeeperServer@358] - Expiring session 0x15a91c6da880002, timeout of 6000ms exceeded
zookeeper    | 2017-03-03 07:58:26,620 [myid:] - INFO  [ProcessThread(sid:0 cport:2181)::PrepRequestProcessor@487] - Processed session termination for sessionid: 0x15a91c6da880002
zookeeper    | 2017-03-03 07:58:26,879 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@921] - Client attempting to renew session 0x15a91c6da880002 at /172.18.0.3:50638
zookeeper    | 2017-03-03 07:58:28,439 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:ZooKeeperServer@666] - Invalid session 0x15a91c6da880002 for client /172.18.0.3:50638, probably expired
zookeeper    | 2017-03-03 07:58:29,156 [myid:] - INFO  [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2181:NIOServerCnxn@1008] - Closed socket connection for client /172.18.0.3:50638 which had sessionid 0x15a91c6da880002
kafka1       | [2017-03-03 07:58:25,793] INFO Socket connection established to zookeeper.e2e_default/172.18.0.2:2181, initiating session (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:58:29,002] INFO zookeeper state changed (Expired) (org.I0Itec.zkclient.ZkClient)
kafka1       | [2017-03-03 07:58:29,020] INFO Initiating client connection, connectString=zookeeper:2181 sessionTimeout=6000 watcher=org.I0Itec.zkclient.ZkClient@61230f6a (org.apache.zookeeper.ZooKeeper)
kafka1       | [2017-03-03 07:58:29,423] INFO Unable to reconnect to ZooKeeper service, session 0x15a91c6da880002 has expired, closing socket connection (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:59:25,131] INFO Unable to re-establish connection. Notifying consumer of the following exception:  (org.I0Itec.zkclient.ZkClient)
kafka1       | org.I0Itec.zkclient.exception.ZkException: Unable to connect to zookeeper:2181
kafka1       | 	at org.I0Itec.zkclient.ZkConnection.connect(ZkConnection.java:71)
kafka1       | 	at org.I0Itec.zkclient.ZkClient.reconnect(ZkClient.java:1279)
kafka1       | 	at org.I0Itec.zkclient.ZkClient.processStateChanged(ZkClient.java:719)
kafka1       | 	at org.I0Itec.zkclient.ZkClient.process(ZkClient.java:630)
kafka1       | 	at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:522)
kafka1       | 	at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:498)
kafka1       | Caused by: java.net.UnknownHostException: zookeeper: Temporary failure in name resolution
kafka1       | 	at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
kafka1       | 	at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:928)
kafka1       | 	at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1323)
kafka1       | 	at java.net.InetAddress.getAllByName0(InetAddress.java:1276)
kafka1       | 	at java.net.InetAddress.getAllByName(InetAddress.java:1192)
kafka1       | 	at java.net.InetAddress.getAllByName(InetAddress.java:1126)
kafka1       | 	at org.apache.zookeeper.client.StaticHostProvider.<init>(StaticHostProvider.java:61)
kafka1       | 	at org.apache.zookeeper.ZooKeeper.<init>(ZooKeeper.java:445)
kafka1       | 	at org.apache.zookeeper.ZooKeeper.<init>(ZooKeeper.java:380)
kafka1       | 	at org.I0Itec.zkclient.ZkConnection.connect(ZkConnection.java:69)
kafka1       | 	... 5 more
kafka1       | [2017-03-03 07:59:25,854] ERROR Error handling event ZkEvent[Data of /controller changed sent to kafka.server.ZookeeperLeaderElector$LeaderChangeListener@7eb338d1] (org.I0Itec.zkclient.ZkEventThread)
kafka1       | java.lang.NullPointerException
kafka1       | 	at org.I0Itec.zkclient.ZkConnection.exists(ZkConnection.java:109)
kafka1       | 	at org.I0Itec.zkclient.ZkClient$5.call(ZkClient.java:701)
kafka1       | 	at org.I0Itec.zkclient.ZkClient$5.call(ZkClient.java:698)
kafka1       | 	at org.I0Itec.zkclient.ZkClient.retryUntilConnected(ZkClient.java:985)
kafka1       | 	at org.I0Itec.zkclient.ZkClient.exists(ZkClient.java:698)
kafka1       | 	at org.I0Itec.zkclient.ZkClient$9.run(ZkClient.java:818)
kafka1       | 	at org.I0Itec.zkclient.ZkEventThread.run(ZkEventThread.java:71)
kafka1       | [2017-03-03 07:59:28,343] ERROR Error handling event ZkEvent[Data of /admin/preferred_replica_election changed sent to kafka.controller.PreferredReplicaElectionListener@2a61781] (org.I0Itec.zkclient.ZkEventThread)
kafka1       | java.lang.NullPointerException
kafka1       | 	at org.I0Itec.zkclient.ZkConnection.exists(ZkConnection.java:109)
kafka1       | 	at org.I0Itec.zkclient.ZkClient$5.call(ZkClient.java:701)
kafka1       | 	at org.I0Itec.zkclient.ZkClient$5.call(ZkClient.java:698)
kafka1       | 	at org.I0Itec.zkclient.ZkClient.retryUntilConnected(ZkClient.java:985)
kafka1       | 	at org.I0Itec.zkclient.ZkClient.exists(ZkClient.java:698)
kafka1       | 	at org.I0Itec.zkclient.ZkClient$9.run(ZkClient.java:818)
kafka1       | 	at org.I0Itec.zkclient.ZkEventThread.run(ZkEventThread.java:71)
kafka1       | [2017-03-03 07:59:28,255] INFO EventThread shut down (org.apache.zookeeper.ClientCnxn)
kafka1       | [2017-03-03 07:59:28,356] ERROR Error handling event ZkEvent[Data of /admin/reassign_partitions changed sent to kafka.controller.PartitionsReassignedListener@4b92387] (org.I0Itec.zkclient.ZkEventThread)
{code}",,bmos299,kchristidis,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Mar/17 11:28 PM;Nishi;Multichannel-Multichaincode-ZK-Kafka-Socket-Error .txt;https://jira.hyperledger.org/secure/attachment/10559/Multichannel-Multichaincode-ZK-Kafka-Socket-Error+.txt","03/Mar/17 11:38 PM;Nishi;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10558/docker-compose.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmpz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,kchristidis,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/17 3:18 AM;bmos299;Changing to HIGH from HIGHEST.  Nishi thinks it could have been caused by a config error which she will post.  However, it is still a bug (NULL EXCEPTION).  If she hits again for the config change she will move back to highest. ;;;","29/Mar/17 4:25 AM;kchristidis;ZK logs seems normal BTW.;;;","12/Apr/17 4:13 AM;kchristidis;[~bmos299] [~Nishi] Can we update this and mark as done by EOD if not relevant? Thanks!;;;","17/Apr/17 10:04 PM;Nishi;This is not reproducible with our current e2e configuration that has 2 kafka servers and an orderer. Closing this issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end (java sdk) tests are failing on latest commits,FAB-2623,15190,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisr,rameshthoomu,rameshthoomu,04/Mar/17 1:45 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,06/Mar/17 11:32 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"observed end-to-end (java sdk) tests are failing on below commits;

7893e27 (fabric)
90a5a26 (fabric-ca)
4ceaf17 (fabric-java-sdk)

Below is the build reference#  https://jenkins.hyperledger.org/sandbox/job/e2e_java_x86_64/1/consoleText

",Jenkins CI,bmos299,Clayton Sims,muralisr,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmq7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,Clayton Sims,muralisr,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/17 2:24 AM;rickr;You are probably running the peer with the option the not have the default testchain   our tests need that.;;;","04/Mar/17 5:47 AM;Clayton Sims;rick says you have this now;;;","04/Mar/17 6:59 AM;Clayton Sims;Talked to Murali - he has identified fix and working on it now;;;","04/Mar/17 10:43 PM;bmos299;I see Murali and Rick are working through this on the fabric-ci channel and Murali has pointed out what may be a config issue at this time:
 @rickr `02:48:41 INFO: [ManagedChannelImpl@66c61024] Created with target localhost:7050` ....localhost is not reachable address
suspect a configuration issue ;;;","04/Mar/17 10:56 PM;muralisr;[~bmos299] [~Clayton Sims]  

To be clear the original problem is still there and [~C0rWin] has begun a fix for it in https://gerrit.hyperledger.org/r/#/c/6821/.

My comment to [~rickr] was on his attempt to fix the test to not use testchainid by creating a normal chain. Looked like that test was trying to reach orderer at {{localhost:7050}} which won't work.;;;","05/Mar/17 11:52 PM;muralisr;[~rameshthoomu] I think this is resolved.. can you update when you get a chance please ?;;;","06/Mar/17 11:32 PM;rameshthoomu;[~rickr] [~muralisr] java sdk end-to-end test working as expected on latest commits. Build reference# https://jenkins.hyperledger.org/sandbox/job/e2e_java_x86_64/19/consoleText;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip Anchor peer connect bug fix,FAB-2624,15191,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,yacovm,yacovm,yacovm,04/Mar/17 4:01 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 11:48 PM,,,,,,,,,,,,0,,,,,,,,"When the PEM was removed from the anchor peers, the Connect() method of the discovery layer wasn't updated accordingly. 
As a result, all anchor peers were mapped to the same (empty string) key in the discovery layer. 
",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmqf:",,,,,,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
need GetEvent stub interface so that emitted payload can be built up ,FAB-2625,15192,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,,kletkeman,kletkeman,04/Mar/17 5:17 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,customer_,events,,,,,"The chaincode stub interface has the following API to allow an Invoke to set an emitted event payload upon commit of the transaction.

	// SetEvent saves the event to be sent when a transaction is made part of a block
	SetEvent(name string, payload []byte) error

The problem with having only a setter is that this appears as a one time operation, which in fact it would be much more useful to build up data in the payload as time goes by. So, for example, our iot contract platform can emit three items today: success code, failure with error string, and alerts status is success.

But customers are asking for us to emit complete state so that there applications can operate on changes without requiring a fast polling solution. Slow polling as backup may be used, but responsiveness is valued.

Our contracts are complex enough that state changes are spread out, but funnelled through a common state writer at the last moment. This state writer would be able to add the state to the emitted event (if configured that way declaratively) by calling GetEvent, unmarshalling the JSON object, then marshalling and calling SetEvent again. This would be a magnificent mechanism for building up the event as a complex process proceeds.

The addition of GetEvent seems like it should be a trivial extension, yet its impact will be huge for our customers. Please consider its inclusion in v1.",,kletkeman,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmqn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,kletkeman,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Mar/17 4:20 PM;ruslankryukov;+1 we also need this feature for our customers;;;","25/Mar/17 4:51 AM;kletkeman;I noticed something in the newest code (it may have been there prior to recent updates of course). There was either a comment or a var name that implied that we could call set event multiple times and it would keep them in an array. If this is the intent, then it solves the problem very well (even better than updating a large payload). If, on the other hand, I am misinterpreting something or what was written is incorrect (i.e. that in fact every call to ""setEvent"" overwrites the previously set payload) then may I suggest that we consider this option as a solution to the problem?

Here is the ideal way in which we could use this feature:

1) Call ""setEvent"" as often as we need to , each one storing a new event that will be emitted upon closing commit as happens today. (Multiples of same name are ok.)
2) Define a parameter to the call that allows us to ""replace"" named event, with such that any event by that name is removed and the current payload added against that name

Also, we should ensure that setEvent with null payload will remove all events by that name. Calling with null name will remove all set events by any name.

Note, I realize that this is a tricky interface, so adding extra API would be useful instead. But if we want to avoid namespace pollution, this behaviour would be intuitive once learned.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add capability to drop a chain/ledger,FAB-2626,15193,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,04/Mar/17 5:25 AM,23/Jan/20 3:54 AM,28/Oct/23 2:59 AM,23/Jan/20 3:54 AM,,,,,Future,,,fabric-ledger,,,,0,stale-item,,,,,,,"One use case:
Upon joinChain() the peer creates the ledger with genesis block temporarily.  And then real genesis block is delivered from orderer, and is compared with the temp genesis block. If they are not the same, we need to drop the temp ledger.

Going forward, there will also need to be normal chain/ledger cleanup capability as well.",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7lb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:54 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
  Unable to deploy (instantiate) chaincode using default channel testchainid,FAB-2629,15196,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,Ratnakar,Ratnakar,04/Mar/17 6:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,05/Mar/17 3:20 PM,,,,,v1.0.0,,,fabric-peer,,,,0,Endorser,v1.0,,,,,,"For quick verification of chaincode functionality, I would prefer using the CLI commands with default channel (testchainid).
However, while instantiating the chaincode it fails with below error

{code}
Error: Error endorsing chaincode: rpc error: code = 2 desc = Failure while looking up the ledger testchainid
{code}


Verified on commit level : *5f4b99a894826f0e8f2ea1ddcfe27099da5e7760*
h2. Steps to reproduce the issue:

*Pre-Req:*
Verified this on Vagrant environment
{code}
	vagrant up 
	vagrant ssh
	make native peer-docker
{code}


*Vagrant Terminal 1:*
{panel}
	orderer
{panel}

*Vagrant Terminal 2:*
{panel}
	peer node start
{panel}


*Vagrant Terminal 2:*
{code}
peer chaincode install -o 127.0.0.1:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

$ ls /var/hyperledger/production/chaincodes/
-rw-r--r-- 1 vagrant vagrant 18398890 Mar  3 20:44 mycc.1.0
{code}

while instantiating the chaincode it fails
{code}
$ peer chaincode instantiate -o 127.0.0.1:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"", ""100"", ""b"",""200""]}'
Error: Error endorsing chaincode: rpc error: code = 2 desc = Failure while looking up the ledger testchainid
Usage:
  peer chaincode instantiate [flags]

Global Flags:
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -o, --orderer string             Ordering service endpoint
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode
{code}",,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmr3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Mar/17 3:20 PM;Ratnakar;Issue has been fixed with the commit : https://gerrit.hyperledger.org/r/#/c/6821/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate gossip/election with peer/core.yaml,FAB-2630,15197,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,gennadyl,gennadyl,04/Mar/17 7:13 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,06/Mar/17 11:37 PM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"Leader election service configured using 4 parameters:
startupGracePeriod
membershipSampleInterval
leaderAliveThreshold
leaderElectionDuration

Values for those parameters should be set using core.yaml file
and can be easy changeable in various test.  ",,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmrb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
need better logs for VSCC authentication failure,FAB-2631,15198,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,scottz,scottz,04/Mar/17 7:17 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,quality,Serviceability,Usability,,,,,"As a fabric tester or support personnel, it is difficult to understand why a transaction fails validation in the VSCC, even with DEBUG logs, so debugging issues is very time-consuming. At the point of failure, it would be much more helpful to see the following information displayed (maybe at the INFO level?):
* the policy being used to validate the identified transaction
* the names of the signers (peer name, and associated org name). At one point I saw a log with the hash signature of signer(s), but that is difficult for tester to understand and trace.
* the names of signers/orgs that are lacking

For example, if the policy is ""AND('OrgRedMSP.member','OrgBlueMSP.member')"" then a TX must be signed/endorsed by any one member of OrgRed or any one member of OrgBlue. If peer00 is in OrgRed and peer00 endorses a transaction, and there are no other signatures, then the log could state something to the effect of the first part being satisfied (peer00 = OrgRedMSP.member) however the validation failed due to lacking signatures from any OrgBlueMSP.member.

And I would hope the same information could also be provided to the SDK or any process that registers for event failure notification.

Existing log:

peer2        | 2017-03-02 21:50:57.835 UTC [txvalidator] VSCCValidateTx -> ERRO 001 VSCC check failed for transaction txid=de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94, error VSCC error: policy evaluation failed, err Failed to authenticate policy
peer2        | 2017-03-02 21:50:57.839 UTC [txvalidator] Validate -> ERRO 002 VSCCValidateTx for transaction txId = de8c2db2f9bce9be2ab2864339a08862ab9de8280c2c0b919930eb22fbaecf94 returned error VSCC error: policy evaluation failed, err Failed to authenticate policy
",,ChristopherFerris,denyeart,peoplehlj,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmrj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,denyeart,peoplehlj,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 11:22 AM;denyeart;Assigning to [~adc] to help triage and/or identify the right person to improve the logging (if it is not you).;;;","14/May/17 1:20 AM;ChristopherFerris;This is not a bug, it is a request for an improvement. Changing the classification.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Default chaincode endorsement policy,FAB-2632,15199,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,binhn,binhn,04/Mar/17 8:37 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 5:30 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"When a chaincode is instantiated on a channel, we do something like

peer chaincode instantiate -C mych -n mycc -v 1.0 -p example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -P ""OR ('Org0MSP.member','Org1MSP.member')""

-P is optional, and so in the LCCC, we do (line 518)

		if len(args) > 3 && args[3] != nil {
			policy = args[3]
		} else {
			// FIXME: temporary workaround until all SDKs provide a policy
			policy = utils.MarshalOrPanic(cauthdsl.SignedByMspMember(""DEFAULT""))
		}
I think that FIXME really needs to be fixed because cauthdsl.SignedByMspMember(""DEFAULT"") is not correct. There is no orgs with ID = DEFAULT.  What we wanted to say was ""signed by any valid members of the channel"".

[~ellaki] suggested that we should use the peer MSPs writers.

Note that this is not safe for production, and we should log a warning when chaincode has no endorsement policy specified. It is to make it easier for development.
",,ales,binhn,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7ef:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ales,binhn,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/17 5:41 AM;ales;There's a problem with defaulting to the ChannelApplicationWriters policy. The problem is that due to the chaincode-nature of lccc, policies need to be specified as bytes. The code currently serializes a *cb.SignaturePolicyEnvelope object into bytes which is how policies are set at deploy time and stored by lccc. Later at validation time, vscc queries lccc and extracts bytes which it deserializes back to a *cb.SignaturePolicyEnvelope. So we always need policies as serialized *cb.SignaturePolicyEnvelope objects. However, ChannelApplicationWriters is a different struct and can't be serialized into a *cb.SignaturePolicyEnvelope.

The alternative solution that we propose is to default to the following policy: a signature from a member of any of the MSPs specified for the application of the channel.;;;","07/Mar/17 6:06 AM;binhn;I am fine with that as it is a default and we log a warning on that decision. We can revisit later.;;;","12/Apr/17 5:01 AM;denyeart;[~muralisr][~adc][~ales][~ellaki]
Is this still needed or has it already been covered and therefore can be closed? If still valid, is it a story or a bug? Is it required for 1.0.0?;;;","12/Apr/17 5:30 AM;denyeart;Looks like this has been merged, marking as Done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
some blocks not delivered to peer/client connecting to orderer after orderer is docker stop/paused and restarted,FAB-2633,15200,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,04/Mar/17 8:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,06/Jun/17 6:10 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-orderer,,,,0,qa,quality,,,,,,"Using commit 25dbdeeab8f3d4e431a5434bcee149ee30cf556e from Wed Mar 1,
running continual transactions through the orderer service (kafka in this testcase),
then ""docker stop"" and start an orderer,
then connect a new peer client to the orderer after it recovers,
and we observe that many of the blocks from the beginning of the chain are not delivered to that new consumer (peer) client.

Same behavior is observed when ""docker pause"" and unpause, instead of stop and start.

EXPECTED Behavior: all blocks, from genesis up to the latest block, should be delivered, as is the case when no restarts are performed.
In this example (test output logs are attached), we see that the first block delivered to the MasterConsumer-o3-c1 is block number 1687 containing 10 transactions (and therefore is NOT the genesis block), and in fact only 1713 blocks are delivered to that consumer (when all 3400 blocks are delivered to other consumers).

Some key points in the log are:

===Stopping orderer1 at  2017-03-03 23:13:06.190899593 +0000 UTC
===Producer-o1-c0 failed to broadcast TX 646 (ACK=646 NACK=1), 2017-03-03 23:13:06.267421243 +0000 UTC, err: rpc error: code = 13 desc = transport is closing
===Consumer-o1-c0 CLOSING. Totals received numtrans=1891 numBlocks=190
===Started  orderer1 at  2017-03-03 23:13:39.201764559 +0000 UTC
===Started client MasterConsumer-o3-c1 to recv delivered batches from ord[3] ch[0] srvr=127.0.0.1:5006 chID=testchainid
===Consumer-o3-c0 recvd blockNum 1687 with numtrans=10/10; numBlocks=1, 2017-03-03 23:14:47.578756839 +0000 UTC
===Consumer-o3-c0 recvd blockNum 1688 with numtrans=10/10; numBlocks=2, 2017-03-03 23:14:47.57969228 +0000 UTC

===Consumer-o3-c0 CLOSING. Totals received numtrans=17121 numBlocks=1713, 2017-03-03 23:15:17.43225854 +0000 UTC
===Consumer-o0-c0 CLOSING. Totals received numtrans=33982 numBlocks=3400, 2017-03-03 23:15:17.432255955 +0000 UTC
===Consumer-o2-c0 CLOSING. Totals received numtrans=33982 numBlocks=3400, 2017-03-03 23:15:17.432390377 +0000 UTC


To reproduce, run the following tests:
 $  cd  $GOPATH/github.com/hyperledger/fabric/bddtests/regression/go/ote
 $  go test -run ORD92
 $  go test -run ORD93

func Test_ORD92_50000TX_1ch_3ord_kafka_3kbs(t *testing.T) {
        go stopAndStart(""orderer1"") // sleep 40 && docker stop orderer1 && sleep 30 && docker start orderer1
        spyOnOrdererAfterSecs(1, 120)  // returns immediately after starting a go thread which waits (20=launchDelaySecs + 120) seconds and then starts MasterSpy on orderer1
        passResult, finalResultSummaryString := ote(""ORD-92"", 50000, 1, 3, ""kafka"", 3, spyDefer, 1 )
        if !passResult { t.Error(finalResultSummaryString) }
}

//93 pause an orderer (not orderer0, so we can still see progress logs)
func Test_ORD93_50000TX_1ch_3ord_kafka_3kbs(t *testing.T) {
        go pauseAndUnpause(""orderer1"")
        spyOnOrdererAfterSecs(1, 120)  // returns immediately after starting a go thread which waits (20=launchDelaySecs + 120) seconds and then starts MasterSpy on orderer1
        passResult, finalResultSummaryString := ote(""ORD-93"", 50000, 1, 3, ""kafka"", 3, spyDefer, 1 )
        if !passResult { t.Error(finalResultSummaryString) }
}
",,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Mar/17 8:39 AM;scottz;fail_ORD92.txt;https://jira.hyperledger.org/secure/attachment/10560/fail_ORD92.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmrr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/17 1:16 PM;kchristidis;When reproducing this, please make sure that the ""verbose"" flag for Kafka logs is set to true: [https://github.com/hyperledger/fabric/blob/master/bddtests/dc-orderer-base.yml#L17]

Please also attach the logs from every ordering service node used in this run.;;;","06/Jun/17 6:09 AM;suryalnvs;I retested using *commit 3b40efaee8584fd2662c59c0f7fc5a1a18c38f58, Date: Fri Jun 2 03:00:52 2017 +0000*, *OTE testname=ORD-78 TX=30000 Channels=1 Orderers=3 ordererType=kafka kafka-brokers=4 oteSpy=OFF producersPerCh=1* and manually stopped orderer0.example.com and started again and connected a deliver client from another terminal which delivered all the blocks that were delivered to other orderers (orderer1.example.com, orderer2.example.com). Similarly tested the same scenario by pausing and unpausing the orderer0.example.com instead of stopping and starting. Observed that all blocks are delivered to orderer0.example.com. *{color:#14892c}So issue is no more reproducible.{color}*;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Produce event once genesis block committed to the ledger,FAB-2634,15201,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,04/Mar/17 10:10 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,06/Mar/17 2:29 AM,,,,,,,,,,,,0,,,,,,,,"Usually when new block is committed on peer there is an event produced. However this is not the case for the the genesis block, need to make sure to generate event for very first block as well, while peer joins the channel.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmt3:",,,,,,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
For testchainid there is a need to add ordering endpoint into genesis block generated.,FAB-2635,15202,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,04/Mar/17 10:15 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,06/Mar/17 2:29 AM,,,,,,,,,,,,0,,,,,,,,"Ordering service endpoint now read from the configuration block, while there is a still part of the code to maintain backward compatibility which works with *testchainid*. Need to add option to the peer cli command such that it will allow to encode into configuration block ordering service address.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmtb:",,,,,,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify genesis block after receiving join channel command,FAB-2636,15203,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,C0rWin,C0rWin,04/Mar/17 10:25 AM,20/Nov/20 8:56 AM,28/Oct/23 2:59 AM,20/Nov/20 8:56 AM,,,,,,,,fabric-peer,,,,0,ipm2,,,,,,,"Peer commits block after receiving it from join channel command, while peer doesn't verifies block correctness with the genesis block available on ordering service. In fact peer doesn't try to request genesis block from the orderer. Need to add an ability to run validation after receiving join channel command and prevent peer to join in case wrong block is received. ",,C0rWin,denyeart,GuillaumeCisco,jeffgarratt,jyellick,knagware9,manish-sethi,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7g7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,C0rWin,denyeart,GuillaumeCisco,jeffgarratt,jyellick,knagware9,manish-sethi,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 5:07 AM;denyeart;[~C0rWin]Can you be more specific on what validation? Is there existing validation logic? Is this must-do in v1.0.0, that is, is it really a bug if not done, or is this an enhancement that could come in 1.1?;;;","12/Apr/17 9:18 AM;C0rWin;[~denyeart] Currently peer accepts genesis block via join channel command, I guess there is need to verify orderer signature and ensure this is indeed same block as at orderer service. Currently block accepted without additional checks, as I stated in the description once peer gets block it creates the ledger and commits the block, at the time item was opened no one passed validation on the genesis block, I'd guess validation suppose to be the same as for any other configuration blocks. While I assume there is might be potential chicken and the egg problem, since genesis block includes information on how to validate the block.;;;","01/Jun/17 6:18 AM;C0rWin;Per agreement with [~binhn] targeting this for post v1.0.;;;","08/Sep/17 2:48 AM;muralisr;[~C0rWin] is this still a problem ... let me assign it to you for now.;;;","27/Oct/17 4:15 AM;jeffgarratt;[~C0rWin] should this remain open?;;;","27/Oct/17 5:26 AM;C0rWin;Well, currently peer accepts genesis block, w/o verifying whenever it matches genesis block at ordering service.
Not sure this is a real concerns since next block hash will have to match to the previous one. But I think for integrity
we need to take care of this and do this extra check.
;;;","01/Nov/17 10:47 PM;C0rWin;Thinking of it a bit more, there is no actual point of verifying the genesis block upon join channel command, since if one would like to provide tampered genesis block it will be also able to provide faked ordering service endpoint. For now, I'd prefer to close this ticket.;;;","29/Sep/18 1:40 PM;denyeart;[~C0rWin] I think this is a problem, I will re-open.  I believe we have a case of it here:

[https://stackoverflow.com/questions/52562232/hyperledger-fabric-on-aws-peers-get-crash-after-anchor-peer-update]

 

I've also reproduced the problem.

I did trial1 where I create a channel and join a peer using genesis block1.

Then I do a trial2 and create same channel with a slightly different genesis block2.

But I join peer with old genesis block1.  Everything appears ok, but the join should fail per this bug description.  I believe that is what is happening in the stackoverflow.

In v1.3 extra validation was added to compare prior block hash at commit time.  So when peer gets block1 and notices the hashes don't match, in v1.3 it panics with error:

2018-09-29 00:00:34.665 EDT [gossip/state] commitBlock -> ERRO 02d Got error while committing(unexpected Previous block hash. Expected PreviousHash = [080e75dcd6c9b149154586061e10e58f17a62a92b60414608f119eb7fcd864c9], PreviousHash referred in the latest block= [7d6ac1e64137f95410962ef4356ad4306feda67c6e63828227cdb29f9bcfe58a]

So actually, in v1.3 and beyond we will protect against this case upon receiving next block.  But it would still be good to do the verification per the bug description at join time, so that user can be alerted of their error at the time it happens, otherwise they will not understand the failure at block1, as in the case of stackoverflow scenario.;;;","25/Sep/19 1:22 AM;jyellick;[~C0rWin] are you still working on this?;;;","25/Sep/19 6:47 AM;C0rWin;[~jyellick] nope, it's not my current focus.;;;","07/Jan/20 7:03 PM;GuillaumeCisco;Got the same issue when working with the CHFA course...
I had to refetch the genesis.block for the peers of my new organization to join correctly the channel.
Using the primarily fetched genesis.block for the peers of the first org triggered this error:

 2018-09-29 00:00:34.665 EDT [gossip/state] commitBlock -> ERRO 02d Got error while committing(unexpected Previous block hash. Expected PreviousHash = [080e75dcd6c9b149154586061e10e58f17a62a92b60414608f119eb7fcd864c9], PreviousHash referred in the latest block= [7d6ac1e64137f95410962ef4356ad4306feda67c6e63828227cdb29f9bcfe58a];;;","17/Nov/20 3:51 AM;manish-sethi;[~denyeart] - It's been open for long. As this will mostly be a problem in a test setup, perhaps that's the reason it has not received enough attention. Can you take a look at this?;;;","20/Nov/20 8:56 AM;denyeart;As of v1.3, if block1 (from orderer) does not have reference to peer's block0 hash (from join operation), then peer will not process block1 and panics.
While not ideal, there is remediation possible since this issue was first opened.
Peer admin can now 'pause' the bad channel so that it doesn't attempt to process subsequent blocks.
And in a future story FAB-17801 it will be possible to unjoin a channel.
Therefore if a peer admin does provide the wrong genesis block by accident, it will be possible to resolve the situation. I think this is an acceptable resolution, rather than adding significant new logic to the join operation. I'll close the issue.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance configtxgen inspection to include policies,FAB-2638,15205,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,05/Mar/17 2:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,29/Mar/17 3:42 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmtz:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add support for an empty set of anchor peers,FAB-2640,15207,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,05/Mar/17 10:20 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 4:42 PM,,,,,,,,,,,,0,,,,,,,,"Gossip currently doesn't support an empty set of anchor peers in the genesis block.
In such a case, it should be assumed that the organization of the peer is the only member in the channel.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmuf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip forwarding not send to the peer in which the message was received from,FAB-2641,15208,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,yacovm,yacovm,05/Mar/17 10:44 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,28/Nov/17 8:11 AM,v1.0.0,,,,v1.1.0,,,fabric-gossip,,,,0,active,gossip,,,,,,"When a message is gossiped via forwarding, it is simply added to the batching emitter and then decided to which peers to be sent according to all kinds of decisions based on the message type, origin, etc. etc. 
The decision of to which the message is sent doesn't take in account the peer the message came from. There is no reason to send back the message to the peer from which the message came from. 

",,C0rWin,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmun:",,,,,,Sprint 13 - Endorser,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,C0rWin,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Nov/17 12:12 PM;denyeart;[~C0rWin] Do you still intend to work on this one?;;;","27/Nov/17 4:07 PM;C0rWin;There is work in progress, https://gerrit.hyperledger.org/r/#/c/15579/, almost done, once finished I will update.;;;","28/Nov/17 1:12 AM;C0rWin;https://gerrit.hyperledger.org/r/#/c/15579/15;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prevent initialization of gossip state transfer with zero height committer,FAB-2642,15209,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,06/Mar/17 1:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,08/Mar/17 5:02 PM,,,,,,,,,,,,0,,,,,,,,"Since block sequence numbers modeled with uint64 golang type and if committer returns current ledger height equals to zero the gossip metastate will be initialized with -1, which will caused by overflow and will lead anti entropy to request large amount of missing blocks to transfer.

Need to make sure state transfer will not be initialized with ledger of height zero.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmuv:",,,,,,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NullPointerException in verifyByChannel,FAB-2643,15210,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,06/Mar/17 3:06 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 4:42 PM,,,,,,,,,,,,0,,,,,,,,"Scenario: 

Peer gets an AliveMessage in gossip from an external organization, and the messageCryptoService tries to validate it.
The validation first goes to the local MSP (and fails) so it tries validating using one of the channel policies (which were recently introduced), but it fails because the channelPolicyManagerGetter returns a nil policyManager from some reason.
This results in a null dereference panic and the unexpected and sorrowful death of the peer.

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x756ff5]

goroutine 45 [running]:
panic(0xc1ad00, 0xc420016050)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).VerifyByChannel(0xc4201dd3b0, 0xc4200c2358, 0x3, 0x8, 0xc420293b00, 0x214, 0x214, 0xc42153ee10, 0x46, 0x46, ...)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:234 +0x225
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).Verify(0xc4201dd3b0, 0xc420293b00, 0x214, 0x214, 0xc42153ee10, 0x46, 0x46, 0xc42153edc0, 0x42, 0x42, ...)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:216 +0x1c0
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature.func1(0xc420293b00, 0x214, 0x214, 0xc42153ee10, 0x46, 0x46, 0xc42153edc0, 0x42, 0x42, 0x3, ...)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:884 +0xa6
github.com/hyperledger/fabric/protos/gossip.(*SignedGossipMessage).Verify(0xc4200bf940, 0xc420293b00, 0x214, 0x214, 0xc4200bfbe0, 0x294, 0xc42148a600)
        /opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/extensions.go:410 +0xcb
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature(0xc4201ada80, 0xc4200bf940, 0xc420293b00, 0x214, 0x214, 0x214)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:888 +0xf2
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).ValidateAliveMsg(0xc4201ada80, 0xc4200bf940, 0xc42028d5c0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:854 +0x190
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage(0xc420086870, 0xc4200bf940)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:431 +0x208
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm(0xc420086870, 0xc4200be2f0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:338 +0x3aa
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages(0xc420086870)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:282 +0x200
created by github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:116 +0x50e
",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmv3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose created channels via ordering system channel configtx,FAB-2645,15212,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,jyellick,jyellick,06/Mar/17 4:37 AM,23/Jan/20 3:54 AM,28/Oct/23 2:59 AM,23/Jan/20 3:54 AM,v1.0.0,,,,,,,fabric-orderer,,,,1,configuration,stale-item,,,,,,,,jyellick,kchristidis,sykesm,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx60n:",,,,Unset,,,,,,,,,,,,,,5.0,Unset,,,,,,,,,,,jyellick,kchristidis,sykesm,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/17 11:31 PM;jyellick;This is infeasible until we have safe concurrently computed config updates.

In particular, because of non-deterministic marshaling in protobuf, only one member can compute the config update which encodes an updated config with the channel.  The problem is thus reduced to ensuring that a new config is computed by someone, and adopted by the channel.  This will likely require help from the specific consensus implementations, as it boils down to a problem of leader election.

After support for safe concurrently computed config updates is added, it should be possible to leverage that, preliminary discussion on this issue is available https://docs.google.com/document/d/14czIS4jrIC9NlgeOQYWbF94rzqmCq4BOR-hS34g3IdM/edit;;;","02/Nov/17 11:28 PM;varadatibm;Currently in order to display the list of channels, we query the peer(s) and display the list of channels across them... if they have channels created, but did not join, we can't get the accurate list.;;;","03/Nov/17 12:07 AM;jyellick;We've laid much of the required groundwork for this in v1.1, and I think are on target to include this in v1.2.;;;","23/Jan/20 3:54 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create consortium configuration structures,FAB-2646,15213,15340,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,06/Mar/17 4:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Apr/17 4:55 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmvj:",,,,,,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Populate consortium config structures in configtxgen,FAB-2647,15214,15340,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,06/Mar/17 5:49 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Apr/17 4:55 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmvr:",,,,,,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Write gossip inter-org tests,FAB-2648,15215,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,yacovm,yacovm,06/Mar/17 7:14 AM,28/Jul/19 1:41 AM,28/Oct/23 2:59 AM,28/Jul/19 1:41 AM,,,,,,,,,,,,0,beta,ga,,,,,,We don't have tests that simulate inter-organizational scenarios in gossip.,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmvz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Viper concurrent read/write bug at discovery,FAB-2649,15216,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,yacovm,yacovm,06/Mar/17 9:05 AM,19/Mar/19 8:13 PM,28/Oct/23 2:59 AM,07/Jun/17 5:35 PM,v1.0.0,,,,Future,,,fabric-gossip,,,,0,ci-failure,,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8202/consoleFull

23:53:44 [32munit-tests_1  |[0m [33m2017-03-05 23:53:43.712 UTC [gossip/discovery#localhost:8610] func1 -> WARN 4bd[0m Could not connect to {localhost:8612 [] [] localhost:8612}
23:53:44 [32munit-tests_1  |[0m fatal error: concurrent map read and map write
23:53:44 [32munit-tests_1  |[0m 
23:53:44 [32munit-tests_1  |[0m goroutine 10620 [running]:
23:53:44 [32munit-tests_1  |[0m runtime.throw(0x9f6a96, 0x21)
23:53:44 [32munit-tests_1  |[0m 	/opt/go/src/runtime/panic.go:566 +0x95 fp=0xc4200348b8 sp=0xc420034898
23:53:44 [32munit-tests_1  |[0m runtime.mapaccess2_faststr(0x947e20, 0xc4201550e0, 0xc4237f17a0, 0x22, 0xebeae0, 0xc420034900)
23:53:44 [32munit-tests_1  |[0m 	/opt/go/src/runtime/hashmap_fast.go:306 +0x52b fp=0xc420034918 sp=0xc4200348b8
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.(*Viper).find(0xc42014e680, 0xc4237f17a0, 0x22, 0x22, 0xc4237f1740)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:628 +0x13a fp=0xc420034ca0 sp=0xc420034918
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.(*Viper).Get(0xc42014e680, 0x9f78d8, 0x22, 0x1d, 0x3b9aca00)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:404 +0xe5 fp=0xc420034db0 sp=0xc420034ca0
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.(*Viper).GetDuration(0xc42014e680, 0x9f78d8, 0x22, 0xc420034e30)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:481 +0x3f fp=0xc420034de8 sp=0xc420034db0
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/vendor/github.com/spf13/viper.GetDuration(0x9f78d8, 0x22, 0x3b9aca00)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/viper/viper.go:479 +0x41 fp=0xc420034e18 sp=0xc420034de8
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/util.GetDurationOrDefault(0x9f78d8, 0x22, 0x12a05f200, 0x5311db)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/util/misc.go:156 +0x35 fp=0xc420034e40 sp=0xc420034e18
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/discovery.getAliveExpirationTimeout(0x0)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:906 +0x48 fp=0xc420034e70 sp=0xc420034e40
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/discovery.getReconnectInterval(0xc423b74ed0)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:918 +0x22 fp=0xc420034ea0 sp=0xc420034e70
23:53:44 [32munit-tests_1  |[0m github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1(0xc4212b7860, 0xc423b87040, 0xe, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc423b87040, ...)
23:53:44 [32munit-tests_1  |[0m 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:152 +0x24c fp=0xc420034f50 sp=0xc420034ea0
23:53:44 [32munit-tests_1  |[0m runtime.goexit()",,ChristopherFerris,dolanor,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmw7:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,dolanor,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/17 8:47 AM;ChristopherFerris;has this been resolved? [~C0rWin] [~yacovm]??;;;","14/Apr/17 3:11 PM;yacovm;No.
This happens only in test code.
The solution is either to make the tests run not in parallel, or do something smarter. 
[~C0rWin] correct me if I'm wrong but this belongs to the backlog;;;","13/Mar/18 6:54 PM;dolanor;I have a similar situation with the fabric-sdk-go (a previous version though).

I had to serialize the access to a call creating a new client with a mutex.

 

Viper is not thread-safe and is supposed to just be read once at the startup of a program, or with the WatchConfig util. The rest of the calls are not thread-safe. They need to be serialized on our side.

 

[https://github.com/spf13/viper/issues/268]

[https://github.com/spf13/viper/issues/174]

[https://github.com/spf13/viper/issues/353]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A number of Unit Tests are using an incorrect path to the MSP sampleconfig keystore,FAB-2651,15218,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrijk,harrijk,harrijk,06/Mar/17 9:17 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Mar/17 10:37 PM,,,,,v1.0.0-alpha1,,,fabric-peer,,,,0,,,,,,,,"For some unit tests, a test configuration is setup to create a BCCSP keystore.  Other unit tests that require a keystore are using the one located in fabric/msp/sampleconfig/keystore.  Although the test configuration setup is attempting to use the fabric/msp/sampleconfig/keystore, the relative path to get to the keystore directory starts from the directory the unit test is located rather than the fabric directory.  As a result a new directory structure is created within the directory the unit test is located to setup a keystore.

This causes some unintended consequences.  The most serious of which is the creation of the keystore directory structure that is owned by root.  Within the CI environment fabric jobs first wipe clean the previous build's workspace.  Since the workspace contains directories owned by root (e.g., created during the events unit tests), the clean workspace operation fails.  This results in the failure of Fabric verify and merge jobs for the z and p platforms since the non-root user, jenkins, cannot delete files owned by root.

The reason that Fabric verify and merge jobs don't fail on the x86 platform is due to the fact that all x86 Jenkins workers are destroyed after the Jenkins job completes, and new x86 Jenkins workers are instantiated from a fresh image prior to starting any Jenkins jobs.",,harrijk,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmwn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harrijk,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Mar/17 7:08 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/6905/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Not able to access Rest API in Hypeldger fabric,FAB-2652,15219,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,AbhilekhSingh,AbhilekhSingh,06/Mar/17 10:09 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,10/Apr/17 5:21 AM,,,,,,,,,,,,0,Rest,,,,,,,"Hi,

Can some please tell me how can I access the rest API?

Do I need to add another docker container for rest api? If yes please can you please tel which one.


I followed these instructions https://hyperledger-fabric.readthedocs.io/en/latest/asset_setup.html

My current setup:

{code:none}
CONTAINER ID        IMAGE                                                          COMMAND                  CREATED             STATUS              PORTS                                            NAMES
ad24e0bd9e03        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""sh -c './channel_tes""   2 hours ago         Up 2 hours                                                           cli
53f43299ef28        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""peer node start --pe""   2 hours ago         Up 2 hours          0.0.0.0:8056->7051/tcp                           peer2
38f6c202730e        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""peer node start --pe""   2 hours ago         Up 2 hours          0.0.0.0:8055->7051/tcp                           peer1
cf75626f6c43        sfhackfest22017/fabric-peer:x86_64-0.7.0-snapshot-c7b3fe0      ""peer node start --pe""   2 hours ago         Up 2 hours          0.0.0.0:8051->7051/tcp, 0.0.0.0:8053->7053/tcp   peer0
96d180297052        sfhackfest22017/fabric-ca:x86_64-0.7.0-snapshot-6294c57        ""sh -c 'sleep 10; fab""   2 hours ago         Up 2 hours          0.0.0.0:8054->7054/tcp                           ca
6b3047b8aa53        sfhackfest22017/fabric-orderer:x86_64-0.7.0-snapshot-c7b3fe0   ""orderer""                2 hours ago         Up 2 hours          0.0.0.0:8050->7050/tcp                           orderer
{code}

{code:none}
ubuntu@ip-172-31-31-186:~$ curl -X GET localhost:7050/registrar
curl: (7) Failed to connect to localhost port 7050: Connection refused
{code}

Tried with IP addresses of all machines but no luck:

{code:none}
ubuntu@ip-172-31-31-186:~$ curl -X GET 172.19.0.6:7050/registrar
curl: (7) Failed to connect to 172.19.0.6 port 7050: Connection refused
ubuntu@ip-172-31-31-186:~$ curl -X GET 172.19.0.3:7050/registrar
curl: (7) Failed to connect to 172.19.0.3 port 7050: Connection refused
ubuntu@ip-172-31-31-186:~$ curl -X GET 172.19.0.1:7050/registrar
curl: (7) Failed to connect to 172.19.0.1 port 7050: Connection refused
{code}




",,AbhilekhSingh,binhn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmwv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AbhilekhSingh,binhn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/17 5:20 AM;binhn;Fabric has no REST API.
This is not a bug.  You should have asked the question on either chat or stackoverflow.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
index out of range panic when GOPATH is not set,FAB-2653,15220,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,gatakka,gatakka,06/Mar/17 10:37 PM,23/Jan/20 3:54 AM,28/Oct/23 2:59 AM,23/Jan/20 3:54 AM,,,,,,,,fabric-peer,,,,0,stale-item,,,,,,,"When user execute *peer chaincode install* in peer container (not in cli container) and GOPATH is not set *panic: runtime error: index out of range is thrown*.

Expected behavior is this situation to be handled and instead of panic user to see error message explaining the reason for the error.

To reproduce execute this command in peer node without or with wrong GOPATH

CORE_PEER_ADDRESS=peer0:7051 peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0
",,gatakka,jackyqiu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmx3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,gatakka,jackyqiu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/17 1:52 AM;jackyqiu;Same issue, my environment - win10, vagrant;;;","23/Jan/20 3:54 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end (node sdk) tests are failing on latest commits,FAB-2655,15222,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jimthematrix,rameshthoomu,rameshthoomu,06/Mar/17 11:18 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,08/Mar/17 11:47 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"node sdk end-to-end tests are failing on below commits with the below error

Follow all the pre-conditions (npm install, gulp, gulp ca) to execute end-to-end.js and then execute below command

{code:java}
node test/integration/end-to-end.js
{code}

{code:java}
00:15:51 not ok 5 Error: Verifying MSPs not found in the chain object, make sure ""intialize()"" is called first. at Chain._buildDefaultEndorsementPolicy (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Chain.js:9:91661) at /w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Chain.js:9:76975 at process._tickCallback (internal/process/next_tick.js:103:7)
00:15:51   ---
00:15:51     operator: fail
00:15:51     at: promise.then.then (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/test/integration/end-to-end.js:272:7)
00:15:51   ...
{code}

*Commit Numbers#*
=======> FABRIC PEER COMMIT NUMBER - ed7ed80 =======> FABRIC CA COMMIT NUMBER - f18b6b7 =======> FABRIC SDK NODE COMMIT NUMBER - 45a3778

*Build log*: https://jenkins.hyperledger.org/sandbox/job/e2e_FIT_x86_64/6/console
*Peer docker log file*: https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/204/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/dockerlogfile.log",Jenkins CI environment,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-172,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmxb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/17 11:49 PM;jimthematrix;now that the FIT CI job has been switched to run the new e2e test, it's running happily so closing this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create channel tracking structures in consortium,FAB-2657,15224,15212,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,jyellick,jyellick,06/Mar/17 11:50 PM,23/Jan/20 3:55 AM,28/Oct/23 2:59 AM,23/Jan/20 3:55 AM,,,,,,,,fabric-orderer,,,,0,common-components,stale-item,,,,,,,,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmxr:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/May/17 10:53 PM;jyellick;This needs to be re-examined as to whether this is implemented or not;;;","23/Jan/20 3:55 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Blocks not passed correctly from gossip layer to MSP layer,FAB-2658,15225,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,06/Mar/17 11:56 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 4:42 PM,,,,,,,,,,,,0,,,,,,,,"The MSP complains:

2017-03-06 13:11:34.153 UTC [gossip/channel#172.18.0.6:7051] verifyBlock -> WARN 0cc Received fabricated block from [63 59 141 175 35 93 196 235 73 110 50 138 97 20 187 49 1 85 185 50 14 201 201 248 23 221 205 174 224 120 125 238] in DataUpdate: Failed casting SignedBlock to []byte on channel [foo]

Because the object that was passed wasn't a []byte as expected but the object that contains the []byte as a field.

",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmxz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer crash when gets a block from another peer,FAB-2659,15226,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,07/Mar/17 12:02 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 4:41 PM,,,,,,,,,,,,0,,,,,,,,"When a peer gets a block it crashes with:

panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x38 pc=0x664811]

goroutine 51 [running]:
panic(0xc192e0, 0xc420016050)
        /opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/common/cauthdsl.compile.func2(0xc420026af0, 0x1, 0x1, 0xc421765d99, 0x1, 0x1, 0x880b0a)
        /opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/cauthdsl.go:78 +0x1f1
github.com/hyperledger/fabric/common/cauthdsl.compile.func1(0xc420026af0, 0x1, 0x1, 0xc421765d98, 0x1, 0x1, 0xc4217f6580)
        /opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/cauthdsl.go:51 +0x1ce
github.com/hyperledger/fabric/common/cauthdsl.(*policy).Evaluate(0xc420128d98, 0xc420026af0, 0x1, 0x1, 0x7fba81923000, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl/policy.go:73 +0x96
github.com/hyperledger/fabric/common/policies.(*implicitMetaPolicy).Evaluate(0xc4216658c0, 0xc420026af0, 0x1, 0x1, 0x1, 0xc420026af0)
        /opt/gopath/src/github.com/hyperledger/fabric/common/policies/implicitmeta.go:72 +0x9a
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).VerifyBlock(0xc4201f53e0, 0xc421765c00, 0x3, 0x3, 0xbc24e0, 0xc4217f85a0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:185 +0xa79
github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).verifyBlock(0xc42000fef0, 0xc4217f6400, 0xc42165eb00, 0x20, 0x20, 0x8)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:490 +0x166
github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).HandleMessage(0xc42000fef0, 0x12e4e80, 0xc42175eea0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:428 +0x49b
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).handleMessage(0xc420222c80, 0x12e4e80, 0xc42175eea0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:326 +0x5c3
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).acceptMessages(0xc420222c80, 0xc4213366c0)
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:262 +0x223
created by github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).start
        /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:247 +0xb4
",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmy7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Java chain code needs to work,FAB-2660,15227,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,07/Mar/17 12:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Apr/17 12:40 AM,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-228,FAB-3101,FAB-3170,,,,,,,,,,,,,,,,,,,,,,,,FABCJ-7,,,,,,,,,"1|hzxmyf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Correctly package java chaincode for install,FAB-2661,15228,15227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,07/Mar/17 12:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,10/Mar/17 5:41 AM,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmyn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce fabric-couchdb docker image default config (with security settings),FAB-2662,15229,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,07/Mar/17 2:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,21/Apr/17 5:54 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"Introduce customized default couchdb local.ini configuration for the fabric-couchdb docker image.

Primary this is for security configuration, but some other configurations are also needed for performance optimizations, such as delayed_commits and compressible_types.

User security will initially be disabled in local.ini, but an example of commented out security configuration will be provided, so that consumers can easily enable security.

Corresponding changes for user security in peer tests/config will also be highlighted but commented out.

This work item simply sets the foundation for user security by introducing the local.ini default configuration. We may decide to enable user security in the default configuration in a later work item.  ",,AdnanChoudhury,beatrider,denyeart,ibmamnt,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3094,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx4iv:",,,,,,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,beatrider,denyeart,ibmamnt,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Mar/17 5:49 PM;ibmamnt;When this is implemented, does peer connect via TLS ? So even if clouchdb image runs in separate VM for performance reason (and HA), all traffic are encrypted.  I see current image does not have TLS connection as of March/15th.
;;;","18/Mar/17 5:01 AM;denyeart;[~amnt]Since peer and couchdb container reside on same host, and since the couchdb port is not exposed, there is no network traffic and therefore TLS is not required. TLS would degrade performance since peer would have to do TLS handshake for every transaction. We have requested CouchDB to support HTTP 2.0, which would enable a persistent secured connection. Once that is available, it would be feasible to put couchdb on a remote host and secure the connection with TLS.;;;","19/Mar/17 9:01 PM;mastersingh24;I think we need to have an option for TLS.  Even though couch is on the same host in our recommended configs, this might not always be the case and in cloud hosted scenarios TLS will be required on when on the same host.

(I basically have most of the work done, so I can add a JIRA item and assign it to myself if you like);;;","20/Mar/17 11:59 PM;denyeart;[~mastersingh24] You mean to say that in some scenarios TLS is required between peer and couchdb, even when both are on the same host?  why is that?  Note that there will be a perf hit since the secure handshake would be required for every interaction.  If couchdb adds support for HTTP 2.0, then it would be much more efficient since the secure handshake would only be needed upon initial connection (if my understanding is correct).

What do you mean that you have the work almost done?  Which piece specifically?  You mean golang acting as a TLS client in general?  Or specific to couchdb? Note that couchdb already supports SSL on server side.;;;","21/Mar/17 11:33 AM;ibmamnt;[~denyeart] We need to have this option to certify requirement to run service in Financial markets. Otherwise, Hyperledger can not be used. The requirement is that all of communication must have security turn on.  There is no exceptions.  Also, running couchdb on the same host is not viable choice, since customer would like to have replication for disaster recovery (e.g. disk broken, etc). 
;;;","21/Mar/17 11:22 PM;denyeart;[~amnt] Option for TLS connection between peer and CouchDB containers will be added in subsequent work item FAB-2846.  It is mostly intended for when couchdb is remote from peer.  When peer and couchdb are on the same system (with no communication going out to the network), TLS doesn't make a lot of sense to me.  If an attacker gets access to the system then it seems like you have many more problems than the inter-process communication.  For inter-process communication on the same system it seems TLS communication would add overhead without a lot of value.  What's your opinion [~mastersingh24]?

Also [~amnt] , I think you misunderstand the HA model in fabric v1.  There is always a 1:1 relationship between peer and state database.  We are not leveraging couchdb replication. To achieve HA you spin up additional peers, each with their own dedicated state database.  The state database can be LevelDB (local) or CouchDB (typically local, but could be remote).;;;","22/Mar/17 8:43 AM;ibmamnt;As far as there is option to have TLS connection to remote couchdb, this is fine. And I now understood about HA model in fabric v1.0. Thanks !
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Potentially change Fabric's log output from Stderr to Stdout,FAB-2663,15230,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wlahti,wlahti,07/Mar/17 2:15 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,09/Mar/17 4:22 AM,,,,,WON'T FIX,,,fabric-peer,,,,0,,,,,,,,"It has been suggested to change where Fabric outputs its log statements from os.Stderr to os.Stdout. 

This item will be used to handle the discussion.",,binhn,mastersingh24,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmyv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,mastersingh24,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/17 3:04 AM;binhn;I'll start.

In a typical deployment, only error level or above is enabled. Sometime admin does lower it to info level to include info and warning. So it makes sense to go to stderr. This is the default in Java logging for example.

Traditionally, stdout is for the normal outputs from the program, like telling the user something or asking for inputs. Since the invention of the GUI, we don't see much of that but CLI.  
;;;","09/Mar/17 3:28 AM;mastersingh24;I guess I'm fine with leaving it as is so I'll close this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
During E2E test peer2 in my docker-network panics with SIGSEV failure,FAB-2664,15231,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,Nishi,Nishi,07/Mar/17 2:20 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 9:53 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,"During my E2E test sceanrio:

1 Orderer : solo, 4 peers, 1channel, 1 chaincode
peer2 exited during installation of chaincode. 

Errors:
{code}
docker logs -f cli
2017-03-06 17:08:42.380 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-03-06 17:08:45.383 UTC [logging] GetModuleLevel -> DEBU 002 Module 'error' logger enabled for log level: DEBUG
Error: Error getting endorser client chaincode: PEER_CONNECTIONERROR - Error trying to connect to local peer: grpc: timed out when dialing
/opt/gopath/src/github.com/hyperledger/fabric/peer/common/common.go:84 github.com/hyperledger/fabric/peer/common.GetEndorserClient
/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:222 github.com/hyperledger/fabric/peer/chaincode.InitCmdFactory
/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:91 github.com/hyperledger/fabric/peer/chaincode.chaincodeInstall
/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/install.go:46 github.com/hyperledger/fabric/peer/chaincode.installCmd.func1
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC
/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute
/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 main.main
/opt/go/src/runtime/proc.go:192 runtime.main
/opt/go/src/runtime/asm_amd64.s:2087 runtime.goexit

Usage:
  peer chaincode install [flags]

Global Flags:
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -o, --orderer string             Ordering service endpoint
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode

!!!!!!!!!!!!!!! Chaincode installation on remote peer PEER2 has Failed !!!!!!!!!!!!!!!!
{code}
{code}
docker logs -f peer2
2017-03-06 17:07:33.828 UTC [gossip/comm#-1] GossipStream -> ERRO 001 Authentication failed
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x758c05]

goroutine 50 [running]:
panic(0xc19280, 0xc420014050)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).VerifyByChannel(0xc420196900, 0xc420141488, 0x4, 0x8, 0xc42138b880, 0x338, 0x338, 0xc4213e4690, 0x46, 0x46, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:234 +0x225
github.com/hyperledger/fabric/peer/gossip/mcs.(*mspMessageCryptoService).Verify(0xc420196900, 0xc42138b880, 0x338, 0x338, 0xc4213e4690, 0x46, 0x46, 0xc4216aeec0, 0x36, 0x36, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/gossip/mcs/mcs.go:216 +0x1c0
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature.func1(0xc42138b880, 0x338, 0x338, 0xc4213e4690, 0x46, 0x46, 0xc4216aeec0, 0x36, 0x36, 0x5, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:827 +0xa6
github.com/hyperledger/fabric/protos/gossip.(*SignedGossipMessage).Verify(0xc420140900, 0xc42138b880, 0x338, 0x338, 0xc420140960, 0x411c05, 0xc420140950)
	/opt/gopath/src/github.com/hyperledger/fabric/protos/gossip/extensions.go:410 +0xcb
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).validateAliveMsgSignature(0xc4206e5080, 0xc420140900, 0xc42138b880, 0x338, 0x338, 0x338)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:831 +0xf2
github.com/hyperledger/fabric/gossip/gossip.(*discoverySecurityAdapter).ValidateAliveMsg(0xc4206e5080, 0xc420140900, 0xc4202917a0)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:797 +0x243
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage(0xc42008c870, 0xc420140900)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:423 +0x208
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm(0xc42008c870, 0xc420140770)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:301 +0xe6a
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages(0xc42008c870)
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:276 +0x200
created by github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService
	/opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:115 +0x50e
vagrant@hyperledger-devenv:v0.3.0-9a09ac0:/opt/gopath/src/github.com/hyperledger/fabric/e2e$ 

{code}


",,bmos299,denyeart,Nishi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmz3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,denyeart,Nishi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/17 10:48 PM;bmos299;Nishi is experiencing a seg fault when a peer that is *NOT* the leader is installing the chaincode.  This does not occur when all the peers in the org are designated as leaders.

Note the error on the Peer from the logs:
2017-03-06 17:07:33.828 UTC [gossip/comm#-1] GossipStream -> ERRO 001 Authentication failed
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x758c05]

Ratnakar also hit this issue. We will continue to work this issue.  Changing to highest. ;;;","09/Apr/17 8:17 PM;yacovm;I think this is a bug that has been fixed: https://gerrit.hyperledger.org/r/#/c/6887/
Can you reproduce?


;;;","12/Apr/17 11:27 AM;denyeart;[~yacovm]
I've re-assigned to fabric-gossip.  If you have high confidence that this has been fixed please mark as Done.  Tester can always re-open if they still see the issue.;;;","12/Apr/17 4:05 PM;yacovm;Nishi opened it. 
I think that this bug has been fixed, but the one that should close it/mark it as done is not me... ;;;","12/Apr/17 7:51 PM;denyeart;[~2020Nishi]
Do you still see the issue?  Please close if not.;;;","12/Apr/17 9:52 PM;Nishi;Problem has not been reproducible in the past test runs.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI delivery client not signing orderer messages,FAB-2665,15232,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,07/Mar/17 3:00 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Apr/17 11:33 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,CLI delivery client was getting away without properly signing messages to orderer. Not any more.,,denyeart,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7en:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 5:11 AM;denyeart;[~muralisr] Is this must-fix for 1.0.0?;;;","15/Apr/17 10:56 PM;mastersingh24;[~muralisr] isn't this done?;;;","15/Apr/17 11:35 PM;muralisr;[~mastersingh24] it is done by the checkin in Git. Marking as such;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add CI to Fabric repo for the e2e test and behave activation,FAB-2666,15233,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rameshthoomu,bmos299,bmos299,07/Mar/17 3:53 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 5:40 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"We need to ensure to add CI automation to the fabric repository for end-to-end testing.  The two end-to-end tests are the cli in the examples folder and Jeff's bootstrap behave test.  
This is critical to prevent regressions from coming into the repo.",,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmzb:",,,,,,Sprint 13 - Quality,,,,,,,,,,,,,,,,,,,,,,,,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 5:40 AM;rameshthoomu;Integrated behave, e2e (CLI), e2e (node) and e2e (java) tests are now integrated in CI.. CI runs these tests for every verify and merge commits.. For now, we are skipping voting on getting in-case if there is a failure on end-to-end, and Behave.. 

Once the tests are stable, will enable voting on these jobs.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Tool To Dynamically Generate configtx.yaml,FAB-2667,15234,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,dongming,bmos299,bmos299,07/Mar/17 4:36 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,31/Mar/17 2:31 AM,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,,,bmos299,TiantianGao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4vz:",,,,,,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,,,,,,,,,,,,,,,,,,,,,,bmos299,TiantianGao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/17 4:38 AM;bmos299;Dongming is working on a tool with Will to take inputs and generate an configtx.yaml.  This will be part of a larger task to have an all encompassing tool that uses, cryptogen, configtx, and docker-compose to spin-up a read to go network. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use blockstore iterator,FAB-2669,15236,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,kchristidis,kchristidis,07/Mar/17 5:20 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,18/Jul/17 5:06 AM,v1.0.0-beta,,,,v1.1.0,,,fabric-orderer,,,,0,ledger,performance,Release-planning-1.1,,,,,See https://gerrit.hyperledger.org/r/#/c/5929/10/orderer/ledger/file/fileledger.go@50 for context.,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpdj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jul/17 12:07 AM;kchristidis;[https://gerrit.hyperledger.org/r/#/c/11393/|https://gerrit.hyperledger.org/r/#/c/11393/2];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document fabric policies usage/creation,FAB-2670,15237,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,07/Mar/17 5:26 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxmzj:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e scripts need to be tweaked to accept proper Orderer MSP IDs,FAB-2671,15238,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,muralisr,muralisr,07/Mar/17 6:07 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,14/Apr/17 8:33 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,e2e_cli is using DEFAULT but has configs coded to OrdererMSP. Make it uniform by using OrdereMSP everywhere.,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmzr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix discovery test due to CI failures,FAB-2672,15239,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,07/Mar/17 6:28 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 4:41 PM,,,,,,,,,,,,0,,,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8252/console

Sometimes the sleep in the test isn't enough so when a comparison is being made, the peers do not have enough time to discover each other, and the result is the actual membership is is a subset of the expected.

	Error:		Not equal: []int{8611, 8612, 8613, 8614, 8616, 8618} (expected)
19:52:52 [32munit-tests_1  |[0m 			        != []int{8611, 8612, 8613, 8614} (actual)",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxmzz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix scaling issue in orderer-n-kafka-n env,FAB-2673,15240,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,07/Mar/17 6:38 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,22/Mar/17 12:45 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"A user of the `orderer-n-kafka-n` environment is not able to scale the number of orderer containers, because the `orderer` service has a hard-coded `container-name`.

This is the message the user is faced with:

{{WARNING: The ""orderer"" service is using the custom container name ""orderer"". Docker requires each container to have a unique name. Remove the custom name to scale the service.}}

References:

https://docs.docker.com/compose/compose-file/#containername",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2848,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5av:",,,,,,Sprint 13 - Consensus,Sprint 14 - Consensus,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
behave bootstrap test is failing in CI,FAB-2674,15241,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,latitiah,rameshthoomu,rameshthoomu,07/Mar/17 7:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,09/Mar/17 4:30 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"We have enabled behave test in sandbox CI and executed below steps

{code:java}
make peer && make peer-docker && make orderer-docker
cd bddtests
behave -k -D cache-deployment-spec

{code}

{code:java}
after_step: <steps.contexthelper.ContextHelper instance at 0x7f697cdef830>
    When user ""dev0Org0"" using cert alias ""dev0Org0App1"" requests to join channel using genesis block ""genesisBlockForMyNewChannel"" on peers with result ""joinChannelResult""                                 # steps/bootstrap_impl.py:259
      | Peer  |
      | peer0 |
before_step: <steps.contexthelper.ContextHelper instance at 0x7f697cdef830>
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 271, in step_impl
          signedProposal = endorser_util.signProposal(proposal=proposal, entity=user, signersCert=signersCert)
        File ""/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/bddtests/steps/endorser_util.py"", line 106, in signProposal
          entity.verifySignature(signature=signature, signersCert=signersCert, data=proposalBytes)
        File ""/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 189, in verifySignature
          vk = ecdsa.VerifyingKey.from_der(crypto.dump_publickey(crypto.FILETYPE_ASN1, signersCert.get_pubkey()))
      AttributeError: 'module' object has no attribute 'dump_publickey'
{code}

Attached are the pip modules installed in sandbox CI environment. Build reference # https://jenkins.hyperledger.org/sandbox/job/behave/11/consoleText",Jenkins CI environment,binhn,bmos299,cotofei,harsha544,latitiah,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Mar/17 7:51 AM;rameshthoomu;pip modules.txt;https://jira.hyperledger.org/secure/attachment/10562/pip+modules.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn07:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,bmos299,cotofei,harsha544,latitiah,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Mar/17 7:58 AM;binhn;Not sure if this is the source of the problem, but I noticed the py version from the log is back
docker-py version: 1.10.3
CPython version: 2.7.9

Our vagrant uses 
vagrant@hyperledger-devenv:v0.3.0-2bc9d96:/opt/gopath/src/github.com/hyperledger/fabric$ python --version
Python 2.7.12

I recommend to upgrade to 2.7.12 and try again;;;","07/Mar/17 8:22 AM;latitiah;I am getting a failure as well, albeit, the error occurs at a later point.

I am using python ver 2.7.12. I am running these tests in vagrant. The following are the versions of the key packages that I am using (there's more but this is a subset of the ones that were recently added):
b3j0f.aop (0.8.4)
b3j0f.utils (1.4.4)
behave (1.2.5)
crypto (1.4.1)
cryptography (1.7.1)
docker (2.0.2)
docker-compose (1.10.0)
docker-pycreds (0.2.1)
dockerpty (0.4.1)
ecdsa (0.13)
grpcio (1.2.0.dev0)
grpcio-tools (1.1.3)
Jinja (1.2)
Jinja2 (2.9.5)
pyOpenSSL (16.2.0)
pysha3 (1.0b1)
python-slugify (1.2.1)
PyYAML (3.10)
slugify (0.0.1)

{code:none}
And user ""dev0Org0"" sends proposal ""instantiateProposal1"" to endorsers with timeout of ""30"" seconds with proposal responses ""instantiateProposalResponses""                                               # steps/endorser_impl.py:109 30.003s
      | Endorser |
      | peer0    |
      | peer2    |
      Traceback (most recent call last):
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/endorser_impl.py"", line 122, in step_impl
          resultsDict =  dict(zip(endorsers, [respFuture.result() for respFuture in proposalResponseFutures]))
        File ""/usr/local/lib/python2.7/dist-packages/grpc/_channel.py"", line 299, in result
          raise self
      _Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.DEADLINE_EXCEEDED, Deadline Exceeded)>
{code}
;;;","07/Mar/17 12:59 PM;rameshthoomu;CI is using python 2.7.12

{code:java}
+ python --version
Python 2.7.12
{code}

I also, tried to execute this test with virtualenv setup but unable to proceed further.

{code:java}
virtualenv -p /usr/bin/python2.7 venv
source venv/bin/activate
{code}

below is the error 
{code:java}
Running virtualenv with interpreter /usr/bin/python2.7
+ source venv/bin/activate
++ deactivate nondestructive
++ unset -f pydoc
++ '[' -z '' ']'
++ '[' -z '' ']'
++ '[' -n /bin/bash ']'
++ hash -r
++ '[' -z '' ']'
++ unset VIRTUAL_ENV
++ '[' '!' nondestructive = nondestructive ']'
++ VIRTUAL_ENV=/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/venv
++ export VIRTUAL_ENV
++ _OLD_VIRTUAL_PATH='/opt/go/go1.7.linux.amd64/bin:/w/workspace/behave/gopath/bin:~/npm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games'
++ PATH='/w/workspace/behave/gopath/src/github.com/hyperledger/fabric/venv/bin:/opt/go/go1.7.linux.amd64/bin:/w/workspace/behave/gopath/bin:~/npm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games'
++ export PATH
++ '[' -z '' ']'
++ '[' -z '' ']'
venv/bin/activate: line 57: PS1: unbound variable
Build step 'Execute shell' marked build as failure
[ssh-agent] Stopped.
{code}

;;;","08/Mar/17 2:24 AM;latitiah;I have verified that I am receiving the same error whether executed in virtualenv or a VM.
`_Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.DEADLINE_EXCEEDED, Deadline Exceeded)>` 
;;;","08/Mar/17 2:32 AM;latitiah;The following were the steps that I executed in Ubuntu in order to successfully install and execute virtualenv. (above behave error still persists):
{code:none}
sudo pip install virtualenv
virtualenv -p /usr/bin/python2.7 behave_venv
export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python2.7
source behave_venv/bin/activate
pip install behave
pip install grpcio-tools
pip install ""pysha3==1.0b1""
pip install b3j0f.aop
pip install jinja2
pip install pyopenssl
pip install ecdsa
pip install python-slugify
pip install pyyaml
docker rm -f $(docker ps -aq)
make clean
make docker-clean
make peer
make orderer
make docker
cd bddtests/
behave -k -D cache-deployment-spec features/bootstrap.feature
{code}
;;;","08/Mar/17 7:17 AM;rameshthoomu;Successfully created virtualenv in Jenkins CI after multiple attempts.. Below is configruation


{code:java}
# Create virtual Environment to test behave tests
virtualenv -p /usr/bin/python2.7 venv
export PS1=""test""
export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python2.7
source venv/bin/activate
# Install all required python modules
pip install behave
pip install grpcio-tools
pip install ""pysha3==1.0b1""
pip install b3j0f.aop
pip install jinja2
pip install pyopenssl
pip install ecdsa
pip install python-slugify
pip install pyyaml
# Build Peer and images
make peer && make peer-docker && make orderer-docker
docker images | grep hyperledger
cd bddtests
behave -k -D cache-deployment-spec
#behave -k -D cache-deployment-spec features/bootstrap.feature
{code}
Below is the error log observed:


{code:java}
# steps/bootstrap_impl.py:247
before_step: <steps.contexthelper.ContextHelper instance at 0x7f262d8c7440>

      Assertion Failed: Expected 1 blocks, received 0
      Captured stdout:
      Will copy gensisiBlock over at this point 
      Returning GRPC for address: 0.0.0.0:32768
      dev0Org0 received reply: status: BAD_REQUEST
      , counter = 1
      Done
      Start and end = 0/0
      
      SeekInfo = start {
        specified {
        }
      }
      stop {
        specified {
        }
      }
      behavior: FAIL_IF_NOT_READY
     Got error: 404
      Done receiving block
{code}


https://jenkins.hyperledger.org/sandbox/job/fabric-verify-behave-x86_64/3/consoleText;;;","08/Mar/17 11:01 PM;bmos299;Latitia has determined it was due to the wait time on the instantiate.  She changed it from 30 to 90 seconds and the problem is corrected.  She has a PR submitted, https://gerrit.hyperledger.org/r/#/c/6979/. ;;;","09/Mar/17 12:03 AM;bmos299;Assigning to Latitia since she has the CR pushed for this bug. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need to atomically createLedger and commit genesis block,FAB-2676,15243,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,manish-sethi,denyeart,denyeart,07/Mar/17 10:24 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,25/Apr/17 11:02 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"Currently while peer joins the channel it accepts the configuration/genesis block. Afterwards peers use this block to create the ledger and initialize the entire infrastructure, the actions of ledger creating and block commit are separated. 

{code}
// CreateChainFromBlock creates a new chain from config block
func CreateChainFromBlock(cb *common.Block) error {
	cid, err := utils.GetChainIDFromBlock(cb)
	if err != nil {
		return err
	}
	var ledger ledger.PeerLedger
	if ledger, err = createLedger(cid); err != nil {
		return err
	}

	if err := ledger.Commit(cb); err != nil {
		peerLogger.Errorf(""Unable to get genesis block committed into the ledger, chainID %v"", cid)
		return err
	}

	return createChain(cid, ledger, cb)
}
{code}



createLedger() should accept the genesis block, so that the ledger creation and commit of genesis block can atomically succeed or fail.  A ledger should only be created if the corresponding genesis block is committed.

",,C0rWin,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-758,,,,,,,,,"1|hzx4jb:",,,,Unset,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,Unset,,,,,,,,,,,C0rWin,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/17 3:56 AM;denyeart;This will be implemented in three parts:

1) Ledger to provide CreateWithGenesisBlock() [~manish-sethi]
https://gerrit.hyperledger.org/r/#/c/7573 is ready for review.

2) Then committer code CreateChainFromBlock() switch from CreateLedger() to CreateWithGenesisBlock().  This will ensure ledger is created atomically with genesis block.  [~C0rWin]

3) After the switch is made, then CreateLedger() function will be removed so that there is no ambiguity... clients should always CreateWithGenesisBlock().  [~manish-sethi];;;","04/Apr/17 12:27 AM;denyeart;[~C0rWin] [~yacovm]
Part #1 was merged.  Do you want to proceed with part #2 this week?;;;","06/Apr/17 11:34 AM;denyeart;[~manish-sethi] Part #2 was merged. Ready for part #3 to remove CreateLedger().;;;","23/Apr/17 6:32 AM;ChristopherFerris;Where does this stand [~denyeart]?;;;","24/Apr/17 2:09 AM;denyeart;This work item was split into three changesets:
https://gerrit.hyperledger.org/r/#/c/7573/ MERGED
https://gerrit.hyperledger.org/r/#/c/7707/ MERGED
https://gerrit.hyperledger.org/r/#/c/7929/ IN REVIEW;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
generate protos into new java packages,FAB-2678,15245,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,08/Mar/17 2:14 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,03/Apr/17 5:11 AM,,,,,,,,fabric-peer,,,,0,quality,,,,,,,"Protos in shim still generate into {{org.hyperledger.protos}} package. This is a mismatch with packages used in golang, and the packages expected by the java sdk.",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-245,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn0f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need to have read write sets sent with EventHub blocks,FAB-2679,15246,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,rickr,rickr,08/Mar/17 2:48 AM,23/Jan/20 3:55 AM,28/Oct/23 2:59 AM,23/Jan/20 3:55 AM,v1.0.0,,,,Future,,,fabric-peer,,,,0,stale-item,,,,,,,"Need to have read write sets sent with EventHub blocks
[~pmullaney] [~Clayton Sims] [~jimthematrix]",,binhn,denyeart,mastersingh24,muralisr,pmullaney,praveen.j,rickr,Senthil1,sunit.versatile,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3134,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxn0n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,denyeart,mastersingh24,muralisr,pmullaney,praveen.j,rickr,Senthil1,sunit.versatile,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/17 2:57 AM;muralisr;Will work with [~wlahti] on this.

[~pmullaney] Understand you are out for a bit. The Java SDK (and maybe node too) wants the ability to look at RW set. We can revisit  this later at your convenience to make sure we are doing the right thing but for now we will send out the RW set with the Block event which was nulled out for efficiency.;;;","10/Mar/17 11:41 PM;wlahti;Lowering the priority of this item as there are ongoing discussions regarding how to handle this and it is not needed for v1.0.;;;","06/Apr/17 11:54 PM;wlahti;Moving this JIRA to v1.1 as it is not needed for v1.0, as mentioned above. ;;;","07/Apr/17 1:23 AM;rickr;[~Clayton Sims] I think this was a CLS requirement.;;;","12/Apr/17 11:46 AM;denyeart;[~binhn] [~mastersingh24] Can you provide your view? I think when we talked about this last month, that we decided that the solution in the future would be to have clients register for one of two kinds of events:
1) events with (potentially large) read write set, which is now proto-based and therefore easily parseable by SDK
2) events without read write set.  

Is that your understanding? I assume that would be for 1.1.  And what do you think the 1.0 behavior should be - events with or without read write set?

[~pmullaney]

;;;","13/Apr/17 9:17 AM;troyronda;There should be a way to restrict what's being sent back to clients. i.e., so that they only find out that their transaction has been committed.

And the SDKs shouldn't be depending on having this amount of information. Confidentiality is important and client should be considered less trusted.

I am curious what the client is doing with these RW sets coming back in an event?;;;","13/Apr/17 4:03 PM;Senthil1;For performing ETL from blockchain to outside DB for analytics, RW sets would be required. The record kept outside blockchain will not be used for any blockchain transaction. It will be purely used for analytics. For e.g., (i) can dump RW sets into a graph database and perform provenance queries. (ii) can dump RW sets into elastic search and do fuzzy queries to identify fraud in KYC use-cases. etc...

I implemented a process which receives block_event and convert the whole block data into a JSON. Any solution can take this JSON and transform/store on preferred DB store for analytics. For my use-case, I had to modify the fabric events code to pass whole RW set. 

The RW set was removed from Block mainly due to large size as a result of deploy transaction. Now, that we have changed the deployment model (install on each peer), we only store hash(chaincodeprogram) into the write set as given below: 
\{""reads"":[{""key"":""mycc1""}],""writes"":[{""key"":""mycc1"",""value"":""CgVteWNjMRIBMBoYChYIARIKEgVteWNjMRoBMBoGCgRpbml0IgRlc2NjKgR2c2NjMhcSCBIGCAESAggAGgsSCQoHREVGQVVMVA==""}]}

As Dave suggested, if we can give two kinds of events: (i) with read-set, and (ii) without read-set, it would help all use-cases. 
;;;","13/Apr/17 5:54 PM;denyeart;That's right [~Senthil1].  The events may be used for monitoring, auditing, or building a data store, in which case the write set is needed.

[~troyronda] Once side db is in place, the write sets in the block transaction would not include sensitive data.  Does that resolve your concern? It is assumed that members of the channel can see transaction data on that channel (either via api queries or block events).

Regardless, with the intent to provide an option of two kinds of events in the future (with and without rwsets), we need to determine the best default for 1.0.0, which would work well for 1.0.0 as well as enable a seamless transition to the ultimate future behavior.  I will therefore tag as High for 1.0.0 so that we don't miss this decision. [~binhn] [~mastersingh24];;;","13/Apr/17 8:06 PM;troyronda;[~denyeart] FYI: I consider this and the existing block events to be a *confidentiality hole* in fabric. It must not be the case that any client can snoop on all blocks or RW sets.

SideDB helps, of course, but doesn't fully address - not every data item goes into SideDB and even hashes are considered sensitive such that disclosure (outside the peers) is not allowed.

[~binhn] [~mastersingh24] [~denyeart] I urge you to plug this confidentiality hole by introducing configuration on which clients are allowed to be snooping on blocks or RW sets. Most clients should only need to know their transaction committed (by identifier, for example). (so I created FAB-3134).

p.s., is this feature so that someone doesn't need to setup/operate a peer to audit the ongoing block stream?;;;","13/Apr/17 9:31 PM;rickr;[~mastersingh24] [~denyeart] [~muralisr] [~wlahti]  [~pmullaney] So this is officially in and I can expect a change set soon that from the SDK I can give this to the client?
I _really need to know where to focus my effort on_. If this is not in then I don't want to be work on the SDK side on it.   I see it marked for v1.0.0 *but it unassigned.*
;;;","13/Apr/17 10:17 PM;troyronda;To cover fabric deployments with confidentiality requirements, we must be able to disable or restrict stuff like this. See above.

So:
Client SDKs must not rely on it being available, as there needs to be enforced policy rules on what clients can see.;;;","13/Apr/17 10:49 PM;denyeart;[~rickr] No decision yet - I tagged it as 1.0.0 High to ensure a decision is made as soon as possible.

[~troyronda]'s comments are broader than event content. It sounds like he doesn't even want channel members to access channel blocks/transactions via API (that were not submitted by that member).  I think this would be a fundamental change, but I defer to experts in access control area such as [~mastersingh24] [~binhn] [~ellaki] for their thoughts.;;;","14/Apr/17 12:43 AM;pmullaney;One potential stumbling block on this one is that the nodejs implementation of GRPC seems to have size limits on messages that get exceeded when these are included in the events. At least, that is what I ran into.;;;","14/Apr/17 12:57 AM;denyeart;[~pmullaney]
Can you provide more details? What is the max size? Is it configurable? Is there a ticket against nodejs GRPC?
I assume now that Instantiation is much smaller than Deploy used to be, we won't be blocked out of the gate.  But of course there is always a chance normal transactions are large.;;;","14/Apr/17 1:46 AM;pmullaney;Sorry David, this was a while back and not deemed an issue mainly because it aligned with stripping out the deploy content as was done in v0.6 and there didn't seem to be a need for clients to access rwset. Now that we have install and instantiate the sizes will certainly be much smaller.  I did try at the time to resolve/look into changing the max size, but did not get too far. I am now seeing an option that I did not see at the time for max message size that may solve the issue (max_receive_message_length default: 4k) but I also see a recent bug report that indicates setting it to unlimited is broken in released versions ( https://github.com/grpc/grpc/issues/10573 ).;;;","14/Apr/17 3:28 AM;pmullaney;I could address this on the fabric side with a configuration setting to send the rwset if enabled easily if that's what the consensus is? Default to disabled?;;;","14/Apr/17 3:41 AM;troyronda;[~denyeart] Yes - I am saying  that it cannot be the case that *any* client can access whatever blocks they want via API, event stream, ...

Access to such information needs to be authorized only to certain clients or have a mechanism to disable.

FAB-3151;;;","14/Apr/17 4:29 AM;praveen.j;I agree with [~denyeart]. I would like to have the RW set available with option to turn in on/off. What the client sees should ideally only be the events/RW sets of transactions they initiated.;;;","14/Apr/17 6:21 AM;binhn;[~troyronda] 
As we chatted on some channel, this is the state of 1.0, and it's relying on the application to do further filtering for end-user access. In general, ACL (detail level) has not been addressed.  What we have today is based on org: If an org has access to a channel, any identity issued by that org has access to the same channel. However, this is not cast in concrete; the MSP implementation can be replaced to change this behavior. Someone volunteer? Seriously, event filtering to individual listener is a complex task, especially when privacy matter. We need tcert with attributes.

Thanks for writing up [FAB-3151].;;;","16/Apr/17 11:56 PM;mastersingh24;I am marking this as a new feature as it is not actually a bug;;;","23/Jan/20 3:55 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,
Set the default ModPolicy to Admins,FAB-2680,15247,14897,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Mar/17 3:55 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:25 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn0v:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
panic when executing behave tests,FAB-2682,15249,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,08/Mar/17 5:40 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,07/Apr/17 4:05 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,"When running behave tests, there is always a panic message at the beginning of the run:
{code:none}
Output:

Error Message:
panic: Fatal error when setting up MSP from directory msp/sampleconfig: err Could not load a valid signer certificate from directory msp/sampleconfig/signcerts, err Could not read directory open msp/sampleconfig/signcerts: no such file or directory, err msp/sampleconfig/signcerts


goroutine 1 [running]:
panic(0xb0f240, 0xc4201f7630)
	/opt/go/src/runtime/panic.go:500 +0x1a1
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:107 +0x67a
{code}",,latitiah,Lin-YiTang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn13:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,latitiah,Lin-YiTang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode not found intermittent error when all peers in e2e test were NOT leaders ,FAB-2683,15250,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,Nishi,Nishi,08/Mar/17 8:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 1:33 AM,v1.0.0,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,"It appears that Gossip is sometimes failing to share chaincode with the other non-leader peer in the organization. 

Commit Level: *30a0e216c50cb8cf6c1423566d1e4c899e24205f*
Test Env: 1 orderer, 2 kafka brokers, 4 peers, 2 Orgs (org1:peer0/peer1, org2: peer2/peer3), 1 channel, 1 chaincode

Test Case:
{code}
Create one channel 'myc1'
Join peer0, peer1, peer2, peer3 on 'myc1'
Install chaincode on peer0, peer1, peer2, peer3
Instantiate chaincode on peer0
sleep 20sec(after instantiate)
for each channel
  for each chaincode
    on each peer
       Query initial values
        Invoke 
       Query after invoke
{code}

*Scenario1 - FAILURE case*:
In docker-compose.yaml following value was set 
{code}
 CORE_PEER0_GOSSIP_ORGLEADER=true
 CORE_PEER1_GOSSIP_ORGLEADER=false
 CORE_PEER2_GOSSIP_ORGLEADER=true
 CORE_PEER3_GOSSIP_ORGLEADER=false
{code} 

Observations after 10 RUNS:

It passed once on all peers
It failed on peer1 8 times. - 7 when could not find chaincode, once when query results did not match expected results after invoke.
It failed on peer3 - once when query results did not match expected results after invoke.

When it could not find chaincode, following error message was seen 
{code}
docker logs -f cli

Error: Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for mycc0 - transaction not found mycc0/myc0
{code}

{code}
docker logs -f peer1

vagrant@hyperledger-devenv:v0.3.0-927ff1c:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e$ docker logs -f peer1
2017-03-07 21:38:52.835 UTC [lccc] Invoke -> ERRO 001 ChaincodeId: mycc0 does not exist on channel: myc0(err:chaincode not found mycc0)
2017-03-07 21:38:52.937 UTC [lccc] Invoke -> ERRO 002 ChaincodeId: mycc0 does not exist on channel: myc0(err:chaincode not found mycc0)
vagrant@hyperledger-devenv:v0.3.0-927ff1c:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e$
{code}

*Comparison Scenario2 - SUCCESS case*:
When all peers are set as ORG_LEADERS, all the 10 runs passed successfully on all peers.",,bmos299,gennadyl,Nishi,Ratnakar,yacovm,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/17 4:33 AM;Ratnakar;docker-compose-with-externalendpoint.yaml;https://jira.hyperledger.org/secure/attachment/10571/docker-compose-with-externalendpoint.yaml","09/Mar/17 2:57 AM;Ratnakar;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10569/docker-compose.yaml","09/Mar/17 2:50 AM;Ratnakar;docker-logs.txt;https://jira.hyperledger.org/secure/attachment/10568/docker-logs.txt","09/Mar/17 1:25 AM;yacovm;out.log;https://jira.hyperledger.org/secure/attachment/10566/out.log","08/Mar/17 9:28 AM;Ratnakar;script.sh;https://jira.hyperledger.org/secure/attachment/10564/script.sh",,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn1b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,gennadyl,Nishi,Ratnakar,yacovm,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/17 9:17 AM;Ratnakar;
Scripts is availble in this repo https://github.com/asararatnakar/perf-test
the docker-compose has been changed to have all the peers as 
{panel}
 - CORE_PEER_GOSSIP_ORGLEADER=true
{panel}

How to run the script
{code}
* git clone https://github.com/hyperledger/fabric
* cd fabric
* make docker
* cd fabric/examples
* git clone https://github.com/asararatnakar/perf-test.git e2e
* cd e2e
./network_setup.sh restart <channel name> <total channels> <total chaincodes> <total endorsers>
./network_setup.sh restart mychannel 10 10 4
{code}

Changing the non anchor peers orgleader flag to ""false"" causes the issue
*- CORE_PEER_GOSSIP_ORGLEADER=false*


[~2020Nishi] ran the script attached to this jira, please replace *scripts/script.sh* with this file, to reproduce this
 issue.;;;","08/Mar/17 11:19 PM;bmos299;Changing to highest.;;;","08/Mar/17 11:53 PM;gennadyl;One question - what exactly written in docker-compose.yaml

CORE_PEER0_GOSSIP_ORGLEADER=true
CORE_PEER1_GOSSIP_ORGLEADER=false
CORE_PEER2_GOSSIP_ORGLEADER=true
CORE_PEER3_GOSSIP_ORGLEADER=false
 look wrong. In each peer section should be written CORE_PEER_GOSSIP_ORGLEADER flag, not CORE_PEER_AND_NUMBER_GOSSIP_ORGLEADER



;;;","09/Mar/17 12:41 AM;Ratnakar;we still see the issue on commit level *babdeee87981ac92af13ed5d767294588fa89cfd*


Hi [~gennadyl], Thanks for the pointer.
We haven't used the peer number in our docker-compose, we gave that number here to indicate what value is passed to what peer.

You can refer our docker-compose file here https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml

https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L61
https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L81
https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L102
https://github.com/asararatnakar/perf-test/blob/master/docker-compose.yaml#L124





A gist of error log here
{code}
===================== Querying on PEER1 on xyz0/mycc1... ===================== 
Attempting to Query PEER ...3 secs
Attempting to Query PEER ...6 secs
Attempting to Query PEER ...9 secs
Attempting to Query PEER ...12 secs
Attempting to Query PEER ...15 secs
Attempting to Query PEER ...18 secs
Attempting to Query PEER ...21 secs
Attempting to Query PEER ...24 secs
Attempting to Query PEER ...27 secs
Attempting to Query PEER ...30 secs
Attempting to Query PEER ...33 secs
Attempting to Query PEER ...37 secs
Attempting to Query PEER ...40 secs
Attempting to Query PEER ...43 secs
Attempting to Query PEER ...46 secs
Attempting to Query PEER ...49 secs
Attempting to Query PEER ...52 secs
Attempting to Query PEER ...55 secs
Attempting to Query PEER ...58 secs
Attempting to Query PEER ...62 secs
Attempting to Query PEER ...65 secs
Attempting to Query PEER ...68 secs
Attempting to Query PEER ...71 secs
Attempting to Query PEER ...75 secs
Attempting to Query PEER ...78 secs
Attempting to Query PEER ...81 secs
Attempting to Query PEER ...84 secs
Attempting to Query PEER ...87 secs
Attempting to Query PEER ...90 secs
Attempting to Query PEER ...93 secs
Attempting to Query PEER ...96 secs
Attempting to Query PEER ...99 secs
Attempting to Query PEER ...102 secs

2017-03-08 15:36:50.616 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-03-08 15:36:50.618 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-03-08 15:36:50.618 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-03-08 15:36:50.620 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0AAF070A550803220478797A302A4066...796363311A0A0A0571756572790A0161 
2017-03-08 15:36:50.620 UTC [msp] Sign -> DEBU 005 Sign: digest: D558A110D9F9565EC2178938BA0F79E0C898944CECBE0A356201CE566CAEF9D4 
Error: Error endorsing query: rpc error: code = 2 desc = failed to obtain cds for mycc1 - transaction not found mycc1/xyz0
Usage:
  peer chaincode query [flags]

Flags:
  -x, --hex   If true, output the query value byte array in hexadecimal. Incompatible with --raw
  -r, --raw   If true, output the query value as raw bytes, otherwise format as a printable string

Global Flags:
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -o, --orderer string             Ordering service endpoint
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode

!!!!!!!!!!!!!!! Query result on PEER1 is INVALID !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================

Total execution time 261 secs

{code};;;","09/Mar/17 1:09 AM;yacovm;any chance of a log dump of all 4 peers? (with a logging level of debug);;;","09/Mar/17 1:25 AM;yacovm;Also - I ran examples/e2e-cli/network__setup.sh up with orgleader on non-anchor peers set to true, and on anchor peers set to false, and I didn't see any problems:
 [^out.log] ;;;","09/Mar/17 2:25 AM;yacovm;I also see that peers 3, 2 are configured to have peer0 as the bootstrap peer.
bootstrap peers of a peer should only be peers from the organization of the peer.;;;","09/Mar/17 2:57 AM;Ratnakar;Just now we reproduced the problem using commit , with the following steps.
We create 10 channel creation transaction files.
{panel}
./generateCfgTrx.sh testchannel 10
{panel}

Command to launch network and run the tests on CLI container:
{panel}
CHANNEL_NAME=testchannel CHANNELS_NUM=10 CHAINCODES_NUM=2 ENDORSERS_NUM=4 docker-compose up
{panel}

We are attaching the logs file  [^docker-logs.txt]  we used, and the docker-compose file [^docker-compose.yaml] too.
Observe in the docker-compose file that it shows that peers 1 and 3 are not leader peers. And note the configtx.yaml file shows that our anchor peers are 0 and 2, which are same as leader peers.;;;","09/Mar/17 3:06 AM;yacovm;I think there might be a bug, but in the meantime this trick should fix it:
For each peer, put the following env var:
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0:7051


EDIT: not a bug ;;;","09/Mar/17 3:06 AM;Ratnakar;[~yacovm] As per your sugegstion 
{panel}
I also see that peers 3, 2 are configured to have peer0 as the bootstrap peer.
bootstrap peers of a peer should only be peers from the organization of the peer.
{panel}

I changed peer3 to have peer2 as the bootstrap peer and removed the bootstrap peer flag *CORE_PEER_GOSSIP_BOOTSTRAP* from peer2 section.
However I still see the same issue.
;;;","09/Mar/17 4:04 AM;yacovm;what about the external endpoint? did you configure that? can you post the yaml file of the docker-compose please?;;;","09/Mar/17 4:21 AM;Ratnakar;It didn't make any difference and issue is seen even after adding the configuration *CORE_PEER_GOSSIP_EXTERNALENDPOINT* for each peer
{code}
peer0:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0:7051
          ---

peer1:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1:7051
          ---
peer2:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer2:7051
          ---

peer3:
          ---
          - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer3:7051
          ---

{code}
The docker compose file  [^docker-compose-with-externalendpoint.yaml] that been used with external endpoint configuration changes

Issue is easily reproducible with the below command.
{panel}
./network_setup.sh restart testchannel 10 5 4
{panel};;;","09/Mar/17 6:24 AM;yacovm;Hmmm, it seems that at least for p0 and p1, the identities are the same, no?


yacovm@fabric1:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e/crypto/peer$ openssl x509 -in peer0/localMspConfig/signcerts/cert.pem  -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            58:83:3b:bb:10:25:48:23:2a:15:20:20:a0:b1:09:d5:38:bc:f3:72
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=fabric-ca-server
        Validity
            Not Before: Mar  1 04:29:00 2017 GMT
            Not After : Jan 28 12:29:00 2018 GMT
        Subject: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=admin
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9c:48:b5:07:d6:d7:37:da:f8:bd:ab:32:d2:e4:
                    28:35:50:7c:d0:c2:34:03:0f:58:db:5e:90:2b:07:
                    bc:04:40:6f:e8:6c:5d:d7:aa:89:fb:91:6f:fd:b9:
                    99:3c:fd:d2:c1:c4:10:b0:6a:a1:79:0a:94:7a:b3:
                    50:73:84:dc:6d
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                BC:D3:BA:CF:88:CB:42:37:B5:13:CB:68:DC:F7:E1:DF:C1:1D:5F:34
            X509v3 Authority Key Identifier:
                keyid:E3:3B:29:59:7A:F2:02:61:67:74:9A:2D:CC:B4:6F:7B:12:0C:60:F4

            X509v3 Subject Alternative Name:
                DNS:ubuntu
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:20:41:aa:f0:9d:bc:1c:9b:24:c3:96:4b:c1:d7:f4:
         60:6c:90:0f:15:f0:ab:c4:d5:2f:91:16:6f:71:39:46:b9:36:
         02:21:00:9d:a8:c6:01:bc:ea:2e:46:25:03:8c:13:fb:71:39:
         22:42:46:62:69:5a:a7:5e:5a:a4:6f:74:25:ab:35:ae:9b
yacovm@fabric1:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e/crypto/peer$ openssl x509 -in peer1/localMspConfig/signcerts/cert.pem  -text -noout
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            58:83:3b:bb:10:25:48:23:2a:15:20:20:a0:b1:09:d5:38:bc:f3:72
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=fabric-ca-server
        Validity
            Not Before: Mar  1 04:29:00 2017 GMT
            Not After : Jan 28 12:29:00 2018 GMT
        Subject: C=US, ST=North Carolina, O=Hyperledger, OU=Fabric, CN=admin
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:
                    04:9c:48:b5:07:d6:d7:37:da:f8:bd:ab:32:d2:e4:
                    28:35:50:7c:d0:c2:34:03:0f:58:db:5e:90:2b:07:
                    bc:04:40:6f:e8:6c:5d:d7:aa:89:fb:91:6f:fd:b9:
                    99:3c:fd:d2:c1:c4:10:b0:6a:a1:79:0a:94:7a:b3:
                    50:73:84:dc:6d
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Key Usage: critical
                Certificate Sign
            X509v3 Basic Constraints: critical
                CA:FALSE
            X509v3 Subject Key Identifier:
                BC:D3:BA:CF:88:CB:42:37:B5:13:CB:68:DC:F7:E1:DF:C1:1D:5F:34
            X509v3 Authority Key Identifier:
                keyid:E3:3B:29:59:7A:F2:02:61:67:74:9A:2D:CC:B4:6F:7B:12:0C:60:F4

            X509v3 Subject Alternative Name:
                DNS:ubuntu
    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:20:41:aa:f0:9d:bc:1c:9b:24:c3:96:4b:c1:d7:f4:
         60:6c:90:0f:15:f0:ab:c4:d5:2f:91:16:6f:71:39:46:b9:36:
         02:21:00:9d:a8:c6:01:bc:ea:2e:46:25:03:8c:13:fb:71:39:
         22:42:46:62:69:5a:a7:5e:5a:a4:6f:74:25:ab:35:ae:9b
;;;","09/Mar/17 6:57 AM;bmos299;I did a diff between crypto peer0,peer1,peer2,peer3. For this test they are all the same....which is a config issue by the enduser.  That being said, I can EASILY customers doing the same thing.  This was very difficult to debug.  I am hoping we can add code in gossip to ensure the PKI-ID does not match its own and it does we take appropriate actions, cut an ERROR message, stop talking to this peer? etc.    Thoughts are appreciated.  ;;;","09/Mar/17 7:00 AM;bmos299;This is a RAS/Serviceability issue.;;;","09/Mar/17 7:06 AM;yacovm;It is possible to add a warning message in a case where an alive message is received with an endpoint which is different than the peers endpoint (and the pki-id is the peer's pki-id).
However- a separate JIRA issue needs to be opened for that.;;;","09/Mar/17 10:45 PM;bmos299;Ratnakar Jira Task: https://jira.hyperledger.org/browse/FAB-2710 for this RAS item.

;;;","10/Mar/17 10:43 PM;bmos299;Nishi,  Can you please retest and verify the warning message is issued: 

Yacov added the following error message:


{code:java}
d.logger.Error(""Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself:"", m.GossipMessage)
{code}


With Gerrit CR:
commit 3ad3e43d2e5bee8c2a43e6bd319cda08c1f658ba
Author: YACOVM <YACOVM@il.ibm.com>
Date:   Thu Mar 9 10:41:28 2017 +0200

    [FAB-2710] Gossip: Log WARN upon bad network config

    This commit adds a log warning in case a peer detects peers
    with the same PKI-ID as itself but with different endpoints.
    The only reason that this can happen is that someone configured different
    peers with the same identity.

https://gerrit.hyperledger.org/r/#/c/7065
;;;","11/Mar/17 1:02 AM;Nishi;Tested on commit level: *32959205a7ae8fc499a764c8b0e567f000f3a846*

2 channels, 10 chaincodes , sending query/invoke/query on all 4 peers. crypto material on all the 4 peers kept the same to reproduce error message.

Found the following message in all peer logs:
{code}
2017-03-10 15:10:25.633 UTC [gossip/discovery#172.18.0.8:7051] handleAliveMessage -> * ERRO 001 Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself: * tag:EMPTY alive_msg:<membership:<endpoint:""peer3:7051"" pki_id:""W98\007\357r\305j\207\n\357g:\265\200p\3706\303n\232('\305\032\242\261,\373\033/C"" > timestamp:<inc_number:1489158625569456942 seq_num:1 > identity:""\n\007Org1MSP\022\254\006-----BEGIN -----\nMIICOjCCAeCgAwIBAgIUWIM7uxAlSCMqFSAgoLEJ1Ti883IwCgYIKoZIzj0EAwIw\naDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK\nEwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt\nY2Etc2VydmVyMB4XDTE3MDMwMTA0MjkwMFoXDTE4MDEyODEyMjkwMFowXTELMAkG\nA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl\ncmxlZGdlcjEPMA0GA1UECxMGRmFicmljMQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqG\nSM49AgEGCCqGSM49AwEHA0IABJxItQfW1zfa+L2rMtLkKDVQfNDCNAMPWNtekCsH\nvARAb+hsXdeqifuRb/25mTz90sHEELBqoXkKlHqzUHOE3G2jczBxMA4GA1UdDwEB\n/wQEAwICBDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBS807rPiMtCN7UTy2jc9+Hf\nwR1fNDAfBgNVHSMEGDAWgBTjOylZevICYWd0mi3MtG97Egxg9DARBgNVHREECjAI\nggZ1YnVudHUwCgYIKoZIzj0EAwIDSAAwRQIgQarwnbwcmyTDlkvB1/RgbJAPFfCr\nxNUvkRZvcTlGuTYCIQCdqMYBvOouRiUDjBP7cTkiQkZiaVqnXlqkb3QlqzWumw==\n-----END -----\n"" > 

2017-03-10 15:10:50.607 UTC [gossip/discovery#172.18.0.8:7051] handleAliveMessage -> *ERRO 002 Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself*: tag:EMPTY alive_msg:<membership:<endpoint:""peer3:7051"" pki_id:""W98\007\357r\305j\207\n\357g:\265\200p\3706\303n\232('\305\032\242\261,\373\033/C"" > timestamp:<inc_number:1489158625569456942 seq_num:14 > > 
2017-03-10 15:11:15.614 UTC [gossip/discovery#172.18.0.8:7051] handleAliveMessage -> *ERRO 003 Bad configuration detected: Received AliveMessage from a peer with the same PKI-ID as myself*: tag:EMPTY alive_msg:<membership:<endpoint:""peer3:7051"" pki_id:""W98\007\357r\305j\207\n\357g:\265\200p\3706\303n\232('\305\032\242\261,\373\033/C"" > timestamp:<inc_number:1489158625569456942 seq_num:25 > > 

{code};;;",,,,,,,,,,,,,,,,,,,,,
Unable to build docker images - cannot find package /common/configvalues/msp,FAB-2687,15254,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,wlahti,rameshthoomu,rameshthoomu,08/Mar/17 2:48 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,08/Mar/17 11:20 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Observed below error while building docker images with *make docker* or *make peer-docker* etc.. Issue observed after this commit merge.
*fabric git commit:* 5cfe56525e8f0f2d07019f6fce97dd891ed93de1 

{code:java}
(hyp) vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com/hyperledger/fabric$ git pull
Updating 46a086b..5cfe565
Fast-forward
 msp/mgmt/mgmt.go               | 24 ++++++++++++++++++++++--
 msp/mgmt/mgmt_test.go          | 56 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 protos/utils/proputils_test.go | 73 +++++++++++++++++++++++++++++++++++++------------------------------------
 3 files changed, 115 insertions(+), 38 deletions(-)
 create mode 100644 msp/mgmt/mgmt_test.go
{code}

*Fabric Commit #*
{code:java}
(hyp) vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com/hyperledger
/fabric$ git log --oneline -n1
5cfe565 Merge ""Fix peer panic at initiate proposal with no MSPs""

{code}

*Error Log:*
{noformat}
(hyp) vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com/hyperledger
/fabric$ make peer-docker
Building build/docker/bin/peer
msp/mgmt/mgmt.go:26:2: cannot find package ""github.com/hyperledger/fabric/common/configvalues/msp"" in any of:
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric/common/configvalues/msp (vendor tree)
        /opt/go/src/github.com/hyperledger/fabric/common/configvalues/msp (from $GOROOT)
        /opt/gopath/src/github.com/hyperledger/fabric/common/configvalues/msp (from $GOPATH)
Makefile:152: recipe for target 'build/docker/bin/peer' failed
make: *** [build/docker/bin/peer] Error 1
(hyp) vagrant@hyperledger-devenv:v0.3.0-398e366:/opt/gopath/src/github.com/hyperledger/fabric$
{noformat}

CI Build Reference# https://jenkins.hyperledger.org/sandbox/job/end-end-cli-x86/12/consoleText",Vagrant & Jenkins CI (Sandbox),bmos299,rameshthoomu,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn1z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,rameshthoomu,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Mar/17 9:44 PM;wlahti;Are you sure you have all the latest changes in your local repository? https://gerrit.hyperledger.org/r/#/c/6613/ renamed that package to /common/config/msp and was merged yesterday. ;;;","08/Mar/17 9:47 PM;wlahti;Actually, Binh fixed this after merging my change via https://gerrit.hyperledger.org/r/#/c/7003/.;;;","08/Mar/17 11:20 PM;bmos299;Ramesh verified. Marking as Done. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Validate blocks on delivery from ordering service and during state transfer.,FAB-2688,15255,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,08/Mar/17 5:13 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,02/Apr/17 11:20 PM,,,,,,,,,,,,0,,,,,,,,"Currently delivery service client pulls blocks from the ordering service and gossip them to other peer without actually validating them. Exactly same issue exists also in in gossip state transfer layer, where anti entropy procedure receives blocks via peer-to-peer communication and commits them directly into the ledger without actually verifying them.

Need to add blocks verification in both of these cases leveraging MessageCryptoService implementation, VerifyBlock API.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxn27:",,,,,,Sprint 13 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Limit attempt number when connecting to bootstrap peers in gossip,FAB-2689,15256,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,08/Mar/17 5:32 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 4:41 PM,,,,,,,,,,,,0,,,,,,,,"In gossip, when a peer starts up- it tries to connect to the bootstrap set indefinitely. 
This needs to be limited up to a finite number.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn2f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Seek prints no message what channel it can't find ,FAB-2691,15258,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,rickr,rickr,08/Mar/17 9:46 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 10:43 PM,v1.0.0,,,,v1.0.0,,,fabric-orderer,,,,0,v1.0,,,,,,,"Provided log show channel foo being used ok.   At bottom notice NO mention of any error or debug statements on order showing which channel it thinks it should be doing the seek for .. nothing in the message returned also provides that information. What's there is just provided by the SDK not from the ""wire""

Java error

INFO: [io.grpc.internal.ManagedChannelImpl-31] Created with target localhost:7050
2017-03-08 07:34:54 ERROR Chain:730 - Bad newest block expected status 200  got  404, Chain foo
org.hyperledger.fabric.sdk.exception.TransactionException: Bad newest block expected status 200  got  404, Chain foo
	at org.hyperledger.fabric.sdk.Chain.getConfigurationBlock(Chain.java:714)





FYI [~Clayton Sims] [~bmos299]",,jyellick,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4201,,,,,,"08/Mar/17 9:49 PM;rickr;fab-2691.20170308074848.log;https://jira.hyperledger.org/secure/attachment/10565/fab-2691.20170308074848.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn2v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Mar/17 10:03 PM;rickr;For reference here is how the call is set up in java

Orderer orderer = orderers.iterator().next();

            Ab.SeekPosition seekPosition = Ab.SeekPosition.newBuilder()
                    .setNewest(Ab.SeekNewest.newBuilder().build())
                    .build();

            Ab.SeekPosition seekPositionStop = Ab.SeekPosition.newBuilder()
                    .setNewest(Ab.SeekNewest.newBuilder().build())
                    .build();

            Ab.SeekInfo seekInfo = Ab.SeekInfo.newBuilder()
                    .setStart(seekPosition)
                    .setStop(seekPositionStop)
                    .setBehavior(Ab.SeekInfo.SeekBehavior.BLOCK_UNTIL_READY)
                    .build();

            ChannelHeader seekInfoHeader = createChannelHeader(HeaderType.DELIVER_SEEK_INFO, name, {color:red} /// Name here is the channel{color}
                    txContext.getTxID(), txContext.getEpoch(), null);

            SignatureHeader signatureHeader = SignatureHeader.newBuilder()
                    .setCreator(txContext.getIdentity().toByteString())
                    .setNonce(txContext.getNonce())
                    .build();

            Header seekHeader = Header.newBuilder()
                    .setSignatureHeader(signatureHeader.toByteString())
                    .setChannelHeader(seekInfoHeader.toByteString())
                    .build();

            Payload seekPayload = Payload.newBuilder()
                    .setHeader(seekHeader)
                    .setData(seekInfo.toByteString())
                    .build();

            Envelope envelope = Envelope.newBuilder().setSignature(txContext.signByteString(seekPayload.toByteArray()))
                    .setPayload(seekPayload.toByteString())
                    .build();

            DeliverResponse[] deliver = orderer.sendDeliver(envelope);



Block newestBlock;
            if (deliver.length < 1) {
                throw new TransactionException(format(""newest block for channel %s fetch bad deliver missing status block only got blocks:%d"", name, deliver.length));

            } else {

                DeliverResponse status = deliver[0];
                if (status.getStatusValue() != 200) { * {color:red} //////////   we print out the channel here on this error >>>>>>>>>>>>>>{color}*
                    throw new TransactionException(format(""Bad newest block expected status 200  got  %d, Chain %s"", status.getStatusValue(), name));
                } else {
                    if (deliver.length < 2) {
                        throw new TransactionException(format(""newest block for channel %s fetch bad deliver missing genesis block only got %d:"", name, deliver.length));
                    } else {

                        DeliverResponse blockresp = deliver[1];
                        newestBlock = blockresp.getBlock();
                    }
                }
            };;;","08/Mar/17 10:04 PM;rickr;I just moved this to medimum priority because I found the error in my code. :)  But I'm leaving it open because I do think we need better message returned and logged on the orderer !  ;;;","11/Mar/17 3:23 AM;jyellick;Could you take a look at the improved logging, and close this if it meets your needs?;;;","13/Mar/17 10:43 PM;rickr;[~jyellick] It's an improvement and I'll close but in the long run it'll be you providing support so more importantly _does it meet your needs_ ? :);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remaining proto style bugs,FAB-2692,15259,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 12:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 4:22 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"There are a few pieces of proto which escaped the pass of proto style fixing in FAB-2026

Notably, the MSP identities.proto is still in the msp directory.

It also contains mis-styled field names.

msp_principal.proto contains an inappropriate upper case field.

policies.proto contains an inappropriate upper case field.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn33:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move identities.proto to protos/msp,FAB-2693,15260,15259,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 12:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 4:22 AM,,,,,,,,,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn3b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix assorted upper case proto fields,FAB-2694,15261,15259,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 12:15 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 4:19 AM,,,,,,,,,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn3j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move msp_principal.proto to protos/msp,FAB-2695,15262,15259,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 12:39 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,12/Apr/17 4:22 AM,,,,,,,,,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxn3r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Default chain broken because of missing HashingAlgorithm,FAB-2696,15264,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 1:07 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:22 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnlj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen crash when multiple anchor peers supplied,FAB-2697,15265,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 1:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:23 AM,,,,,,,,,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnlr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Group mod policy resolved to wrong policy manager,FAB-2699,15267,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 3:02 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 3:23 AM,,,,,,,,,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnm7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve test coverage in github.com/hyperledger/fabric/common/config,FAB-2700,15268,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 3:14 AM,21/Jul/18 3:53 AM,28/Oct/23 2:59 AM,11/Mar/17 3:22 AM,,,,,,,,,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnmf:",,,,Unset,,,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
stub.GetTxTimestamp() returns nil,FAB-2701,15269,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,kletkeman,kletkeman,09/Mar/17 3:43 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,31/Mar/17 12:58 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,contract,iot,shim,smart,stub,timestamp,"A fix was made to the v0.5 Fabric many months ago so that IoT contracts would be able to get access to the stable and accurate transaction timestamp. This is critical to the functioning of IoT contracts as we need to be able to securely tie an asset's world state to the blockchain entry that created it.

In v1, this function inexplicably returns nil, nil -- losing a key function for IoT smart contracts.

There is a lot of work going into broadcast networks for timestamping of keys (although it is not obvious to the uninitiated that this will create identical timestamps on every peer as would the use of the original transaction timestamp being set once).

What we need is a stable and accurate timestamp that is available at endorsement time so that the entire read/write set is timestamped with this value and so that we can store the time in our asset states.

We are hamstrung until we have this facility.

Clarification: We would like:
1: chaincode can get timestamp and store it in world state for future use (since r/w set created by endorser, timestamp would need to be assigned prior to or during endorsement by whichever agent was responsible for defining the tx timestamp)

2: corollary is that timestamp matches transaction timestamp as stored in block

Discussions: We've had discussion on the rocketchat chaincode-dev and fabric-sdk-node groups and a possible stopgap was discussed where the SDK could set a timestamp and that could be propagated for now as the TX timestamp. This works well even if / when we go to sending parallel endorsements without an anchor. However, the flaw is that clients cannot be counted on to have decent accuracy and synchronization. 

The ideal solution is to have a time service set the timestamp for any TXID, thus allowing each peer to ask for it by TXID and getting the same value. This requires access to a time server, but does not require any level of time synchronization between peers (unless logs are to be synchronized).",,denyeart,kletkeman,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Mar/17 3:38 AM;kletkeman;image-2017-03-08-13-38-04-699.png;https://jira.hyperledger.org/secure/attachment/10570/image-2017-03-08-13-38-04-699.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnmn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,kletkeman,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/17 4:23 AM;denyeart;[~muralisr] Would it be possible for chaincode shim GetTxTimestamp() to pull the timestamp from the proposal header (which SDK also uses for the ultimate tran proposal header);;;","13/Mar/17 1:58 AM;muralisr;[~kim@letkeman.net] [~denyeart] yes, we should expose the timestamp to the chaincode. The {{Tx}} in the {{GetTxTimestamp}} makes it clear we are referring to the Proposal timestamp (Proposal.Header.ChannelHeader.Timestamp field).

If/when we expose a timestamp exposed by the system, we could create a new {{GetSystemTimestamp}} API.;;;","13/Mar/17 6:18 AM;kletkeman;Yes, the tx timestamp has been used by our chaincode ever since Binh put the function into the stub. But in v1, the changes in protocol caused someone to toss that code, although the stub interface stayed. The proposal timestamp is presumably going to be used for all copies of the transaction in the chain, so it is perfect for this use case.;;;","16/Mar/17 9:10 PM;wlahti;Pushed a CR to gerrit: https://gerrit.hyperledger.org/r/#/c/7235/ It is currently awaiting code review.;;;","31/Mar/17 12:21 AM;wlahti;The CR has been merged into master. ;;;","31/Mar/17 12:47 AM;kletkeman;I just saw that as I have decided to reset my entire environment to the latest and start again from scratch with the e2e tests ... thanks so much for that fix, it is critical for us and I really appreciate the timely update ...
;;;","31/Mar/17 12:58 AM;muralisr;[~kim@letkeman.net] thanks to you too for reporting and [~wlahti] for the fix.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Include the consortium name for a channel in the channel config,FAB-2702,15270,15340,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 4:06 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Apr/17 4:56 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnmv:",,,,,,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose committed config envelope,FAB-2703,15271,15340,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,09/Mar/17 5:26 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Apr/17 4:56 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnn3:",,,,,,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Behave bootstrap tests are failing in CI - argument of type 'NoneType' is not iterable,FAB-2705,15273,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jeffgarratt,rameshthoomu,rameshthoomu,09/Mar/17 7:07 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,10/Mar/17 3:40 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Observed behave bootstrap tests are failing on fabric latest commits *(Fabric# ba1d142b83e39bf5c5ae7a8f2c019f36bcf00f77)*

Create virtual environment as mentioned in FAB-1141

{code:java}
cd bddtests
behave -k -D cache-deployment-spec
{code}

{code:java}
before_step: <steps.contexthelper.ContextHelper instance at 0x7f73d96f5440>
      Traceback (most recent call last):
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/venv/local/lib/python2.7/site-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/venv/local/lib/python2.7/site-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 219, in step_impl
          bootstrap_util.broadcastCreateChannelConfigTx(context=context, composeService=orderer, chainId=channelId, user=user, configTxEnvelope=configTxEnvelope)
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 1001, in broadcastCreateChannelConfigTx
          dataFunc=dataFunc)
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 178, in broadcastMessages
          abStub = self.getABStubForComposeService(context, composeService)
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 198, in getABStubForComposeService
          channel = getGRPCChannel(*bdd_test_util.getPortHostMapping(context.compose_containers, composeService, 7050))
        File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_test_util.py"", line 95, in getPortHostMapping
          if port_protocol in container.ports:
      TypeError: argument of type 'NoneType' is not iterable
     Captured stdout:
      Will copy gensisiBlock over at this point
after_step: <steps.contexthelper.ContextHelper instance at 0x7f73d96f5440>
{code}

*Build Reference#* https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/326/console",Jenkins CI & non-vagrant,bmos299,passkit,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnnj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,passkit,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Mar/17 3:40 AM;bmos299;The behave test, bootstrap feature runs (behave -k -D cache-deployment-spec features/bootstrap.feature) successfully on: 
commit 99c8a68af053490bd9be8837f39a421139057579

Thanks for the help Jeff.  We already know on windows, you have to do the following before building the peer docker image you must comment out the file check in 
diff --git a/core/chaincode/platforms/golang/platform.go b/core/chaincode/platforms/golang/platform.go
index 5430c67..67acd4a 100644
--- a/core/chaincode/platforms/golang/platform.go
+++ b/core/chaincode/platforms/golang/platform.go
@@ -145,9 +145,9 @@ func (goPlatform *Platform) ValidateDeploymentSpec(cds *pb.ChaincodeDeploymentSp
//
// Anything else is suspect in this context and will be rejected
// --------------------------------------------------------------------------------------
- if header.Mode&^0100666 != 0 {
- return fmt.Errorf(""Illegal file mode detected for file %s: %o"", header.Name, header.Mode)
- }
+ //if header.Mode&^0100666 != 0 {
+ // return fmt.Errorf(""Illegal file mode detected for file %s: %o"", header.Name, header.Mode)
+ //}
}

return nil 


// Acceptable flags:
// ISREG == 0100000
// -rw-rw-rw- == 0666
//
// Anything else is suspect in this context and will be rejected
// --------------------------------------------------------------------------------------
// if header.Mode&^0100666 != 0 {
// return fmt.Errorf(""Illegal file mode detected for file %s: %o"", header.Name, header.Mode)
// }
}

return nil
};;;","07/May/17 6:06 PM;passkit;This issue still exists for me on OSX 10.12.4.  Build f4b3ef0f30521e09a619bc1cc0f3490197509329

 
{code:java}
   And the user ""dev0Org0"" creates a ConfigUpdate Tx ""configUpdateTx1"" using cert alias ""dev0Org0App1"" using signed ConfigUpdateEnvelope ""createChannelConfigUpdate1""                                                                   # steps/bootstrap_impl.py:192 0.078s
    And the user ""dev0Org0"" using cert alias ""dev0Org0App1"" broadcasts ConfigUpdate Tx ""configUpdateTx1"" to orderer ""orderer0"" to create channel ""com.acme.blockchain.jdoe.Channel1""                                                     # steps/bootstrap_impl.py:207 0.001s
      Traceback (most recent call last):
        File ""/Library/Python/2.7/site-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/Library/Python/2.7/site-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 212, in step_impl
          bootstrap_util.broadcastCreateChannelConfigTx(context=context,certAlias=certAlias, composeService=orderer, chainId=channelId, user=user, configTxEnvelope=configTxEnvelope)
        File ""/Users/Nick/Documents/go/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 1039, in broadcastCreateChannelConfigTx
          dataFunc=dataFunc)
        File ""/Users/Nick/Documents/go/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 181, in broadcastMessages
          abStub = self.getABStubForComposeService(context, composeService)
        File ""/Users/Nick/Documents/go/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 202, in getABStubForComposeService
          ipAddress, port = bdd_test_util.getPortHostMapping(context.compose_containers, composeService, 7050)
        File ""/Users/Nick/Documents/go/src/github.com/hyperledger/fabric/bddtests/steps/bdd_test_util.py"", line 95, in getPortHostMapping
          if port_protocol in container.ports:
      TypeError: argument of type 'NoneType' is not iterable
      
      Captured stdout:
      Will copy gensisiBlock over at this point
{code}
 ;;;","08/May/17 2:16 AM;passkit;Getting exactly the same output on Debian 8.7 also.  ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
end-to-end (Java SDK) tests are failing on latest commits ,FAB-2706,15274,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,tuand,rameshthoomu,rameshthoomu,09/Mar/17 7:17 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,10/Mar/17 1:39 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"observed end-to-end (java sdk) tests are failing on latest commits;

*Steps to reproduce:*

Step1: Clone fabric, fabric-ca and fabric-sdk-java repositories with below commit levels
Step2: Spinup the docker-composer network and setup all pre-conditions
Step3: Execute `mvn clean install -DskipITs=false -Dmaven.test.failure.ignore=false`

{noformat}
|FABRIC_COMMIT=23872a2 ===> FABRIC_ CA_COMMIT=cd8802b =====> JAVA_SDK_COMMIT_LEVEL=0d0a3b8
{noformat}


{code:java}

21:53:16 2017-03-08 21:53:16 ERROR Chain:164 - New chain foo error. StatusValue 400. Status BAD_REQUEST
21:53:16 org.hyperledger.fabric.sdk.exception.TransactionException: New chain foo error. StatusValue 400. Status BAD_REQUEST
{code}

*Build Reference:* https://jenkins.hyperledger.org/sandbox/job/e2e_java_x86_64/30/console
*Dockerlogfile:*https://jenkins.hyperledger.org/sandbox/job/e2e_java_x86_64/30/artifact/gopath/src/github.com/hyperledger/fabric-sdk-java/src/test/fixture/src/dockerlogfile.log
",,bmos299,rameshthoomu,tuand,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnnr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,rameshthoomu,tuand,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/17 7:49 AM;tuand;https://gerrit.hyperledger.org/r/#/c/7029/;;;","10/Mar/17 1:39 AM;bmos299;Ramesh has verified this problem is fixed. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI should find orderers from channel config TX,FAB-2707,15275,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Honglei,binhn,binhn,09/Mar/17 7:27 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,07/May/17 1:00 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The current CLI added an -o flag requiring the orderer endpoint. This is unnecessary since it already has the channel, from which it can figure out the orderers.

peer chaincode query -o $ORDERER_IP:7050 -C $CHANNEL_NAME -n mycc -c '{""Args"":[""query"",""a""]}'

peer chaincode invoke -o $ORDERER_IP:7050  -C $CHANNEL_NAME -n mycc -c '{""Args"":[""invoke"",""a"",""b"",""10""]}'

peer chaincode instantiate -o $ORDERER_IP:7050 -C $CHANNEL_NAME -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -P ""OR	('Org0MSP.member','Org1MSP.member')""",,binhn,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4un:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 2:33 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7299/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI Install should not require orderer endpoint,FAB-2708,15276,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,binhn,binhn,09/Mar/17 7:29 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,22/Mar/17 11:36 PM,,,,,,,,,,,,0,,,,,,,,"The install CLI below should not require the orderer since it only need to put the chaincode package on the peer.

peer chaincode install -o $ORDERER_IP:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 ",,binhn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnnz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix CouchDB retry logic,FAB-2709,15277,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,09/Mar/17 9:22 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,19/Apr/17 2:41 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"FAB-2437 and FAB-2600 added retry logic for CouchDB interactions.
To account for cases when peer and couchdb start at same time, 2 minutes of retries are done.  This does not work well for chaincode execution though.  Need to fix it such that peer startup verification retries more times than endorsement/commit interactions with CouchDB, ideally configurable.

Note that invalid index specified in _find API returns 500 error:
{""error"":""unknown_error"",""reason"":""Unknown Error: mango_idx :: {no_usable_index,no_index_matching_name}""} .

500 errors like this should ideally not be retried more than once, but most 500 errors are for unexpected errors that deserve a retry. There is not a good way to differentiate between the 500 errors that deserve a retry and those that don't, so I think we need to be conservative and retry for any 500 error.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx4kv:",,,,,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Warning/Error messages in gossip to ensure the PKI-ID does not match its own,FAB-2710,15278,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,yacovm,Ratnakar,Ratnakar,09/Mar/17 9:37 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,10/Mar/17 7:51 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,"This task is to address the issue pointed here in FAB-2683

{code}
Add Warning messages in case where an alive message is received with an endpoint that is different than the peers endpoint (and the pki-id is the peer's pki-id).
{code}

more details can be obtained from this conversation here https://jira.hyperledger.org/browse/FAB-2683?focusedCommentId=21401&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-21401

",,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxno7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable TLS for the peer,FAB-2714,15282,14183,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,09/Mar/17 11:00 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Mar/17 9:15 PM,,,,,v1.0.0-alpha1,,,fabric-peer,,,,0,,,,,,,,"Need to enable the peer to run with TLS enabled.

There are several steps involved here:

1) When the peer starts, it needs to read the peer.tls.* config items from core.yaml and use them to start a GRPC server with TLS enabled

2) If we decide to enable mutual TLS (which gossip would like to have), we'll need to dynamically update the trusted client roots based on the MSP information for each channel the peer has joined",,binhn,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2728,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnov:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Mar/17 11:16 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7075/;;;","11/Mar/17 1:04 AM;binhn;Let's hold #2 (mutual tls) after beta. We want to get the simple path going first.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable successful Java chaincode invoke response,FAB-2718,15286,15227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,10/Mar/17 5:45 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,07/Apr/17 11:27 PM,,,,,,,,fabric-peer,,,,0,quality,,,,,,,Invoking Java chaincode does not work.,,bsmita,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnpj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bsmita,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Error: No such container: cli while running e2e CLI tests in CI,FAB-2721,15289,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,10/Mar/17 7:52 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Mar/17 5:41 AM,,,,,,,,,,,,0,,,,,,,,"Observed "" Error: No such container: cli "" error while running e2e CLI tests in CI environment. CLI container is not starting up with in the sleep 30 sec's in CI script.. It's inconsistently failing.. ",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnq7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 5:41 AM;rameshthoomu;Fix has been provided and now we see end-to-end (CLI) tests are running.. Closing this issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove old deprecated ChainCreationPolicies reference.,FAB-2723,15291,13709,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,10/Mar/17 1:11 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/Apr/17 4:57 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnqn:",,,,,,Sprint 10 - consensus,Sprint 11 - consensus,Sprint 12 - consensus,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,1.0,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB - max number of connections issue during stress test,FAB-2724,15292,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,balaji.viswanathan,denyeart,denyeart,10/Mar/17 10:07 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,25/Apr/17 7:53 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"The issue of peer refusing to accept Txns from chaincode, followed by Txn timeout was due to couchdb hitting a max of 2048 connections. Couch uses mochiweb an erlang http library for its chttpd component.
 
The parameters in couch configuration for this are server_options http://docs.couchdb.org/en/2.0.0/config/http.html#httpd/server_options and defaults to max of 2048 connections. You can modify this to something like following and restart couch container.
 
/opt/couchdb/etc/local.ini
server_options = [{backlog, 128}, {acceptor_pool_size, 16}, {max, 4096}]
 
Doubling this will approximately double the number of Txn which go through, but not solve the problem completely.
 
The test was a script invoking 'initMarble' in a tight loop to insert 1000 marbles into couch. After around 200 or so invokes, the peer stopped responding and peer started timing out for all new transactions. The peer is stuck in a REST call to couch, all external REST to couchdb also wait/hang at this point. The number of connections on couchdb from peer hits ~2048 (verified using netstat) and doesn't clearup for quite a while. After mins when peer is idle, the #connections start coming down (ESTABLISHED -> TIMEWAIT). The client can then resubmit to peer.
 
golang net/http uses a Transport which does connection pooling (at transport level). And also golang http-client uses HTTP/1.1 for all requests to Couch. However, the number of connections keep increasing and most connections go into TIME_WAIT state before being released. If HTTP/1.1 is used and connections are reused, then we should not see this issue. likely that is not the case. net/http retains 100 idle connection in its pool, but i am not sure if its being exercised in this case.
 
Though this is likely a *stress* test scenario, i think a initial load of assets might have similar behaviour and/or when we have multiple chaincodes/channels on a peer. So, it's worth investigating.",,AdnanChoudhury,balaji.viswanathan,ChristopherFerris,denyeart,fredbi,lfeagan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3427,,,,,,,,,,,,,,,,FAB-3368,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx4lr:",,,,,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,balaji.viswanathan,ChristopherFerris,denyeart,fredbi,lfeagan,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Mar/17 5:09 PM;lfeagan;Hi, here are my initial thoughts, and I may be way off base here, so apologies if I am.

In looking at the documentation for the method http.Client.do() I see the following:
// If the returned error is nil, the Response will contain a non-nil
// Body which the user is expected to close. If the Body is not
// closed, the Client's underlying RoundTripper (typically Transport)
// may not be able to re-use a persistent TCP connection to the server
// for a subsequent ""keep-alive"" request.

Inspecting the code in handleRequest, I didn't see any calls to close the resp.Body after calling iouitl.ReadAll(resp.Body).

Specifically, I think there may be a condition in which the defer resp.Body.Close() is not called.

The canonical form looks like this:
http.client.do(someRequest>)
if err != nil {
	// handle error
}
defer resp.Body.Close()
body, err := ioutil.ReadAll(resp.Body)

But I believe in some cases we have the form, split out across two methods, which makes it hard to see that we have this form.
http.client.do(someRequest>)
body, err := ioutil.ReadAll(resp.Body)
if err != nil {
	return nil, err
}
defer resp.Body.Close()

;;;","13/Apr/17 7:20 AM;denyeart;On another stress test, [~AdnanChoudhury] sees the problem mentioned here:
http://stackoverflow.com/a/19006050/7821698

Setting req.Close=true after NewRequest() in couchdb.go solved Adnan's problem, and would likely solve the problem in the Description here as well.

Re-assigning to Adnan to check in the fix.

[~balaji.viswanathan] let us know if you had other ideas.;;;","13/Apr/17 2:55 PM;AdnanChoudhury;Setting req.Close=true after NewRequest() in couchdb.go makes sure that http connections are closed after the request is carried out.  While conducting Ledger performance test (https://gerrit.hyperledger.org/r/#/c/6793/) with couchDB, explicit closing limits the no. of connections in ESTABLISHED state to to 20 (expected minimum),  while no. of connections in TIME_WAIT state i.e. closed-and-waiting state remains  high. (~4500)
without this explicit close, no. of connections in ESTABLISHED state is much higher (soars to ~900 and stalls).
;;;","15/Apr/17 5:13 PM;balaji.viswanathan;req.Close disable connection reuse. The correct way to do this is twofold

1. Handle all codepaths as mentioned in #1 (Lance's comment)
2. Ensure that the resp body is consumed completely before closing the connection. Only then are connections reused (refer: http://stackoverflow.com/questions/17948827/reusing-http-connections-in-golang)

For instance, the defer call could be 
defer func() { io.Copy(ioutil.Discard, resp.Body); resp.Body.Close() }()

Also, we should consider bumping up the MaxIdleConnsPerHost, default is set to 2 while MaxIdleConns is 100. In our case, peer does not connect to any other hosts.
;;;","23/Apr/17 9:58 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8003/;;;","23/Apr/17 11:38 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/8317/ will replace https://gerrit.hyperledger.org/r/#/c/8003/.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB performance and stress optimizations,FAB-2725,15293,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,10/Mar/17 10:13 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,06/Dec/17 4:25 PM,,,,,v1.1.0,,,fabric-ledger,,,,0,,,,,,,,Interactions with CouchDB are currently done individually.  Need to switch to using bulk operations to get optimal performance from CouchDB.  Need to performance test and stress test.,,denyeart,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6421,FAB-6442,,,,,,,,,,,,,,,FAB-6330,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7k7:",,,,Unset,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v10 PTE: add latency test support,FAB-2727,15295,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,11/Mar/17 12:58 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,29/Mar/17 12:14 AM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,Add latency support to PTE: send the next invoke when the event message of ledger update is received,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzx4w7:",,,,,,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement TLS usage in support of bootstrap feature,FAB-2728,15296,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,C0rWin,jeffgarratt,jeffgarratt,11/Mar/17 1:05 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,16/Mar/17 5:49 AM,,,,,,,,fabric-orderer,fabric-peer,,,0,quality,Security,,,,,,Need to incorporate TLS usage in support of bootstrap feature.  ,,jeffgarratt,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2714,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnqv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jeffgarratt,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 1:08 AM;jeffgarratt;Currently when enabling TLS in the peers, gossip does NOT appear to connect to other bootstrapped configured peers.  The peer does appear to be listening with TSL auth enabled.  Will verify asap.  Also, have not yet configured orderer for TLS.  Not sure if this is ready.  Will verify with [~jyellick];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document the configtx,FAB-2729,15297,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,11/Mar/17 1:07 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,29/Mar/17 3:55 AM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnr3:",,,,Unset,,,,,,,,,,,,,,2.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e_perf 100 ch 2 cc fails to keep ledgers in sync on diff peers at ch7cc1p3,FAB-2730,15298,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,11/Mar/17 1:35 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,28/Apr/17 1:34 AM,v1.0.0,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"Caveat: Not sure yet if this is a problem with resources on laptop testbed, or with fabric software. My vagrant ssh terminals responded to some basic commands, but hung forever when tried to clean or make. Opening bug to track and retest.

Found with fabric commit a976c50f. To reproduce, follow instructions
    https://github.com/ratnakar-asara/e2e
to get the e2e_perf tool and execute test with 100 channels, 2 chaincodes, 4 peers:
    $  ./network_setup.sh  restart  testchan  100  2  4
Total execution time 2909 secs on Lenovo 540 laptop, using vagrant.
Tests succeeded on channels 0-6, two chaincodes on each, all 4 peers, and then
- the FIRST query on peer 3 fails, which means:
- the invoke on peer 0 reduced counter to 990, and was confirmed on peer 0 (for channel 7 chaincode 1),
- the invoke on peer 1 reduced counter to 980, and was confirmed on peer 1,
- the invoke on peer 2 reduced counter to 970, and was confirmed on peer 2,
- the first query on peer 3 (even after waiting 100 secs) still showed the value as 980.
",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 1:36 AM;scottz;fail_100_2_on_ch7cc1p3_peer3logsNextMorning.txt;https://jira.hyperledger.org/secure/attachment/10574/fail_100_2_on_ch7cc1p3_peer3logsNextMorning.txt","11/Mar/17 1:36 AM;scottz;fail_100_2_on_ch7cc1p3_stdout.txt;https://jira.hyperledger.org/secure/attachment/10573/fail_100_2_on_ch7cc1p3_stdout.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnrb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/17 1:34 AM;scottz;Due to resource constraints (no swap space) on the vagrant environment running all the docker containers, it appears that the instantiation of chaincode1 on the 7th channel on peer 3 did succeed after awhile and we were able to query it to get a value (980), but the latest transaction had not yet been delivered to that peer. Since this test and a larger test (100 channels with 10 chaincodes each) passed successfully using vLaunch machine with more resources, we can close this issue due to test environment resource constraints.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add support for a ""nopkcs11"" build tag",FAB-2731,15299,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,vpaprots,smithbk,smithbk,11/Mar/17 1:36 AM,27/Jul/19 9:22 PM,28/Oct/23 2:59 AM,27/Jul/19 9:22 PM,,,,,Future,,,fabric-peer,,,,1,,,,,,,,"This is the 2nd part of https://jira.hyperledger.org/browse/FAB-2684 which allows someone to build any executable that uses bccsp without PKCS11 support, by using a ""-tags nopkcs11"" on the go get/build/test line.

This is only needed if https://github.com/miekg/pkcs11/pull/47 is not accepted.",,mastersingh24,smithbk,vladyslavmunin,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-203,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnrj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,smithbk,vladyslavmunin,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/May/17 10:42 PM;vpaprots;nopkcs11 tag was added by Gari. I would like to rework it, since it was more of a stopgap.

Memory hint: this needs to consider pluggable BCCSPs.;;;","27/Jul/19 9:22 PM;mastersingh24;no longer an issue anyway;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable TLS usage in bootstrap feature,FAB-2732,15300,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jeffgarratt,jeffgarratt,jeffgarratt,11/Mar/17 1:52 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,16/Mar/17 5:50 AM,,,,,,,,fabric-orderer,fabric-peer,fabric-quality,,0,quality,Security,,,,,,Enable TLS usage in the bootstrap feature wrt to Peers and Orderers as well as the behave (SDK).,,jeffgarratt,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnrr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jeffgarratt,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make dist-clean all fails on test,FAB-2733,15301,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,justatad,justatad,11/Mar/17 2:06 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,10/Jun/17 1:20 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-quality,,,,2,,,,,,,,"Hi - I am unable to build Fabric, it fails with the following error:

Failing scenarios:
features/bootstrap.feature:263 Bootstrap a development network with 4 peers (2 orgs) and 1 orderer (1 org), each having a single independent root of trust (No fabric-ca, just openssl) – @1.1 Orderer Options

0 features passed, 1 failed, 2 skipped
0 scenarios passed, 1 failed, 24 skipped
21 steps passed, 1 failed, 249 skipped, 0 undefined
Took 0m14.204s
make: *** [behave] Error 1",OS X Sierra,ChristopherFerris,hiteshjoshi1,jeffgarratt,justatad,latitiah,rameshthoomu,scottz,tiennv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnrz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,hiteshjoshi1,jeffgarratt,justatad,latitiah,rameshthoomu,scottz,tiennv,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/17 5:16 AM;binhn;Looking into Makefile and try to build peer and orderer separately. There is an effort to overhaul the build procedure https://jira.hyperledger.org/browse/FAB-2999;;;","14/Apr/17 9:29 AM;ChristopherFerris;[~justatad] just ran with latest master and while it did fail, it failed on a different feature test. Are you still having the same problem?;;;","23/Apr/17 11:25 PM;ChristopherFerris;[~justatad] have you followed the set up steps in the bddtests/README.md? https://github.com/hyperledger/fabric/tree/master/bddtests;;;","23/Apr/17 11:26 PM;ChristopherFerris;It may also be a duplicate of https://jira.hyperledger.org/browse/FAB-3216;;;","26/Apr/17 2:01 PM;hiteshjoshi1;I have the exact same issue. 
Build Environment
Base Machine: Windows 8.1 Professional
Vagrant VM - Ubuntu 
Python 2.7.12;;;","28/Apr/17 11:04 PM;rameshthoomu;[~hiteshjoshi1] [~justatad] I see behave tests are working as expected on fabric commit # *fc268dabd0c5d93ba5e7a5cbdc1e02c366b5827a*.. Please find below the build log.

{code:java}
00:10:31.522 context.failed = False
00:10:31.522 1 feature passed, 0 failed, 2 skipped
00:10:31.522 1 scenario passed, 0 failed, 24 skipped
00:10:31.522 71 steps passed, 0 failed, 211 skipped, 0 undefined
00:10:31.522 Took 0m50.277s
{code}

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/634/consoleFull..
;;;","27/May/17 7:49 AM;ChristopherFerris;This is a weird one, but the directions to install a virtual env don't seem to resolve the problem. The tests pass in some environments and not in others. Finding the difference is the key. ;;;","02/Jun/17 5:59 AM;latitiah;Assigning to Jeff since this seems to be a behave test failure depending on the environment.;;;","02/Jun/17 6:32 AM;ChristopherFerris;Note that [~jeffgarratt] and I spent better part of an afternoon on this. Very puzzling. I still cannot get a certain test to run.

FWIW here is my environment:

alabaster (0.7.10)

appdirs (1.4.3)

asn1crypto (0.22.0)

b3j0f.aop (0.8.4)

b3j0f.utils (1.4.4)

Babel (2.4.0)

behave (1.2.5)

certifi (2017.4.17)

cffi (1.10.0)

chardet (3.0.3)

cryptography (1.8.2)

docutils (0.13.1)

ecdsa (0.13)

enum34 (1.1.6)

futures (3.1.1)

grpcio (1.3.5)

grpcio-tools (1.3.5)

idna (2.5)

imagesize (0.7.1)

ipaddress (1.0.18)

Jinja2 (2.9.6)

MarkupSafe (1.0)

ordereddict (1.1)

packaging (16.8)

parse (1.8.0)

parse-type (0.3.4)

pip (9.0.1)

protobuf (3.3.0)

pycparser (2.17)

Pygments (2.2.0)

pyOpenSSL (17.0.0)

pyparsing (2.2.0)

pysha3 (1.0b1)

python-slugify (1.2.4)

pytz (2017.2)

PyYAML (3.12)

requests (2.17.3)

setuptools (35.0.2)

six (1.10.0)

snowballstemmer (1.2.1)

Sphinx (1.6.2)

sphinx-rtd-theme (0.2.4)

sphinxcontrib-websupport (1.0.1)

typing (3.6.1)

Unidecode (0.4.20)

urllib3 (1.21.1)

wheel (0.29.0)

 ;;;","02/Jun/17 11:50 PM;jeffgarratt;[~justatad] Hey Mathew, can you connect with me on rocket chat ([https://chat.hyperledger.org/channel/fabric)] when you get a chance and we can reproduce and see if we can figure it out?

My username is jeffgarratt;;;","08/Jun/17 1:17 AM;jeffgarratt;I have not yet heard from [~justatad].  If this is still an issue please let me know.;;;","08/Jun/17 10:30 PM;justatad;Hi all - I've switched to using Docker images of Fabric V1 Alpha so this is no longer an issue for me.

Thanks for your help,

Matthew;;;","10/Jun/17 1:21 AM;jeffgarratt;Good to hear!!! [~justatad], going to mark this as done.  Feel free to reopen if need be.;;;","24/Sep/17 9:25 PM;tiennv;[~justatad] I am using v1.0.1 and v1.0.2 and I still get the problem.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,
Make gRPC logging configurable,FAB-2734,15302,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,yacovm,yacovm,11/Mar/17 3:05 AM,21/Jul/18 3:53 AM,28/Oct/23 2:59 AM,03/May/17 5:33 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"There is a gRPC logger that is silenced by default because it logs messages when peers disconnect:
{quote}2017/03/10 20:01:22 grpc: addrConn.transportMonitor exits due to: grpc: the connection is closing
2017/03/10 20:01:22 grpc: addrConn.transportMonitor exits due to: grpc: the connection is closing
2017/03/10 20:01:22 grpc: addrConn.transportMonitor exits due to: grpc: the connection is closing{quote}

The silencing line is found in https://github.com/hyperledger/fabric/blob/master/gossip/util/logging.go#L57

Sometimes, however- this information is useful for debugging issues.
I suggest having this gRPC logger silenced upon demand by a viper configuration.

[~jimthematrix] [~binhn] [~C0rWin]",,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,";02/May/17 9:16 PM;mastersingh24;5400",,,,7200,1800,5400,75%,7200,1800,5400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxns7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/May/17 2:38 AM;mastersingh24;bumping this up because without this debugging GRPC / connection issues is difficult;;;","02/May/17 9:21 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8835/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup common config mocks,FAB-2735,15303,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,11/Mar/17 3:35 AM,21/Jul/18 3:53 AM,28/Oct/23 2:59 AM,27/Apr/17 4:57 AM,,,,,Future,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnsf:",,,,Unset,,,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documenting All the Component Configuration Options,FAB-2736,15304,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,nickgaski,bmos299,bmos299,11/Mar/17 4:18 AM,10/Jan/20 1:55 AM,28/Oct/23 2:59 AM,10/Jan/20 1:55 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,"The configuration options need to be described in detail, core.yaml, order.yaml,  The fabric-ca documentation needs its own story.  ",,bmos299,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnsn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/20 1:55 AM;joe-alewine;Will cover this under new Operations/Deployment Guides currently in the works.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer TLS config not populated from orderer yaml,FAB-2738,15306,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,11/Mar/17 4:59 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,29/Mar/17 3:32 AM,,,,,,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnt3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot start peer: CRIT 001 Could not find genesis.yaml,FAB-2739,15307,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,hycind,hycind,11/Mar/17 5:24 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,10/Apr/17 8:34 PM,v0.6,,,,WON'T FIX,,,fabric-peer,,,,0,,,,,,,,"Attempted to download and build fabric on a CentOS guest (64 bit) running on Virtual Box on a Windows 7 64 bit machine.
Code was downloaded from gerrit.hyperledger.org.
Go version 1.8
Docker Version: 17.03.0-ce

Error details:
{noformat}
2017-03-10 09:03:54.437 EST [common/configtx/test] 1 -> CRIT 001 Could not find genesis.yaml, try setting PEER_CFG_PATH, ORDERER_CFG_PATH, or GOPATH correctly
panic: Could not find genesis.yaml, try setting PEER_CFG_PATH, ORDERER_CFG_PATH, or GOPATH correctly

goroutine 1 [running]:
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panicf(0xc4201987e0, 0xccd7fa, 0x5d, 0x0, 0x0, 0x0)
        /root/go-dev/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:194 +0x11e
github.com/hyperledger/fabric/common/configtx/test.init.1()
        /root/go-dev/src/github.com/hyperledger/fabric/common/configtx/test/helper.go:72 +0x3c7
github.com/hyperledger/fabric/common/configtx/test.init()
        /root/go-dev/src/github.com/hyperledger/fabric/common/configtx/test/helper.go:113 +0xb1
github.com/hyperledger/fabric/peer/channel.init()
        /root/go-dev/src/github.com/hyperledger/fabric/peer/channel/join.go:140 +0x91
main.init()
        /root/go-dev/src/github.com/hyperledger/fabric/peer/main.go:148 +0x82
{noformat}

Was able to recreate the error in another CentOS guest, that was built from scratch and not cloned. The entire putty session right from login, installation of packages and the error is captured in a text file and uploaded in the files section.

The procedure used to create the virtual machine guest is uploaded as a PDF document.
","Windows 7 64 bit host machine
CentOS 64 bit running as a guest on Virtual Box",ChristopherFerris,Clayton Sims,hycind,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 5:24 AM;hycind;Procedure- VBox.pdf;https://jira.hyperledger.org/secure/attachment/10575/Procedure-+VBox.pdf","11/Mar/17 5:24 AM;hycind;PuTTY Session output.txt;https://jira.hyperledger.org/secure/attachment/10576/PuTTY+Session+output.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxntb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,Clayton Sims,hycind,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 5:36 AM;Clayton Sims;What version?  I noticed you put affected version 0.6?;;;","11/Mar/17 6:02 AM;hycind;The Makefile in the fabric folder has this..

{noformat}
PROJECT_NAME   = hyperledger/fabric
BASE_VERSION   = 0.6.2-preview
IS_RELEASE     = false
{noformat}
... and I did a {{git checkout v0.6}};;;","10/Apr/17 8:35 PM;ChristopherFerris;We have no plans to address bugs in v0.6 as it has been deprecated with the release of v1.0-alpha;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The blockchain go example02 app contains bad blockchain code,FAB-2740,15308,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,mdozturk,mdozturk,11/Mar/17 6:09 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Apr/17 9:10 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"example02 imitates a payment, where the app decreses A's value and increases B's value by the same amount. Invoke does some error checking, loads A, loads B, decreases A by X and increases B by X. Saves A. Saves B.

The problem with the current code is that the two save actions are not atomic: save to A could succeed and the save to B could fail. The code should be updated to make the save atomic, either they both happen or neither happens.
",,mastersingh24,mdozturk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxntj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,mdozturk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 9:09 PM;mastersingh24;This actually does end up being ""atomic"" :

1) Chaincode execution only simulates the result and then produces a read/write set which is returned to the client in the proposal response

2) The client then sends the endorsed proposal as a transaction to the ordering service

3) Ordering service delivers the transaction (in a batch) to the peer(s)

4) Peers run validation logic and then commit the entire transaction (i.e. the write set)

Therefore since both ""writes"" are part of the same transaction this is effectively ""atomic""

Going to mark as DONE.

[~mdozturk] Please add any additional comments / questions if I am misunderstanding what you are asking;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error while instansiation of ChainCode,FAB-2741,15309,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisr,ManjeetGambhir,ManjeetGambhir,11/Mar/17 6:42 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Mar/17 5:30 AM,,,,,v1.0.0,,,fabric-peer,,,,0,v1.0,,,,,,,"Trying to install and instantiate , go chain-codes from chain-code path , install steps successfully executed but while instantiate docker container for chaincode, giving error.
Attaching client and peer logs.I haven't seen  any error in orderer container logs.
",,ManjeetGambhir,muralisr,rickr,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 6:41 AM;ManjeetGambhir;Client.txt;https://jira.hyperledger.org/secure/attachment/10578/Client.txt","11/Mar/17 6:42 AM;ManjeetGambhir;Peer.log;https://jira.hyperledger.org/secure/attachment/10577/Peer.log",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxntr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ManjeetGambhir,muralisr,rickr,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 12:00 PM;rickr;Hi Manjeet 
Can you share the chain code ?  Tar it up ? 
How about the code that is doing the Install and instantiate ?
What git commit level is the server ?  Same for client ;;;","11/Mar/17 12:02 PM;rickr;Murali -- assigning first you can give a clue what this error is ?   You a lot more GO experience;;;","11/Mar/17 12:10 PM;ManjeetGambhir;Hi Rick , can not provide the chaincode..its co property..this has interaction with couches for sure..morning when try to run code with couch th images ..it was failing with protobuff related error..;;;","12/Mar/17 6:38 AM;muralisr;[~ManjeetGambhir] Can you remove all proprietory code from the chaincode and just leave printfs around ? If its packaging related, it'll still fail and we can then use that to debug.  ;;;","12/Mar/17 7:48 AM;rickr;I believe you are setting your GOPATH and specifying the CHAIN_CODE_PATH
```
chainCodeID = ChainCodeID.newBuilder().setName(CHAIN_CODE_NAME)
                    .setVersion(CHAIN_CODE_VERSION)
                    .setPath(CHAIN_CODE_PATH).build();`` <<<<<

can you tell us what they're set to ? 
Then can you  ...
cd $GOPATH 
then execute `tree` cmd 
or ls -R
;;;","14/Mar/17 12:50 PM;ManjeetGambhir;I worked with murali and created archive targz file manually with contents. It worked.
But never ever got success , after using generateTarGz method of SDKUtil,.
Can you please look into the generation of targz method?
Murali spent lot of time to zero in the issue,you can discuss with him in details.

;;;","15/Mar/17 1:13 AM;muralisr;[~ManjeetGambhir],   [~rickr] and [~jimthematrix] pointed out that we need to vendor the chaincode dependencies so we don't need to get the files from GOPATH root. Should have caught that last night... can you try that please ?;;;","15/Mar/17 5:29 AM;ManjeetGambhir;after vendoring of go by govendor, .issue got fixed.Thanks murali , rick and jim.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI based End-to-End Test with TLS enabled,FAB-2742,15310,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Ratnakar,Ratnakar,Ratnakar,11/Mar/17 12:02 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,11/Apr/17 12:34 PM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"Based on the End-to-End CLI based sample, https://github.com/hyperledger/fabric/tree/master/examples/e2e_cli

Enable TLS on peer and verify the result

Flags used to enabled on PEER
{code}
CORE_PEER_TLS_ENABLED
CORE_PEER_TLS_CERT_FILE
CORE_PEER_TLS_KEY_FILE
CORE_PEER_TLS_ROOTCERT_FILE
CORE_PEER_TLS_SERVERHOSTOVERRIDE
{code}",,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxntz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/17 12:34 PM;Ratnakar;This has been implemented with another Jira  issue, https://jira.hyperledger.org/browse/FAB-2745

Gerrit changes : https://gerrit.hyperledger.org/r/#/c/7141/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix error messages output,FAB-2743,15311,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,ruslankryukov,ruslankryukov,ruslankryukov,11/Mar/17 4:22 PM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,22/Mar/17 3:50 PM,,,,,,,,,,,,0,,,,,,,,"Now a lot of errors are printed like this:
logger.Warningf(""Rejecting broadcast message because of filter error: %s"", err)

But in log we can see:
[orderer/common/broadcast] Handle -> WARN 011 Rejecting broadcast message because of filter error: %!s(<nil>)

Error message is missed.",,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnu7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ruslankryukov,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Mar/17 4:26 PM;ruslankryukov;http://gerrit.hyperledger.org/r/7139;;;","22/Mar/17 3:50 PM;ruslankryukov;Will not implemented;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document TLS testing configuration and procedure,FAB-2744,15312,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,binhn,binhn,binhn,12/Mar/17 1:25 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,03/Jun/17 7:03 PM,,,,,v1.0.0-alpha1,,,,,,,0,quality,Security,,,,,,"This is the top story where we collect the testing configuration and set up procedure to enable TLS in Fabric 1.0.

Note that as of March 11th, from Fabric master branch, you need to cherrypick 2 additional CRs below  as they haven't been merged:
https://gerrit.hyperledger.org/r/#/c/7133/
https://gerrit.hyperledger.org/r/#/c/7127/

Create a subtask to enter your configuration and procedure.",,binhn,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnuf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ratnakar's setup,FAB-2745,15313,15312,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,binhn,binhn,12/Mar/17 1:28 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Mar/17 11:22 PM,,,,,v1.0.0-alpha1,,,,,,,0,,,,,,,,"I have used e2e_cli sample in our fabric here https://github.com/hyperledger/fabric/tree/master/examples/e2e_cli 
and added the below configurations to enable TLS
 
CORE_PEER_TLS_ENABLED
CORE_PEER_TLS_CERT_FILE
CORE_PEER_TLS_KEY_FILE
CORE_PEER_TLS_ROOTCERT_FILE
CORE_PEER_TLS_SERVERHOSTOVERRIDE

See the attached yaml files. 

The error I see, 
 
===================== Channel ""mychannel"" is created successfully ===================== 
2017-03-10 21:32:27.565 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'channel'
2017-03-10 21:32:27.565 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-03-10 21:32:27.565 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-03-10 21:32:28.568 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0A84050A4E08012A4062626365623932...D955E49BD8711A080A000A000A000A00 
2017-03-10 21:32:28.568 UTC [msp] Sign -> DEBU 005 Sign: digest: E36CC60AC6B90F4CB2CBFFD6F435EF27211D300AFA8A8EDDB4D1CFD93FE7F93C 
Error: proposal failed (err: rpc error: code = 13 desc = transport: write tcp 172.20.0.7:51766->172.20.0.3:7051: write: connection reset by peer)
",,binhn,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Mar/17 1:27 AM;binhn;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10580/docker-compose.yaml","12/Mar/17 1:27 AM;binhn;peer-base.yaml;https://jira.hyperledger.org/secure/attachment/10579/peer-base.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Mar/17 7:15 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7141/  is making headway

For Ratnakar's e2e thingy the following now works:

1)  create channel
2) join channel
3) install chaincode
4) instantiate chaincode on the first peer

I 'm left with getting TLS to work between the peer(s) and the orderer (I think / hope);;;","12/Mar/17 10:59 PM;mastersingh24;I now have TLS enabled for the orderer and the CLI is able to issue all commands with TLS enabled on the peers and orderer.
I think the last piece left is to connect the peer deliver client to a TLS-enabled orderer;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
E2E_CLI example should use orderer docker container name instead of Orderer IP,FAB-2746,15314,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,rhegde,rhegde,12/Mar/17 10:12 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,05/Apr/17 10:08 AM,,,,,,,,,,,,0,,,,,,,,"E2E CLI example that's used for verifying the Fabric Images uses the Orderer IP https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/scripts/script.sh#L4 instead of best practice of using docker container name i.e. orderer. 

Use of IP increases maintenance and must be discouraged. However changing the E2E CLI script to use docker container name i.e. orderer result in failing the test case and this needs to be investigated.

Note: Peer usage is addressed using the peer's container name. ",,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnuv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/17 12:40 AM;rhegde;This is now not reproducible and can be closed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer CLI must consider Endorsement Proposal Response Status Range 0 to 499 as Success  ,FAB-2747,15315,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,muralisr,rhegde,rhegde,12/Mar/17 10:18 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,30/Mar/17 8:54 AM,,,,,,,,,,,,0,,,,,,,,"Currently only status code = 200 is marked as Endorsement Proposal Response as Success.

However as per the Shim Response documentation (https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/response.go#L23) and acknowledgement from Murali, range from 0 to 499 must be considered as Endorsement Proposal Success.

",,Clayton Sims,muralisr,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnv3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,muralisr,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Mar/17 3:50 AM;Clayton Sims;Murali - this came up on the CLS call,  can you take a look.;;;","27/Mar/17 12:06 PM;muralisr;Fixed in https://gerrit.hyperledger.org/r/#/c/7453/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MockStub must not have efffect on Ledger during a Chaincode-2-Chaincode Invoke Operation containing PutState,FAB-2748,15316,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,Senthil1,rhegde,rhegde,12/Mar/17 10:26 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,04/Jan/18 10:15 PM,,,,,Not a Bug,,,fabric-ledger,,,,0,,,,,,,,"I ran chaincode-2-chaincode query interface test using example02, example04 on Fabric-CI Images - 4th March. 1 thing I noticed and as per https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/interfaces.go#L57 - Invoke operation containing PutState will not be recorded to the ledger (irrespective if chaincode is running on the same or different channel of the same peer). And this is what I see as expected.

However looking at the go test written for example04 at https://github.com/hyperledger/fabric/blob/master/examples/chaincode/go/chaincode_example04/chaincode_example04_test.go#L109, the invoke operation containing PutState (transfer 10 unit from A -> B ) gets registered/committed in mock-stub implementation. This need to be corrected.",,denyeart,rhegde,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7jz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,rhegde,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Aug/17 10:54 PM;denyeart;[~Senthil1] Could you take a look at this one?;;;","04/Sep/17 4:13 PM;Senthil1;If chaincodes are in same transaction, one chaincode can modify data on another chaincode. If they are on different channels, then it is not possible.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer GRPC TLS configuration cannot accept chained certificates,FAB-2749,15317,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,mastersingh24,passkit,passkit,12/Mar/17 2:02 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,27/May/17 1:53 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-orderer,,,,0,,,,,,,,"If a certificate chain is passed as a file argument to any of the TLS: parameters in orderer.yaml the orderer will panic with :

{code}
panic: interface conversion: interface {} is map[interface {}]interface {}, not map[string]interface {}
{code}

Expected behaviour would be to provide either a legible error message or to parse and import the chain.",,kchristidis,mastersingh24,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmrz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,mastersingh24,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/17 12:15 AM;mastersingh24;I'm working on some changes as part of getting end to end working with TLS enabled across all components

https://gerrit.hyperledger.org/r/#/c/7141/;;;","12/Apr/17 3:27 AM;kchristidis;[~passkit] [~mastersingh24] Is this an issue only with the orderer, or does it affect any component that uses the gRPC server?;;;","27/May/17 1:53 AM;mastersingh24;I'm closing this as I believe that https://gerrit.hyperledger.org/r/#/c/7141/ resolved this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Minor fixes in test cert generation code,FAB-2750,15318,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,13/Mar/17 5:28 AM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,13/Mar/17 12:27 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnvb:",,,,Unset,,Sprint 13 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Mar/17 5:31 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7147/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
user registration is failing in end-to-end tests (node) and (Java Sdk) tests,FAB-2755,15323,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,rameshthoomu,rameshthoomu,13/Mar/17 7:43 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Mar/17 10:32 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"observed user registration is failing in end-to-end tests. Below is the error log for reference

Tested on below commits# 

{code:java}
FABRIC NODE SDK# e2edc9b
FABRIC CA# c7b482e
FABRIC # 626fcd3 
{code}
  
{code:java}

03:12:08 [32minfo[39m: [Client.js]: Failed to load user ""admin"" from local key value store
03:12:08 [32minfo[39m: [FabricCAClientImpl.js]: Successfully constructed Fabric CA service client: endpoint - {""protocol"":""http"",""hostname"":""localhost"",""port"":7054}
03:12:09 [32minfo[39m: [crypto_ecdsa_aes]: This class requires a CryptoKeyStore to save keys, using the store: {""opts"":{""path"":""/home/jenkins/.hfc-key-store""}}
03:12:09 not ok 1 Error: Could not parse enrollment response [{""success"":true,""result"":{""Cert"":""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUIzekNDQVlTZ0F3SUJBZ0lVZkZ3OURTbVlPYzhRckxuZUVyOHVmK3VlUmVjd0NnWUlLb1pJemowRUF3SXcKWURFTE1Ba0dBMVVFQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaApiaUJHY21GdVkybHpZMjh4RVRBUEJnTlZCQW9UQ0hCbFpYSlBjbWN4TVJFd0R3WURWUVFERXdod1pXVnlUM0puCk1UQWVGdzB4TnpBek1USXdNekEzTURCYUZ3MHhPREF5TURneE1UQTNNREJhTUJBeERqQU1CZ05WQkFNVEJXRmsKYldsdU1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRTloNjNQZ1NDSUMvNndOajJZWlVTT0JqWgpTWHh6YmFpRU5kamJqOFRtZTNwY2tvalF0MTFqZ08rNmoxd0ZPWlJRVXFhVEdUZS94UEZyeEZCVEVkQkQzYU5zCk1Hb3dEZ1lEVlIwUEFRSC9CQVFEQWdJRU1Bd0dBMVVkRXdFQi93UUNNQUF3SFFZRFZSME9CQllFRklTRTl3NXQKTkZMaHhmMVhUQTRHUi9kRkI3M3lNQ3NHQTFVZEl3UWtNQ0tBSU5pbHM4ckJ1Q0gyNUxTSHpxOGYwam5OejhNUQppVUZRa0l1UThGNlJlVlZxTUFvR0NDcUdTTTQ5QkFNQ0Ewa0FNRVlDSVFEbXc5NDM4UzdaVkhqQWh6VFMvMEVXCkVWc2Rjd3VKbnZjVE9LQzU0S1FBeXdJaEFKMFVHL2NzUVBZVThKYjlQQzVrNzdMUUVQZ1lSYk9RYmpvbUJkOGgKMWtMeQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="",""ServerInfo"":{""CAName"":"""",""CAChain"":""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNIVENDQWNPZ0F3SUJBZ0lRTW5GQ3BqU2R2OFdCQzlWbkV2SjRKVEFLQmdncWhrak9QUVFEQWpCZ01Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVJNQThHQTFVRUNoTUljR1ZsY2s5eVp6RXhFVEFQQmdOVkJBTVRDSEJsWlhKUGNtY3hNQjRYCkRURTNNRE13TVRFM016WTBNVm9YRFRJM01ESXlOekUzTXpZME1Wb3dZREVMTUFrR0ExVUVCaE1DVlZNeEV6QVIKQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaGJpQkdjbUZ1WTJselkyOHhFVEFQQmdOVgpCQW9UQ0hCbFpYSlBjbWN4TVJFd0R3WURWUVFERXdod1pXVnlUM0puTVRCWk1CTUdCeXFHU000OUFnRUdDQ3FHClNNNDlBd0VIQTBJQUJOZU5FbTRNS0MvdXpLK2xreFhGNXI0YUdwOEdhbDl2M1E5RUdYSnNOazd6Q25MMUhEMUcKeERqdzlGYzVnTkJndlgxQ2NGblFZVjNWWG9KT2pNT3NjWTZqWHpCZE1BNEdBMVVkRHdFQi93UUVBd0lCcGpBUApCZ05WSFNVRUNEQUdCZ1JWSFNVQU1BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0tRWURWUjBPQkNJRUlOaWxzOHJCCnVDSDI1TFNIenE4ZjBqbk56OE1RaVVGUWtJdVE4RjZSZVZWcU1Bb0dDQ3FHU000OUJBTUNBMGdBTUVVQ0lRQzAKZEw3cHo1bnAzaG9BYUU0MW4vMGMwVGpqczZ6Vmsrenh5c3ozdTlleEt3SWdCbmhySkZLMXJWMTNWVXorVzhzcAo4bHJ6NVpFVG9rOGxQb2lzWHdSSWUvRT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""}},""errors"":[],""messages"":[]} ] as JSON due to error [TypeError: First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.] at IncomingMessage.<anonymous> (/w/workspace/fabric-merge-end-2-end-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-ca-client/lib/FabricCAClientImpl.js:508:14) at emitNone (events.js:91:20) at IncomingMessage.emit (events.js:185:7) at endReadableNT (_stream_readable.js:974:12) at _combinedTickCallback (internal/process/next_tick.js:74:11) at process._tickCallback (internal/process/next_tick.js:98:9)
{code}

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/28/console

Java End-to-end Test:
Tested on Below commits #
 
{code:java}
FABRIC # b3d3254
FABRIC CA # c7b482e
FABRIC JAVA # 9cd3b75

{code}
{code:java}

12:37:36 -------------------------------------------------------
12:37:36  T E S T S
12:37:36 -------------------------------------------------------
12:37:36 Running org.hyperledger.fabric.sdkintegration.End2endIT
12:37:37 2017-03-12 12:37:37 ERROR MemberServicesFabricCAImpl:273 - Failed to enroll user admin 
12:37:37 org.hyperledger.fabric.sdk.exception.EnrollmentException: Failed to enroll user admin 
{code}
",Jenkins CI,bmos299,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnvz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Mar/17 10:27 AM;rickr;https://gerrit.hyperledger.org/r/#/c/6797/   has a fix for it in Java ;;;","13/Mar/17 9:38 PM;rickr;[~rameshthoomu] Please in the future open separate JIRA's for both Node and Java SDKs so they can  be worked independently and  assign the components  thanks.;;;","13/Mar/17 9:44 PM;rickr;[~rameshthoomu] [~Clayton Sims] [~jimthematrix@gmail.com]  The root of this was a change in Fabric CA.  This would have been caught much sooner if all our fabric and fabric ca for  integration tests (verify,merge) were pulled from gerrit and not git.  I'have seen the git repo lag gerrit by several commits over a day.
BTW is Fabric_ca's verify also running SDK's ITs?;;;","13/Mar/17 9:51 PM;rickr;[~jimthematrix][~rameshthoomu][~Clayton Sims]  Java fix here: https://gerrit.hyperledger.org/r/#/c/7157/  Need Jim to submit ;;;","14/Mar/17 1:06 AM;rameshthoomu;[~rickr] thought git is always synced with gerrit commits. I will update FIT jobs to clone commits from gerrit repository;;;","14/Mar/17 10:21 PM;rameshthoomu;[~rickr] [~bmos299] After Merge of this patch https://gerrit.hyperledger.org/r/#/c/7157/ I see Java end2end is working as expected in CI. But node is still failing.. [~jimthematrix]  any inputs on this?;;;","15/Mar/17 10:32 PM;bmos299;Marking as done.  Problem addressed. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Batching of state transfer request.,FAB-2756,15324,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,13/Mar/17 5:44 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,14/Apr/17 4:28 AM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,"Currently anti entropy procedure tries to complete missing blocks in one batch, this need to be changed to batch the range of missed blocks to request from the neighbor peers",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzx4v3:",,,,,,Sprint 13 - Gossip,Sprint 14 - Gossip,Sprint 15 - Gossip,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Decouple anchor peer endpoints from organizationIDs,FAB-2758,15326,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,13/Mar/17 6:18 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,09/Apr/17 4:05 PM,,,,,,,,,,,,0,,,,,,,,"In the current implementation of the join channel message in the gossip layer, each anchor peer has its own organization, and the joinChannel invocation enumerates all anchor peers and builds a list of organizationIDs from them.

When https://gerrit.hyperledger.org/r/#/c/7105/ will be introduced, it will be needed to create a channel only with either no anchor peers or anchor peers of the organization of the channel creator.
This would confuse the gossip layer because it'll derive that each channel has only 1 organization instead of the original participants. 

If I decouple the orgs from the anchor peers, this would solve the problem.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnx3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delivery service client need to failover to another ordering service endpoints in case of failure.,FAB-2759,15327,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,C0rWin,C0rWin,13/Mar/17 8:09 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,13/Apr/17 5:05 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,gossip_component,,,,Currently the peer code has no fallback logic of retries in case of the ordering service is not up and running. We need to take care of implementing some circuit breaker to make sure to eventually get connected to the ordering service once it becomes available. Moreover need to keep special care of making peer still be able to maintain the ability of peers to join the new channels and starting pulling out object from ordering right after peer will connect to it.,,C0rWin,kchristidis,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2828,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzx58v:",,,,,,Sprint 13 - Gossip,Sprint 14 - Gossip,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,C0rWin,kchristidis,mrshah-ibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric-ca-client to support updated fabric-ca APIs,FAB-2760,15328,15169,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,13/Mar/17 11:17 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Mar/17 11:24 PM,,,,,v1.0.0,v1.0.0-alpha1,,fabric-sdk-node,,,,0,,,,,,,,"Need to modify the fabric-ca-client to support the updated APIs from fabric-ca:

enroll
register",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnxb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Mar/17 4:55 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7171/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enrollment request with bad authentication header succeeds (it should fail),FAB-2761,15329,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,aambati,aambati,aambati,13/Mar/17 11:48 PM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,16/Mar/17 12:50 AM,,,,,,,,,,,,0,,,,,,,,"If authType == basic and a bogus authorization header is sent , fcaAuthHandler serveHTTP function will allow the request through, instead of returning an error.

For example:
curl -X POST -H ""Authorization:blah"" http://fabrica-ca-server-hostname:7055/enroll -d '{""hosts"":null,""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIIBATCBqQIBADAQMQ4wDAYDVQQDEwVhZG1pbjBZMBMGByqGSM49AgEGCCqGSM49\nAwEHA0IABCK1am728KdO0iOeJuK3+Z05T9Mw2rxmQO3SIMfiGEJ56GZvcP/iN/z5\np43hTiF5do98O0DtByD37b4bCdJ/3l+gNzA1BgkqhkiG9w0BCQ4xKDAmMCQGA1Ud\nEQQdMBuCGWFuaWxzLW1icC5yYWxlaWdoLmlibS5jb20wCgYIKoZIzj0EAwIDRwAw\nRAIgIeZDliMQEX9+uqZXCcLvAfRUXoBzg/74jZQReaHmWKMCIAovDiMdrmbSIzT5\nlDSknJdgXMST2HF9SoRzHewuR6cL\n-----END CERTIFICATE REQUEST-----\n"",""profile"":"""",""crl_override"":"""",""label"":""""}'
will succeed even though authorization header is invalid

Keith Smith suggested this:
We should add an enroll test case for this and make sure the test case fails before fixing it.  To add this test case, I recommend adding a testBogusAuthHeader test case to lib/client_test.go by copying the Client.Enroll func and changing this line: ""post.SetBasicAuth(req.Name, req.Secret)"" to add the bogus authorization header instead.

To fix the code in this function, I recommend just changing the logic to a switch statement based on ah.authType just to make the 3 cases more explicit and easy to follow logic, each being self-contained.",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnxj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e_cli sample doesn't work when TLS is disabled.,FAB-2762,15330,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,Ratnakar,Ratnakar,Ratnakar,14/Mar/17 12:02 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,14/Mar/17 7:24 AM,,,,,v1.0.0,,,fabric-peer,,,,0,endorser,,,,,,,"Objective of the Test:
Verify End-to-End test when TLS is disabled.
Tested on commit Level : *96b1b901ce2f2f3800a554e4a56c9568954633d5*

Command used to verify :
{panel}
 ./generateCfgTrx.sh && docker-compose -f docker-compose-no-tls.yaml up -d && docker logs -f cli
{panel}

Error Message:
{code}
WARNING: The CHANNEL_NAME variable is not set. Defaulting to a blank string.
Creating network ""e2ecli_default"" with the default driver
Creating orderer0
Creating peer0
Creating peer1
Creating peer2
Creating peer3
Creating cli
-----------------------------------------
Orderer IP 172.18.0.2
PEER0 IP 172.18.0.3
PEER1 IP 172.18.0.4
PEER2 IP 172.18.0.5
PEER3 IP 172.18.0.5
-----------------------------------------
Channel name : mychannel
2017-03-13 14:34:18.461 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'channel'
2017-03-13 14:34:18.461 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-03-13 14:34:18.461 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
Error connecting: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
Error: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
Usage:
  peer channel create [flags]

Global Flags:
  -b, --blockpath string           Path to file containing genesis block
      --cafile string              Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
  -c, --chain string               In case of a newChain command, the chain ID to create.
  -f, --file string                Configuration transaction file generated by a tool such as configtxgen for submitting to orderer
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string             Ordering service endpoint
      --test.coverprofile string   Done (default ""coverage.cov"")
      --tls                        Use TLS when communicating with the orderer endpoint
  -v, --version                    Display current version of fabric peer server

!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================

{code}",,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnxr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Mar/17 12:22 AM;Ratnakar;Change set https://gerrit.hyperledger.org/r/#/c/7141 will not work with non-tls end-to-end test;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create Docker Images for the Community in the Hyperledger org,FAB-2764,15332,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,greg.haskins,bmos299,bmos299,14/Mar/17 2:13 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,19/Mar/17 3:50 AM,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,Once the e2e flows work with and w/o tls enabled publish docker images to the https://hub.docker.com/r/hyperledger/ for community usage. ,,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxny7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Create Kafka, zookeeper, couchdb  docker repositories in hyperledger docker hub account",FAB-2766,15334,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jwagantall,rameshthoomu,rameshthoomu,14/Mar/17 3:43 AM,20/Jul/18 11:11 PM,28/Oct/23 2:59 AM,15/Mar/17 11:55 PM,,,,,,,,,,,,0,,,,,,,,"[~jwagantall] Could you please create *kafka, zookeepr, couchdb* docker repositories in Hyperledger docker hub account. We have *peer, orderer, javaenv, ccenv, ca* docker repositories in hyperledger dockerhub account. 

We need above repositories to merge this patch. https://gerrit.hyperledger.org/r/#/c/7169/ 

Hyperledger Dockerhub Account: 
https://hub.docker.com/u/hyperledger/",,jwagantall,kchristidis,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnyn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jwagantall,kchristidis,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Mar/17 4:11 AM;jwagantall;Small typo in zookeepr ... created the repo as ""zookeeper"";;;","14/Mar/17 4:12 AM;jwagantall;All created.. let me know if you need anything else
https://hub.docker.com/r/hyperledger/fabric-kafka/
https://hub.docker.com/r/hyperledger/fabric-zookeeper/
https://hub.docker.com/r/hyperledger/fabric-couchdb/;;;","14/Mar/17 5:39 AM;kchristidis;What Dockerfiles are these based on? I'm mostly interested in the Kafka and ZK ones.

I would also suggest we update the Docker Hub repo pages by linking to these Dockerfiles for transparency.;;;","15/Mar/17 11:39 PM;kchristidis;Any update on this?;;;","15/Mar/17 11:48 PM;kchristidis;Ramesh got back to me:

We're using the Dockerfiles that are already checked in to the repo so we're good.

https://github.com/hyperledger/fabric/tree/master/images;;;","15/Mar/17 11:55 PM;rameshthoomu;[~kchristidis] sure that's a good idea to keep docker files in each docker repository. Just for reference we use docker-compose files of all our images from here https://github.com/hyperledger/fabric/tree/master/images. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fixed timeout of 30 seconds for chaincode init to complete,FAB-2767,15335,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,muralisr,davidkel,davidkel,14/Mar/17 3:48 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/Mar/17 2:29 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"We have chaincode that can take 2 minutes for the INIT to run and it fails with some strange errors
{quote}
Error: [80914958]No ledger context for GetState. Sending ERROR
{quote}
from Rocketchat: 
{quote}
theres a timeout of 30 secs. I think you are running into the situation where the requester cleaned up the context and returned error back. When the chaincode called GetState, the context was no longer there (and you get the above error). We need to remove the hardcoded timeout and allow timeout to be specified via a property.
{quote}
",,davidkel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnyv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,davidkel,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ANSI color wrapper to Build jobs in CI,FAB-2768,15336,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,rameshthoomu,rameshthoomu,rameshthoomu,14/Mar/17 3:51 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Mar/17 6:14 AM,,,,,,,,,,,,0,,,,,,,,Install ANSI color plugin in community CI server and add ANSI color wrapper to all the jobs to display logs with proper color format. This helps to identify error or debug message more easily.,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnz3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/17 6:14 AM;rameshthoomu;patch has been submitted and merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update CI scripts to clone latest commits from gerrit,FAB-2769,15337,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,14/Mar/17 4:25 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Mar/17 4:08 AM,,,,,,,,,,,,0,build-system,,,,,,,"Update git clone command in the following scripts. 

include-raw-FIT-JAVA-e2e.sh
include-raw-FIT-NODE-e2e.sh
include-raw-FIT-dockerimages.sh
fabric-sdk-node/include-raw-FIT-node-e2e.sh
fabric-sdk-java/include-raw-fabric-sdk-java-end-to-end-tests.sh
fabric-sdk-node/include-raw-gulp-test.sh

Observed git and gerrit repos are not maintaining exact sync.. To provide accurate build results, CI has to clone latest commits from Gerrit.






",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxnzb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Mar/17 4:08 AM;rameshthoomu;Patch has been submitted and merged. Closing this issue..;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Event Handling Registration - Starting Point Support,FAB-2770,15338,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,pmullaney,timpii,timpii,14/Mar/17 5:21 AM,23/Jan/20 3:56 AM,28/Oct/23 2:59 AM,23/Jan/20 3:56 AM,,,,,,,,fabric-peer,,,,0,stale-item,,,,,,,A startup process of a Client/SDK instance would generally be the result of the client being down for some period of time and initially on startup going into a recovery / synch mode to bring its Eventing of Blocks up to the current state. As the Client/SDK can/probably will be supporting multiple channels it would be beneficial to be able to receive the Block Events in the order generated across all authorized channels. To support this a synch Query via the SDK would need to accept the beginning Block Seq Id and channel for it. It would return all Block Events in timestamp order equal to and after that for all channels the Peer is authorized to. ,,jeffgarratt,muralisr,rickr,sykesm,timpii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnzj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jeffgarratt,muralisr,rickr,sykesm,timpii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 4:28 PM;muralisr;[~pmullaney] [~jimthematrix] is this for 1.0 or 1.1 ?;;;","14/Nov/17 2:12 AM;jeffgarratt;I would assume this would need to be reconsidered in light of https://jira.hyperledger.org/browse/FAB-6911;;;","23/Jan/20 3:56 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lock down channel creation by consortium,FAB-2772,15340,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,14/Mar/17 6:14 AM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,03/May/17 4:57 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,Clayton Sims,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3319,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4h3:",,,,Unset,,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,,,,8.0,Unset,,,,,,,,,,,Clayton Sims,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/17 4:52 AM;Clayton Sims;Kostas moving to you since Jason is out.    I couldn't find a gerrit item for this one.   What's left to get this merged?;;;","03/May/17 4:58 AM;kchristidis;Clayton, all the sub-tasks of it are done. This story is now marked as done as well. Thanks for catching this. (Reassigning this to Jason for historical reference since he did all of the work.);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need a parameter to be able to limit the max number of channels that can be created on a network,FAB-2773,15341,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,jyellick,ptippett,ptippett,14/Mar/17 7:00 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,02/Apr/17 9:11 PM,,,,,v1.0.0,v1.0.0-alpha1,,fabric-orderer,,,,0,,,,,,,,The user should be able to impose a limit on the # of channels that can be created on a given network to prevent someone from continuously creating channels until kafka falls over or we exhaust some resource.  This limit should be able to be specified in configuration vs hard coded.,,ptippett,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxnzz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ptippett,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add query unit tests to CouchDB layer,FAB-2775,15346,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,14/Mar/17 10:04 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,04/Apr/17 4:49 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Add specific couchdb query tests at the couchdb level.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx57b:",,,,Unset,,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,Unset,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move Alive message store from gossip to discovery,FAB-2777,15348,14346,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,gennadyl,gennadyl,14/Mar/17 11:34 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Mar/17 11:11 PM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"Message store that store alive messages should be in discovery module, not in gossip implementation",,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo1z:",,,,,,Sprint 10 - Gossip,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update message store to automaticaly expire messages,FAB-2778,15349,14346,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,gennadyl,gennadyl,14/Mar/17 11:38 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 4:50 PM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"Add go routine to run periodically and expire old messages in message store, including expiration callback invocation and taking care of locks, etc",,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo27:",,,,,,Sprint 10 - Gossip,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make related data items in discovery expire once message expired in store,FAB-2779,15350,14346,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,gennadyl,gennadyl,14/Mar/17 11:41 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 4:50 PM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"Discovery module contains multiple stores , like membership store, who contains items related to expired messages, so those stores should be taken care as well. ",,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo2f:",,,,,,Sprint 10 - Gossip,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix rest for message stores in gossip module,FAB-2780,15351,14346,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,gennadyl,gennadyl,14/Mar/17 11:44 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 8:06 PM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"gossip implementation contains multiple message stores for different types of messages. Once we add expiration functionality to those stores, we need to make sure that other data structures that contains references to expired messages, takes care as well. ",,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo2n:",,,,,,Sprint 10 - Gossip,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,gennadyl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow configtxgen to specify admin principal type,FAB-2783,15355,14105,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,15/Mar/17 4:05 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 4:56 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo3b:",,,,,,Sprint 10 - consensus,Sprint 11 - consensus,Sprint 12 - consensus,Sprint 13 - Consensus,Sprint 14 - Consensus,Sprint 15 - Consensus,,,,,,,1.0,,,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 3:50 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7209/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use /gogo/protobuf to improve proto marshalling performance,FAB-2784,15356,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,denyeart,denyeart,15/Mar/17 4:12 AM,23/Jan/20 3:56 AM,28/Oct/23 2:59 AM,23/Jan/20 3:56 AM,,,,,,,,fabric-peer,,,,0,stale-item,,,,,,,"From Manish:

https://github.com/gogo/protobuf acts as a protoc plugin and generates the message specific code for fast serialization.  Appears to be 2x as fast as plain protoc.

Inside `proto.Marshal()` function in golang it first checks that whether the `obj` implements `Marshal()` function and if yes then it simply invokes it.

So, we just need to install `https://github.com/gogo/protobuf` into vagrant and change in the `make protos` command in our build (from `protoc --go_out=...` ` protoc --gofast_out ...`).",,denyeart,RandyM1,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7dj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,RandyM1,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 7:36 AM;RandyM1;I found I had to update a lot of packages in vendor to be compatible with the latest gogo/protobuf.

Taking this on as my first issue, seems a good way to learn the tech stack.  I have it compiling and am in the process of testing:
https://github.com/RandyMoore/fabric

Once the tests are passing I'll submit for review.  If these changes seem off base guidance would be appreciated :)

;;;","24/Apr/17 12:49 AM;RandyM1;Putting back to TODO and Unassigned - BDD tests are broken, I'm getting something similar to FAB-2733.
I'll check back later and pick this up again if the BDD become fixed.;;;","23/Jan/20 3:56 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer response becomes slow and finally crashed after writing many entries to World State,FAB-2788,15360,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ryokawajp,ryokawajp,15/Mar/17 4:42 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 12:58 AM,,,,,v0.6,WON'T FIX,,fabric-ledger,,,,0,,,,,,,,"I understand that Table API and Rocks DB are no longer supported in Fabric v1.0, but just want to share this information with v0.6.

- During a long run (about one or two days), Client 1 sends many transactions using HFC for Node.js. The chaincode recorded the contents of the transactions to World State, creating one key for one transaction with Table API.
   - Approximately 0.1-0.5 transactions per second.
   - I guess there were approximately 10K records.
- Another client (Client 2) queries a small amount of records (about 10 records), or invokes a transaction with very low frequency (less than 0.01 TPS).
- During the long run, the response time of the query / invoke by Client 2 becomes gradually slower by approx. 2x - 5x. One query requires 20 seconds.
- Sometimes the peer crashes.
   - The error messages are not always the same. Typical two errors are attached.
   - The crash may be accompanied by chaincode crash or may not.

I got a kind comment from Manish that when there are a large number of entries in World State and one queries a small number of entries, ledger.state.dataStructure.name='trie' instead of 'bucketree' in core.yaml gives a better performance.
https://github.com/hyperledger/fabric/blob/v0.6/peer/core.yaml#L360

So as a workaround,
-I tried 'trie' configuration with a few thousand records and up to now, I observe no response time increase nor crash. Looks working fine to me.-
- Sorry. I found a mistake in a test case. Let me confirm it later.

I believe that Problem 1 of this JIRA item does not apply to our case because we only query small number of items up to 10. While Problem 2 could apply because we are using v0.6.0.
https://jira.hyperledger.org/browse/FAB-860

The error message and its situation are similar to this JIRA item, but we did not see ""Timeout expired while executing transaction"". Instead we see ""Context canceled"".
https://jira.hyperledger.org/browse/FAB-1163

A sample chaincode program to be attached later.
Error 1. (I remember that this crash happened when I send an Invoke TX)
{noformat}
[31m15:04:23.654 [chaincode] processStream -> ERRO 01d[0m Error handling chaincode support stream: stream error: code = 1 desc = ""context canceled""
pure virtual method called
terminate called without an active exception
SIGABRT: abort
PC=0x7f07cf69ec37 m=8
signal arrived during cgo execution

goroutine 1134 [syscall, locked to thread]:
runtime.cgocall(0xbb7a90, 0xc8249636c0, 0x0)
	/opt/go/src/runtime/cgocall.go:123 +0x11b fp=0xc824963670 sp=0xc824963640
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb._Cfunc_rocksdb_iter_seek(0x7f07bc000930, 0xc820a18690, 0xe1)
	github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/_obj/_cgo_gotypes.go:1090 +0x3a fp=0xc8249636c0 sp=0xc824963670
github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb.(*Iterator).Seek(0xc8200205e8, 0xc820a18690, 0xe1, 0xf0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/tecbot/gorocksdb/iterator.go:93 +0xd1 fp=0xc824963730 sp=0xc8249636c0
github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree.(*RangeScanIterator).seekForStartKeyWithinBucket(0xc8249ae930, 0xb22c3)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree/range_scan_iterator.go:92 +0x9a fp=0xc824963790 sp=0xc824963730
github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree.(*RangeScanIterator).Next(0xc8249ae930, 0xf9e620)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/buckettree/range_scan_iterator.go:70 +0x634 fp=0xc8249639f8 sp=0xc824963790
github.com/hyperledger/fabric/core/ledger/statemgmt/state.(*CompositeRangeScanIterator).Next(0xc8249b3860, 0xc8214c2bb0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/state/composite_range_scan_iterator.go:51 +0x183 fp=0xc824963af8 sp=0xc8249639f8
github.com/hyperledger/fabric/core/ledger/statemgmt/state.(*CompositeRangeScanIterator).Next(0xc8249b3860, 0xc8214c2ab0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/state/composite_range_scan_iterator.go:79 +0x7e2 fp=0xc824963bf8 sp=0xc824963af8
github.com/hyperledger/fabric/core/ledger/statemgmt/state.(*CompositeRangeScanIterator).Next(0xc8249b3860, 0xc824929000)
	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/statemgmt/state/composite_range_scan_iterator.go:79 +0x7e2 fp=0xc824963cf8 sp=0xc824963bf8
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryState.func1(0xc822b3c180, 0xc823783a90)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:729 +0xb85 fp=0xc824963f90 sp=0xc824963cf8
runtime.goexit()
	/opt/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc824963f98 sp=0xc824963f90
created by github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryState
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:774 +0x3f

(stack trace continues ...)
{noformat}

Error 2
{noformat}
panic: runtime error: invalid memory address or nil pointer dereference
	panic: runtime error: invalid memory address or nil pointer dereference
[signal 0xb code=0x1 addr=0x0 pc=0x7789b1]

goroutine 436555 [running]:
panic(0xd96880, 0xc8200120b0)
	/opt/go/src/runtime/panic.go:464 +0x3e6
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryStateClose.func1.1(0xc820470180, 0xc8228d83c0, 0xc820927ea0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:911 +0x261
panic(0xd96880, 0xc8200120b0)
	/opt/go/src/runtime/panic.go:426 +0x4e9
github.com/hyperledger/fabric/core/chaincode.(*Handler).getRangeQueryIterator(0xc820470180, 0x0, 0xc8234c8b70, 0x24, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:155 +0x89
github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryStateClose.func1(0xc820470180, 0xc8228d83c0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:925 +0x52f
created by github.com/hyperledger/fabric/core/chaincode.(*Handler).handleRangeQueryStateClose
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:945 +0x3f
{noformat}

A sample program added. This program queries 10 records which have a common prefix using RangeQueryState(), from World State which also has 20000 entries of a different prefix. 
As in memo2.txt, the result shows that the query time increased by 6 times in the case of ""buckettree"" and no increase observed in the case of ""trie"". In either cases, I did not observe crashes (it took only 3.5s in the worst case.).

After you deployed the chaincode to a blockchain network of a clean database, you can run
{noformat}
time ./query.sh
./create_keys_l.sh
time ./query.sh
{noformat}
(it takes 20 minuites to run the second step.)
","- Fabric v0.6.0-preview docker image, 
- HFC for Node.js 0.6.5, 
- consensus=noop, 
- batch size=1
- one peer",denyeart,jorgedr,nextisd,ryokawajp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABB-27,FAB-1163,,,,,,,,"17/Mar/17 2:03 PM;ryokawajp;create_keys_l.sh;https://jira.hyperledger.org/secure/attachment/10594/create_keys_l.sh","17/Mar/17 2:03 PM;ryokawajp;longrunperformance.go;https://jira.hyperledger.org/secure/attachment/10591/longrunperformance.go","17/Mar/17 2:03 PM;ryokawajp;memo2.txt;https://jira.hyperledger.org/secure/attachment/10592/memo2.txt","17/Mar/17 2:03 PM;ryokawajp;query.sh;https://jira.hyperledger.org/secure/attachment/10593/query.sh",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo3r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,jorgedr,nextisd,ryokawajp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/17 8:05 PM;ryokawajp;I got an additional information on peer crash problem FAB-1163 from Dave Enyeart.
https://chat.hyperledger.org/channel/fabric-ledger?msg=5e8tveA4YnraFJnGc

In summary, there is a timeout when a transaction (query/invoke/deploy) takes to much time. This option was a fixed value of 30s and not configurable but extended to be configurable in v1.0 a few days ago.
https://jira.hyperledger.org/browse/FAB-2767
;;;","13/Apr/17 12:57 AM;denyeart;Thanks for providing all the detail [~rjkuro].
I'll move this to fabric-ledger so that it can be easily referenced, but I'll actually close the bug since it is not applicable to 1.0 and no enhancements are planned for 0.6.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unit-test cannot be performed with low version docker-compose,FAB-2789,15361,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,huyanyan,huyanyan,15/Mar/17 6:31 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 5:59 AM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"Low version docker-compose(e.g. 1.5.2) doesn't support ""--abort-on-container-exit"" option for ""up"" operation and thus will fail the unit-test execution.

https://github.com/hyperledger/fabric/blob/master/Makefile#L118",,Amanskywalker,huyanyan,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Amanskywalker,huyanyan,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Mar/17 12:20 AM;Amanskywalker;Explicitly set the version of the docker-compose.yml file to version '3'
and create a pull request at https://github.com/hyperledger/fabric/pull/34;;;","16/Mar/17 10:55 AM;huyanyan;Hi, Aman, thanks for the fix! But I guess if we enforce the compose yaml version to ""3"", users who only have lower version of docker and docker compose will not be able to run unit-tests?;;;","02/Apr/17 9:08 PM;mastersingh24;Actually, we don't want to do that.  What we need to do is document the minimum version of docker compose needed - which is 1.8.1 or higher;;;","02/Apr/17 10:13 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7633/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sample Endorsor Creator certificate is not marked correctly,FAB-2798,15370,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,harrisob@us.ibm.com,harrisob@us.ibm.com,16/Mar/17 4:19 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/May/17 11:57 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"NodeSDK is unable to validate the signature with the creator's certificate as it is not tagged correctly.
Looks like:
-----BEGIN -----
MIICEjCCAbmgAwIBAgIRANUoapuJGF/Om0hyk45bQiQwCgYIKoZIzj0EAwIwYDEL
...
RjKXfWVXfXdEoq8mgWa6ir11QloCIB9mpenM34EsuH9AZR83cIMZZC2HiQbfFNAa
5zKksj3o
-----END -----

Should be
-----BEGIN CERTIFICATE-----
MIICEjCCAbmgAwIBAgIRANUoapuJGF/Om0hyk45bQiQwCgYIKoZIzj0EAwIwYDEL
...
RjKXfWVXfXdEoq8mgWa6ir11QloCIB9mpenM34EsuH9AZR83cIMZZC2HiQbfFNAa
5zKksj3o
-----END CERTIFICATE-----",,ChristopherFerris,harrisob@us.ibm.com,kchristidis,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo5b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,harrisob@us.ibm.com,kchristidis,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 3:23 AM;kchristidis;Removing fabric-orderer component, as this doesn't seem to be orderer-related?;;;","16/Apr/17 11:55 PM;mastersingh24;[~harrisob@us.ibm.com] - is this still an issue?   I assume you were having problems verifying the signature(s) returned from endorsers?;;;","12/May/17 8:47 AM;ChristopherFerris;[~harrisob@us.ibm.com] can you please answer [~mastersingh24] question above? Thanks;;;","12/May/17 11:58 PM;harrisob@us.ibm.com;The provided certs now have -----BEGIN CERTIFICATE----- and -----END CERTIFICATE-----;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable couchdb in bootstrap feature,FAB-2800,15372,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,jeffgarratt,jeffgarratt,16/Mar/17 5:48 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,23/Mar/17 12:15 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,Enable couchDB option for peer DB in boostrap feature.,,jeffgarratt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxo5r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jeffgarratt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/17 12:16 AM;jeffgarratt;Closed by https://gerrit.hyperledger.org/r/#/c/7227/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kafka integration into BDD,FAB-2801,15373,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,jeffgarratt,jeffgarratt,16/Mar/17 5:52 AM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,23/Mar/17 12:16 AM,,,,,,,,,,,,0,,,,,,,,Kafka integration into BDD with [~kchristidis].,,jeffgarratt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxo5z:",,,,Unset,,,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jeffgarratt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/17 12:16 AM;jeffgarratt;Closed by https://gerrit.hyperledger.org/r/#/c/7227/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update documentation for e2e example with TLS update,FAB-2803,15375,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,16/Mar/17 9:09 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Mar/17 4:17 AM,,,,,v1.0.0,,,,,,,0,Documentation,,,,,,,"Th document commands need to be updated to include the TLS options. These are there in the accompanying script but not reflected in the readme.
",,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo67:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric log archiving,FAB-2804,15377,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,yacovm,yacovm,16/Mar/17 11:17 PM,23/Jan/20 3:57 AM,28/Oct/23 2:59 AM,23/Jan/20 3:57 AM,,,,,,,,,,,,0,stale-item,,,,,,,"In fabric, the logging is based on go-logging and logs indefinitely to the same file (to stdout, but I'm sure it can be configured to log to a file too somehow). 

If the logging is set to DEBUG, the log file size may grow in a fast rate, eventually filling the partition the log resides in.
It would be good to have the logging framework be able to ""switch"" to a new file, and archive (gzip or something similar) the old log files after switching to the new file.


[~binhn] [~wlahti] [~mastersingh24] ",,amber-zhang,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxo6n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,amber-zhang,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/17 6:31 PM;amber-zhang;Suggest Fabric peer container's log can be redirected to a file so that the log can be further analyzed offline.;;;","12/May/17 9:36 PM;wlahti;While doing some research into this, I found that there's a new school of thought on logging that appears to have a good amount of support and is actually in line with how we're logging at the moment:  [https://12factor.net/logs]. Just throwing this out there as food for thought as I found a number of stackoverflow questions regarding logging that seemed to agree that using event streams and allowing the end user/administrator to determine the way they want to process the logs. ;;;","12/May/17 10:23 PM;yacovm;Well fabric isn't your typical application and doesn't fit to the model of that site.
Just an example from some other principal of the site:
{quote}Twelve-factor processes are stateless and share-nothing. Any data that needs to persist must be stored in a stateful backing service, typically a database.{quote}
So in HLF, if the peer is using levelDB then it is de-factor also the database (since it's embedded).
Also, gossip has *lots* of state.
I think that since the project also in a way defines how to deploy fabric, we are also responsible for its devOps aspects in a way;;;","12/May/17 11:39 PM;wlahti;Makes sense. Just wanted to get the conversation going again.;;;","23/Jan/20 3:57 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fine grained channel creation thresholds,FAB-2806,15379,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,yacovm,yacovm,17/Mar/17 12:09 AM,27/Jul/19 9:11 PM,28/Oct/23 2:59 AM,27/Jul/19 9:11 PM,,,,,,,,,,,,0,,,,,,,,"Currently, after https://gerrit.hyperledger.org/r/#/c/7199/ was merged, it is possible to restrict the number of channels globally in the system, in order to stop a malicious user from creating an infinite amount of channels.

However, this opens another attack- a malicious user can now create a finite amount of channels, thus preventing from anyone else from creating a channel.

I think it would be good if there could be an additional policy that limits number of channels created to the organization of the creator, so that other organizations would not be effected by the described attack.

[~jyellick] [~kchristidis]",,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo6v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jul/19 9:11 PM;mastersingh24;been out there for over two years ... not likely to ever happen;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"error ""Extensions not allowed in v2 certificate"" while loading certs from genesis block",FAB-2807,15380,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,tuand,tuand,17/Mar/17 2:35 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/Mar/17 3:01 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,v1.0,,,,,,,"I'm trying to drive the e2e scenario from the Java SDK. 

configtx.yaml, mychannel.tx, twoorgs.orderer.block and all the certs were copied from the node SDK test/fixture/channel directory.

I get this error after creating channel completes and I get the genesis block and I read the MSP certs into my trust store.

There are a few certs that looked suspicious , e.g.  channel/crypto-config/peerOrganizations/peerOrg2/msp/cacerts/peerOrg1.pem  which  when I do a 
_openssl x509 -text -noout -in peerOrg1.pem_ , I get this
{quote}
Certificate:
    Data:
        Version: 4 (0x3)
        Serial Number: 1000 (0x3e8)
        Signature Algorithm: ecdsa-with-SHA256
        Issuer: CN=peerOrg1
        Validity
            Not Before: Feb 20 19:06:10 2017 GMT
            Not After : Feb 20 19:06:10 2018 GMT
        Subject: CN=peerOrg1
        Subject Public Key Info:
{quote}

Both [~jimthematrix] and [~ashutosh_kumar] think this is the problem
",,tuand,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo73:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,tuand,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Mar/17 3:01 AM;tuand;The error comes from trying to parse an extraneous cert in the node-sdk/crypto-config/peerOrganizations/peerOrg2/msp directory.

Closing this issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
getHistoryForMarble called as 'invoke' operation passes the test with incorrect results,FAB-2808,15381,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,Nishi,Nishi,17/Mar/17 4:25 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,08/Jun/17 1:45 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,Ledger,,,,,,,"Commit level: *14055d70d9593e99295c7846076fc9dcfb1e052e*
In e2e test scenario using chaincodeAPIDriver, chaincode calls executed on marble1 before getHistory:
init, delete

call that incorrectly executed in shell script as CLI:
peer chaincode invoke -o $ORDERER_IP:7050 -C $CHANNEL_NAME$i -n $CHAINCODE_NAME$ch -c '{""Args"":[""getHistoryForMarble"",""marble1""]}'
*instead of*
peer chaincode query -o $ORDERER_IP:7050 -C $CHANNEL_NAME$i -n $CHAINCODE_NAME$ch -c '{""Args"":[""getHistoryForMarble"",""marble1""]}'

Had the e2e scenario pass, but the results from getHistoryForMarble were incorrect with 2 txID's for (assuming they were for two operations init, delete), txID for was repeated with same exact value in the output.

Sample Output file after ""invoke"" on ""getHistoryForMarble"":
{code}
2017-03-16 14:05:18.702 UTC [chaincodeCmd] chaincodeInvokeOrQuery -> INFO 008 Invoke result: version:1 response:<status:200 message:""OK"" payload:""[{\""TxId\"":\""a6fab9381bb33c163ec6ba5cecc48a1ca38b139c8f8b008932e48a6a86c7646f\"", \""Value\"":{\""docType\"":\""marble\"",\""name\"":\""marble3\"",\""color\"":\""blue\"",\""size\"":45,\""owner\"":\""tom\""}}]"" > payload:""\n \250\004\316\331\222\307\177x\021\301\034z\242\330\347\0253F^\007\025]\333\203eM\246\323\263\350aU\022\302\001\n\024\001\004lccc\001\005mycc0\004\001\001\001\001\000\000\032\251\001\010\310\001\032\243\001[{\""TxId\"":\""a6fab9381bb33c163ec6ba5cecc48a1ca38b139c8f8b008932e48a6a86c7646f\"", \""Value\"":{\""docType\"":\""marble\"",\""name\"":\""marble3\"",\""color\"":\""blue\"",\""size\"":45,\""owner\"":\""tom\""}}]"" endorsement:<endorser:""\n\007Org0MSP\022\210\004-----BEGIN -----\nMIIBYzCCAQmgAwIBAwICA+gwCgYIKoZIzj0EAwIwEzERMA8GA1UEAwwIcGVlck9y\nZzAwHhcNMTcwMjIwMTkwNjExWhcNMTgwMjIwMTkwNjExWjAQMQ4wDAYDVQQDDAVw\nZWVyMTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABI9/7z3nMORUeS3rZ+F93ymD\nR2jiB6Wm+QSoSz/uQuRavnoksgU6peF5rBMfebk/PfNoVjdR4egCqAHBHIpp7Iuj\nUDBOMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFJpxVAXpMAEOHtbNCwvL1m/ku9gt\nMB8GA1UdIwQYMBaAFFQzuQR1RZP/Qn/BNDtGSa8n4eN/MAoGCCqGSM49BAMCA0gA\nMEUCIQDsQ6lmuLdKmMgnN5+9YjlpCRQEJCoaG3uxRHhrAecZngIgQZlwnvwka+TM\ngF/yC3r2MeELK9ocw8c22DAe6x71RT4=\n-----END -----\n"" signature:""0E\002!\000\216\2253\330\2370(h\346 e\344;3\010\2235\250\275\367*\001\364\340\nfh\n\3320\252\374\002 (\200\344\203{\002*!\273pD\000\013\323B\302\021\003}\033r\r\316|\234K\\,'(\330\037"" > 
2017-03-16 14:05:18.703 UTC [main] main -> INFO 009 Exiting.....
{code}
",,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4pz:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jun/17 1:45 AM;denyeart;It looks like the JSON is simply printed twice in the log message, rather than the txid appearing twice in the response JSON.  I don't think this is an issue.  I will close, but please open if you think there is a real issue here.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode pagination of query results,FAB-2809,15382,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,balaji.viswanathan,balaji.viswanathan,17/Mar/17 3:32 PM,20/May/20 6:33 PM,28/Oct/23 2:59 AM,15/Nov/18 10:03 PM,,,,,v1.3.0,,,fabric-peer,,,,7,,,,,,,,"Currently, couchdb queries are limited to configurable max number of results/docs, based on peer queryLimit config option (default 10000).  The shim/peer support pagination but CouchDB query interators do not.

Users often want to add pagination to couchdb queries, since it is not viable to retrieve large numbers of documents from couchdb in a single request.  However, allowing user controlled pagination has risk since users could pass large values for the limit (causing large payloads from couchdb to peer) or could pass large values for skip (causing couchdb to do a large amount of work to iterate through results). Both could add stress to the environment and a malicious user could use this as part of a denial of service attack.  Fabric 1.0 therefore does not support user provided values of limit and skip.

As a workaround in current releases, queryLimit can be set to the preferred page size.  Then the client can drive the paging by doing subsequent queries, as follows:
For range queries, the start key of the next query would be the last key of the prior result set (disregard the first item that comes back).
For rich JSON queries, sort on some field and use that field in the subsequent query filter criteria.
 
It would be preferable for client to be able to specify the page size however, and have more implicit handling of paging.  This task will add safe implicit pagination to CouchDB query iterators using the favored couchdb range query limit/startkey pagination approach described here  [http://docs.couchdb.org/en/2.0.0/couchapp/views/pagination.html#paging-alternate-method.]   A reasonable limit from the peer config will be utilized (e.g. default of 1000). Chaincode will be able to iterate through as many results as desired, with the implicit pagination retrieving the next set of rows as needed.  This approach enforces safe pagination, and abstracts pagination away from the chaincode, so that the chaincode author and client authors do not have to think about it.  It will also allow for raising the max queryLimit to a much larger value, for example a total limit default of 1000000 may be put in place, that is, implicitly allow up to 1000 queries of 1000 documents each, by default.
A user or chaincode provided limit will be honored if it is smaller than the peer-configured limit (default 1000).  This will enable applications to do their own paging logic if they still desire to manage it on their own. For example they could have the chaincode implement the limit/startkey paging approach for 100 documents at a time, while the fabric will still protect against large limit and large skip values.

 

*Implemention approach will actually be different for range queries (all_docs api) versus rich/selector queries (_find api):*
 1. startkey/limit approach for range queries - #3 below
 2. storing all the docids in iterator(in-memory) for rich(selector) queries - #2 below

Implemented only for current query support which is mango query and range query. Map-Reduce view couchdb queries are not yet supported by Fabric.

 

+*ANALYSIS OF OPTIONS*+

*Alternate options considered (vs cost):*
 Issue: Shim fetches results in batches (of 100) and returns them to chaincode/caller. On the peer, the handler, maintains a QueryIterator for each txid (query uuid) which is used to fetch Next set of results from ledger. For Couch internally, all queries limit to N results and do no paging.

Proposal: Statedbcouch should fetch results in batches from Couch and return them to handler. Every call to statedb.ResultsIterator.Next() will not translate to couchdb call. The size of the batch could be different from one used by shim (but is best if both match). 
 Revert the shim batch size to 100 (this should not be configurable).
 Retain the config parameter for system-wide couch(or all dbs?) query limits, this will throttle queries that hit couch but it will remain as overall limit on any couch query/view and can be a large number ~1million (ideally this should be on couchdb side, but since it's not...maybe it doesnt matter to couch....so we do away with it?)
 _
 *Approach 1: Use Skip and Limit_*
 For Mango queries:
 Record the querystring/indexname in Query Iterator. manipulate skip and limit and repeat the request (_find or view) everytime statecouchdb is invoked.
 Downside: This is costly as skip is performed on resultset after the query is executed. Every time we skip S and limit to next L results, we will be re-executing the full query (on upto S+L records)
 For Range queries: Without storing new startkey for Next() call, run the same query with skip and limit. Only skip and limit count is stored.

*_Approach 2: Cache the keys (or results) of all documents matching Query_*
 On a call to query
 Perform the query/view as is
 For mango queries
 Store the ""fields"" to be returned as part of QueryIterator
 Store the [N:] docids returned from query into QueryIterator
 For view queries
 Store the [N:] (id,key,value) returned from view into QueryIterator. Since these are mostly aggregates the value should not be large (to store in memory)

On call to Next()
 For mango queries
 Use rich selector query with $contains operator for first N docids and select only required ""fields""
 Run the query and return results
 slice the results in QueryIterator by [N:]
 For map/reduce queries
 Return N results from QueryIterator
 slice the results in QueryIterator by [N:]

One adv of this approach is we can support RowCount() (not important as this is not exposed)
 _
 *Approach 3: Use startkey and startkey_docid_  and limit*
 For Mango queries:
 Sortkeys need not be unique. Sortkeys need not be returned in ""fields"". For sorting, couchdb requires that ""There is an index already defined, with all the sort fields in the sameorder."" - so we cannot add ""_id"" to sortkeys and expect it to also sort by _id and in same direction
 Even if records with same sortkeys are sorted by docid (and in same direction), this will require extensive massaging of querystring during Next() - eg., negating for all results read so far...and then skipping first few records

This can be ONLY be used for map/reduce queries and range queries
 On a call to query
 Store the viewname in the query iterator. 
 Fetch N(limit=) records, where N is the batch size of Couch.
 Store last record's key as startkey and docid as startkey_docid for next invocation of Next()

On a call to Next()
 Use viewname from query iterator
 Add an addition constraint
 Map/Reduce query -> startkey = <startkey>&startkey_docid = <startkey_docid>
 Fetch N+1(limit=) records, where N is the batch size of Couch. Do not set skip. If system-wide limit is specified, then its minof(N+1,system_limit-R) where R is maintained as #records returned by iterator so far.
 Store last record's key as startkey and docid as startkey_docid for next invocation of Next()

The same approach can be used for range queries where we store the last records' key as startkey for next invocation of Next() and avoid using skip.

In all cases, if we get less than limit records, we can mark the iterator as complete
 On statedb.ResultsIterator.Close() (or when the shim sends COMPLETED and cleansup) all resources are released

Refer: [http://docs.couchdb.org/en/latest/couchapp/views/pagination.html]",,alacambra,alexvicegrab,antitoine,balaji.viswanathan,BhaveshPatadiya,chris.elder,ChristopherFerris,denyeart,DrVadson,joaquimpedrooliveira,jorgego,luomin,nicolapaoli,pandrejko,pd93,SjirNijssen,smartheye,sstone1,troyronda,xuanyue202,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5369,,,,,,,,FAB-2462,FAB-2531,FAB-5369,FAB-12881,,,,,,,,,,,,,,,,,Done.,https://docs.google.com/document/d/1AzcVjVbuvZGRozfNe3ksIpK-cBMlhhbGOUZhg2bzPW8/edit?usp=sharing,Not Required,,Done,,,Chaincode pagination of query results,,,,Done,,,,"1|hzwzxb:",,,,No,Done,Next Items- Ledger,,,,,,,,,,,,,,,,,,"[Chris Elder to add integration test plan, collaborate with Adnan on system test plan]

SVT Prime for reviewing testplan: Adnan",,,,,,alacambra,alexvicegrab,antitoine,balaji.viswanathan,BhaveshPatadiya,chris.elder,ChristopherFerris,denyeart,DrVadson,joaquimpedrooliveira,jorgego,luomin,nicolapaoli,pandrejko,pd93,SjirNijssen,smartheye,sstone1,troyronda,xuanyue202,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 12:54 AM;denyeart;There has been a decision to defer significant refactoring from v1, and focus on stabilization. This change will be evaluated once a post-v1 branch becomes available.;;;","12/Apr/17 12:57 AM;denyeart;[~balaji.viswanathan] You have a box document with options enumerated.  Please copy that content into the Description here and update as needed.   Also, the box document mentions to use approach #3 for range queries (startkey), whereas the commit message says approach #1 will be used for range queries (skip/limit). Please reconcile those differences.;;;","12/Apr/17 1:40 AM;ChristopherFerris;why isn't https://gerrit.hyperledger.org/r/7779 related if it is referencing this JIRA? ;;;","12/Apr/17 3:18 AM;denyeart;[~ChristopherFerris] https://gerrit.hyperledger.org/r/#/c/7779/ implements (and links to) this Jira work item.  Are we supposed to have cross-indexing where each Jira item also points to the Gerrit changeset?;;;","24/Apr/17 11:54 AM;denyeart;[~balaji.viswanathan] Although this item is deferred from v1.0, Balaji could you address the prior comment while fresh in your mind- copy the box content to Description and reconcile final recommendation as you copy it over.;;;","24/Apr/17 9:28 PM;balaji.viswanathan;Done. ;;;","25/Apr/17 4:22 AM;denyeart;Thanks [~balaji.viswanathan].

Question on approach 1 - it says ""For Range queries: this is same as approach 3.""   Approach 3 for range queries uses startkey instead of skip, so this is not the same as approach 3.  Please clarify in description what you mean.

Finally, please sync up the commit message to match in https://gerrit.hyperledger.org/r/#/c/7779/.  Currently the commit message says ""For range and view queries, this is done using skip and limit."".  I think it should say, ""For range queries (and view queries in the future), this is done using startkey and limit.""   Right?;;;","25/Apr/17 3:51 PM;balaji.viswanathan;Done;;;","03/May/17 7:47 PM;denyeart;This item has been deferred from v1.
See proposed changeset for future: https://gerrit.hyperledger.org/r/#/c/7779/;;;","04/Oct/17 4:16 AM;sstone1;Just to back up what Dave said - this is a real pain for Composer users. It comes up without fail at least once a week, if not more. Composer users want to be able to build apps that page through large result sets (perhaps lists of assets matching a given query), and they can't do that at the moment. Their only option is to mirror the Blockchain data into an external database and build an app which queries that instead.

Have left the same comment in FAB-5369.;;;","24/Oct/17 6:35 PM;balaji.viswanathan;An alternative, which could both be safe and satisfy composer style requirements (where UI/app layer wants pagination control), would be to expose an iterator position externally (say as a opaque value) with *new* ledger APIs. something like https://docs.mongodb.com/manual/reference/method/js-cursor/;;;","30/Nov/17 5:06 PM;balaji.viswanathan;CouchDB 2.1.1 supports a new 'bookmark' field for pagination (http://docs.couchdb.org/en/latest/api/database/find.html#db-find)

_Mango queries support pagination via the bookmark field. Every ??_find?? response contains a bookmark - a token that CouchDB uses to determine where to resume from when subsequent queries are made. To get the next set of query results, add the bookmark that was received in the previous response to your next request. Remember to keep the ??selector?? the same, otherwise you will receive unexpected results. To paginate backwards, you can use a previous bookmark to return the previous set of results._

This would be preferable to skip and limit. We could continue to have a system wide limit and discontinue skip completely. 2 Options. The query results could expose the bookmark to the chaincode and let the user decide how to use it subsequently. It could also use the bookmark internally for the iterator.;;;","30/Dec/17 1:56 AM;denyeart;[~balaji.viswanathan] We actually weren't going to use the 'skip' approach since it is inefficient.  We had decided on these approaches: 
 # startkey/limit approach for range queries - #3 in Description
 # storing all the docids in iterator(in-memory) for rich (selector _find) queries - #2 in Description.

Now that bookmark is available for selector _find queries, I would agree that we should shift as follows:
 # startkey/limit approach for range queries - #3 in Description
 # bookmark approach for rich (selector _find) queries.  This also simplifies the solution.

I would prefer the iterator do the paging against CouchDB implicitly, and not expose it to chaincode.  This will keep consistent behavior for the chaincode user, whether they are iterating through a range query or selector query.

This will require upgrading to CouchDB 2.1.1 first, I've created FAB-7572 for that.;;;","02/Jan/18 4:38 PM;sstone1;[~denyeart] without exposing the bookmark to the chaincode, how could a client application page through a large result set from a rich query? This would have to be done across multiple requests to the chaincode.;;;","02/Jan/18 9:50 PM;denyeart;[~sstone1] In all the approaches discussed here, the chaincode container would implicitly fetch the next page of results from couchdb, without the client or chaincode author having to do anything.  If the chaincode nexts to the 1001st record, the chaincode container implicitly gets the next page of 1000 from couchdb without requiring the client or chaincode to do anything.  This is good for scenarios where the chaincode is doing logic against the result set but the client does not need all the results back.

I think in the scenario you mention the client actually wants to get all the results back, and in this case you are right, we will need to expose the bookmark to the client so that they can request the next page themselves.

I think this is a good balance - handle the chaincode to couchdb paging implicitly, while allowing the client to control client to chaincode paging.  Does that make sense?;;;","02/Jan/18 10:20 PM;sstone1;[~denyeart] that sounds good, just to make sure we're on the same page I think the 3 approaches are:
 # startkey/limit approach for range queries
 # bookmark approach for rich queries, built into the query iterator and hidden from the user so the chaincode can process large result sets without sending them all back
 # bookmark approach for rich queries, externalised so the same user can use the bookmark in subsequent chaincode invocations to get the next page in the result set.

For 3), I guess the only question for me is how is the page size controlled - it's not clear from the CouchDB docs whether or not ""limit"" is used to control the page size. 

 ;;;","05/Jan/18 2:47 PM;balaji.viswanathan;I think there is real value in exposing the bookmark to the client and allowing it to do pagination. Most UI apps would want control over how much to display w/o having to fetch all the results into memory. Another frequent ask has been count of documents returned without having to go through the iterator. We will need a new interface to expose these (bookmark and count) for an iterator.

However, exposing bookmark _and_ using it internally might mean doing 2 queries for every executeSelect query and also complicate applying system wide limits.

Case 1: User provides a limit N which is greater than batch size B

a. Execute the selector query as-is and record the bookmark and #count of documents received. The selector query can be modified here to just return _id field and not the full documents.

b. Execute the selector query again with limit = B, populate the iterator cache and use the bookmark internally for retrieving next batch on Next()

Case 2: User provides a limit N which is greater than system-wide limit R 

a. Execute the selector query with limit overridden to R, record the bookmark, #count and fact that limit was overridden.

b. Execute the selector query again with limit = B, populate the iterator cache and use the bookmark internally for retrieving next batch on Next()

We need to record that the limit was overridden as the client uses the condition #count < limit to identify that its on the last page. The client needs to be aware that its limit of N has been overridden to R.

Case 3: User provides a limit N which is smaller than batch limit B

Here we can do just one query for limit=N

Case 4: User does not provide a limit

CouchDB defaults to limit=25, here we have an option to use the limit as B and perform one query.

All UI driven queries are likely to fall in case 3. A page is unlikely to be > batch size.

Note: CouchDB bookmarks are returned for only selector queries and not views and limit is used for pagination. bookmark is 'nil' if no results are returned. ;;;","31/Jan/18 12:38 AM;denyeart;Thanks for the comments [~sstone1] and [~balaji.viswanathan] .  I agree that we will need a chaincode API that allows external control of paging.

In some scenarios the client app needs to page/iterate through many records, for these scenarios the explicit paging control will be passed to chaincode ( bookmark/limit for selector queries, startkey/limit for range queries).  I think we will need a new chaincode API such as ExecuteQueryWithOptions() which could take a map of query options (this will allow the API to work across various state databases in the future).

In other scenarios the chaincode needs to iterate through many records, for these scenarios the implicit paging upon Next() in the chaincode will drive the query for the next page, e.g. upon Next() to the 1001st record if the default page size is 1000.

I agree we'll need some controls like [~balaji.viswanathan] mentioned to coordinate the explicit and implicit paging.

Fabric just moved up to CouchDB 2.1.1 which supports the more efficient 'bookmark' style of paging, so this work can begin now.  Note that 1.1 is in feature freeze, therefore the paging support is targeted for 1.2.;;;","23/Mar/18 10:33 PM;chris.elder;Created design document for CouchDB pagination changes:

 

https://docs.google.com/document/d/1AzcVjVbuvZGRozfNe3ksIpK-cBMlhhbGOUZhg2bzPW8/edit?usp=sharing;;;","19/Jun/18 9:38 PM;denyeart;Deferred to v1.3.;;;","26/Jun/18 9:19 PM;alexvicegrab;Any chance we can get this in as a 1.2 patch feature?

This is a critical issue for deploying to production.;;;","27/Jun/18 8:29 PM;denyeart;[~alexvicegrab] v1.2 content is finalized. The next vehicle for new features will be v1.3.  Agreed this is important, only constraint has been resource availability.;;;",,,,,,,,,,,,,,,,,,
Use proto messages for trasnaction read-write set,FAB-2810,15383,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,17/Mar/17 6:53 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,04/Apr/17 4:54 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,The read-write set of a transaction uses custom serialization/deserialization. Change this to use proto messages so that it's easier to share with other components such as SDK.,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-610,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx57j:",,,,Unset,,Sprint 15  - Ledger,,,,,,,,,,,,,Unset,,,,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve debug logging for GRPC connections,FAB-2811,15384,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,17/Mar/17 10:54 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,07/Jun/17 6:00 PM,,,,,v1.0.0,v1.0.0-beta,,fabric-peer,,,,0,,,,,,,,"It's pretty hard to debug GRPC connection errors (since typically bad connections end up throwing a timeout).

Investigate and hopefully implement a solution to this.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxo7b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Mar/17 10:55 PM;mastersingh24;[~bmos299]  opened this to figure out how to provide better debug / log info for GRPC issues;;;","18/May/17 6:38 PM;mastersingh24;[https://gerrit.hyperledger.org/r/#/c/8835/]  handles this ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update default batch timeout to 2s,FAB-2814,15387,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,17/Mar/17 11:57 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,20/Mar/17 11:57 PM,,,,,,,,fabric-orderer,,,,0,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5zz:",,,,Unset,,Sprint 14 - Consensus,,,,,,,,,,,,1.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable configtxgen for config updates,FAB-2815,15388,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,18/Mar/17 12:05 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,11/May/17 10:40 PM,,,,,WON'T FIX,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1678,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx607:",,,,Unset,,,,,,,,,,,,,,13.0,Unset,,,,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
v1.0 node SDK Documentation,FAB-2816,15389,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jimthematrix,jimthematrix,18/Mar/17 1:08 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,02/Jul/17 9:20 PM,,,,,v1.0.0,,,fabric-docs,fabric-sdk-node,,,0,,,,,,,,"* Complete and accurate API references doc
* Easy to follow tutorials with code snippets",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx48n:",,,,Unset,,Sprint 14 - SDK node,Sprint 15 - SDK node,,,,,,,,,,,,Unset,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrated content from jsdoc syntax and tutorials,FAB-2817,15390,15389,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,18/Mar/17 1:11 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Mar/17 4:29 AM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,gulp-jsdoc3 utilizes the @tutorial tag in jsdoc syntax and allows hand-written content in .md syntax to be generated as tutorials. we should add this to the gulp doc task so all the documentation content use consistent styling,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo7z:",,,,,,Sprint 14 - SDK node,Sprint 15 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a v1.0 tutorials content skeleton,FAB-2818,15391,15389,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,18/Mar/17 1:11 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/Jul/17 9:20 PM,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,"* index (DONE)
* Overview and dev environment setup (DONE)
* work with TLS enabled or disabled
* create user identities for signing purposes
** with fabric-ca
** with pre-existing keys and certs issued by external CAs
* create a new channel, with configtxgen and configtxlator (DONE)
* update a channel with configtxlator
* use event hub
* join peers to a channel
* install chaincode
* instantiate chaincode
* invoke transactions
* make queries
* construct endorsement policies
* use the hierarchical configuration settings
* use the logging facility
* use the key value store to save application state
* use the crypto key store for private keys
* Code for automatic failover",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo87:",,,,,,Sprint 14 - SDK node,Sprint 15 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tutorial: simple getting started with 1 orderer + 1 peer + 1 fabric-ca setup without TLS,FAB-2819,15392,15389,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,18/Mar/17 1:15 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,19/May/17 10:52 PM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,"provide code snippet for docker-compose
explain how to pull x86 docker images and tag them as latest
how to write a simple app targeting the ""testchainid"" default channel and default MSP, that does:
- install chaincode
- instantiate chaincode
- invoke transaction
- query",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo8f:",,,,,,Sprint 14 - SDK node,Sprint 15 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tutorial: create channel and join channel with 1 orderer + 1 peer + 1 fabric-ca no TLS,FAB-2820,15393,15389,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jimthematrix,jimthematrix,18/Mar/17 1:16 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/Jul/17 9:20 PM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo8n:",,,,,,Sprint 14 - SDK node,Sprint 15 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Print read set, write set, delta set on inspection",FAB-2821,15394,15388,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,18/Mar/17 2:57 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 4:57 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo8v:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,jyellick,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 4:10 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7315/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""failed to obtain cds for mycc"" error in e2e_cli test modified to Invoke before first Query",FAB-2822,15395,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,binhn,scottz,scottz,18/Mar/17 8:36 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Jun/17 9:34 AM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,"{noformat}
Error endorsing invoke: rpc error: code = 2 desc = failed to obtain cds for mycc - transaction not found mycc/mychannel
{noformat}


The above error was seen in cli logs during the attempt to invoke on peer 0, when executing e2e_cli using commit: fa3d88c Release 1.0.0-alpha. 

**Note* there was one tiny modification to e2e_cli/scripts/script.sh : I moved up the statement to send the Invoke on peer0 PRIOR TO the Query on peer0.


{noformat}
vagrant@hyperledger-devenv:v0.3.0-db6af20:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli$ ./network_setup.sh restart
{noformat}


There were other changes which seemed to be contributing factors in reproducing this, but hopefully this writeup provides the simplest form and is enough to find the root cause.  For example, increasing the BatchTimeout often (but not always) resulted in this error, especially when  > 30 seconds.

For reference, some logs are attached. And, below in the ""Environment"" section are details of my test environment, showing the script changes.","
For reference, some logs are attached. And, below are details of my test environment (docker containers in vagrant, on linux laptop), showing the script changes.


{noformat}
vagrant@hyperledger-devenv:v0.3.0-db6af20:/opt/gopath/src/github.com/hyperledger/fabric/examples/e2e_cli$ git diffdiff --git a/examples/e2e_cli/docker-compose.yaml b/examples/e2e_cli/docker-compose.yaml
index dee9eae..b2f455a 100644
--- a/examples/e2e_cli/docker-compose.yaml
+++ b/examples/e2e_cli/docker-compose.yaml
@@ -6,6 +6,7 @@ services:
     container_name: orderer0
     image: hyperledger/fabric-orderer
     environment:
+      - CORE_LOGGING_LEVEL=DEBUG
       - ORDERER_GENERAL_LOGLEVEL=debug
       - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
       - ORDERER_GENERAL_GENESISMETHOD=file
diff --git a/examples/e2e_cli/scripts/script.sh b/examples/e2e_cli/scripts/script.sh
index 6591709..39ec238 100755
--- a/examples/e2e_cli/scripts/script.sh
+++ b/examples/e2e_cli/scripts/script.sh
@@ -2,7 +2,7 @@
 
 CHANNEL_NAME=""$1""
 : ${CHANNEL_NAME:=""mychannel""}
-: ${TIMEOUT:=""60""}
+: ${TIMEOUT:=""90""}
 COUNTER=0
 MAX_RETRY=5
 ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem
@@ -158,13 +158,13 @@ installChaincode 2
 echo ""Instantiating chaincode on Peer2/Org1 ...""
 instantiateChaincode 2
 
-#Query on chaincode on Peer0/Org0
-chaincodeQuery 0 100
-
 #Invoke on chaincode on Peer0/Org0
 echo ""send Invoke transaction on Peer0/Org0 ...""
 chaincodeInvoke 0
 
+#Query on chaincode on Peer0/Org0
+chaincodeQuery 0 90
+
 ## Install chaincode on Peer3/Org1
 installChaincode 3
{noformat}
",antitoine,binhn,denyeart,Honglei,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Mar/17 8:36 AM;scottz;logs_fail_2s_10_invokefirst_FriMar172017.tar.gz;https://jira.hyperledger.org/secure/attachment/10595/logs_fail_2s_10_invokefirst_FriMar172017.tar.gz","18/Mar/17 8:36 AM;scottz;logs_pass_2s_10_queryfirst_FriMar172017.tar.gz;https://jira.hyperledger.org/secure/attachment/10596/logs_pass_2s_10_queryfirst_FriMar172017.tar.gz",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7gf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,antitoine,binhn,denyeart,Honglei,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Mar/17 7:55 PM;Honglei;The root cause is chaincode-instantiate txn has not been committed yet.  In e2e, query will retry, and wait for the instantiation, but invoke will not.
I think it is expected?;;;","28/Mar/17 7:55 AM;scottz;Even if development team members all agree that this is expected to fail based on the current design, then we still have a problem. If this and other early transactions fail due to the instantiation not being completed, then it should say that. This error message seems to be intended for a real problem: any generic situation where the internal data objects are not present when they should be present. However, this is a special case for the first transaction (one or several). It is explainable. 

Moreover, I would hope the transaction should not fail but rather should just take a long time (and it is up to the application to avoid time out for say 20 secs to give it time to succeed). If it is expected to fail, then there is a bigger problem because that implies the first transaction(s) will always fail, which is unacceptable. Minimally, we should provide a better error message - so the user can understand and retry. In addition, we should consider propagating the deployment to all peers once one peer is instantiated - so the network is ready when users start to send in transactions.;;;","12/Apr/17 5:24 AM;denyeart;Since the problem happens when BatchTimeout is increased, my first guess is that the chaincode instantiation has not been committed by the time you do invoke/query.

If you still see this issue and it is in fact not due to a timing issue, please re-open.;;;","12/Apr/17 11:34 PM;scottz;Sorry, but closing issues requires verification, not a theory. The problem was not simply due to a large batchtimeout. And please read my comments, written after the description, which describe other work that must be done regardless.;;;","26/Apr/17 10:30 PM;binhn;[~scottz] 
It looks like we should change the error message to be clearer, which we can take up during serviceability work. I think it is the same as HTTP 404
;;;","02/Jun/17 11:22 PM;scottz;Part 1:  I agree this most likely falls under category of serviceability. I don't know, but it may require another check or two in the code to confirm the ""failed to instantiate"" theory, to differentiate that situation from other error conditions leading to this error, and to print appropriate message.

Part 2: I don't see any responses to my suggestion to instantiate on all peers that have already deployed the chaincode, at the same time when the instantiate is done on the first peer. By not doing that, the first (several) queries/invokes to a peer are significantly delayed and could easily fail due to the delay of the instantiation on each peer.;;;","03/Jun/17 3:13 AM;binhn;[~scottz]

Ok I think we're settled on part 1. I can try to do that with better message when we can't local CDS, meaning the chaincode has not been instantiated.

re part 2:  
{quote}my suggestion to instantiate on all peers that have already deployed the chaincode, at the same time
{quote}
This is a distributed system, so there's no concept of ""the same time"". Each peer must operate independently, and only through consensus, they agree on a value, again, not at the same time, but the same sequence.;;;","03/Jun/17 6:15 AM;binhn;In review https://gerrit.hyperledger.org/r/#/c/10093/;;;","03/Jun/17 10:47 AM;scottz;OK.

We can discuss #2 separately, to see if there is something we can do to prevent the probably failiure of the first transactions on each peer that joins the party. Let me reword the following way, to enable that discussion:

The phrase ""at the same time"" would make sense if you consider ""the moment"" when it is first instantiated on any peer with the assumptions that multiple peers have installed the chaincode and have joined the channel. If I am not mistaken, every other peer in the channel is notified, but does not actually start the chaincode running until it is invoked or queried on each peer. (If not, then they could be. And won't they need it to be running to process received delivered transactions anyways?) At that moment, those other peers could start the chaincode running.

A more general way I might express that concept, would be to say whenever any peer reaches the state where it has both joined a channel containing the chaincode and that chaincode is installed on that peer, (and optionally also requiring at least one peer on the channel to instantiate it, which could trigger notification to other peers). Then, as you suggest, yes they would each instantiate/start the chaincode running at different times - but it could be consistently said that would mean each of them would do it as soon as it becomes ready and able and willing to run it (instead of waiting until it is needed - which will undoubtedly result in failures the first time a transaction arrives that requests it).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SDK overview and features,FAB-2823,15396,15389,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,18/Mar/17 1:43 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Mar/17 4:29 AM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo93:",,,,,,Sprint 14 - SDK node,Sprint 15 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect configtx.yaml selected when environment config paths are available,FAB-2824,15397,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,passkit,passkit,passkit,18/Mar/17 11:41 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/Apr/17 3:09 AM,,,,,v1.0.0-alpha1,,,fabric-orderer,,,,0,common-components,,,,,,,"When using configtxgen locally, the configtx.yaml from the source folder will always be selected even if Orderer or Peer config paths are specified. 

For loop in localconfig/congif.go is not exited when a valid config path is found.  This is inconsistent with how it is handled in provisional/provisional.go.

{code}
for _, genesisPath := range searchPath {
		logger.Infof(""Checking for configtx.yaml at: %s"", genesisPath)
		if _, err := os.Stat(filepath.Join(genesisPath, ""configtx.yaml"")); err != nil {
			// The yaml file does not exist in this component of the path
			continue
		}
		cfgPath = genesisPath
                // loop continues and value is overwritten on next pass.
	}
{code}",,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxo9b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Mar/17 12:45 AM;passkit;https://gerrit.hyperledger.org/r/#/c/7333/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support alternate docker registries,FAB-2826,15399,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,greg.haskins,greg.haskins,greg.haskins,19/Mar/17 3:41 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,07/Apr/17 6:43 AM,,,,,,,,,,,,0,,,,,,,,The build currently assumes docker.io/hyperledger when dealing with docker images.  There may be cases such as in QA/CI or for downstream/private implementations where other registries would be desirable.  The build should make this configurable,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxo9r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delivery service persists connection to ordering service when not needed,FAB-2828,15401,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,19/Mar/17 5:42 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Apr/17 6:54 AM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"The delivery service (core/deliveryclient.go) creates a connection at its creation, and doesn't close it even when it's not a leader. 

This will impact scalability of a fabric deployment with a large number of peers. ",,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2759,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoa7:",,,,,,Sprint 15 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/17 6:20 PM;C0rWin;Issue duplicates FAB-2759, closing this one.;;;","10/Apr/17 6:50 AM;C0rWin;[~yacovm], I'm not sure why you re-opened this item, as it duplicates FAB-2759. If this is not a duplicated then it should not be ""In Review"" state as nothing related is in gerrit.;;;","10/Apr/17 6:54 AM;yacovm;it is not clear indeed;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Build fails if Docker proxy flags contain whitespace,FAB-2829,15402,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,passkit,passkit,passkit,19/Mar/17 9:58 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Mar/17 12:49 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,"There are cases where the make script setting DOCKER_BUILD_FLAGS and DOCKER_RUN_FLAGS that are used to set DBUILD and DRUN can generate variables containing whitespace.

This causes the build to break, as in this example:
{code}
Building docker ccenv-image docker build --build-arg no_proxy=*.local, 169.254/16
docker build --build-arg no_proxy=*.local, 169.254/16 -t hyperledger/fabric-ccenv build/image/ccenv
""docker build"" requires exactly 1 argument(s).
{code}
",,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoaf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Mar/17 12:28 AM;passkit;https://gerrit.hyperledger.org/r/#/c/7341/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent startup errors occur for hyperledger/fabric-couchdb Docker containers,FAB-2830,15403,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrijk,harrijk,harrijk,19/Mar/17 11:21 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Mar/17 10:37 PM,,,,,v1.0.0,,,fabric-quality,,,,0,build-system,,,,,,,"The hyperledger/fabric-couchdb docker images's entry point executes a script to start couchdb.  On occasion the hyperledger/fabric-couchdb Docker container exits with the following error:

su-exec: /opt/couchdb/bin/couchdb: Text file busy

I believe that delaying the execution of the /opt/couchdb/bin/couchdb command through the use of a sleep command just prior to starting couchdb would resolve the issue.",,AdnanChoudhury,harrijk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoan:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,harrijk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add jenkins user to softhsm group and build image in sandbox,FAB-2837,15410,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jwagantall,rameshthoomu,rameshthoomu,21/Mar/17 5:06 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/May/17 2:46 AM,,,,,,,,,,,,0,,,,,,,,"Add jenkins user to softhsm group to execute PKCS11 tests in sdk-node. Apply below command to provide jenkins user to softhsm group and he should be able to execute node PKCS 11 tests.

Add below code at 161 line in file https://github.com/hyperledger/ci-management/blob/master/packer/provision/docker.sh#L161 and build image in Sandbox to test.

{code:java}
chown -r $USER:$USER /var/lib/softhsm /etc/softhsm
{code}

https://github.com/hyperledger/ci-management/blob/master/packer/provision/docker.sh#L161


More information is provided here for reference:
https://jira.hyperledger.org/browse/FAB-2797

and Build result is provided here 
https://jenkins.hyperledger.org/sandbox/job/fabric-sdk-node-verify-x86_64/1/console",,jwagantall,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-364,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxobr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jwagantall,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Mar/17 6:52 AM;jwagantall;https://gerrit.hyperledger.org/r/#/c/7357/1;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sync End2EndITJavaChaincode with End2EndIT,FAB-2838,15411,15227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,21/Mar/17 5:26 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,11/Apr/17 12:39 AM,,,,,,,,fabric-sdk-java,,,,0,,,,,,,,"Abandoned.
https://gerrit.hyperledger.org/r/#/c/7359/",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxobz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
node SDK - Handling networking issues,FAB-2843,15416,15902,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,harrisob@us.ibm.com,jimthematrix,jimthematrix,21/Mar/17 9:57 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,06/Jun/17 12:05 AM,,,,,v1.0.0,,,fabric-sdk-node,,,,1,,,,,,,,"when connections to the orderer (or any other stream connections) gets dropped, we need to captures the error from GRPC and do necessary compensations such as trying to reconnect, or notify the application.",,Clayton Sims,DennisM330,mlishok,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3310,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3an:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,DennisM330,mlishok,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 4:16 AM;mlishok;specifically for the event stream, how to determine when the underlying stream goes away and hasn't reported, a heartbeat type solution would help both keep the stream alive and report back to registered handlers that the stream has gone away. The client application however would still need to compensate for the lost event. 

;;;","11/Apr/17 4:34 AM;mlishok;https://jira.hyperledger.org/browse/FAB-1261 would be similar common heartbeat service as part of all the fabric endpoints. ;;;","29/Apr/17 3:57 AM;Clayton Sims;Per discussions with Jim and Gari this should be a debug.   Highly likely tied to 3310 that is being worked by Gari
;;;","04/May/17 10:09 PM;Clayton Sims;Its highly likely this is a dup of 3310.   Lowered it - so its not highest for the moment and track it via 3310.;;;","06/Jun/17 12:05 AM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/9165/
https://gerrit.hyperledger.org/r/#/c/9717/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"using examples/e2e_cli,the peer nodes have a lot of TCP connectoin",FAB-2844,15417,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,yong,yong,21/Mar/17 11:56 AM,23/Jan/20 3:57 AM,28/Oct/23 2:59 AM,23/Jan/20 3:57 AM,,,,,,,,fabric-peer,,,,0,stale-item,,,,,,,"using examples/e2e_cli,the peer nodes have a lot of TCP connectoin. Why? BUG?
tcp        0      0 172.18.0.4:58242        172.18.0.5:7051         ESTABLISHED
tcp        0      0 172.18.0.4:40096        172.18.0.5:7051         ESTABLISHED
tcp        0      0 172.18.0.4:52170        172.18.0.5:7051         ESTABLISHED
tcp        0      0 172.18.0.4:59636        172.18.0.5:7051         ESTABLISHED
tcp        0      0 172.18.0.4:58258        172.18.0.5:7051         ESTABLISHED
tcp        0      0 172.18.0.4:40906        172.18.0.5:7051         ESTABLISHED
tcp        0      0 172.18.0.4:43598        172.18.0.5:7051         ESTABLISHED
tcp        0      0 172.18.0.4:39358        172.18.0.5:7051         ESTABLISHED
# netstat -an | wc -l
2293",,sykesm,yong,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxocf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,sykesm,yong,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:57 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support TLS for peer to couchdb communication,FAB-2846,15419,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,mastersingh24,rhegde,denyeart,21/Mar/17 10:31 PM,23/Jan/20 7:40 AM,28/Oct/23 2:59 AM,23/Jan/20 7:40 AM,v1.0.0,,,,,,,fabric-ledger,,,,0,Release-planning-1.2,,,,,,,"Especially if couchdb is installed remote from peer, TLS connection is required to secure the communication.",,AdnanChoudhury,ashutosh_kumar,binhn,dbshah,denyeart,elli-androulaki,fredbi,joaquimpedrooliveira,mastersingh24,rhegde,smithbk,sykesm,timpii,wyanglau,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABB-69,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx007:",,,,Unset,,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,Unset,,,,,,,,,,,AdnanChoudhury,ashutosh_kumar,binhn,dbshah,denyeart,elli-androulaki,fredbi,joaquimpedrooliveira,mastersingh24,rhegde,smithbk,sykesm,timpii,wyanglau,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 1:08 AM;wyanglau;My thought is straightforward. 

(1) In the ledger section of core.yaml file, introducing a tag to enable TLS, as well as the path to the cert

{quote}ledger:

  blockchain:

  state:
    # stateDatabase - options are ""goleveldb"", ""CouchDB""
    # goleveldb - default state database stored in goleveldb.
    # CouchDB - store state database in CouchDB
    stateDatabase: goleveldb
    couchDBConfig:
       couchDBAddress: https://0.0.0.0:6984
       username: ryan
       password: whatsoever
      {color:red} tlsEnabled: true{color}
     {color:red}serverCertPath: /opt/couchdb/etc/opensslcerts/server.crt{color}
{quote}

(2) Then, in core/ledger/util/couchdb/couchdb.go, introduce a parameter to establish  URL starting with http/https.

{quote}func CreateConnectionDefinition(couchDBAddress, username, password string, isTLSEnabled bool) (*CouchConnectionDef, error) {


{color:red}scheme:= ""http""
if(isTLSEnabled){
	scheme= ""https""
}{color}

	connectURL := &url.URL{
		Host:   couchDBAddress,
		{color:red}Scheme: scheme,{color}
	}{quote}
(3) Introduce a parameter in *handleRequest* method to indicate the path to cert. Then, create the new certPool and set it in the tlsConfig
{quote}func (couchInstance *CouchInstance) handleRequest(method, connectURL string, data io.Reader, rev string, multipartBoundary string, {color:red}certPath string{color})
	
	capool := x509.NewCertPool();
	pemData, err := ioutil.ReadFile(certPath)
					if err != nil {
							panic(err)
					}
	capool.AppendCertsFromPEM(pemData)
 tlsConfig := &tls.Config{RootCAs: capool }
		// Load our trusted certificate path

	ok := tlsConfig.RootCAs.AppendCertsFromPEM(pemData)
			    if !ok {
			            panic(""Couldn't load PEM data"")
			    }
{quote}


;;;","14/Apr/17 1:12 AM;wyanglau;I haven't done something to modify the e2e example. The tlsEabled and serverCertPath tag could be added to the docker-compose.yaml file as environment variables. Let me know about Gary's design. Thanks. ;;;","18/Apr/17 3:48 AM;denyeart;Thanks [~wyanglau].

My question to [~mastersingh24] was more around CouchDB server side. Which certificates to use for CouchDB?  Were you thinking of re-using certificates that the peer will already have?
Also, could OpenSSL be used for CouchDB TLS regardless of platform?
See SSL enablement info here: https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=48203146;;;","18/Apr/17 6:23 AM;wyanglau;Hi, [~denyeart]
I have followed the wiki to test OpenSSL, by generating a self-signed cert in UNIX and it worked. Same thing should work on a Mac OS. I will test it later. 

Besides, I assume which CA should be used needs a decision. When the couchDB is installed remotely, a new certificate for a specific db makes sense to some extend. However, since the communication between couchDB and peers seems to be internal,
 the existing certificates could be reused. Do you want me to try this out? ;;;","14/May/17 12:54 AM;denyeart;[~mastersingh24] [~elli-androulaki] What are your thoughts on which certificates should be used for the peer's CouchDB server for TLS purpose? Should there be new certificates generated or re-use some existing certificates? Does the answer change depending on whether CouchDB is local to peer (the default) or remote?

Gari, I know you had mentioned you had started working on CouchDB TLS.  Which pieces specifically can you share with [~wyanglau] (assuming he could still work on this).;;;","15/May/17 11:40 PM;wyanglau;Hi [~denyeart],

Yes I could still work on this. Please share the thoughts with me that I could implement; or in any case [~mastersingh24] or [~elli-androulaki] has finished this one, I could transfer this ticket back to you.  Thanks. ;;;","16/May/17 2:25 AM;elli-androulaki;Hi [~denyeart],

Ok, so it seems to me that the connection between peer and couchdb server needs to be mutually authenticated..

That means peer needs to authenticate the couchdb server to ensure it is asking/sending data to the right entity, and the server needs to authenticate the peer to ensure that the data are given access to properly authorised entities (i.e., the peer).

Now the server could authenticate to the peer using a tls cert that is generated for this purpose by peer's infrastructure (e.g., at setup time). After the tls connection is established, the peer could authenticate to the server using the password that was agreed between the two upfront (again at setup time).

Important thing is that the peer already knows the certificate of the couchdb server, i.e., stores it persistently in its local storage, to avoid any man-in-the-middle attacks.;;;","19/May/17 11:48 PM;smithbk;fabric-ca supports a mutual client TLS config as seen at [https://github.com/hyperledger/fabric-ca/blob/master/lib/tls/tls.go#L46]

We could push some of this code to fabric and share the same impl and config model.

Thoughts?;;;","20/May/17 12:07 AM;wyanglau;I didn't find any mutual authentication features in terms of couchDB. Could anyone point me to the direction for how to do this? Thanks. ;;;","20/May/17 12:08 AM;mastersingh24;As far as I know, CouchDB does not support mutual TLS - but I think we are fine without given the Couch does support username/password.

I'd say that there should be a ""fresh"" certificate for CouchDB and agree with Elli that the peer should explicitly trust the CouchDB certificate rather than just trusting the issuer;;;","20/May/17 12:45 AM;mastersingh24;We have config for TLS within fabric already - we can copy the same properties and use them for communication with CouchDB.

[~wyanglau] - CouchDB does not support mutual TLS;;;","20/May/17 1:24 AM;wyanglau;[~mastersingh24] Thanks for clarifying. When you said `we should use a fresh certificate for couchDB`, do you mean a self-signed certificate rather than one signed by the CA of the peer?

 

 ;;;","21/Jul/17 9:55 AM;LeoKotschenreuther;Is there any progress or at least a timeline for this?;;;","21/Jul/17 10:54 PM;wyanglau;[~LeoKotschenreuther] 
https://gerrit.hyperledger.org/r/#/c/10983/1
Hi,  the code was finished. I was waiting for the `-2` tag to be removed, or I would just submit another review request soon. ;;;","15/Aug/17 12:10 AM;wyanglau;I've post a new review here. 
https://gerrit.hyperledger.org/r/#/c/12397/
The code has been merged with latest master. ;;;","23/Aug/17 12:50 AM;timpii;If the code has been done and merged into master, why is the label Release-Planning-1.2 set on this Jira item?;;;","23/Aug/17 12:54 AM;wyanglau;Hi [~timpii] Not merged into master yet; need someone to review the changes first. Is anyone available to review the code? Thanks. ;;;","07/Oct/17 1:51 AM;wyanglau;[~rhegde] Hi, I submitted a new review request which merged with all other conflict, can you take a look or anyone available could review the code? Thanks.

https://gerrit.hyperledger.org/r/#/c/14175/;;;","11/Dec/17 12:38 AM;yacovm;[~mastersingh24]  [~denyeart] what is the status of this? Is this going to v1.1 ?

 

With regarding to mutual TLS - it seems couchDB has: [cacert_file|http://docs.couchdb.org/en/2.0.0/config/http.html#ssl/cacert_file] config parameter.
{quote}The path to a file containing PEM encoded CA certificates. The CA certificates are used to build the server certificate chain, and for client authentication. Also the CAs are used in the list of acceptable client CAs passed to the client when a certificate is requested. May be omitted if there is no need to verify the client and if there are not any intermediate CAs for the server certificate:
{quote}
Doesn't this sound like it has mutual TLS?;;;","18/Jul/18 5:34 AM;ashutosh_kumar;After talking to [~manish-sethi] , I came to know that Couch DB and Peer are colocated on the same host. Why do you need TLS support in that case ? Just trying to understand.;;;","18/Jul/18 10:12 PM;rhegde;Hello [~ashutosh_kumar], Fabric does not restrict or mandates couch database instance to be running on same VM where its' peer is deployed.;;;","19/Jul/18 12:01 AM;denyeart;[~ashutosh_kumar] [~rhegde] I agree this would be good to do - just hasn't been prioritized because in the typical deployment scenario couchdb sits on peer host and the couchdb port is not exposed to the wider network.

[~mastersingh24] Could you provide your thoughts on the last question from [~wyanglau] - ""When you said `we should use a fresh certificate for couchDB`, do you mean a self-signed certificate rather than one signed by the CA of the peer?""

I think getting clarity on the typical certificate flow was the last piece holding this out.  After that is resolved we can re-raise the CR from [~wyanglau] (assuming he's still available to help).;;;","19/Jul/18 12:31 AM;denyeart;[~wyanglau] are you still available to re-raise the CR?  [~ashutosh_kumar] has offered to help with the certificate config flow, so that we can finally get this progressing.;;;","19/Jul/18 12:40 AM;ashutosh_kumar;Couple of clarifications :
 # There is no need for mutual TLS. User of couch db should have White listing in place so that couch can accept connection only from Peers it trust.
 # The Certificate used should be Self Signed Certificate as TLS is going to secure internal communication.;;;","23/Jan/20 7:40 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,
Unable to query and invoke successfully,FAB-2847,15420,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,latitiah,latitiah,21/Mar/17 11:00 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Mar/17 12:38 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"System:
* TLS off
* 3 orderers, 2 peers
* using node SDK (though saw the same error when using cli commands as well)
* peer image version: 0.7.0-snapshot-14055d7

After installing chaincode (example_cc) on both peers, then instantiating the chaincode on 1 peer (1a), I performed a query on 1c. 

Expected (Neither happened):
* chaincode container to start for peer 1c
* receive initial values from the instantiation

I performed a query on 1a. 
Received:
{code:none}
Error: Error endorsing query: rpc error: code = 2 desc = failed to obtain cds for itzmine - transaction not found itzmine/itzmine
{code}

When performing an invoke:
Expected:
* chaincode container to start for peer (since it didn't come up for the query)
* some message that says that the invoke was completed successfully

Received:
{code:none}
[lccc] Invoke -> ERRO 005�[0m ChaincodeId: itzmine does not exist on channel: itzmine(err:chaincode not found itzmine)
{code}

I verified that the chaincode container was running after the instantiation for peer 1a. The chaincode logs show:
{code:none}
########### example_cc Init ###########
Aval = 100, Bval = 200
{code}",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxocn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/17 12:38 AM;latitiah;After speaking with a number of people on this issue, I narrowed the problem down to a lack of communication with the orderer.  Even though it looked as though the instantiation was completing (the chaincode container came up, the log indicating the initial values), the initial values were not being written to the ledger. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove orderer-n-kafka-n Docker Compose configuration,FAB-2848,15421,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,22/Mar/17 12:41 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,27/Mar/17 12:59 PM,,,,,,,,fabric-orderer,,,,0,,,,,,,,"Too early for this, should never have let it in to begin with. See: http://hans.gerwitz.com/2004/08/12/premature-optimization-is-the-root-of-all-evil.html

Also note that a recent commit broke this environment entirely, since it gave the `orderer` service a hard-coded `container-name`.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2673,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxocv:",,,,Unset,,Sprint 14 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/17 12:48 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7367/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use fabric-couchdb instead of the vanilla couchdb in the devenv tool ,FAB-2849,15422,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,22/Mar/17 3:47 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/Apr/17 3:08 AM,,,,,,,,fabric-ledger,,,,0,Ledger,,,,,,,"The development tool in {{devenv/tools/couchdb}} uses the vanilla couchdb instead of the recommended fabric-couchdb. Among other things, fabric-couchdb offers compatibility with Z-machines.

The tool needs to updated to use fabric-couchdb.",,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx587:",,,,,,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the conditional process,FAB-2850,15423,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,22/Mar/17 11:03 AM,21/Jul/18 3:53 AM,28/Oct/23 2:59 AM,26/Mar/17 9:55 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"As chris suggested, we create this jira task.

The conditional process in core/chaincode/shim/chaincode.go is complex to understand, and easy to introduce problem.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxod3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error when create channel,FAB-2851,15424,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,22/Mar/17 11:09 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 10:45 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,"Existing code will throw error of

```
UTC [protoutils] ValidateTransaction -> ERRO 03a validateCommonHeader
returns err invalid header type ORDERER_TRANSACTION
[txvalidator] Validate ->
ERRO 03b Invalid transaction with index 0, error %!s(<nil>)
```
as it does not know the `ORDERER_TRANSACTION` header.
",,baohua,denyeart,jsong1230,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxodb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,denyeart,jsong1230,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/17 1:53 PM;jsong1230;I have the same problem. Did you find a solution?
Thanks in advance.

Jeffrey;;;","12/Apr/17 11:51 AM;denyeart;[~baohua] Will you be adding a test case for the fix in https://gerrit.hyperledger.org/r/#/c/7375/? Can you provide an outlook date?;;;","12/Apr/17 12:32 PM;baohua;Jeffrey, David

I tried latest code, while not finding the problem again, so not sure whether need to add the fix, which may protect from occasional msgs.

Also, this is difficult to design the test case, as needing fvt and log analysis?;;;","12/Apr/17 7:47 PM;denyeart;[~kchristidis]
Could you provide your opinion on this one, as well as the proposed fix in https://gerrit.hyperledger.org/r/#/c/7375.;;;","15/Apr/17 3:06 AM;kchristidis;Taking a look at this now.;;;","15/Apr/17 3:32 AM;kchristidis;[~denyeart]: Left comments on the changeset as requested.

[~baohua]: Please check and let me know.;;;","15/Apr/17 10:44 AM;baohua;I would like to close this issue first, as we are not finding the issue with latest code.

If anyone else find similar issues, can re-open again, thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
setEvent of JavaChaincode,FAB-2852,15425,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,sanchezl,zerppen,zerppen,22/Mar/17 11:51 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/May/17 4:45 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"I have tested java-Chaincode v0.6 . I merged and tested all methods in fabric-sdk-java about chaincode, most of them are good except setEvent. Satheesh  said that can't merge here https://gerrit.hyperledger.org/r/#/c/2975 but I really want to test event for sending event to app,especially in v1.0 .But I can't find setEvent solved in v0.6 branch or master branch. In go,chaincode event supported well.

In my opinion,no matter v0.6 or v1.0,we need chaincode event supported.This is the most basic function.",,ChristopherFerris,rickr,zerppen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,86400,86400,,0%,86400,86400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxodj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,rickr,zerppen,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Mar/17 8:27 PM;rickr;Moved to Peer where chain code is run. ;;;","27/Mar/17 12:00 PM;zerppen;[~rickr]  I tried.But fabric can't get the Event except block ;;;","14/Apr/17 8:36 PM;ChristopherFerris;Are we really still planning on fixing v0.6? Since that is deprecated, I would think not. [~rickr] thoughts?;;;","21/Apr/17 5:13 PM;zerppen;[~ChristopherFerris] No,it is going to fix v1.0.I just told a truth that javaCC can't use setEvent while goCC works,and I want it can work in v1.0.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failed Compilation due to ltdl.h header file missing,FAB-2854,15427,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,nickgaski,bmos299,bmos299,23/Mar/17 2:23 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Apr/17 11:27 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,Security,,,,,,,"This has the same symptom as https://jira.hyperledger.org/browse/FAB-2684.  This is more pervasive in it also impacts fabric makes outside of docker.  I am hitting is when building outside of vagrant and trying to run the examples/e2e_cli.  Here is the error:

{code}
Building configtxgen

build/bin/configtxgen

CGO_CFLAGS="" "" GOBIN=/home/barry/go/src/github.com/hyperledger/fabric/build/bin go install -ldflags ""-X github.com/hyperledger/fabric/common/metadata.Version=1.0.0-snapshot-424cbde -X github.com/hyperledger/fabric/common/metadata.BaseVersion=0.3.0 -X github.com/hyperledger/fabric/common/metadata.BaseDockerLabel=org.hyperledger.fabric"" github.com/hyperledger/fabric/common/configtx/tool/configtxgen

# github.com/hyperledger/fabric/vendor/github.com/miekg/pkcs11

vendor/github.com/miekg/pkcs11/pkcs11.go:29:18: fatal error: ltdl.h: No such file or directory

#include <ltdl.h>

                 ^

compilation terminated.

make: *** [build/bin/configtxgen] Error 2

Generating genesis block

generateCfgTrx.sh: line 21: ./build/bin/configtxgen: No such file or directory

mv: cannot stat ‘orderer.block’: No such file or directory

Generating channel configuration transaction
{code}
 
I am marking this as highest as most people running vagrant will incur this issue.  We can for the short-term add it as a note in the e2e_cli README.

The fix for FAB-2684 was in https://gerrit.hyperledger.org/r/#/c/7167/2/docs/source/Setup/ca-setup.rst:
{code}
 # sudo apt install libtool libltdl-dev

For more information on libtool, see https://www.gnu.org/software/libtool.
{code}",,andrasfe,bmos299,crazybit,dililmt,jorgedr,kseo,mastersingh24,nickgaski,sheehan,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2883,,,FAB-6557,FAB-7056,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxodz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,andrasfe,bmos299,crazybit,dililmt,jorgedr,kseo,mastersingh24,nickgaski,sheehan,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/17 4:16 PM;crazybit;any workaround in windows platform?;;;","30/Mar/17 4:13 AM;jorgedr;I was hitting this same issue after setting up the fabric development environment  and trying to build it. 


{code}
$$ make dist-clean all
...
...
docker tag hyperledger/fabric-javaenv hyperledger/fabric-javaenv:x86_64-1.0.0-snapshot-c4e7104d
build/bin/peer
CGO_CFLAGS="" "" GOBIN=/Users/jorgedr/go-work/src/github.com/hyperledger/fabric/build/bin go install -ldflags ""-X github.com/hyperledger/fabric/common/metadata.Version=1.0.0-snapshot-c4e7104d -X github.com/hyperledger/fabric/common/metadata.BaseVersion=0.3.0 -X github.com/hyperledger/fabric/common/metadata.BaseDockerLabel=org.hyperledger.fabric"" github.com/hyperledger/fabric/peer
# github.com/hyperledger/fabric/vendor/github.com/miekg/pkcs11
vendor/github.com/miekg/pkcs11/pkcs11.go:29:10: fatal error: 'ltdl.h' file not found
#include <ltdl.h>
         ^
1 error generated.
make: *** [build/bin/peer] Error 2
{code}



  I am using Mac OS Sierra 10.12.3.   I was able to work around the problem by installing libtool using Homebrew 
{code}
$$ brew install libtool
{code}

That did the trick for me.  ;;;","02/Apr/17 6:21 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7443/  will help with this issue if we can ever get it merged;;;","03/Apr/17 11:16 PM;nickgaski;To elaborate of the OSX issue...  There are actually three distinct steps that need to take place.

First the user needs to install homebrew on their machine:
{code:java}
/usr/bin/ruby -e ""$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)""
{code}


Secondly, the user must add gnu-tar:
{code:java}
brew install gnu-tar --with-default-names
{code}

The gnu-tar step can be finicky.  If this overall process does not work, the user should nuke their clone, re-clone the fabric library, and then proceed with the above command.

Finally, add the libtool:
{code:java}
brew install libtool
{code}

Once complete, all ""makes"" should compile successfully outside of vagrant.  
;;;","03/Apr/17 11:27 PM;bmos299;Thanks for the fix [~mastersingh24].  By modifying the configtxgen tool to always compile without the pkcs11 support is great for the short-term in that the getting started documentation will work for end-users.   Ramesh and I are working on the packaging of the binaries into a tarball moving forward.
Thanks,
Barry- ;;;","21/Nov/17 2:25 AM;sheehan;[~nickgaski] Thanks for the 
{code:java}
brew install libtool
{code}
tip. It seems like this should be in the documentation at [http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/devenv.html]. Any issues with me adding it there?;;;","21/Nov/17 7:14 AM;nickgaski;[~sheehan] - that would be awesome man; thanks.  And welcome back!;;;","21/Nov/17 8:29 AM;sheehan;Should be there soon FAB-7056. I'll put you on review once the build is passing.

Thanks, looking forward to collaborating with you again!;;;","08/Mar/18 12:00 AM;andrasfe;for anyone still struggling with this error on Ubuntu Xenial, the following did the trick for me:

sudo apt-get install libtool;;;","09/Mar/18 11:29 PM;zamrokk;Resolved with : 
{code:java}
brew install libtool
{code};;;","23/May/18 10:46 AM;dililmt;I have installed libtool, please refer to the following information.

Apt-get install -y build-essential git make curl unzip g++ libtool

Reading package lists... Done

Building dependency tree Reading state information... Done

Build-essential is already the newest version (12.1ubuntu2).

Libtool is already the newest version (2.4.6-0.1).

Unzip is already the newest version (6.0-20ubuntu1).

Git is already the newest version (2:2.15.1-1avh1~zesty1).

Make is already the newest version (4.1-9.1).

Curl is already the newest version (7.52.1-4ubuntu1).

G++ is already the newest version (4:6.3.0-2ubuntu1). 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.

*However, why enter the fabric-ca folder and execute the command make fabric-ca-client or make fabric-ca-server still has the following error.*

*root@ubuntu:/home/user/go/Go/src/github.com/hyperledger/fabric-ca# make fabric-ca-client*

*Building fabric-ca-client in bin directory ...*
 * 
 ## github.com/hyperledger/fabric-ca/vendor/github.com/miekg/pkcs11*
 *vendor/github.com/miekg/pkcs11/pkcs11.go:26:18: fatal error: ltdl.h: No such file or directory*
  *#include <ltdl.h>*
                   *^*
 *compilation terminated.*

*Please help me 。thank you!*

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric e2e tls certs are invalid type,FAB-2855,15428,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,bmos299,rickr,rickr,23/Mar/17 5:16 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/May/17 4:56 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"cryptogen  certificates produced are not valid. 
They fail with both grpc trust store and bouncy castle 

Bouncy castle returns 

java.security.cert.CertificateParsingException: Extensions not allowed in v2 certificate.

All SDKs should be able to use these certificates if the are being generated.

https://en.wikipedia.org/wiki/X.509
There is no mention either of a version 4 


Certificate:
    Data:
        Version: 4 (0x3)
        Serial Number: 1000 (0x3e8)
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: CN=ordererOrg0
        Validity
            Not Before: Feb 20 19:06:10 2017 GMT
            Not After : Feb 20 19:06:10 2018 GMT
        Subject: CN=ordererOrg0
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub: 
                    04:af:12:bf:41:00:f6:1d:3a:7e:60:64:50:23:be:
                    0f:f6:ff:d8:83:59:da:1b:b2:f9:6f:c7:0b:14:85:
                    db:67:3b:58:6a:09:6d:1c:d0:71:6b:50:99:6d:4a:
                    a9:9a:30:52:4f:3a:45:cc:55:7c:5a:af:8c:43:05:
                    55:7c:d5:df:c4
                ASN1 OID: prime256v1
                NIST CURVE: P-256
        X509v3 extensions:
            X509v3 Basic Constraints: critical
                CA:TRUE, pathlen:0
            X509v3 Subject Key Identifier: 
                25:5A:92:EB:EA:C4:47:0A:F2:96:0C:7F:F1:F0:F2:1B:1E:C5:13:13
            X509v3 Authority Key Identifier: 
                keyid:25:5A:92:EB:EA:C4:47:0A:F2:96:0C:7F:F1:F0:F2:1B:1E:C5:13:13

    Signature Algorithm: ecdsa-with-SHA256
         30:45:02:21:00:a6:5e:00:d2:45:3c:b1:a5:29:3e:3d:78:34:
         14:d9:58:67:88:a3:4d:5c:0a:80:b9:18:56:1a:1d:cd:93:df:
         9e:02:20:3b:8c:b4:a7:71:6c:fe:03:6c:25:8a:eb:a0:a6:9a:
         54:37:bd:e7:92:ab:3e:9f:ce:e7:98:d8:0c:a0:03:fe:86

[~Clayton Sims] [~ashku] [~bmos299]",,ashutosh_kumar,bmos299,ChristopherFerris,denyeart,mastersingh24,rickr,suganuma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoe7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ashutosh_kumar,bmos299,ChristopherFerris,denyeart,mastersingh24,rickr,suganuma,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Mar/17 5:52 AM;ashutosh_kumar;[~mastersingh24] , I can take a crack on this , if you are too busy. Please let me know.;;;","25/Mar/17 10:33 PM;mastersingh24;[~rickr] where did you actually get this certificate from?  would you mind attaching to the JIRA?;;;","27/Mar/17 9:11 PM;rickr;We got them from the Node SDK ->
https://github.com/hyperledger/fabric-sdk-node/tree/master/test/fixtures/tls;;;","28/Mar/17 6:57 PM;rickr;FYI Talking to Jim they were gotten from the cli e2e ;;;","30/Mar/17 4:42 AM;mastersingh24;hmm - I don't see this issue with any of the certs I just generated, so I'm going to close this for now;;;","30/Mar/17 4:57 AM;rickr;Can you send me the certs and if it work with java I'll close this;;;","30/Mar/17 7:01 PM;rickr;[~bmos299]  Can your test team independently confirm this ?
thanks
[~Clayton Sims] 
;;;","06/Apr/17 8:54 AM;rickr;Gari and I looked at this and it may not be his tool that's producing this or maybe it did and is now fixed.
At any rate the cli e2e does have these bad certs and really should be fixed up..
[~mastersingh24]  I'll leave it up to Gari to reassign to get that cleaned up. I'll downgrade it a notch given this info.;;;","12/Apr/17 11:56 AM;denyeart;[~mastersingh24] Who would you recommend to look at Rick's last comment?;;;","15/Apr/17 6:01 AM;mastersingh24;I think that [~greg.haskins] is actually doing some work to cleanup the e2e which might be applicable here;;;","15/Apr/17 6:02 AM;mastersingh24;We can either close this item and open a new one (fix / replace e2e certs) or we can rename this one since there actually is not a bug in cryptogen itself (at least not in the current version);;;","23/Apr/17 10:22 PM;ChristopherFerris;[~mastersingh24] what say ye?;;;","24/Apr/17 12:00 AM;rickr;I'm ok with renaming the key is we should make sure the e2e certs are valid.  The ones there were reporting type 4 is is not a valid type.;;;","24/Apr/17 12:02 AM;rickr;I've assigned to you [~bmos299]  to determine the right owner action and validating;;;","09/May/17 4:56 AM;bmos299;I just ran the cryptogen on commit  268d01a92cdcd6307d5e85b746f09c723e3e66b9

I received back Version 3.  I will close this bug out and re-open if we start seeing the version 4 again.

 

ubuntu@hyperledger-devenv:3870bcf:/opt/gopath/src/github.com/hyperledger/fabric/common/tools/cryptogen/crypto-config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/msp/cacerts$ openssl x509 -in ca.org2.example.com-cert.pem -text
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            32:f4:07:c9:4c:50:d2:8e:10:fb:63:e1:0a:cf:e5:0c
    Signature Algorithm: ecdsa-with-SHA256
        Issuer: C=US, ST=California, L=San Francisco, O=org2.example.com, CN=ca.org2.example.com
        Validity
            Not Before: May  8 19:48:49 2017 GMT
            Not After : May  6 19:48:49 2027 GMT
        Subject: C=US, ST=California, L=San Francisco, O=org2.example.com, CN=ca.org2.example.com
        Subject Public Key Info:
            Public Key Algorithm: id-ecPublicKey
                Public-Key: (256 bit)
                pub:;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Leader election module test failure in CI,FAB-2857,15430,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,yacovm,yacovm,23/Mar/17 7:36 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 4:46 AM,v1.0.0,,,,v1.0.0,,,fabric-gossip,,,,0,ci_falure,gossip,test,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8808/console

21:49:01 unit-tests_1  | panic: assert: arguments: Cannot call Get(0) because there are 0 argument(s).
21:49:01 unit-tests_1  | 
21:49:01 unit-tests_1  | goroutine 15 [running]:
21:49:01 unit-tests_1  | panic(0x860dc0, 0xc420348270)
21:49:01 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.Arguments.Get(0xb97e48, 0x0, 0x0, 0x0, 0xb97e48, 0x0)
21:49:01 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:526 +0x19b
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*peer).Peers(0xc4200d12c0, 0x0, 0x0, 0x0)
21:49:01 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/gossip/election/election_test.go:124 +0x34a
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).isAlive(0xc4200e0600, 0xc4203481e8, 0x2, 0x8, 0x1)
21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:326 +0x42
21:49:01 unit-tests_1  | github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).handleMessages(0xc4200e0600)
21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:131 +0x3d1
21:49:01 unit-tests_1  | created by github.com/hyperledger/fabric/gossip/election.(*leaderElectionSvcImpl).start
21:49:01 unit-tests_1  | 	github.com/hyperledger/fabric/gossip/election/_test/_obj_test/election.go:111 +0x6a
21:49:01 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/election	1.628s
21:49:01 unit-tests_1  | error: exit status 1
21:49:01 unit-tests_1  | panic: EOF
21:49:01 unit-tests_1  | 

According to the code, p.Called() returned an Arguments with no arguments.
This (according to the documentation) can happen when:
// Panics if the call is unexpected (i.e. not preceded by
// appropriate .On .Return() calls)

But, in the test code- p.mockedMethods is written to with a lock, and read from using a RLock, and each time a value is written into- it's while holding a lock.
This needs to be looked at.

[~C0rWin] [~gennadyl]",,C0rWin,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxoen:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 8:48 AM;ChristopherFerris;has this been resolved? [~yacovm] [~gennadyl];;;","14/Apr/17 3:14 PM;yacovm;No, but we changed the concurrency model since (a routine is now called synchronously instead of asynchronously) so I'm not 100% sure this can be reproduced (though haven't looked into it too deep).

I also haven't seen this failure since.
[~C0rWin] should we close this and re-open if it resurfaces? ;;;","15/Apr/17 4:47 AM;C0rWin;[~yacovm] closing, since wasn't reproduced for quite a while.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Hyperledger Fabric Consensus plugin PBFT error, Data not stored and Syn",FAB-2858,15431,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,6londe,KhutPidor,KhutPidor,23/Mar/17 11:56 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,04/Apr/17 4:24 PM,,,,,v0.6,WON'T FIX,,fabric-peer,,,24/Mar/17 12:00 AM,0,consensus,,,,,,,"I have formed a network of hyperledger fabric with 4 validating peers along with security: Disable. I using PBFT consensus to syn block between peers. When I try to Deploy, and invoke transaction into the root node of the network with chaincode(chaincode_example02) running on, it seem to work ,but give few logs. After Deploy and Invoke success, I try to Query the Data, it show

{ ""jsonrpc"": ""2.0"", ""error"": { ""code"": -32003, ""message"": ""Query failure"", ""data"": ""Error when querying chaincode: Error:Failed to launch chaincode spec(Could not get deployment transaction for 1b3028e45a9a67604219e2aaeb1306855e61e9d0571875d4f3d207b68f50d20b77090d0e1f0418b0e8d6b8a3d58e804316a471f2cad26da5c878a9d7590bdc4c - LedgerError - ResourceNotFound: ledger: resource not found)"" },

I think Data is not stored. I try to check the height of each peer. It keep the same number as it used to be.

I install and using fabric across 4 different VMware Machine. I'm not using any Vagrant or Docker.

All peers Log:

VP0:

19:12:26.982 [consensus/pbft] recvViewChange -> INFO 3b6 Replica 0 received view-change from replica 2, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:26.982 [consensus/pbft] recvViewChange -> WARN 3b7 Replica 0 found view-change message for old view 19:12:26.983 [consensus/pbft] recvViewChange -> INFO 3b8 Replica 0 received view-change from replica 3, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:26.983 [consensus/pbft] recvViewChange -> WARN 3b9 Replica 0 found view-change message for old view 19:12:28.857 [consensus/pbft] recvViewChange -> INFO 3ba Replica 0 received view-change from replica 1, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:28.857 [consensus/pbft] recvViewChange -> WARN 3bb Replica 0 found view-change message for old view 19:12:28.983 [consensus/pbft] sendViewChange -> INFO 3bc Replica 0 sending view-change, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:28.983 [consensus/pbft] recvViewChange -> INFO 3bd Replica 0 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:28.983 [consensus/pbft] recvViewChange -> WARN 3be Replica 0 already has a view change message for view 2 from replica 0 19:12:28.983 [consensus/pbft] recvViewChange -> INFO 3bf Replica 0 received view-change from replica 2, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:28.983 [consensus/pbft] recvViewChange -> WARN 3c0 Replica 0 found view-change message for old view 19:12:28.983 [consensus/pbft] recvViewChange -> INFO 3c1 Replica 0 received view-change from replica 3, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:28.983 [consensus/pbft] recvViewChange -> WARN 3c2 Replica 0 found view-change message for old view 19:12:30.859 [consensus/pbft] recvViewChange -> INFO 3c3 Replica 0 received view-change from replica 1, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:30.859 [consensus/pbft] recvViewChange -> WARN 3c4 Replica 0 found view-change message for old view 19:12:30.984 [consensus/pbft] sendViewChange -> INFO 3c5 Replica 0 sending view-change, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:30.984 [consensus/pbft] recvViewChange -> INFO 3c6 Replica 0 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:30.984 [consensus/pbft] recvViewChange -> WARN 3c7 Replica 0 already has a view change message for view 2 from replica 0 19:12:30.984 [consensus/pbft] recvViewChange -> INFO 3c8 Replica 0 received view-change from replica 3, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:30.984 [consensus/pbft] recvViewChange -> WARN 3c9 Replica 0 found view-change message for old view 19:12:30.985 [consensus/pbft] recvViewChange -> INFO 3ca Replica 0 received view-change from replica 2, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:30.985 [consensus/pbft] recvViewChange -> WARN 3cb Replica 0 found view-change message for old view

VP1:

19:12:26.856 [consensus/pbft] sendViewChange -> INFO 211 Replica 1 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:26.857 [consensus/pbft] recvViewChange -> INFO 212 Replica 1 received view-change from replica 1, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:26.857 [consensus/pbft] recvViewChange -> WARN 213 Replica 1 already has a view change message for view 1 from replica 1 19:12:26.985 [consensus/pbft] recvViewChange -> INFO 214 Replica 1 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:26.985 [consensus/pbft] recvViewChange -> WARN 215 Replica 1 already has a view change message for view 2 from replica 0 19:12:28.858 [consensus/pbft] sendViewChange -> INFO 216 Replica 1 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:28.859 [consensus/pbft] recvViewChange -> INFO 217 Replica 1 received view-change from replica 1, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:28.859 [consensus/pbft] recvViewChange -> WARN 218 Replica 1 already has a view change message for view 1 from replica 1 19:12:28.986 [consensus/pbft] recvViewChange -> INFO 219 Replica 1 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:28.986 [consensus/pbft] recvViewChange -> WARN 21a Replica 1 already has a view change message for view 2 from replica 0 19:12:30.860 [consensus/pbft] sendViewChange -> INFO 21b Replica 1 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:30.861 [consensus/pbft] recvViewChange -> INFO 21c Replica 1 received view-change from replica 1, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:30.861 [consensus/pbft] recvViewChange -> WARN 21d Replica 1 already has a view change message for view 1 from replica 1 19:12:30.987 [consensus/pbft] recvViewChange -> INFO 21e Replica 1 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:30.987 [consensus/pbft] recvViewChange -> WARN 21f Replica 1 already has a view change message for view 2 from replica 0 19:12:32.863 [consensus/pbft] sendViewChange -> INFO 220 Replica 1 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:32.863 [consensus/pbft] recvViewChange -> INFO 221 Replica 1 received view-change from replica 1, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:32.863 [consensus/pbft] recvViewChange -> WARN 222 Replica 1 already has a view change message for view 1 from replica 1 19:12:32.989 [consensus/pbft] recvViewChange -> INFO 223 Replica 1 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:32.989 [consensus/pbft] recvViewChange -> WARN 224 Replica 1 already has a view change message for view 2 from replica 0 19:12:34.864 [consensus/pbft] sendViewChange -> INFO 225 Replica 1 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2

VP2:

19:12:19.036 [consensus/pbft] recvViewChange -> WARN 201 Replica 2 already has a view change message for view 2 from replica 0 19:12:21.036 [consensus/pbft] sendViewChange -> INFO 202 Replica 2 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:21.037 [consensus/pbft] recvViewChange -> INFO 203 Replica 2 received view-change from replica 2, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:21.037 [consensus/pbft] recvViewChange -> WARN 204 Replica 2 already has a view change message for view 1 from replica 2 19:12:21.038 [consensus/pbft] recvViewChange -> INFO 205 Replica 2 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:21.038 [consensus/pbft] recvViewChange -> WARN 206 Replica 2 already has a view change message for view 2 from replica 0 19:12:23.037 [consensus/pbft] sendViewChange -> INFO 207 Replica 2 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:23.038 [consensus/pbft] recvViewChange -> INFO 208 Replica 2 received view-change from replica 2, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:23.038 [consensus/pbft] recvViewChange -> WARN 209 Replica 2 already has a view change message for view 1 from replica 2 19:12:23.038 [consensus/pbft] recvViewChange -> INFO 20a Replica 2 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:23.038 [consensus/pbft] recvViewChange -> WARN 20b Replica 2 already has a view change message for view 2 from replica 0 19:12:25.039 [consensus/pbft] sendViewChange -> INFO 20c Replica 2 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:25.039 [consensus/pbft] recvViewChange -> INFO 20d Replica 2 received view-change from replica 2, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:12:25.039 [consensus/pbft] recvViewChange -> WARN 20e Replica 2 already has a view change message for view 1 from replica 2 19:12:25.040 [consensus/pbft] recvViewChange -> INFO 20f Replica 2 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:12:25.040 [consensus/pbft] recvViewChange -> WARN 210 Replica 2 already has a view change message for view 2 from replica 0 19:12:27.039 [consensus/pbft] sendViewChange -> INFO 211 Replica 2 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2

VP3

19:11:51.012 [consensus/pbft] sendViewChange -> INFO 1b6 Replica 3 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:11:51.013 [consensus/pbft] recvViewChange -> INFO 1b7 Replica 3 received view-change from replica 3, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:11:51.013 [consensus/pbft] recvViewChange -> WARN 1b8 Replica 3 already has a view change message for view 1 from replica 3 19:11:51.013 [consensus/pbft] recvViewChange -> INFO 1b9 Replica 3 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:11:51.013 [consensus/pbft] recvViewChange -> WARN 1ba Replica 3 already has a view change message for view 2 from replica 0 19:11:53.014 [consensus/pbft] sendViewChange -> INFO 1bb Replica 3 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:11:53.014 [consensus/pbft] recvViewChange -> INFO 1bc Replica 3 received view-change from replica 3, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:11:53.014 [consensus/pbft] recvViewChange -> WARN 1bd Replica 3 already has a view change message for view 1 from replica 3 19:11:53.014 [consensus/pbft] recvViewChange -> INFO 1be Replica 3 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:11:53.015 [consensus/pbft] recvViewChange -> WARN 1bf Replica 3 already has a view change message for view 2 from replica 0 19:11:55.015 [consensus/pbft] sendViewChange -> INFO 1c0 Replica 3 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:11:55.016 [consensus/pbft] recvViewChange -> INFO 1c1 Replica 3 received view-change from replica 3, v:1, h:0, |C|:1, |P|:0, |Q|:2 19:11:55.016 [consensus/pbft] recvViewChange -> WARN 1c2 Replica 3 already has a view change message for view 1 from replica 3 19:11:55.016 [consensus/pbft] recvViewChange -> INFO 1c3 Replica 3 received view-change from replica 0, v:2, h:0, |C|:1, |P|:1, |Q|:2 19:11:55.016 [consensus/pbft] recvViewChange -> WARN 1c4 Replica 3 already has a view change message for view 2 from replica 0 19:11:57.016 [consensus/pbft] sendViewChange -> INFO 1c5 Replica 3 sending view-change, v:1, h:0, |C|:1, |P|:0, |Q|:2

Consensus.pbft.config.yaml

# Operational mode: currently only batch ( this value is case-insensitive)
mode: batch

# Maximum number of validators/replicas we expect in the network
# Keep the ""N"" in quotes, or it will be interpreted as ""false"".
""N"": 4

# Number of byzantine nodes we will tolerate
f: 1

# Checkpoint period is the maximum number of pbft requests that must be
# re-processed in a view change. A smaller checkpoint period will decrease
# the amount of time required to recover from an error, but will decrease
# overall throughput in normal case operation.
K: 10

# Affects the receive log size which is K * logmultiplier
# The primary will only send sequence numbers which fall within K * logmultiplier/2 of
# its high watermark, so this cannot be set to less than 2
# For high volume/high latency environments, a higher log size may increase throughput
logmultiplier: 4

# How many requests should the primary send per pre-prepare when in ""batch"" mode
batchsize: 100

# Whether the replica should act as a byzantine one; useful for debugging on testnets
byzantine: false

# After how many checkpoint periods the primary gets cycled automatically.  Set to 0 to disable.
viewchangeperiod: 0

# Timeouts
timeout:

    # Send a pre-prepare if there are pending requests, batchsize isn't reached yet,
    # and this much time has elapsed since the current batch was formed
    batch: 1s

    # How long may a request take between reception and execution, must be greater than the batch timeout
    request: 2s

    # How long may a view change take
    viewchange: 2s

    # How long to wait for a view change quorum before resending (the same) view change
    resendviewchange: 2s

    # Interval to send ""keep-alive"" null requests.  Set to 0 to disable. If enabled, must be greater than request timeout
    nullrequest: 0s

    # How long may a message broadcast take.
    broadcast: 1s
Core.yaml

# Validator defines whether this peer is a validating peer or not, and if # it is enabled, what consensus plugin to load validator: enabled: true

    consensus:
        # Consensus plugin to use. The value is the name of the plugin, e.g. pbft, noops ( this value is case-insensitive)
        # if the given value is not recognized, we will default to noops
        plugin: pbft

        # total number of consensus messages which will be buffered per connection before delivery is rejected
        buffersize: 1000

    events:
        # The address that the Event service will be enabled on the validator
        address: 0.0.0.0:7053

        # total number of events that could be buffered without blocking the
        # validator sends
        buffersize: 100

        # milliseconds timeout for producer to send an event.
        # if < 0, if buffer full, unblocks immediately and not send
        # if 0, if buffer full, will block and guarantee the event will be sent out
        # if > 0, if buffer full, blocks till timeout
        timeout: 10",,ChristopherFerris,KhutPidor,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx59z:",,,,Unset,,Sprint 14 - Consensus,Sprint 15 - Consensus,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,KhutPidor,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 2:15 AM;ChristopherFerris;unclear to me why this is not WONTFIX;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode Install Packaging with Security enablement,FAB-2859,15432,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,elli-androulaki,elli-androulaki,23/Mar/17 1:58 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,26/Apr/17 12:12 AM,,,,,v1.0.0,,,fabric-peer,,,,0,Endorser,,,,,,,"This document has been a product of discussion with [~muralisr], [~mne], [~adc], [~binhn].


*Background& Motivation*:

A chaincode is fully described by 
 - User provided unique name
 - User provided version (this is generally represented by a string)
 - User provided code along with meta properties such as the language the code is implemented in
The ChaincodeDeploymentSpec (CDS) protobuf message is the formal definition of the above.

In 0.5 and 0.6 the chaincode we didn’t associate ownership with chaincode. We only needed a client with the right permissions to request its deployment, and once deployed, it could be accessed on any peer in the network. This process radically changes in 1.0, where the process of a chaincode being available within a chain (deployment) is executed in two phases:
 - installation of the chaincode onto a peer 
 - instantiation of the chaincode onto channel(s)

We could treat the ""install"" simplistically as just putting the chaincodeDeploySpec (CDS) on the filesystem of the peer in a chaincode configuration directory.  Indeed this is really what the first implementation of the new deployment model as described in https://jira.hyperledger.org/browse/FAB-1783 did. 

This separation of chaincode deployment into “install” and “instantiation” separates to some extent the roles of chaincode instantiator within a specific chain with the ownership of the corresponding chaincode's source code and ownership of the latter. These three properties were guaranteed to be possessed by the deployer of a chaincode in v0.6, i.e., anyone who had the right to deploy chaincodes would be required to post the entire code-base associated to that chaincode to the chain, and concurrently demonstrate that it is owning that piece of deployed code. On the contrary, with the new installation model these three properties are not necessarily meet in the face of a possible chainocode instantiator.

Therefore we are looking for a technique to package chaincodes with the new deployment model, such that: 
 - a chaincode instantiator can bind at instantiation time the instantiated chaincode to the code that is actually being executed, in a way that claims on the running code cannot be muted after the instantiation transaction is included in the ledger
 - a chaincode instantiator can prove to the rest of the peers in the network that process the instantiation transaction that it is among the owners of that chaincode, and is therefore authorized to make that chaincode available to any chain. 

The new installation model provides the opportunity to properly associate ownership of chaincodes as part of the “install” of the chaincode.  This document describes how additional information such as ownership can be packaged with the CDS so the package can be secured (non-instantiated but by properly authorized entities), and non-malleable (non-modifiable).

The rest of this doc goes over the details of the contents of the package and its implementation.



*1. Chaincode Installation*

Contents of the chaincode installation package:
 - The package will consist of the following materials
 - CDS (described above) 
 - List of owners of the chaincode, defined by means of certificates (essentially, msp.SerializedIdentity objects), and a list of signatures of theirs over chaincode source code that can be in the form of endorsements (peer.Endorsement)
 - An instantiation policy of that chaincode expressed in the same way chaincode endorsement polices are expressed; notice that for this policy to be determined, an out-of-band communication between the owners of the chaincode is needed (e.g., to provide proper MSP principals for their part in the chain).
 - Signature of the peer organisation admin (peer's MSP admin) installing this package over the above


_Implementation details_
We assume the chaincode package is stored on the filesystem with name <user provided CC name>.<user provided version>. In future we could store this on Database.


_Step 1_. A proposal of type ENDORSER_TRANSACTION will be sent to the endorser targeted to LCCC.

The input args to the LCCC would be {“install”, <package>}.
The package will have the following structure
* Envelope
* Payload
* Header
** ChannelHeader with type PACKAGE (other fields in header will be nulled out as the package needs to be deterministic)
** SignatureHeader nulled out as the package needs to be deterministic. 
** Data
*** ChaincodeDeploymentSpec (CDS) in bytes
*** Array of Endorsement (basically “owners” of this package) where Endorsement is a predefined type  (see proposal_response.proto)


{code:java}
      message Endorsement {
        bytes endorser = 1; ---> this will be the owner identity
        bytes signature = 2; ---> sign (above CDS+above endorser)
      }
{code}



_Step 2._ LCCC will validate the creator signature on the LCCC install proposal. 

LCCC uses the peer’s local MSP to check if the proposal signature is valid given the creator, and the creator of the proposal is an administrator of peer’s local MSP.If this check fails, the proposal is rejected. If it succeeds, we continue to the next validation step.

_Step 3._ LCCC checks the timestamp in the proposal and rejects if outdated. [~ellaki] propose we remove this per discussion in comments

_Step 4._ LCCC checks if a chaincode with the same identifier IDcc has already been installed by looking up the file <user provided name>.<user provided version>. If this is the case, LCCC rejects the new chaincode installation by returning an “Error: chaincode already installed” message to the invoker. 

_Step 5._ LCCC retrieves the ChaincodeDeploymentSpec and Endorsement array. At this point, we need to decide what to do. One option would be that the LCCC checks if any of the endorsements in the array of endorsements, correspond to its local MSP admin, and reject if this such a signature is not detected. An other alternative is that we do not do any signature verification there, as there is already a peer MSP admin signature on the proposal (see comment). 
If we decide there is some signature check that needs to take place, then we should have the endorser rejecting the proposal if this check fails. Otherwise, it continues to next step.


*2. Chaincode Instantiation*
An important component of securing is the generation of a unique identifier called IDcc derived from the contents of the package of the Chaincode. LCCC computes IDcc of the chaincode to be instantiated as follows:
 - Computes the hash of the chaincode source code, let it be HCC
 - Computes the hash of the chaincode metadata, consisting of 
     --> The list of owners of the chaincode to be installed OwnCC,
     -->The chaincode name, NameCC
     --> The chaincode version, VersionCC
    --> The chaincode instantiation policy, PolicyCC
 
Let the resulting hash be, HMetaCC.
Use as chaincode identifier, let it be IDcc,  the hash of the concatenation of HCC,, and HMetaCC, i.e., 
IDcc <- HASH(HCC || HMetaCC),
where “||” indicates concatenation.

Let that chaincode is to be installed into a chain with identifier IDchain, and LCCC instance referred to by LCCCchain that is equipped with an chaincode instantiation policy P_lccc. We assume the instantiation of a chaincode with identifier IDcc. Notice that due to the way chaincode identifiers are generated, this identifier would be uniquely bound to the chaincode’s source code CC, list of ownership OwnCC, instantiation policy PolicyCC and other chaincode metadata, i.e., name and version. 

LCCC for a channel  is assumed to maintain a database on instantiated chaincodes within chain with id ChainID, and their status (active, terminated). We will refer to this table by DBcc_chain.

_Step 1_. A proposal of type ENDORSER_TRANSACTION will be sent to the endorser targeted to LCCC.

The input args to the LCCC would be 
{“instantiate”, chainID, NameCC, VersionCC, PolicyCC, ESCC, VSCC, “anything else?”}

_Step 2_. Endorser retrieves LCCCchain. In particular it checks that ChainID is an identifier of a chain it has joined, and retrieves its LCCC instance, i.e., LCCCchain.

_Step 3_. LCCCchain (on the endorser side) will check “Creator” and its proposal signature complies  with the read policy of chain with identifier chainID, and chaincode instantiation policy P_lccc. Namely it would invoke P_lccc.evaluate, using as parameters the Creator, the proposal payload, and Creator signature. This step, with proposal of [~mastersingh24] is to be substituted with the following proccess:
 ```LCCCchain checks that proposal creator, and proposal signature satisfy the PolicyCC listed above, i.e., they run PolicyCC.evaluate with these parameters```.

_Step 4_. LCCCchain looks up the package file <user provided chaincode name>.<user provided version> file and rejects if not found.

_Step 5_ LCCCchain checks if the chaincode has already been instantiated in this chain (under the same name???)  by looking up into DBcc_chain,  and rejects if this is the case. 

_Step 6_. .LCCCchain computes IDCC and checks if the IDcc is correctly formed, i.e., 
It computes HMetaCC <- Hash(OwnCC||NameCC||PolicyCC||VersionCC)
It checks if IDcc == Hash(HCC || HMetaCC), and rejects if this is not the case

_Step 7_. LCCCchain, checks if Creator is within OwnCC, and rejects if this is not the case. This is an optional step according to the proposal by [~mastersingh24].

_Step 8_. Endorser produces from LCCCchain the simulation result of its execution (essentially,  DBcc_chain enhanced with an entry for the chaincode to be freshly instantiated)

_Step 9_. Endorser calls LCCCchain_escc to create an endorsement, that returns to “Creator”.

_Step 10_. Creator uses this endorsement to create a transaction that then submits to the channel with identifier ChainID; let that this transaction is referred to by TXcc_chain

_Step 11_. Orderers upon receiving TXcc_chain check that a channel with identifier “chainID” exists, retrieve the chain’s metadata (ConfigManager), and from them retrieve the chain’s Writers, say Wchain. They then ensure (as with all transactions) that:
 - Creator and its signature on transaction satisfies Wchain
 - Creator’s signature in transaction matches the creator’s identity 
 - Orderers order the transaction into a channel block that is then released to committing peers.

_Step 12_. Committing peers receive TXcc_chain as part of the channel with identifier ""chainID"". They then run LCCCchain_vscc, where LCCCchain_vscc would need to repeat steps 3-7, after which it would need to evaluate the RW set. If the RWset validation still holds as current, validates the transaction as valid, and applies LCCCchain state changes to ledger. This, after discussion with [~ales], and [~adc] may not be necessary if we define an endorsement policy for LCCC at channel genesis time. 

Note: Optionally, checks on the endorsement can be done to ensure that the endorser is part of the Wchain, and that the endorsement signature is valid.



*3. Installation Query System Chaincode*

The queries QSCC is to supportl:
1. list the installed chaincodes on a peer (“list cc --installed --all”)
2. list the instantiated chaincodes on a channel (“list cc (-installed) --chain channelid”)
3. list all the channels for a given peer (“list channels”)			 			 

Proposals for queries of type (1) and (3) may make sense to be cleared only for the admin of the MSP the peer belongs to. The reasn is that this is strongly related to an organization’s internal structure (e.g., which channels a peer has joined, which chaincodes it has installed, etc). 

Proposals for queries of type (2) one option would be to allow it for any entity with read-access to a chain the query refers to. That is QSCC proposal creators should be checked against the channel’s read policy. However there is a chance that this reveals to the querier implicitly which channels that peer has joined, cause it will only list instntiated chaincodes in these chanels. For this reason, it may make sense to allow that also this query is allowed for the peer’s MSP admin.

Post V1, we may want to make all these policies configurable through this peer config file, i.e., core.yaml.

 	

_Step 1_. A proposal of type ENDORSER_TRANSACTION will be sent to the endorser targeted to (chainless) QSCC.

The input args to the QSCC would be {“QSCC input”}.
The proposal would have the following structure
- SignedProposal
  --> Proposal
     --> Header 
           ----> ChannelHeader with type, set as normally; channelid nil and other fields nulled out
           ----> Extension: visibility set to nil, ccid set to qscc
           ----> SignatureHeader creator / nonce  set as for other chaincodes
     --> Payload
           ----> Input 
           ----> ChaincodeInvocationSpec
                   ------> ChaincodeSpec (QSCC, with the above input)
                   ------> GenerationID - not clear to me
     --> Transient data set to nil
     --> Creator signature , as usual

_Step 2_. QSCC will validates the identity of the creator on the QSCC proposal, as it being the local MSP/administrator.
QSCC uses the peer’s local MSP to check if the proposal signature is valid given the creator, and the creator of the proposal is an administrator of peer’s local MSP. If this check fails, the proposal is rejected. If it succeeds, we continue to the next validation step.
",,ashutosh_kumar,binhn,elli-androulaki,mastersingh24,muralisr,shanlusun,troyronda,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2925,FAB-2927,FAB-2928,FAB-2931,FAB-2932,FAB-2933,FAB-2958,FAB-3030,FAB-3092,,,,,,,,,,,,,,,,FAB-2888,,,,,,,,,,,,,,,,FAB-2465,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxjhj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ashutosh_kumar,binhn,elli-androulaki,mastersingh24,muralisr,shanlusun,troyronda,yacovm,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Mar/17 8:11 AM;yacovm;1) I guess the * <user provided CC name>.<user provided version>* is part of a file path, so we should ensure the strings don't have any special character sequences that could cause problems, like: *.* *..*, etc.

2)
{quote}Step 3. LCCC checks the timestamp in the proposal and rejects if outdated.{quote}
Maybe we can do this in step 2? Checking the timestamp is ""cheaper"" than validating a signature, no? 
3)
{quote}Step 7. LCCCchain, checks if Creator is within OwnCC, and rejects if this is not the case.{quote}
This is the pivot of the whole deal, isn't it? To bind between the owner of the chaincode, passed at installation - to the instantiation phase?
I think it's a good idea to be able to specify MSP Principals here, because it can make the whole process be much more flexible.
In example- an admin installed a chaincode on all peers in the organization, and then it can specify that anyone in orgA, orgB and orgC can instantiate the chaincode on the peer of its org, but at the same time- it can do something restrictive- that only admins of orgA can do that, etc. etc.
4)
{quote}Step 8. Endorser produces from LCCCchain the simulation result of its execution (essentially, DBcc_chain enhanced with an entry for the chaincode to be freshly instantiated){quote}
That's the result of invoking the init function, right?
{quote}Step 12. Committing peers receive TXcc_chain as part of the channel with identifier “chainID”. They then run LCCCchain_vscc, where a big part of LCCCchain “instantiation” simulation is to be re-done. Essentially, LCCCchain_vscc would need to repeat steps 3-7, after which it would need to evaluate the obtained simulation result. If the simulation result the LCCCchain_vscc is the same as the one included in the transaction, and there is no version conflict, the LCCCchain_vscc validates the transaction as valid, and applies LCCCchain state changes to ledger.{quote}
I don't understand why the validating phase needs to do a simulation. This (simulation at validation) isn't done in normal transaction validations- we just check version numbers of read sets from what I know.
What is the purpose of running a simulation again?
Isn't it possible to attack peers in such a way?
(Or, maybe I mis-understood and you meant something else?)
5)
{quote}2. list the instantiated chaincodes on a channel (“list cc (-installed) --chain channelid”)
 However there is a chance that this reveals to the querier implicitly which channels that peer has joined, cause it will only list instntiated chaincodes in these chanels. For this reason, it may make sense to allow that also this query is allowed for the peer’s MSP admin.{quote}
What if we add a more fine-grained option: *list cc (-installed) --chain channelid --ccName chaincodename* ? 
What is the use case behind querying the list of chaincodes on a specific channel of a peer anyway?
In my opinion, a user has a list of chaincodes he/she wants to work with, and a specific channel, and it wants to know which peers can he/she use, so knowing all the chaincode names is not too useful to the user.;;;","24/Mar/17 10:44 AM;ashutosh_kumar;I'll ask questions in pieces:
On Chaincode installation 
1) What is the registration process , meaning , what is the process to map Certificate , say , owner of certificate to owner role , or admin cert to admin role.

To me there exists two possibilities : 
1) Chaincode security model provides registration capability or
2) We can make an assumption that the Fabric is not in the business in Role Management/Registration. It lies with enterprise who owns fabric deployment.

Please let me know your thoughts.;;;","24/Mar/17 10:59 AM;ashutosh_kumar;On Step 2 of Chaincode installation : 
1) Is owner , not same as creator or creator can be one of the Owners ? If that is the case , should not we make additional check that the creator is one of the owners ? 
2) How are you going to do Time Stamp validation ? Are you going to take care of time skewness ? Are you going to validate against NTP ? Are you going to have some sliding window ?   ;;;","25/Mar/17 9:51 AM;muralisr;[~yacovm] ..response below

1) We check for special chars in name. The plan is to do the same for version as well.

2) Validating the creator is being done as part of any proposal.. we just continue to do that for install too. Actually I'm not sure we need the ""outdatedness"" check infact.  [~ellaki],  why we would we need this ?

3) leave this to [~ellaki]

4)
_ I don't understand why the validating phase needs to do a simulation_
Agreed... I meant to clean it up. The ""simulation"" part shouldn't read as though we are going to run the chaincode again but do the usual ledger version checks against the simulation results. Should look something like this.

{code:java}
Committing peers receive TXcc_chain as part of the channel with identifier “chainID”. They then run LCCCchain_vscc, where LCCCchain_vscc would need to repeat steps 3-7, after which it would need to evaluate the RW set. If the RWset validation still holds as current, validates the transaction as valid, and applies LCCCchain state changes to ledger.
{code}
;;;","25/Mar/17 10:09 AM;muralisr;[~ashutosh_kumar] 

_What is the registration process , meaning , what is the process to map Certificate , say , owner of certificate to owner role , or admin cert to admin role._

This is closely related to this comment

Step 5. LCCC retrieves the ChaincodeDeploymentSpec and Endorsement array. At this point, we need to decide what to do. *One option would be that the LCCC checks if any of the endorsements in the array of endorsements, correspond to its local MSP admin, and reject if this such a signature is not detected. An other alternative is that we do not do any signature verification there, as there is already a peer MSP admin signature on the proposal (see comment).*
If we decide there is some signature check that needs to take place, then we should have the endorser rejecting the proposal if this check fails. Otherwise, it continues to next step.

The alternative to not do any signature verification would be basically same as your suggestion 
_We can make an assumption that the Fabric is not in the business in Role Management/Registration. It lies with enterprise who owns fabric deployment._

Would you agree ?;;;","25/Mar/17 10:11 AM;muralisr;[~ashutosh_kumar] 

_should not we make additional check that the creator is one of the owners_

This is also related to previous comment...

Yes, we could (this was one of the questions in Step 5).  However it maybe better to keep who ""owns"" separate from who ""administers"" (installs).;;;","25/Mar/17 10:37 AM;elli-androulaki;Hi,

So, [~yacovm], [~muralisr]:
Regarding (3), timestamp checking is our only way of doing replay attack detection of an elder version of a chaincode that is already instlled but has been upgdared, no? Can we tell this by the version itself if its a string?

Regarding (4), though we could add policies, my personal opinion is that for now we keep it simple and go for just a list of identities, at least till we ensure that orderers check that an msp identity / configuration is checked by the orderer at a channel's genesis time :) But not a strong opinion.

Regarding (5), right. But the rationale there is to avoid problematic behavior when an instantiator from OrgA can maliciously update the state of LCCC to erase chaincodes instantiated by other Orgs instantiators. 

[~ashutosh_kumar] will come back to you later :);;;","26/Mar/17 12:39 AM;muralisr;[~ellaki] 
_timestamp checking is our only way of doing replay attack detection of an elder version of a chaincode that is already instlled but has been upgdared, no? Can we tell this by the version itself if its a string?_

Install is implemented as a proposal. The same rules for replay attack detection for a normal proposal should apply for install as well - but you are right on one account ... we cannot check for duplicate TxID against a ledger (as install is not tied to a channel). However, we do check for uniqueness based on name and version. Till we have a fabric provided time, should we stay away from timestamp based checks ? 

Note that instantiate does go through normal replay attack checks like all invokes.;;;","29/Mar/17 9:17 PM;mastersingh24;[~muralisr]  [~ellaki]

While I do have some potential issues with the implementation above, my main issue is that I don't see where we have actually enumerated the requirements / problems we are trying to solve.  While it's possible to infer them from reading the proposed implementation, we need to document the actual requirement(s) and agree on them before proceeding to implementation.

After reading all of the above and based on recollection of some conversations, it seems that there are two proposed requirements here:

1) better method for uniquely identifying chaincode and ensuring that the chaincode which is instantiated is actually the chaincode which was installed

2) provide a mechanism to restrict who has the ability to instantiate a given chaincode on a specified channel (although I don't think the channel is actually important - it's just a necessary part of the way things work)

Are these they requirements?

If so, then we also fail to mention that we need mechanism which do not make installing and instantiating monumental tasks for people who just want the basics - e.g. if you are a member of a channel you can instantiate chaincode on that channel;;;","29/Mar/17 9:20 PM;mastersingh24;also, its unclear to me where ""lifecycle instantiation"" policy comes from and it seems we have not covered how upgrades are handled based on the security mechanisms.  Is the assumption that the policy of the current version is enforced on upgrades?;;;","29/Mar/17 9:43 PM;elli-androulaki;[~muralisr], well the fabric-provided time is crucial when it comes to chainfull operations that affect the state of the ledger somehow. For chainfless requests, e.g., join channel, or list channels, or install chaincode one could use the time to avoid answering queries to a old requests.

[~mastersingh24], yes indeed these were not clearly mentioned in the writeup. Requirements are as you wrote it. For (2), ideally a chainocde can be instantiated to a channel, as long as the creator of the instantiation tx is withing chaincode owners/admins and among the channel's chaincode instantiators. 
Chaincode instantiators was an additional policy that [~jyellick] was to add in the genesis block of a channel (this is the lifecycle instantiation policy), sort of the channel admins, but for application operations. Originally we were thinking of using the config admins, but these ones would require > 1 signatures that existing tx proposal formats to not support...

For the latter/added requirements that you mentioned, I can only agree. But we could set defaults for the developers not to need to actually configure manually anything(?) Any alternative proposal would also be welcome of course!

;;;","30/Mar/17 12:16 AM;muralisr;[~ellaki] In general, when we have a fabric provided time, I agree we can put it to good use.  My suggestion to not use timestamp was based on this comment

{noformat}
Regarding (3), timestamp checking is our only way of doing replay attack detection of an elder version of a chaincode that is already instlled but has been upgdared, no?
{noformat}

Install just places the code on the filesystem and will error out if the code is already there. Instantiate is the operation that affects the ledger and does replay attack protection based on TXID. As long as we don't have a fabric based time, I vote we don't introduce additional complexity for timestamp based checks for install (or perhaps I missing something ?);;;","01/Apr/17 10:06 PM;mastersingh24;[~muralisr] [~ellaki] [~binhn]

{quote}The package will have the following structure
Envelope
Payload
Header
ChannelHeader with type PACKAGE (other fields in header will be nulled out as the package needs to be deterministic)
SignatureHeader nulled out as the package needs to be deterministic.
Data
ChaincodeDeploymentSpec (CDS) in bytes
_*Array of Endorsement (basically “owners” of this package) where Endorsement is a predefined type (see proposal_response.proto)*_{quote}

I don't see the value in having an array of Endorsements as part of the package.  Install is an action against individual peers and as such of course the the overall transaction will be signed.  Maybe we need an additional signature that is part of the actual ""package"" to ensure that the package bytes on the filesystem match the bytes which were installed, but attaching a bunch of owner endorsements does not seem to add any value above actually including a list of owners (perhaps using MSP principals?)

Then when chaincode is instantiated, a peer would only ""endorse"" instantiate for a chaincode if the transactor was one of the ""owners"" (if that's the problem we are trying to solve here);;;","02/Apr/17 12:35 AM;binhn;[~mastersingh24]
My thought on endorsements is that a chaincode, in some form, represents a contract between parties, who implement the contract and agree to the final form and sign it. The endorsements indicate the ownership and the attestation to the agreed contract. This also allows the installer to verify the authenticity of the contract prior to installing it on his peers. LCCC can also verify this during instantiation. 

This mechanism is similar to signed apps (apple store) that would enable community to create marketplace to publish chaincodes. The users of the chaincodes can decide whom to trust.;;;","02/Apr/17 2:23 AM;muralisr;[~mastersingh24] [~binhn] 
Clarified certain points
* the non malleability of package via signatures has some value (at least in terms of ""auditing"", non-repudiation etc) for the installation (as opposed to instantiation)
* but we would need a policy in the package to complete to capture ownership (did all the people who should have signed off sign off ?)
* that policy will also play a dual role at chaincode instantate time to verify the instantiator satifies the policy

Will look to add policy to the package.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer I need  an implementation of threshold signatures, with a modular API for threshold signatures and  multiple instantiations.",FAB-2860,15433,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,stchrysa,stchrysa,23/Mar/17 7:03 PM,23/Jan/20 3:57 AM,28/Oct/23 2:59 AM,23/Jan/20 3:57 AM,,,,,,,,,,,,0,stale-item,,,,,,,"Threshold cryptography distributes a cryptographic scheme among the members of a group of peers in a resilient way, such that N peers execute the function collaboratively, while tolerating a number F of faulty and misbehaving peers.

With a threshold signature scheme, a digital signature is produced collaboratively by the group of N peers, and despite that F of them could be corrupted, no valid signature can result unless some correct peers have also consented to sign. This property is also achieved by multi-signatures, but in a different way: for multi-signatures, a verifier needs to know the list of all peers authorized to sign; a threshold signature scheme instead uses one ordinary signature verification key and produces signatures in the usual format. A threshold signature only needs one verification key and a signature represents the resilient consensus of the abstract signing group.

More precisely, a threshold signature scheme consists of the following algorithms:

(1) A key generation algorithm that generates a public-private key pair, a set of N secret key shares, one for each peer, and a set of verification keys.

(2) A signing algorithm that, given a message and a secret key share, outputs a signature share.

(3) A signature share verification algorithm. Given a message, a signature share, the public key, and a peer-specific verification key, it succeeds if the signatures share is valid.

(4) A share combination algorithm that given a set of N - F valid signature shares from distinct peers outputs the final signature.

(5) A signature verification algorithm, which is no different from ordinary digital signature schemes.

This work includes the implementation of two different threshold signature schemes:
 * RSA-based threshold signatures

Shoup, Victor. ""Practical threshold signatures."" In International Conference on the Theory and Applications of Cryptographic Techniques, pp. 207-220. Springer Berlin Heidelberg, 2000.
 * BLS-signatures (based on EC cryptography)

Boneh, Dan, Ben Lynn, and Hovav Shacham. ""Short signatures from the Weil pairing."" Journal of cryptology 17, no. 4 (2004): 297-319.

Threshold signatures enhance the robustness and the resilience of the blockchain system.",,AshishkumarLakshmanan,cca88,jiangyaoguo,kchristidis,mastersingh24,stchrysa,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,1728000,230400,,0%,1728000,230400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Nov/17 1:09 AM;stchrysa;endorsement.png;https://jira.hyperledger.org/secure/attachment/13101/endorsement.png",,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoev:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,AshishkumarLakshmanan,cca88,jiangyaoguo,kchristidis,mastersingh24,stchrysa,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Mar/17 11:17 PM;mastersingh24;[~stchrysa] - interesting idea to add this, but can you please expand on how you see this being used in practice?  For example, how are the shares distributed to various peers, what happens when new peers are added to any given ""group"", etc.

I like the concept of threshold signatures, but I think that figuring out how to managed and distribute the crypto artifacts / material is actually more of the issue than actually implementing the algorithms.

Did you have some intended use case / scheme in mind here?;;;","15/Apr/17 5:38 AM;mastersingh24;moving this to future until we discuss the end to end usage scenario;;;","01/Nov/17 8:17 PM;kchristidis;Coming here from the mailing list pointer, and bumping this because I'm curious for the answer to Gari's question. What's the use case and what's the end-to-end flow here?;;;","02/Nov/17 1:10 AM;stchrysa;Possible use cases are the following:
 # Replacing the centralized user authentication in membership service provider
 # Signing blocks of transactions as part of a BFT consensus protocol: Instead of verifying a vector of signatures, only one signature needs to be verified.
 # Providing a threshold signature service that can be used for smart contract applications.
 # In transaction endorsement: Instead of verifying a signature from each endorser, verifying only one (assembled) signature. Each endorser signs instead with a threshold signature share.

As a part of my MSc thesis the last point (4) has been implemented.

The end to end flow is presented in the following diagram:

  !endorsement.png|width=579,height=256!

The implementation of the endorsement flow is however now outdated.

Here's a link to the technical report:

https://domino.research.ibm.com/library/cyberdig.nsf/papers/CA80E201DE9C8A0A852580FA004D412F

 

 ;;;","23/Jan/20 3:57 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide peer cli functionality to retreive list of channels peer joined,FAB-2861,15434,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,23/Mar/17 8:46 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,02/Apr/17 11:19 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Currently {{peer cli}}, has capability to execute join channel cscc proposal, while it's not possible to query peer and get the list of channels it joined in the past. Having this functionality is also beneficial to being able to validate the results of join channel command.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxof3:",,,,Unset,,Sprint 14 - Gossip,,,,,,,,,,,,,Unset,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update bootstrap per forthcoming config changes for consortiums,FAB-2862,15435,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,jeffgarratt,jeffgarratt,23/Mar/17 11:24 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,27/Apr/17 5:20 AM,,,,,,,,fabric-quality,,,,0,HSBN,,,,,,,Changes are forthcoming that will augment the current usage of ChaincCreatorsPolicy in config block.,,binhn,jeffgarratt,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxofb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,jeffgarratt,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 12:45 PM;jeffgarratt;Now the behave bootstrap.feature passes with the isCA test removed from orderer.  See https://gerrit.hyperledger.org/r/#/c/8255/.  Will discuss on scrum call in the AM.;;;","25/Apr/17 6:36 AM;jeffgarratt;Hey [~binhn], uploaded latest patch set to https://gerrit.hyperledger.org/r/#/c/8255/.

[~kchristidis] is going to continue to work to merge by working through the dependent patch set.;;;","25/Apr/17 6:52 AM;binhn;[~kchristidis][~jeffgarratt] Thanks.;;;","26/Apr/17 11:15 PM;jeffgarratt;[~binhn] https://gerrit.hyperledger.org/r/#/c/8255/ is now ready to be reviewed and merged.;;;","26/Apr/17 11:18 PM;kchristidis;Sigh, forgot to update this, was looking just at tasks assigned to me. Rebasing is done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create demonstration video of BDD usage,FAB-2863,15436,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,jeffgarratt,jeffgarratt,jeffgarratt,23/Mar/17 11:24 PM,23/Jan/20 3:57 AM,28/Oct/23 2:59 AM,23/Jan/20 3:57 AM,,,,,,,,,,,,0,stale-item,,,,,,,,,jeffgarratt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxofj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jeffgarratt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:57 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modifying chaincode and compiling causes a failure on cli install command,FAB-2865,15438,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,greg.haskins,bmos299,bmos299,24/Mar/17 12:22 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/Apr/17 9:08 PM,,,,,v1.0.0,,,fabric-peer,,,,0,Endorser,,,,,,,"When doing chaincode development using the cli if someone modfieds the chaincode and then does a 'go build chaincode.go' the next time they use the cli and do a 'peer chaincode install' it will fail with:
Error: Error endorsing chaincode: rpc error: code = 2 desc = Illegal file mode detected for file src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02: 100755

Usage:

 peer chaincode install [flags]

There are several notes in the rocket chat channel: fabric .  Also, many in the lab are experiencing the same issue. ",,barath.oct@gmail.com,bmos299,greg.haskins,Mason0620,muralisr,raanaaray,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxofr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,barath.oct@gmail.com,bmos299,greg.haskins,Mason0620,muralisr,raanaaray,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Mar/17 12:23 AM;bmos299;Ratnakar suspects https://jira.hyperledger.org/browse/FAB-2493 may be related.;;;","24/Mar/17 3:13 AM;barath.oct@gmail.com;Its costing a lot of time for the development of chaincode. Please fix this bug.;;;","28/Mar/17 5:32 AM;muralisr;As the log indicates, the executable `src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02`   with x bit on is found in the package.  I understand how in normal dev one does a `go build` which creates and puts the executable in the chaincode folder.

We _could_ ignore such files but that could lead to other failures (in general) when the files are actually relevant. Suggest we clearly document this (and pointedly note the particular case of `go build` creating an executable). What do you think [~bmos299] ?;;;","28/Mar/17 10:32 PM;bmos299;Thanks Murali.  Let's chat on this one and how we can fix without adding to the packaging.  There are so many people that have hit this and spent hours on it.  I understand
rror: Error endorsing chaincode: rpc error: code = 2 desc = Illegal file mode detected for file src/github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02/chaincode_example02: 100755

Does give good info...but maybe we can do more.
Barry
;;;","04/Apr/17 10:14 PM;greg.haskins;I believe this line:

https://gerrit.hyperledger.org/r/#/c/6991/5/core/container/util/writer.go

will fix the issue.  I will extract that fix from 6991 as a separate CR and submit;;;","05/Apr/17 7:47 PM;raanaaray;IS there a way to fix it currently while implementing 1.0 before the CR becomes effective?;;;","05/Apr/17 9:08 PM;greg.haskins;Should already be fixed as of yesterday: https://gerrit.hyperledger.org/r/#/c/7679/;;;","06/Apr/17 12:41 AM;bmos299;The problem is resolved with commit: cacb292921553900ea808344599b9914632bf1d3.  Thanks Greg.
Marking as Done. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose useful Fabric CA Client methods,FAB-2866,15439,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,divyank,divyank,24/Mar/17 12:48 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Mar/17 10:29 PM,,,,,,,,,,,,0,,,,,,,,Certain methods inside fabric-ca/lib/client.go like newIdentity() and loadIdentity() can enable reuse of the client in a Go SDK or Go based applications. These methods should be exported by the package.,,divyank,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5nz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,divyank,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger Performance test,FAB-2867,15440,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,AdnanChoudhury,AdnanChoudhury,AdnanChoudhury,24/Mar/17 1:33 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,27/Sep/17 7:41 PM,,,,,v1.1.1,,,fabric-ledger,fabric-quality,,,0,ledger,performance,quality,,,,,"Conduct Ledger performance test, gather results, analyze. 

1.  Using Manish's test tool, test performance with goleveldb.
2.  Run the same tests with couchDB.
3.  Add a small test to Ramesh's verify CI run to catch any major performance hit.
4.  Add the full suite to a nightly run as we build up the nightly regression run. ",,AdnanChoudhury,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx2qn:",,,,Unset,,Sprint 19 - Quality,,,,,,,,,,,,,Unset,,,,,,,,,,,AdnanChoudhury,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 3:35 AM;ChristopherFerris;the test tool needs to be contributed and integrated into CI with [~rameshthoomu] help. [~bmos299];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Subchannels for Private Data,FAB-2869,15442,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,troyronda,troyronda,24/Mar/17 4:19 AM,23/Jan/20 3:58 AM,28/Oct/23 2:59 AM,23/Jan/20 3:58 AM,,,,,Future,,,,,,,0,stale-item,,,,,,,"A potential future work item resulting from the private data paper (the core of the private data feature is described by FAB-1151). Message routing policies could be customized to ensure that private data only traverses organizations, as determined by the policy for the partition.

There is a short description in section 5. [https://docs.google.com/document/d/1ShrgrYPWLznZSZrl5cnvmFq9LtLJ3tYUxjv9GN6rxuI/edit]

 

 ",,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1151,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxogf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:58 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
run behave tests in docker environment,FAB-2870,15443,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,rameshthoomu,rameshthoomu,24/Mar/17 4:40 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-build,,,,0,build-system,,,,,,,"[~greg.haskins] suggested below approach to run behave tests in docker environment..

1) adding the ""$(DRUN) testenv"" prefix to the behave target, similar to how we run some other things like unit-test and protos
2) migrating the python setup out of baseimage....the challenge here is that baseimage serves both vagrant and docker, and there are users that will want to continue to run behave natively/within-vagrant
therefore, I suspect the best approach for (2) is to extract the python configuration from baseimage in a way that both the fabric.git/devenv and testenv may consume
IOW, pull the python config out of baseimage, put it in its own script (say scripts/behave-setup.sh) and have both the vagrant provisioner and testenv dockerbuild call it
and lastly, 3) make sure you didnt break behave (or at least, break it worse than whatever state its already in)
it was (3) that always scared me off
(1) and (2) should be straightforward

",,rameshthoomu,SriramaSharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3001,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxogn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,SriramaSharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/17 4:54 AM;rameshthoomu;Below is the progress:

1) updated Makefile with

{code:java}
behave-test: testenv
        @echo ""Running Behave Tetss""
        @ cd bddtests
        @$(DRUN) hyperledger/fabric-testenv:$(DOCKER_TAG) ./scripts/behave-setup.sh
{code}
2) updated testenv dockerfile.in file with behave pre-requisties and build *testenv *image
3) Added virtual environment setup steps in behave-setup.sh as mentioned in README file https://gerrit.hyperledger.org/r/#/c/6389/7/bddtests/README.md to run behave tests in virtual environment.

Observed below errors while executing behave-setup.sh script


{code:java}
vagrant@hyperledger-devenv:v0.3.0-d7920a9:/opt/gopath/src/github.com/hyperledger/fabric$ make behave-test
mkdir -p build/image/testenv/payload
cp build/docker/bin/orderer orderer/orderer.yaml common/configtx/tool/configtx.yaml build/docker/bin/peer peer/core.yaml build/msp-sampleconfig.tar.bz2 images/testenv/install-softhsm2.sh images/testenv/venv.sh build/image/testenv/payload
Running behave tests
The directory '/.cache/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.
The directory '/.cache/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.
Collecting virtualenv
  Downloading virtualenv-15.1.0-py2.py3-none-any.whl (1.8MB)
Installing collected packages: virtualenv
Exception:
Traceback (most recent call last):
  File ""/usr/local/lib/python2.7/dist-packages/pip/basecommand.py"", line 215, in main
    status = self.run(options, args)
  File ""/usr/local/lib/python2.7/dist-packages/pip/commands/install.py"", line 342, in run
    prefix=options.prefix_path,
  File ""/usr/local/lib/python2.7/dist-packages/pip/req/req_set.py"", line 784, in install
    **kwargs
  File ""/usr/local/lib/python2.7/dist-packages/pip/req/req_install.py"", line 851, in install
    self.move_wheel_files(self.source_dir, root=root, prefix=prefix)
  File ""/usr/local/lib/python2.7/dist-packages/pip/req/req_install.py"", line 1064, in move_wheel_files
    isolated=self.isolated,
  File ""/usr/local/lib/python2.7/dist-packages/pip/wheel.py"", line 345, in move_wheel_files
    clobber(source, lib_dir, True)
  File ""/usr/local/lib/python2.7/dist-packages/pip/wheel.py"", line 323, in clobber
    shutil.copyfile(srcfile, destfile)
  File ""/usr/lib/python2.7/shutil.py"", line 83, in copyfile
    with open(dst, 'wb') as fdst:
IOError: [Errno 13] Permission denied: '/usr/local/lib/python2.7/dist-packages/virtualenv.pyc'
Makefile:142: recipe for target 'behave-test' failed
make: *** [behave-test] Error 2
vagrant@hyperledger-devenv:v0.3.0-d7920a9:/opt/gopath/src/github.com/hyperledger/fabric$
{code}
;;;","12/Apr/17 5:36 AM;rameshthoomu;Able to run behave tests in docker testenv container but observed bootstrap tests are failing with below errors. 

http://www.heypasteit.com/clip/02M3O7.. [~jeffgarratt] [~greg.haskins] inputs on this please?;;;","12/Apr/17 5:36 AM;rameshthoomu;Below is the error log:

{code:java}
  And the user ""dev0Org0"" creates a ConfigUpdate Tx ""configUpdateTx1"" using cert alias ""dev0Org0App1"" using signed ConfigUpdateEnvelope ""createChannelConfigUpdate1""                                                                               # steps/bootstrap_impl.py:194
    And the user ""dev0Org0"" using cert alias ""dev0Org0App1"" broadcasts ConfigUpdate Tx ""configUpdateTx1"" to orderer ""orderer0"" to create channel ""com.acme.blockchain.jdoe.Channel1""                                                                 # steps/bootstrap_impl.py:209
      Assertion Failed: counter = 0, expected 1
      Captured stdout:
      Will copy gensisiBlock over at this point 
      ipAddress in getABStubForComposeService == 192.168.32.2
      Returning GRPC for address: 192.168.32.2
      Got error: <_Rendezvous of RPC that terminated with (StatusCode.DEADLINE_EXCEEDED, Deadline Exceeded)>
      Got error
      Done
{code}
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing behave scenarios/features on ppc64le,FAB-2873,15446,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,harsha544,harsha544,24/Mar/17 8:59 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,14/Apr/17 9:36 AM,v1.0.0,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,"Evaluating behave tests on master code, the 4 x CouchDB scenario of bootstrap.feature is failing https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283

    Given user ""dev0Org0"" gives ""genesisBlockForMyNewChannel"" to user ""dev0Org1""                                                                                                                                                                     # steps/bootstrap_impl.py:331 0.000s
    When user ""dev0Org0"" using cert alias ""dev0Org0App1"" requests to join channel using genesis block ""genesisBlockForMyNewChannel"" on peers with result ""joinChannelResult""                                                                         # steps/bootstrap_impl.py:256 0.325s
      | Peer  |
      | peer0 |
      | peer1 |
      Traceback (most recent call last):
        File ""/root/Envs/behave_venv2/local/lib/python2.7/site-packages/behave/model.py"", line 1456, in run
          match.run(runner.context)
        File ""/root/Envs/behave_venv2/local/lib/python2.7/site-packages/behave/model.py"", line 1903, in run
          self.func(context, *args, **kwargs)
        File ""steps/bootstrap_impl.py"", line 274, in step_impl
          resultsDict =  dict(zip(endorsers, [respFuture.result() for respFuture in proposalResponseFutures]))
        File ""/root/Envs/behave_venv2/local/lib/python2.7/site-packages/grpc/_channel.py"", line 295, in result
          raise self
      _Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.UNAVAILABLE, Connect Failed)>

      Captured stdout:
      Will copy gensisiBlock over at this point
      ipAddress in getABStubForComposeService == 172.20.0.3
      Returning GRPC for address: 172.20.0.3
      dev0Org0 received reply: status: SUCCESS
      , counter = 1
      Done
      Start and end = 0/0

      SeekInfo = start {
        specified {
        }
      }
      stop {
        specified {
        }
      }
      behavior: FAIL_IF_NOT_READY


      Done receiving blocks
      Returning GRPC for address: 172.20.0.7
      Returning GRPC for address: 172.20.0.9

```

docker ps -a shows, none of the containers are in exit state
And here's what I see inside the newly spawned peer-container :-

```
2017-03-23 14:54:26.098 UTC [couchdb] handleRequest -> DEBU 010 HTTP Request: GET / HTTP/1.1 | Host: couchdb2:5984 | User-Agent: Go-http-client/1.1 | Accept: multipart/related | Accept-Encoding: gzip |  |
2017-03-23 14:54:26.101 UTC [couchdb] handleRequest -> WARN 011 Retrying couchdb request in 125ms. Attempt:1  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:26.229 UTC [couchdb] handleRequest -> WARN 012 Retrying couchdb request in 250ms. Attempt:2  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:26.482 UTC [couchdb] handleRequest -> WARN 013 Retrying couchdb request in 500ms. Attempt:3  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:26.985 UTC [couchdb] handleRequest -> WARN 014 Retrying couchdb request in 1s. Attempt:4  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:27.989 UTC [couchdb] handleRequest -> WARN 015 Retrying couchdb request in 2s. Attempt:5  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:30.078 UTC [couchdb] handleRequest -> WARN 016 Retrying couchdb request in 4s. Attempt:6  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:34.082 UTC [couchdb] handleRequest -> WARN 017 Retrying couchdb request in 8s. Attempt:7  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:42.086 UTC [couchdb] handleRequest -> WARN 018 Retrying couchdb request in 16s. Attempt:8  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:54:58.090 UTC [couchdb] handleRequest -> WARN 019 Retrying couchdb request in 32s. Attempt:9  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
2017-03-23 14:55:30.093 UTC [couchdb] handleRequest -> WARN 01a Retrying couchdb request in 1m4s. Attempt:10  Error:Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused
panic: Error in instantiating ledger provider: Unable to connect to CouchDB, check the hostname and port: Get http://couchdb2:5984/: dial tcp 172.20.0.2:5984: getsockopt: connection refused

goroutine 1 [running]:
panic(0x108c4da0, 0xc420232060)
        /opt/go/src/runtime/panic.go:500 +0x3a8
github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:59 +0x278
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:47 +0x24
sync.(*Once).Do(0x10de11c0, 0x10a4d5a0)
        /opt/go/src/sync/once.go:44 +0x190
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:48 +0x3c
github.com/hyperledger/fabric/peer/node.serve(0xc42024f890, 0x0, 0x1, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:94 +0x48
github.com/hyperledger/fabric/peer/node.glob..func1(0x10d8a3a0, 0xc42024f890, 0x0, 0x1, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:82 +0x44
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x10d8a3a0, 0xc42024f870, 0x1, 0x1, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x4c8
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x10d8ac20, 0x10d8a3a0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x3f4
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x10d8ac20, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x34
main.main()
        /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:111 +0x6c0
(behave_venv2) root@sys-86315:/opt/gopath/src/github.com/hyperledger/fabric/bddtests#",,AdnanChoudhury,ChristopherFerris,harsha544,rameshthoomu,sanchezl,SriramaSharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Apr/17 9:59 PM;harsha544;behave.coucdb.tar;https://jira.hyperledger.org/secure/attachment/10642/behave.coucdb.tar","24/Mar/17 9:42 PM;harsha544;behave_Output;https://jira.hyperledger.org/secure/attachment/10604/behave_Output","01/Apr/17 9:58 PM;harsha544;network.json;https://jira.hyperledger.org/secure/attachment/10640/network.json","25/Mar/17 3:06 AM;harsha544;requirements.txt;https://jira.hyperledger.org/secure/attachment/10609/requirements.txt","01/Apr/17 9:58 PM;harsha544;scenario.html;https://jira.hyperledger.org/secure/attachment/10641/scenario.html","04/Apr/17 9:54 PM;harsha544;scenario_.942814080f4defef916f56d955a3f4e277739597_passinghtml;https://jira.hyperledger.org/secure/attachment/10649/scenario_.942814080f4defef916f56d955a3f4e277739597_passinghtml","04/Apr/17 5:20 PM;harsha544;scenario_.942814080f4defef916f56d955a3f4e277739597html;https://jira.hyperledger.org/secure/attachment/10648/scenario_.942814080f4defef916f56d955a3f4e277739597html","11/Apr/17 3:52 AM;AdnanChoudhury;scenario_passes_step_30.html;https://jira.hyperledger.org/secure/attachment/10653/scenario_passes_step_30.html",,,,,,,,,,,,,,,,,,,,,,"1|hzxog7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,ChristopherFerris,harsha544,rameshthoomu,sanchezl,SriramaSharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Mar/17 9:42 PM;harsha544; [^behave_Output] ;;;","24/Mar/17 11:23 PM;AdnanChoudhury;1. What is the commit level/image tag used?

2. Is it working with previous commits?

3. If its reproducable, A ""steps to reproduce"" would be helpful.
;;;","25/Mar/17 1:01 AM;rameshthoomu;[~harsha544] Also please provide the environment details as well.. I don't see any errors in CI Behave builds.. https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/

We observed this issue in previous commits but this should fix in latest fabric commits.. see the fix here https://gerrit.hyperledger.org/r/#/c/6979/;;;","25/Mar/17 3:21 AM;harsha544;[~AdnanChoudhury] So here are the details :-

1) This was tested on latest head code of fabric.
2) Per this https://github.com/hyperledger/fabric/blob/v1.0.0-alpha/bddtests/features/bootstrap.feature, there's no couchdb specific behave-testing done earlier in V1.0.0-alpha.
3) Yes the steps to reproduce would be per following this https://github.com/hyperledger/fabric/tree/v1.0.0-alpha/bddtests .
     The pip modules were installed --no-cache-dir option using the contents of  this txt file supplied by [~jeffgarratt]  

 [^requirements.txt] 


[~rameshthoomu]

Here are my environment details :- 

1) ARCH -- ppc64le, OS -- Ubuntu 1604
2) Python 2.7.12, pip 9.0.1
3) go version go1.7.4
4)  Docker version 1.12.6, docker-compose version 1.11.2.
5) It is more of a couchdb-testing that's failing, per [~jeffgarratt] suggestion, I tested behave by increasing *SystemUpWaitTime* value to 8.10.20.40.60.90 intervals of https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283 , but it doesn't pass.;;;","29/Mar/17 4:51 AM;AdnanChoudhury;Unable to reproduce in x86.;;;","29/Mar/17 11:03 AM;harsha544;[~AdnanChoudhury] I've been hitting couple of issues while trying to setup the env on x86_64, but can you only run this scenario https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283 provided others are commented and kindly help me with O/P along with the scenario.html file that gets created in latest directory of $GOPATH/src/github.com/hyperledger/fabric/bddtests/tmp/ . Thank you !!;;;","01/Apr/17 9:58 PM;harsha544;I've recently tested behave ( at that time fabric-commit was pointing at _375ccf1eb56dc74f1c22c5bdff25f531b8724465_) and I've observed that behave test(s) when executed multiple times inside virtualenv passed seamlessly for scenarios listed in line [https://github.com/hyperledger/fabric/blob/master/bddtests/features/bootstrap.feature#L283] of bootstrap.feature only. Enclosing tarball the encloses scenario.html file generate after each run.

Also, I've tested scenarios listed in 281,282,283 of bootstrap.feature and it passed. ;;;","04/Apr/17 5:20 PM;harsha544;I've tried behave on fabric-commit on _942814080f4defef916f56d955a3f4e277739597_ and unfortunately behave is not working, attaching scenario.html.;;;","04/Apr/17 9:54 PM;harsha544;I've performed the following steps :- 

1) make dist-clean
2) make docker
3) Created a new virtualenv, installed the required python modules, and executed behave inside bddtests, and they appear to be passing now. Attaching the passing scenario.html file;;;","04/Apr/17 10:38 PM;sanchezl;The fix for https://jira.hyperledger.org/browse/FAB-2908 includes a fix to speedup the couchdb container startup when running outside of Vagrant. ;;;","04/Apr/17 11:11 PM;harsha544;Thanks for the update [~sanchezl] ;;;","11/Apr/17 3:52 AM;AdnanChoudhury;In the latest commit level (commit 7984725990fd8227124ab46cb27bed127e699cfc, Sat April 8th) unable to reproduce the issue in a ppc64le platform. Attaching the html that shows passing (file named scenario_passes_step_30.html). 

The peer containers and the couch containers show expected behavior, the peers show via log that they were able to connect successfully to its corresponding couchdb container.


{code:java}
new_behave_venv) u0017004@sys-86504:~/src/github.com/hyperledger/fabric/bddtests$ docker logs 388f60ee1e1911e7bddf5254008cf8f3_peer1_1 
2017-04-10 18:12:25.596 UTC [ledgermgmt] initialize -> INFO 001 Initializing ledger mgmt
2017-04-10 18:12:25.596 UTC [kvledger] NewProvider -> INFO 002 Initializing ledger provider
2017-04-10 18:12:25.599 UTC [kvledger.util] CreateDirIfMissing -> DEBU 003 CreateDirIfMissing [/var/hyperledger/production/ledgersData/ledgerProvider/]
2017-04-10 18:12:25.599 UTC [kvledger.util] logDirStatus -> DEBU 004 Before creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] does not exist
2017-04-10 18:12:25.600 UTC [kvledger.util] logDirStatus -> DEBU 005 After creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] exists
2017-04-10 18:12:25.613 UTC [kvledger.util] CreateDirIfMissing -> DEBU 006 CreateDirIfMissing [/var/hyperledger/production/ledgersData/chains/index/]
2017-04-10 18:12:25.613 UTC [kvledger.util] logDirStatus -> DEBU 007 Before creating dir - [/var/hyperledger/production/ledgersData/chains/index/] does not exist
2017-04-10 18:12:25.614 UTC [kvledger.util] logDirStatus -> DEBU 008 After creating dir - [/var/hyperledger/production/ledgersData/chains/index/] exists
2017-04-10 18:12:25.739 UTC [kvledger] NewProvider -> DEBU 009 Constructing CouchDB VersionedDBProvider
2017-04-10 18:12:25.741 UTC [statecouchdb] NewVersionedDBProvider -> DEBU 00a constructing CouchDB VersionedDBProvider
2017-04-10 18:12:25.742 UTC [couchdb] CreateConnectionDefinition -> DEBU 00b Entering CreateConnectionDefinition()
2017-04-10 18:12:25.748 UTC [couchdb] CreateConnectionDefinition -> DEBU 00c Created database configuration  URL=[http://couchdb1:5984]
2017-04-10 18:12:25.748 UTC [couchdb] CreateConnectionDefinition -> DEBU 00d Exiting CreateConnectionDefinition()
2017-04-10 18:12:25.753 UTC [couchdb] handleRequest -> DEBU 00e Entering handleRequest()  method=GET  url=http://couchdb1:5984/
2017-04-10 18:12:25.753 UTC [couchdb] handleRequest -> DEBU 00f HTTP Request: GET / HTTP/1.1 | Host: couchdb1:5984 | User-Agent: Go-http-client/1.1 | Accept: multipart/related | Accept-Encoding: gzip |  | 
2017-04-10 18:12:25.762 UTC [couchdb] handleRequest -> WARN 010 Retrying couchdb request in 125ms. Attempt:1  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:25.890 UTC [couchdb] handleRequest -> WARN 011 Retrying couchdb request in 250ms. Attempt:2  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:26.150 UTC [couchdb] handleRequest -> WARN 012 Retrying couchdb request in 500ms. Attempt:3  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:26.657 UTC [couchdb] handleRequest -> WARN 013 Retrying couchdb request in 1s. Attempt:4  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:27.662 UTC [couchdb] handleRequest -> WARN 014 Retrying couchdb request in 2s. Attempt:5  Error:Get http://couchdb1:5984/: dial tcp 172.26.0.6:5984: getsockopt: connection refused
2017-04-10 18:12:29.887 UTC [couchdb] handleRequest -> DEBU 015 Exiting handleRequest()
2017-04-10 18:12:29.887 UTC [couchdb] VerifyConnection -> DEBU 016 VerifyConnection() dbResponseJSON: {""couchdb"":""Welcome"",""version"":""2.0.0"",""vendor"":{""name"":""The Apache Software Foundation""}}

{code}



{code:java}
 [^scenario_passes_step_30.html] 
{code}

  ;;;","14/Apr/17 9:36 AM;ChristopherFerris;ok, if unreproducable now, closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Initial Go SDK,FAB-2874,15447,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,troyronda,troyronda,24/Mar/17 9:22 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,28/Mar/17 6:22 AM,,,,,,,,,,,,0,,,,,,,,"Seed the new Go SDK repository from the master branch of https://github.com/securekey/fabric-sdk-go

",,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxohb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add newfiled (last updated) in nexus docker component,FAB-2875,15448,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,rameshthoomu,rameshthoomu,25/Mar/17 1:12 AM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,20/Jul/18 11:05 PM,,,,,Future,,,fabric-build,,,,0,build-system,,,,,,,"[~ryjones] could you please create/add ""last updated"" field in docker component nexus repository similar to docker hub repository. image references are attached here..

",,jwagantall,rameshthoomu,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/17 1:12 AM;rameshthoomu;docker.PNG;https://jira.hyperledger.org/secure/attachment/10605/docker.PNG","25/Mar/17 1:12 AM;rameshthoomu;nexus.PNG;https://jira.hyperledger.org/secure/attachment/10606/nexus.PNG",,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxohj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jwagantall,rameshthoomu,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Apr/17 9:54 AM;ryjones;Ramesh,
I read through the Nexus 3 documentation and it doesn't look like this is possible. Feel free to check out https://books.sonatype.com/nexus-book/3.2/reference/index.html - it doesn't look like that data is even available to custom searches.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Invoking chaincode returns endorsing error when couchdb enabled,FAB-2876,15449,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,pd93,pd93,25/Mar/17 2:17 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Mar/17 5:28 AM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"*Error*

{color:red}{code}Error: Error endorsing invoke: rpc error: code = 2 desc = Unknown error{code}{color}

*Solution*

This turned out to be an uncaught chaincode error. If you're seeing this error. Make sure you're outputting errors in your chaincode with {code}fmt.Print(err){code}. You can then view the errors by checking your chaincode logs: {code}docker logs <chaincode_container>{code}

*Steps to Reproduce*

1 - Set up a directory structure like this:
{code}
- chaincode
    - chaincode.go
- crypto
- docker
    - docker-compose.yml (using attached docker-compose.yml)
- gen
{code}

2 - Generate crypto material using the cryptogen tool
{code}cryptogen -peerOrgs 1 -peersPerOrg 4{code}
(Rename generated folder to ""crypto"" to match directory structure)

3 - Generate orderer.block and channel.tx using the configtxgen tool (with attached configtx.yaml)
{code}
configtxgen -profile EQ -channelID sysch -outputBlock ./gen/orderer.block
configtxgen -profile EQ -channelID mych -outputCreateChannelTx ./gen/channel.tx
{code}

4 - {code}docker-compose up -d{code}

5 - Run the following commands from the cli container
{code}
CORE_PEER_LOCALMSPID=""OrdererOrg""
CORE_PEER_MSPCONFIGPATH=""$MNT/crypto/ordererOrgs/ordererOrg/orderer""

peer channel create -o orderer:7050 -c mych -f channel.tx

# TODO: Uncomment when name resolution works again
#CORE_PEER_ADDRESS=""peer0:7051""
CORE_PEER_ADDRESS=""172.18.0.5:7051""
CORE_PEER_LOCALMSPID=""Org1""
CORE_PEER_MSPCONFIGPATH=""$MNT/crypto/peerOrgs/Org1/peers/peer0""

peer channel join -b mych.block

peer chaincode install -o orderer:7050 -n mycc -v 0.1 -p mnt/chaincode

peer chaincode instantiate -o orderer:7050 -C mych -n mycc -v 0.1 -p mnt/chaincode -c '{""Args"":[""init""]}' -P ""OR ('$CORE_PEER_LOCALMSPID.member')""

# Error occurs here
peer chaincode invoke -o orderer:7050 -C mych -n mycc -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
{code} ",,pd93,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/17 2:17 AM;pd93;configtx.txt;https://jira.hyperledger.org/secure/attachment/10607/configtx.txt","25/Mar/17 2:17 AM;pd93;docker-compose.txt;https://jira.hyperledger.org/secure/attachment/10608/docker-compose.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxohr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,pd93,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
REJECTED - Support to add Shim API for creating index to be used for Rich Query in the user-chaincode,FAB-2877,15450,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,rhegde,rhegde,25/Mar/17 3:23 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,07/Nov/17 1:30 AM,,,,,WON'T FIX,,,fabric-ledger,,,,1,Release-planning-1.2,,,,,,,"Currently, the indexes are created using the CURL command to couch-db and this becomes not easy to scale where the channel count can shoot to hundreds.

There is need to have SHIM interface that can create index in user-chain-code. This needs to be thought how more indexes can be added (should it be done by user-chain code upgrade?).



",,denyeart,rhegde,sandp125,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6174,FAB-3067,,,,FAB-3183,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxohz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,rhegde,sandp125,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Mar/17 3:25 AM;rhegde;As discussion with [~mastersingh24] and [~Clayton Sims], assigning to [~denyeart].;;;","19/Jun/17 8:37 PM;rhegde;Another point - index needs to be created on that Peer joining network dynamically (after instantiation) or non-instantiation node.;;;","07/Nov/17 1:30 AM;denyeart;Index creation is not a data transaction that needs to be ordered and recorded on chain.  Rather it is a configuration that should be agreed to as part of the chaincode package, and applied once chaincode is installed and configured on a channel.  Therefore indexes will be managed as part of chaincode lifecycle (FAB-3067) rather than as a data transaction.  For some databases the indexes must be applied manually, which again is more aligned with chaincode lifecycle than a sequenced data transaction.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB Phantom Read,FAB-2878,15451,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,,timpii,timpii,25/Mar/17 5:02 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,20/Jul/17 12:39 AM,,,,,Future,,,fabric-ledger,,,,0,Ledger,,,,,,,"Using CouchDB rich query functionality in the current implementation introduces a potential phantom read problem. As an example if endorsing chaincode performs a rich query to determine if a transaction is a duplicate and returns no results (happy path), by the time the commit happens that same query ""could"" produce a different result in the situation where a prior transaction was committed between the endorsement and committing phase.

Range queries against the LevelDB protect against this by rerunning the query at commit time. Currently, the rich query is not rerun and thus the result set is not validated for the query at time of commit. Protection against phantom reads should be included for CouchDB rich queries. ",,denyeart,mastersingh24,shanlusun,timpii,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoi7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,mastersingh24,shanlusun,timpii,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/17 4:29 AM;mastersingh24;[~denyeart] Can you have a look at this one?;;;","30/Mar/17 4:56 AM;denyeart;This is true, but unfortunately the phantom check is much more complicated for rich query than range query, since the CouchDB query engine cannot easily be reproduced in peer.  This would require pushing each tran in the block to CouchDB one by one during validation phase, and re-executing the rich queries.  This also brings potential issues if the tran needs to get rolled back.

For these reasons, in v1 it is documented that rich query should not be used when identifying keys to update in chaincode, unless the client application can either ensure no phantoms or deal with phantoms in subsequent transactions. The documented recommendation is to perform range queries or partial composite key queries to identify keys to update, and to use rich queries for read-only queries.

Adding to fabric-ledger backlog for consideration in future releases.;;;","20/Jul/17 12:38 AM;timpii;This JIRA item can be closed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Config Transaction Documentation and Understanding,FAB-2879,15452,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,nickgaski,timpii,timpii,25/Mar/17 5:24 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,22/Mar/18 7:19 AM,v1.0.0,v1.0.0-beta,,,,,,fabric-docs,fabric-orderer,,,0,,,,,,,,"Config Transactions are used for creating and updating channels / chains / Ledgers. The information and processing requirements are complex, recently re-architected, and not really documented (both for understanding and how-to). Understanding how to generate and manage Config Transactions and the authorization strategies surrounding them is key to understanding how to manage chains and chaincode.",,joe-alewine,mastersingh24,timpii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoif:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,joe-alewine,mastersingh24,timpii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/17 8:02 PM;timpii;Could a link to the in-process documentation be included with this JIRA?;;;","22/Mar/18 7:19 AM;joe-alewine;Multiple documents now cover this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix configtxgen output,FAB-2880,15453,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,25/Mar/17 7:03 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,27/Mar/17 12:59 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"No more:

1. ```Checking for configtx.yaml at:
Checking for configtx.yaml at:
Checking for configtx.yaml at: /opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool```

2. Dumping the `TopLevel` config struct on screen. (This is what the `-inspectXYZ` flags are for.)",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoin:",,,,Unset,,Sprint 14 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Mar/17 7:04 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7441/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add option to build binaries without PKCS11 support,FAB-2883,15456,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,25/Mar/17 9:53 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,03/Apr/17 8:28 PM,,,,,v1.0.0,,,fabric-orderer,fabric-peer,,,0,,,,,,,,"In order to support PKCS11,  [3rd party package|https://github.com/miekg/pkcs11] which has a dependency on libtool was added.  This complicates things when trying to build native binaries locally as you now have to install a dependency (which may or may not be easily available / installable on all platforms).

Conveniently, Go supports the notion of build tags for ""conditional"" compilation.  In order to optionally support building without PKCS11 support, we'll add the build tag {{nopkcs11}} to the bccsp factory package and then add a GO_TAGS flag to our makefile as well as adding {{-nopkcs11}} targets for the peer and orderer.  The {{configtxgen}} target will be modified to always build without PKCS11 support since it is not required.",,mastersingh24,vanderheijden86,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2854,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoiv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,vanderheijden86,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Mar/17 10:09 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/7443/;;;","29/Mar/17 4:11 PM;vanderheijden86;On Mac OS X Sierra (10.12.1) you can solve this issue by installing libtool via brew. Simply run ""brew install libtool"".;;;","30/Mar/17 4:39 AM;mastersingh24;hi [~vanderheijden86] - yeah - I know and that's what I do.  But I think it's crappy that you have to do this if you don't want / need PKCS11 and also we have some tools that are built and definitely don't need PKCS11 support;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove chaincode FSM and streamline chaincode framework code,FAB-2884,15457,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,muralisr,muralisr,muralisr,27/Mar/17 7:06 AM,23/Jan/20 3:58 AM,28/Oct/23 2:59 AM,23/Jan/20 3:58 AM,,,,,Future,,,fabric-peer,,,,1,stale-item,,,,,,,"The FSM was used in the original 0.5, 0.6 chaincode where a state machine approach helped handle different types of requests with different serialization needs. In 1.0, the framework is simplified drastically 
* there are no concurrent queries and serial invokes. There are only invokes and they are all concurrent
* splitting ""deploy"" into ""install"" and ""instantiate"" further simplifies ""Init"" handling where the flow resembles ""Invoke""

Remove of FSM  has the following benefits
* helps to simplify by indirections and callbacks related to FSM
* this will have some performance benefit by eliminating need to streamline flows through the FSM.
* will make it much easier to add new platforms (this is probably the most important benefit)

This will be split into following tasks
* peer side cleanup
* shim side cleanup for java
* shim side cleanup for go

These are independent tasks as the FSM is an implementation detail that does not bleed component boundaries.
",,denyeart,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2885,FAB-2886,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoj3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","23/Jan/20 3:58 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove chaincode FSM on peer,FAB-2885,15458,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,muralisr,muralisr,muralisr,27/Mar/17 7:07 AM,23/Jan/20 3:58 AM,28/Oct/23 2:59 AM,23/Jan/20 3:58 AM,,,,,Future,,,fabric-peer,,,,0,stale-item,,,,,,,,,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2884,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxojb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:58 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove chaincode FSM on go shim,FAB-2886,15459,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,muralisr,muralisr,muralisr,27/Mar/17 7:07 AM,23/Jan/20 3:58 AM,28/Oct/23 2:59 AM,23/Jan/20 3:58 AM,,,,,Future,,,fabric-peer,,,,1,stale-item,,,,,,,,,baohua,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2884,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxojj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 3:58 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Different chaincodes could be installed on two peers with same chaincode name on the same channel,FAB-2888,15462,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,fennelD7,fennelD7,27/Mar/17 1:19 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/Apr/17 4:30 AM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,," !image-2017-03-27-12-15-50-566.png|thumbnail! 

I found that two different chaincodes could both be installed successfully on two peers (same chaincode name and channel).
As I tested with example02 and example02_fake, chaincode installed on peer0 always dominate, no matter the sequence they were installed and instantiated. 
Logs attached. ",,denyeart,fennelD7,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Mar/17 1:15 PM;fennelD7;image-2017-03-27-12-15-50-566.png;https://jira.hyperledger.org/secure/attachment/10610/image-2017-03-27-12-15-50-566.png","27/Mar/17 12:27 PM;fennelD7;log1_fake_succeed.txt;https://jira.hyperledger.org/secure/attachment/10612/log1_fake_succeed.txt","27/Mar/17 12:27 PM;fennelD7;log2_example02_succeed.txt;https://jira.hyperledger.org/secure/attachment/10611/log2_example02_succeed.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx7gn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,fennelD7,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Mar/17 12:15 AM;muralisr;[~fennelD7] Currently we don't link the chaincode that's installed against the chaincode that's instantiated.  This will be done as part of the ""packaging"" work described in https://jira.hyperledger.org/browse/FAB-2859.

The instantiation record for the chaincode will live on the channel ledger. The record will contain the hash of the installed chaincode package (among other things) which will make sure that ""example02_fake"" will not be brought up on a peer from its installed package when ""example02"" was instantiated on the channel.;;;","28/Mar/17 10:45 AM;fennelD7;Srinivasan Muralidharan, ""The instantiation record for the chaincode will live on the channel ledger"", this is all I want to know. Thank you!;;;","12/Apr/17 4:29 AM;denyeart;Covered by FAB-2859. Please re-open if there is still an issue after testing FAB-2859.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enable e2e testing in jenkins for ppc64le and s390x arch,FAB-2889,15463,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,harsha544,harsha544,27/Mar/17 1:54 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,"The intent of the JIRA item is to enable fabric-verify-e2e testing for ppc64le and s390x arch, initially the fabric-verify-e2e testing will be running in silent mode to observe the behaviour. 

Based on the behaviour we can mitigate issues and fix them before voting is enabled for them.",,harsha544,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxojz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harsha544,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 11:45 AM;rameshthoomu;[~harsha544] Observed power build nodes are having problems while cleaning up workspace after build is complete. Also, we are seeing e2e tests are failing consistently.. Will enable these tests in CI once e2e issues are fixed and working consistently in all three platforms. 

FYI: we are verifying e2e tests (cli and node) in x86, power and z platforms in jenkins sandbox environments. ;;;","26/Apr/17 1:02 PM;harsha544;[~rameshthoomu] Sounds like a plan, and thanks for the update .;;;","15/Jun/17 12:59 AM;rameshthoomu;[~harsha544] We have disabled power nodes from community CI.. But we perform e2e tests on all three platforms from sandbox Jenkins..

Will enable e2e tests on z and will enable these tests on power nodes once they are back..;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Build failures with log config issue in Jenkins (CI),FAB-2890,15464,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,27/Mar/17 10:44 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Apr/17 12:14 AM,,,,,,,,,,,,0,build-system,,,,,,,"noticed builds are failing with below error **jenkins-log-archives-settings but can not find the config**

{code:java}
04:23:57 ERROR: your Apache Maven build is setup to use a config with id jenkins-log-archives-settings but can not find the config
04:23:57 ERROR: Build step failed with exception
04:23:57 java.lang.IllegalStateException: your Apache Maven build is setup to use a config with id jenkins-log-archives-settings but can not find the config
04:23:57 	at org.jenkinsci.plugins.configfiles.maven.job.MvnSettingsProvider.supplySettings(MvnSettingsProvider.java:76)
04:23:57 	at jenkins.mvn.SettingsProvider.getSettingsFilePath(SettingsProvider.java:53)
04:23:57 	at jenkins.mvn.SettingsProvider.getSettingsRemotePath(SettingsProvider.java:70)
04:23:57 	at hudson.tasks.Maven.perform(Maven.java:331)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript.processBuildSteps(PostBuildScript.java:204)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript.processScripts(PostBuildScript.java:143)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript._perform(PostBuildScript.java:105)
04:23:57 	at org.jenkinsci.plugins.postbuildscript.PostBuildScript.perform(PostBuildScript.java:85)
04:23:57 	at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:20)
04:23:57 	at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:779)
04:23:57 	at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:720)
04:23:57 	at hudson.model.Build$BuildExecution.post2(Build.java:185)
04:23:57 	at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:665)
04:23:57 	at hudson.model.Run.execute(Run.java:1753)
04:23:57 	at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:43)
04:23:57 	at hudson.model.ResourceController.execute(ResourceController.java:98)
04:23:57 	at hudson.model.Executor.run(Executor.java:404)
04:23:57 Build step 'Execute a set of scripts' marked build as failure
04:23:57 Archiving artifacts
04:23:58 Recording fingerprints
04:23:58 Finished: FAILURE
{code}
",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxol3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/17 3:29 AM;rameshthoomu;this issue is fixed changing the configuration in Jenkins master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
capture docker log artificats in fabric-sdk-node builds,FAB-2891,15465,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,27/Mar/17 10:53 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,30/Mar/17 12:19 AM,,,,,,,,,,,,0,build-system,,,,,,,capture docker logs of fabric-sdk-node verify and merge builds. Add publisher to store build docker log artifacts in fabric-sdk-node verify and merge builds.,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxolb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/17 12:21 AM;rameshthoomu;Patch has been submitted and merged.. Now on Jenkins console output, you can see dockerlogfile artifacts to view docker peer and orderer logs;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update bootstrap BDD to accommodate latest proto changes,FAB-2893,15467,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jeffgarratt,jeffgarratt,jeffgarratt,28/Mar/17 12:45 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Mar/17 10:41 PM,,,,,,,,,,,,0,,,,,,,,msp related proto moved and case fixes for others.,,jeffgarratt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxolj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jeffgarratt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Mar/17 5:33 AM;jeffgarratt;Pushed a CR https://gerrit.hyperledger.org/r/#/c/7477/

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Transaction index within block should start at 0, not 1",FAB-2897,15471,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,Honglei,denyeart,denyeart,28/Mar/17 4:48 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,20/Apr/17 1:33 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"First block is block0.  To be consistent when looking at transaction 'height', first transaction in each block should be transaction0. 

Also, the validation array for transactions within the block starts at 0.  This causes confusion between validation array height and transaction height.  Best to use '0' for first item everywhere consistently.",,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-758,,,,,,,,,"1|hzx4in:",,,,Unset,,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Mar/17 3:12 PM;denyeart;I see that Cong Honglei assigned this.

[~manish-sethi] Do you see any issue with this change?;;;","31/Mar/17 5:41 PM;manish-sethi;Block number has a significance because, it is stored in the block's header and is exposed via public APIs ('GetBlockByNumber' etc.) and hence the preference was to match the block numbering to bitcoin numbering scheme. As far as transaction numbering is concerned, as such there is no notion of transaction number and hence no public APIs. It's all in the internal code. So, pretty much it is a matter of taste and hence either way is fine. No, I don't foresee any issue with this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Leader election unit tests fails CI, wrong leadership selection.",FAB-2901,15475,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,C0rWin,C0rWin,28/Mar/17 6:54 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Apr/17 3:12 AM,,,,,,,,fabric-gossip,,,,0,,,,,,,,"{code}
05:38:21 unit-tests_1  | ok  	github.com/hyperledger/fabric/gossip/comm/mock	0.045s	coverage: 82.4% of statements
05:38:21 unit-tests_1  | ?   	github.com/hyperledger/fabric/gossip/common	[no test files]
05:38:41 unit-tests_1  | ok  	github.com/hyperledger/fabric/gossip/discovery	7.573s	coverage: 83.2% of statements
05:39:02 unit-tests_1  | --- FAIL: TestPartition (3.10s)
05:39:02 unit-tests_1  | 	assertions.go:219: 
                        
	Error Trace:	election_test.go:330
05:39:02 unit-tests_1  | 		
	Error:		Should be true
05:39:02 unit-tests_1  | 		
	Messages:	Leadership callback result is wrong for p0
05:39:02 unit-tests_1  | 		
05:39:02 unit-tests_1  | FAIL
05:39:02 unit-tests_1  | coverage: 94.8% of statements
05:39:02 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/election	7.153s
05:39:02 unit-tests_1  | error: exit status 1
05:39:02 unit-tests_1  | panic: EOF
05:39:02 unit-tests_1  | 
05:39:02 unit-tests_1  | goroutine 1 [running]:
05:39:02 unit-tests_1  | panic(0x4daca0, 0xc42006c020)
05:39:02 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
05:39:02 unit-tests_1  | main.main()
05:39:02 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
05:39:03 unittest_unit-tests_1 exited with code 2
05:39:03 Stopping unittest_vp_1 ... 
05:39:03 Stopping couchdb ... 
05:39:04 
Stopping couchdb ... done

Stopping unittest_vp_1 ... done
Aborting on container exit...
{code}

Full log could be seen here:
https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8889/console
",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx593:",,,,,,Sprint 14 - Gossip,Sprint 15 - Gossip,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
linter now doesn't cover all code,FAB-2902,15478,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,baohua,baohua,baohua,28/Mar/17 7:42 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,30/Mar/17 4:49 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"It only checks the following code dir:

""./core"" ""./events"" ""./examples"" ""./peer"" ""./protos"" ""./orderer"" ""./msp"" ""./gossip"" ""./bccsp""

Should include all the go codes.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxorj:",,,,,,Sprint 14 - Quality,,,,,,,,,,,,,,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Push BCCSP SW impl code into BCCSP,FAB-2903,15479,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,vpaprots@ca.ibm.com,smithbk,smithbk,28/Mar/17 11:39 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,20/Jul/18 11:05 PM,,,,,WON'T FIX,,,fabric-crypto,,,,0,,,,,,,,"The following is in fabric-ca/lib/client.go (around line 143).  I think this logic should be pushed into BCCSP as it is specific to the SW implementation.

{code}
		if bccspConfig == nil {
			bccspConfig = &factory.DefaultOpts
		}

		if bccspConfig.ProviderName == ""SW"" {
			if bccspConfig.SwOpts == nil {
				bccspConfig.SwOpts = factory.DefaultOpts.SwOpts
			}

			// Only override the KeyStorePath if it was left empty
			if bccspConfig.SwOpts.FileKeystore == nil ||
				bccspConfig.SwOpts.FileKeystore.KeyStorePath == """" {
				bccspConfig.SwOpts.Ephemeral = false
				bccspConfig.SwOpts.FileKeystore = &factory.FileKeystoreOpts{KeyStorePath: mspDir + ""/keystore""}
			}
		}
{code}",,elli-androulaki,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxorr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,mastersingh24,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 2:56 AM;elli-androulaki;[~vpaprots@ca.ibm.com], is this for v1, or post v1?;;;","12/Apr/18 10:20 PM;mastersingh24;no longer valid;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
node e2e tests are failing on latest commits,FAB-2904,15480,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jimthematrix,rameshthoomu,rameshthoomu,29/Mar/17 12:07 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Apr/17 12:15 AM,,,,,,,,,,,,0,node-SDK,,,,,,,"observed sdk-node e2e tests are failing with below errors

Commit levels# :

=======> FABRIC PEER COMMIT NUMBER - 51b7e85 
=======> FABRIC CA COMMIT NUMBER - e724a89 
=======> FABRIC SDK NODE COMMIT NUMBER - be3cf0b

{code:java}

14:11:12 error: [Chain.js]: Chain-sendPeersProposal - Promise is rejected: Error: REQUEST_TIMEOUT
14:11:12     at Timeout._onTimeout (/w/workspace/FIT-node-x86_64/gopath/src/github.com/hyperledger/fabric-sdk-node/node_modules/fabric-client/lib/Peer.js:9:3796)
14:11:12     at ontimeout (timers.js:365:14)
14:11:12     at tryOnTimeout (timers.js:237:5)
14:11:12     at Timer.listOnTimeout (timers.js:207:5)
{code}

consistently observed this error in end-to-end flow.  Below are the docker log files and build reference
https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/300/consoleFull

Observed below errors from peer docker log:


{code:java}
[33;1mpeer1       |[0m [33m2017-03-28 14:10:40.912 UTC [gossip/comm#-1] authenticateRemotePeer -> WARN 034[0m Remote peer 172.18.0.7:7051 didn't send TLS certificate
[34mpeer0       |[0m [33m2017-03-28 14:10:40.912 UTC [gossip/comm#-1] authenticateRemotePeer -> WARN 33f[0m Remote peer 172.18.0.9:54824 didn't send TLS certificate
[34mpeer0       |[0m [31m2017-03-28 14:10:40.912 UTC [gossip/comm#-1] GossipStream -> ERRO 340[0m Authentication failed
[33;1mpeer1       |[0m [33m2017-03-28 14:10:40.913 UTC [gossip/gossip#peer1:7051] func1 -> WARN 035[0m Deep probe of peer0:7051 failed: Remote peer 172.18.0.7:7051 didn't send TLS certificate
{code}



{code:java}
[34mpeer0       |[0m [36m2017-03-28 14:11:12.301 UTC [shim] handleGetState -> DEBU 3e8[0m [32e07284]GetState received payload RESPONSE
[34mpeer0       |[0m [31m2017-03-28 14:11:12.301 UTC [lccc] Invoke -> ERRO 3ea[0m ChaincodeId: end2end does not exist on channel: mychannel(err:chaincode not found end2end)
{code}
",Jenkins CI,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxorz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/17 12:15 AM;rameshthoomu;Not observed this is issue on latest commits. Closing this issue;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e_cli marble invoke runs ok even though peer not installed chaincode,FAB-2905,15481,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,AdnanChoudhury,bh4rtp,bh4rtp,29/Mar/17 12:09 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/May/17 6:14 PM,v1.0.0,,,,v1.0.0,,,fabric-ledger,,,24/Mar/17 12:00 AM,0,endorser,invoke,marble,peer,,,,"Firstly, the e2e_cli default example runs ok. We built the marble02 test-case based on network_setup.sh, docker-compose-no-tls.yaml, and scripts/script.sh. And the corresponding test-case files are named with marbles_network_setup.sh, docker-compose-marbles-no-tls.yaml, and scripts/myscript.sh. 

It needs to mention that the network automatically built by marbles_network_setup.sh can successfully run the marbles02 chaincode examples that are given on the top of marbles_chaincode.go ([https://github.com/hyperledger/fabric/blob/master/examples/chaincode/go/marbles02/marbles_chaincode.go]).

The test steps are as follows.
1. copy three attached files to e2e_cli
2. copy marble02 directory from examples/chaincode/go to e2e_cli/examples/chaincode/go
3. run ./marbles_network_setup.sh up eprich1
4. run docker exec -it cli bash
5. run ./scripts/myscript.sh eprich1

The myscript.sh will do:
1) install chaincode marbles02 on peer0
2) install and instantiate chaincode marbles02 on peer3, the endorsement policy is specified as -P ""OR ('Org0MSP.member', 'Org1MSP.member')""
3) invoke initMarble runs ok on peer2
4) query fails with error endorsing on peer2. The error message shows:
Error: Error endorsing query: rpc error: code = 2 desc = Error executing chaincode: Could not get deployment transaction from LCCC for marbles:v0 - Get ChaincodeDeploymentSpec for marbles/eprich1 from LCCC error: transaction not found marbles/eprich1 

Why does invoke initMarble on peer2 run ok? Is query fails correct?",,AdnanChoudhury,bh4rtp,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/17 12:07 AM;bh4rtp;docker-compose-marbles-no-tls.yaml;https://jira.hyperledger.org/secure/attachment/10625/docker-compose-marbles-no-tls.yaml","29/Mar/17 12:07 AM;bh4rtp;marbles_network_setup.sh;https://jira.hyperledger.org/secure/attachment/10624/marbles_network_setup.sh","20/Apr/17 12:39 PM;bh4rtp;myscript.sh;https://jira.hyperledger.org/secure/attachment/10672/myscript.sh",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4nr:",,,,,,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,AdnanChoudhury,bh4rtp,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/17 9:38 AM;bh4rtp;Keeping other steps unchanged except step 2), both invoke and query on peer2 will fail if using endorsement policy -P ""AND ('Org0MSP.member', 'Org1MSP.member')"".;;;","11/Apr/17 9:08 PM;denyeart;[~AdnanChoudhury] Could you assess this one? Can you reproduce? Do you have an explanation?;;;","20/Apr/17 12:39 PM;bh4rtp;myscript.sh is updated.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a developer, I would like to see a series of videos showing me how to complete different tasks, so that I can see the documentation working in 'real-time'",FAB-2906,15482,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,markparz,markparz,29/Mar/17 12:53 AM,23/Jan/20 3:59 AM,28/Oct/23 2:59 AM,23/Jan/20 3:59 AM,,,,,Future,,,fabric-docs,,,,0,Documentation,stale-item,,,,,,"Would like to see several videos put together on the different aspects of creating a network to creation of chaincode and applications. Some examples of good videos:

Starting the Fabric CA, and integrating with LDAP, and other Fabric CAs
Writing Chaincode, install/instantiate, testing before deploy, upgrading that CC.
Starting the Ordering service
etc. ",,ChristopherFerris,markparz,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-5,,Technical video series ,To Do,,,Unset,,,,"1|hzxos7:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/17 12:42 AM;ChristopherFerris;Do we plan to do this for v1.0 really? Or, is it just a placeholder?;;;","07/Apr/17 6:27 AM;markparz;Would love to see folks help with this, definitely a placeholder at this second. ;;;","23/Jan/20 3:59 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Run behave tests outside of Vagrant,FAB-2908,15484,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sanchezl,sanchezl,sanchezl,29/Mar/17 2:08 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,04/Apr/17 5:57 AM,,,,,,,,fabric-build,,,,0,quality,,,,,,,Tweak the behave tests to run outside of Vagrant on a non-Linux system.,,harsha544,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxosf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,harsha544,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OSX local run chaincode -> Killed: 9,FAB-2910,15486,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,Lin-YiTang,Lin-YiTang,29/Mar/17 3:52 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/Apr/17 6:54 PM,,,,,,,,,,,,0,,,,,,,,"OSX local run chaincode -> Killed: 9 
build peer ./peer -> Killed: 9 
build configtxgen ./configtxgen  -> Killed: 9 
build about fabirc run the program on MacOS -> killed 9
Maybe is my problem",,Lin-YiTang,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx9pb:",,,,,,Sprint 4,,,,,,,,,,,,,,,,,,,,,,,,Lin-YiTang,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 10:31 PM;sanchezl;Native binaries are broken on macOS once you update to XCode 8.3 (check via {{xcodebuild --version}} command). As a workaround, edit the {{build/bin/%}} target in the fabric {{Makefile}}, changing {{""$(GO_LDFLAGS)""}} in the recipe to {{""$(GO_LDFLAGS) -s""}}.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer's CouchDB code incorrectly converts a Integer value to a Floating Number thus causing JSON unmarshalling error and leading for user-chaincode to fail the Endorsement Proposal,FAB-2911,15487,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rhegde,rhegde,rhegde,29/Mar/17 3:55 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/Apr/17 2:49 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"There is defect in https://github.com/hyperledger/fabric/blob/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go#L144 


h5. Steps to Reproduce
bq. 1. Install marbles02 using CouchDB
bq. 2. for instantiate ==> -c '{""Args"":[""init""]}'
bq. 3. for creating a marble asset ==> -c '{""Args"":[""initMarble"",""marble1"",""blue"",""1000009"",""tom""]}'
bq. 4. for transferring the marble asset ==> -c '{""Args"":[""transferMarble"",""marble2"",""jerry""]}'

Step 4 fails with 
{quote}```
2017-03-28 10:51:35.662 UTC [msp] Sign -> DEBU 005 Sign: digest: E8E5581A81BEF35E104FAD041A8E81AD549C517FCFE7612B50FDE5E78505AC97 
Error: Error endoatrsing invoke: rpc error: code = 2 desc = json: cannot unmarshal number 1.000009e+06 into Go value of type int
Usage:
```{quote}
Note: This doesn't get reproduced on Level-DB

*Root Cause*
bq. statecouchdb.go for unwrapping the data namespace (removeDataWrapper) uses the generic interface representation and causes the golang JSON package API to retain the floating point representation. A integer size >= 7 is represented with E notation internally by JSON package and this field upon un-marshalling result in the above error.

h5. *Fix in Peer Code*
Need to replace the following line https://github.com/hyperledger/fabric/blob/master/core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb.go#L147 to use json package NewDecoder API with UseNumber call.
{quote}
decoder := json.NewDecoder(bytes.NewBuffer(wrappedValue))
decoder.UseNumber()
err := decoder.Decode(&jsonResult);
{quote}

Reference: http://stackoverflow.com/questions/16946306/preserve-int64-values-when-parsing-json-in-go
",,Clayton Sims,denyeart,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx573:",,,,,,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,denyeart,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/17 3:34 AM;Clayton Sims;Dave - this came in from CLS can you take a look.;;;","31/Mar/17 11:06 PM;denyeart;[~Clayton Sims] We helped Rahul from CLS deliver a fix, it is out for +2 reviews now: https://gerrit.hyperledger.org/r/#/c/7567/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Undo base16-encoding for channel names,FAB-2912,15488,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,29/Mar/17 9:29 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,29/Mar/17 10:09 PM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,kafka,,,,,,,"The Kafka-based orderer would base16-encode channel names as a temporary workaround for escaping illegal characters in Kafka [1].

With the filtering added in FAB-1349 [2], this kind of workaround is not longer needed.

[1] https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/common/Topic.scala#L29
[2] https://jira.hyperledger.org/browse/FAB-1349",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1349,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3040,,,,,,,,,"1|hzxosn:",,,,Unset,,Sprint 15 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 10:17 AM;kchristidis;https://gerrit.hyperledger.org/r/7519;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepend channel name to logging messages,FAB-2913,15489,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,29/Mar/17 10:21 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,30/Mar/17 2:58 AM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,kafka,,,,,,,"As some of our recent debugging sessions have shown, the channel name is a useful bit of info to have on almost every log message that the orderer writes. This changeset delivers that.

This changeset also:

1. Switches all the Panic calls to their logger-enabled equivalent, in accordance to what we're starting to do throughout the `orderer` directory.
2. Lowercases all returned error messages, following the guideline posted in [1].

[1] https://github.com/golang/go/wiki/CodeReviewComments#error-strings",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3040,,,,,,,,,"1|hzxosv:",,,,Unset,,Sprint 15 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 11:21 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7521/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SDK needs to support channel creation and modification,FAB-2914,15490,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,ptippett,ptippett,29/Mar/17 12:20 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,30/Apr/17 12:31 AM,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,"Currently the only way to create and modify channels is via protobufs.  This is complex and error prone.  The SDK needs to simplify this for users.

Suggested implementation is for the SDK to take a json object describing the channel to be created, list of members, etc and create the channel.

",,ChristopherFerris,ptippett,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-14,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx373:",,,,Unset,,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,ptippett,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 10:44 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8263/
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Set proper 'last cut block' number upon chain restart,FAB-2915,15491,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,kchristidis,kchristidis,kchristidis,29/Mar/17 2:15 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,30/Mar/17 2:58 AM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,kafka,,,,,,,"Both the ""last persisted offset"" and the ""last cut block"" fields need to be set to their proper values before a restarted chain can resume operation. We were taking of the former, but not the latter. This changeset fixes that.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,"1|hzxot3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 2:17 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7525/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor flogging package,FAB-2916,15492,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,29/Mar/17 2:26 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,01/Apr/17 5:10 AM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,fabric-peer,,,0,common-components,,,,,,,"There are several things on this package that could use improvement on this package.

Off the top of my head as I'm writing this, I am noting down the following:

# Asymmetry on the return types; some functions return the logging level as the string type, others as the `logging.Level` type.
# Functions whose purpose is unclear (`InitFromViper`), whose name is inaccurate (`SetLoggingFormat` does not just set the logging format), or whose logic is simply flawed (`InitFromViper` - pay attention to how the input argument is used).
# Outdated and —in some cases— nonsensical comments on the exported functions.

This is my attempt to tidy things up. I've also updated the code that used to reference the now-deprecated methods.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3040,,,,,,,,,"1|hzxotb:",,,,Unset,,Sprint 15 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 2:28 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7527/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use flogging-init'd logger during tests,FAB-2917,15493,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,29/Mar/17 2:38 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,01/Apr/17 5:10 AM,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,"This changeset allows the tests on the kafka package to log their output to a flogging-initialized logger.

Note that this was already the case for the non-test path.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxotj:",,,,Unset,,Sprint 15 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/17 2:39 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7529/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
node sdk tests are failing in Z (s390x) build machines,FAB-2921,15499,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,rameshthoomu,rameshthoomu,29/Mar/17 11:51 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Apr/17 12:17 AM,,,,,,,,,,,,0,,,,,,,,"Observed node sdk tests are failing in z (s390x) build machines. 
Also observed couchdb container is not starting
Below is the error log

{code:java}
test step# 442 Error initializing CouchDB KeyValueStore. Exiting

{code}
{code:java}
15:49:27 # Use FabricCAServices with a CouchDB KeyValueStore
15:49:27 # Cleanup of existing my_member_db returned false
15:49:27 # Initialize the CouchDB KeyValueStore
15:49:27 not ok 442 Error initializing CouchDB KeyValueStore. Exiting.
15:49:27   ---
15:49:27     operator: fail
15:49:27     at: process._tickDomainCallback (internal/process/next_tick.js:129:7)
15:49:27 error: [couchdb-fabricca]: Error: Error creating my_member_db database to store membership data: Error: connect ECONNREFUSED 127.0.0.1:5984
{code}

*Jenkins Build log:* https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node-merge-s390x/67/consoleFull
*Docker log file:* https://jenkins.hyperledger.org/view/fabric-sdk-node/job/fabric-sdk-node-merge-s390x/67/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/test/fixtures/dockerlogfile.log",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/17 12:17 AM;rameshthoomu;fix has been provided to pull hyperledger/fabric-couchdb images. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode names and version with periods fail query.,FAB-2922,15501,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,rickr,rickr,30/Mar/17 3:17 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,06/Apr/17 9:13 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,Install chaincode with a chaincode name or version with a period works ok and can be invoked but fails to be found with getinstalledchaincodes lcc query.,,rickr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxov3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rickr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/17 4:09 AM;wlahti;The fix has been merged into master. It more thoroughly validates the chaincode name for illegal characters and adds in validation of the version. It also ensures the query to get all installed chaincodes on a peer returns the expected results when a chaincode version contains a period. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
How To CallAChaincodeFromChaincode: Suggestions to improve Chaincode_Example05 for better understanding this,FAB-2924,15503,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,muralisr,Nishi,Nishi,30/Mar/17 3:33 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 5:29 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"While testing ""chaincode calling another chaincode"" feature I was using chaincode_example05 calling chaincode_example02.

Following are few improvements we can make to serve our community to use this sample better:
{panel}
1. To replace variable 'chaincodeURL' with 'chaincodeName'.
2. We can pass in channelName 
         a) as third argument to invoke - now args passed to chaincode are - 
              _emphasis_  [""invoke"",""mycc02"", ""sum"", ""myc1""] _emphasis_
         b) append channelName to as chaincodeName/ channelName in the first arg.  - 
              _emphasis_  [""invoke"",""mycc02/myc1"", ""sum""]  _emphasis_

    Both these options were tested using CLI and Bashscripting in e2e flow.

3. We decide which one of these we would like to use in chaincode_example05 and update chaincode_example05 with right comments and may be document alternative usage as w ell in comments.

4. To maintain consistent docs. Go do on chaincode.go sometimes gives a third argument for chanelName and some times it displays only two arguments to InvokeChaincode as follows.

{code}
func (stub *ChaincodeStub) InvokeChaincode(chaincodeName string, args [][]byte) ([]byte, error)
    InvokeChaincode locally calls the specified chaincode `Invoke` using the
    same transaction context; that is, chaincode calling chaincode doesn't
    create a new transaction message.
{code}
{panel}",,muralisr,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxovb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 4:36 PM;muralisr;[~2020Nishi] Didn't you end up fixing this yourself ? I believe there's a CR ? If so can you assign to yourself please ;;;","17/Apr/17 11:09 PM;Nishi;Can the related patchet https://gerrit.hyperledger.org/r/#/c/7595/ be merged?
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create package proto,FAB-2925,15504,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,30/Mar/17 3:48 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,08/Apr/17 12:22 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,Create package proto with comments,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxovj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Panic thrown if no GOPATH env on chaincode installer,FAB-2926,15505,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,wlahti,passkit,passkit,30/Mar/17 3:50 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/May/17 8:22 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"{code}
panic: runtime error: index out of range

goroutine 1 [running]:
github.com/hyperledger/fabric/core/chaincode/platforms/golang.(*Platform).ValidateSpec(0x12d06f8, 0xc4202edb00, 0x12d06f8, 0x0)
	/go/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang/platform.go:87 +0x34b
{code}

Line 87: {{gopath = filepath.SplitList(gopath)\[0\]}} assumes gopath string is not empty.

{code}
//Treat empty scheme as a local filesystem path
	if path.Scheme == """" {
		gopath := os.Getenv(""GOPATH"")
		// Only take the first element of GOPATH
		gopath = filepath.SplitList(gopath)[0]
		pathToCheck := filepath.Join(gopath, ""src"", spec.ChaincodeId.Path)
		exists, err := pathExists(pathToCheck)
		if err != nil {
			return fmt.Errorf(""Error validating chaincode path: %s"", err)
		}
		if !exists {
			return fmt.Errorf(""Path to chaincode does not exist: %s"", spec.ChaincodeId.Path)
		}
	}
{code}

Feels like this is hardcoded for convenience, but should provide a friendly warning if not GOPATH is not set. 

Command line prompts and other documentation should specify that the chaincode path (-p) parameter should be provided relative to the GOPATH ",,passkit,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxovr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,passkit,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/17 8:23 PM;wlahti;Completed via https://jira.hyperledger.org/browse/FAB-4146;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
replace ChaincodePackage based install with CDS based installed,FAB-2927,15506,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,30/Mar/17 3:52 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 11:51 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"This is a simple, no frills (no security) replacement of the current CDS based install with ChaincodePackage based install.


{code:java}
NOTE - Fabric will try ChaincodePackage first and then CDS based install while SDKs are adjusting to the implementation.
{code}
",,ChristopherFerris,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2958,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxovz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 11:05 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7843/ merged but needs defensive tests before this can be closed [~binhn];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add hash links to LCCC when instantiating chaincode,FAB-2928,15507,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,30/Mar/17 3:57 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 11:50 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,Add new fields to the LCCC to link the installed chaincode with the instantiated chaincode.,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4tj:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 1:11 AM;muralisr;[~ellaki] https://gerrit.hyperledger.org/r/#/c/7875 and https://gerrit.hyperledger.org/r/#/c/7879 add this support ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode Docker repository tags not sanitised,FAB-2929,15508,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,passkit,passkit,30/Mar/17 4:23 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/Apr/17 8:10 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Chaincode cannot be instantiated (invoked, or queried) if network ID, peer ID or chain code name invalidate Docker's tagging rules. 

{code}
2017-03-29 18:55:59.349 UTC [dockercontroller] Start -> ERRO ee8 start-could not recreate container API error (500): {""message"":""Error parsing reference: \""passkit-Peer/AWS/us-east-2b-pkcc-1\"" is not a valid repository/tag: repository name must be lowercase""}
2017-03-29 18:55:59.349 UTC [container] unlockContainer -> DEBU ee9 container lock deleted(passkit-Peer/AWS/us-east-2b-pkcc-1)
2017-03-29 18:55:59.349 UTC [chaincode] Launch -> ERRO eea launchAndWaitForRegister failed Error starting container: API error (500): {""message"":""Error parsing reference: \""passkit-Peer/AWS/us-east-2b-pkcc-1\"" is not a valid repository/tag: repository name must be lowercase""}
{code}

User supplied network, peer names and chaincode names should be sanitised according to Dockers naming rules {{^[a-z0-9]+(([._-][a-z0-9]+)+)?$}} (https://forums.docker.com/t/docker-registry-v2-spec-and-repository-naming-rule/5466) or could hashed into a UUID (though not sure how much this would hinder debugging cc containers).
",,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxow7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,passkit,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/17 6:53 PM;passkit;http://gerrit.hyperledger.org/r/7571;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LSCC deploy/upgrade proposal processing at endorser side,FAB-2931,15510,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mne,muralisr,muralisr,30/Mar/17 4:27 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 10:41 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"The TX for instantiate needs to be validated.

At the moment an instantiation TX looks like the following:

{noformat}
+--------------------------+
|instantiate transaction   |
|--------------------------|	
|- submitter signature     |
|- endorsements            |
|  - signed by P1...x      |
|  - instantiation arg     |
|  - RW set with           |
|    - cc name, version    |
|    - cc fingerprint (id) |
+--------------------------+
{noformat}

Checks that need to be done at endorsement time:
* The tx submitter needs to satisfy the CC instantiation policy stored in the SignedCDSPackage on disk
* In case of a CC upgrade, the tx submitter needs to satisfy the CC instantiation policy of the currently instantiated CC
* For this, the RW set of the tx needs to be enhanced with the instantiation policy (the corresponding chaincode package might no longer be on the disk of the endorsing peer).

Checks at commit time are part of FAB-3155",,Clayton Sims,elli-androulaki,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5dj:",,,,,,Sprint 16 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,elli-androulaki,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Apr/17 11:54 PM;mne;Endorsement-time checks implemented in:
https://gerrit.hyperledger.org/r/#/c/8141/;;;","20/Apr/17 10:23 AM;Clayton Sims;Did we agree to add this during scrum today?   What is ETA?  Can we defer if not contained in sprint 16?;;;","20/Apr/17 5:31 PM;elli-androulaki;Hi, Clayton,
This is part of the security work that is done for chaincode installation/instantiation and upgrade. It was likely listed among Sprint 16 of Murali. Now the CR is ready for review. Murali, Binh, and Yacov are already aware of this.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
launch container to verify installed chaincode against LCCC record,FAB-2932,15511,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,30/Mar/17 4:35 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 12:41 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,Make sure instantiated chaincode links correctly to installed chaincode before launching the chaincode. The instantiation record will be used for this purpose.,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxown:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 12:40 PM;muralisr;This was fixed in https://gerrit.hyperledger.org/r/#/c/7879/. Specifically, _TestTamperChaincode_ is a good trail to ccprovider.CCPackage.ValidateCC (via GetCDSFromLCCC in chaincode framework).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
implement any remaining security checks,FAB-2933,15512,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,muralisr,muralisr,muralisr,30/Mar/17 4:37 AM,30/Jul/19 11:59 AM,28/Oct/23 2:59 AM,30/Jul/19 11:59 AM,,,,,Future,,,fabric-peer,,,,0,,,,,,,,This is a catch all for implementing all the security related checks listed in fab-2859. Many of them will be automatically fullfilled as part of the regular proposal / vscc processing.,,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxowv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jul/19 11:59 AM;mastersingh24;No activity in a year or more;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update node sdk CI script to build couchdb images,FAB-2935,15514,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,30/Mar/17 6:06 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/Apr/17 11:48 PM,,,,,,,,,,,,0,,,,,,,,Recent changes in fabric-sdk-node docker-compose file is looking for `hyperledger/fabric-couchdb`. CI script has to change to `make docker` to build couchdb images.,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoxj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 11:48 PM;rameshthoomu;patch has been submitted and merged;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Vendor latest version of sarama library,FAB-2936,15515,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,30/Mar/17 7:41 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,01/Apr/17 5:10 AM,,,,,,,,fabric-orderer,,,,0,kafka,,,,,,,"This is the first in a series of changesets that will allow us to quickly query the state of the Kafka cluster. This is itself needed so that we can decide whether there's a point in repeating a certain request (e.g. for the creation of a channel/partition in Kafka) or not.

We're vendoring the latest version of the sarama library because it introduces the `Brokers()` method to the `Client` interface, and this allows us to easily get the list of active brokers.

This changeset also adds a relevant (and now req'd) config setting, see: https://github.com/Shopify/sarama/issues/816 for more.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoxr:",,,,Unset,,Sprint 15 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/17 7:44 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7561/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix minor issues in localconfig,FAB-2937,15516,,Story,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,kchristidis,kchristidis,kchristidis,30/Mar/17 8:04 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,24/Apr/17 3:49 AM,,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,"1. Remove unnecessary struct
2. Bring it inline with const/init declarations I did in `common/configtx/tool/localconfig`

(By the way, the periods in the exported comments is not OCD but actually a guideline: https://github.com/golang/go/wiki/CodeReviewComments#comment-sentences)",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4hb:",,,,Unset,,Sprint 15 - Consensus,Sprint 16 - Consensus,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/17 8:06 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/7563/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enabling TLS causes problems for peer who isn't a gossip leader,FAB-2942,15521,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,davidkel,davidkel,30/Mar/17 8:03 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/May/17 6:46 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,v1.0,,,,,,,"I've been happily working with 2 peers in my channel (for Fabric Composer) when TLS has not been enabled. Both peers responding to proposals and doing commits as required. However as soon as I enable TLS support across the peers and orderer. The peer that isn't the gossip leader stops interacting and I am unable to continue working with a 2 peer system. I have got around this for now by setting the failing peer to also be a gossip leader.
This problem shows up when I try to instantiate chaincode on both peers.
My Docker yaml file is based on the node sdk e2e tests (which I note only uses a single peer from each 2 peer organisation to instantiate chaincode) and is as follows: 
```
version: '2'

services:
  ca0:
    image: hyperledger/fabric-ca:x86_64-1.0.0-alpha
    environment:
      - FABRIC_CA_HOME=/etc/hyperledger/fabric-ca-server
    ports:
      - ""7054:7054""
    command: sh -c 'fabric-ca-server start --ca.certfile /etc/hyperledger/fabric-ca-server-config/peerOrg1-cert.pem --ca.keyfile /etc/hyperledger/fabric-ca-server-config/d8a5b3cac1b821f6e4b487ceaf1fd239cdcfc310894150908b90f05e9179556a_sk -b admin:adminpw' -d
    volumes:
      - ./crypto-config/peerOrganizations/peerOrg1/ca/:/etc/hyperledger/fabric-ca-server-config
      - ./tls/ca:/etc/hyperledger/fabric-ca-server
    container_name: ca_peerOrg1

  orderer0:
    container_name: orderer0
    image: hyperledger/fabric-orderer:x86_64-1.0.0-alpha
    environment:
#      - GRPC_TRACE=all
#      - GRPC_VERBOSITY=debug
#      - ORDERER_GENERAL_LOGLEVEL=debug
      - ORDERER_GENERAL_LISTENADDRESS=0.0.0.0
      - ORDERER_GENERAL_GENESISMETHOD=file
      - ORDERER_GENERAL_GENESISFILE=/etc/hyperledger/configtx/twoorgs.orderer.block
      - ORDERER_GENERAL_LOCALMSPID=OrdererMSP
      - ORDERER_GENERAL_LOCALMSPDIR=/etc/hyperledger/msp/orderer
      - ORDERER_GENERAL_TLS_ENABLED=true
      - ORDERER_GENERAL_TLS_PRIVATEKEY=/etc/hyperledger/tls/orderer/key.pem
      - ORDERER_GENERAL_TLS_CERTIFICATE=/etc/hyperledger/tls/orderer/cert.pem
      - ORDERER_GENERAL_TLS_ROOTCAS=[/etc/hyperledger/tls/orderer/ca-cert.pem, /etc/hyperledger/tls/peers/peer0/ca-cert.pem, /etc/hyperledger/tls/peers/peer1/ca-cert.pem]
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/orderer
    command: orderer
    ports:
      - 7050:7050
    volumes:
        - ./:/etc/hyperledger/configtx
        - ./crypto-config/ordererOrganizations/ordererOrg1/orderers/ordererOrg1orderer1/:/etc/hyperledger/msp/orderer
        - ./tls/orderer:/etc/hyperledger/tls/orderer
        - ./tls/peers:/etc/hyperledger/tls/peers

  peer0:
    container_name: peer0
    image: hyperledger/fabric-peer:x86_64-1.0.0-alpha
    environment:
      - CORE_CHAINCODE_EXECUTETIMEOUT=90000
#      - CORE_CHAINCODE_LOGLEVEL=DEBUG
#      - CORE_LOGGING_LEVEL=DEBUG
      - CORE_NEXT=true
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ID=peer0
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_LOCALMSPID=Org1MSP
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/peer/
      - CORE_PEER_GOSSIP_ORGLEADER=true
      - CORE_PEER_ADDRESS=peer0:7051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0:7051
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/tls/key.pem
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/tls/cert.pem
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/tls/ca-cert.pem
      # the following setting starts chaincode containers on the same
      # bridge network as the peers
      # https://docs.docker.com/compose/networking/
      - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=systestv1_default
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric
    command: peer node start --peer-defaultchain=false
    ports:
      - 7051:7051
      - 7053:7053
    volumes:
        - /var/run/:/host/var/run/
        - ./crypto-config/peerOrganizations/peerOrg1/peers/peerOrg1Peer1/:/etc/hyperledger/msp/peer
        - ./tls/peers/peer0:/etc/hyperledger/tls
    depends_on:
      - orderer0

  peer1:
    container_name: peer1
    image: hyperledger/fabric-peer:x86_64-1.0.0-alpha
    environment:
      - CORE_CHAINCODE_EXECUTETIMEOUT=90000
#      - CORE_CHAINCODE_LOGLEVEL=DEBUG
#      - CORE_LOGGING_LEVEL=DEBUG
      - CORE_NEXT=true
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_PEER_ID=peer1
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_LOCALMSPID=Org1MSP
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/peer/
      - CORE_PEER_GOSSIP_ORGLEADER=true
      - CORE_PEER_ADDRESS=peer1:7051
      - CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1:7051
      - CORE_PEER_TLS_ENABLED=true
      - CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/tls/key.pem
      - CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/tls/cert.pem
      - CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/tls/ca-cert.pem
      # the following setting starts chaincode containers on the same
      # bridge network as the peers
      # https://docs.docker.com/compose/networking/
      - CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=systestv1_default
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric
    command: peer node start --peer-defaultchain=false
    ports:
      - 7056:7051
      - 7058:7053
    volumes:
        - /var/run/:/host/var/run/
        - ./crypto-config/peerOrganizations/peerOrg1/peers/peerOrg1Peer2/:/etc/hyperledger/msp/peer
        - ./tls/peers/peer1:/etc/hyperledger/tls
    depends_on:
      - orderer0
      - peer0
``
I of course could have setup TLS incorrectly. I have used the certificates made available in the node sdk e2e tests so these could be incorrect so any advice on what to look for there would be great.",,bmkor,davidkel,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxoyn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmkor,davidkel,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/17 8:46 PM;mastersingh24;[~davidkel] - my best guess is that the CN in the TLS certificate(s) you are using for the peers don't match the hostname(s) of the peers  (which would be peer0 and peer1).

Can you check to see what the CN is in the CORE_PEER_TLS_CERT_FILE for each of your peers? ;;;","02/Apr/17 10:28 PM;mastersingh24;[~davidkel] - My best guess is that the CN's in the CORE_PEER_TLS_CERT_FILE used for each peer do not contain the correct hostname's (peer0 and peer1).  Can you check the cert for each peer?;;;","05/Apr/17 5:29 PM;davidkel;Many thanks for the reply. I will check when I am back in the office to confirm. If that is the case is there a way to override the host name for testing purposes ? if not then I will look at creating my own certificates with the correct CN.
;;;","11/Apr/17 9:32 PM;davidkel;I've checked the CN for the CORE_PEER_TLS_CERT_FILE for each of the peers and they are different. The first has a CN of peer0 and the second has a CN of peer1. I noticed that the hostnames for the peer docker containers were random so I tried again by setting their hostnames respectively to peer0 and peer1 but the problem still occurs.
I see the following in the peer logs
{code}
2017-04-11 12:06:59.578 UTC [qscc] Init -> INFO 032 Init QSCC
2017-04-11 12:06:59.578 UTC [sysccapi] deploySysCC -> INFO 033 system chaincode qscc/mychannel(github.com/hyperledger/fabric/core/chaincode/qscc) deployed
2017-04-11 12:06:59.588 UTC [gossip/comm#-1] authenticateRemotePeer -> WARN 034 Remote peer 172.19.0.4:7051 didn't send TLS certificate
2017-04-11 12:06:59.588 UTC [gossip/gossip#peer1:7051] func1 -> WARN 035 Deep probe of peer0:7051 failed: Remote peer 172.19.0.4:7051 didn't send TLS certificate
2017-04-11 12:06:59.592 UTC [gossip/comm#-1] authenticateRemotePeer -> WARN 036 Remote peer 172.19.0.4:7051 didn't send TLS certificate
2017-04-11 12:06:59.592 UTC [gossip/comm#-1] sendToEndpoint -> WARN 037 Failed obtaining connection for peer0:7051, PKIid:[] reason: Remote peer 172.19.0.4:7051 didn't send TLS certificate
2017-04-11 12:21:31.281 UTC [chaincode] Launch -> ERRO 038 launchAndWaitForRegister failed Timeout expired while starting chaincode digitalproperty-network:0.5.10(networkid:dev,peerid:peer1,tx:546df531c6bab54bfbf26ffdbca9eb83a3edd9c208245c7fea9b42ebd40d216d)
2017-04-11 12:21:31.344 UTC [eventhub_producer] Chat -> ERRO 039 Error during Chat, stopping handler: stream error: code = 1 desc = ""context canceled""
{code}
setting GOSSIP_ORGLEADER=true on both peers solves the problem;;;","01/May/17 2:32 AM;mastersingh24;[~davidkel] - Is this still an issue?  I've been using the examples/e2e_cli setup which uses TLS by default and don't seem to have this problem;;;","01/May/17 2:33 AM;mastersingh24;I don't see this error so perhaps it was a point in time thing;;;","15/May/17 6:46 PM;mastersingh24;This was resolved with FAB-3105;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Committer implementation reports an error on failure of publishing a block committing event.,FAB-2943,15522,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,30/Mar/17 8:50 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/Apr/17 5:27 AM,,,,,v1.0.0,,,fabric-peer,,,,0,beta,ga,,,,,,"Scenario: if from some reason, an events consumer is connected to the peer and subscribes to block events, and from some reason- the publishing to that consumer by the peer fails, the peer logs the following output:

2017-03-30 07:26:43.881 EDT [committer] Commit -> ERRO d10dc Error sending block event could not send the blocking event
2017-03-30 07:26:43.881 EDT [gossip/state] commitBlock -> ERRO d10dd Got error while committing(Error sending block event could not send the blocking event)

The code of the committer that is relevant to the section is below:
{code}
func (lc *LedgerCommitter) Commit(block *common.Block) error {
	// Validate and mark invalid transactions
	logger.Debug(""Validating block"")
	if err := lc.validator.Validate(block); err != nil {
		return err
	}

	if err := lc.ledger.Commit(block); err != nil {
		return err
	}

	// send block event *after* the block has been committed
	if err := producer.SendProducerBlockEvent(block); err != nil {
		logger.Errorf(""Error sending block event %s"", err)
		return fmt.Errorf(""Error sending block event %s"", err)
	}

	return nil
}
{code}

When this function fails due to inability of publishing a block event, an error is returned to the gossip state transfer layer, and the ledger height gossiped to peers isn't updated.
In my opinion, the committer Commit function shouldn't return an error if it can't publish a block event to a connected events client. 

[~muralisr]
[~binhn]
[~C0rWin]
[~mastersingh24]",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzx7gv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix leader election test intermittent CI failures.,FAB-2944,15523,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,yacovm,yacovm,31/Mar/17 1:14 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Apr/17 4:00 AM,,,,,,,,,,,,0,,,,,,,,"Since call of leader election change status has been changed there are few intermittent failures in CI, in order to prevent future failures need to switch back to synchronous call. Later logic should be revisited and refactored to allow async mode of operation.

[~gennadyl] [~C0rWin]",,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxoyv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/17 3:50 AM;C0rWin;Meanwhile I've pushed a CR which simply makes callback calls synchronous, to stop CI from failing due to the test. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Go 1.8 Support in Fabric CA,FAB-2945,15524,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jtclark,JonathanLevi,JonathanLevi,31/Mar/17 2:40 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,27/Sep/17 8:02 PM,v1.0.2,,,,v1.1.1,,,fabric-build,,,,1,,,,,,,,,,bsmita,harrijk,harsha544,jasondotstar,JonathanLevi,jtclark,rameshthoomu,smithbk,SriramaSharma,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-129,,,FAB-2946,FAB-2327,,,,,"13/Jun/17 8:11 AM;harrijk;fabric-go1.8-changes.txt;https://jira.hyperledger.org/secure/attachment/11026/fabric-go1.8-changes.txt",,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpgn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bsmita,harrijk,harsha544,jasondotstar,JonathanLevi,jtclark,rameshthoomu,smithbk,SriramaSharma,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/17 9:22 AM;smithbk;Ramesh, I'm assigning to you as I assume this just involves upgrading CI, or the base image used by CI.
I've been running with go 1.8 on my laptop and haven't seen any issues.;;;","31/May/17 12:25 AM;jasondotstar;[~smithbk], I'm going to take over this ticket from [~rameshthoomu].  I'll update the ticket with the latest.;;;","13/Jun/17 6:58 AM;jasondotstar;h2. Status Update

[~rameshthoomu] asked me to have a chat with [~greg.haskins] regarding the steps needed to update the base images used by the CI.  After a brief discussion w/ Greg, he pointed me to the fabric-baseimage repo, where our base images are built.

Next step is to rebuild the baseimage locally, then update fabric to reference the new version.;;;","13/Jun/17 7:08 AM;JonathanLevi;So, as the one who opened the issue initially, for discussion/consideration, here are my 2 cents:

1. I don't agree with the above claim from [~smithbk] that the Golang 1.8 update does +{color:#d04437}not{color}+ introduce any breaking issues. Golang 1.8. In fact there were a few severe security issues that made the Golang team release a set of fixes (including Elliptic curve issues and another set of problems relating to crypto). Not clear how this was tested, especially back in April, when we had a lot less tests for the CA, maybe?

2. At this point in time (API freeze, post 1.0.0-beta release) and a few days before 1.0.0-rc1 is out... can somebody suggest/highlight/summarize what are the upsides of upgrading to Golang 1.8?;;;","13/Jun/17 8:08 AM;jasondotstar;[~JonathanLevi] Agreed. In preparing for this work, I've spoken with [~greg.haskins] and [~harrijk] who both expressed concerns about 1.8.  Although I'm able to build the docker image locally, this does not confirm whether or not the unit tests will work as a result.  [~harrijk] is planning to update this ticket to enumerate the unit test issues, advising us that ""the unit tests will have to be rewritten to accommodate the compiler version diffs."";;;","13/Jun/17 8:18 AM;harrijk;Some months back, I went through the exercise of generating a set of fabric and fabric-ca docker images built off of an altered fabric-baseimage that included the use of Golang 1.8.  The result of which was a set of Docker images containing binaries that were compiled with Golang 1.8.

I then ran the fabric and fabric-ca unit tests.  The fabric-ca unit tests did run clean, however, there were a few fabric unit tests that failed due to changes in the Golang 1.8 compiler.  The failed tests would have to be rewritten to take into account some of the version differences.  For example, some error messages that were being used for assert checks have changed and this results in assertion errors.

I have attached my notes for this exercise. See above for fabric-go1,8-changes.txt.

Since there have been significant changes in the fabric and fabric-ca code bases, it would be prudent to go through a similar exercise to understand the unit test implications.  I would also encourage a complete suite of end-to-end tests.

 ;;;","13/Jun/17 8:52 AM;JonathanLevi;Thank you [~harrijk] & [~jasondotstar] Yes, we have also tried building the master branch of fabric using a few of the Golang 1.8.x releases at HACERA... wasn't that straight forward. We switched back to work against the master branch and the tagged release, FWIW.;;;","11/Jul/17 1:26 AM;jtclark;[~harrijk], [~JonathanLevi], [~greg.haskins] - After speaking with [~rameshthoomu], it sounds as if we can update the image for the fabric-ca project, if the unit tests for fabric-ca ran clean, since both project have separate images.  Any objections to this? If not, at least we can get 1.8 support in the fabric-ca project.;;;","11/Jul/17 1:29 AM;JonathanLevi;Hi Jason and everybody,
 # For Hyperleger Fabric 1.0.0 ? (We are in a ""code-freeze"" mode)
 # What is the upside of upgrading to Golang 1.8 support of fabric-ca at this point?
(or put differently, why do we/people need this now?)

Thanks, J;;;","10/Oct/17 5:58 AM;rameshthoomu;Recently we have updated go version to go1.9 on x86_64 and z CI build nodes. Also, fabric-ca tests are now running on 0.4.2 base image which has go version 1.9.

We also have go1.7.5 to support release branch tests.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Go 1.8 Support in Fabric,FAB-2946,15525,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,JonathanLevi,JonathanLevi,31/Mar/17 2:42 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,07/Sep/17 10:54 AM,v1.0.2,,,,WON'T FIX,,,fabric-build,,,,1,build-system,Security,,,,,,,,harsha544,JonathanLevi,kchristidis,SriramaSharma,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5461,,,,,FAB-2945,,,FAB-2327,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxoz3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,harsha544,JonathanLevi,kchristidis,SriramaSharma,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jun/17 10:10 PM;troyronda;[~JonathanLevi] - any updates on this one?;;;","13/Jun/17 8:15 AM;JonathanLevi;Hi [~troyronda], (hope you had a good weekend, etc., etc.). Not a lot to update actually, have just posted a related not on FAB-2945 - I don't think that upgrading to Golang 1.8 is a ""NOOP"", we will need to re-test a lot of things.

IMHO, I'd rather push for fixing the known issues we have now, and work ""full steam"" to release the *1.0.0-rc1* in a few days, instead of spending cycles on this update. While I opened this in March, I have just marked it as *v1.1.*
That said, I/we can be convinced otherwise (and bring it up for discussion/vote etc.): Any upside(s) in upgrading to Golang 1.8 (*1.8.3* if any, btw) at this point?;;;","07/Sep/17 10:54 AM;kchristidis;No longer relevant because of FAB-5461.;;;","07/Sep/17 10:56 AM;JonathanLevi;Yup. Thank you [~kchristidis];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Performance of Hyperledger Fabric on z Systems Linux,FAB-2947,15526,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrijk,JonathanLevi,JonathanLevi,31/Mar/17 3:00 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,06/Jul/18 10:53 PM,,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,"Test the performance of the ""z Systems"" when working ""natively"" (maybe even outside docker?)  for performance comparisons.",,harrijk,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxozb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,harrijk,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/May/17 1:41 PM;harrijk;Now that fabric-baseimage v0.3.1 is being utilized during Jenkins CI fabric builds, the elapsed time of the builds has been reduced to ~40 minutes from ~50 minutes.  This is due to the optimized ECC that are included in the Golang 1.7.5 compiler contained within the fabric-baseimage v0.3.1.

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disaster recovery support,FAB-2949,15529,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,grapebaba,grapebaba,31/Mar/17 3:34 PM,23/Jan/20 4:00 AM,28/Oct/23 2:59 AM,23/Jan/20 4:00 AM,,,,,Future,,,fabric-ledger,fabric-peer,,,0,stale-item,,,,,,,"I am not sure if currently we already support disaster recovery. However I already found several tickets such as FAB-1371. I also wonder if it is worthy of doing this, though it can be done by some outside tool. However i feel it is better to have it if we want to create automatic operation program.

Refer to
https://github.com/coreos/etcd/blob/master/Documentation/op-guide/recovery.md

[~manish-sethi][~denyeart][~yacovm][~jyellick][~kchristidis]

",,grapebaba,sykesm,yacovm,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxozr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,grapebaba,sykesm,yacovm,YingShi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Mar/17 5:02 PM;yacovm;That FAB-1371 has nothing to do with disaster recovery. 
*Gossip pull snapshot consolidation* talks about a mechanism in gossip that pulls entities from peers by asking for a snapshot of all entities of a type that a peer has.
I guess snapshot is the word that mislead you here.

Now, Hyperledger Fabric has a 3-tier architecture. 
Before we talk about disaster recovery, I think it's worth to talk a bit about HA, because the 2 are related, and for that- I guess it would be useful to outline the communication patterns in the fabric architecture:
* SDK (apps) to users: I'd say this is completely up to the customer to implement
* SDK (apps) to  peers: Here I think we have lots of work that can be done, as currently- the client SDK has no ability to dynamically obtain a list of peers to use as endorsers. There have been some discussion on rocket.chat and it was proposed to either leverage DNS, or to interface with a service discovery service, if such exists in the organization.
* Peers to Peers: Peers communicate with each other via gossip, and as long as the anchor peers of the channel are reachable - any peer can find other peers. However, if all anchor peers become unreachable- then new peers can't  find the existing peers of the channel. It is required that peers find each other in order to disseminate blocks from the ordering service to peers. If peers are configured to use leader election- then 1 peer from the organization, for each channel (can be the same peer for all channels) is elected by the peers to connect on their behalf to the ordering service, and to pull blocks from it. If that peer becomes unreachable, the peers identify that, and start electing a new leader.
* Peer to  Ordering service: The configuration blocks come with a set of endpoints of ordering service nodes. We (Haifa team) are working on a set of change sets, that enable the peer to re-connect to different ordering service nodes out of the set defined in the configuration block, should the current ordering service node become unreachable.
* ordering service nodes to  ordering service nodes: This is relevant only for sBFT ([~kchristidis] correct me if I'm wrong)
* ordering service nodes to kafka: I guess [~kchristidis] can elaborate on the HA aspects here but from what I know there is master-slave replication within the kafka servers of the same channel.
* Peer/Orderer to DB : I guess Dave/Manish can shed some light on the DRP plans here, and I guess that's practically the main work in DRP (the things outlined above are basically HA) since as ordering nodes and peers fail, someone needs to bring them up. I'd say that if peers fail and new peers are brought up instead of them - as long as we don't have pruning for raw ledger blocks - these peers would be able to catch up with other peers even if they are brought to life from scratch. However- if we start pruning raw ledger, this is where manual/special intervention would be needed and it is related to DR.;;;","31/Mar/17 5:19 PM;grapebaba;Thanks for detail explains. Previous I only considered peer ledger related recover. I wonder if we could send a snapshot to remote persistent storage periodically like etcd so that we can remain ledger and recovery peers cluster in case all previous peers crash and cannot bring up again. ;;;","31/Mar/17 5:49 PM;yacovm;I don't think that sending a snapshot periodically scales very well. Also- you don't need to replicate the state. Just the ledger, as you can simply re-run the ledger's transactions from the genesis block to reach the final state the peer needs to be.
CouchDB is a network servicing DB, right? I guess that it's possible to setup a couchDB cluster, or if the organization has money- on a volume that resides on a SAN so that it's possible to bring up a peer with the old data in case of a peer crash.;;;","02/Apr/17 4:01 AM;kchristidis;??ordering service nodes to ordering service nodes: This is relevant only for sBFT (Kostas Christidis correct me if I'm wrong)??

Correct.

??ordering service nodes to kafka: I guess Kostas Christidis can elaborate on the HA aspects here but from what I know there is master-slave replication within the kafka servers of the same channel.??

Correct. We are leveraging Kafka's replication factor [*] for a topic to replicate all the messages that a Kafka broker orders for a particular channel. (* Technically it's a combination of the ""replication factor"", ""minimum in-sync replicas"", and ""ACKS a producer is expecting"" settings.)
;;;","06/Apr/17 12:46 PM;grapebaba;[~yacovm]
SDK (apps) to peers: Here I think we have lots of work that can be done, as currently- the client SDK has no ability to dynamically obtain a list of peers to use as endorsers. There have been some discussion on rocket.chat and it was proposed to either leverage DNS, or to interface with a service discovery service, if such exists in the organization.
Is there a JIRA ticket for this feature?;;;","23/Jan/20 4:00 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
It must be an absolute path in gotools/Makefile ,FAB-2950,15530,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hanwei,hanwei,hanwei,31/Mar/17 5:14 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 10:00 AM,,,,,v1.0.0,,,fabric-build,,,,0,v1.0,,,,,,,"root@ceph:/opt/go/src/github.com/hyperledger/fabric# make gotools
mkdir -p build/bin
cd gotools && make install BINDIR=/opt/go//bin
make[1]: Entering directory '/opt/go/src/github.com/hyperledger/fabric.git/gotools'
make[2]: Entering directory '/opt/go/src/github.com/hyperledger/fabric.git/gotools'
Building github.com/golang/lint/golint -> golint
cannot install, GOBIN must be an absolute path
Makefile:47: recipe for target 'gotool.golint' failed
make[2]: *** [gotool.golint] Error 1
",,hanwei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxozz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,hanwei,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/17 4:31 PM;hanwei;https://gerrit.hyperledger.org/r/#/c/7607/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Instantiate Chaincode Fails (GRPC: Timed OUT),FAB-2951,15531,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,vanderheijden86,vanderheijden86,31/Mar/17 6:05 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/May/17 2:09 AM,,,,,v1.0.0,,,fabric-peer,,,,0,deploy,,,,,,,"Instantiating chaincode locally on a peer does not work and gives a grpc:timed out error. 
The host is listening on the correct ports, I checked this in netstat. 

This is the message in the docker container:

CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES
ea99f0649b34        dev-jdoe-mycc-1     ""chaincode -peer.a...""   9 seconds ago       Exited (0) 4 seconds ago                       dev-jdoe-mycc-1
[~/.go/src/github.com/hyperledger/fabric (master *)] $ docker logs dev-jdoe-mycc-1
2017/03/31 08:56:20 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7051"" <nil>}
2017/03/31 08:56:22 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7051"" <nil>}
2017/03/31 08:56:22 grpc: addrConn.resetTransport failed to create client transport: connection error: desc = ""transport: dial tcp 0.0.0.0:7051: getsockopt: connection refused""; Reconnecting to {""0.0.0.0:7051"" <nil>}
2017-03-31 08:56:22.485 UTC [shim] Start -> ERRO 001 Error trying to connect to local peer: grpc: timed out when dialing
[~/.go/src/github.com/hyperledger/fabric (master *)] $

More people experience this bug: https://chat.hyperledger.org/channel/fabric?msg=zJb8ahpo9Kud3fM9L
","- Mac OS X Sierra 10.12.1 (16B2657)
- Issue replicated on Ubuntu 16.04",binhn,muralisr,vanderheijden86,xixuejia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp07:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,muralisr,vanderheijden86,xixuejia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 3:14 PM;muralisr;[~vanderheijden86] peer in docker container is not accessible (at least by default) over 0.0.0.0:7051.  Most connectivity issues have been environment/user errors and not a bug. Can we pick this up again in Rocket chat if you still have this problem ? ;;;","09/May/17 2:09 AM;binhn;Closed due to lack of response;;;","24/May/17 6:30 PM;xixuejia;I met the same issue. I found there were docker images with name like 'dev-peer0.org1.example.com-mycc-1.0:latest' before I start the e2e test. Remove all these kinds of chaincode images and then rerun e2e test will work.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CONFIGTX_ORDERER_KAFKA_BROKERS can't override the value in configtx.yaml,FAB-2952,15532,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,daijianw,daijianw,31/Mar/17 6:43 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,11/May/17 3:22 AM,v1.0.0-alpha1,,,,WON'T FIX,,,fabric-orderer,,,,0,kafka,,,,,,,"Follow the https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst to setup up network. When setting orderer type to kafka,  the orderer can't connect to kafka cluster. 

The error output from ""docker logs orderer0"":
2017-03-29 13:08:50.312 UTC [orderer/kafka] newProducer -> DEBU 13b Connecting to Kafka cluster: [127.0.0.1:9092]
panic: Failed to create Kafka producer: kafka: client has run out of available brokers to talk to (Is your cluster reachable?)

In docker-compose.yaml,  orderer section, already set environment 
- CONFIGTX_ORDERER_KAFKA_BROKERS=[kafka1:9092]

The fabric version is 1.0.0-alpha.

",,daijianw,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Mar/17 6:44 PM;daijianw;configtx.yaml;https://jira.hyperledger.org/secure/attachment/10637/configtx.yaml","31/Mar/17 6:44 PM;daijianw;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10636/docker-compose.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxms7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,daijianw,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/17 3:21 AM;kchristidis;Jian, thank you for reporting this and submitting all the relevant details. This doesn't happen often ;)

So, the error you're seeing is expected, but I can see why it threw you off.

Let me give the step-by-step of what we're trying to achieve:
 # We want to run the E2E test with the Kafka-based ordering service
 # So, we need to create a genesis block for the ordering service that sets the ordering type to ""kafka"", and encodes the right addresses for the Kafka brokers.
 # The E2E script runs (via the generateArtifacts shell script) configtxgen with the TwoOrgsOrdererGenesis profile
 # Then brings up the network defined the Docker Compose YAML file

Setting the CONFIGTX_* env var on the orderer container (as you did) modifies the ""configtx.yaml"" that the orderer container sees, but the thing is that the orderer does not even care about this configuration at this point. The orderer reads the configuration from the genesis block that was created in step 3.

Setting any CONFIGTX_ env var makes sense only if the genesis method for the orderer is set to provisional, i.e. the genesis block is generated dynamically when the orderer launches. This is not the case here, since we are generating the genesis block in advance.

So, the TL;DR version:

This ENV var does override the value in configtx.yaml, but you are overriding a file that the orderer does not look into.

In order to achieve what you want, you'd modify the genesis block that configtxgen generates, in a manner similar to this one (just an example): https://github.com/kchristidis/fabric/commit/7f83f40fdd8c5cd0a837a820f728f3b864e1cce2;;;","11/May/17 3:22 AM;kchristidis;I am going to mark this as DONE. If there are follow-up questions, please let me know.;;;","11/May/17 11:11 AM;daijianw;Hi Kostas,

Thanks for clarifying the usage. I'm OK to close this issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update yaml.v2 to the latest version that uses Apache 2.0 license,FAB-2954,15534,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,aleksandar.likic,aleksandar.likic,01/Apr/17 12:13 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,09/Nov/17 4:15 AM,,,,,,,,,,,,0,,,,,,,,,,aleksandar.likic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxp0n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,aleksandar.likic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI chaincode invoke and query should return error if chaincode version is passed,FAB-2957,15537,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,lehors,suryalnvs,suryalnvs,01/Apr/17 3:44 AM,10/Jan/19 1:05 AM,28/Oct/23 2:59 AM,10/Jan/19 1:05 AM,v1.0.0,,,,Future,,,fabric-peer,,,,0,help-wanted,quality,,,,,,"After upgrading to newer version, unable to query the older version of chaincode,  using -v option in ""peer chaincode query -v <version>""

Tested on Mar 31 2017 using:
commit 430c64d56eddd6365371a83e3b4ac074dbe3671d
Date:   Fri Mar 31 14:36:49 2017 +0000

1. Launched the orderer using the orderer binary
    orderer
2. Launched the peer using the peer binary
    peer node start -o 127.0.0.1:7050
3. Installed the chaincode_example02 
    peer chaincode install -o 127.0.0.1:7050 -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
4. Instantiated the chaincode
    peer chaincode instantiate -o 127.0.0.1:7050 -n mycc -v 1.0 -c '{""Args"":[""init"",""a"", ""100"", ""b"",""200""]}'
5. Queried the chaincode and obtained the value of a
    peer chaincode query -o 127.0.0.1:7050 -n mycc -c '{""Args"":[""query"",""a""]}'
6. Installed the chaincode_example02 for version 2.0 
    peer chaincode install -o 127.0.0.1:7050 -n mycc -v 2.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02
7. Upgraded the chaincode from version 1.0 to version 2.0
    peer chaincode upgrade -o 127.0.0.1:7050 -n mycc -v 2.0 -c '{""Args"":[""init"",""c"", ""10"", ""d"",""20""]}'
8. Queried the chaincode version 2.0 for c value
    peer chaincode query -o 127.0.0.1:7050 -n mycc -v 2.0 -c '{""Args"":[""query"",""c""]}' and successfully queried ""c"" value
9. Now I wanted to query the value of a on version 1.0
    peer chaincode query -o 127.0.0.1:7050 -n mycc -v 1.0 -c '{""Args"":[""query"",""a""]}' and successfully queried ""a"" value, the query happened on chaincode version 2.0, but not the version I mentioned, version 1.0 in the command. 
EXPECTED RESULT: ""Peer chaincode query -v 1.0"" is expected to query the chaincode version 1.0 in the appropriate container, even after the upgrade to version 2.0. However, it appears the version number option is ignored, and the latest version chaincode container handles the request.
10. Observed the logs of chaincode containers for both the versions 1.0 and 2.0, the query on step 9 is observed in verison 2.0 chaincode container logs, but not in the version 1.0 chaincode container logs.

","Lenovo laptop running Linux, vagrant",bmos299,lehors,muralisr,sandp125,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Apr/17 3:44 AM;suryalnvs;upgrade.txt;https://jira.hyperledger.org/secure/attachment/10638/upgrade.txt",,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxp27:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,lehors,muralisr,sandp125,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 5:35 AM;muralisr;[~suryalnvs] Invoke and Query methods in CLI do not require version. The version is always the current version (and the ""-v"" flag is ignored).

So the following should work

{code:java}
peer chaincode query -n myc -c '{""Args"":[""query"",""a""]}' 
{code}


If you are OK with this, I'd like to use this defect to fix the query and invoke commands so they'll error out if a version is provided. Also given this is essentially working correctly, can you lower the defect priority please ?;;;","13/Apr/17 3:52 PM;muralisr;[~suryalnvs] Thanks for lowering this. ;;;","20/Apr/17 9:22 AM;muralisr;Adding ""help wanted"" to fix this in 1.0 so that CLI's query and invoke commands will error out if a version is provided. ;;;","20/Apr/17 10:40 PM;bmos299;Murali, here are a few questions.

1.  by error out is this a short-term fix for the issue?
2.  should the cli be able to query/invoke any version of the cc at anytime?  if the version has never been installed then error out?

Thanks,
Barry;;;","02/Jun/17 3:01 AM;muralisr;This is not a bug. As mentioned in a previous comment, this is utmost a fix to CLI to return error if version is provided for query and invoke commands. Will have hits to docs and scripts. Going to move to Improvement/future;;;","10/Jan/19 12:58 AM;lehors;This ticket should be closed because the peer command no longer accepts -v on a query command:

 
{code:java}
# peer chaincode query -C mychannel -n mycc -v 1.0 -c '{""Args"":[""query"",""a""]}'
Error: unknown shorthand flag: 'v' in -v
Usage:
 peer chaincode query [flags]
Flags:
 -C, --channelID string The channel on which this command should be executed
 --connectionProfile string Connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information
 -c, --ctor string Constructor message for the chaincode in JSON format (default ""{}"")
 -h, --help help for query
 -x, --hex If true, output the query value byte array in hexadecimal. Incompatible with --raw
 -n, --name string Name of the chaincode
 --peerAddresses stringArray The addresses of the peers to connect to
 -r, --raw If true, output the query value as raw bytes, otherwise format as a printable string
 --tlsRootCertFiles stringArray If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the --peerAddresses flag
Global Flags:
 --cafile string Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
 --certfile string Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint
 --clientauth Use mutual TLS when communicating with the orderer endpoint
 --connTimeout duration Timeout for client to connect (default 3s)
 --keyfile string Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint
 --logging-level string Default logging level and overrides, see core.yaml for full syntax
 -o, --orderer string Ordering service endpoint
 --ordererTLSHostnameOverride string The hostname override to use when validating the TLS connection to the orderer.
 --tls Use TLS when communicating with the orderer endpoint
 --transient string Transient map of arguments in JSON encoding
{code}
 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
generate signed chaincode deployment spec,FAB-2958,15538,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,01/Apr/17 5:16 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,08/Apr/17 12:22 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Before we can use it we need the means to create the signed chaincode deployment spec package. This means two things
* create the package - enhance the ""peer chaincode package"" command
* have owners sign it - add a new ""peer chaincode sign "" command

",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2927,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp2f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create couchdb batch update operations for optimization,FAB-2959,15539,15293,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,02/Apr/17 6:04 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Apr/17 10:24 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Create batch update operations for CouchDB in order to optimize performance.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp2n:",,,,,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create transaction manager changes for batch optimizations,FAB-2960,15540,15293,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,02/Apr/17 6:08 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Aug/17 3:54 AM,,,,,Future,,,fabric-ledger,,,,0,,,,,,,,Transaction manager manage requires changes in order to process changes in batch for CouchDB.  Goleveldb operation will not change.,,chris.elder,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp2v:",,,,,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,,chris.elder,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/17 7:48 PM;denyeart;This item has been deferred from v1.
See proposed future changeset here: https://gerrit.hyperledger.org/r/#/c/7715/;;;","21/Aug/17 1:34 PM;denyeart;[https://gerrit.hyperledger.org/r/#/c/7715/] has been merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support hash-only visibility,FAB-2961,15541,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ales,ales,02/Apr/17 9:03 PM,23/Jan/20 4:00 AM,28/Oct/23 2:59 AM,23/Jan/20 4:00 AM,,,,,Future,,,fabric-peer,,,,0,stale-item,,,,,,,,,ales,binhn,denyeart,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1151,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxp33:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ales,binhn,denyeart,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 6:31 AM;binhn;I think this would make more sense when we have the SideDB support, and the hash should also include the rw-set. With SideDB, the transaction content would remain on the peer side, known only by those in the channel.

Therefore, I would recommend to move this to post 1.0;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","23/Jan/20 4:00 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Do not expose channel names in plaintext in gossip stateInfo messages,FAB-2962,15542,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,03/Apr/17 12:46 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 6:01 AM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,"There is a security/confidentiality benefit if it will be possible to not expose the channel name when a peer sends a StateInfo message to peers.

I propose to concatenate the PKI-ID with the channel name, and then hash it. ",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxp3b:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip: do not relay any messages to other orgs if the peer has no external endpoint,FAB-2963,15543,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,03/Apr/17 12:54 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 7:41 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,ga,gossip,,,,,"Currently, peers do not forward membership information of peers that have no external endpoint to outside of their organization.
However, identities, and stateInfo messages are still relayed.

It makes no sense that a peer of an outside organization would know about a peer's identity, and ledger height (of channels) but the only thing it will not know is its internal address.

Therefore, we should take care that *any* information about a peer that has no external endpoint is not relayed to other orgs. ",,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzx59r:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 9:20 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8091/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a user of Fabric, I should be able to d/l platform specific binaries for all tools",FAB-2964,15544,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,ChristopherFerris,ChristopherFerris,03/Apr/17 1:03 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,23/Apr/17 10:46 PM,,,,,DUPLICATE,,,,,,,1,build-system,,,,,,,"As a user of Fabric, I should be able to d/l platform specific binaries for all tools including configtxgen fabric-chaintool, and fabric-ca (client) and any others that we currently require users to build from source.",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,144000,144000,,0%,144000,144000,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5of:",,,,Unset,,,,,,,,,,,,,,4.0,Unset,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/17 10:36 PM;ChristopherFerris;[~mastersingh24] isn't this in flight?;;;","23/Apr/17 10:45 PM;ChristopherFerris;closing this as duplicate of FAB-2986;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestConnectToAnchorPeers sometime times out,FAB-2965,15545,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,C0rWin,C0rWin,03/Apr/17 4:01 AM,19/Mar/19 8:13 PM,28/Oct/23 2:59 AM,18/May/17 11:04 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,ci-failure,,,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9030/consoleFull
https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10431/consoleFull",,C0rWin,gennadyl,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3109,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3109,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzx4vb:",,,,,,Sprint 15 - Gossip,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,C0rWin,gennadyl,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/17 12:22 AM;yacovm;https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10554/console;;;","27/Apr/17 3:54 AM;yacovm;https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10569/console;;;","27/Apr/17 4:49 AM;gennadyl;[~yacovm] I have enough of them now, you don't have to add... ;;;","18/May/17 11:04 PM;C0rWin;I believe that test failure relates to the FAB-3109 and will be fixed ones CR-9199 (https://gerrit.hyperledger.org/r/#/c/9199/) will be merged. As for now marking current item as DONE.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sync Proto Changes across fabric and fabric-sdk-java,FAB-2966,15546,15245,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,03/Apr/17 5:13 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/Apr/17 5:22 AM,,,,,WON'T FIX,,,fabric-sdk-java,,,,0,quality,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp3j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As a chaincode developer I want to access the SignedProposal object,FAB-2968,15548,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,03/Apr/17 5:54 PM,21/Jul/18 3:53 AM,28/Oct/23 2:59 AM,07/Apr/17 8:30 PM,,,,,,,,fabric-crypto,,,,0,,,,,,,,The (system) chaincode needs to access the SignedProposal object in order to perform access control. The SignedProposal might be used for additional purposes too specific the chaincode's  logic.,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5a7:",,,,Unset,,Sprint 15 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As a infrastructure developer I want access control at system chaincode,FAB-2969,15549,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,03/Apr/17 6:00 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,24/Apr/17 12:47 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"we need to check that the following are covered:
    a) chainless QSCC - discus with Murali what needs to be put there; simple answer peer MSP admin.
    b) chain-full QSCC - check READ policy of the chain in corresponds to (some issues we may want to discuss here) 
    c) chainless CSCC - this is for join channel essentially, where we check that the proposal comes from MSP admin
    d) chain-full LCCC - function dependent:
        -> chaincode instantiation one would need to check that invoker is within the instantiators, and owners of the chaincode
        -> listing chaincodes on a channel: one would need to check that the invoker has read access to the channel info or is the peer’s msp admin
        -> others?
     e) chainless LCCC - again can be function dependent, but in the simplest case we can require that proposals invoking LCCC chainless functions need to be created by the peer’s MSP admin.
     f) Chain creation operation, we need to check channel creation authorization.
",,angelo.decaro,Baha-sk,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5ev:",,,,Unset,,Sprint 15 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,angelo.decaro,Baha-sk,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 3:46 AM;ChristopherFerris;What is in review? Links to CRs please [~adc];;;","14/Apr/17 1:24 AM;elli-androulaki;Gerrit reviews that correspond to this Jira item: 
https://gerrit.hyperledger.org/r/#/c/7651/
https://gerrit.hyperledger.org/r/#/c/7853/
https://gerrit.hyperledger.org/r/#/c/7671/
https://gerrit.hyperledger.org/r/#/c/6421/;;;","27/Jun/17 1:07 AM;Baha-sk;Currently the go-sdk uses an Admin user by default, which works fine to install/query chain codes. A new task will be created shortly to set a normal user as default user for e2e tests and use Admin only for tests that require Admin role.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Determine structure and location for downloading release artifacts,FAB-2970,15550,15544,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,mastersingh24,mastersingh24,03/Apr/17 8:27 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-build,,,,0,build-system,,,,,,,"We need a to come up with the structure and location for pushing release artifacts.   

Options:

1) Nexus3 - this seems like it might work
2) Github - we could try to use github release artifacts (we already push zips of the src per release here)

My preference would be to use something like Nexus3 if we can.  Also seems like Nexus3 can act as a maven repository for Java artifacts as well so that's a plus for consistency",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp3r:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error message gives no indication of why,FAB-2971,15551,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,rickr,rickr,03/Apr/17 9:15 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 6:34 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Reproduce by installing CC with a period in the name.

code=UNKNOWN, description=invalid chaincode name example_cc.go, cause=null

?why is it invalid ?
",,rickr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4uv:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,rickr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 12:16 AM;wlahti;https://gerrit.hyperledger.org/r/#/c/7717/ (awaiting code review) will improve the error messages for invalid chaincode names/versions. ;;;","13/Apr/17 6:34 AM;wlahti;The CR has been merged. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add query API support for Java chaincode,FAB-2972,15552,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,sanchezl,denyeart,denyeart,03/Apr/17 9:51 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,19/May/17 2:19 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"https://gerrit.hyperledger.org/r/#/c/7221/ has updated the query iterator approach for go chaincode.  Need Java chaincode to add similar support for the following query APIs:
GetStateByRange()
GetStateByPartialCompositeKey()
GetQueryResult()
GetHistoryForKey()",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2980,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3647,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx4uf:",,,,Unset,,Sprint 15 - Endorser,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for local crypto standards / implementations,FAB-2974,15554,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,akm4,akm4,04/Apr/17 12:19 AM,23/Jan/20 4:00 AM,28/Oct/23 2:59 AM,23/Jan/20 4:00 AM,,,,,Future,,,fabric-crypto,,,,1,stale-item,,,,,,,"There would be great to have an ability to use local cryptographic standarts, like russian GOST. As far as i know, the most convnient way to do it - plug through OpenSSL. Maybe there are other ways with Go, but i am not informed enough. Anyway, this feature will be a real enabler or vice versa a huge problem in promoting Fabric if not implemented.",,akm4,d.zhvakin,DmitryKamagin,JonathanLevi,mplisov,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxp47:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,akm4,d.zhvakin,DmitryKamagin,JonathanLevi,mplisov,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:00 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert fabric v0.6 documentation (.md to .rst) ,FAB-2977,15557,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,rameshthoomu,rameshthoomu,rameshthoomu,04/Apr/17 1:34 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/Apr/17 1:29 AM,v0.6,,,,v0.6,,,fabric-docs,,,,0,Documentation,,,,,,,with the recent change from mkdocs to sphinx theme broken v0.6 documentation build. Convert v0.6 .md documentation to .rst and configure index.rst and conf.py to build v0.6 documentation in readthedocs. ,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp53:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,v0.6,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/17 1:29 AM;rameshthoomu;Patch has been submitted and merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Machine Access for Scalability Test,FAB-2978,15558,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Invalid,bmos299,bmos299,bmos299,04/Apr/17 3:34 AM,28/Jul/19 1:36 AM,28/Oct/23 2:59 AM,28/Jul/19 1:36 AM,,,,,,,,fabric-quality,,,,1,,,,,,,,"The Quality Team would like to begin scalability testing.  This require machines with public ip addresses.   The plan is to utilize docker swarm to cluster machines.  Is it possible for the fabric team to get either dedicated hardware or vm guests with ssh logins on public ip addresses?  Say 10 machines to start?  If this is possible, we can harden the details.

I am assigning to Ry.  Please ping me if you want to chat.

Thanks,
Barry",,binhn,bmos299,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp5b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,bmos299,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 7:13 AM;binhn;[~ryjones] appreciate if you could point us in the right direction to get a boatload (1000s) of nodes created for the test.;;;","07/Apr/17 2:33 PM;ryjones;[~binhn] I've reached out internally to see who needs to talk to whom to get this rolling.;;;","08/Apr/17 1:21 AM;ryjones;Please make your request here ASAP: https://github.com/cncf/cluster;;;","09/Apr/17 12:41 AM;bmos299;Thanks Ry. We will do that. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use protobuf for chaincode shim QueryResults to keep it language agnostic,FAB-2980,15560,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,Senthil1,denyeart,denyeart,04/Apr/17 4:20 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,21/Apr/17 5:52 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"https://gerrit.hyperledger.org/r/#/c/7221/ added QueryResult structures to chaincode shim.  Need to switch these golang structs to protobuf messages to keep them language agnostic, so that Java chaincode can reference the QueryResults.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2972,FAB-3267,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-758,,,,,,,,,"1|hzx4if:",,,,Unset,,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add timeout option to peer channel cmd,FAB-2982,15562,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,nnao,daijianw,daijianw,04/Apr/17 12:09 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/May/17 8:12 PM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,kafka,,,,,,,"The channel creation failed while using kafka ordering type.  Steps to recreate the error are given below:
1. Download fabric 1.0.0-alpha images
2. Refer to https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst to setup up network, while changing configtx.yaml and docker-compose.yaml to use kafka ordering type. Please see attachment for configtx.yaml and docker-compose.yaml.
3. Run config generation tool via ""./generateCfgTrx.sh mychannel""
4. Start the network via ""CHANNEL_NAME=mychannel docker-compose up -d""
5. Login to the cli container via ""docker exec -it cli bash""
6. Create the channel via the command: 
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig CORE_PEER_LOCALMSPID=""OrdererMSP"" peer channel create -o orderer0:7050 -c mychannel -f crypto/orderer/channel.tx 
7. The error output in cli container:
root@48340102f2a9:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig CORE_PEER_LOCALMSPID=""OrdererMSP"" peer channel create -o orderer0:7050 -c mychannel -f crypto/orderer/channel.tx 
2017-03-29 19:23:45.487 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'channel'
2017-03-29 19:23:45.487 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-03-29 19:23:45.487 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-03-29 19:23:47.633 UTC [msp] GetLocalMSP -> DEBU 004 Returning existing local MSP
2017-03-29 19:23:47.633 UTC [msp] GetDefaultSigningIdentity -> DEBU 005 Obtaining default signing identity
2017-03-29 19:23:47.635 UTC [msp] GetLocalMSP -> DEBU 006 Returning existing local MSP
2017-03-29 19:23:47.636 UTC [msp] GetDefaultSigningIdentity -> DEBU 007 Obtaining default signing identity
2017-03-29 19:23:47.637 UTC [msp] Sign -> DEBU 008 Sign: plaintext: 0AD6040A1508021A0608C393F0C60522...00120D1A0B08FFFFFFFFFFFFFFFFFF01 
2017-03-29 19:23:47.637 UTC [msp] Sign -> DEBU 009 Sign: digest: 84D9075E34EDC05A020171E1940F5C05ADE11D777E2243356C2AB144B58D8994 
Got status  &{NOT_FOUND}
Error receiving: EOF
Error: EOF


",,baohua,binhn,ChristopherFerris,daijianw,gbolo,hanhzf,kchristidis,nnao,shanlusun,tonyyang132,troyronda,viewer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,FAB-3787,,,,,,,,,,,,,,,,,,,,,"04/Apr/17 12:11 PM;daijianw;configtx.yaml;https://jira.hyperledger.org/secure/attachment/10645/configtx.yaml","04/Apr/17 12:11 PM;daijianw;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10646/docker-compose.yaml","04/Apr/17 12:11 PM;daijianw;orderer0.log;https://jira.hyperledger.org/secure/attachment/10647/orderer0.log",,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,"1|hzxmsf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,binhn,ChristopherFerris,daijianw,gbolo,hanhzf,kchristidis,nnao,shanlusun,tonyyang132,troyronda,viewer,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 3:17 AM;gbolo;I am also having issues with the kafka orderer type. I can confirm that the orderer successfully connects to the kafka brokers, but when a peer tries to join a channel I get this:

{{Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [orderer/common/broadcast] Handle -> WARN 2ba Rejecting CONFIG_UPDATE because: Error validating DeltaSet: Attempt to set key [Values] /Channel/Orderer/KafkaBrokers to version 0, but key is at version 0
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.239 EDT [orderer/common/deliver] Handle -> WARN 2bb Error reading from stream: stream error: code = 1 desc = ""context canceled""}}


the debug messages before this are:
{{Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.219 EDT [orderer/main] Deliver -> DEBU 292 Starting new Deliver handler
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.219 EDT [orderer/common/deliver] Handle -> DEBU 293 Starting new deliver loop
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.219 EDT [orderer/common/deliver] Handle -> DEBU 294 Attempting to read seek info message
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.225 EDT [orderer/main] Broadcast -> DEBU 295 Starting new Broadcast handler
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [orderer/common/broadcast] Handle -> DEBU 296 Preprocessing CONFIG_UPDATE
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [orderer/multichain] Process -> DEBU 297 Processing channel reconfiguration request for channel consortium
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 298 Adding to config map: [Groups] /Channel
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 299 Adding to config map: [Groups] /Channel/Orderer
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 29a Adding to config map: [Groups] /Channel/Orderer/OrdererOrg
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 29b Adding to config map: [Values] /Channel/Orderer/OrdererOrg/MSP
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 29c Adding to config map: [Policy] /Channel/Orderer/OrdererOrg/Readers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 29d Adding to config map: [Policy] /Channel/Orderer/OrdererOrg/Writers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 29e Adding to config map: [Policy] /Channel/Orderer/OrdererOrg/Admins
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 29f Adding to config map: [Values] /Channel/Orderer/CreationPolicy
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 2a0 Adding to config map: [Values] /Channel/Orderer/ConsensusType
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 2a1 Adding to config map: [Values] /Channel/Orderer/BatchSize
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 2a2 Adding to config map: [Values] /Channel/Orderer/BatchTimeout
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 2a3 Adding to config map: [Values] /Channel/Orderer/ChannelRestrictions
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 2a4 Adding to config map: [Values] /Channel/Orderer/KafkaBrokers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.226 EDT [common/configtx] addToMap -> DEBU 2a5 Adding to config map: [Policy] /Channel/Orderer/Admins
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2a6 Adding to config map: [Policy] /Channel/Orderer/BlockValidation
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2a7 Adding to config map: [Policy] /Channel/Orderer/Readers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2a8 Adding to config map: [Policy] /Channel/Orderer/Writers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2a9 Adding to config map: [Groups] /Channel/Application
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2aa Adding to config map: [Groups] /Channel/Application/Org1MSP
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2ab Adding to config map: [Values] /Channel/Application/Org1MSP/AnchorPeers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2ac Adding to config map: [Values] /Channel/Application/Org1MSP/MSP
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2ad Adding to config map: [Policy] /Channel/Application/Org1MSP/Admins
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2ae Adding to config map: [Policy] /Channel/Application/Org1MSP/Readers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2af Adding to config map: [Policy] /Channel/Application/Org1MSP/Writers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b0 Adding to config map: [Policy] /Channel/Application/Readers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b1 Adding to config map: [Policy] /Channel/Application/Writers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b2 Adding to config map: [Policy] /Channel/Application/Admins
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b3 Adding to config map: [Values] /Channel/BlockDataHashingStructure
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b4 Adding to config map: [Values] /Channel/OrdererAddresses
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b5 Adding to config map: [Values] /Channel/HashingAlgorithm
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b6 Adding to config map: [Policy] /Channel/Writers
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b7 Adding to config map: [Policy] /Channel/Admins
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b8 Adding to config map: [Policy] /Channel/AcceptAllPolicy
Apr 05 13:33:14 ymr-sbvme-ord1 orderer[17825]: 2017-04-05 13:33:14.229 EDT [common/configtx] addToMap -> DEBU 2b9 Adding to config map: [Policy] /Channel/Readers}}
;;;","12/Apr/17 5:01 PM;viewer;*This is the output of cli:*
2017-04-12 07:38:47.563 UTC [msp] GetLocalMSP -> DEBU 001 Returning existing local MSP
2017-04-12 07:38:47.563 UTC [msp] GetDefaultSigningIdentity -> DEBU 002 Obtaining default signing identity
2017-04-12 07:38:49.609 UTC [msp] GetLocalMSP -> DEBU 003 Returning existing local MSP
2017-04-12 07:38:49.611 UTC [msp] GetDefaultSigningIdentity -> DEBU 004 Obtaining default signing identity
2017-04-12 07:38:49.614 UTC [msp] GetLocalMSP -> DEBU 005 Returning existing local MSP
2017-04-12 07:38:49.614 UTC [msp] GetDefaultSigningIdentity -> DEBU 006 Obtaining default signing identity
{color:red}2017-04-12 07:38:49.615 UTC [msp] Sign -> DEBU 007 Sign: plaintext: 0AD6040A1508021A060889B3B7C70522...00120D1A0B08FFFFFFFFFFFFFFFFFF01
2017-04-12 07:38:49.615 UTC [msp] Sign -> DEBU 008 Sign: digest: 2D38D5E7E8D537C6F7CF5986C029BE1E54E5D7B2DC25E4F5AAB57FDDB6BE43D5{color}
Got status  &{NOT_FOUND}
Error receiving: EOF
Error: EOF
Usage:
  peer channel create [flags]

*This is the log snippet of orderer0:*
2017-04-12 07:38:47.644 UTC [orderer/multichain] newChainSupport -> DEBU 49a [channel: mychannel] Retrieved metadata for tip of chain (block #0):
2017-04-12 07:38:47.644 UTC [orderer/kafka] newChain -> DEBU 49b [channel: mychannel] Starting chain with last persisted offset -3 and last recorded block 0
{color:red}2017-04-12 07:38:49.617 UTC [orderer/common/deliver] Handle -> DEBU 49c Client request for channel mychannel not found{color}
2017-04-12 07:38:50.645 UTC [orderer/kafka] newProducer -> DEBU 49d Connecting to Kafka cluster: [kafka0:9092]
2017-04-12 07:38:50.668 UTC [orderer/kafka] newProducer -> DEBU 49e Connected to the Kafka cluster
2017-04-12 07:38:50.669 UTC [orderer/multichain] newChain -> INFO 49f Created and starting new chain mychannel
2017-04-12 07:38:50.669 UTC [orderer/kafka] Start -> DEBU 4a0 [channel: mychannel] Posting the CONNECT message...
2017-04-12 07:38:51.083 UTC [orderer/kafka] Send -> DEBU 4a1 [channel mychannel] Posted blob to the Kafka cluster (offset number: 0)
2017-04-12 07:38:51.083 UTC [orderer/kafka] Start -> DEBU 4a2 [channel: mychannel] CONNECT message posted successfully
2017-04-12 07:38:51.106 UTC [orderer/kafka] newConsumer -> DEBU 4a3 [channel: mychannel] Created new consumer for session (beginning offset: -2)
2017-04-12 07:38:51.106 UTC [orderer/multichain] addBlockSignature -> DEBU 4a4 &{ledgerResources:0xc420161c20 chain:0xc420330120 cutter:0xc42031aa50 filters:0xc420161c80 signer:0x11cdd30 lastConfig:0 lastConfigSeq:0}
2017-04-12 07:38:51.106 UTC [orderer/multichain] addBlockSignature -> DEBU 4a5 &{}
2017-04-12 07:38:51.106 UTC [msp] GetLocalMSP -> DEBU 4a6 Returning existing local MSP
2017-04-12 07:38:51.106 UTC [msp] GetDefaultSigningIdentity -> DEBU 4a7 Obtaining default signing identity
2017-04-12 07:38:51.107 UTC [msp] GetLocalMSP -> DEBU 4a8 Returning existing local MSP
2017-04-12 07:38:51.107 UTC [msp] GetDefaultSigningIdentity -> DEBU 4a9 Obtaining default signing identity
2017-04-12 07:38:51.107 UTC [msp] Sign -> DEBU 4aa Sign: plaintext: 0A9F040A0A4F7264657265724D535012...24E1AD73348D8BF93C9C95C4860DF273
2017-04-12 07:38:51.107 UTC [msp] Sign -> DEBU 4ab Sign: digest: 2F3CD03D00EBF80A8C071E7CF939CFEAF9CAF79732F3CDD942762F4A1A461D4D
2017-04-12 07:38:51.107 UTC [msp] GetLocalMSP -> DEBU 4ac Returning existing local MSP
2017-04-12 07:38:51.107 UTC [msp] GetDefaultSigningIdentity -> DEBU 4ad Obtaining default signing identity
2017-04-12 07:38:51.107 UTC [msp] GetLocalMSP -> DEBU 4ae Returning existing local MSP
2017-04-12 07:38:51.107 UTC [msp] GetDefaultSigningIdentity -> DEBU 4af Obtaining default signing identity
2017-04-12 07:38:51.107 UTC [msp] Sign -> DEBU 4b0 Sign: plaintext: 0A9F040A0A4F7264657265724D535012...24E1AD73348D8BF93C9C95C4860DF273
2017-04-12 07:38:51.107 UTC [msp] Sign -> DEBU 4b1 Sign: digest: 1C85D0E74FD9CB7B5BEE1E20C985AC83A07302DC20CE61A55E460EAE1B9556E0
2017-04-12 07:38:51.108 UTC [orderer/ramledger] appendBlock -> DEBU 4b2 Sending signal that block 0 has a successor
2017-04-12 07:38:51.108 UTC [orderer/kafka] loop -> DEBU 4b3 [channel: testchainid] Batch filled, just cut block 1
2017-04-12 07:38:51.111 UTC [orderer/kafka] loop -> DEBU 4b4 [channel: mychannel] Successfully unmarshalled consumed message. Inspecting type...
2017-04-12 07:38:51.111 UTC [orderer/kafka] loop -> DEBU 4b5 [channel: mychannel] It's a connect message - ignoring

In peer/channel/create.go#executeCreate(), it will sleep 2s after the create transaction is sent, then try to get the block. But the channel has not finish starting. That's the problem.  I think the peer may polling to get the block instead of sleep for 2 seconds directly.;;;","12/Apr/17 6:32 PM;viewer;I tried to fetch the block with the following script, then 
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig CORE_PEER_LOCALMSPID=""OrdererMSP"" peer channel fetch -o orderer0:7050 -c mychannel -f crypto/orderer/channel.tx --tls $CORE_PEER_TLS_ENABLED --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem

After this step, the following steps -- joining channel, chain code installation and so on all succeeded. So, just like the previous comment said, the channel is successfully created, but the peer didn't get block.;;;","13/Apr/17 12:01 PM;daijianw;Hi Zong Ying,

Thanks for your investigation. I tried your workaround, it works. ;;;","15/Apr/17 5:13 AM;nnao;Hi all,

In order to fix the bug, I plan to reduce the processing of getting the block in peer channel create and add the peer channel fetch command to the procedure of e2e. The fetch command does the same thing as getting the block of the create command.
The reason why I divided two-phase is because I'd like to want the user to judge how much time is needed to create the channel. it depends on the environment. Also, it is possible to reduce duplication of code.

Do you have any opinions?;;;","15/Apr/17 12:21 PM;baohua;Would like to support the dividing, while we can add some option for the `peer channel create` cmd, e.g., --fetch, to allow the original auto-fetch block operation.

We can set the option disabled by default.

How do u think?;;;","15/Apr/17 1:09 PM;nnao;I think the dividing is a simple solution but I concern about users should need to change original operation. the auto-fetch option is a good idea.
Does auto-fetch option solve this bug? or we need to off that option to solve?
;;;","15/Apr/17 1:13 PM;kchristidis;[~nnao]: The status of this JIRA is set to ""In Review"" yet I can't seem to find a changeset in Gerrit for it. Can you please point me to it?

Also: I'm going through the comments here and I'm still not 100% sure on what the problem is, or the suggested fix. It seems like it probably has something to do with the E2E expecting the block way too fast for Kafka, but just to be clear, can you spell it out for me? Thanks.;;;","15/Apr/17 1:56 PM;nnao;This is gerrit link (Sorry I need to change something to pass Jenkins test)
https://gerrit.hyperledger.org/r/#/c/8059/

As Zhang ZongYing said, The problem is that too fast to get the block by a peer for kafka. Currently, peer waits 2 sec for getting the block In peer/channel/create.go#executeCreate(). But orderer takes to 2 more sec time to start channel in kafka. Changing peer sleep time to 5 seconds will not cause the bug.

I'm not sure this solution is correct or not. But In fabric-sdk-node, joinChannel process gets genesis block. I think the dividing is a simple solution.;;;","15/Apr/17 2:05 PM;kchristidis;Excellent, thank you for the update. And thank you for submitting a patch for this.;;;","15/Apr/17 6:25 PM;daijianw;Thanks for patching this. I agree the dividing is a simple solution. One suggestion is, in script.sh, add a comment to explain why we need sleep a while(e.g. 5 seconds here) between channel creation and fetch. This will give the end user a hint that a sleep is necessary here when they automate the end to end operations. ;;;","15/Apr/17 7:07 PM;baohua;By the way, why not we make the timeout variable configurable through cmd parameter or core.yaml?

That maybe more flexible to let users config as his own environment.

Thanks!;;;","18/Apr/17 2:41 AM;nnao;Thank you for comment.
I will add timeout configuration for users.;;;","08/May/17 8:55 PM;tonyyang132;[~nnao] First of all thank you for your change to this issue. So I've been trying to run a kafka based e2e test with your 15th patch set. My understanding is I need to modify script.sh so the channel creation command would be something like:

peer channel create -o orderer.example.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/channel.tx --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA -t 5

Would this be all? Or are there more changes I need to make to the script?;;;","09/May/17 12:41 AM;binhn;CR  https://gerrit.hyperledger.org/r/#/c/8059/;;;","09/May/17 1:54 AM;nnao;Tony Yang This patches(as mentioned link Binh) does not affect existing tests. This patches has default timeout values(5 sec), it works without -t option. If you want to change the timeout time, use the -t option.  Thanks.;;;","09/May/17 3:21 AM;tonyyang132;[~nnao] Thank you for the reply.

I ran into some errors today. This was with your 15th patch set from [https://gerrit.hyperledger.org/r/8059] cherry-picked onto master (c346b06). Orderer type was solo (planning on kafka but haven't got that far yet). After {code}make docker{code} followed by {code}./network_setup.sh up{code} I got the following error:

{code}
 ____    _____      _      ____    _____           _____   ____    _____
/ ___|  |_   _|    / \    |  _ \  |_   _|         | ____| |___ \  | ____|
\___ \    | |     / _ \   | |_) |   | |    _____  |  _|     __) | |  _|
 ___) |   | |    / ___ \  |  _ <    | |   |_____| | |___   / __/  | |___
|____/    |_|   /_/   \_\ |_| \_\   |_|           |_____| |_____| |_____|

Channel name : mychannel
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.key
CORE_PEER_LOCALMSPID=Org1MSP
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.crt
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
CORE_PEER_ID=cli
CORE_LOGGING_LEVEL=DEBUG
CORE_PEER_ADDRESS=peer0.org1.example.com:7051
2017-05-08 17:33:46.550 UTC [msp] getMspConfig -> INFO 001 intermediate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/intermediatecerts: no such file or directory]
2017-05-08 17:33:46.550 UTC [msp] getMspConfig -> INFO 002 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/crls: no such file or directory]
2017-05-08 17:33:46.550 UTC [msp] getMspConfig -> INFO 003 MSP configuration file not found at [/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/config.yaml]: [stat /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/config.yaml: no such file or directory]
2017-05-08 17:33:46.586 UTC [msp] GetLocalMSP -> DEBU 004 Returning existing local MSP
2017-05-08 17:33:46.586 UTC [msp] GetDefaultSigningIdentity -> DEBU 005 Obtaining default signing identity
2017-05-08 17:33:46.592 UTC [msp] GetLocalMSP -> DEBU 006 Returning existing local MSP
2017-05-08 17:33:46.592 UTC [msp] GetDefaultSigningIdentity -> DEBU 007 Obtaining default signing identity
2017-05-08 17:33:46.592 UTC [msp] GetLocalMSP -> DEBU 008 Returning existing local MSP
2017-05-08 17:33:46.592 UTC [msp] GetDefaultSigningIdentity -> DEBU 009 Obtaining default signing identity
2017-05-08 17:33:46.593 UTC [msp] Sign -> DEBU 00a Sign: plaintext: 0AA4060A074F7267314D53501298062D...53616D706C65436F6E736F727469756D
2017-05-08 17:33:46.593 UTC [msp] Sign -> DEBU 00b Sign: digest: 9BFD3BDC49C51B355066AC43601CCF2305D3A19A42124A7F95022EF871CF68B1
2017-05-08 17:33:46.593 UTC [msp] GetLocalMSP -> DEBU 00c Returning existing local MSP
2017-05-08 17:33:46.593 UTC [msp] GetDefaultSigningIdentity -> DEBU 00d Obtaining default signing identity
2017-05-08 17:33:46.593 UTC [msp] GetLocalMSP -> DEBU 00e Returning existing local MSP
2017-05-08 17:33:46.593 UTC [msp] GetDefaultSigningIdentity -> DEBU 00f Obtaining default signing identity
2017-05-08 17:33:46.593 UTC [msp] Sign -> DEBU 010 Sign: plaintext: 0ADB060A1508021A0608FAD7C2C80522...335EDBAEBDC76A4ACE45C8ACB90D91C4
2017-05-08 17:33:46.593 UTC [msp] Sign -> DEBU 011 Sign: digest: 902CEA097532C3D7E420891B92D03ECC8605A695CE3B79783E315AC2B91E840E
2017-05-08 17:33:46.660 UTC [msp] GetLocalMSP -> DEBU 012 Returning existing local MSP
2017-05-08 17:33:46.660 UTC [msp] GetDefaultSigningIdentity -> DEBU 013 Obtaining default signing identity
2017-05-08 17:33:46.660 UTC [msp] GetLocalMSP -> DEBU 014 Returning existing local MSP
2017-05-08 17:33:46.660 UTC [msp] GetDefaultSigningIdentity -> DEBU 015 Obtaining default signing identity
2017-05-08 17:33:46.660 UTC [msp] Sign -> DEBU 016 Sign: plaintext: 0ADB060A1508021A0608FAD7C2C80522...00120D1A0B08FFFFFFFFFFFFFFFFFF01
2017-05-08 17:33:46.660 UTC [msp] Sign -> DEBU 017 Sign: digest: CDC58CA348C6A8B97255377261001CB312311428E5C20FA27D09E2140DD274DC
Got status  &{NOT_FOUND}
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x6e1077]

goroutine 1 [running]:
panic(0xc6c140, 0xc420012080)
	/opt/go/src/runtime/panic.go:500 +0x1a1
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ClientConn).Close(0x0, 0xc420177a00, 0xc420170000)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:454 +0x37
github.com/hyperledger/fabric/peer/channel.(*deliverClient).Close(0xc420132fc0, 0x0, 0x13631a0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/deliverclient.go:103 +0x2e
github.com/hyperledger/fabric/peer/channel.getGenesisBlock(0xc4202716d0, 0x0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/deliverclient.go:117 +0x100
github.com/hyperledger/fabric/peer/channel.executeCreate(0xc4202716d0, 0xc4202716d0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:177 +0x50
github.com/hyperledger/fabric/peer/channel.create(0xc42023bd40, 0xc42023f900, 0x1, 0xa, 0xc4202716d0, 0xd5010c, 0x5)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:207 +0x45
github.com/hyperledger/fabric/peer/channel.createCmd.func1(0xc42023bd40, 0xc42023f900, 0x1, 0xa, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/peer/channel/create.go:59 +0x52
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc42023bd40, 0xc42023f400, 0xa, 0xa, 0xc42023bd40, 0xc42023f400)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:599 +0x234
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x135a9c0, 0xf, 0xc420010035, 0x7)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:689 +0x367
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x135a9c0, 0x7d, 0xc420010035)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:648 +0x2b
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:118 +0x54e
!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================
{code}

I guess I must have missed something here. Can you maybe shed some light? Thank you.;;;","09/May/17 6:10 AM;nnao;Oh, it's my fault. I had closed grpc connection second times.
So I will fix that bug and will push the code after making test cases.
Thanks.;;;","10/May/17 2:00 AM;tonyyang132;[~nnao] Glad that what's been haunting me will be taken care of. Thank you :);;;","11/May/17 4:15 AM;ChristopherFerris;hi [~nnao], thanks for taking this one on! It is important to get this one merged for the alpha2 release. I realize there's been back and forth in comments. Any chance you could give it some focus, please?

 

Thanks!;;;","11/May/17 8:16 AM;nnao;Hi ChristopherFerris,
Yes. The patches of adding timeout option were completed, but now I write a unit test of timeout option.;;;","18/Jul/17 1:23 PM;hanhzf;[~nnao] [~ChristopherFerris] seem that we have met the same problem with fabric1.0 release version, when using kafka as the backend for orderer. Error as below:

{color:#d04437}2017-07-17 08:52:11.956 UTC [orderer/kafka] Enqueue -&gt; WARN 4c2 [channel: testchainid] Will not enqueue, consenter for this channel hasn&#39;t started yet{color}
{color:#d04437}2017-07-17 08:52:11.958 UTC [orderer/common/deliver] Handle -> WARN 4c3 Error reading from stream: rpc error: code = Canceled desc = context canceled{color}

{color:#d04437}2017-07-16 07:45:33.086 UTC [channelCmd] InitCmdFactory -&gt; INFO 109 Endorser and orderer connections initialized
Error: timeout waiting for channel creation{color}

{color:#333333}FYI, we will continue investigate on this issue.{color}

 

 ;;;","19/Jul/17 3:01 AM;nnao;[~hanhzf] What if you set a timeout option longer? (e.g. -t 10) Does orderer log shows that channel creation succeed?.
This patch just waits for channel creation. If channel creation was failed, peer can't know that.;;;","25/Jul/17 1:10 PM;shanlusun;Got the same error as [~hanhzf] with Fabric 1.0, as a workaround I added one more argument: '{color:#d04437}-t 10{color:#333333}'{color}{color} for 'create channel', then kafka works well.
{code:java}
// code placeholder
peer channel create -o orderer.chain.ad.xiaomi.com:7050 -c $CHANNEL_NAME -t 10 -f ./channel-artifacts/channel.tx --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA >&log.txt{code};;;",,,,,,,,,,,,,,,,
fabric-peer container should not be used for CLI,FAB-2984,15564,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,04/Apr/17 10:40 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/May/17 3:13 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The fabric-peer container was designed to be used as a lightweight container for running a peer node.  However, some docker-compositions have started using it to drive the ""peer chaincode"" type CLI commands.  This is not advised, as the environment is too stripped down to support things like chaincode development.  This will break as we move forward with tighter integration with chaincode development.",,greg.haskins,muralisr,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3095,,,,,,,,,"1|hzxp5z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,muralisr,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/17 10:50 PM;greg.haskins;https://gerrit.hyperledger.org/r/#/c/7681/;;;","04/Apr/17 10:51 PM;rameshthoomu;[~ghaskins] e2e CLI tests are using peer image in CLI container. If not fabric-peer image, which image fulfill CLI container needs. Could you please provide your inputs on how to fix this issue.. Thanks! ;;;","05/Apr/17 12:06 AM;greg.haskins;testenv is probably more appropriate;;;","12/Apr/17 1:53 AM;greg.haskins;A better solution is probably to forego the container all together.  I would suggest we consider the following:

# Separate ""peer node start"" from all the other subcommands so that this is the only function for the ""peer"" binary.
# Create a new binary (""fabric-cli"", ""fabric-ctl"", etc) that implements the other subcommands (chaincode, channel, logging, etc)
   a)  Should ideally be buildable with minimal dependencies (e.g. ""go get ../fabric-cli"" should not need anything more than golang 1.7)
# Integrate configtxgen into the CLI as a subcommand;;;","21/Apr/17 7:57 AM;muralisr;[~greg.haskins] +1 for 1 and 2... need to think about 3;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Utilize error handling framework throughout Fabric,FAB-2985,15565,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wlahti,wlahti,04/Apr/17 11:57 PM,12/Jan/19 1:03 AM,28/Oct/23 2:59 AM,12/Jan/19 1:02 AM,,,,,,,,fabric-peer,,,,1,Serviceability,,,,,,,"The error handling framework (found under vendor/github.com/pkg/errors) needs to be utilized throughout the codebase to append callstacks to error messages.

Package documentation can be found here: [https://godoc.org/github.com/pkg/errors]

Here is a pseudo-code program that shows key things we need:
{code:java}
package main

import (
""fmt""
""github.com/pkg/errors""
)

// creates an error, prepending the provided error message, 
// and generates a stack
func wrapWithStack() error {
    err := createError()
    // do this when error comes from external source (go lib or vendor)
    return errors.Wrap(err, ""wrapping an error with stack"")
}

// creates an error, prepending the provided error message, 
// and preserves the stack from the previous error
func wrapAndPreserveStack() error {
    err := createError()
    // do ths when error comes from internal Fabric since it already has stacktrace
    return errors.WithMessage(err, ""wrapping an error without stack"")
}

// creates a new error with a stack
func createError() error {
    return errors.New(""original error"")

}

// creates a new formatted error message with a stack
func createErrorWithFormatting() error {
     return errors.Errorf(""original error for %s"", something)
}
 
func main() {
    err := createError()
    fmt.Printf(""print error without stack: %s\n\n"", err)
    fmt.Printf(""print error with stack: %+v\n\n"", err)
    err = wrapWithoutStack()
    fmt.Printf(""%+v\n\n"", err)
    err = wrapWithStack()
    fmt.Printf(""%+v\n\n"", err)
}{code}
and here is the output:
{code:java}
print error without stack: original error
 
print error with stack: original error
main.createError
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:18
main.main
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:22
runtime.main
/opt/go/src/runtime/proc.go:183
runtime.goexit
/opt/go/src/runtime/asm_amd64.s:2086
 
original error
main.createError
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:18
main.wrapWithoutStack
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:14
main.main
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:25
runtime.main
/opt/go/src/runtime/proc.go:183
runtime.goexit
/opt/go/src/runtime/asm_amd64.s:2086
wrapping an error without stack
 
original error
main.createError
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:18
main.wrapWithStack
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:10
main.main
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:27
runtime.main
/opt/go/src/runtime/proc.go:183
runtime.goexit
/opt/go/src/runtime/asm_amd64.s:2086
wrapping an error with stack
main.wrapWithStack
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:11
main.main
/opt/gopath/src/github.com/hyperledger/fabric/examples/errorshandling/errorstest.go:27
runtime.main
/opt/go/src/runtime/proc.go:183
runtime.goexit
/opt/go/src/runtime/asm_amd64.s:2086{code}
 ",,baohua,ChristopherFerris,denyeart,gennadyl,sheehan,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABG-602,,,FAB-5842,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzu8s:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,ChristopherFerris,denyeart,gennadyl,sheehan,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Aug/17 11:00 PM;baohua;It would be nice if we could add a sub-task that helps demo the usage of the new error pkg in the documentation.;;;","04/Oct/17 2:48 AM;ChristopherFerris;Are we still pursuing this? I thought that we discovered a package that did what we wanted elsewhere that we'd use instead. ;;;","04/Oct/17 3:27 AM;wlahti;Yes, we are still actively pursuing this. The description above was updated to reflect the vendored package we are using in place of the internal Fabric errors package. ;;;","06/Nov/17 11:59 AM;sheehan;Is there a subtask to enforce this in the CI system, at least for Fabric core? I read through the doc stating that fmt.Errorf() and errors.New() should no longer be used, but I'm skeptical this will be 100% followed unless enforced though CI.;;;","11/Jan/19 12:39 AM;sykesm;This item hjas been in progress for more than a year now. At this point I think we should just close it down and move the remaining work to separate stories where appropriate.

[~denyeart] - any concerns with that?;;;","12/Jan/19 1:02 AM;denyeart;Closed!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Parent Story for making release artifacts available (e2e, confixtxgen, cryptogen)",FAB-2986,15566,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,rameshthoomu,rameshthoomu,04/Apr/17 11:58 PM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,02/Jul/17 9:18 PM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,"Build and publish native binaries like configtxgen, cryptogen etc.. to support chaincode development on windows systems. Build binaries as part of CI release process and push them to nexus3 repository.",,denyeart,greg.haskins,jwagantall,mastersingh24,rameshthoomu,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,21600,1800,14400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3123,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3040,,,,,,,,,"1|hzxp67:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,greg.haskins,jwagantall,mastersingh24,rameshthoomu,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 11:24 PM;greg.haskins;Should we consider having formal package/installers (msi/deb/rpm type artifacts)?
;;;","22/Apr/17 1:01 AM;mastersingh24;Yes;;;","22/Apr/17 7:49 AM;rameshthoomu;published cryptogen and configtxgen binary tar files to nexus repository.. https://logs.hyperledger.org/sandbox/vex-yul-hyp-jenkins-2/fabric-verify-x86_64/28/. This is temporary location to keep binary files and [~ryjones] is checking with LF release team to move ""log shipping"" and ""binary tar file"" to nexus3 repository. ;;;","03/May/17 11:48 AM;rameshthoomu;[~jwagantall] and myself are working on publishing binary tar files to nexus repository. We have published tar file https://nexus.hyperledger.org/content/repositories/snapshots/sandbox/vex-yul-hyp-jenkins-2/fabric-bin-test/. Please note this is a temporary location and will move these artifacts to production from production jobs.

[~mastersingh24] Could you please give us your inputs on the below points.

1) How many days we have to keep these artifacts?
2) Do we need to push tar file per platform?
3) Do we need any versioning on these tar files? if yes, what is the versioning approach we have to use?

Please add if I miss any!!


;;;","04/May/17 5:32 AM;jwagantall;posting the comments from the ci-pipeline channel

1) How many days we have to keep these artifacts?

I assume you mean the non-release artifacts (i.e. the artifacts which match published release of Fabric images)? For ""release-level"" artifacts we should keep them around ""forever"" although we might just keep the latest patch release for each major version and archive other versions? And for major versions, I'd say we should probably keep 2-3 major versions around.

I don't think we need to build artifacts for every merge build. I'd be OK with weekly release archives from the dev branch and perhaps we need only keep 4 or 5 weeks around? 

2) Do we need to push tar file per platform?

Yes - I think we should have per platform tar files. We definitely want people to be able to download the release artifact(s) for each platform individually. We could decide that for non-release artifacts we publish a single tar file, but I assume if we have to do individual ones for releases we might as well do per platform all around.

3) Do we need any versioning on these tar files? if yes, what is the versioning approach we have to use?

We should use the same versioning / naming we use for Fabric release images for the release tar files.

For the weekly ones, we should use the same naming as you are doing for the Docker images you publish (of course it would only match the weekly one you pick)

Hope this makes sense
;;;","17/May/17 10:38 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/8939/;;;","17/May/17 10:40 PM;rameshthoomu;[https://gerrit.hyperledger.org/r/#/c/8939/] – Waiting for review comments and +2's;;;","17/May/17 11:27 PM;greg.haskins;FWIW, I am against this approach for two reasons:

1) The binaries produced in this manner are not truly universal.  For instance, the Linux binaries have LDD linkages to libc and libvdso (amoung others) that will likely limit the distro/platform portability.

2) The URLs proposed do not appear to be long term sustainable nor user friendly.

I can appreciate the sense of urgency, and doing this ""right"" (packaging up releases in a traditional way) while not complex, hard or time-consuming, is still work that needs to be completed.  Therefore, if others are going to push this through despite my concerns highlighted above, I would suggest that we at least try to do this in a more stable manner such as how maven coordinates are managed in the way they are pushed to nexus.

E.g. I would much rather see
 * [http://releases.hyperledger.org/fabric/tools-1.0.0-alpha2|http://releases.hyperledger.org/fabric/tools-1.0.0-alpha3-snapshot-e34g4s]
 * [http://releases.hyperledger.org/fabric/tools-1.0.0-alpha3-snapshot-e34g4s]
 * etc

..rather than something with ""sandbox/vex-yul"" in it, whatever that is.

Having these IMO ugly and likely unstable URLs is not going to do any of our users any favors.  It makes the doc ugly, confusing, and most concerningly, unreliable if the URLs don't work 3 months from now.  I would suggest that we perhaps look at using literal maven tooling (there is a way to push non java artifacts, IIRC).;;;","17/May/17 11:36 PM;greg.haskins;And to be clear: I have no qualms with using nexus to host intermediate artifacts of the build.  In fact, I would encourage it: I would love to see us get to the point where the front end up the pipeline builds all the artifacts and pushes them to nexus.  Then other phases like UT, integration, UAT, and when appropriate, release, may simply consume them.  What I do object to is unreliable packaging intended for end-user consumption, unofficial releases that bypass maintainer scrutiny/approval making it into upstream/official documentation, and unreliable/confusing/nonsensical presentation of resources.

I'm sorry if this all seems harsh.  I only aim to address a quality concern where I see it.;;;","18/May/17 12:51 AM;denyeart;[~greg.haskins] No need to apologize, your points are all good. We simply need to decide what is done in short term for alpha2 vs longer term improvements.

For alpha2, my opinion is that we just need to clean up the URLs (""sandbox/vex-yul"" was just a dry run), and defer the other suggestions for next time around (e.g. beta).  Does anybody see issues with that approach?

[~rameshthoomu] [~jwagantall] Can you provide an example of what the 'final' alpha2 URLs will be, per platform?;;;","18/May/17 1:07 AM;jwagantall;These are the final paths we are expecting to have:
 * [https://nexus.hyperledger.org/content/repositories/staging/org/hyperledger] for non signed binaries pushed on a regular basis
 * 
[https://nexus.hyperledger.org/content/repositories/snapshots/org/hyperledger|https://nexus.hyperledger.org/content/repositories/snapshots/org/hyperledger/] for signed binaries which will be pushed on a regular basis
 * 
[https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger|https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/] for signed binaries just for official releases on a scheduled plan;;;","18/May/17 2:12 AM;greg.haskins;Those base URLs are acceptable to me.  Few remaining questions:
 # What would be the FQP of something like, tools for 1.0.0-alpha2?
 # What is the retention plan, particularly for releases
 # Will anything other than /releases/ end up in the docs?
 # What are the gates controlling the releases namespace?

Thanks

-Greg;;;","18/May/17 6:51 AM;jwagantall;Hi Greg, 

I am more than happy to work on appropriated rules for your previous questions for which I might need to take it offline with Ry and my lead to make sure we have a good structure like in other projects. 

For now, we are blocked on being able to push the fabric binaries since the repo was lacking an initial pom file which has been created here:

[https://gerrit.hyperledger.org/r/#/c/9487/]

I will need the code experts to review it and help us getting this pom file in shape. Right now this is based of fabric-sdk-java with few things corrected. Since I am not too familiar with the fabric code, I couldn't make more improvements. 

Can we have any developer helping us with this pom.xml please?

Thanks!

Jess;;;","18/May/17 11:49 PM;denyeart;Due to issues pushing to {color:#444444}staging/deploy/release{color}, Ramesh has pushed alpha2 release tarball to:

[https://nexus.hyperledger.org/content/repositories/logs/sandbox/fabric-binary/]

Not ideal, but good enough for today.;;;","19/May/17 11:33 AM;rameshthoomu;We had issues with maven-staging-deploy plugin to publish tar balls to nexus repository from Jenkins.. We somehow pushed tar balls per platforms to [https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/]  based on latest fabric commits. We will keep this link active all the time in nexus repository. [~jwagantall] please make sure below links are active all the time. 

[https://nexus.hyperledger.org/content/repositories/logs/sandbox/fabric-binary/]

[https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/]

 ;;;","09/Jun/17 9:17 AM;rameshthoomu;We have now fabric-binaries job ready and it's working as expected. Please see the job configuration here https://jenkins.hyperledger.org/view/fabric-binaries/ This job triggers when a tag is created in fabric repository and publish java jar to nexus repository. 

This job looks for the IS_RELEASE=TRUE when a ref_updated event is triggered. If false, publish release to https://nexus.hyperledger.org/content/repositories/snapshots/org/hyperledger/fabric/fabric-binary/ repository otherwise to https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/ ;;;",,,,,,,,,,,,,,,,,,,,,,,,
Update chaincode package to utilize error handling framework,FAB-2987,15567,15565,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,04/Apr/17 11:58 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Sep/17 3:42 AM,,,,,v1.1.0,v1.1.1,,fabric-peer,,,,0,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp6f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Sep/17 12:35 AM;wlahti;https://gerrit.hyperledger.org/r/#/c/13245/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add java version of example_cc,FAB-2988,15568,15227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,05/Apr/17 12:46 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,07/Apr/17 11:26 PM,,,,,v1.0.0,,,fabric-sdk-java,,,,0,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp6n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure orderers check MSP config consistency at channel genesis time,FAB-2989,15569,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,elli-androulaki,elli-androulaki,05/Apr/17 3:11 AM,23/Jan/20 4:01 AM,28/Oct/23 2:59 AM,23/Jan/20 4:01 AM,,,,,Future,,,fabric-crypto,,,,0,stale-item,,,,,,,"This task refers to a check that needs to be performed by an orderer each time a channel creation request is submitted to the system ledger. In this case orderers need to check that MSPs included in the new channel, are consistent in configuration with the MSP configuration in the system ledger. 

That is an msp with id ID in system ledger, has the same configuration as the msp with the same id in the new channel. Orderers should reject channel creation requests if this check is not validated.

*Problem* associated here relates to the addition of new MSPs. How can the orderers check that consistently since after a channel's genesis there is no ordering of the new channel's transactions w.r.t. system channel transactions...",,elli-androulaki,kchristidis,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1875,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6hr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,kchristidis,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/17 11:49 AM;kchristidis;??Problem associated here relates to the addition of new MSPs. How can the orderers check that consistently since after a channel's genesis there is no ordering of the new channel's transactions w.r.t. system channel transactions...??

[~elli-androulaki] can you please expand on this with an example?;;;","12/Apr/17 4:17 AM;kchristidis;Will need an update here.;;;","17/Apr/17 11:16 PM;elli-androulaki;Yes, so the issue i was referring to is the following.

A new channel request is issued, and this is ordered within the system channel. The orderers now can check consistency of the pairs <msiid, mspconf> in the genesis block with the ones in the system channel. 

However, after this channel is created, it can be that new members are added to the channel, e.g., another MSP is approved to be added to the channel's application MSPs. The consistency of the added <mspid, mspconf> pair is not able to safely be checked against the system channel's configuration cause this will be added to the channel via the re-configuration tx that is only ordered among that channel's transactions.

;;;","18/Apr/17 5:02 PM;elli-androulaki;Given my comment below, I think there are two paths to follow: 

1. (it may actually not be a bad idea) for v1, we rest upon the application performing the MSP related checks (and all genesis block correctness checks) in advance prior to sending a join channel request to its peers.
2. We have the orderers check the validity of genesis block msps as discussed in the description of this item and the validity of added MSPs by having the leader or any node producing the configuration update block comparing that added MSP's configuration with the corresponding one in the system channel. This would work well for Kafka where we do not need any majority and all nodes are non-byzantine, but to support sBFT in this case we would need to introduce the identity channel. 

Would you agree with this [~kchristidis] [~adecaro] [~mastersingh24] [~ales] [~binhn] [~marko.vukolic]?
Adding also [~jyellick]. 
Adding also @
;;;","23/Jan/20 4:01 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support specifying channel configuration during createChannel() with JSON,FAB-2995,15575,15490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,jimthematrix,jimthematrix,05/Apr/17 11:12 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,20/Apr/17 11:30 AM,,,,,DUPLICATE,,,fabric-sdk-node,,,,0,,,,,,,,design a JSON structure to allow the application developer to specify channel configurations to use in createChannel() calls,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3089,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp73:",,,,,,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"rename bccsp software ""keystore"" field to ""dir""",FAB-2996,15576,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,vpaprots@ca.ibm.com,smithbk,smithbk,06/Apr/17 12:17 AM,23/Jan/20 7:39 AM,28/Oct/23 2:59 AM,23/Jan/20 7:39 AM,,,,,Future,,,fabric-crypto,,,,0,,,,,,,,"A nit, but rename the software ""keystore"" field to ""dir"" to make it more intuitive, so that config looks like:
{code}
filekeystore:
    dir:
{code}

rather than

{code}
filekeystore:
     keystore:
{code}
",,Clayton Sims,elli-androulaki,smithbk,sykesm,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzwrxw:",,,,Unset,,Sprint 15 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,elli-androulaki,smithbk,sykesm,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 1:14 AM;elli-androulaki;Hi [~keithsmith] [~vpaprots], is this for v1? If so what is its status?
;;;","20/Apr/17 10:21 AM;Clayton Sims;We are working to contain scope for sprint 16.   In the scrum today this was not in spreadsheet because it was changed from bug to a feature.  what is ETA?  if not by sprint 16 can it be deferred?;;;","20/Apr/17 11:58 AM;vpaprots;Added http://gerrit.hyperledger.org/r/8281 Fairly superficial change from risk point of view.;;;","21/Apr/17 11:15 PM;smithbk;This is minor and can be confusing, but could be ignored.
Pushing to v1.1 for now;;;","23/Jan/20 7:39 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Security-sensitive system chaincodes should not be callable from the outside,FAB-2997,15577,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,bmos299,bmos299,06/Apr/17 12:25 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,20/Apr/17 6:06 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,Security,,,,,,,"I can query the chaincodes escc and vscc from the cli.  I suspect this is a security exposure. 
I opened this as medium, but it may be higher.  Murali suggest I assign to Alessandro.
",,aleksandar.likic@gmail.com,ales,angelo.decaro,bmos299,elli-androulaki,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5e7:",,,,,,Sprint 16 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,aleksandar.likic@gmail.com,ales,angelo.decaro,bmos299,elli-androulaki,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/17 4:48 PM;ales;I'm preparing 3 change sets to fix this issue:
1) prevent system security sensitive system chaincodes from being invoked directly through a proposal
2) prevent system security sensitive system chaincodes from being invoked through a cc2cc invocation
3) expose through the shim a method that reveals to the chaincode developer which path was followed for that invocation - direct invocation through a proposal, cc2cc, internal invocation from the peer; this way, the chaincode developer may choose to only allow certain kinds of invocation

[~muralisr] [~binhn]: any feedback?;;;","12/Apr/17 8:58 PM;angelo.decaro;[~ales][~ellaki][~muralisr][~binhn], I think this FAB is really critic and must be addressed asap. 
Point 3 is especially important for also for scc. For example, during invocation, cc2cc, etc, the peer invokes system chaincodes like LCCC to get information about the chaincode. In this case, LCCC should be able to recognize that the call is an internal one (coming from the peer) and it should just process it. 

[~ales], thanks for taking care of this.
;;;","18/Apr/17 5:07 PM;elli-androulaki;Hi CRs addressing items (1) and (2) are there:

https://gerrit.hyperledger.org/r/#/c/7853/
https://gerrit.hyperledger.org/r/#/c/7849/

I think the first two parts are important. The third one I believe we can add later without impacting the tests of the entire infrastructure? [~binhn] [~muralisr] [~ales] [~adc], thoughts?;;;","19/Apr/17 1:28 AM;elli-androulaki;So, after discussing with [~ales], we both agree that item (3) can be added later, and is associated more to the application level access control. Therefore this bit makes sense to be added with the invocation library post V1.0. 

Unless there are any objections, I will mark this item as ""done"" and create a new issue referring to work item (3) with fix-version v1.1.

[~binhn] [~muralisr] would you be fine with this?;;;","19/Apr/17 6:27 AM;muralisr;[~ellaki]  unless we have specific need, keeping is simple and not give too many choices makes sense. Plus 3 is quite invasive at this stage IMO. Better leave it for investigation in 1.1 I think. In 1.0, if user doesn't want SCC to be accessed, he flags it as as such wholesale.;;;","19/Apr/17 7:06 PM;elli-androulaki;Related CR: 
https://gerrit.hyperledger.org/r/#/c/7853/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
External database and data services in Fabric discussion,FAB-2998,15578,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,binhn,binhn,06/Apr/17 12:55 AM,23/Jul/20 5:44 PM,28/Oct/23 2:59 AM,23/Jan/20 4:01 AM,,,,,,,,,,,,0,stale-item,,,,,,,"Related [FAB-60|https://jira.hyperledger.org/browse/FAB-60]
 
Currently Fabric has a pluggable database used to cache the state of the ledger to provide quick queries. The built-in database is LevelDB, which provides limited queries based on keys. The framework enables plugging in a database by implementing some interfaces. An example provided is CouchDB, a JSON database that allows much richer queries using CouchDB native query language. However there are issues with this approach that we should discuss and find resolutions for.
# Once a chaincode uses native query language, wherever the chaincode runs, the supporting database must be present. It could force the entire network to install and support the database.
# The result of the query is not guaranteed to be stable between endorsement and validation/commit time, potentially causing phantom reads (e.g. item inserted by another tran that should have been considered in current tran).
# The database (like CouchDB) runs in a separate process from the Peer, so additional security considerations must be observed to satisfy the security policies configured on the blockchain network.

So the question is should we define a common abstraction layer (like JDBC) to allow portable OLTP in chaincodes, pick an existing ORM/DAL, or stay with what we have which is DB vendor specific?",,baohua,binhn,hengfun,king3000,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,FAB-6263,FAB-8031,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxp8v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,binhn,hengfun,king3000,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Apr/17 10:11 AM;baohua;In order to support chaincode upgrade better, and avoid those buggy risks, and even to simplify the DB drivers, I guess we need some abstraction layer on top of all those DBs.

Then, the question would be what kinds of DBs we plan to support in future, e.g., only No-SQL, or every type. 

Abstraction layer for only No-SQL is somehow easier to design than to support both from the beginning. I suppose there are some existing work we can refer to.

;;;","23/Jan/20 4:01 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Streamline Makefile,FAB-2999,15579,13519,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid,greg.haskins,greg.haskins,greg.haskins,06/Apr/17 2:21 AM,26/Aug/19 5:55 PM,28/Oct/23 2:59 AM,26/Aug/19 5:55 PM,,,,,Future,,,fabric-peer,,,,2,,,,,,,,"Right now ""make"" or ""make all"" do a whole bunch of things such as build both native/docker, run the unit-tests, run behave, run the linters, etc.

New users looking at the code tend to fire off ""make"".  Not only is it overkill, but often times behave tests are broken, etc.  We should improve the experience by making the default target do the bare minimum to build a release.  Since we are migrating to a docker oriented build/flow as our first class option, suggest the following:

* make/make-all: becomes equivalent to ""make docker""
* add ""make tests"": runs unit-tests and behave
* reduce the dependencies implied with ""make peer"": should only build the peer binary, not all the dependencies like the ccenv container.",,binhn,greg.haskins,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp93:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,greg.haskins,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/17 4:27 AM;binhn;+1
;;;","26/Aug/19 5:55 PM;mastersingh24;no longer valid ... targets have been changed and modified since this was created;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove reliance on vagrant baseimage,FAB-3000,15580,13519,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,06/Apr/17 2:24 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/May/17 5:04 AM,,,,,,,,,,,,0,,,,,,,,"Maintaining the vagrant-baseimage is difficult since we lack suitable automation facilities.  It has therefore become an impediment to producing new docker baseimages.  In addition, it is also less important these days since most of the heavy lifting is performed by the docker infrastructure.

Consider that when the baseimage for vagrant was created, we still needed to compile a bunch of basic tools (golang, protobufs rocksdb, etc).  This is no longer true: Some of the tools are now available in binary form, others are exectuted within docker, and others are no longer used (e.g. rocksdb).

Therefore, we can greatly simplify our processes by simply eliminating our reliance on a precompiled baseimage for vagrant.  Because of the dockerization effort, all we really need is a basic platform with make, git, golang-1.7, and docker.",,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp9b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 2:28 AM;greg.haskins;Fix submitted: https://gerrit.hyperledger.org/r/#/c/7709/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert behave tests to use $(DRUN),FAB-3001,15581,13519,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,greg.haskins,greg.haskins,06/Apr/17 2:33 AM,28/Oct/18 3:12 AM,28/Oct/23 2:59 AM,28/Oct/18 3:12 AM,,,,,,,,,,,,0,,,,,,,,,,greg.haskins,harrijk,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2870,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp9j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,harrijk,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/17 12:19 AM;rameshthoomu;[~greg.haskins] [~jeffgarratt] patch has been submitted and it's in review. https://gerrit.hyperledger.org/r/#/c/7485/

Below is the progress made so far.. 

1) Install required behave softwares in testenv docker image
2) Create docker-compose file to run behave tests in testenv docker container
3) able to run behave tests in docker container in x86 and power (ppc64le) but we see behave tests are failing.. log is captured here. http://www.heypasteit.com/clip/02M3O7 also error log is shown below


{code:java}
And the user ""dev0Org0"" collects signatures for ConfigUpdateEnvelope ""createChannelConfigUpdate1"" from peer orgs                                                                                                                                 # steps/bootstrap_impl.py:182
      | Organization |
      | peerOrg0     |
      | peerOrg1     |
    And the user ""dev0Org0"" creates a ConfigUpdate Tx ""configUpdateTx1"" using cert alias ""dev0Org0App1"" using signed ConfigUpdateEnvelope ""createChannelConfigUpdate1""                                                                               # steps/bootstrap_impl.py:194
    And the user ""dev0Org0"" using cert alias ""dev0Org0App1"" broadcasts ConfigUpdate Tx ""configUpdateTx1"" to orderer ""orderer0"" to create channel ""com.acme.blockchain.jdoe.Channel1""                                                                 # steps/bootstrap_impl.py:209
      Assertion Failed: counter = 0, expected 1
      Captured stdout:
      Will copy gensisiBlock over at this point 
      ipAddress in getABStubForComposeService == 192.168.32.2
      Returning GRPC for address: 192.168.32.2
      Got error: <_Rendezvous of RPC that terminated with (StatusCode.DEADLINE_EXCEEDED, Deadline Exceeded)>
      Got error
      Done
{code}

4) [~harrijk] observed issues while running this approach in z (s390x). [~harrijk] Could you please provide more info on the error what you are getting on z?
;;;","20/Apr/17 12:20 AM;rameshthoomu;I am unable to continue further as I see behave tests are failing.. Need inputs from [~jeffgarratt] on behave failures..;;;","20/Apr/17 5:15 AM;harrijk;For z Systems there is an issue with the boringssl pre-req.  Although I can successfully build the grpc module (a build is required to utilize an IBM customized big endian branch of boringssl), the ssl_channel_credentials function call fails.


{code:java}
testenv    |     And the user ""dev0Org0"" using cert alias ""dev0Org0App1"" broadcasts ConfigUpdate Tx ""configUpdateTx1"" to orderer ""orderer0"" to
 create channel ""com.acme.blockchain.jdoe.Channel1""                                                                 # steps/bootstrap_impl.py:
209
testenv    |       Traceback (most recent call last):
testenv    |         File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1456, in run
testenv    |           match.run(runner.context)
testenv    |         File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1903, in run
testenv    |           self.func(context, *args, **kwargs)
testenv    |         File ""steps/bootstrap_impl.py"", line 214, in step_impl
testenv    |           bootstrap_util.broadcastCreateChannelConfigTx(context=context,certAlias=certAlias, composeService=orderer, chainId=channelId, user=user, configTxEnvelope=configTxEnvelope)
testenv    |         File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bootstrap_util.py"", line 1108, in broadcastCreateChannelConfigTx
testenv    |           dataFunc=dataFunc)
testenv    |         File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 181, in broadcastMessages
testenv    |           abStub = self.getABStubForComposeService(context, composeService)
testenv    |         File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/orderer_util.py"", line 205, in getABStubForComposeService
testenv    |           channel = bdd_grpc_util.getGRPCChannel(ipAddress=ipAddress, port=7050, root_certificates=root_certificates, ssl_target_name_override=composeService)
testenv    |         File ""/opt/gopath/src/github.com/hyperledger/fabric/bddtests/steps/bdd_grpc_util.py"", line 22, in getGRPCChannel
testenv    |           creds = grpc.ssl_channel_credentials(root_certificates=root_certificates)
testenv    |       AttributeError: 'module' object has no attribute 'ssl_channel_credentials'
testenv    |
testenv    |       Captured stdout:
testenv    |       Will copy gensisiBlock over at this point
testenv    |       ipAddress in getABStubForComposeService == None
{code}


;;;","23/Jan/18 10:30 PM;rameshthoomu;Behave tests have been removed from fabric tests.. Keeping this in backlog;;;","28/Oct/18 3:12 AM;mastersingh24;behave is gone;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the e2e script,FAB-3002,15582,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nickgaski,bmos299,bmos299,06/Apr/17 3:09 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Apr/17 1:59 AM,,,,,v1.0.0,,,fabric-quality,,,,0,Documentation,,,,,,,"The script.sh in /hyperledger/fabric/examples/e2e_cli/scripts needs to take input parms properly (channel name) and add an option for a keepalive timer for the cli container.  Endusers have run the script and then wanted to review the scriptouput and logs in the cli container.  However, it immediately ends after script completion. ",,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx31j:",,,,,,Sprint 15 - Quality,Sprint 16 - Quality,Sprint 17 - Quality,,,,,,,,,,,,,,,,,,,,,,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dynamic log level adjustment does not work for most of the components ,FAB-3005,15585,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,Nishi,Nishi,06/Apr/17 4:44 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,17/Apr/17 11:17 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"When logging level was dynamically updated on docker container on individual peers on following components
{code}
 peer:       warning
    node:       info
    network:    warning
    version:    warning
    protoutils: debug
    error:      warning
    msp:        warning
{code}

{code}
using: 
docker exec -it <peer> bash
peer logging setlevel node INFO
peer logging getlevel node
{code}
it does display updated loglevel on the command inside docker exe container - but no changes happen in actual logging for all components during ""docker logs -f <peer>"", except for component 'msp' where updated log levels reflected in peer loggging.",,dbshah,denyeart,mrshah-ibm,muralisr,Nishi,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxp9z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dbshah,denyeart,mrshah-ibm,muralisr,Nishi,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/17 11:25 PM;mrshah-ibm;[~dbshah] reported the same!;;;","12/Apr/17 12:04 PM;denyeart;[~wlahti] Can you assess this one and provide your recommendation?;;;","12/Apr/17 8:55 PM;wlahti;I've started working on this in the context of https://jira.hyperledger.org/browse/FAB-3009. The recent flogging refactor changed the logic the peer used to read variables from core.yaml, resulting in all but msp using the default level except when CORE_LOGGING_LEVEL is provided. The plan is to clean up the logging section of core.yaml to have one primary 'peer' parameter with parameters for a number of subcomponents (e.g. gossip, ledger, msp).;;;","13/Apr/17 1:47 AM;wlahti;The inclusion of the core.yaml logging section is a bit misleading in regards to what this bug is really reporting. I chatted with [~Nishi] and clarified that this JIRA really is intended to address using {code}peer logging setlevel{code} to dynamically set log levels for modules. I pointed out that the settings currently in core.yaml don't map to actual logger modules so I don't think setting the level for any of those would make a noticeable difference in the logs. I have requested that the command is tested using modules such as msp, gossip/discovery#<peer-address> that generate a lot of logging messages when set to debug. ;;;","13/Apr/17 3:05 PM;muralisr;[~wlahti] [~2020Nishi] need a resolution on this. Looks like this can be closed ? ;;;","17/Apr/17 11:12 PM;dbshah;I was trying the wrong modules it seems. Tried the following and it worked.

```
root@fabric-peer-1a:/# peer logging getlevel gossip/discovery#fabric-peer-1a:5011
2017-04-17 14:07:23.485 UTC [logging] SetModuleLevel -> INFO 001 Module 'error' logger enabled for log level: WARNING
2017-04-17 14:07:23.487 UTC [loggingCmd] getLevel -> INFO 002 Current log level for peer module 'gossip/discovery#fabric-peer-1a:5011': INFO
2017-04-17 14:07:23.487 UTC [main] main -> INFO 003 Exiting.....
root@fabric-peer-1a:/# peer logging getlevel gossip/discovery#fabric-peer-1a:5011^C
root@fabric-peer-1a:/# peer logging setlevel gossip/discovery#fabric-peer-1a:5011 debug
2017-04-17 14:07:35.502 UTC [logging] SetModuleLevel -> INFO 001 Module 'error' logger enabled for log level: WARNING
2017-04-17 14:07:35.504 UTC [loggingCmd] setLevel -> INFO 002 Log level set for peer module 'gossip/discovery#fabric-peer-1a:5011': DEBUG
2017-04-17 14:07:35.504 UTC [main] main -> INFO 003 Exiting.....
```

In the peer logs can see the logging level change:
```
2017-04-17 14:07:35.503 UTC [logging] SetModuleLevel -> INFO 05d Module 'gossip/discovery#fabric-peer-1a:5011' logger enabled for log level: DEBUG
2017-04-17 14:07:38.815 UTC [gossip/discovery#fabric-peer-1a:5011] periodicalSendAlive -> DEBU 05e Sleeping 5s
2017-04-17 14:07:38.820 UTC [gossip/discovery#fabric-peer-1a:5011] handleMsgFromComm -> DEBU 05f Got message: GossipMessage: tag:EMPTY alive_msg:<membership:<pki_id:""*\247\016\""x\272\006q\377\341\362\270\000^\3343\345\330H\2115\250\010\327\016\336\373-7\203\033\211"" > timestamp:<inc_number:1492096245365249509 seq_num:239236 > > , Envelope: 56 bytes, Signature: 70 bytes Secret payload: 21 bytes, Secret Signature: 70 bytes
```

```
root@fabric-peer-1a:/# peer logging setlevel chaincode warning
2017-04-17 14:10:53.048 UTC [logging] SetModuleLevel -> INFO 001 Module 'error' logger enabled for log level: WARNING
2017-04-17 14:10:53.050 UTC [loggingCmd] setLevel -> INFO 002 Log level set for peer module 'chaincode': WARNING
2017-04-17 14:10:53.050 UTC [main] main -> INFO 003 Exiting.....
```

peer logs:
```
2017-04-17 14:10:53.049 UTC [logging] SetModuleLevel -> INFO 41a Module 'chaincode' logger enabled for log level: WARNING
```


;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up core.yaml logging,FAB-3009,15589,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,bmos299,bmos299,06/Apr/17 6:17 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,20/Apr/17 7:57 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"In core.yaml the LOGGING section needs cleaned up.
{code}
##############################################################################
#
#    LOGGING section
#
###############################################################################
logging:

    # Default logging levels are specified here for each of the three peer
    # commands 'node', 'network' and 'chaincode'. For commands that have
    # subcommands, the defaults also apply to all subcommands of the command.
    # Valid logging levels are case-insensitive strings chosen from

    #     CRITICAL | ERROR | WARNING | NOTICE | INFO | DEBUG

    # The logging levels specified here can be overridden in various ways,
    # listed below from strongest to weakest:
    #
    # 1. The --logging-level=<level> command line option overrides all other
    #    specifications.
    #
    # 2. The environment variable CORE_LOGGING_LEVEL otherwise applies to
    #    all peer commands if defined as a non-empty string.
    #
    # 3. The environment variables CORE_LOGGING_[NODE|NETWORK|CHAINCODE]
    #    otherwise apply to the respective peer commands if defined as non-empty
    #    strings.
    #
    # 4. Otherwise, the specifications below apply.
    #
    # Developers: Please see fabric/docs/Setup/logging-control.md for more
    # options.
    peer:       warning
    node:       info
    network:    warning
    version:    warning
    protoutils: debug
    error:      warning
    msp:        warning

    format: '%{color}%{time:2006-01-02 15:04:05.000 MST} [%{module}] %{shortfunc} -> %{level:.4s} %{id:03x}%{color:reset} %{message}'
{code}

Will and I chatted and he will work on this. 
",,bmos299,dbshah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpan:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,dbshah,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 12:43 AM;wlahti;This item will be used to remove logging parameters that are no longer used (e.g. network, version, and protoutils) and add new ones for specific components (e.g. ledger, gossip).;;;","13/Apr/17 12:04 AM;wlahti;Work in progress... here are the modules I have defined in core.yaml at this time:

{code}
     # Default for all modules running within the scope of a peer
    peer:       info

    # Override levels for various 'peer' modules
    gossip:     info
    ledger:     info
    msp:        warning

    # Error handling framework log level - when set to DEBUG, a callstack will
    # be appended to all errors generated using the fabric/core/errors package
    error:      warning
{code};;;","13/Apr/17 1:04 AM;wlahti;Submitted for review: https://gerrit.hyperledger.org/r/#/c/7977/

The CR removes unused parameters, adds new parameters for the 'gossip' and 'ledger' modules (that will be utilized in a future
CR), and updates the comments (which were outdated). It also ensures that 'logging.peer' is used to set the default log level when the
CORE_LOGGING_LEVEL environment variable is not set.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ability to wrap callstack from lower level error,FAB-3012,15592,15565,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,06/Apr/17 9:18 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Apr/17 4:59 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"At times, it will be beneficial to have the ability to define a new component/reason code and error message while retaining the callstack from the lower level error. The callstack for the error and wrapped error should always be appended when err.Error() is called.

",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpav:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 12:17 AM;wlahti;https://gerrit.hyperledger.org/r/#/c/7745/ (awaiting code review) will address this JIRA item. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtx tool should support specifying yaml file path,FAB-3014,15594,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hanwei,baohua,baohua,06/Apr/17 4:51 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,12/Apr/17 8:02 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Currently, we cannot specify the configtx.yaml file path for the tool.

It would be more flexible to use if can support as cmd parameter.",,baohua,hanwei,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpbb:",,,,Unset,,Sprint 15 - Endorser,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,hanwei,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/17 7:24 PM;hanwei;https://gerrit.hyperledger.org/r/#/c/7851/;;;","12/Apr/17 12:32 PM;hanwei;I have finished the change. The command ""peer node start""，""peer chain create"" , ""orderclient"", ""configtxgen""  add the  configtx.yaml file path as cmd parameter. And the orderer process starting wil get the  configtx.yaml file path from “orderer/orderer.yaml” file.;;;","13/Apr/17 3:00 PM;muralisr;[~baohua] [~hanwei] Given the nature of this change can we move the release to 1.1 please ?;;;","13/Apr/17 3:04 PM;baohua;Srinivasan Muralidharan 

I think both 1.0 or 1.1 should be OK. Hopefully we catch the 1.0 release date :);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
suggest return more detailed error message when connecting with event hub,FAB-3015,15595,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,hanhzf,hanhzf,hanhzf,06/Apr/17 9:27 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,16/Apr/17 11:53 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,Usability,,,,,,,"Such as when peer was started with tls enabled, while client try to connect event hub without tls cert or a invalid tls cert, a more detailed error message should be returned. 

The current code just returns the message that ""Could not create client conn to peer address"",  I suggest we should also return the error message back to client. as below:

```
func (ec *EventsClient) Start() error {
	conn, err := newEventsClientConnectionWithAddress(ec.peerAddress)
	if err != nil {
                {color:#d04437}-return fmt.Errorf(""Could not create client conn to %s:%s"", ec.peerAddress, err)-{color}
		{color:#59afe1}return fmt.Errorf(""Could not create client conn to %s:%s"", ec.peerAddress, err){color}
	}
```

{color:#d04437}-RED-{color} code are original code.
{color:#59afe1}BLUE{color} code are fixes.",,hanhzf,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,7200,3600,,0%,7200,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpbj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,hanhzf,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/17 9:43 PM;hanhzf;change-set submitted: https://gerrit.hyperledger.org/r/#/c/7785/;;;","13/Apr/17 2:58 PM;muralisr;[~hanhzf] thanks Frank. Have reviewed and +2ed in Gerrit. Once merged can you close this please ?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add ability to install chaincode once, and instantiate multiple times",FAB-3016,15596,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,muralisr,sstone1,sstone1,06/Apr/17 10:37 PM,23/Jan/20 4:02 AM,28/Oct/23 2:59 AM,23/Jan/20 4:02 AM,,,,,,,,,,,,0,stale-item,,,,,,,"Composer includes a generic chaincode that is used for the deployment of a all business networks.
The business network definition that contains the model files, script files, and ACL rules (which describe a business network), are passed into the generic chaincode and stored in the world state.

Currently for v1.0 we have to install and instantiate the generic chaincode for every business network with a chaincode ID that matches the business network ID (for example org.acme.carauction).

It would be ideal if we could install the generic chaincode once, with an ID of something like hyperledger.composer, and then instantiate it multiple times within the same channel or across multiple channels with the business network ID. The business network definition is passed in via the chaincode Init() function during instantiate.

For example:
# Install hyperledger.composer chaincode onto each peer.
# Instantiate car auction business network as org.acme.carauction by instantiating hyperledger.composer chaincode with the car auction business network definition.
# Instantiate truck auction business network as org.acme.truckauction by instantiating hyperledger.composer chaincode with the truck auction business network definition.",,jiangyaoguo,muralisr,sstone1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5o7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jiangyaoguo,muralisr,sstone1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Apr/17 12:33 AM;muralisr;This was one of the generalizations that was earmarked for the ""instantiate"" work with the hint of that possible generalization in that name; currently we ""instantiate"" a singleton.  Need to think through this.

[~binhn]  [~ChristopherFerris]  [~greg.haskins]  [~mastersingh24]  [~ibmmark];;;","23/Jan/20 4:02 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Finalize ledger backup/restore guidance and test,FAB-3017,15597,,Test Task,In Progress,FAB,Fabric,software,denyeart,,,High,,satoshi007,denyeart,denyeart,06/Apr/17 10:43 PM,25/Jun/21 8:44 AM,28/Oct/23 2:59 AM,,,,,,v2.1.0,,,fabric-ledger,,,,3,,,,,,,,"There is no need to backup/recover a peer's ledger - peers can be brought up with no ledger, re-join channels, and automatically receive ledger blocks via state transfer. That being said, some organizations will want to be more self-reliant or will want to expedite peer introduction or recovery, and this can be achieved by backing up and restoring the ledger.

The procedure for taking the ledger backup is provided in https://docs.google.com/document/d/1dEhUpMcqOYfOngDvSlyXL6NIBuTKmhP5s0fr_--U_OA/edit

This item will
 - finalize peer backup/restore guidance
 - add some operations documentation
 - make any tweaks that are needed to simplify the peer introduction/restore/recovery procedures
 - review automated test scenarios and extend if any gaps are found
 - highlight any system tests that are required

Sub-tasks can be added for any individual changes to fabric.

Questions:
 - Should /chains and /ledgerProvider always be backed up as a unit? If so, these should be located in a common directory (apart from statedb/historydb) to simplify the procedure.
 - Or could /ledgerProvider be backed up and recovered individually? Would this be sufficient to automatically 're-join' channels and start getting blocks via state tranfer?
 - State db and history db and block index can optionally be backed up as well. If they are missing or not at the expected height (savepoint), peer will catch them up automatically from block storage before becoming available for transaction simulation. Question - what happens if state db is recovered from a higher height than block storage?",,amane.yamamoto,AnkurBassi,daijianw,denyeart,grapebaba,Hangyu_FJH,joaquimpedrooliveira,manish-sethi,melwindmello,nemoto,pdina,rhegde,seokm0,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3364,FAB-10141,FAB-10660,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-758,,,No,,,,,,"1|i00wur:d",,,,Unset,,Sprint 15  - Ledger,Sprint 16  - Ledger,v2.x,,,,,,,,,,,Unset,,,,,,Unset,,Unset,,,amane.yamamoto,AnkurBassi,daijianw,denyeart,grapebaba,Hangyu_FJH,joaquimpedrooliveira,manish-sethi,melwindmello,nemoto,pdina,rhegde,seokm0,yoheiueda,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/17 8:43 PM;manish-sethi;Live backup of goleveldb using filesystem level backup tools is not a recommended way. Because, there won't be any guarantees that incremental live copy of the db dir will result into a consistent backup. There is an outstanding enhancement request for supporting backup in goleveldb (https://github.com/syndtr/goleveldb/issues/135).
So, currently the only option to get a reliable backup of goleveldb is to stop the db and then take backup

*So, it is better to just take the live backup of /chains folder using backup tool and rebuild /ledgerProvider, statedb and historydb.*

In the case of couchdb being as a statedb, one may replicate couchdb externally and we could think of enabling this alongwith the backed up /chains. However, we need to tackle
the scenario where the couchdb may be ahead of a chain (if this is behind, the peer should be able to bring it upto the level of /chain). Also, the biggest issue would be to ensure that by mistake operator does not endup mixing the /chains with wrong couchdb. May be, we could store hash of the block alongwith the save point but none of these kind of mechanisms may guarantee about the data sanity.

;;;","12/Apr/17 10:31 PM;manish-sethi;In order to re-construct whole chains from the /chains folder, this would require to write a function that reconstructs /ledgerProvider, /statedb and /historydb from /chains folder. In the function, this should first open (and close) each of the ledger present in the /chains but missing in /lederProvider. Open of a ledger would cause, to build the corresponding statedb and historydb (if enabled). Finally, it should add entry into /ledgerProvider. A crash during this process should not affect the peer state because, after the restart of the process, it would simply be able to resume (as we would add entry into the /ledgerProvider as a last step)

I think that ideally, this function should be invoked from command line without start of the peer so as to have this as a separate utility. For the first cut, we can invoke this function from within `/core/ledger/kvledger/kv_ledger_provider.go: NewProvider()` function. However, this may increase the time of the peer start for the first time (when started with imported ""/chains"").

In a different scenario where in a new sets of chains are allowed to be copied (in addition to existing chains), this function would be able to detect the newer chains under /chains folder and perform the above for the newer chains.

Let me know if this looks a reasonable strategy.
;;;","14/Apr/17 12:52 AM;denyeart;Overall I like the approach [~manish-sethi], but we cannot add significant new function in 1.0 at this point, such as /ledgerProvider recovery.

Let's assume *offline* backup/restore only for v1.0 (and perhaps for cases where file system backup via snapshot is in place, need to check if goleveldb is ok with that).
* Can support with current v1.0 code
* Backup /chains and /ledgerProvider directories together. Optionally backup /index directory as well. To make this simple, /ledgerProvider should be moved into top level /chains directory (peer of /index), so that a single directory can be backed up.
* Can optionally backup state db and history db.  Peer startup recovery currently works if these are missing, partially synced, or fully synced with chains. Need to test/handle scenario where state/history db is ahead of chain.

FUTURE item post-v1.0: Ability to backup only /chains/chains directory or /chains/ledgerProvider directory.
* If /chains/chains was backed up, reconstruct /chains/ledgerProvider. This option provides an online backup option, as described in prior comment.
* If /chains/ledgerProvider was backed up, automatically re-join all the previously joined channels, get blocks from orderering service (as normal) or peers (state transfer). This option provides an option to backup channel memberships for easy recovery, with a very small footprint.  Otherwise peer would have to manually re-join potentially 1000s of channels.

FUTURE items can be deferred from 1.0, and design can be re-visited post-1.0.  The above is initial thoughts only.

;;;","20/Apr/17 2:10 AM;manish-sethi;*Ledger backup*
It is not required to backup the ledger data of a peer. This is because, even in the worst case of catastrophic failure of a peer (e.g, a disk failure) , the peer can be brought up with no ledger at all. The peer can then re-join the desired channels and as a result, the peer will automatically create a ledger for each of the channels and eventually will receive the blocks via regular block transfer mechanism from other peers in the channel.

Still, some organizations may want to be more self-reliant and hence may want to take backup of their ledger data so as to be able to recover from catastrophic failures and resume from thereon. In addition, ledger data backups may help to expedite the addition of a new peer in the channel which can be achieved by backing up the ledger data from one peer and starting the new peer with the backed up ledger data.

In order to back up the ledger data of a peer, perform the following steps.

1. Stop the peer
2. Backup the folder `<peer.fileSystemPath>`/ledgersData.
`<peer.fileSystemPath>` refers to the value of the property specified in the configurations (core.yaml) - default value of this property is `/var/hyperledger/production`

In the step 2 above, some of the sub-folders under `<peer.fileSystemPath>`/ledgersData can be skipped while backing up the ledger data.
These sub-folders include `stateLeveldb`, `historyLeveldb`, `chains/index`. Skipping these folders reduces the storgae demand for the backup however, at the same time, the peer recovery from the backedup data may take more time. This is cause by the fact that the information in these folders (i.e., the state db, history db, and indexes on blocks) is re-constructed when the peer starts.

In order to restore the ledger data to a fresh peer, perform the following steps.

1. Copy the backed-up folder at `<peer.fileSystemPath>`/ledgersData
2. Start the peer
;;;","24/Apr/17 11:12 AM;denyeart;There is not yet a good place in Operations Guide for the backup/restore doc.  I have created a follow-on Jira item for documentation: FAB-3364.

FAB-3364 has updated guidance, while this jira (FAB-3017) focuses on test.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fail to run chaincode_example05,FAB-3019,15599,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,daijianw,daijianw,06/Apr/17 10:55 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/May/17 8:45 AM,v1.0.0,v1.0.0-alpha1,,,DUPLICATE,,,fabric-samples,,,,0,,,,,,,,"Based on https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst to setup network,  created the channel ""mychannel"",  joined the  channel. Install and instantiate chaincode_example02 on all peers, it works fine.  But after install and instantiate chaincode_example05, it failed to do query operation.

1)The command to install the chaincode ""chaincode_example05""
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode install -n mycc2 -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example05

2)The command to instantiate the chaincode ""chaincode_example05""
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode instantiate -o orderer0:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem  -n mycc2 -v 1.0 -c '{""Args"":[""init"",""sum"",""0""]}'


3)The command to query the chaincode ""chaincode_example05""
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode query -C mychannel -n mycc2 -c '{""Args"":[""query"",""github.com/hyperledger/fabric/core/example/chaincode/chaincode_example02"",""sum""]}'


4)The error output of the query command
2017-04-05 21:07:54.984 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-04-05 21:07:54.995 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-04-05 21:07:54.995 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-04-05 21:07:54.997 UTC [msp] Sign -> DEBU 004 Sign: plaintext: 0A90050A5A080322096D796368616E6E...655F6578616D706C6530320A0373756D 
2017-04-05 21:07:54.997 UTC [msp] Sign -> DEBU 005 Sign: digest: F72CE08E132719D2B9F105CAC15810A873D48CBD19307A0A81809BE0AB0D3C1C 
Error: Error endorsing query: rpc error: code = 2 desc = Error executing chaincode: Transaction returned with failure: Failed to find ledger for called channel hyperledger/fabric/core/example/chaincode/chaincode_example02

5)The output of container ""dev-peer1-mycc2-1.0""

_2017-04-05 21:07:55.031 UTC [shim] func1 -> DEBU 01a [b41c6178]Received message TRANSACTION from shim
2017-04-05 21:07:55.033 UTC [shim] handleMessage -> DEBU 01b [b41c6178]Handling ChaincodeMessage of type: TRANSACTION(state:ready)
2017-04-05 21:07:55.033 UTC [shim] beforeTransaction -> DEBU 01c [b41c6178]Received TRANSACTION, invoking transaction on chaincode(Src:ready, Dst:ready)
2017-04-05 21:07:55.035 UTC [shim] handleInvokeChaincode -> DEBU 01d [b41c6178]Sending INVOKE_CHAINCODE
2017-04-05 21:07:55.042 UTC [shim] func1 -> DEBU 01e [b41c6178]Received message ERROR from shim
2017-04-05 21:07:55.042 UTC [shim] handleMessage -> DEBU 01f [b41c6178]Handling ChaincodeMessage of type: ERROR(state:ready)
2017-04-05 21:07:55.043 UTC [shim] sendChannel -> DEBU 020 [b41c6178]before send
2017-04-05 21:07:55.044 UTC [shim] sendChannel -> DEBU 021 [b41c6178]after send
2017-04-05 21:07:55.044 UTC [shim] afterError -> DEBU 022 [b41c6178]Error received from validator ERROR, communicated(state:ready)
2017-04-05 21:07:55.044 UTC [shim] handleInvokeChaincode -> ERRO 023 [b41c6178]Received ERROR.
2017-04-05 21:07:55.044 UTC [shim] func1 -> DEBU 024 [b41c6178]Transaction completed. Sending COMPLETED
2017-04-05 21:07:55.044 UTC [shim] func1 -> DEBU 025 [b41c6178]Move state message COMPLETED
2017-04-05 21:07:55.044 UTC [shim] handleMessage -> DEBU 026 [b41c6178]Handling ChaincodeMessage of type: COMPLETED(state:ready)
2017-04-05 21:07:55.044 UTC [shim] func1 -> DEBU 027 [b41c6178]send state message COMPLETED_",1.0.0.-alpha,daijianw,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpc7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,daijianw,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 6:35 AM;yuki-kon;Do you still have this problem? Chaincode_example05 was modified by CR7595 (https://gerrit.hyperledger.org/r/#/c/7595/).
Chaincode_example05 works well in my environment with the following steps.

1)Based on https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst, run e2e test.
$ ./network_setup.sh up

2)Based on https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/end-to-end.rst#modify-the-docker-compose-file, open the docker-compose file and comment out the command to run script.sh for manual operation.

3)Restart cli container and enter to it.
$ docker-compose up -d cli
$ docker exec -it cli bash

4)Install the chaincode ""chaincode_example05"" on Peer1
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode install -n mycc2 -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example05

5)Instantiate the chaincode ""chaincode_example05"" on Peer1
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode instantiate -o orderer0:7050 --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem -C mychannel -n mycc2 -v 1.0 -c '{""Args"":[""init"",""sum"",""0""]}'

6)Install the chaincode ""chaincode_example02"" on Peer1. # chaincode_expample02 is not installed by network_setup.sh
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode install -n mycc -v 1.0 -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02

7)Query the chaincode ""chaincode_example05"" on Peer1
$ CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig CORE_PEER_ADDRESS=peer1:7051 CORE_PEER_LOCALMSPID=""Org0MSP"" CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer1/localMspConfig/cacerts/peerOrg0.pem peer chaincode query -C mychannel -n mycc2 -c '{""Args"":[""query"",""mycc"",""sum""]}'
;;;","26/Apr/17 3:03 PM;daijianw;Hi Yuki,

Thanks. Yes, it works now, with the patch from CR7595 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update ledger defaults for orderer,FAB-3025,15605,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,07/Apr/17 12:13 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,29/Apr/17 9:32 PM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,common-components,,,,,,,`orderer.yaml` should default to the file ledger and have it stored in a directory outside the `/tmp` path,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3040,,,,,,,,,"1|hzx4gv:",,,,Unset,,Sprint 16 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 11:52 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/8357/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
marbles02 example fails @ chaincode instantiation time,FAB-3029,15609,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,Nishi,Nishi,07/Apr/17 5:56 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/Apr/17 2:46 AM,v1.0.0,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"When marbles02 from github.com/hyperledger/fabric/examples/chaincode/go/marbles02 was used inside e2e CLI test.

It failed on commit level: *cacb292921553900ea808344599b9914632bf1d3*

With following error message during chaincode instantiation on imports line 84:

{code}

2017-04-06 20:45:24.599 UTC [msp] Sign -> DEBU 006 Sign: digest: 8D7397B62A8048A28269CE494361FC10E918CCC9323E42D1390855E1BDEE2F4C 
Error: Error endorsing chaincode: rpc error: code = 2 desc = Error starting container: Failed to generate platform-specific docker build: Error returned from build: 1 ""chaincode/input/src/github.com/hyperledger/fabric/examples/chaincode/go/marbles02/marbles_chaincode.go:84:2: cannot find package ""github.com/golang/protobuf/ptypes"" in any of:
	/opt/go/src/github.com/golang/protobuf/ptypes (from $GOROOT)
	/chaincode/input/src/github.com/golang/protobuf/ptypes (from $GOPATH)
	/opt/gopath/src/github.com/golang/protobuf/ptypes

{code}",,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx58f:",,,,,,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 1:21 AM;Nishi;Verified marbles02 chaincode can be installed, instantiated, invoked and queried successfully on commit level: *7984725990fd8227124ab46cb27bed127e699cfc*
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create a package interface to encapsulate package logic,FAB-3030,15610,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,07/Apr/17 5:58 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/Apr/17 2:20 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"We have now two ways to install a chaincode on the FS 
* raw ChaincodeDeploymentSpec (current model)
* SignedChaincodeDeploymentSpec (under implementation)

This task will introduce an interface to hide the implementation so higher level components such as the LCCC can use either seamlessly. 

This task also moves to use the current model (raw ChaincodeDeploymentSpec) implement the interface to be used in the LCCC.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpe7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Setup CI environment for fabric-sdk-go project,FAB-3031,15611,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,07/Apr/17 6:56 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/Apr/17 11:52 PM,,,,,,,,,,,,0,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpef:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Apr/17 11:52 PM;rameshthoomu;Submitted patch and merged;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prevent recursion in client.go in delivery service when used recursively,FAB-3034,15614,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,07/Apr/17 4:20 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 5:04 PM,v1.0.0,,,,,,,fabric-peer,,,,0,,,,,,,,"The client in the delivery service package encapsulates a delivery stream from the peer to the ordering service. It accepts a function in construction time that is invoked upon each successful (re)connection to the ordering service. The purpose of this design, is to make the peer send a SeekInfo message to the orderer, if it disconnects (or, if the orderer crashes and the peer connects to a new orderer). This function may also use the client *itself*.

There is a bug that prevented the usage of the client in the function, because the connection reference and the stream reference were updated only after a successful invocation of the function, and thus- caused recursive reconnection attempts.",,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpev:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 4:59 PM;muralisr;[~yacovm] status please ? I thought this was fixed, no ?;;;","13/Apr/17 5:05 PM;yacovm;yes, thanks for reminding me!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Decouple the orderer part code to separate project fabric-orderer,FAB-3035,15615,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,baohua,baohua,baohua,07/Apr/17 8:05 PM,23/Jan/20 4:02 AM,28/Oct/23 2:59 AM,23/Jan/20 4:02 AM,,,,,Future,,,fabric-orderer,,,,0,stale-item,,,,,,,"Just like the fabric-ca project, the fabric-orderer is individual from peer nodes in functionalities.

Using a separate project will improve maintenance with more pluggable consensus implementations, and the deployment architecture would be more clear.

I temporarily mark this to target 1.1, and we can certainly discuss if this would be included in 1.0 release.

Thanks!",,baohua,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpf3:",,,,Unset,,Sprint 15 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Apr/17 10:10 PM;yacovm;I don't think that pluggable consensus is good enough of a reason to decouple the orderer from the fabric project.
I'd argue the opposite- if you want pluggable consensus, implement an interface that the fabric project declares, and then you could import fabric as a dependency and simply run your orderer with the consensus algorithm of your choice behind the scenes. 

Or, alternatively - implement an interface, and have fabric orderer use this consensus implementation as a dependency?

We have lots of common code between the peer and the orderer, and both are written in go.
I'd say... decoupling them is error-prone and will be hard to maintain. ;;;","07/Apr/17 10:32 PM;baohua;Thanks for the comments, yacov!

Actually, from the design, the orderer should mainly focus on consensus, rather than process txs, hence there would be lots of fabric code not be used in orderer.

The decoupling idea is from functionality. I have to admit that the existing orderer code and fabric peer code are coupled to each other too much, which makes it a little difficult to clear the structure right now.

But this issue would start the discussion and reminder the further design and implementation. How to make the code reusable, how to make the code structure much easier to follow and maintain.

Thanks!;;;","23/Jan/20 4:02 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric CA and cert verification - certificate pinning,FAB-3036,15616,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,troyronda,troyronda,07/Apr/17 9:39 PM,23/Jan/20 4:02 AM,28/Oct/23 2:59 AM,23/Jan/20 4:02 AM,,,,,,,,,,,,0,stale-item,,,,,,,"As an organization that participates in a channel, I would like the channel to independently confirm the validity certificates issued by a Fabric CA so that I can reduce my trust requirements on the CA.

Currently an organization would need to run its own Fabric CA to control the issuance of certificates. This requirement adds complexity for that organization's participation. There is also a level of sophistication needed to securely run a CA. To mitigate, it would be good to allow certs to be issued by a provider who has the operational controls for issuing certificates and operating a CA, but also allow an organization to independently confirm the validity of those issued certificates (if they wish).

*Goals*
 * Validate certificate, as usual, against trust root.
 * Check certificate fingerprint against organization-provided & controlled list (when the organization has opted-in).

*General background information*
 * OWASP on [Certificate and Public Key Pinning|https://www.owasp.org/index.php/Certificate_and_Public_Key_Pinning]

*Example Implementations*

The implementation considerations for this ticket have similarities to implementing a revocation list. However, we should try to reduce complexity for the organization where possible.
 * +Certificate fingerprints hosted by organization+. Have endorsers pull a certificate fingerprint list from a registered domain of that participant. The channel needs to be configured with the root CA list & the optional endpoints of the fingerprint list for each root CA.
 ** Note: with this mechanism, the fingerprints can only be checked _at endorsement time,_ otherwise there could be non-determinism on commit. FAB-3678 contains a related discussion.
 ** It is possible that two endorsers have different fingerprint lists (fingerprint list host was down, fingerprint list changed between calls, ...). In these situations, the client could retry if they have sufficient knowledge of the error.
 ** Seems plausible that this mechanism could be contained into an Auth Handler (FAB-4207)
 * +Load certificate fingerprint list into the channel+. The participant needs to control a key that signs their fingerprint list. The channel needs to be configured with the root CA list & the optional signing keys of the fingerprint list for each root CA. This implementations similar to revocation lists.
 ** This mechanism avoids the _endorsement time_ limitation above, but increases the complexity on the participant. In fact, this approach has some of the complexities of running the CA software ... but still allows for dual controls (the CA issues the cert & the org issues the list).
 ** Need to deal with key rollover and loses.",,smithbk,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3678,FAB-4207,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpfb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,smithbk,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jul/17 6:32 PM;smithbk;The 2nd example implementation seems to me the best direction and the most consistent.
That is, we keep the certificate fingerprint list as the white list in the same way that the CRL is kept as a black list.
I'll refer to it as the CAL (Certificate Approval List).
I don't believe this needs to increase the complexity for the participant, but rather we should provide a CLI way to
easily manage the CAL, and while we're at it, to manage the CRL also because there is a lot of synergy between the two.
I think it would make sense to create a *fabric-client* CLI to support this management.
If fabric-client is written in golang, we could leverage a lot of existing code.;;;","23/Jan/20 4:02 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
event listener readme documentation for v1.0,FAB-3037,15617,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,muralisr,scottz,scottz,07/Apr/17 10:13 PM,30/Jul/19 11:59 AM,28/Oct/23 2:59 AM,30/Jul/19 11:59 AM,v1.0.0,v1.0.0-alpha1,v1.1.0,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The fabric/examples/event/block-listener/README seems to compile in v1.0, but the README was not updated from v0.6 to v1.0. 

It should describe how it was implemented and how it can be used. Describe the available types or classes of events (could one monitor all failures on a channel? without knowing each transaction?), and when and where they are raised (orderer? peer? which components?). Does fabric guarantee an event for every proposal received? every proposal not Nacked? every acknowledged transaction? every transaction delivered to peer?

And we could use an overview description somewhere in the project documentation fabric/docs/source/.

If we don't know, or if these operational capabilities are not available, then we can create other jira issues to add them.",,mastersingh24,scottz,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3659,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpfj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,scottz,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/May/17 10:29 PM;scottz;I would expect that the details being requested of this fabric/examples/event/block-listener/README will require the expertise of an architect or the developer that touched the code in v1.0. A doc writer may be able to use their input to provide an overview elsewhere in the fabric/docs/source/.;;;","30/Jul/19 11:59 AM;mastersingh24;No activity in a year or more;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend the definition of OU to include certification path,FAB-3039,15619,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,08/Apr/17 1:39 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,10/Apr/17 10:30 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"Part of FAB-2400.

This item relates to the extension of the OU definition inside an MSP and outside an MSP to  bind it to the specific chain of certificate authorities that handle the OU.
This item consists of three sub-tasks:

A) Define FabricOUIdentifier as an additionally defined message in common package defined as follows
   - byte[]/string certifiersIdentiifer // hash of certificate chain to the root
   - string OrganizationalUnit // current organizational unit identifier

B) Update the MSP GetOrganizationalUnit function implementation to return FabricOUIdentifiers. Computation of the FabricOUIdentifier.certifiersIdentifier is to be computed as follows: 
    - Get certificate's certification chain to the top (created at validation time), let it be CertChain. 
    - Compute the hash (CertChain), say HCertChain
    - Set FabricOUIdentifier.certifiersIdentifier to HCertChain

C) Modify MSP Principals for OU to accommodate FabricOUIdentifiers.
",,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxp8n:",,,,Unset,,Sprint 15 - Crypto,Sprint 16 - Crypto,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 3:47 AM;ChristopherFerris;Link to Gerrit CR that closed this? [~adc];;;","18/Apr/17 4:40 PM;elli-androulaki;Hi [~ChristopherFerris], this is the CR that closed this:
https://gerrit.hyperledger.org/r/#/c/7705/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric 1.0.x Release (pending items for review/discussion),FAB-3040,15621,,Epic,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,JonathanLevi,JonathanLevi,JonathanLevi,08/Apr/17 4:12 AM,21/Jul/18 4:09 AM,28/Oct/23 2:59 AM,06/Jul/18 9:45 PM,v1.0.0-alpha1,v1.0.0-alpha2,,,v1.0.0,,,fabric-build,fabric-ca-build,,,0,quality,release,,,,,,"This Epic controls the release of Fabric 1.0.x. We use it to drive and link to all of the stories, bugs, improvements included in a release, and all of the tasks necessary to deliver it.

The maintainers will hold a daily review of the underlying JIRA items and make a determination as to whether or not they should go into the pending release by setting the _Fix Version/s_ accordingly.

For more details, please take note of [https://wiki.hyperledger.org/projects/fabric/release_exit_criteria]",,binhn,C0rWin,ChristopherFerris,david_dornseifer,greg.haskins,Hangyu_FJH,JonathanLevi,markparz,muralisr,peoplehlj,rmohta,shanlusun,troyronda,vpaprots,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-423,FABN-348,FABN-155,FAB-2982,FAB-3690,FAB-3525,FAB-1163,FAB-3218,FABJ-89,FABJ-77,FABJ-64,FAB-3732,FABN-496,FABC-216,FAB-3156,FABN-136,FAB-3240,FAB-3850,FAB-3737,FAB-1678,FAB-3963,FAB-4109,FABC-227,FAB-4136,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-1,,Fabric 1.0 Release,To Do,,,Unset,,,,"1|hzxpfz:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,binhn,C0rWin,ChristopherFerris,david_dornseifer,greg.haskins,Hangyu_FJH,JonathanLevi,markparz,muralisr,peoplehlj,rmohta,shanlusun,troyronda,vpaprots,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/17 7:10 AM;ChristopherFerris;[~JonathanLevi] thanks for setting this up!;;;","11/May/17 1:22 AM;ChristopherFerris;so, [~JonathanLevi] [~mastersingh24] [~binhn] [~muralisr] [~kchristidis] [~yacovm] [~C0rWin] [~greg.haskins] [~jyellick] [~smithbk] [~jimthematrix] [~sheehan] [~tamasblummer] [~hgabre]

I think we need to nail down which components are to be released as v1.0.0-alpha2. As I see it, only the following are ready. 

fabric

fabric-sdk-node

fabric-ca

fabric-chaintool 

I also believe that while some of the Java Chaincode code has been merged, it isn't ready. Hence we should look at backing that out to a feature branch.

The other SDKs can certainly catch up and release something that is suitable for use with v1.0.0-alpha2, but I don't think we should wait on their readiness.

Please comment here if you agree. We are close!

Thanks,

Chris;;;","11/May/17 1:26 AM;ChristopherFerris;oh, apologies, should include fabric-chaintool in the release, too. [~greg.haskins];;;","11/May/17 1:30 AM;yacovm;{quote}I also believe that while some of the Java Chaincode code has been merged, it isn't ready. Hence we should look at backing that out to a feature branch.

The other SDKs can certainly catch up and release something that is suitable for use with v1.0.0-alpha2, but I don't think we should wait on their readiness.
{quote}
 

+1

I agree here. We have the needed functionality for an end-to-end flow with fabric go chaincode and nodeSDK

 ;;;","11/May/17 1:31 AM;JonathanLevi;+2. Specifically: 3 components: *fabric*, *fabric-sdk-node*, *fabric-ca* (and we can cherry-picking what we want to take from the Java Chaincode). ** And, no, I do *not* think we should hold off tagging just in order to wait to the other SDKs. If they catch up for the 1.0-RCs, we can re-consider. IMO.;;;","11/May/17 2:33 AM;muralisr;[~ChristopherFerris] [~yacovm] Re java chaincode.. Agree it hasn't been exercised much and is not ready yet but it's there and doesn't break anything (even has UT running). It *is* somewhat usable though (but [~sanchezl] will keep me honest here... ). 

I'm just worried cost of backing out would be more than letting it be.

How would ""backing out the feature branch work"" ? Java chaincode framework is part of the `fabric` just like go, SCC and chaintool are. It wouldn't be easy to back out and we would have to work to put it back too (unless I'm missing something).

Perhaps we could doc it as not-supported, or even add a check in code to disable to prevent users from using it in alpha. 

My suggestion would be to accept the last one https://jira.hyperledger.org/browse/FAB-3235 and stop any more work on Java CC till we get the green. (BTW, FAB-3235 will complete https://jira.hyperledger.org/browse/FAB-3218 that's currently in the ""blocked"" list.);;;","11/May/17 2:57 AM;ChristopherFerris;[~mastersingh24] removing https://jira.hyperledger.org/browse/FAB-3310 from blockers since it isn't likely that this will be done by Friday. LMK if you disagree.;;;","11/May/17 3:00 AM;ChristopherFerris;removing https://jira.hyperledger.org/browse/FAB-3555 from blockers per [~denyeart];;;","11/May/17 4:27 AM;ChristopherFerris;[~muralisr] will 3235 leave us with complete function? [~mastersingh24] your thoughts? I know we discussed previously and the thinking was omit for now until we can get it solid. IMO, we could omit it and work a feature branch and people could pull from that if they want to experiment. I'd favor putting out something known to be solid than taking risk that it isn't.;;;","11/May/17 4:39 AM;jimthematrix;just added FAB-3806 to list of blockers. it's for updating node SDK packages' readmes for NPM publishing purposes, to reflect the new location of the developer's documentation: https://fabric-sdk-node.github.io/;;;","11/May/17 4:51 AM;binhn;[~ChristopherFerris] 3235 won't complete the java chaincode feature; still missing some shim APIs.  I agreed to move java chaincode out into a feature, but that would require some planning, especially in the build process ([~greg.haskins]) that I think we should discuss in a separate Jira.;;;","11/May/17 4:51 AM;jimthematrix;also I'd like to add java SDK to the list of alpha2 components. feature-wise it's caught up. main problem is 
- still can't publish to maven due to CI configurations (having problems authenticating to nexus)
- zero developers documentation (there's the readme but it's mainly for those chasing the master)

A lot of interest in the community and I bet many are holding off because there hasn't been a somewhat stable release yet.

So what do others think?;;;","11/May/17 4:58 AM;ChristopherFerris;[~jimthematrix] it could follow shortly after, once the maven CI kinks are worked out. Thoughts? Specifically, that is one blocker holding up the release.

 ;;;","11/May/17 5:47 AM;muralisr;[~binhn] [~ChristopherFerris] right...3235 won't complete Java CC but *will* complete the 'blocked'  FAB-3218 item. FAB-3218 lists all the shim APIs that are completed.;;;","11/May/17 8:57 AM;jimthematrix;[~ChristopherFerris] sure, we could let the maven CI work run its due course and cut a Java SDK alpha2 at that point. no need to hold off the rest on that. I was thinking to let Java SDK be part of the alpha2 without maven publish, but instead ask users to git clone the v1.0.0-alpha2 tag from fabric-sdk-java repo. But guess it's better to wait until it's published to nexus and registered with maven.;;;","11/May/17 8:59 AM;jimthematrix;re: java CC I also think it's best to leave it in there with a disclaimer that it's AS-IS and main purpose is for prospect users to evaluate the shim APIs. I don't believe install/instantiate java CC is robust enough at this point. but also don't create work for ourselves to rip out what's in there already.;;;","11/May/17 9:26 PM;ChristopherFerris;[~jimthematrix] [~rameshthoomu] I presume we can manually publish JAVA SDK and whatever else is needed to maven even if FAB-648 is not resolved? ;;;","11/May/17 9:32 PM;muralisr;+1 [~jimthematrix]

But if we feel its better to prevent usage than tell ""not-supported"" in Rocket, it would not be hard to add ""WIP-not supported"" if CC type is JAVA in the endorser before calling the chaincode. For good measure we could add it in the CLI too right upfront.;;;","11/May/17 9:41 PM;ChristopherFerris;+1 to disabling in CLI;;;","11/May/17 11:55 PM;muralisr;[~ChristopherFerris] I'll get up a ""disable java CC"" CR ready to go based on decision. Created https://jira.hyperledger.org/browse/FAB-3850. We can associate it with this JIRA pending decision.;;;","12/May/17 3:40 AM;muralisr;https://gerrit.hyperledger.org/r/#/c/9245 disables Java if we decide to go that route.;;;","12/May/17 3:51 AM;ChristopherFerris;thanks [~muralisr] LGTM will wait for build to complete;;;","12/May/17 9:46 AM;ChristopherFerris;So, as of now, if we merge FAB-2982 and FAB-3850 and [~rameshthoomu] can verify we have Maven working, we are GTG. I suggest that we remove FAB-3218 from blocking, and that it can be completed post alpha2.;;;","12/May/17 10:33 AM;muralisr;[~ChristopherFerris] https://gerrit.hyperledger.org/r/#/c/8529/ (FAB-3235)  has been reviewed and is good to go. Its the last one in a fairly big list of Java merges and will close FAB-3218.

Instead of removing FAB-3218 from blocking, can we merge https://gerrit.hyperledger.org/r/#/c/8529/ which would close FAB-3235 and its parent FAB-3218 ?;;;","12/May/17 8:20 PM;ChristopherFerris;ok, I can go with that plan as long as we merge your patch to disable JavaCC, [~muralisr] [~mastersingh24] [~JonathanLevi] [~binhn] [~greg.haskins] what do you think? If we merge these, and the CR for FAB-3737, then I think we can begin the process of tagging and bagging alpha2.;;;","17/May/17 8:28 PM;yacovm;Can we add https://jira.hyperledger.org/browse/FAB-3715 and https://jira.hyperledger.org/browse/FAB-3359 to this list?

[~ChristopherFerris] [~mastersingh24] [~JonathanLevi];;;","18/May/17 9:39 PM;ChristopherFerris;[~yacovm] seems reasonable to me.;;;","18/May/17 10:01 PM;C0rWin;I think that both FAB-3715 and FAB-3359 are pretty important and should be in the list for v1.0.;;;","18/May/17 10:25 PM;greg.haskins;Propose FAB-3118 be considered;;;","18/May/17 10:46 PM;JonathanLevi;I concur with the above and will add both FAB-3715 and FAB-3359 as these have been proposed earlier and we have heard no objection to including these.;;;","18/May/17 10:46 PM;JonathanLevi;[~greg.haskins] I, too, believe that FAB-3118 should be considered and added to, subject to others agreeing with it.;;;","19/May/17 3:19 AM;vpaprots;Propose FAB-3968 to be considered. Before I add more tests, I wanted to remove the code duplicates SW BCCSP that is already tested, so that I wont have to copy even more things from SW BCCSP;;;","24/May/17 9:09 PM;yacovm;I think that both [FAB-4078|https://jira.hyperledger.org/browse/FAB-4078] and [FAB-4085|https://jira.hyperledger.org/browse/FAB-4085] have to get in, because they are critical bugs in gossip. ;;;",,,,,,,
Generate GPG keys and keep it in CI environment,FAB-3041,15622,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,tijohnson,rameshthoomu,rameshthoomu,08/Apr/17 6:23 AM,23/Jan/20 3:42 AM,28/Oct/23 2:59 AM,23/Jan/20 3:42 AM,,,,,v1.0.0,,,fabric-ci,,,,0,build-system,CI_Adhoc_Req,,,,,,"I am working on FAB-648 (Publish Java Artifact to Maven Central Repository).. I am trying to publish fabric-sdk-java jar file to Maven central repository from Jenkins Job. Configured ""hyperledgerci"" user to do this. We have to sign & publish jar files with gpg keys. 

Could you please generate gpg keys and configure them in Jenkins CI. Please follow the steps mentioned here and let us know the path to include in settings.xml http://www.sonatype.org/nexus/2015/01/08/deploy-to-maven-central-repository/

http://central.sonatype.org/pages/working-with-pgp-signatures.html",,jwagantall,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-89,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpg7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jwagantall,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/17 3:10 AM;jwagantall;Talking more to the team, we decided to go for detached signatures for now. 
Ry and I will be signing these artifacts similarly to how we internally do for other projects. 

Checking on this now and will update in FAB-648;;;","18/Aug/17 11:21 PM;rameshthoomu;[~jwagantall] Is there any way to upload gpg keys in CI system and publish Java sdk jars to maven from CI system. Please provide more information if this is not possible from CI.;;;","07/May/18 8:29 AM;rameshthoomu;[~jwagantall] This looks like long pending task.. In the existing java release process we publish java jar and corresponding release artifacts to maven through manual process. Could you please let me know if there is a way to publish these artifacts through jenkins.;;;","23/Jan/20 3:42 AM;rameshthoomu;Publishing artifacts through Jenkins is out of scope now. Closing this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Latest e2e fails,FAB-3042,15623,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,greg.haskins,greg.haskins,08/Apr/17 6:55 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/May/17 8:40 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,2,,,,,,,,"Running the ""Getting Started"" e2e flow from commit 4cf2b8f83 fails with:

$ ./network_setup.sh up
setting to default channel 'mychannel'
Channel name - mychannel

Building configtxgen
build/bin/configtxgen
CGO_CFLAGS="" "" GOBIN=/opt/gopath/src/github.com/hyperledger/fabric/build/bin go install -tags ""nopkcs11"" -ldflags ""-X github.com/hyperledger/fabric/common/metadata.Version=1.0.0-snapshot-4cf2b8f -X github.com/hyperledger/fabric/common/metadata.BaseVersion=0.3.0 -X github.com/hyperledger/fabric/common/metadata.BaseDockerLabel=org.hyperledger.fabric -X github.com/hyperledger/fabric/common/metadata.DockerNamespace=hyperledger -X github.com/hyperledger/fabric/common/metadata.BaseDockerNamespace=hyperledger"" github.com/hyperledger/fabric/common/configtx/tool/configtxgen
Binary available as build/bin/configtxgen
Generating genesis block
2017/04/07 21:51:59 Loading configuration
2017/04/07 21:51:59 Looking for configtx.yaml in: /opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool
2017/04/07 21:51:59 Found configtx.yaml there
2017/04/07 21:51:59 Checking for MSPDir at: .
2017/04/07 21:51:59 Checking for MSPDir at: .
2017/04/07 21:51:59 Checking for MSPDir at: .
2017/04/07 21:51:59 Generating genesis block
2017/04/07 21:51:59 Writing genesis block
Generating channel configuration transaction
2017/04/07 21:51:59 Loading configuration
2017/04/07 21:51:59 Looking for configtx.yaml in: /opt/gopath/src/github.com/hyperledger/fabric/common/configtx/tool
2017/04/07 21:51:59 Found configtx.yaml there
2017/04/07 21:51:59 Checking for MSPDir at: .
2017/04/07 21:51:59 Checking for MSPDir at: .
2017/04/07 21:51:59 Checking for MSPDir at: .
2017/04/07 21:51:59 Generating new channel configtx
2017/04/07 21:51:59 Creating no-op MSP instance
2017/04/07 21:51:59 Obtaining default signing identity
2017/04/07 21:51:59 Creating no-op signing identity instance
2017/04/07 21:51:59 Serialinzing identity
2017/04/07 21:51:59 signing message
2017/04/07 21:51:59 signing message
2017/04/07 21:51:59 Writing new channel tx
Creating network ""e2ecli_default"" with the default driver
Creating orderer0
Creating peer0
Creating peer1
Creating peer2
Creating peer3
Creating cli
Channel name : mychannel
2017-04-07 21:52:02.771 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'channel'
2017-04-07 21:52:02.771 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-04-07 21:52:02.771 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
Error connecting: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
Error: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
Usage:
  peer channel create [flags]

Global Flags:
  -b, --blockpath string           Path to file containing genesis block
      --cafile string              Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
  -c, --chain string               In case of a newChain command, the chain ID to create.
  -f, --file string                Configuration transaction file generated by a tool such as configtxgen for submitting to orderer
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -o, --orderer string             Ordering service endpoint
      --test.coverprofile string   Done (default ""coverage.cov"")
      --tls                        Use TLS when communicating with the orderer endpoint
  -v, --version                    Display current version of fabric peer server

!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================
",,bmkor,greg.haskins,hiteshjoshi1,mastersingh24,rameshthoomu,roamerxv,santoshtechie9,seafolk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/17 11:31 AM;seafolk;docker-compose.yaml;https://jira.hyperledger.org/secure/attachment/10867/docker-compose.yaml","25/May/17 11:31 AM;seafolk;script_mod.sh;https://jira.hyperledger.org/secure/attachment/10868/script_mod.sh",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpgf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmkor,greg.haskins,hiteshjoshi1,mastersingh24,rameshthoomu,roamerxv,santoshtechie9,seafolk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 9:41 AM;santoshtechie9;Hi,

Can anyone suggest how to resolve this issue. I am struck here and not able to setup the network locally due to this issue.

Thanks,
Santosh;;;","26/Apr/17 12:04 PM;rameshthoomu;[~santoshtechie9] [~greg.haskins] fix has been provided and merged https://gerrit.hyperledger.org/r/gitweb?p=fabric-sdk-node.git;a=commit;h=52b8e67cfd6a670ec3d3e77c2699b887c7e6f7d3 

I see e2e tests are working as expected on below commit levels

https://jenkins.hyperledger.org/view/FIT/job/FIT-node-x86_64/423/artifact/gopath/src/github.com/hyperledger/fabric-sdk-node/commit_history.log

Build Log:
https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/291/consoleFull;;;","27/Apr/17 2:01 PM;roamerxv;The error will display at Centos7.2  ，But not  show at Ubuntu。;;;","28/Apr/17 12:17 PM;greg.haskins;The resolution for me was to add ""dns_search: ."" to each node in the composition.  This is because of how my local router deals with DNS in my setup.  YMMV.;;;","28/Apr/17 12:19 PM;greg.haskins;I should also add: I am working on a tool that is simiiar to e2e in many ways, and have implemented the ""dns_search"" fix.  You can see a working example here: https://gerrit.hyperledger.org/r/#/c/8579/4/examples/cluster/docker-compose.yaml;;;","30/Apr/17 1:30 AM;roamerxv;https://jira.hyperledger.org/browse/FAB-3042?focusedCommentId=23133&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-23133

Nice job !! It's work fine at CentOS;;;","01/May/17 8:40 AM;mastersingh24;e2e_cli works fine for me and looks like [~roamerxv] as well so closing this one;;;","01/May/17 11:04 AM;bmkor;Sorry guys. Would someone throw me light on how this can be solved? I still got the create channel error due to principal deserialisation failed. 

2017-04-30 03:12:32.012 UTC \[policies\] GetPolicy -> DEBU 19e Returning policy ChannelCreationPolicy for evaluation
2017-04-30 03:12:32.012 UTC \[cauthdsl] func1 -> DEBU 19f Gate evaluation starts: (&\{n:1 policies:<signed_by:0 > \})
2017-04-30 03:12:32.012 UTC \[cauthdsl\] func2 -> DEBU 1a0 Principal evaluation starts: (&\{0\}) (used \[false\])
2017-04-30 03:12:32.012 UTC \[cauthdsl\] func2 -> ERRO 1a1 Principal deserialization failed: (Could not deserialize a SerializedIdentity, err unexpected EOF) for identity \[99 101 114 116\]
...
2017-04-30 03:12:32.013 UTC \[orderer/common/broadcast\] Handle -> WARN 1a9 Rejecting CONFIG_UPDATE because: Error authorizing update: Error validating DeltaSet: Policy for \[Groups\] /Channel/Application not satisfied: Failed to reach implicit threshold of 1 sub-policies, required 1 remaining;;;","01/May/17 1:38 PM;hiteshjoshi1;I still have the error
Environment : - Windows Host, Vagrant VM - Ubuntu Xenial.

2017-05-01 04:32:53.449 UTC [msp] getMspConfig -> INFO 001 intermidiate certs folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer0/localMspConfig/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer0/localMspConfig/intermediatecerts: no such file or directory]
2017-05-01 04:32:53.450 UTC [msp] getMspConfig -> INFO 002 crls folder not found at [/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer0/localMspConfig/intermediatecerts]. Skipping.: [stat /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer0/localMspConfig/crls: no such file or directory]
2017-05-01 04:32:53.476 UTC [msp] GetLocalMSP -> DEBU 003 Returning existing local MSP
2017-05-01 04:32:53.476 UTC [msp] GetDefaultSigningIdentity -> DEBU 004 Obtaining default signing identity
Error connecting: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure
Error: rpc error: code = 14 desc = grpc: RPC failed fast due to transport failure

I tried the Greg Haskins work around of adding dns_search: .  But same error.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create couchdb batch read operations for optimization,FAB-3045,15626,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,chris.elder,chris.elder,09/Apr/17 12:26 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/Apr/17 12:29 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpgv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create couchdb batch read operations for optimization,FAB-3046,15627,15293,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,09/Apr/17 12:26 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Apr/17 10:24 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Create batch select operations for CouchDB in order to optimize performance.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxph3:",,,,,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change couchdb attachment arrays to use pointers,FAB-3047,15628,15293,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,09/Apr/17 12:36 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Apr/17 10:24 PM,,,,,,,,fabric-ledger,,,,0,,,,,,,,Change the CouchDoc structure to use pointers to the array of documents to avoid unnecessary copying of attachment data.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxphb:",,,,,,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,,,,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make Client.js -> getUserContext() synchronous by default,FAB-3048,15629,13227,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,09/Apr/17 12:58 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Apr/17 10:41 PM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,"Most of the time the caller code just wants to get access to the current user context for signing stuff, yet this call is currently asynchronous (returning a Promise) due to its support for edge cases where the calling code either wants to switch to a different user or is recovering from crashes.

To make the mainstream usage of this method more straightforward, change the implementation to return synchronously by default but can be made Promise-based if both a ""name"" and ""checkPersistence"" are passed in.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxphj:",,,,,,Sprint 5 - Consensus,Sprint 7 - nodeSDK,Sprint 8 - nodeSDK,Sprint 9 - nodeSDK,Sprint 10 - nodeSDK,Sprint 11 - SDK node,Sprint 12 - SDK node,Sprint 13 - SDK node,Sprint 14 - SDK node,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong peers described in the Getting Started guide,FAB-3049,15630,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,nickgaski,rjkuro,rjkuro,09/Apr/17 1:37 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 10:00 PM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"The new getting started page (http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html#what-happened-behind-the-scenes) describes:

{quote}
PEER0 and PEER3 belong to Org0; PEER1 and PEER2 belong to Org1
{quote}

But similar line exists in examples/e2e_cli/end-to-end.rst, which shows slightly differently:

-  ``PEER0`` and ``PEER1`` belong to Org0; ``PEER2`` and ``PEER3`` belong to Org1

I think the latter is correct because the file examples/e2e_cli/scripts/script.sh sets the Org0MSP for the $1 (=peer) is 0 or 1: 

{code}
setGlobals () {
	...
	if [ $1 -eq 0 -o $1 -eq 1 ] ; then
		CORE_PEER_LOCALMSPID=""Org0MSP""
		...
	else
		CORE_PEER_LOCALMSPID=""Org1MSP""
```
{code}

The content of the end-to-end.rst and getting_started.html are almost same. 
Probably there was an error in copying the line from end-to-end.rst to source of getting_started.html file. 

",,rjkuro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxphr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rjkuro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
docs do not link to or provide release history and release notes,FAB-3053,15634,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,ChristopherFerris,ChristopherFerris,09/Apr/17 10:46 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/Apr/17 3:01 AM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"The v0.6 docs included release notes. This seems to have been removed in the transition to v1.0 docs. 

The docs should link to the complete release history and release notes. See cloud foundry [1] or kubernetes [2] for example. Note that both projects provide links to their release history and release notes from the documentation for each release.

[1] https://github.com/cloudfoundry/cf-release/releases
[2] https://github.com/kubernetes/kubernetes/releases",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2254,,,,,,,,,"1|hzxphz:",,,,,,Sprint 15 - Documenation,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/17 10:22 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8071/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
the project has not adopted a pattern for documenting release notes,FAB-3054,15635,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,09/Apr/17 10:53 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,08/Jun/17 6:57 PM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"the project has not adopted a pattern for documenting release notes. We have some alternatives we can use. We need to come to agreement on an approach and then institutionalize and automate to the extent possible.

examples:
k8s 
https://github.com/kubernetes/kubernetes/releases
https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG.md

docker
https://github.com/docker/docker/releases

cloud foundry
https://github.com/cloudfoundry/cf-release/releases",,ChristopherFerris,Clayton Sims,jasondotstar,markparz,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4212,FAB-4379,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2254,,,,,,,,,"1|hzxpi7:",,,,Unset,,Sprint 15 - Documenation,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,Clayton Sims,jasondotstar,markparz,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/17 1:44 AM;Clayton Sims;Any bug  with priority highest will be considered 'drop everything' to fix .   For example -  CI  breaks or a QA blocker.   Can we consider dropping this to high?;;;","03/May/17 1:46 AM;Clayton Sims;Who should own driving agreement?;;;","26/May/17 12:48 AM;ChristopherFerris;What we need is a consistent format for the tag commit message, which becomes the release note.;;;","01/Jun/17 4:02 AM;ChristopherFerris;I would propose the following format for Release Notes presented in the release tag's commit message:
h2. Release Notes

Lorem ipsum dolor sit amet... generalized prose describing the changes made since previous release
h2. Known Vulnerabilities

Lorem ipsum dolor sit amet... a list of any known security vulnerabilities at the time of the release
h2. Resolved Vulnerabilities

Lorem ipsum dolor sit amet... a list of resolved security vulnerabilities 
h2. Known Issues & Workarounds 

Lorem ipsum dolor sit amet... a list of known issues/limitations not related to security and their workarounds (if any)

 

[Change Log|http://example.com/]

 ;;;","01/Jun/17 5:19 AM;markparz;""issues"" might need a better definition, I don't think we would need to list out all bugs or at least low bugs.;;;","01/Jun/17 9:24 AM;jasondotstar;A potential template to consider:

 
h1. *Release Notes*
h2. *\{{{Date}: Version \{Version Number}}}*
h2. *{{What's New in }}\{{{Version Number}}}*
 * New Feature #1
 * New Feature #2
 * New Feature #3

h2. *Security Fixes*
 * Fixed: Security Fix #1
 * Fixed: Security Fix #2
 * Fixed: Security Fix #3

h2. *Bug Fixes*
 * Fixed: Bug #1

 * Fixed: Bug #2

 * Fixed: Bug #3

h2. *Known Issues*
 * Issue #1
 * Issue #2
 * Issue #3;;;","02/Jun/17 7:28 AM;ChristopherFerris;[~jasondotstar] if we were using some sort of tag in the commit message to discriminate between a bug fix and a feature, etc we could do something like that and use gitchangelog [https://pypi.python.org/pypi/gitchangelog] but alas, we would need to adopt that post 1.0.;;;","02/Jun/17 7:34 AM;ChristopherFerris;[~markparz] I was not planning on listing everything. That's what the changelog is about. Known issues would be for any known significant gotchas that warrant more visibility than just sitting in JIRA. I would think that something like the absence of Java CC might warrant addition here since many were expecting it.

 

e.g.

Java chaincode support is disabled. It can be enabled with a code change and rebuild. We made this difficult by design to minimize any use with this release because it has not been tested and the community isn't in a position to effectively support it in its current state.;;;","05/Jun/17 10:52 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/10153/;;;","05/Jun/17 11:28 PM;ChristopherFerris;[https://gerrit.hyperledger.org/r/#/c/10157/] also for fabric-ca;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode url decode should never return empty urllocation with no error,FAB-3055,15636,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,10/Apr/17 6:11 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 11:32 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"Exisiting code will decode  the url ""http:///"" with returning """",nil.

The usage only check `err != nil` and thought it was successful (core/chaincode/platform/golang/package.go#252).

Actually, in this case the decode should throw error as it's not a valid chaincode location url.
",,baohua,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpif:",,,,,,Sprint 4,,,,,,,,,,,,,,,,,,,,,,,,baohua,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/17 4:23 AM;ChristopherFerris;please add CR link;;;","14/Apr/17 11:24 AM;baohua;Code submitted at https://gerrit.hyperledger.org/r/#/c/7885/.

Welcome for review!

Thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a mechanism to detect ARCH and pull relevant docker images,FAB-3056,15637,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harsha544,harsha544,harsha544,10/Apr/17 7:38 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,28/Apr/17 1:30 PM,,,,,v1.0.0,,,,,,,0,v1.0,,,,,,,"I've observed that https://github.com/hyperledger/fabric/blob/master/examples/e2e_cli/download-dockerimages.sh downloads x86_64 images on ppc64le & s390x platforms.

I will be putting up a patch that would pull relevant docker images from docker-hub .",,harsha544,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpin:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,harsha544,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/17 9:50 PM;harsha544;Pushed https://gerrit.hyperledger.org/r/#/c/7887/ 
Awaiting Review;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode-level access control,FAB-3057,15638,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ales,ales,10/Apr/17 8:03 PM,23/Jan/20 4:02 AM,28/Oct/23 2:59 AM,23/Jan/20 4:02 AM,,,,,Future,,,fabric-peer,,,,1,stale-item,,,,,,,"Fabric needs to provide the chaincode developer appropriate tools to perform chaincode-level access control. Currently, the cc dev can access the binary blob of the creator; however this is insufficient because the cc dev doesn't have access to the chain msp infrastructure and can't therefore reason in terms of the organizations that make the channel.

We propose to add a system chaincode for access control, exposing two functions
* *SatisfiesPrincipal*
* *EvaluatePolicy*

*SatisfiesPrincipal* takes two arguments
* a serialized identity
* a serialized MSPPrincipal
The function returns a success code if the identity has the requested attributes (e.g. membership to an MSP or a specific OU) as described in the MSPPrincipal (and an error code otherwise).

*EvaluatePolicy* takes three arguments
* a serialized policy object (to be specific a SignaturePolicyEnvelope)
* a message
* an array of serialized identities
* an array of signatures
The function returns a success code if the array of signatures from the serialized identities properly sign the supplied message and if they match the description in the serialized policy (for instance the SignaturePolicyEnvelope requires signatures from 3 principals out of 5 described in the SignaturePolicyEnvelope object, EvaluatePolicy will return true if there are 3 signatures from 3 of the 5 principals).",,ales,angelo.decaro,denyeart,elli-androulaki,indefire,jiangyaoguo,muralisr,salmanbaset,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpiv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ales,angelo.decaro,denyeart,elli-androulaki,indefire,jiangyaoguo,muralisr,salmanbaset,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/17 8:05 PM;ales;[~binhn] [~muralisr] [~elli-androulaki] [~angelo.decaro] ;;;","10/Apr/17 10:25 PM;angelo.decaro;Let me mention the following issue that could be addressed in the context of this JIRA item, if you think so. So, one might perform some access control just by using the output of the GetCreator without any need to deserialize that output. The problem is that the output of the GetCreator is serialized version of the protobuf message SerializedIdentity. Because protobuf does not guarantee deterministic serialization we might want either discourage this practice or provide a fix.;;;","10/Apr/17 10:40 PM;ales;Adding some discussion about the use-case: as a chaincode developer I may want to perform some application-level access control on top of what fabric already does. 

By default, fabric ensures that only a creator that is a writer on a channel can invoke a chaincode on that channel. However, the set of writers might be too wide and the chaincode developer may want to further restrict access. 

For example, imagine a channel with orgA and orgB. Both are writers and both can invoke chaincode mycc. However, the chaincode developer wants to enforce that one of the functions (say, ""sensitiveFunc"") can only be invoked by orgA whereas ""nonSensitiveFunc"" can be invoked by either org. In theory this requirement can be captured very simply at the chaincode level by having the chaincode deserialize the creator and inspecting the certificate. However this is very hard to do because 
1) the certificate is not immediately accessible, because it's actually a SerializedIdentity serialized protobuf
2) the chaincode has not access to the channel MSP manager and so it doesn't have access to the CA certificates on that channel

This scenario would easily be handled with the proposed new system chaincode by creating an MSPPrincipal instance identifying a member of orgA and invoking the ""SatisfiesPrincipal"" function.;;;","10/Apr/17 10:52 PM;angelo.decaro;Indeed :)
Another thought, I think this scc should not be directly accessible from the external. Or at most an administrator of a peer might do that. No?;;;","10/Apr/17 10:55 PM;ales;Agreed - and FAB-2997 already helps with that.;;;","11/Apr/17 3:35 AM;elli-androulaki;[~ales], +1 for the the SCC interface/use. Thanks!

Taking incentive from the mention of CC2CC case, and an earlier discussion we had on cross chain CC2CC, adding here my thoughts as a reference for a future discussion. 

To be able to address cross chain CC2CC when the writers of the callee is too restrictive (moving to the other side) we would need to ""relax"" the ACL check at the peer side or perhaps use a dedicated flag where a cc deployer specifies chaincodes that should be eligible for doing (?), and/or ensure that the SCC this jira is meant for, is able to assess MSP membership for MSPs that do not necessarily govern the channel of the callee's chaincode. The latter can be tedious if we do not have an identity channel in place.. Of course, we can consider this for the future, as to have something already in place now we try to accommodate rights within the same chain's MSP through this SCC and then see how it makes sense to move from there(?)
;;;","13/Apr/17 4:19 PM;muralisr;[~ales] [~binhn] are we doing this for 1.0 ? If not, move it to 1.1 ?;;;","13/Apr/17 5:00 PM;elli-androulaki;[~muralisr], [~ales], yesterday [~binhn] suggested that we move it to a v1.1 feature.;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","23/Jan/20 4:02 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
provided clear guidelines on how to author a change request,FAB-3058,15639,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,10/Apr/17 9:51 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,13/Apr/17 6:37 AM,,,,,v1.0.0,,,fabric-docs,,,,0,build-system,Documentation,,,,,,We should be much more forceful in requiring a JIRA identifier in every change request title to link the commit with the corresponding JIRA item in a git log.,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpj3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/17 10:09 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/7889/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sync Java Chaincode interface with Go Chaincode Interface,FAB-3066,15647,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,11/Apr/17 12:42 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,18/Apr/17 10:48 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"h3. Go:
{code}
type Chaincode interface {
	// Init is called during Deploy transaction after the container has been
	// established, allowing the chaincode to initialize its internal data
	Init(stub ChaincodeStubInterface) pb.Response
	// Invoke is called for every Invoke transactions. The chaincode may change
	// its state variables
	Invoke(stub ChaincodeStubInterface) pb.Response
}
{code}
h3. Java:
{code}
/**
 * Defines methods that all chaincodes must implement.
 */
public interface Chaincode {
    /**
     * Called during an instantiate transaction after the container
     * has been established, allowing the chaincode to initialize
     * its internal data.
     */
    public Response init(ChaincodeStub stub);
    /**
     * Called for every Invoke transaction. The chaincode may change 
     * its state variables.
     */
    public Response invoke(ChaincodeStub stub);
}
{code}",,muralisr,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-219,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpkn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,muralisr,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 2:39 PM;muralisr;[~sanchezl] Any updates on this please ?;;;","13/Apr/17 10:15 PM;sanchezl;Waiting for reviews: 

https://gerrit.hyperledger.org/r/#/c/7937/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer management of CouchDB indexes,FAB-3067,15648,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,denyeart,denyeart,11/Apr/17 2:05 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,16/Jan/18 11:53 PM,,,,,v1.1.1,,,fabric-ledger,,,,2,release-planning-1.1,,,,,,,"*Background/Motivation*
 CouchDB rich queries require indexes to perform well.  Additionally, queries with a sort require an index.  Fabric supports CouchDB declarative JSON queries in chaincode as defined at [http://docs.couchdb.org/en/2.0.0/api/database/find.html]. This work item proposes to add support for indexes as defined at the same CouchDB doc page, as well as management lifecycle to create indexes.

*Index Management*
 CouchDB queries are defined in chaincode and executed from chaincode, therefore the index management lifecycle should follow from chaincode management lifecycle.  Indexes are authored alongside queries, and therefore indexes will be defined alongside chaincode and packaged in the chaincode installation package. Indexes will be deployed on a peer's statedb when the peer processes the block that includes the chaincode instantiation transaction, as this is when the associated chaincode database resources are setup. In the future, a chaincode 'define' step may be added prior to instantiation, and in that case the indexes would be deployed to statedb upon processing the define transaction on each peer.

Indexes that are required to support chaincode queries will be defined in the chaincode installation package. Define default indexes in chaincode source metadata directory (e.g. a META-INF/statedb/couchdb/indexes/<index_name>.json file per required index). These get packaged up into chaincode installation package.
 The automatic chaincode index deploy behavior will be driven by core.yaml *peer.ledger.state.couchDBConfig.autoDeployChaincodeIndexes* property, set to true by default, with the following behavior:
 * If chaincode is already installed on peer, when chaincode gets instantiated (or upgraded) for one of the peer’s channels, the channel_chaincode database gets created and indexes from the install package are automatically deployed upon processing the chaincode instantiate/upgrade transaction.
 * If chaincode is not yet installed on peer, the chaincode instantiate step would create the channel_chaincode database to support peer committer role, but would not created indexes since the peer cannot yet execute chaincode (and since the chaincode install package including index definitions is not available). If the chaincode is installed at a later time, meaning the peer becomes a potential endorser, the install step would iterate through the peer’s CouchDB channel_chaincode databases and automatically deploy the default chaincode indexes that are included in the chaincode installation package. Some synchronization is required to ensure that any channels that get configured for the chaincode while the install is in progress also get the indexes. During the install step the indexes should get created before the chaincode gets added to peer's file system, so that in the case of any problems the install step could be run again (index creation is idempotent in CouchDB, that is, can be re-created in a retry).

For subsequent chaincode versions, the indexes in the chaincode installation package will be created with the following behavior:
 * If the same indexes are included in subsequent chaincode version packages. Index re-deployment causes no harm and results in a noop (question - does the index get re-built in CouchDB? If so the peer should not attempt to re-create).
 * If a named index has a change to the index definition, the updated index definition will be re-deployed to CouchDB.
 * If new indexes are added to chaincode package, the new indexes will be deployed to CouchDB.
 * If indexes are removed from chaincode package, the indexes will not be automatically dropped, as peer-specific indexes may have been added and may still be required, but they may be dropped manually at any time (see below).

If *peer.ledger.state.couchDBConfig.autoDeployChaincodeIndexes* is false, indexes will not be automatically deployed. This approach preserves an option to manage indexes completely manually in CouchDB. This would likely be even more important for other types of state databases, for example if support is added for relational databases, most peer administrators would likely want table and index DDL to be executed manually by a DBA rather than automatically. But for CouchDB indexes automatic deployment is a preferred and acceptable default in most scenarios.

*Peer specific indexes and future work*
 Suppose an auditor organization performs additional queries against their peers, which are never executed on other peers. Additional indexes may be required on these auditor peers only. These additional indexes may be created and dropped directly in CouchDB (for example by a hosting service). There may also be a need to drop indexes from previously deployed chaincode versions which are no longer applicable. These will be manually dropped. Additionally, if index deployment fails the indexes will need to be manually fixed. Hosting services will need to be able to manage CouchDB indexes as needed, in additional to general CouchDB management/monitoring.

In the future a peer API to manage indexes may be added, with corresponding command line options. This would provide an option for peer consumers to manage their own indexes without requiring direct access to CouchDB. This is not in the scope of this work item, but command line options similar to the following could be added in the future:
{noformat}
   peer statedb deploy-chaincode-indexes -C <channel> -n <chaincode>
   peer statedb create-index -C <channel> -n <chaincode> <index_definition>
   peer statedb drop-index -C <channel> -n <chaincode> <index_name>
{noformat}
 

*CouchDB per channel/chaincode instead of per channel*
 Currently there is one CouchDB database per channel, matching the commit granularity for blocks (channel level).  However, logically chaincode key/value data is scoped per chaincode within the channel.  That is, key/value data can only be accessed or queried by the chaincode that created the data. Similarly, indexes should only apply to data from the corresponding chaincode  (it would not make sense to apply an index from cc1 to documents from cc2).  Since CouchDB indexes apply to all documents within a CouchDB database, the granularity of CouchDB databases will have to change from one db per channel, to one db per channel/chaincode. This is acceptable, since a db in couchdb is lightweight - think of it more like a table in other databases.

Implementation implications (Done in --FAB-7131--):
 * CouchDB database name will be based on <channel_chaincode>. See subtask -------FAB-7130------- for more details.
 * VersionedDB for the CouchDB state database impl will logically remain at channel level (since commits are applied at channel level), however there will be N channel_chaincode databases, rather than a single database defined for the VersionedDB.
 * Data will be committed to each chaincode-specific database upon block commit.  Failure to commit to any chaincode-specific database will result in block commit failure, and will be fully recoverable using existing state database recovery logic (idempotent retries).
 * Performance has been evaluated and there is no material difference between bulk writing to one CouchDB database or bulk writing to N CouchDB databases in parallel during block commit processing (actually, parallel bulk updates is the most performant method of writing to CouchDB).
 * State database recovery logic will continue to utilize a channel scoped savepoint document that is written upon commit of all chaincode data in the block. Since the CouchDB database will no longer be channel scoped, the savepoint document per channel will be saved to a new CouchDB database to store state database metadata.
 * For environments upgrading from 1.0 with existing channel-scoped databases, upon peer 1.1 start the channel_chaincode scoped databases will not be found and will be created and populated from the chain data following existing recovery process. In release notes we can recommend that CouchDB data be dropped when upgrading from 1.0 to 1.1, but even if this is not done there is no functional problem, there will simply be a set of orphaned data in the database (orphaned 1.0 channel-scoped databases, as well as newly created 1.1 channel/chaincode-scoped databases). The orphaned 1.0 channel-scoped databases can be dropped anytime, it's just easier to drop all the CouchDB data prior to the 1.1 upgrade.",,AdnanChoudhury,baohua,denyeart,fredbi,hcw,jmcnevin,jyellick,manish-sethi,minollo,mplisov,pd93,ppcm,rhegde,troyronda,xixuejia,xuanyue202,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7117,,,,,,,,FAB-6174,FABCJ-24,FAB-2877,,,,,,FAB-7733,FAB-7732,FAB-7672,FAB-7715,FAB-7752,FAB-7766,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx7kv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,AdnanChoudhury,baohua,denyeart,fredbi,hcw,jmcnevin,jyellick,manish-sethi,minollo,mplisov,pd93,ppcm,rhegde,troyronda,xixuejia,xuanyue202,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Dec/17 3:16 AM;jyellick;This looks good to me.

The piece that stuck out to me as asymmetric is that if the chaincode is installed before it is defined in any channels, then at definition time, the index creation fails; then we will be in a state of having an installed chaincode with bad indices.

Contrast this with the other flow, which is if a chaincode is defined in some channels, and then it is installed on a peer, where the index creation fails; then the chaincode will not install, and the state will differ from above.

Despite the asymmetry, I think this probably the right call, as the administrator who does the install is generally the person who is in a position to fix the error, so making it more obvious in that workflow should help usability.

In summary, this approach has my vote/support.;;;","05/Dec/17 9:57 AM;manish-sethi;[~jyellick] though this JIRA specifically talks about only index creation but the intention is also to create the database (specific to chaincode) also at the time of processing PEER_RESOURCE_UPDATE transaction (upon finding a new chaincode definition).

We should discuss the behavior if an error happens during the creation of the database. Should the transaction be considered as failed? and result in panic (as we do today if we encounter an error on writing a block or committing to a statedb)? Essentially, what we need to decide is what is the scope of the transaction processing for a PEER_RESOURCE_UPDATE transaction - Only being able to validate, update in memory structures, save to the statedb OR include the creation of artifacts that are necessary to commit the ENDORSER transactions for the chaincode (e.g., creation of the database).

If we agree to include the database creation as part of the transaction processing, then we can follow the same behavior for indexes as well and should not cause the asymmetry that you mentioned - but this is not as important to decide here as is about the overall notion of processing of PEER_RESOURCE_UPDATE transaction.

[~denyeart] This look good to me except that I would not be much inclined for exposing the variable *peer.ledger.state.couchDBConfig.autoDeployChaincodeIndexes* in yaml. This may cause confusion if admin changes its value. For instance, if this is set to false and then again to true, it would be hard to guess why certain indexes are missing (which could have caused when the variable was set to false).;;;","05/Dec/17 11:45 AM;denyeart;[~manish-sethi] In my opinion:

PEER_RESOURCE_UPDATE transaction should _return error_ if resources required for _commit_ cannot be created (e.g. couchdb channel_chaincode database). These are must-have have committing blocks.

PEER_RESOURCE_UPDATE transaction should _succeed and only write an error to log_ if resources required for _endorse_ cannot be created (e.g. couchdb indexes). These are not must-have for committing blocks.

Concerning *peer.ledger.state.couchDBConfig.autoDeployChaincodeIndexes*, there must be a way to turn off the auto deploy on the peer, for cases where it is causing a problem or admin simply prefers to manage indexes manually.

 

 ;;;","05/Dec/17 12:50 PM;manish-sethi;[~denyeart] yes, we discuss it like this but I am not certain that we can define these categories (i.e., resources required by Committer vs Endorser for future transactions) in black and white.

If you think from one angle, the scope of the transaction `PEER_RESOURCE_UPDATE` is just to define the chaincode. So, as long as peer is able to record that definition, the transaction could be considered processed. Under this approach, we need to create db upon commit of a transaction for the chaincode (or upon receiving endorsement request for the chaincode) - because that particular transaction needs the db (or indexes) and rightly raise the error because that request cannot be served. The argument for this approach would be that it would be a meaningless error (i.e. database could not be created) when someone is just trying to commit the chaincode definition - in other words, failing this transaction for the resource need of future endorser transactions.

From other point of view, it's convenient to create all the artifacts required for future transactions upfront and if does not succeed, fail the processing of `PEER_RESOURCE_UPDATE`.

While I am trying to debate in my head between the two of the above categories, somehow, I certainly do not feel comfortable diving the latter category into further two sub-categories (i.e., fail the transaction for the error in creating resources required by the Committer and don't do so for Endorser resources) - in my opinion, this is going to create a confusion.

 

The same is what I feel about 'peer.ledger.state.couchDBConfig.autoDeployChaincodeIndexes'. Exposing one more variable in the equation may complicate things further for the admins. We can always add this later if people feel the need. However, this is not as important for now to decide the above one.

 ;;;","05/Dec/17 8:13 PM;denyeart;[~manish-sethi] What exactly are you proposing?  That PEER_RESOURCE_UPDATE transaction should succeed regardless of whether couchdb database or index creation succeeds?  Assuming administrator can fix these up later.  That is fine by me.

I still believe there must be a way to disable automatic index deployment on a peer, but we can see what others think.;;;","05/Dec/17 10:33 PM;manish-sethi;yes, [~denyeart] - this looks fine to me.

In addition, I would like to understand from [~jyellick] how the listeners to resource tree work. Are these called synchronously? If yes, then we are fine. Else, this may add complication for handling a crash situation.;;;","06/Dec/17 12:36 AM;jyellick;[~manish-sethi] Yes, the listeners for any config tree are called synchronously on the committing go routine.

Although as pointed out before, we may be wandering outside of the scope of this issue, but I would always lean towards behaving deterministically and crashing, as opposed to trying to be too clever about errors.  In particular, we cannot have the local state of a peer (say, couch has run out of disk space) cause a tx to be marked invalid while other peers would mark it valid.;;;","06/Dec/17 3:06 AM;manish-sethi;[~jyellick] - we do not mark a transaction as invalid on any error. Only if a read-write conflict is detected or a custom tx processor returns a specific error of type `{color:#000000}InvalidTxError{color}`, a tran is marked as invalid.

Here we were just trying to figure out whether to fail (not invalid) the PEER_RESOURCE_UPDATE transaction in the both DB and Index creation. That is, raise a general error - which anyways results in a panic (we panic for a general error in the commit path).

In fact, this would be very convenient for us if we can raise the error.

Most likely, we would listen to the events via resource tree listener. Are you OK, if we are to enable a listener to throw an error which is propagated up in the commit go routine?;;;","06/Dec/17 3:23 AM;jyellick;Presently, there is no way to propagate errors through the listening interface.  The closest you could do would be to panic, with a recover before the committing go routine calls in.  Obviously it's just code, so we could potentially enhance the interface for this, but generally speaking, I'm not sure we want to encourage the event listeners to return errors as a matter of course.  As you indicated, the only likely remedy will be panics.;;;","07/Dec/17 3:33 PM;baohua;This change should not block the support of other database backends.

FYI., there's ongoing work to integrate mongodb: https://jira.hyperledger.org/browse/FAB-6263.;;;","08/Dec/17 3:55 AM;manish-sethi;[~baohua] no, it won't. Thanks;;;","23/Dec/17 7:05 PM;ppcm;It's great to have something to create easily indexes in database (CouchDB, MongoDB, ...), but the database must be exposed to do that.

What do you think if the index feature is defined in modeling language?

The information could be added in the JSON form for easily define in tools like Composer;;;","12/May/18 12:15 AM;minollo;[~denyeart]: Is the ""future work"" described here (additional peer command line options) associated to a JIRA we can track?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,
Release notes for what's contained in [v1.0.0-alpha2] release,FAB-3075,15656,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,markparz,markparz,markparz,11/Apr/17 5:59 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,31/May/17 6:31 AM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-docs,,,,0,,,,,,,,"We need to have a document which contains all the 'stuff' that is in the release, what you can/can't do. We have a document on the wiki for the alpha located here: 
 https://wiki.hyperledger.org/projects/fabric/v2alphacontent

I think this is the right starting point.",,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3737,,,,,,"16/May/17 5:53 AM;markparz;Release_notes_alpha2.xlsx;https://jira.hyperledger.org/secure/attachment/10822/Release_notes_alpha2.xlsx",,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,"1|hzxplr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,markparz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/17 7:17 AM;ChristopherFerris;[~markparz] we need to document the feature set added between v1.0.0-alpha and present, then we also should create a changelog from git. I think I can handle the latter. Can you please net out the delta from [https://wiki.hyperledger.org/projects/fabric/proposedv1alphacontent]

 

Thanks;;;","09/May/17 7:26 AM;ChristopherFerris;Note that the way we should handle this is to merge the changelog and feature list into the codebase, and then link from the commit message of the tagged release.;;;","10/May/17 12:03 AM;markparz;Yup [~Clayton Sims] we need to bring this up to dev.;;;","13/May/17 3:21 AM;markparz;[~ChristopherFerris] can we refer to these:

[https://gerrit.hyperledger.org/r/#/c/9303/]

[https://gerrit.hyperledger.org/r/#/c/9307/]

They are big for sure, but gives the exact details.;;;","16/May/17 5:59 AM;markparz;Here is a broken down list of the delta from Alpha 1 -> Alpha 2 [^Release_notes_alpha2.xlsx]

 

You can also note what you can accomplish in this alpha release on the wiki : https://wiki.hyperledger.org/projects/fabric/proposedv1alphacontent;;;","16/May/17 6:22 AM;markparz;I also pushed [CR-9383|https://gerrit.hyperledger.org/r/#/c/9383/] for an update to the release notes.;;;","18/May/17 10:49 PM;markparz;Abandoned the above.... since I used the change log, but Chris already pushed that piece, and in a better way.

I did update the wiki, want to take another look at it before I close this one out.;;;","31/May/17 6:31 AM;markparz;changed the wiki around and noted the changes here: [https://wiki.hyperledger.org/projects/fabric/v2alphacontent]

 

Closing this;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change /api/v1/cfssl/ prefix on fabric-ca-server endpoints to /api/v1/ prefix,FAB-3077,15658,15164,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,aleksandar.likic@gmail.com,smithbk,smithbk,11/Apr/17 9:18 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,11/Aug/17 10:57 PM,,,,,,,,fabric-sdk-go,,,,0,,,,,,,,"All REST APIs to the fabric-ca-server should not have the /api/v1/cfssl prefix, but ""/api/v1"" instead.
Support for these will be removed from fabric-ca-server soon.",,aleksandar.likic,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpm7:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,aleksandar.likic,smithbk,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/17 9:35 PM;jimthematrix;hi Troy the server change was merged earlier this morning, the SDK needs to be updated to replace ""api/v1/cfssl/"" API root with simply ""/"";;;","20/Apr/17 10:21 AM;troyronda;[~jimthematrix] sure - got it;;;","11/Aug/17 4:53 PM;smithbk;Can this be marked ""Done""?;;;","11/Aug/17 10:57 PM;aleksandar.likic;Yes, just did it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change /api/v1/cfssl/ prefix on fabric-ca-server endpoints to /api/v1/ prefix,FAB-3078,15659,15164,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suganuma,smithbk,smithbk,11/Apr/17 9:20 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 12:59 AM,,,,,v1.0.0,,,fabric-sdk-java,,,,0,,,,,,,,"For example, change /api/v1/cfssl/enroll to /api/v1/enroll.   This is true for all REST URLs to fabric-ca-server.",,smithbk,suganuma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpmf:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,smithbk,suganuma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Apr/17 11:03 PM;jimthematrix;the new root will be ""/api/v1"" based on the review comments to https://gerrit.hyperledger.org/r/#/c/8173/

[~suganuma] as a result this is now re-opened;;;","21/Apr/17 11:56 PM;suganuma;Looks like https://gerrit.hyperledger.org/r/#/c/8173/ is not yet merged.
I will update sdk-java as soon as the change is available.;;;","25/Apr/17 12:49 AM;suganuma;I found the change 8173 is merged, so I took the latest code of fabric-ca. However, changing the REST API prefix to /api/v1/ causes the following exception.
2017-04-25 00:09:00 ERROR HFCAClient:532 - POST request to https://localhost:7054/api/v1/enroll failed with status code: 404. Response: 404 page not found

2017-04-25 00:09:00 ERROR HFCAClient:316 - POST request to https://localhost:7054/api/v1/enroll failed with status code: 404. Response: 404 page not found

java.lang.Exception: POST request to https://localhost:7054/api/v1/enroll failed with status code: 404. Response: 404 page not found
        at org.hyperledger.fabric_ca.sdk.HFCAClient.httpPost(HFCAClient.java:531)
        at org.hyperledger.fabric_ca.sdk.HFCAClient.enroll(HFCAClient.java:282)
        at org.hyperledger.fabric_ca.sdk.HFCAClient.enroll(HFCAClient.java:238)
        at org.hyperledger.fabric.sdkintegration.End2endIT.setup(End2endIT.java:146)

If I change the prefix back to ""/"", then it works fine.

Could you check if the latest fabric-ca indeed works ok with this change? ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change /api/v1/cfssl/ prefix on fabric-ca-server endpoints to /api/v1/ prefix,FAB-3079,15660,15164,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,smithbk,smithbk,11/Apr/17 9:21 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 5:06 AM,,,,,,,,fabric-sdk-node,,,,0,,,,,,,,"For example, change /api/v1/cfssl/enroll to /api/v1/enroll.  This is for all REST URLs to fabric-ca-server.",,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpmn:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 5:29 AM;jimthematrix;http://gerrit.hyperledger.org/r/8429;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change /api/v1/cfssl/ prefix on fabric-ca-server endpoints to /api/v1/ prefix,FAB-3081,15662,15164,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,grapebaba,smithbk,smithbk,11/Apr/17 9:22 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,19/May/17 2:09 PM,,,,,v1.0.0,,,fabric-sdk-py,,,,0,,,,,,,,"For example, change /api/v1/cfssl/enroll to /api/v1/enroll.  This is true for all REST URLs to fabric-ca-server.  Support for the /api/v1/cfssl prefixed routes will be removed soon.",,lafenicecc,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpmv:",,,,,,Sprint 13 - Membership Service,Sprint 14 - Membership Service,Sprint 15 - Membership Service,Sprint 16 - Membership Service,,,,,,,,,,,,,,,,,,,,,lafenicecc,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 12:26 PM;lafenicecc;When will the prefix be removed? Please notice us, thanks!;;;","19/Apr/17 9:36 PM;jimthematrix;hi [~grapebaba] [~lafenicecc], the server change was merged earlier this morning, the SDK needs to be updated to replace ""api/v1/cfssl/"" API root with simply ""/"";;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose membership API,FAB-3085,15667,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Duplicate,,grapebaba,grapebaba,11/Apr/17 2:24 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,20/Jul/18 11:06 PM,,,,,Future,,,,,,,0,gossip,MembershipServices,security,Usability,,,,"Assume we use kubernetes or swarm to manage blockchain networks in production. We deploy all peers, orderers, ca using containers/pods, kafka, couchdb as well. After initial deployment, it is better to have a mechanism to detect and recovery failed components.

For fabric e2e example, we have two peer orgs and each org has two peers(one anchor). In normal we will have four containers/pods running. However unfortunate one peer(not anchor) failed, but the container which include it is still running. In this case, only through kubernetes we can not found this problem ASAP so that we can not automatic recover. But I think gossip should get that fail info and update the membership for other peers. 

Now that I think if we can expose some APIs to let external side know the membership update. For this case, if i can get the infomation, i can find out actually one container need restart or remove and add a new one.

[~yacovm]suggest may add some methods in SCC can help
[~binhn]suggest we can expose API to request an anchor peer to return the peers that it gossips with within its org
[~muralisr]said it need carefully consider security and privacy

Hope we could discuss here and make sure if it can be implemented and how can do it    ",,C0rWin,grapebaba,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpnz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,C0rWin,grapebaba,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/17 3:54 PM;yacovm;I said, that if you want to add methods to the gRPC server, I guess they should be processed in SCC. That's all.
Can't you make it that if the peer process dies, the container dies with it?

Also- I don't think that we should expose any requests only to anchor peers, as there is no reason not to do that for all peers, since the information peers with the same circumstances (same channel, same orgs, etc.) is identical to the information anchor peers have.

{quote} so that we can not automatic recover. But I think gossip should get that fail info and update the membership for other peers. {quote}
Gossip updates the membership info of peers already. It is part of how it works.

{quote} For this case, if i can get the infomation, i can find out actually one container need restart or remove and add a new one.{quote}
Although I see merit in exposing membership information, I don't think this use case is a very good one for using gossip membership - if you have a production environment you should already use some monitoring and auto-failover mechanisms without the help of gossip. 

Inviting [~C0rWin] to this discussion ;;;","11/Apr/17 5:13 PM;grapebaba;[~yacovm]Thanks, this case may be not good. Due to poor English, I cannot describe more cases. Let me see if I understand you correctly. Only Add methods in SCC to expose this API?;;;","11/Apr/17 5:23 PM;yacovm;What I simply meant was- if such an API is exposed, it should be via SCC since that's how we service RPCs anyway (well, apart from that ancient event-hub channel);;;","11/Apr/17 5:41 PM;grapebaba;{quote}Can't you make it that if the peer process dies, the container dies with it?{quote}
Maybe it is not down but non-responsive. I have no idea if any way to make container stop with it. But health check should helpful.
{quote}Also- I don't think that we should expose any requests only to anchor peers, as there is no reason not to do that for all peers, since the information peers with the same circumstances (same channel, same orgs, etc.) is identical to the information anchor peers have.{quote}
Totally agree, i think we can request any running peer for this information.
bq. Gossip updates the membership info of peers already. It is part of how it works.
I know that. I don't describe clearly here.;;;","12/Apr/18 9:11 PM;C0rWin;Closing this one in light of work being done for SD FAB-8779.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix formatting in peer cli log event,FAB-3086,15668,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,11/Apr/17 5:46 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 2:38 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"in *peer/chaincode/install.go*
        if proposalResponse != nil {
                logger.*Debug*(""Installed remotely %v"", proposalResponse)
        }



should be *Debugf*",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpo7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Misleading comments in peer/core.yaml,FAB-3087,15669,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,11/Apr/17 5:57 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/Apr/17 6:11 PM,,,,,,,,,,,,0,,,,,,,,"The following comments in the core.yaml are misleading and confusing to users.
    # The Address this Peer will bind to for providing services --> This is simply not true
    address: 0.0.0.0:7051
    # Whether the Peer should programmatically determine the address to bind to.
    # This case is useful for docker containers. ---> This is not accurate
    addressAutoDetect: false
",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpof:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - build ConfigEnvelope from JSON input,FAB-3089,15671,15490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,11/Apr/17 7:57 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,20/Apr/17 11:30 AM,,,,,v1.0.0,,,,,,,0,node-SDK,,,,,,,Have the Node SDK take a simplified JSON input and build a protobuf ConfigEnvelope. This object could then be used to create a channel.,,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2995,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpov:",,,,,,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,,,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - add API support for channel create,FAB-3090,15672,15490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,11/Apr/17 8:22 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/Dec/17 10:13 AM,,,,,,,,,,,,0,node-SDK,,,,,,,"New API's
From the Client class 
      *buildChannelCreateTransaction*( msp_manager, channel_definition)
          --- @param MSPManager object fully populated with all required MSP definitions
          --- @param JSON object that describes the new channel and will reference the MSP definitions by name/id
          ---  @returns protobuf ConfigEnvelope based transaction object ready to be signed      
     
     *signChannelCreateTransaction*(config_transation)
           --- @param protobuf ConfigEnvelope based transaction object to be signed by the current user who must represent an organization on the channel create policy
          --- @returns signature

    createChannelwithSignatures(signatures, config_transaction)
          --- @param Signature[] signatures the list of collected signatures required by the channel create policy
          --- @param Protobuf ConfigEnvelope based transaction object
          --- @returns NodeSDK Chain object fully initialized, may be used for `joinChannel`

      ",,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpp3:",,,,,,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,,,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
txid missing in config tx in genesis block,FAB-3091,15673,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,kchristidis,manish-sethi,manish-sethi,11/Apr/17 9:37 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 7:59 PM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,configuration,,,,,,,"While running ledger tests, I noticed that the configuration transactions does not have a txid set.
Is this behavior intentional? (https://github.com/hyperledger/fabric/blob/master/common/genesis/genesis.go#L46)

If yes, then we would need to change in the ledger code so as to check for the transaction type and index by txid only for endorser transactions.

Marked one test (core/scc/qscc/query_test.go - TestQueryGetBlockByTxID) as skip in https://gerrit.hyperledger.org/r/#/c/7929/ which should be un-skipped after we resolve this.",,kchristidis,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,"1|hzxmsn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/17 9:39 PM;manish-sethi;[~jyellick] [~muralisr] [~denyeart] - Can you please comment on the above?;;;","12/Apr/17 1:15 AM;manish-sethi;Just learned that Murali and Jason are out. [~binhn], [~kchristidis] can you please comment.;;;","15/Apr/17 2:19 AM;kchristidis;Studied the various config TX-related outputs in our codebase and this does seem like an omission.

For reference:
# `configtx.MakeChainCreationTransaction` does set a tx_id, so you get it via the configtxgen tool when the option to output a channel creation transaction is selected. (`configtxgen.doOutputChannelCreateTx` calls `configtx.MakeChainCreationTransaction`.) You also get this in the calls happening in `peer/channel/create.go` and `broadcast_config/newchain.go`.
# However, as you point out, `genesis.Block` does not set a tx_id, so you do not get it via the configtxgen tool when the option to output a genesis block is selected. (`configtxgen.doOutputBlock` calls `provisional.GenesisBlockForChannel` which in turns calls `genesis.Block`.)

Even if the argument is that for some reason the tx_id is not necessary, I'd argue that we should still have it for uniformity's sake.

I'll submit a patch and update this JIRA accordingly.;;;","15/Apr/17 4:06 AM;kchristidis;Patch submitted: http://gerrit.hyperledger.org/r/8053;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
deploy different chaincodes by one name,FAB-3092,15674,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,YuryAndreev,YuryAndreev,11/Apr/17 10:06 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 2:52 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"1) in my docker-compose I can made volumes different chaincode by on path
2) I can install and instantiate different chaincode with one name and its run well",,C0rWin,muralisr,YuryAndreev,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2859,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxppb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,muralisr,YuryAndreev,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/17 4:22 AM;C0rWin;[~YuryAndreev] Can you please add *exact* steps to reproduce the problem and also describe what is the problem is. 

1. What do you think the problem is? Why do you think this is a problem.
2. How exactly anyone can reproduce it?
3. Is there any suggestions of how this could be fixed/handled?;;;","13/Apr/17 2:35 PM;muralisr;[~YuryAndreev]  https://jira.hyperledger.org/browse/FAB-2859 links install with instantiation and will prevent chaincode mismatches (using a different chaincodes on different peers with the same name than an instantiated one , replacing the chaincode with a new one after instantiation etc).

In general, instantiation links the fingerprint of the chaincode withe installed package. Corresponding CRs are https://gerrit.hyperledger.org/r/#/c/7875 /https://gerrit.hyperledger.org/r/#/c/7879/

If you agree, please close the issue once the CRs are merged.;;;","13/Apr/17 2:51 PM;YuryAndreev;Thank you for remedying this problem.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
No error upon peer startup if CouchDB user/password not set,FAB-3093,15675,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,11/Apr/17 10:27 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 5:02 AM,,,,,DUPLICATE,v1.0.0,,fabric-ledger,,,,0,,,,,,,,"If CouchDB user/password is enabled in CouchDB, but the peer is not configured to use a user/password, you don't receive an error upon channel creation.  You should receive an error upon peer startup during the CouchDB connection verification.",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3094,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx4lj:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 4:27 AM;ChristopherFerris;I cannot find a CR that references this JIRA. Not sure what is in review. [~denyeart];;;","22/Apr/17 5:01 AM;denyeart;This is fixed as a byproduct of FAB-3094.  Closing as dup.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Errors in CouchDB log if system databases are not created,FAB-3094,15676,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,11/Apr/17 10:40 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 5:20 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"CouchDB log fills with errors if its system databases are not created. The system databases should be created upon peer startup, if they do not yet exist.

http://docs.couchdb.org/en/2.0.0/install/index.html#single-node-setup

curl -X PUT http://127.0.0.1:5984/_users
curl -X PUT http://127.0.0.1:5984/_replicator
curl -X PUT http://127.0.0.1:5984/_global_changes
",,dbshah,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3093,,,,,FAB-2662,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx4lb:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,dbshah,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve User Experience for v1.0 Release Milestone,FAB-3095,15677,,Epic,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,greg.haskins,greg.haskins,11/Apr/17 11:12 PM,21/Jul/18 4:08 AM,28/Oct/23 2:59 AM,06/Jul/18 9:56 PM,,,,,,,,fabric-docs,fabric-peer,fabric-sdk-node,,4,,,,,,,,"This epic is intended to capture all work related to improving the user experience with the code base.  This may include everything from usability, buildability, deployability, etc, particularly as it pertains to consumers (users, network administrators, chaincode developers, etc) of Hyperledger Fabric.  ",,ChristopherFerris,greg.haskins,TiantianGao,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-4,,v1.0 UX,To Do,,,Unset,,,,"1|hzxppj:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,greg.haskins,TiantianGao,vdods,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 12:48 AM;ChristopherFerris;I think that we need to decide how much (if any) of this gets into v1.0 and how much we defer to post v1.0.;;;","12/Apr/17 1:41 AM;greg.haskins;Agreed.  I just added the ones that I thought _may_ be applicable.  But we can adjust as appropriate.;;;","12/Apr/17 1:42 AM;greg.haskins;I should add: I suspect there is quite a bit more that could fall under this category too.  Some might already exist and need reclassification, some might need to be created.;;;","21/Apr/17 8:31 AM;vdods;I'd like to suggest that having a working example web app (could be as plain as the original marbles demo) demonstrating correct and good-practice use of fabric-sdk-node, etc.  For all the hours I've put into trying to transform v1.0 fabric-sdk-node integration test code into a usable web app, I've been frustratingly unproductive compared to the same process for v0.6.

I'd suggest that defining success in the ""user experience"" category be largely based on the process of developing such an app, and that it is of central importance to the project -- if there's no one writing apps on top of a platform, then it's not serving its purpose.;;;","06/Jul/18 9:56 PM;ChristopherFerris;closing this. We can open a new one for 1.3 if agreed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add cryptogen options to specify org names,FAB-3098,15685,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,smithbk,smithbk,smithbk,12/Apr/17 1:54 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,20/Apr/17 3:05 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"Allow user to specify the name of the orgs rather than just the number of orgs.
This is for peer orgs and orderer orgs.",,elli-androulaki,greg.haskins,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx6h3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,greg.haskins,smithbk,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 3:18 AM;elli-androulaki;[~keithsmith], feel free to comment if this is for v1.0.;;;","14/Apr/17 11:14 PM;smithbk;v1.1 is OK;;;","18/Apr/17 1:23 AM;smithbk;Actually, I just received a request for this to be in v1 and since it was simple, just going ahead and pushing.

See http://gerrit.hyperledger.org/r/8117;;;","20/Apr/17 12:05 PM;greg.haskins;Sorry Keith, It looks like we had a redundant effort here.  I was asking around if anyone was working on cryptogen, but I didn't ask in the right places apparently.  

In any case, I have this work:

https://gerrit.hyperledger.org/r/#/c/8269/

This would supersede your patch here.  Let me know what you think.

-Greg;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
capabilities doc was never converted from md ,FAB-3099,15686,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,12/Apr/17 3:20 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 11:48 PM,v1.0.0,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"capabilities,md was submitted but never merged, when the transpose to rst was done, there was no content. copy content from 4855 to the docs/source/capabilities.rst.",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1694,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxppr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename java shim java package,FAB-3101,15688,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,12/Apr/17 5:28 AM,25/Jan/22 9:54 AM,28/Oct/23 2:59 AM,18/Apr/17 10:58 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,Rename {{org.hyperledger.java}} package to {{org.hyperledger.fabric.shim}}.,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2660,,,FABJ-219,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxtin:",,,,Unset,,Sprint 16  - Endorser,,,,,,,,,,,,,Unset,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip DialOptions need to use the comm.SecureServer cert pools,FAB-3105,15692,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,yacovm,yacovm,12/Apr/17 6:01 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/May/17 6:32 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,"Currently, the DialOptions passed to gossip is from https://github.com/hyperledger/fabric/blob/master/core/comm/connection.go#L171-L187 
which prevents peers from communicating with peers from different orgs, when TLS is used, because the TLS client rejects the TLS server from the other org.",,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,";14/Apr/17 7:27 PM;mastersingh24;3600",";30/Apr/17 8:23 PM;mastersingh24;3600",";01/May/17 2:23 AM;mastersingh24;7200",";01/May/17 2:39 AM;mastersingh24;60",43200,0,14460,33%,50400,0,25260,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpqn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 8:43 PM;mastersingh24;Hopefully this will be straightforward as we already do something similar for connecting to the orderer here:  https://github.com/hyperledger/fabric/blob/master/core/comm/connection.go#L89

The proposal to fix this would be to add a {{GetGossipServiceCredentials()}} method which does the same thing as {{GetDeliverServiceCredentials()}} except it will return the app (aka peer) roots rather than the orderer roots;;;","13/Apr/17 8:59 PM;yacovm;It's a bit more complicated than that in my opinion:
in: https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L153
we have opts []grpc.DialOption that are used both in production and in test code.
The peer also works in cases where no TLS is used, but in tests- we have our own self-signed TLS certs that are generated in the tests (to test running with TLS)

Now, the dial options are set here: https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L134-L139

I suggest that instead of dialOptions, we would have a callback that returns dialOptions on demand, and in all places in *gossip/comm/comm_impl*, that callback would be called instead of referencing the *opts* variable. 
This way- it'll work both for test code, both for non-TLS, and both for TLS code.

What do you think? [~mastersingh24] [~C0rWin];;;","14/Apr/17 6:39 PM;mastersingh24;[~yacovm] I see what you are saying here, but  https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L134-L139 was the only place I found that used {{InitTLSFor Peer()}} (as you stated above) and it seems that should be the only call we need to replace.  It seems it would also be the least invasive in the code and should solve the problem for non-test scenarios.

;;;","14/Apr/17 7:01 PM;yacovm;I don't think it'll work. DialOptions is immutable, isn't it?
This is set on startup, but peers join channels at runtime.

Maybe I'm missing something though;;;","01/May/17 2:22 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8777/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode interface GetCreator doesn't return the internal object,FAB-3106,15693,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,binhn,binhn,12/Apr/17 6:07 AM,23/Jan/20 4:03 AM,28/Oct/23 2:59 AM,23/Jan/20 4:03 AM,v1.0.0,,,,Future,,,fabric-peer,,,,0,stale-item,,,,,,,"The current interface stub.GetCreator returns the serialized identity, which is not useful for chaincode wanting to access the internal representation of identity. For example, if the MSP is configured with x.509, then the chaincode would need access to the x.509 certificate. ",,binhn,sykesm,yeyc.linuxf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxox3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,binhn,sykesm,yeyc.linuxf,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:03 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Use ""identity"" instead of ""user"" in the help and docs",FAB-3107,15694,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,aambati,aambati,aambati,12/Apr/17 6:12 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Apr/17 8:05 AM,v1.0.0,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"Currently, user and identity are being used interchangeably, which causes confusion. An identity can be of type ""user"".",,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpqv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 4:13 AM;aambati;https://gerrit.hyperledger.org/r/7989;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Anchor peer connection logic on joinChannel is flawed,FAB-3109,15696,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,12/Apr/17 6:49 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/May/17 1:34 AM,v1.0.0,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,"The connection to anchor peer logic works well if mutual TLS is used:
https://github.com/hyperledger/fabric/blob/master/gossip/discovery/discovery_impl.go#L139-L163
{code}
func (d *gossipDiscoveryImpl) Connect(member NetworkMember, sendInternalEndpoint func() bool) {
	d.logger.Debug(""Entering"", member)
	defer d.logger.Debug(""Exiting"")

	go func() {
		for i := 0; i < maxConnectionAttempts && !d.toDie(); i++ {
			peer := &NetworkMember{
				InternalEndpoint: member.InternalEndpoint,
				Endpoint:         member.Endpoint,
			}

			if !d.comm.Ping(peer) {
				if d.toDie() {
					return
				}
				d.logger.Warning(""Could not connect to"", member)
				time.Sleep(getReconnectInterval())
				continue
			}
			req := d.createMembershipRequest(sendInternalEndpoint()).NoopSign()
			d.comm.SendToPeer(peer, req)
			return
		}
	}()
}
{code}
But, if we don't have mutual TLS, the probe works(because, the server (anchor peer) doesn't authenticate the client) as long as the remote anchor peer is online, regardless if join channel was called on it or not.
A very likely scenario is that a peer connects to an anchor peer that join channel wasn't called on it yet, and the membership request is sent, but is discarded by the anchor peer because it cannot find the MSP manager for the channel (because, it hadn't join a channel yet...).

IMO We need to change the logic to support such scenarios.

* I guess the simplest thing would be to periodically (once in every few minutes?) send a membership request, if the peer is responding to a ping.

* Or, maybe have only anchor peers do that to other anchor peers?

[~C0rWin] [~gennadyl] thoughts? ",,C0rWin,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2965,,,,,,,,,,,,,FAB-2965,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxprb:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 5:12 PM;C0rWin;I think that after sending membership request and before exiting the go routine which makes connection we can wait for corresponding membership response with timeout. And in cases timeout expires before we getting the response retry again.

Additionally I think that retry logic should be exponential backoff strategy to increase the probability of getting connected in case of the network partition.;;;","12/Apr/17 6:23 PM;yacovm;> I think that after sending membership request and before exiting the go routine which makes connection we can wait for corresponding membership response with timeout. And in cases timeout expires before we getting the response retry again.

If we can pull this off, it'll be great!

> Additionally I think that retry logic should be exponential backoff strategy to increase the probability of getting connected in case of the network partition.

Agreed.;;;","19/May/17 1:15 AM;ChristopherFerris;[https://gerrit.hyperledger.org/r/#/c/9199/16] needs some review. It is a fix to an intermittently failing test. I believe that @yacovm and @C0rWinwant it in, certainly we need to fix the intermittent CI failures. However, there are two approaches that we could take. one being simply skip the intermittently failing test for now. This does introduce about 200 LOC in the production code, but also adds lots of test code. Thoughts?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip doesn't have timeout in a dialOption when running in production,FAB-3110,15697,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,12/Apr/17 7:02 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 5:04 PM,,,,,v1.0.0,,,,,,,0,beta,gossip,,,,,,"https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L80
{code}
	if len(dialOpts) == 0 {
		dialOpts = []grpc.DialOption{grpc.WithTimeout(util.GetDurationOrDefault(""peer.gossip.dialTimeout"", defDialTimeout))}
	}
{code}
The dial timeout is only set in code paths that are in tests.
In production, the gossip layers inherit dial options that are set in gossip_service, which doesn't set a dial timeout.

I suggest we simply add a dial timeout to the comm layer here:
https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L126-L145
and that's it.
{code}
// NewCommInstance creates a new comm instance that binds itself to the given gRPC server
func NewCommInstance(s *grpc.Server, cert *tls.Certificate, idStore identity.Mapper, peerIdentity api.PeerIdentityType, dialOpts ...grpc.DialOption) (Comm, error) {
	commInst, err := NewCommInstanceWithServer(-1, idStore, peerIdentity, dialOpts...)
	if err != nil {
		return nil, err
	}

	if cert != nil {
		inst := commInst.(*commImpl)
		if len(cert.Certificate) == 0 {
			inst.logger.Panic(""Certificate supplied but certificate chain is empty"")
		} else {
			inst.selfCertHash = certHashFromRawCert(cert.Certificate[0])
		}
	}

	proto.RegisterGossipServer(s, commInst.(*commImpl))

	return commInst, nil
}
{code}
[~C0rWin] [~gennadyl]",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxprj:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
revamp docs,FAB-3111,15698,,Story,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,markparz,ChristopherFerris,ChristopherFerris,12/Apr/17 7:53 AM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,30/Mar/18 9:59 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,"The documentation is in really bad shape. Some of it is not consistent with the code, or completely outdated, and much is just plain missing.

The table of contents is impossible to navigate and there is actually much more in the source tree that is not reflected in the TOC and therefore doesn't exist.

I've said previously that we need a less complicated TOC that can fit in a single view. Not some tome that people need to scroll through.

Look at other examples of open source (not product) documentation. Docker is a good example: https://docs.docker.com/

The TOC expands, but here's the gist:
Get Docker
Get Started
User Guide
Admin Guide
Troubleshooting
Manage a swarm
Secure Engine
Extend Engine

Docker isn't alone. This is how most are organized. I checked hadoop, cloud foundry, openstack, kubernetes, they are all roughly organized like this, and this is what I had previously been recommending.

As someone coming to the documentation page, I want to easily find where I need/want to dig in. First, I need to get X. Then, I probably want to get started. Of course, if I am an operations guy, I might want to skip right to the admin/operations guide. Or, if I am a developer, I can dive right into the user guide or a tutorial. My point is that we need to make it THAT simple for people to find what they want.

Now, I do think that we need something that tells people what Fabric is and what its capabilities are.

So, I recommend the following outline:

Introduction to Fabric
- Features
- Use cases
- Glossary
- Architecture
Get Fabric
- v1.0 (coming soon)
- v1.0-alpha
- v0.6 (deprecated) (link to v0.6 docs)
Get Started
- Deploy your first peer cluster
- Sample apps
User Guide
- Tutorial
- CLI
- Node SDK
- Java SDK
- Developing Chaincode
-- Golang
-- Java
Operations Guide
- Setting up a network
- Manage a peer cluster
- Manage a Kafka orderer
- Managing peers with CouchDB
- Managing fabric-ca
-- with ldap
-- with an alternate provider
-- cluster operations with haproxy
Troubleshooting
Fabric Developer Guide
- Setup development environment
- Building Fabric components
- Contributing
- Maintainers

Again, only the top level are exposed unless the user toggles a top level to expose the next level.
",,ChristopherFerris,joe-alewine,matingwei,rajeev20,reoim10,,,,,,,,,,,,,,,,,,,,,,,,,,,,,288000,288000,,0%,288000,288000,,,FAB-4324,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-2254,,,,,,,,,"1|hzxprr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,joe-alewine,matingwei,rajeev20,reoim10,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/17 9:25 AM;reoim10;Totally agreed. 
Newbie like me needs a good documentation. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
common/configtx/test/helper.go testing utilities initializes at runtime,FAB-3112,15699,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,12/Apr/17 11:58 AM,21/Jul/18 3:57 AM,28/Oct/23 2:59 AM,27/Apr/17 10:08 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"This logic has an init() function which triggers in both test and production modes, which is not correct.",,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxprz:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add error to log in case of gossip authentication failure,FAB-3113,15700,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,12/Apr/17 4:34 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 5:05 PM,,,,,v1.0.0,,,,,,,0,,,,,,,,"The error isn't printed to the log here: https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_impl.go#L519

we should add to the log entry the error. ",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxps7:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identities cache expiration in gossip,FAB-3114,15701,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,gennadyl,gennadyl,12/Apr/17 4:36 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 7:24 AM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,Certificates/identities stored in gossip data structures even after they expired. We need to clean them from there...,,Clayton Sims,gennadyl,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxpsf:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,gennadyl,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Apr/17 10:29 AM;Clayton Sims;Not sure if this Jira was discussed in scrum.   We are working to hold scope to sprint 16.   What is eta?  if not in sprint 16 can it be deferred?;;;","20/Apr/17 8:27 PM;yacovm;{quote}Not sure if this Jira was discussed in scrum.{quote}
It was

{quote}What is eta?{quote}
I'm on it ;;;","20/Apr/17 10:02 PM;Clayton Sims;ETA = estimated time of arrival.      it means when do you expect it to be complete
;;;","20/Apr/17 10:13 PM;yacovm;I think that by tomorrow's scrum. ;;;","21/Apr/17 4:23 PM;yacovm;As predicted, I have uploaded a change set that tackles this issue, [~Clayton Sims]
https://gerrit.hyperledger.org/r/#/c/8315
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peers not authorized to Chain allowed to join,FAB-3117,15704,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,timpii,timpii,12/Apr/17 8:48 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 12:00 AM,v1.0.0,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"Peers which are not authorized to a Chain can successfully join the chain. However, they can not invoke transactions. Being able to query has not been tested. 

The joining of a chain should ensure prior authorization to the chain.",,denyeart,elli-androulaki,kchristidis,timpii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5hr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,elli-androulaki,kchristidis,timpii,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 1:09 AM;denyeart;[~ellaki] [~adc] [~ales]
Moving to fabric-crypto for you to assess.;;;","13/Apr/17 1:18 AM;elli-androulaki;Hi, I believe this relates to the changesets that [~adc] has under review :)
;;;","19/Apr/17 6:16 PM;elli-androulaki;Assigned to Costas, as this is to be taken care of by the config framework :);;;","21/Apr/17 2:44 PM;kchristidis;Tim you need to update this issue by describing:

The configuration of the genesis block
The configuration of the channel
The precise sequence of steps that you followed, edited down to the bare minimum

(In StackOverflow lingo, you need to provide the MWE.)

I suspect that you are using configtxgen which defaults to an AcceptAll policy, hence the behavior that you see, while unfortunate, is justified.;;;","21/Apr/17 6:21 PM;timpii;Yes - you are correct. We were using the configgentx. As that is the case and you have explained it is the expected behavior then we can close this JIRA item.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Image fabric-ccenv was not automatically pulled for chaincode instantiate,FAB-3118,15705,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,oleksandr.borysenko,oleksandr.borysenko,12/Apr/17 11:38 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/May/17 1:57 AM,v1.0.0-alpha1,v1.0.0-alpha2,,,v1.0.0,,,fabric-peer,,,,1,ccenv,v1.0,,,,,,"I tried to reproduce actions from lesson from Hyperledger chaтnel.
[Hyperledger fabric install & instantiate chaincode|https://www.youtube.com/watch?v=SXTAVFM2liU]

I executed next commands in client
{code}
docker exec -it cli bash
peer channel create -c myc -o orderer:5005
CORE_PEER_ADDRESS=peer0:7051 peer channel join -b myc.block
{code}

Then on local peer
{code}
docker exec -it peer0 bash
export GOPATH=/opt/gopath
peer chaincode install -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0
{code}

And on chaincode instantiate step
{code}
docker exec -it cli bash
CORE_PEER_ADDRESS=peer0:7051 peer chaincode instantiate -C myc -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}'
{code}

I have got error:
{noformat}
peer0      | 2017-04-12 13:22:29.075 UTC [chaincode-platform] func1 -> ERRO 03a Failed to generate platform-specific docker build: Error creating container: no such image
peer0      | 2017-04-12 13:22:29.076 UTC [dockercontroller] deployImage -> ERRO 03b Error building images: Failed to generate platform-specific docker build: Error creating container: no such image
peer0      | 2017-04-12 13:22:29.076 UTC [dockercontroller] deployImage -> ERRO 03c Image Output:
peer0      | ********************
peer0      | 
peer0      | ********************
peer0      | 2017-04-12 13:22:29.076 UTC [chaincode] Launch -> ERRO 03d launchAndWaitForRegister failed Error starting container: Failed to generate platform-specific docker build: Error creating container: no such image
{noformat}

I pulled 
{code}
docker pull hyperledger/fabric-ccenv:x86_64-1.0.0-alpha
{code}
And It fixed issue:
{code}
root@671076dcdd3a:/opt/gopath/src/github.com/hyperledger/fabric/peer# CORE_PEER_ADDRESS=peer0:7051 peer chaincode instantiate -C myc -n mycc -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -v v0 -c '{""Args"":[""init"",""a"",""100"",""b"",""200""]}' -o orderer:5005
2017-04-12 14:21:53.204 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2017-04-12 14:21:53.205 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
2017-04-12 14:21:53.225 UTC [main] main -> INFO 003 Exiting.....
{code}

I attached full log and my manifests


Images list
{noformat}
osboxes@osboxes:~/work/hyperledger$ docker images
[sudo] password for osboxes: 
REPOSITORY                     TAG                  IMAGE ID            CREATED             SIZE
peer0-peer0-mycc-v0            latest               426e73fe1590        22 minutes ago      176.2 MB
yeasy/hyperledger-fabric-ca    latest               4dcd0dcdfeb5        9 days ago          814.9 MB
yeasy/hyperledger-fabric-cop   latest               79b32d4f7aff        2 weeks ago         814 MB
hyperledger/fabric-ca          latest               35311d8617b4        3 weeks ago         239.8 MB
hyperledger/fabric-ca          x86_64-1.0.0-alpha   35311d8617b4        3 weeks ago         239.8 MB
hyperledger/fabric-orderer     latest               5685fd77ab7c        3 weeks ago         181.6 MB
hyperledger/fabric-orderer     x86_64-1.0.0-alpha   5685fd77ab7c        3 weeks ago         181.6 MB
hyperledger/fabric-peer        x86_64-1.0.0-alpha   784c5d41ac1d        3 weeks ago         184.3 MB
hyperledger/fabric-ccenv       x86_64-1.0.0-alpha   91792014b61f        3 weeks ago         1.294 GB
hyperledger/fabric-baseimage   latest               f4751a503f02        10 weeks ago        1.271 GB
hyperledger/fabric-baseimage   x86_64-0.3.0         f4751a503f02        10 weeks ago        1.271 GB
hyperledger/fabric-baseos      x86_64-0.3.0         c3a4cf3b3350        10 weeks ago        161 MB
hyperledger/fabric-peer        latest               21cb00fb27f4        5 months ago        1.424 GB
hyperledger/fabric-baseimage   x86_64-0.1.0         db53d04b117c        6 months ago        1.39 GB
{noformat}

And containers
{noformat}
671076dcdd3a        hyperledger/fabric-peer:x86_64-1.0.0-alpha   ""/bin/sh""                About an hour ago   Up About an hour                                       cli
6cdfab02c366        hyperledger/fabric-peer:x86_64-1.0.0-alpha   ""peer node start --pe""   About an hour ago   Up About an hour                                       peer0
201cbd6307a8        hyperledger/fabric-peer:x86_64-1.0.0-alpha   ""peer node start --pe""   About an hour ago   Up About an hour                                       peer1
da1ca3044ea8        hyperledger/fabric-orderer                   ""orderer""                2 hours ago         Up About an hour    0.0.0.0:5005->5005/tcp, 7050/tcp   orderer
{noformat}",,greg.haskins,hariharanatarajan,oleksandr.borysenko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-282,,,,,,,,,,,,,,"12/Apr/17 11:37 PM;oleksandr.borysenko;Log.txt;https://jira.hyperledger.org/secure/attachment/10657/Log.txt","12/Apr/17 11:37 PM;oleksandr.borysenko;docker-2peer.yml;https://jira.hyperledger.org/secure/attachment/10658/docker-2peer.yml",,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpt3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,hariharanatarajan,oleksandr.borysenko,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/May/17 12:10 AM;hariharanatarajan;Did u have to run the pull on the peer or on the host . I have the same issue on windows . 

But I have a slightly different way to recreate it : 

      I have a local checkout on vagrant on windows and I was to create the entire set of local containers and the tests passed

      i pushed the images to a local registry and then tried running the tests from a different machine which does not have the sources and the paths are different

 ;;;","16/May/17 3:45 AM;greg.haskins;Fix submitted: https://gerrit.hyperledger.org/r/#/c/9379/;;;","16/May/17 3:49 AM;greg.haskins;Arguments for 1.0 merge consideration:

Without this patch, the system will not automatically pull the ccenv container when it is not found locally, such as the case when deployed from binary artifacts rather than built from source.  The implications of this are:
 * Best case, the operator and/or deployment scripts are forced manually pull the image
 * Worst case, the system is not deployable.  This can happen when using distributed docker orchestration engines (e.g. Kubernetes) because the peer can be run on arbitrary nodes in the network.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"copy ""cryptogen"" and ""configtxgen"" binaries in peer image",FAB-3119,15706,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,12/Apr/17 11:58 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,28/Apr/17 11:11 PM,,,,,v1.0.0,,,fabric-quality,,,,0,build-system,quality,,,,,,"copy ""cryptogen"" and ""configtxgen"" binaries in peer image to access these binaries from peer docker image. 

perform ""make configtxgen"" to generate configtxgen binary file and push this to peer docker image
perform ""make cryptogen"" to generate cryptogen binary file and push this to peer docker image

",,greg.haskins,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxptb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,greg.haskins,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 4:14 AM;rameshthoomu;Patch has been submitted https://gerrit.hyperledger.org/r/#/c/7987/ - In-Review;;;","18/Apr/17 10:16 PM;greg.haskins;Architecturally, the peer container was meant to be a minimal vehicle for running a peer node.  It would, therefore, be suboptimal to include peripheral binaries such as configtxgen because it should remain as small and focused as possible.

However, I also understand what you are after here.  I would suggest that we can move forward with this plan only with the notion that it is temporary.  Longer term, we should strive to split out the CLI components from the peer.  Once this occurs, we can once again make ""fabric-peer"" a minimal container. ;;;","19/Apr/17 3:28 AM;rameshthoomu;Yes [~greg.haskins] this is a temporary fix.. Going forward we will generate binary artifacts to nexus repository. [~mastersingh24] has submitted this change in Makefile (https://gerrit.hyperledger.org/r/#/c/7981/) and I am working on publishing binary artifacts to nexus repository through Jenkins (https://jira.hyperledger.org/browse/FAB-2986). ;;;","28/Apr/17 11:11 PM;rameshthoomu;As per [~greg.haskins] comments I have abandon the patch. Greg have different approaches to implement this.. Closing this JIRA item.. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add release targets to Makefile,FAB-3120,15707,15566,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,13/Apr/17 12:46 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 6:59 PM,,,,,v1.0.0,,,,,,,0,build-system,,,,,,,"While there are targets to make binaries for some packages, we need a more uniform way of creating the binaries we want to publish.

We currently have 3 build platforms -  linux-amd64, ppc64le and s390x - but we don't have build environments for windows-amd64 or darwin-amd64 (macos).  Go has the ability to cross-compile so we'll add release targets for all platforms and can choose to cross-compile for Windows / macos in the CI for linux-amd64",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";13/Apr/17 6:59 PM;mastersingh24;7200",,,,7200,0,7200,100%,7200,0,7200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxptj:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add e2e and release binaries to nexus /release location (instead of /logs/sandbox), and point download utilities there",FAB-3122,15709,15566,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rameshthoomu,mastersingh24,mastersingh24,13/Apr/17 2:38 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/May/17 1:07 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"alpha2 e2e and release binary content has been uploaded to

[https://nexus.hyperledger.org/content/repositories/logs/sandbox/fabric-binary/]
and
[https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/.|https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/]

bootstrap.sh currently points to the /logs/sandbox location, need to switch it to use the /releases location, and then retest on all platforms.",,denyeart,lehors,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxptz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,lehors,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/May/17 10:58 AM;denyeart;Updated bootstrap.sh content to test:

 

{color:#999999}#!/bin/bash
{color}
{color:#0086b3}export{color}{color:#333333} ARCH=$(uname {color}{color:#333333}-s{color}{color:#333333} | tr {color}{color:#dd1144}'[:upper:]'{color} {color:#dd1144}'[:lower:]'{color}{color:#333333})-$(go env GOARCH){color}
{color:#0086b3}echo{color} {color:#dd1144}""====> {color:#008080}$\{ARCH}{color} ""{color}
{color:#0086b3}echo{color}
{color:#333333}RELEASE_VERSION=1.0.0-alpha2{color}
{color:#333333}curl https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/{color}{color:#008080}$\{ARCH}{color}{color:#333333}-{color}{color:#008080}$\{RELEASE_VERSION}{color}{color:#333333}/fabric-binary-{color}{color:#008080}$\{ARCH}{color}{color:#333333}-{color}{color:#008080}$\{RELEASE_VERSION}{color}{color:#333333}.tar.gz | tar xz{color}
{color:#0086b3}cd{color}{color:#333333} release/{color}{color:#008080}$\{ARCH}{color}
{color:#333333}sh download-dockerimages.sh -c $(uname -m)-{color}{color:#008080}$\{RELEASE_VERSION}{color} {color:#333333}-f{color}{color:#333333} $(uname -m)-{color}{color:#008080}$\{RELEASE_VERSION}{color};;;","19/May/17 11:39 AM;rameshthoomu;We have published tar balls per platform including chaincodes and e2e_cli scripts to releases url in nexus using maven. We have alpha2 tar balls are available here [https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/]

We are working on creating CI job to push these artifacts from production CI. Will improve renaming URL/optimizing build scripts based on the feed back. We will make sure fabric-binary release jobs are ready to publish tar balls based on the requirements.;;;","20/May/17 3:29 AM;rameshthoomu;published tar balls to https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/ based on [~lehors] fix to run tests on windows platform.. Myself and [~lehors] testing on this patch using new tar balls.. Below is the progress made so far..

FAILED on below docker version:
{code:java}
docker version 17.03
docker-compose version 1.11{code}
{{PASSED on below docker version}}
 
{code:java}
$ docker --version
Docker version 1.12.0, build 8eab29e $ docker-compose --version
docker-compose version 1.8.0, build d988a55 that's what I have docker toolbox version 1.12.0 windows 7 pro service pack 1{code}
 
 ;;;","20/May/17 7:30 AM;rameshthoomu;myself and [~lehors] tested latest tar balls posted here for testing [https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/] on latest fabric commit (including fix given by [~lehors] today morning). Below are the test results:

tested on 4 different windows 7 64/32 bit machines with docker client version 1.12.0.. Worked on 3 and failed on my machine. Docker volumes are not working properly hence orderer and other containers are exiting.

tested this patch on darwin-amd64, linux-amd64, linux-s390x platform and observed it's working as expected.

tested this patch on old tar balls on darwin-amd64, linux-amd64 and linux-s390x and it worked as expected.

Though the fix is worked as expected, [~lehors] concerned about using GO ARCH in bootstrap script.. Discussion in place in #fabric-releases channel. 

We had discussion in #fabric-release channel to publish new set of tar balls and submit patch set to update bootstrap.sh script with new release URL. Waiting for approval..

[ ](https://chat.hyperledger.org/channel/fabric-release?msg=5SzBzPcjwJA8w33wG) [~lehors]

 ;;;","20/May/17 4:49 PM;lehors;To clarify: to work on the second Windows machine I have an additional patch to bootstrap.sh was necessary.

I've submitted a second CR for that: [https://gerrit.hyperledger.org/r/#/c/9601/]

 ;;;","22/May/17 1:07 AM;rameshthoomu;Published fabric binaries on alpha2 commit to nexus releases url [https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/fabric-binary/] and updated bootstrapscript to pull fabric binaries from here. Tested on almost all platforms (windows (32 bit and 64 bit), darwin, linux) and the patch is working as expected.

Closing this issue now..;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Build script to publish releases to Nexus from CI,FAB-3123,15710,15566,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rameshthoomu,mastersingh24,mastersingh24,13/Apr/17 2:40 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/Jun/17 9:04 AM,,,,,v1.0.0,,,fabric-build,,,,0,build-system,,,,,,,,,denyeart,JonathanLevi,jwagantall,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2986,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpu7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,JonathanLevi,jwagantall,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 11:34 AM;rameshthoomu;I have been publishing binaries to nexus repository from Jenkins sandbox job.. Soon we may transition from nexus to nexus3.. [~ryjones] is working on this with LF team. Will update here once I get update from @ry

nexus binary reference is link is pointed here.. This has all platforms ""cryptogen"" and ""configtxgen"" binaries..  https://logs.hyperledger.org/sandbox/vex-yul-hyp-jenkins-2/fabric-binaries/;;;","03/May/17 4:25 AM;rameshthoomu;Working with [~jwagantall] on publishing binaries to  nexus repository. Will remove the fabric binaries link from sandbox once the nexus repository link is finalized. Will update the status once done..;;;","03/May/17 6:06 AM;jwagantall;Just to clarify, we will be doing this post to nexus.hyperledger.org and not move to nexus3. 

We will leave nexus3 for exclusively docker related tasks. ;;;","14/May/17 3:41 AM;rameshthoomu;Submitted patch [https://gerrit.hyperledger.org/r/#/c/8939/] and it's in review.;;;","18/May/17 11:51 PM;denyeart;Due to issues pushing to {color:#444444}staging/deploy/release{color}, Ramesh has pushed alpha2 release tarball to:

[https://nexus.hyperledger.org/content/repositories/logs/sandbox/fabric-binary/]

Not ideal, but good enough for today.;;;","09/Jun/17 9:03 AM;rameshthoomu;Created fabric-binaries job to publish fabric-binaries to nexus repository. Please see the job here. Triggers when a tag is created in fabric repository. https://jenkins.hyperledger.org/view/fabric-binaries/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure chaincode upgrade can only move chaincode to a newer version,FAB-3124,15711,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mne,elli-androulaki,elli-androulaki,13/Apr/17 3:01 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 2:43 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"Chaincode upgrade currently allows an earlier version of the chaincode to be installed.
The issue was reported by [~mne].",,elli-androulaki,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5hb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/17 12:49 AM;mne;[~ellaki] and [~muralisr] - could you clarify whether this is this a feature or a bug? In my opinion ""upgrade"" means moving to a new version.;;;","27/Apr/17 12:20 AM;mne;If this is indeed intended behavior / a feature, I'd recommend to change the name of the command from ""upgrade"" to something that does not imply moving to a newer version. For example, ""reinstantiate"".;;;","27/Apr/17 12:23 AM;elli-androulaki;Ok, [~binhn] confirmed that we leave it to the app to decide which version to move a chaincode's instance in a chain to.
[~mne] interesting proposal for changing the name, since we are not enforcing any ""upgrade"" to actually take place. 
[~binhn], [~muralisr] what do you think?;;;","27/Apr/17 5:33 PM;muralisr;[~ellaki]  version being arbitrary string with no metric properties agree with [~binhn] to leave it to user to upgrade. Indeed they may find they want to backout a change and go back to a previous version. 

""reinstantiate"" feels like ""reset"" with the same chaincode but could work... others are ""changeversion"" ? ""applyversion"" ?

Or we leave it as ""upgrade"" .... ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove sfhackfest from examples,FAB-3125,15712,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,13/Apr/17 3:14 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/Apr/17 7:27 PM,,,,,v1.0.0,,,fabric-samples,,,,0,hygiene,,,,,,,The sfhackfest example is not longer relevant to the master branch / v1.0.0,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";13/Apr/17 7:27 PM;mastersingh24;300",,,,300,0,300,100%,300,0,300,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3095,,,,,,,,,"1|hzxpuf:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE supports TLS,FAB-3126,15713,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,13/Apr/17 3:38 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/May/17 4:17 AM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,To enhance PTE to support TLS,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzx2u7:",,,,,,Sprint 16 - Quality,Sprint 18 - Quality,Sprint 19 - Quality,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create test folder structure in fabric repo,FAB-3127,15714,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,13/Apr/17 3:43 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 12:57 PM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"Create test folder structure in fabric repo to keep track of all test suites submit by Quality team or from any community members. The folder structure follows below hierarchy.

fabric/test

  -- regression
     -- Daily
     -- Weekly
     -- Release

  -- tools
      -- OTE (Orderer Traffic Engine)
      -- PTE (Performance Traffic Engine)",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/17 4:13 AM;rameshthoomu;patch has been submitted https://gerrit.hyperledger.org/r/#/c/7991/ - in review;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric CA Client - implement re-enroll,FAB-3128,15715,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,biljana.lukovic,biljana.lukovic,biljana.lukovic,13/Apr/17 4:04 AM,23/Jan/20 4:03 AM,28/Oct/23 2:59 AM,23/Jan/20 4:03 AM,,,,,,,,,,,,0,stale-item,,,,,,,,,biljana.lukovic,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpuv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,biljana.lukovic,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dependabot/go_modules/golang.org/x/crypto-0.1.0,dependabot/go_modules/test/performance/golang.org/x/net-0.7.0,main,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/github.com/prometheus/client_golang-1.11.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Jan/20 4:03 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer hangs if CouchDB connection becomes unresponsive - need a timeout,FAB-3131,15718,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,13/Apr/17 7:15 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,19/Apr/17 2:40 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"Need to set a timeout for the couchdb http client connection.
See explanation and sample solution here:
https://medium.com/@nate510/don-t-use-go-s-default-http-client-4804cb19f779

The timeout can be configurable in core.yaml couchdb section.

Once the timeout is in place, hung connections will error out and retry logic would take over.

Timeout needs to be relatively high, it has nothing to do with how 'close' couchdb is to peer.  Let's look at worst case... CouchDB builds indexes at query time (for any new docs since last index update), not at insert/update time like most databases.  Let's say a new peer has just come up and done state transfer on 1 million blocks.  CouchDB state db will be built out, but the first query during a simulation will have to build out an index covering millions of documents. The amount of time is probably measured in seconds.

The other thing to consider is chaincode timeout.  Chaincode execution timeout is 30 seconds by default.

Given these two facts, I would suggest default timeout for CouchDB to be 20 seconds.  In the case of a CouchDB connection anomaly during simulation, this will allow for one failure after 20s and one subsequent retry before hitting the simulation timeout.

I have created Jira item (for future) to help with the worst case state transfer scenario, by warming up the indexes prior to simulation:
https://jira.hyperledger.org/browse/FAB-3183",,baohua,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3183,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-60,,,,,,,,,"1|hzx4kn:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,baohua,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Apr/17 11:45 PM;baohua;I would say, this is indeed necessary. 

Surprise no support before.;;;","16/Apr/17 8:53 PM;denyeart;[~AdnanChoudhury]
Please see the scenario in the Description... We'll need a system test looking at CouchDB behavior upon large state transfer.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
test ability of one user to run java sdk e2e followed by node sdk e2e using same crypto artifacts,FAB-3132,15719,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,scottz,scottz,13/Apr/17 7:57 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpv3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
test ability of one user to run node sdk e2e followed by java sdk e2e using same crypto artifacts,FAB-3133,15720,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,scottz,scottz,13/Apr/17 7:58 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpvb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Restrict block events to clients and transaction committed event,FAB-3134,15721,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,troyronda,troyronda,13/Apr/17 9:28 AM,23/Jan/20 4:03 AM,28/Oct/23 2:59 AM,23/Jan/20 4:03 AM,,,,,Future,,,,,,,0,stale-item,,,,,,,"There should be a way to restrict events being sent back to clients. i.e., so that they only find out whether submitted transactions have been validated or invalidated upon commit (e.g. by txid). SDKs shouldn't be depending on having blocks and RW sets sent in events. Confidentiality is important and the client MUST be considered less trusted.

This ticket contrasts with FAB-2679 which proposes to add RW set in block events. There needs to be a mechanism to restrict block events and block events with RW sets to a subset of clients and/or disable. This is required for fabric deployers that require confidentiality such that the ledger is restricted to the peers.

A side benefit is that a smaller volume of data is being sent over the network, since in many scenarios the submitting client only needs the transaction status sent back.

Of course, there can be a set of well-defined fabric confidentiality levels for block events that are enforced by ACL policy and can be requested by the client. In particular, some applications may define their CC events in a way that can be exposed to clients and will find it useful to receive in filtered events (as another well-defined confidentiality level in addition to txn status).",,denyeart,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5481,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3138,,,FAB-2679,FAB-3151,FAB-3621,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpvj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Nov/17 4:23 AM;troyronda;See FAB-5481;;;","23/Jan/20 4:03 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Include install script with each release package,FAB-3136,15723,15566,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,13/Apr/17 7:02 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 1:01 AM,,,,,v1.0.0,,,fabric-build,,,,0,Usability,,,,,,,"As we currently distribute the various runtime components as Docker images, it is convenient to include a script which will download the correct version of the images for a given release and platform.

With this task, we'll include a script which will pull all of the images for a given release",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";13/Apr/17 7:33 PM;mastersingh24;7200",,,,14400,1800,7200,50%,14400,1800,7200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpvz:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need to prevent clients from joining the gossip network as a peer,FAB-3138,15725,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,troyronda,troyronda,13/Apr/17 8:19 PM,23/Jan/20 4:03 AM,28/Oct/23 2:59 AM,23/Jan/20 4:03 AM,,,,,Future,,,,,,,0,stale-item,,,,,,,"The gossip network transports sensitive data that must not be seen by clients. Rogue clients could also introduce other attacks if they can impersonate being a peer. Clients must be considered less trusted than peers (also see FAB-3134). 

There needs to be a mechanism to validate that an entity is allowed to join the gossip network. This means, for example, that the entity is part of a valid organization, holds a certificate from a valid root, *and has been given authorization to be a peer*. The last part is important because clients are also given certificates.

p.s., I assume other peer cases are covered by config txn (e.g., anchorPeer, endorser policy)? I'm having trouble locating the configuration for the normal peer (as described above).

Also can we confirm that the anchorPeer in the config txn has a relationship to their certificate that is being validated?",,elli-androulaki,gbolo,sykesm,troyronda,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3134,FAB-3621,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpwf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,gbolo,sykesm,troyronda,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/17 9:48 PM;elli-androulaki;So, you mean that there has to be a way to configure peers to accept gossip connections only by peers that satisfy a policy. 
But is this need in the context of a channel, a chaincode, or in general gossip messages? 

Separation of clients and peers is currently possible by having clients be represented by a different MSP, and configuring the peers to accept connections only by the MSP that represents a peer. 
In the (near) future, there will be another way of allowing separation between the too at the gossip level, i.e., by having both under the same organization, but with client certificates being signed by a different intermediate CA (or belong to a different OU) than peers' certificates, and specifying in the policy to accept connections only by certificates with a specific certification path or OU.
This does not accommodate concealing the MSP an identity is a member of though.

;;;","13/Apr/17 9:49 PM;yacovm;So, as I said in the rocket chat channel - gossip uses the MSP layer in order to verify certificates, so: 
{quote}There needs to be a mechanism to validate that an entity is allowed to join the gossip network{quote}
such a mechanism exists, The only thing that needs to be done, is to make it so that client certs, aren't considered as peer certs.

;;;","13/Apr/17 11:45 PM;gbolo;Would it be a good idea to encode some of this information into the certificate itself? currently, only the CA knows of user type, affiliation, and attributes (users table) and the peer's don't talk to the CA.;;;","23/Jan/20 4:03 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve test coverage for github.com/hyperledger/fabric/core/comm package,FAB-3139,15726,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,13/Apr/17 8:54 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/May/17 2:36 AM,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,The current coverage for the package is 62.8% but the major gap in tests for functions found in connection.go ,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";15/Apr/17 12:14 AM;mastersingh24;7200",,,,10800,3600,7200,66%,10800,3600,7200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpwn:",,,,,,,,,,,,,,,,,,1.0,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance CSCC GetChannels to also return the config block,FAB-3140,15727,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,smithbk,smithbk,13/Apr/17 11:11 PM,23/Jan/20 4:03 AM,28/Oct/23 2:59 AM,23/Jan/20 4:03 AM,,,,,Future,,,fabric-peer,,,,0,stale-item,,,,,,,"The GetChannels call of CSCC (Configuration System Chain Code) currently returns only the channel IDs of the channels that the peer has joined.   This call should also return the config block associated with each channel,  or at least add that as an option.
This would allow clients/SDKs to efficiently get information related to channels.",,denyeart,smithbk,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-87,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpwv:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,smithbk,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 2:08 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","23/Jan/20 4:03 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inconsistent use of global and private viper instances,FAB-3141,15728,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,13/Apr/17 11:40 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,02/May/17 3:19 AM,,,,,v1.0.0,,,fabric-orderer,fabric-peer,,,0,,,,,,,,"We inconsistently use global and private viper instances in the fabric.git codebase.  This makes it difficult to provide services such as config-path determination, needed as part of other efforts.  Suggest switching all uses to global method for ease of use.",,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpx3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/May/17 3:18 AM;greg.haskins;Turns out this is not a trivial change.  Abandoning.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Errors must contain error code,FAB-3142,15729,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,binhn,binhn,13/Apr/17 11:48 PM,23/Jan/20 4:04 AM,28/Oct/23 2:59 AM,23/Jan/20 4:04 AM,,,,,Future,,,fabric-peer,,,,0,Serviceability,stale-item,,,,,,"In an effort to support serviceability; that is, allowing support, analytic and monitoring tools to parse error records (log) and react accordingly, we need to include an error code in each error log, critical or panic log (possibly info and warning). The error code consists of 2 parts: 1 tells where the error is and 2 indicates the reason for the error. 

The Jira issue documents how-to is [FAB-2985] and [changeset|https://gerrit.hyperledger.org/r/#/c/7845/].

We encode a component with 3-uppercase-character code followed by a reason code, like ""MSP:401"". The reason codes are HTTP codes, but we can define more in 400s and 500s as needed.

Here is the list of proposed component codes:

# bccsp - CSP
# common - CMN
# core - COR
# core/chaincode - CCS
# core/deliverservice - CDS
# core/ledger - LGR
# core/scc - SCC 
# gossip - GSP
# events - EVT
# msp - MSP
# peer - PER
# orderer - ORD
# fabric-ca - FCA

Should we have more granularity?

Example
Suppose we define 420 REPLAY TRANSACTION. We use this to log replay transactions that we detect at the endorser, which is part of COR component.  The entire message may look like ""COR:420 - Replay transaction <txID> detected from transactor <transactorID>"".
",,binhn,ChristopherFerris,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14320,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,,,Error logging,,,,Unset,,,,"1|hzx4sf:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/17 10:17 AM;ChristopherFerris;This isn't a bug, it is an improvement or an epic (because it is pervasive). It is definitely needed for serviceability but it is definitely not a bug.;;;","29/Apr/17 10:21 AM;ChristopherFerris;I also have no idea why this was in the ledger sprint 16.;;;","23/Jan/20 4:04 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify OTE to work with current Ordering API,FAB-3143,15730,14306,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,bmos299,bmos299,13/Apr/17 11:50 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Apr/17 3:27 AM,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,, The current master branch in gerrit has changes to the ordering service security which is breaking the OTE tool.  When Surya/Scott submit the PR to Gerrit we want to ensure the tool is fully operational.  The team is working with Kostas to address the changes. ,,bmos299,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpxb:",,,,,,Sprint 10 - Quality,Sprint 11 - Quality,Sprint 12 - Quality,Sprint 13 - Quality,Sprint 14 - Quality,Sprint 15 - Quality,Sprint 16 - Quality,Sprint 17 - Quality,,,,,,,,,,,,,,,,,bmos299,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/17 3:27 AM;scottz;This subtask is out of the scope of jira 1805, which was indeed completed.
Closing 3143 now, and will open another jira issue for this task to update the OTE tool. for the newer Orderer API.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update gossip loggers for new flogging package changes,FAB-3144,15731,14913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,14/Apr/17 12:40 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Apr/17 7:12 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,"Gossip loggers need two changes based on the new flogging package updates: 
1) set log levels for gossip and its subcomponents at peer start based on the value of CORE_LOGGING_GOSSIP and 2)
updates the gossip test cases to default to a log level of `warning`.",,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpxj:",,,,,,Sprint 12 - Endorser,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/17 5:57 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/8439/5;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Set log levels for ledger and its subcomponents at peer start,FAB-3145,15732,14913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,14/Apr/17 12:41 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 11:04 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpxr:",,,,,,Sprint 12 - Endorser,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make StateInfoSnapshot request peer selection in gossip use weighted sampling,FAB-3146,15733,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,yacovm,yacovm,14/Apr/17 12:45 AM,23/Jan/20 4:04 AM,28/Oct/23 2:59 AM,23/Jan/20 4:04 AM,,,,,Future,,,fabric-gossip,,,,0,stale-item,,,,,,,"When we send a StateInfo pull request, we currently select a random set of peers from the orgs that are members of the channel. 

In case of most peers not being in the channel, they don't have any StateInfo messages to give back, so we just end up wasting resources and time.

OTOH - we can't go to the extreme opposite because there might be lots of peers that are in the channel, and since we don't do periodic (it's event-based) dissemination of StateInfo messages, we'll miss these peers.

So, we perhaps need to select a few peers that we know are in the channel, and also a random set out of all the peers of the orgs in the channel.

[~C0rWin] [~gennadyl] I'm putting this in the backlog as this is a mere optimization and not a vital one. ",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-290,,,,,,,,,"1|hzx71j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:04 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Duplicate SignatureHeader in Block,FAB-3147,15734,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,Senthil1,Senthil1,14/Apr/17 1:01 AM,23/Jan/20 4:04 AM,28/Oct/23 2:59 AM,23/Jan/20 4:04 AM,v1.0.0-alpha2,,,,Future,,,fabric-crypto,,,,0,stale-item,,,,,,,"Each transaction is stored in common.Envelope
type Envelope struct {
    Payload   []byte 
    Signature []byte
}

The Payload of Envelope contains Header and Data.
type Payload struct {
    Header *Header 
    Data   []byte 
}

The Header contains a channel header and a signature header. 
type Header struct {
    ChannelHeader   []byte 
    SignatureHeader []byte 
}

Again, we have a signature header in 
type TransactionAction struct {
    Header  []byte 
    Payload []byte 
}.

Attached a document contain the whole block data as JSON. Refer to ""signature_header"" field and ""tx_action_signature_header"". ",,ChristopherFerris,denyeart,Senthil1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 12:58 AM;Senthil1;duplicate_signature_header.txt;https://jira.hyperledger.org/secure/attachment/10660/duplicate_signature_header.txt",,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxwov:",,,,Unset,,Sprint 16  - Ledger,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,denyeart,Senthil1,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 1:03 AM;Senthil1;[~manish-sethi] [~denyeart] [~binhn] Can you please verify whether this is a bug?;;;","14/Apr/17 4:19 AM;ChristopherFerris;unclear that this is a bug.;;;","26/May/17 9:37 AM;ChristopherFerris;changing to improvement and deferring to Future release;;;","08/Jun/17 2:13 AM;denyeart;[~adc] I believe you were involved in the creation of these structures.  What's your opinion - do we need both signature headers or is there unnecessary redundancy here that should be resolved?;;;","23/Jan/20 4:04 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Duplicate ChaincodeID in Block,FAB-3148,15735,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,Senthil1,Senthil1,14/Apr/17 1:06 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/May/17 8:46 AM,v1.0.0,,,,WON'T FIX,,,fabric-ledger,,,,0,,,,,,,,"The following two structs are stored in the Block. ChaincodeID is duplicated here. 
type ChaincodeSpec struct {
    Type        ChaincodeSpec_Type 
    ChaincodeId *ChaincodeID       
    Input       *ChaincodeInput    
    Timeout     int32              
}

type ChaincodeHeaderExtension struct {
    PayloadVisibility []byte 
    ChaincodeId       *ChaincodeID
}

Attached a document contains the whole block data as JSON. Refer to ""chaincode_id"" fields.",,ChristopherFerris,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 1:05 AM;Senthil1;duplicate_signature_header.txt;https://jira.hyperledger.org/secure/attachment/10661/duplicate_signature_header.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4q7:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 1:07 AM;Senthil1;[~manish-sethi] [~denyeart] [~binhn] ;;;","14/Apr/17 4:18 AM;ChristopherFerris;Unclear that this is a bug. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add missing pip packages to install_behave.sh,FAB-3149,15736,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,yuki-kon,yuki-kon,yuki-kon,14/Apr/17 3:01 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 4:03 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Behave test fails after setting up the behave environment with ""fabric/scripts/install_behave.sh"".
According to the error message, pip package listed below is required to run behave test. 

pyOpenSSL
pysha3
ecdsa
python-slugify
b3j0f.aop
",,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpxz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/17 3:21 AM;yuki-kon;The patch set is submitted. https://gerrit.hyperledger.org/r/#/c/8025/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Ability to restrict access to APIs that expose blocks, transactions, ... to clients",FAB-3151,15738,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,troyronda,troyronda,14/Apr/17 3:44 AM,23/Jan/20 4:04 AM,28/Oct/23 2:59 AM,23/Jan/20 4:04 AM,,,,,Future,,,fabric-peer,,,,1,stale-item,,,,,,,"For confidential deployments of Fabric, clients need to be restricted from using APIs that return blocks, transactions, RW sets, private data, and similar.

*Clients are not trusted at the same level as peers*",,ChristopherFerris,denyeart,pdina,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3134,,,FAB-3621,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxpy7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,denyeart,pdina,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jun/17 7:20 PM;ChristopherFerris;[~troyronda] is this for a future release?;;;","01/Jun/17 11:06 PM;troyronda;[~ChristopherFerris] - this story is now logically part of FAB-3621;;;","23/Jan/20 4:04 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer can't find orderer when running in prod mode on Vagrant VM,FAB-3152,15739,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,pschnap,pschnap,14/Apr/17 5:21 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/Jun/17 2:26 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"h1. Issue
I've seen this issue in versions from the v1.0.0-alpha to the latest master code: launching the peer in production mode in the Vagrant VM, it can't find the orderer. I get errors like this:

bq. 2017-04-13 19:04:31.566 UTC [ConnProducer] NewConnection -> ERRO 038 Failed connecting to orderer:7050 , error: grpc: timed out when dialing
bq. 2017-04-13 19:04:31.566 UTC [deliveryClient] connect -> ERRO 039 Failed obtaining connection: Could not connect to any of the endpoints: [orderer:7050]

It seems that it's using the host name ""orderer"" which isn't set up in the VM; once I add it to the VM's /etc/hosts pointing to 127.0.0.1 the error goes away.

(solution found on this StackOverflow post: [http://stackoverflow.com/a/42971813|http://stackoverflow.com/a/42971813])

This affects the peer's deployment of chaincode.

h1. Reproduction
* Download the latest code
* Start the VM, and inside:
* Compile the peer with `make` -- the behave target always fails for me
* Run the orderer in one terminal
* Run  `peer node start` in another terminal

Observe the error(s) in the peer's output.",,muralisr,pdespot,pschnap,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpyf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,muralisr,pdespot,pschnap,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/May/17 6:19 AM;muralisr;[~pschnap] I have seen this (and a few variations of this) early on but should be fixed in latest master. Moving this to Done. Please reopen if the problem persists.;;;","26/May/17 10:27 AM;pdespot;May I ask what the solution was? I'm not clear on the comment in the post about the ""hostname 'ordered'"".

 

Thanks in advance.;;;","26/May/17 10:46 AM;muralisr;[~pdespot] Absolutely. The orderer's hostname is needed by the peer to submit transactions, receive blocks etc. This orderer name is provided to at configuration time.

I'm not sure exactly what [~pschnap] was running into but here is my experience with previous levels of code
* the orderer host was only in configtx.yaml and could not be provided to CLI in the peer commands
* once - by mistake - restarted the peer after storing a unresolvable orderer host name in the peer config and didn't realize that was being used even when I had changed the orderer name elsewhere (I should have cleared the database and started over).
* in some cases the docker wasn't able to resolve orderer instances. The solution was to add a ""dns_search: ."" entry in docker-compose.yaml

With the latest, we have the ""-o <orderer>"" option in all CLI commands that talk to orderer. 

Given the above, there's a good chance that the original problem is gone. ;;;","26/May/17 11:50 PM;pschnap;[~muralisr] it does not appear to have been fixed :/

I did some more testing and it appears to error not only in production mode but also in development mode.

Here's a better explanation of how I produced the error:
 * Download the latest master (the commit I just used is 9683d72e0033d5f3224b4bee7e1fc3f67a81eda0)
 * `cd` into devenv and run `vagrant up` (after destroying the previous machine, if it existed)
 * `vagrant ssh` into the VM
 * Run `make` (which will fail on linting)
 * Run `orderer`
 * Open another terminal
 * `cd devenv` (if needed)
 * `vagrant ssh`
 * `peer node start -o localhost:7050` (or use ""orderer:7050"" or ""0.0.0.0:7050"" or ""127.0.0.1:7050"", it doesn't matter)
 * Observe the ""Failed connecting to orderer:7050..."" error in the output after a few seconds – this will always say ""orderer:7050"" regardless of what you provided for the `-o` argument

*It seems the `-o` flag is not being _used_ when it tries to connect to the orderer,* at least not when using the default chain. I can give it bad input for `-o` and it errors on parsing it (in peer/node/start.go) but it doesn't seem to be using it by the time it gets around to throwing the error (in core/comm/producer.go).

If you add ""127.0.0.1   orderer"" to the /etc/hosts file of the VM then the error won't appear, but it seems there's bad logic in using the `-o` flag in the peer. Or maybe my setup is just wonky, but it's been pretty consistent for me.

 ;;;","27/May/17 12:54 AM;muralisr;[~pschnap] can you try removing /var/hyperledger/* please ?

* ...
* ...
* Run `make` (which will fail on linting)
* rm -rf /var/hyperledger/*
* Run `orderer`
* ...
* ;;;","27/May/17 4:04 AM;pschnap;[~muralisr] Doing what you suggest on a fresh install doesn't seem to work, but sometimes when doing it after attempting to run a couple of times it does work. I don't know what the deal is and haven't been able to figure out under which circumstances it is successful.;;;","27/May/17 4:34 AM;pschnap;[~muralisr] ok, I think I figured it out. If I specify the `-o` flag the first time I run it after a build – i.e. with a fresh /var/hyperledger – then it runs fine _regardless of whether I specify the flag in subsequent runs (or even provide the correct value)_. If I run it and _don't_ specify the `-o` flag the first time, then it _doesn't_ work in subsequent runs, regardless of whether I specify the `-o` flag in the other runs.

So, the peer seems to be ignoring the `-o` flag after the first run and the default of ""orderer:7050"" that's used when no flag is specified is broken on the first run w.r.t. the vagrant environment since it's not in the hosts file.;;;","27/May/17 5:05 AM;muralisr;[~pschnap] Right. That was the reasoning behind the cryptic remark in earlier comment

{code:java}
once - by mistake - restarted the peer after storing a unresolvable orderer host name in the peer config and didn't realize that was being used even when I had changed the orderer name elsewhere (I should have cleared the database and started over).
{code}

If you restart the peer with previous config, it'll use that config after restart. The config holds the orderer address too. If you had started without the ""-o"" the first time, by default it stores ""orderer"" and will continue to use that.;;;","27/May/17 5:18 AM;pschnap;[~muralisr] Ah, that was not clear to me from that comment.

This still seems broken to me, shouldn't the command-line argument override (and possibly overwrite) what was saved in the configuration? It also seems to me that the default value (no `-o`) should work in the development/testing vagrant environment.;;;","01/Jun/17 2:11 AM;muralisr;[~pschnap] Long story short, with latest master the peer accepts the ""-o""  option but does not use it.

Details:

It was needed in older commit levels when the default ""testchainid"" was still around for use. In that mode peer created the configuration internally and needed the orderer ip supplied via ""-o"". ""testchainid"" has been removed in the latest master and so the only way a peer can join a channel is by supplying it with a block (containing orderer IP besides other information). The ""-o"" option is not used any longer but left behind so it won't break other tools that depend upon it. It will removed soon.;;;","01/Jun/17 2:25 AM;pschnap;[~muralisr] Ok, I guess I'll put it back to resolved since it's till a WIP. Thanks for your feedback;;;","01/Jun/17 3:11 AM;muralisr;[~pschnap] Just to be clear, the WIP part is just the removal of the unused ""-o"" option.

Your original issue was real where that orderer ip address was saved on to the block configuration when ""testchainid"" was in use (and if you didn't supply the right one the first time the default ""orderer"" would be  stored). 

Now since we are no longer using ""testchainid"" the peer no longer has a path that saves provided orderer IP... all that remains is removing the unused ""-o"" option.

This CR https://gerrit.hyperledger.org/r/#/c/6821/ provides the background for the original ""-o"" option where you saw the problem. Comparing that with master might provide more background.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,
Files in fabric need to be cleaned up,FAB-3153,15740,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jwagantall,jwagantall,jwagantall,14/Apr/17 7:32 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Apr/17 6:55 AM,,,,,,,,,,,,0,,,,,,,,"There are a lot of trailing whitespaces in the files in the fabric repository. 

Cleaning them makes the code more proper and easier to read and review",,hyperledger-jira,jwagantall,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpyn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,hyperledger-jira,jwagantall,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/17 6:55 AM;hyperledger-jira;Cleaned up 

https://gerrit.hyperledger.org/r/#/c/8249/
https://gerrit.hyperledger.org/r/#/c/8183/
https://gerrit.hyperledger.org/r/#/c/8181/
https://gerrit.hyperledger.org/r/#/c/8179/
https://gerrit.hyperledger.org/r/#/c/8027/
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename getChaincodeBytes,FAB-3154,15741,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,14/Apr/17 11:47 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 10:33 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"peer/chaincode/common.go#55

The existing getChaincodeBytes function actually create a deployment spec, rather than the name implies.

We plan to rename it to avoid mis-usage.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpyv:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Apr/17 4:58 PM;baohua;Code submitted to https://gerrit.hyperledger.org/r/#/c/8035/ for review :);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LCCC tx for chaincode deploy/upgrade: vscc security checks,FAB-3155,15742,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,elli-androulaki,elli-androulaki,14/Apr/17 7:17 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,03/May/17 4:25 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"Special case of FAB-2091 and aims to address instantiation specific checks: 
 - ensure creator / creator signature are valid and satisfy the chaincode's instantiation policy
 - ensure a chaincode with the same name has not been added to the channel
 - ensure consistency of the item included in the write set, i.e., chaincode identifier, instantiation policy, chaincode name and hash of binary code.
 - does not overwrite existing chaincode entry

We need to do a check for upgrade.

Checks that need to be done at commit time:
* Same checks as during endorsement time (FAB-2931)
* Validation of the rw-set: instantiate can only create new entries, upgrade can only modify existing entries (read must be on the same key as the write and the key must match the invocation parameter)
* The tx submitter needs to satisfy the channel's CC instantiation policy. This policy needs to be added to the genesis block (optional?).
* The endorsements need to satisfy the channel's CC instantiation endorsement policy. This policy needs to be added to the genesis block (optional?).

Regarding CC instantiation endorsement policy:
A potential channel CC instantiation endorsement policy would be that a member of each MSP is required to co-endorse the simulation result of a given instantiation request for the corresponding transaction to be accepted. However, in certain cases defined MSPs (and respective applications) do not own peers.
If the submitter is trusted to choose endorsers that would not maliciously alter the LCCC state, no CC instantiation endorsement policy is needed.",,elli-androulaki,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5db:",,,,Unset,,Sprint 16 - Crypto,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,mne,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Apr/17 5:11 AM;muralisr;[~ellaki] [~mne] 
_ensure a chaincode with the same name has not been added to the channel_
Nothing special should have to be done for this.  The chaincode LCCC entry has been added as part of the RW set. If another TX was committed and added the entry the ledger validation will catch this.

_does not overwrite existing chaincode entry_ 
What does this mean ? I'm assuming overwrite referst to overwriting the chaincode instantiation entry in the LCCC ? If so the previous comment applies.

The thing that has to be done for this (both for instantiate and upgrade) is to get the ChaincodeData from the returned Response object (we could get it from the RW set but would be more painful). Both instantiate and upgrade return ChaincodeData bytes in the returned Response object (see under Invoke in core/scc/lccc.go) and use that for the other two validation mentioned in *Description* section.;;;","18/Apr/17 8:45 PM;mne;Part of this overlaps with FAB-2931;;;","18/Apr/17 9:28 PM;elli-androulaki;[~muralisr], here is the flow for *instantiation* as we were thinking it (please intervene if you think this is not correct):

1. Client -> Endorser: InstantiationRequest(ccName, ccVersion)
2. Endorser: checks 
    - if ccName exists in LCCC database, and if so it sets Response <- ERR and returns, 
    - its local (CC installation) database contains a chaincode with ccName and ccVersion, and if not it sets Response <- ERR and returns
    - retrieves the respective entry of installed chaincode to create a new instantiation entry to the LCCC instantiation table containing [ ccName, ccVersion, hash(ccCode), ccInstantiationPolicy ] 
    - checks if signedProposal (includes also the creator) satisfies the ccInstantiationPolicy using the channel's MSPs and sets Response <- ERR if not and returns
    - includes the new instantiation entry as part of the writeSet in the Response with an endorsement on it

3. Endorser -> Client: Response

4. Client: creates a tx

5. Client -> Orderers: tx

6. Orderers -> Committing peers: block including tx
7. Committing peers: Do the validation as follows:
   - check the creator /creator signature satisfies the writers policy of the channel, and reject if this is not the case
   - check that the creator of the transaction and its signature satisfy the instantiation policy included in the RW set of the transaction
   - check that a chaincode with the same name has not been added in the ccInstantiation database of LCCC and reject the transaciton if this is the case [ agnostic to how this is done, though the ledger or not, but the check needs to be there]
   - check if the peer has locally a chaincode with the same id as the one in the instantiation transaction, and ""mark it"" as active for that chaincode (not sure this is needed)
[~mne], please add if i am missing something :)

8. Client -> endorser: Invocation of the instantiated chaincode
9. Endorser: Checks if the chaincode (name, version) said being active on the chain, are the same as the (name, version) appearing locally, and that the chaincode has been marked as active. If these checks do not pass, we return an error. It otherwise continues with the processing of the proposal. This is the topic of FAB-3156.

Adding [~binhn], and [~ales].

See, next comment for upgrade.;;;","18/Apr/17 9:40 PM;elli-androulaki;[~muralisr], here is the flow for *upgdade* announcement on the chain as we were thinking it (please intervene if you think this is not correct):

1. Client -> Endorser: UpgradeInstantiationRequest(ccName, ccVersion')
2. Endorser: checks 
    - if ccName exists in LCCC database, and *if not* it sets Response <- ERR and returns, 
    - its local (CC installation) database *contains a chaincode with ccName and ccVersion', and if not it sets Response <- ERR and returns*
    - *retrieves the respective entry of installed chaincode to create a new instantiation entry to the LCCC instantiation table containing [ ccName, ccVersion', hash(ccCode'), ccInstantiationPolicy' ], where ""'"" denotes the newer versions of the entries of this table. Let [ ccName, ccVersion, hash(ccCode), ccInstantiationPolicy], denotes the old entries*
    - checks if signedProposal (includes also the creator) *satisfies the old ccInstantiationPolicy* using the channel's MSPs and sets Response <- ERR if not and returns
    - includes the new instantiation entry as part of the writeSet in the Response with an endorsement on it

3. Endorser -> Client: Response

4. Client: creates a tx

5. Client -> Orderers: tx

6. Orderers -> Committing peers: block including tx
7. Committing peers: Do the validation as follows:
   - check the creator /creator signature satisfies the writers policy of the channel, and reject if this is not the case
   - check that the creator of the transaction and its signature satisfy the *ccInstantiationPolicy of the old instantiation entry of the upgdade chaincode (should be referenced in the Read set of the transaction)*
   - check that the *read-set only consists the older version of the a chaincode with the same name and reject the transaciton if this is the case* 
   - check if the peer has locally a chaincode with the same id as the one in the instantiation transaction (id is the hash of name, version, hash of code, and instantiation policy), and ""mark it"" as active for that chaincode (not sure this is needed)
[~mne], please add if i am missing something :)

8. Client -> endorser: Invocation of the instantiated chaincode
9. Endorser: Checks if the chaincode (name, version) said being active on the chain, are the same as the (name, version) appearing locally, and that the chaincode has been marked as active. If these checks do not pass, we return an error. It otherwise continues with the processing of the proposal. This is the topic of FAB-3156.

Adding [~binhn], and [~ales].

;;;","19/Apr/17 6:11 AM;muralisr;[~ellaki]  Let me address the above comment with two comments.
* in this comment strike through things that are done so we can focus on the TODOs. 
* in the next, look at the TODOs with questions / comments

1. Client -> Endorser: UpgradeInstantiationRequest(ccName, ccVersion')
2. Endorser: checks
-if ccName exists in LCCC database, and if not it sets Response < ERR and returns,-  
{color:#d04437}_note that there's no ""database"" ... its a filesystem check.. Done_{color}

-its local (CC installation) database contains a chaincode with ccName and ccVersion', and if not it sets Response < ERR and returns. retrieves the respective entry of installed chaincode to create a new instantiation entry to the LCCC instantiation table containing [ ccName, ccVersion', hash(ccCode'), ccInstantiationPolicy' ], where ""'"" denotes the newer versions of the entries of this table. Let [ ccName, ccVersion, hash(ccCode), ccInstantiationPolicy], denotes the old entries-
_{color:#d04437}Done{color}_

-checks if signedProposal (includes also the creator) satisfies the old ccInstantiationPolicy using the channel's MSPs and sets Response < ERR if not and returns- 
{color:#d04437}_I think this is done via the normal proposal path ? i'd check with [~ales] and if something more needs to be done specific to instantiation please do that_{color}
_{color:#d04437}Done{color}_

-includes the new instantiation entry as part of the writeSet in the Response with an endorsement on it-
_{color:#d04437}Done (normal RW set processing from the ledger){color}_

-3. Endorser -> Client: Response-
-4. Client: creates a tx-
-5. Client -> Orderers: tx-
-6. Orderers -> Committing peers: block including tx-
7. Committing peers: Do the validation as follows:
check the creator /creator signature satisfies the writers policy of the channel, and reject if this is not the case 
check that the creator of the transaction and its signature satisfy the ccInstantiationPolicy of the old instantiation entry of the upgdade chaincode (should be referenced in the Read set of the transaction)

-check that the read-set only consists the older version of the a chaincode with the same name and reject the transaciton if this is the case-
_{color:#d04437}This is done as part of the normal RW analysis. There is a ""version"" check that can be done (over and beyond RW checks) for upgrade but that's not part of this JIRA.{color}_

-check if the peer has locally a chaincode with the same id as the one in the instantiation transaction (id is the hash of name, version, hash of code, and instantiation policy), and ""mark it"" as active for that chaincode (not sure this is needed)-
{color:#d04437}Not needed. The lifecycle will manage start/stop and terminate which has to be on a channel basis.{color}

Matthias Neugschwandtner, please add if i am missing something 
-8. Client -> endorser: Invocation of the instantiated chaincode-
9. Endorser:
-Checks if the chaincode (name, version) said being active on the chain, -
{color:#d04437}Not needed.{color}

-are the same as the (name, version) appearing locally, -
Done

-and that the chaincode has been marked as active.-
Not needed

If these checks do not pass, we return an error. It otherwise continues with the processing of the proposal. This is the topic of FAB-3156. ;;;","19/Apr/17 6:15 AM;muralisr;Part 2. Security checks that need to be done.


7. Committing peers: Do the validation as follows:
check the creator /creator signature satisfies the writers policy of the channel, and reject if this is not the case 
{color:#d04437}_Is some of this already done or planned to do as part of any ACL work for SCCs ? Need to check with [~angelo.decaro]_{color}
check that the creator of the transaction and its signature satisfy the ccInstantiationPolicy of the old instantiation entry of the upgdade chaincode (should be referenced in the Read set of the transaction)
;;;","19/Apr/17 10:56 PM;elli-androulaki;[~ales]'s CR on this:
https://gerrit.hyperledger.org/r/#/c/6421/ ;;;","21/Apr/17 5:38 AM;elli-androulaki;Hi CRs to complete this item:
https://gerrit.hyperledger.org/r/#/c/8253/, 
https://gerrit.hyperledger.org/r/#/c/8299/, 
https://gerrit.hyperledger.org/r/#/c/8305/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add pre-endorsement check for the invoked chaincode,FAB-3156,15743,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,ales,elli-androulaki,elli-androulaki,14/Apr/17 7:19 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,11/May/17 9:18 PM,,,,,v1.0.0-alpha2,,,fabric-crypto,,,,0,,,,,,,,"When a chaincode is installed to a peer, it is followed by an instantiation policy that would specify who is authorised to ""instantiate"" this chaincode (to any chain).

To ensure that this instantiation policy is honored for a chaincode installed on a peer, we incorporate the instantiation policy to the chaincode's ""identifier"". That is, we no longer fully determine the chaincode by its name, and version, but with the triplet <name, version, instantiation policy>. 

With this we benefit the following:
 1. when the chaincode is being instantiated, full details of the identity of the chaincode to be instantiated are provided inside the transaction, i.e., the writeset contains the new entry to channel instantiated chaincodes (part of LSCC state) that includes the chaincode name, version, and instantiation policy
 2. when committing peers validate the instantiation transaction can immediately check the writeset of the transaction, retrieve the instantiation policy of that chaincode (even if they do not have that chaincode installed locally) and approve or not the instantiation of that chaincode. Notice that committing peers do more checks (e.g., check if a chaincode with the same name has been instantiated in the past, etc ) that are ommitted in view of simplicity of presentation of the issue, but in any case they **should not** be required to check their local state to validate such a transaction cause LSCC state fork could occur. Validation of instantiation transactions depend only on chain data.

**Our claim:**
When an endorser receives a proposal that refers to a chaincode in a channel, it needs to ensure that the chaincode instance as appeared in the chain (name, version, instantiation policy) is the same as the one locally installed prior to proceeding with the invocation of that chaincode. If this check is not satisfied, then the endorser should return an error to the client and not proceed with the simulation of execution of the invoked chaincode.

**Why do we need to do this?** 
Because otherwise, we could have instantiation policies by-passed. 
**Example**: This shows a candidate attack bypassing instantiation policy if equality of this is not checked at chaincode invocation time.  

So org1 and org2 appear on channel A and B.  In *channel A*, org1 has instantiated chaincode cc with instantiation policy that says only the Org1.admin is allowed to instantiated it. 

org2 can see all the instantiation details of cc on channel A, as it is a member of channel A.

org2 wants to trick peers of org1 to instantiate cc on *channel B* but understands it is not allowed to because cc's instantiation policy does not allow it. 
However, org2 can do something to bypass the instantiation policy (i.e., trick the peers of org1 into simulating and executing invocations of cc as if cc were to have been instantiated in channel B). 

What org2 can do is leverage the entry for cc from channel 1 to retrieve cc.name, cc.hashcode, cc.version and creates an instantiation transaction for 
[cc.name, cc.hashcode, cc.version, instantiation policy for org2.admin] . This entry will be accepted by all peers in channel B, cause no other chaincode with that name has been deployed on channel 2, and org2 satisfies the fake instantiation policy it listed in the instantiation transaction. 

Now if org2 attempts to send a proposal to org1 peers for invoking a chaincode <cc.name, cc.input> if instantiation policy is not checked, peers of org1 would blindly retrieve the chaincode they have installed that has the same name (but different instantiation policy) than the one on the chain, would simulate the execution and provide an endorsement for a chaincode proposal they should have ignored. 

Peers of org1 who see this this instantiation should consider this to refer to a different chaincode than the one they have installed and ignore any proposals on channel 2 associated to this. This is the topic of changes of group (2) of CR https://gerrit.hyperledger.org/r/#/c/8313/ of [~ales].

Adding also [~adc].

Inviting [~muralisr], [~mastersingh24], [~binhn], to comment on this. Thanks!

 

",,binhn,ChristopherFerris,elli-androulaki,mne,muralisr,troyronda,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4hr:",,,,,,Sprint 16 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,elli-androulaki,mne,muralisr,troyronda,wutongtree,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 6:20 PM;elli-androulaki;This may only require a review of existing code to ensure that this check takes place. [~muralisr] retrieves already the chaincode instalaltion referring to a chain based on the most recently registered chaincode information on the chain (version, name, ccInvocation policy, and owners).

;;;","19/Apr/17 9:10 PM;mne;in lscc.go, getCCCode() uses ValidateCC to check the package on disk vs the one referenced on the chain:
{noformat}
	//this is the big test and the reason every launch should go through
	//getChaincode call. We validate the chaincode entry against the
	//the chaincode in FS
	if err = ccpack.ValidateCC(cd); err != nil {
		return nil, nil, nil, InvalidCCOnFSError(err.Error())
	}
{noformat};;;","21/Apr/17 5:26 AM;elli-androulaki;Link to related pending CR (https://gerrit.hyperledger.org/r/#/c/8313/);;;","28/Apr/17 2:29 AM;binhn;[~ellaki] We only support the latest version instantiated on the channel, so why would we allow specifying the version on the proposal. That should have been the bug, and we can just document that the version is ignored in 1.0.;;;","05/May/17 5:11 AM;muralisr;[~ellaki] lets separate two issues out for clarity.
*Issue 1 -  the user to specify version in invoke and check lscc against that*
don't need (see [~binhn] comment above)

*Issue 2 - To summarize the second (main) issue from [~ellaki] description... fingerprint checks of chaincode against installed chaincodes during Invoke time*

Currently we don't do fingerprint checks of chaincode for each Invoke. We only do it while launching a chaincode.

A bad peer  P2, knowing a chaincode name/version on Channel A , can instantiate a different chaincode with same name/version on Channel B.  It will be nice if all committers can check the chaincode hash etc against the actual installed chaincode but we cannot do that as not all committers will have the CC installed. Hence, such an instantiation will pass and the CC with same name/version but different hash will be on Channel B. Now both the good peer P1 and bad peer P2 can field invokes to the chaincode on Channel B with different chaincodes - if we don't do hash checks. 

Doing the check is simple enough but doing it efficiently means we don't read from the FS everytime.... some cache management is necessary.


;;;","11/May/17 3:23 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8313/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtx.yaml in peer was not override  by CORE_PEER_COMMITTER_LEDGER_ORDERER ,FAB-3158,15745,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,oleksandr.borysenko,oleksandr.borysenko,14/Apr/17 11:49 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Apr/17 11:57 PM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-peer,,,,0,orderer,peer,,,,,,"During joining to channel I have got error:
{code}
#CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:7050 CORE_PEER_ADDRESS=peer0:7051 peer channel join -b myc.block -o orderer:5005

peer0      | 2017-04-14 12:46:43.089 UTC [ledgermgmt] CreateLedger -> INFO 02a Creating ledger with id = myc
peer0      | 2017-04-14 12:46:43.156 UTC [ledgermgmt] CreateLedger -> INFO 02b Created ledger with id = myc
peer0      | 2017-04-14 12:46:43.161 UTC [kvledger] Commit -> INFO 02c Channel [myc]: Created block [0] with 1 transaction(s)
peer0      | 2017-04-14 12:46:43.174 UTC [gossip/state] NewGossipStateProvider -> INFO 02d Updating node metadata information, current ledger sequence is at = 0, next expected block is = 1
peer0      | 2017-04-14 12:46:43.179 UTC [deliveryClient] NewDeliverService -> INFO 02e Creating delivery service to get blocks from the ordering service, 127.0.0.1:7050
peer0      | 2017-04-14 12:46:46.180 UTC [deliveryClient] NewDeliverService -> ERRO 02f Cannot dial to 127.0.0.1:7050, because of grpc: timed out when dialing
peer0      | 2017-04-14 12:46:46.180 UTC [gossip/service] InitializeChannel -> WARN 030 Cannot create delivery client, due to Wasn't able to connect to any of ordering service endpoints [127.0.0.1:7050]
peer0      | 2017-04-14 12:46:46.180 UTC [gossip/service] InitializeChannel -> WARN 031 Delivery client is down won't be able to pull blocks for chain myc
peer0      | 2017-04-14 12:46:46.180 UTC [chaincode] Init -> INFO 032 Init CSCC
peer0      | 2017-04-14 12:46:46.180 UTC [sysccapi] deploySysCC -> INFO 033 system chaincode cscc/myc(github.com/hyperledger/fabric/core/scc/cscc) deployed
peer0      | 2017-04-14 12:46:46.180 UTC [sysccapi] deploySysCC -> INFO 034 system chaincode lccc/myc(github.com/hyperledger/fabric/core/scc/lccc) deployed
peer0      | 2017-04-14 12:46:46.181 UTC [escc] Init -> INFO 035 Successfully initialized ESCC
peer0      | 2017-04-14 12:46:46.181 UTC [sysccapi] deploySysCC -> INFO 036 system chaincode escc/myc(github.com/hyperledger/fabric/core/scc/escc) deployed
peer0      | 2017-04-14 12:46:46.181 UTC [sysccapi] deploySysCC -> INFO 037 system chaincode vscc/myc(github.com/hyperledger/fabric/core/scc/vscc) deployed
peer0      | 2017-04-14 12:46:46.181 UTC [qscc] Init -> INFO 038 Init QSCC
peer0      | 2017-04-14 12:46:46.181 UTC [sysccapi] deploySysCC -> INFO 039 system chaincode qscc/myc(github.com/hyperledger/fabric/core/chaincode/qscc) deployed

{code}

2 peers were started with parameter:
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005

But in configtx.yaml it was not updated

{code}
Orderer: &OrdererDefaults

    # Orderer Type: The orderer implementation to start.
    # Available types are ""solo"" and ""kafka"".
    OrdererType: solo

    Addresses:
        - 127.0.0.1:7050
{code}

File configtx.yaml, docker manifest and logs are attached.","root@26a50eba32a7:/etc/hyperledger/fabric# peer -v
Fabric peer server version 1.0.0-alpha",mastersingh24,oleksandr.borysenko,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,";15/Apr/17 7:58 PM;mastersingh24;180",";15/Apr/17 7:58 PM;mastersingh24;180",,,360,0,360,100%,360,0,360,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Apr/17 11:47 PM;oleksandr.borysenko;Log.txt;https://jira.hyperledger.org/secure/attachment/10663/Log.txt","14/Apr/17 11:47 PM;oleksandr.borysenko;configtx.yaml;https://jira.hyperledger.org/secure/attachment/10662/configtx.yaml","14/Apr/17 11:47 PM;oleksandr.borysenko;docker-2peer.yml;https://jira.hyperledger.org/secure/attachment/10664/docker-2peer.yml",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpzb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,oleksandr.borysenko,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Apr/17 7:51 PM;mastersingh24;[~oleksandr.borysenko] - per https://gerrit.hyperledger.org/r/#/c/6757/  the CORE_PEER_COMMITTER_LEDGER_ORDERER is no longer used.  I'll go ahead and remove the env variable from the compose files in the e2e as well to avoid confusion.;;;","15/Apr/17 7:58 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8063/;;;","15/Apr/17 10:18 PM;mastersingh24;[~jeffgarratt] [~scottz]  Can you guys look at the use of this variable in the BDD and OTE tests as well?;;;","16/Apr/17 2:08 AM;scottz;We will remove this variable from OTE code with our next planned update, hopefully early this week.;;;","18/Apr/17 10:44 PM;oleksandr.borysenko;I didn't found how can I add parameter for orderer service. Only one solution what is works it's mounting manually modified file configtx.yaml

{code}
  cli:
    container_name: cli
    image: hyperledger/fabric-peer:x86_64-1.0.0-alpha
    tty: true
    environment:
      - GOPATH=/opt/gopath
      - CORE_PEER_ADDRESSAUTODETECT=true
      - CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
      - CORE_NEXT=true
      - CORE_PEER_ID=cli
      - CORE_PEER_ENDORSER_ENABLED=true
      - CORE_PEER_COMMITTER_LEDGER_ORDERER=orderer:5005
      - CORE_PEER_ADDRESS=peer0:7051
      - CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/fabric/msp/sampleconfig
    working_dir: /opt/gopath/src/github.com/hyperledger/fabric/peer
    command: /bin/sh
    links:
      - orderer:orderer
      - peer0:peer0
    volumes:
        - /var/run/:/host/var/run/
        - /home/osboxes/work/hyperledger/vol/configtx.yaml:/etc/hyperledger/fabric/configtx.yaml
        #in the ""- <HOST>:/opt/gopath/src/github.com/hyperledger/fabric/examples/"" mapping below, the HOST part
        #should be modified to the path on the host. This will work as is in the Vagrant environment
        - /home/osboxes/work/hyperledger/fabric/examples/:/opt/gopath/src/github.com/hyperledger/fabric/examples/
    depends_on:
      - orderer
      - peer0
      - peer1
    networks:
      - bridge
{code}

How it can be done using parameters?;;;","22/Apr/17 12:00 AM;mastersingh24;[~oleksandr.borysenko] - When you invoke a JoinChannel on the peer, it will actually parse the configuration block which is submitted as part of the JoinChannel and then it will parse it to obtain the addresses of the ordering service nodes.  So if you need to change the orderer addresses, then you need to modify the configtx.yaml and add the correct endpoints for orderers as you indicate above;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add config-relative path mechanism to golang substrate,FAB-3160,15747,14540,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,15/Apr/17 12:05 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 9:43 PM,,,,,v1.0.0,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpzr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,greg.haskins,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Apr/17 12:07 AM;greg.haskins;Fix submitted for review: https://gerrit.hyperledger.org/r/#/c/7963/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert e2e to use new config-relative feature,FAB-3161,15748,14540,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,greg.haskins,greg.haskins,greg.haskins,15/Apr/17 12:09 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/May/17 8:03 PM,,,,,v1.0.0,,,fabric-orderer,fabric-peer,,,0,,,,,,,,,,arun17,greg.haskins,harsha544,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxpzz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,arun17,greg.haskins,harsha544,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for Anonymity and Unlinkability of Transactions,FAB-3166,15753,,Epic,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,mastersingh24,mastersingh24,15/Apr/17 2:01 AM,23/Jan/20 4:05 AM,28/Oct/23 2:59 AM,23/Jan/20 4:05 AM,,,,,Future,,,fabric-peer,,,,0,sdk,stale-item,,,,,,"There are many use cases where users of Fabric do not want to persist the true identity of the transactor to the ledger but at the same time need to be able to make authentication and authorization decisions based on whatever credentials are used.  Additionally, one should not be able to link transactions (even to a pseudo-anonymous identity) just by looking at the transactions in the ledger.",,mastersingh24,rickr,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-328,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-8,,Anonymous and Unlinkable Transactions,To Do,,,Unset,,,,"1|hzxq0n:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,rickr,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/17 2:02 AM;mastersingh24;this is marked as both 1.1 and Future since it is likely that the entire set of features cannot be contained in single release;;;","19/Oct/17 11:39 PM;rickr;Removing jsdk I think it's covered with FAB-6584;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Operational security (e.g. certificate updates),FAB-3167,15754,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,mastersingh24,mastersingh24,15/Apr/17 2:17 AM,23/Jan/20 10:53 PM,28/Oct/23 2:59 AM,23/Jan/20 10:53 PM,,,,,v2.0.0,,,,,,,2,operations,stale-item,,,,,,"Once Fabric networks are up and running, there will be on-going operational tasks required to maintain the integrity and security of the overall blockchain network",,joaquimpedrooliveira,latitiah,mastersingh24,nyet,sykesm,Vishal3152,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"Support MSP config via YAML in review. Then, support dynamic updates.",,Required,,Required,ghx-label-1,,Operational Security,To Do,,,Required,,,,"1|hzxq0v:",,,,Unset,Not Required,,,,,,,,,,,,,,,,,,,Still Needed,,,,,,joaquimpedrooliveira,latitiah,mastersingh24,nyet,sykesm,Vishal3152,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Oct/18 10:20 PM;latitiah;This epic still needs a test plan summary associated with it. Here is a quick guide for what the summary should contain. Thanks!
{code}
Functional Tests:
 - FAB-XXX1: Make sure config is accepted and turns on feature (Integration) - PersonA
 - FAB-XXX2: What happens when config is set wrong (unit) - PersonA
 - FAB-XXX3: When FeatureX is turned on in both ComponentA and ComponentB (End-to-end) - PersonB
 - FAB-XXX4: When FeatureX is turned on in ComponentA and not ComponentB (End-to-end) - PersonA

System Tests:
 - FAB-XXX5: How is performace impacted when sending 5 packets per second for 3 hours? - PersonC
   * Be sure to set the following config values on ComponentA as such:
     - FEATUREX=true
     - FEATURE_PATH=/some/path/for/my/feature
   * Be sure to send the messages using the foo SDK
 - FAB-XXX6: Is the feature and component stable when executing 10 packets per second for 1 week? - PersonC
   * Be sure to set the following config values on ComponentA as such:
     - FEATUREX=true
     - FEATURE_PATH=/some/path/for/my/feature
{code};;;","23/Jan/20 4:05 AM;sykesm;Stale;;;","23/Jan/20 7:56 AM;nyet;Re-opened, this is important to us, TIA;;;","23/Jan/20 10:52 PM;sykesm;> Re-opened, this is important to us, TIA

Thanks for the feedback.

This issue has been open for more than 9 months without an update. There are currently no plans to deliver this item in v2.0.0 (despite the fix version) and we have moved to an RFC process for feature proposals.

If you are interested in advancing this feature, we welcome your contribution. Please create the necessary RFC by following the process documented here: https://github.com/hyperledger/fabric-rfcs/tree/master

Thanks.

;;;","23/Jan/20 10:53 PM;sykesm;Closing with request to follow-up with an RFC using the processes that proposed and accepted last year.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
files in docs/source/Gerrit not translated to .rst,FAB-3168,15755,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,15/Apr/17 3:38 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,15/Apr/17 11:48 PM,v1.0.0,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,markdown files in docs/source/Gerrit folder were never translated to .rst and their references in the CONTRIBUTING.rst need to be updated accordingly.,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx32f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Apr/17 3:56 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8051/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot invoke another chaincode from java chaincode,FAB-3170,15757,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,15/Apr/17 8:31 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 10:54 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,The invokeChaincode API support on the Java shim does not match the behavior found on the golang shim.,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2660,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq13:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix the name of the lifecycle system chaincode,FAB-3171,15758,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,15/Apr/17 6:38 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/Apr/17 2:11 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,Ledger,,,,,,"The existing name is lccc, would like to update it to lscc.

In this way we can keep all system chaincode having the same scc suffix.

This is also aligned with other system chaincodes like cscc, escc and qscc.

Welcome for comments!",,baohua,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr47:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,baohua,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/17 11:15 PM;wlahti;I've made some changes to the lifecycle system chaincode recently and thought the same thing! I think ""lscc"" would be best so it's consistent in length and format with the other system chaincodes. ;;;","17/Apr/17 11:57 PM;baohua;[~wlahti], thanks for ur advice.

I submitted the change at https://gerrit.hyperledger.org/r/#/c/8113/.

Welcome for anyone's review.;;;","21/Apr/17 11:28 AM;baohua;Kostas suggest we follow the https://talks.golang.org/2014/names.slide#17.

In this style, we may need more change like

cscc --> configuration
escc --> endorsement
lscc --> lifecycle
qscc --> query
vscc --> verification

Would welcome for more comments on this, thanks!;;;","21/Apr/17 12:11 PM;muralisr;+1 ... if we are changing all SCC, LGTM;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Remove ""support"" for chaincode paths with http(s) URLs",FAB-3172,15759,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,aambati,mastersingh24,mastersingh24,15/Apr/17 7:11 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,04/Jun/17 2:28 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,Should we continue to allow people to enter chaincode paths which use http(s)?  I don't think we need / want this functionality given the updated packaging and install,,aambati,baohua,greg.haskins,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4245,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq1b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,baohua,greg.haskins,mastersingh24,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Apr/17 7:12 PM;mastersingh24;[~greg.haskins]  [~muralisr] What do you think?

Feel free to close and set fix version to WON'T FIX if we still want this functionality;;;","15/Apr/17 11:37 PM;muralisr;[~mastersingh24]  Any http access (if needed) can be left to the SDKs especially now that we have a GO SDK too. CLI can be left for minimal local access I think.

[~greg.haskins] what do you think ?;;;","01/Jun/17 2:19 AM;muralisr;This has been identified by security scan as a potential attack vector.

[~mastersingh24] [~greg.haskins] what do you say to a few lines disabling this feature while leaving the code in ?;;;","01/Jun/17 2:47 AM;greg.haskins;I think we can drop it.;;;","02/Jun/17 10:39 PM;aambati;https://gerrit.hyperledger.org/r/#/c/10075/;;;","03/Jun/17 1:12 PM;baohua;I guess we can totally migrate this part to SDK's feature.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Outdated documents should be removed,FAB-3173,15760,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,ChristopherFerris,binhn,binhn,16/Apr/17 12:01 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Apr/17 11:52 PM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"We have a number of outdated documents that are still linked to by the online readthedoc.io or in the repo that we should update and remove:

# https://github.com/hyperledger/fabric/blob/master/docs/source/tech/attributes.rst
# https://github.com/hyperledger/fabric/blob/master/docs/source/tech/application-ACL.rst
# https://github.com/hyperledger/fabric/blob/master/docs/source/protocol-spec.rst
# https://github.com/hyperledger/fabric/blob/master/docs/source/protocol-spec_zh.rst
# https://github.com/hyperledger/fabric/blob/master/docs/source/SystemChaincode-noop.rst

[~ellaki] [~adecaro] [~marko.vukolic] [~muralisr] [~nickgaski]  Please review the list. 

We probably should save away attributes.rst and application-acl.rst for post 1.0 branch
",,binhn,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq1j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/17 12:08 AM;ChristopherFerris;[~binhn] releases.rst should NOT be removed. It actually needs to be updated and relinked from the TOC;;;","17/Apr/17 1:09 AM;ChristopherFerris;deleted:    docs/source/API/AttributesUsage.rst
	deleted:    docs/source/API/CLI.rst
	deleted:    docs/source/API/ChaincodeAPI.rst
	deleted:    docs/source/API/Samples/Sample_1.js
	deleted:    docs/source/API/Samples/Sample_1.zip
	deleted:    docs/source/SystemChaincode-noop.rst
	deleted:    docs/source/protocol-spec.rst
	deleted:    docs/source/protocol-spec_zh.rst
	deleted:    docs/source/tech/application-ACL.rst
	deleted:    docs/source/tech/attributes.rst
	deleted:    docs/source/tech/best-practices.rst
;;;","17/Apr/17 1:09 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8089/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delivery client test fails sometimes in CI ,FAB-3175,15762,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,16/Apr/17 6:00 AM,19/Mar/19 8:13 PM,28/Oct/23 2:59 AM,18/Apr/17 4:13 PM,v1.0.0,,,,v1.0.0,,,fabric-gossip,,,,0,ci-failure,,,,,,,"This is the 2nd time this weekend I saw it fail. 

TestNewDeliverService  is the one that was there before I did the revamp, so maybe we need to adjust some stuff there.

IMO we should take a look at this.
[~C0rWin] [~gennadyl]

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9607/console

20:49:39 unit-tests_1  | 2017-04-15 20:49:07.441 UTC [deliveryClient] connect -> ERRO 02e Failed obtaining connection: Failed connecting
20:49:39 unit-tests_1  | stream error: code = 1 desc = ""context canceled""
20:49:39 unit-tests_1  | 2017-04-15 20:49:09.453 UTC [deliveryClient] connect -> ERRO 02f Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
20:49:39 unit-tests_1  | 2017-04-15 20:49:10.453 UTC [deliveryClient] connect -> ERRO 030 Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
20:49:39 unit-tests_1  | 2017-04-15 20:49:12.456 UTC [deliveryClient] StartDeliverForChannel -> ERRO 031 Delivery service - block provider already exists for TEST_CHAINID found, can't start delivery
20:49:39 unit-tests_1  | 2017-04-15 20:49:12.456 UTC [deliveryClient] StopDeliverForChannel -> ERRO 032 Delivery service - no block provider for TEST_CHAINID2 found, can't stop delivery
20:49:39 unit-tests_1  | 2017-04-15 20:49:12.471 UTC [blocksProvider] DeliverBlocks -> WARN 033 Receive error: Client is closing
20:49:39 unit-tests_1  | 2017-04-15 20:49:17.982 UTC [deliveryClient] StartDeliverForChannel -> ERRO 034 Delivery service is stopping cannot join a new channel TEST_CHAINID
20:49:39 unit-tests_1  | 2017-04-15 20:49:17.982 UTC [deliveryClient] StopDeliverForChannel -> ERRO 035 Delivery service is stopping, cannot stop delivery for channel TEST_CHAINID
20:49:39 unit-tests_1  | --- FAIL: TestNewDeliverService (6.53s)
20:49:39 unit-tests_1  | 	assertions.go:225: 
                        
	Error Trace:	deliveryclient_test.go:345
20:49:39 unit-tests_1  | 		
			deliveryclient_test.go:120
20:49:39 unit-tests_1  | 		
	Error:		Didn't gossip a new block within a timely manner
20:49:39 unit-tests_1  | 		
20:49:39 unit-tests_1  | 2017-04-15 20:49:23.369 UTC [blocksProvider] DeliverBlocks -> WARN 036 Receive error: Client is closing
20:49:39 unit-tests_1  | 2017-04-15 20:49:33.419 UTC [ConnProducer] NewConnection -> ERRO 037 Failed connecting to localhost:5612 , error: grpc: timed out when dialing
20:49:39 unit-tests_1  | 2017-04-15 20:49:33.421 UTC [blocksProvider] DeliverBlocks -> WARN 038 Receive error: Client is closing
20:49:39 unit-tests_1  | 2017-04-15 20:49:35.424 UTC [blocksProvider] DeliverBlocks -> WARN 039 Receive error: Client is closing
20:49:39 unit-tests_1  | FAIL
20:49:39 unit-tests_1  | coverage: 93.5% of statements
20:49:39 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/deliverservice	35.100s
20:49:39 unit-tests_1  | error: exit status 1
20:49:39 unit-tests_1  | panic: EOF
20:49:39 unit-tests_1  | 
20:49:39 unit-tests_1  | goroutine 1 [running]:
20:49:39 unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)
20:49:39 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
20:49:39 unit-tests_1  | main.main()
20:49:39 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd
20:49:40 unittest_unit-tests_1 exited with code 2
20:49:40 Stopping couchdb ... 
20:49:40 Stopping unittest_vp_1 ... 
20:49:42 
Stopping unittest_vp_1 ... done

Stopping couchdb ... done",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxq1z:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck errors in bccsp package,FAB-3176,15763,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adc,ChristopherFerris,ChristopherFerris,16/Apr/17 9:31 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 10:56 PM,v1.0.0,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck against bccsp package

bccsp/pkcs11/aes_test.go:291:2: empty branch (SA9003)
bccsp/pkcs11/fileks.go:200:8: this value of err is never used (SA4006)
bccsp/pkcs11/impl_test.go:1105:2: this value of R is never used (SA4006)
bccsp/pkcs11/pkcs11.go:589:13: this value of err is never used (SA4006)
bccsp/pkcs11/pkcs11_test.go:102:9: this value of err is never used (SA4006)
bccsp/pkcs11/pkcs11_test.go:168:9: this value of err is never used (SA4006)
bccsp/pkcs11/pkcs11_test.go:194:8: this value of err is never used (SA4006)
bccsp/sw/aes_test.go:291:2: empty branch (SA9003)
bccsp/sw/fileks.go:232:8: this value of err is never used (SA4006)
bccsp/sw/impl_test.go:1098:2: this value of R is never used (SA4006)",,angelo.decaro,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5hz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,ChristopherFerris,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 6:18 PM;elli-androulaki;[~vpaprots] and [~adecaro] can you guys take a look at this?;;;","24/Apr/17 12:59 AM;angelo.decaro;Addressed sw package in https://gerrit.hyperledger.org/r/#/c/8443/. Thanks :);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck errors in common package,FAB-3177,15764,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ChristopherFerris,ChristopherFerris,16/Apr/17 9:34 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Apr/17 10:33 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

common/configtx/test/helper_test.go:48:14: this value of err is never used (SA4006)
common/configtx/tool/configtxgen/main.go:72:8: this value of err is never used (SA4006)
common/configtx/tool/configtxgen/main.go:131:8: this value of err is never used (SA4006)
common/configtx/update_test.go:152:2: this value of policy is never used (SA4006)
common/ledger/blkstorage/fsblkstorage/blockfile_mgr_test.go:108:2: should check returned error before deferring itr.Close() (SA5001)
common/ledger/blkstorage/fsblkstorage/blockfile_scan_test.go:70:2: should check returned error before deferring file.Close() (SA5001)
common/ledger/blkstorage/fsblkstorage/blocks_itr_test.go:38:2: should check returned error before deferring itr.Close() (SA5001)
common/policies/policy.go:230:2: this value of pendingConfig is never used (SA4006)
common/tools/cryptogen/ca/generator.go:51:16: this value of err is never used (SA4006)
common/tools/cryptogen/msp/msp_test.go:74:10: this value of err is never used (SA4006)",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq27:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck found errors in gossip package,FAB-3178,15765,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,gennadyl,ChristopherFerris,ChristopherFerris,16/Apr/17 9:40 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 8:26 PM,v1.0.0,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

gossip/comm/comm_impl.go:111:4: should call commInst.stopWG.Add(1) before starting the goroutine to avoid a race (SA2000)
gossip/comm/comm_impl.go:361:5: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:112:2: this value of err is never used (SA4006)
gossip/comm/comm_test.go:115:8: this value of err is never used (SA4006)
gossip/comm/comm_test.go:392:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:395:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:624:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/comm_test.go:627:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/conn.go:312:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/comm/crypto.go:52:6: this value of err is never used (SA4006)
gossip/discovery/discovery_impl.go:281:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/discovery/discovery_impl.go:307:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/discovery/discovery_impl.go:504:2: this value of lastAliveTS is never used (SA4006)
gossip/gossip/algo/pull_test.go:94:5: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/gossip/gossip_impl.go:231:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/gossip/gossip_impl.go:279:4: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/gossip/gossip_impl.go:687:5: ineffective break statement. Did you mean to break out of the outer loop? (SA4011)
gossip/state/state.go:309:5: unsigned values are never < 0 (SA4003)",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxq2f:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck found errors in orderer package,FAB-3179,15766,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,ChristopherFerris,ChristopherFerris,16/Apr/17 9:43 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 4:26 AM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,sbft,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

orderer/sbft/backend/backend.go:471:11: this value of err is never used (SA4006)
orderer/sbft/connection/connection.go:59:10: this value of err is never used (SA4006)
orderer/sbft/simplebft/newview_test.go:121:2: this value of xset is never used (SA4006)
orderer/sbft/simplebft/newview_test.go:167:2: this value of xset is never used (SA4006)",,ChristopherFerris,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxmsv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 2:57 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/8339/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck found errors in peer,FAB-3180,15767,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ChristopherFerris,ChristopherFerris,16/Apr/17 9:45 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/Apr/17 3:00 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"ran https://github.com/dominikh/go-tools/tree/master/cmd/staticcheck

peer/chaincode/install.go:46:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/chaincode/install.go:47:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/chaincode/instantiate.go:39:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/chaincode/instantiate.go:40:26: printf-style function with dynamic first argument and no further arguments should use print-style function instead (SA1006)
peer/channel/join.go:71:2: this value of spec is never used (SA4006)
",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq2n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Can't create 3rd participant in Asset Registry.,FAB-3181,15768,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,mohamoud.egal,mohamoud.egal,16/Apr/17 11:36 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/May/17 3:23 PM,v1.0.0-alpha1,,,,WON'T FIX,,,,,,,0,,,,,,,,"I'm trying to create 3 Member assets, but every time I try to create the 3rd member (using either generated or specific data) it won't let me. What happens is that the Create Participant button is white.

I tried using localstorage.clear() and refreshing my browser twice, but still no change.",,ChristopherFerris,mohamoud.egal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/17 11:33 AM;mohamoud.egal;Screen Shot 2017-04-15 at 10.32.43 PM.png;https://jira.hyperledger.org/secure/attachment/10668/Screen+Shot+2017-04-15+at+10.32.43+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq2v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,mohamoud.egal,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/17 7:53 PM;ChristopherFerris;This appears to be related to Composer, which manages their issues on GitHub. Please open a defect there.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CI failure in delivery service - goroutines didn't finish,FAB-3182,15769,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,16/Apr/17 6:48 PM,19/Mar/19 8:13 PM,28/Oct/23 2:59 AM,19/Apr/17 3:44 AM,,,,,v1.0.0,,,fabric-gossip,,,,0,ci-failure,,,,,,,"I think that the goroutine check needs to be poll-based, it seems that it's too brittle as I saw a CI failure:

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9618/console

09:43:12 unit-tests_1  | 2017-04-16 09:42:45.470 UTC [deliveryClient] connect -> ERRO 02e Failed obtaining connection: Failed connecting
09:43:12 unit-tests_1  | stream error: code = 1 desc = ""context canceled""
09:43:12 unit-tests_1  | 2017-04-16 09:42:47.473 UTC [deliveryClient] connect -> ERRO 02f Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
09:43:12 unit-tests_1  | 2017-04-16 09:42:48.473 UTC [deliveryClient] connect -> ERRO 030 Connection to  localhost:5611 established but was unable to create gRPC stream: Failed creating ABC
09:43:12 unit-tests_1  | --- FAIL: TestProductionUsage (1.00s)
09:43:12 unit-tests_1  | 	assertions.go:219: 
                        
	Error Trace:	deliveryclient_test.go:353
09:43:12 unit-tests_1  | 		
			client_test.go:599
09:43:12 unit-tests_1  | 		
	Error:		Not equal: 4 (expected)
09:43:12 unit-tests_1  | 			        != 3 (actual)
09:43:12 unit-tests_1  | 		
	Messages:	Some goroutine(s) didn't finish: goroutine 78 [running]:
09:43:12 unit-tests_1  | 		github.com/hyperledger/fabric/core/deliverservice.getStackTrace(0x3, 0xc420350000)
09:43:12 unit-tests_1  | 			/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient_test.go:359 +0x79
09:43:12 unit-tests_1  | 		github.com/hyperledger/fabric/core/deliverservice.ensureNoGoroutineLeak.func1()
09:43:12 unit-tests_1  | 			/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/deliveryclient_test.go:353 +0x86
09:43:12 unit-tests_1  | 		github.com/hyperledger/fabric/core/deliverservice.TestProductionUsage(0xc4202ac540)
09:43:12 unit-tests_1  | 			/opt/gopath/src/github.com/hyperledger/fabric/core/deliverservice/client_test.go:599 +0x49b
09:43:12 unit-tests_1  | 		testing.tRunner(0xc4202ac540, 0xa10b18)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:610 +0x81
09:43:12 unit-tests_1  | 		created by testing.(*T).Run
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:646 +0x2ec
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 		goroutine 1 [chan receive]:
09:43:12 unit-tests_1  | 		testing.(*T).Run(0xc4202a1200, 0x9cd8ed, 0x13, 0xa10b18, 0xc420173c01)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:647 +0x316
09:43:12 unit-tests_1  | 		testing.RunTests.func1(0xc4202a1200)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:793 +0x6d
09:43:12 unit-tests_1  | 		testing.tRunner(0xc4202a1200, 0xc420173d78)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:610 +0x81
09:43:12 unit-tests_1  | 		testing.RunTests(0xa11c40, 0xe5ff20, 0x12, 0x12, 0x412e8e)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:799 +0x2f5
09:43:12 unit-tests_1  | 		testing.(*M).Run(0xc420173ed8, 0x9e2f76)
09:43:12 unit-tests_1  | 			/opt/go/src/testing/testing.go:743 +0x85
09:43:12 unit-tests_1  | 		main.main()
09:43:12 unit-tests_1  | 			github.com/hyperledger/fabric/core/deliverservice/_test/_testmain.go:138 +0x1bd
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 		goroutine 17 [syscall, locked to thread]:
09:43:12 unit-tests_1  | 		runtime.goexit()
09:43:12 unit-tests_1  | 			/opt/go/src/runtime/asm_amd64.s:2086 +0x1
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 		
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.477 UTC [deliveryClient] StartDeliverForChannel -> ERRO 031 Delivery service - block provider already exists for TEST_CHAINID found, can't start delivery
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.478 UTC [deliveryClient] StopDeliverForChannel -> ERRO 032 Delivery service - no block provider for TEST_CHAINID2 found, can't stop delivery
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.998 UTC [deliveryClient] StartDeliverForChannel -> ERRO 033 Delivery service is stopping cannot join a new channel TEST_CHAINID
09:43:12 unit-tests_1  | 2017-04-16 09:42:50.998 UTC [deliveryClient] StopDeliverForChannel -> ERRO 034 Delivery service is stopping, cannot stop delivery for channel TEST_CHAINID
09:43:12 unit-tests_1  | 2017-04-16 09:42:56.314 UTC [blocksProvider] DeliverBlocks -> WARN 035 Receive error: Client is closing
09:43:12 unit-tests_1  | 2017-04-16 09:43:06.320 UTC [ConnProducer] NewConnection -> ERRO 036 Failed connecting to localhost:5612 , error: grpc: timed out when dialing
09:43:12 unit-tests_1  | 2017-04-16 09:43:06.322 UTC [blocksProvider] DeliverBlocks -> WARN 037 Receive error: Client is closing
09:43:12 unit-tests_1  | 2017-04-16 09:43:08.325 UTC [blocksProvider] DeliverBlocks -> WARN 038 Receive error: Client is closing
09:43:12 unit-tests_1  | FAIL",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxq33:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Need to warm up CouchDB indexes upon startup,FAB-3183,15770,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,denyeart,denyeart,16/Apr/17 8:34 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,08/Nov/17 7:07 PM,,,,,Future,,,fabric-ledger,,,,0,,,,,,,,"Let's look at worst case... CouchDB builds indexes at query time (for any new docs since last index update), not at insert/update time like most databases.  Let's say a new peer has just come up and done state transfer on 1 million blocks.  CouchDB state db will be built out, but the first query during a simulation will have to build out an index covering millions of documents. The amount of time is probably measured in seconds, potentially exceeding the default timeout for CouchDB and chaincode execution.

It would be better to 'warm up' the indexes upon peer start (ledger initialization) by doing a trivial query.  This will force any unindexed documents to get indexed, before the peer can accept simulation requests.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6855,,FAB-2877,,,FAB-3131,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxq3b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Peer Timouts - some are configured as 'integers', some as 'durations'",FAB-3184,15771,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,denyeart,denyeart,16/Apr/17 8:48 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/May/17 5:49 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Viper allows for setting properties as 'durations', such as 30s for 30 seconds.
Most peer and orderer properties are set as durations, but a few are set as integers.  Durations are probably better since the unit makes them unambiguous. This inconsistency should be fixed prior to 1.0 release.
Here are a few examples from core.yaml that should should be fixed:

timeout: 10
startuptimeout: 300000
executetimeout: 30000
deploytimeout: 30000",,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq3j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/17 8:50 PM;denyeart;[~muralisr] [~wlahti]
Will, do you want to take this one?;;;","17/Apr/17 10:30 PM;wlahti;[~denyeart] Yes, I'll handle this. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
historyDatabase is under 'state' section in core.yaml,FAB-3185,15772,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,denyeart,denyeart,16/Apr/17 9:00 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 3:06 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"historyDatabase is under 'state' section in core.yaml.  'history' should be a peer of 'state', with the config option being called something like enableHistoryDatabase.  This will allow for other history config options distinct from state config options.

Somewhat related, we have queryLimit under 'ledger' section.  This should be moved to couchDBConfig section after this one gets merged:
https://gerrit.hyperledger.org/r/#/c/7255/",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-199,,,,,,,,,"1|hzx4lz:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up sbft-related artifacts in orderer pkg,FAB-3186,15773,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,hgabre,kchristidis,kchristidis,17/Apr/17 1:07 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,10/Jul/17 12:32 PM,,,,,WON'T FIX,,,fabric-orderer,,,,0,sbft,,,,,,,"There are sbft-related artifacts in the the top-level orderer package that do not belong there.

I was told that they were allowed in there temporarily until some sbft-related work was completed, but it's been a couple of months now, and as we're finalizing the work for v1.0 we should expedite this clean up.

Specifically, the following needs to go:

# ""genesis"" section in orderer.yaml file: this holds deprecated settings simply for sbft - https://github.com/hyperledger/fabric/blob/master/orderer/orderer.yaml#L173
# ""sbft_test.go"" and ""network_test.go"" in ""fabric/orderer"": both of them are sbft-related and don't belong in the top-level orderer package.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2489,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxq3r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Apr/17 1:09 AM;kchristidis;[~hgabre]: We'd appreciate your help in this one as you have a better understanding of the code involved here.;;;","10/Jul/17 12:33 PM;kchristidis;No longer relevant.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
dead code in admin.go,FAB-3187,15774,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,17/Apr/17 8:31 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,17/Apr/17 9:20 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,worker function is unused code. Appears to be original code that had been added but never used. ,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
dead code in core/errors/errors.go,FAB-3189,15776,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,17/Apr/17 9:15 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,17/Apr/17 9:34 AM,v1.0.0,,,,WON'T FIX,,,fabric-peer,,,,0,quality,,,,,,,"core/errors/errors.go:32:5: var errorLogger is unused (U1000)
core/errors/errors.go:63:6: func newHLError is unused (U1000)",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq47:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Apr/17 9:35 AM;ChristopherFerris;believe that this was a temporary situation as the errors package is not fully implemented.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unused variable in core/endorser/endorser_test.go,FAB-3190,15777,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,17/Apr/17 9:40 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,17/Apr/17 9:20 PM,v1.0.0,,,,v1.0.0,,,,,,,0,,,,,,,,"core/endorser/endorser_test.go:53:5: var mspInstance is unused (U1000)
",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq4f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ability to enable profiling of server and client,FAB-3191,15778,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,aambati,aambati,aambati,17/Apr/17 12:33 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/May/17 11:04 PM,,,,,,,,,,,,0,,,,,,,,Provide command line options to enable cpu/heap profiling of the fabric CA server and client,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq4n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 4:16 AM;aambati;https://gerrit.hyperledger.org/r/8099;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
deleted,FAB-3193,15780,13733,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,vpaprots,vpaprots,vpaprots,17/Apr/17 5:00 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,17/Apr/17 5:04 PM,,,,,,,,,,,,0,HSM,,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq53:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PKCS11 BCCSP bug fixes,FAB-3194,15781,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,vpaprots,vpaprots,vpaprots,17/Apr/17 5:05 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/May/17 10:37 PM,,,,,Future,,,fabric-crypto,,,,0,,,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx6hb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adjust anchor peers in docker-compose-no-tls of e2e,FAB-3195,15782,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/Apr/17 5:34 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/Apr/17 4:12 PM,,,,,v1.0.0,,,fabric-samples,,,,0,quality,Usability,,,,,,"The examples/e2e_cli/docker-compose-no-tls.yaml has peer0 as an anchor peer for all peers.
This is against the design (it needs to be in the same org), and should be synced to what is found in docker-compose.yaml",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq5b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot link to pkcs11 library with -static builds,FAB-3196,15783,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,vpaprots,vpaprots,vpaprots,17/Apr/17 5:45 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/May/17 1:22 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,"It should be possible (nss does it, thanks [~ghaskins] for taking me through)

However, something about the build causes glibc not to initialize the lock needed at dlopen() time causing a crash.
<TODO: more info, backtraces, links.. spent two days here>

Gave up to make progress elsewhere, need to come back and resolve. As a workaround in my sandbox, https://gerrit.hyperledger.org/r/#/c/7927/9/docker-env.mk however, I also needed to install libtool in baseos, which wont work..

For [~greg.haskins] and [~mastersingh24] attention and help!

",,divyank,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq5j:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,divyank,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 1:19 AM;vpaprots;Sent to hyperledger-fabric@lists.hyperledger.org

-----------

I have been trying to get PKCS11 support into fabric so that our crypto operations can be backed up by a crypto card. Over the last several days I ran into issues with builds, so I had a lengthy chat with Greg Haskins for what it means to support PKCS11. (At lowest level, PKCS11 is set of headers/function definitions that a DLL/SO is built to be made pluggable)

Our current status:
(0) FROM: ubuntu:16.04 + static peer

As much as I try, I cannot get static peer to link with PKCS11 library (crash in glibc). Also, as Greg points out, one pkcs11 dll that works on one release, might not work on another

Alternatives:
(1) FROM: scratch + static peer
(2) FROM: ubuntu:16.04 + dynamic peer
(3) build fabric for various distros

The good and the bad:
1) [FROM: scratch + static peer] No HSM support. As a docker distribution, this is probably the most portable. This executable can be copied out, distro-independent, and the smallest footprint.

2) [FROM: ubuntu:16.04 + dynamic peer] (Some) HSM support. Card vendors must support Ubuntu (i.e. provide deb packages, etc.). Changing base OS or even updating base OS release now becomes something that could break customers.

3) [build fabric for various distros] (Best) HSM support. Customer chose their supported distro. Install their pkcs11 hsm.so (`yum install hsm`, `apt-get install hsm`, etc.), install fabric (`yum install fabric-peer`, `apt-get install fabric-peer`, etc.) and compose their (arbitrary) container as they like. However, this explodes the support configuration requirements.

----

Two questions:
- For v1.0, I would propose (0)->(2). This gets us HSM, but at the price of static builds. (This is https://jira.hyperledger.org/browse/FAB-3196 Has two gerrit patches associated)
- For v1.x, we need to reconsider our distribution strategy. There is value in scratch builds. Is locking down to Ubuntu (2) ok? Should we be heading to distro repos?

Greg, is that about what we discussed? What are the thoughts of other maintainers and the community?;;;","09/May/17 1:22 AM;vpaprots;Won't fix. Staying at option (0). Closing.;;;","12/Sep/17 12:40 AM;divyank;[~vpaprots] How was this resolved? Were you able to statically link the libraries that PKCS11 requires?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove un-necessary WARN log from gossip comm at shutdown,FAB-3198,15785,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/Apr/17 6:33 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/Apr/17 4:50 PM,,,,,v1.0.0,,,,,,,0,gossip,,,,,,,"The gossip comm layer exposes a subscription-like API and returns a dedicated channel
to the caller.

Since it is convenient to iterate over a channel until it's closed, or to understand that a channel has been closed when nil is returned from select - it was implemented that at the comm layer shutdown - the subscriptions channels are closed.

This might have caused a ""send to closed channel"" error- and so- the implementation has a defer statement with recover() that recovers from that.

It also logs a WARN message un-necessarily because that's not something that shouldn't have happened.

So, unless anyone objects( [~C0rWin] / [~gennadyl] ) I'm removing this WARN logging message.
",,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxq5z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/17 6:54 PM;C0rWin;Sounds right to me, please do it [~yacovm];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Committer should call CSCC upong config block arrival,FAB-3199,15786,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,17/Apr/17 6:50 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/Jun/17 11:35 PM,v1.0.0-alpha1,v1.0.0-alpha2,,,v1.0.0,,,fabric-peer,,,,6,gossip,peer,,,,,,"Currently while new configuration block arrives from the ordering service no call for CSCC *UpdateConfig* is made, this need to be fixed and once configuration block reaches the committer it has to call the appropriate CSCC.

Right now code which is responsible of any updates regarding new configuration arrival is:

{code}
 
// createChain creates a new chain object and insert it into the chains
func createChain(cid string, ledger ledger.PeerLedger, cb *common.Block) error {

	envelopeConfig, err := utils.ExtractEnvelope(cb, 0)
	if err != nil {
		return err
	}

	configtxInitializer := configtx.NewInitializer()

	gossipEventer := service.GetGossipService().NewConfigEventer()

	gossipCallbackWrapper := func(cm configtxapi.Manager) {
		gossipEventer.ProcessConfigUpdate(&chainSupport{
			Manager:     cm,
			Application: configtxInitializer.ApplicationConfig(),
		})
	}

	trustedRootsCallbackWrapper := func(cm configtxapi.Manager) {
		updateTrustedRoots(cm)
	}

	configtxManager, err := configtx.NewManagerImpl(
		envelopeConfig,
		configtxInitializer,
		[]func(cm configtxapi.Manager){gossipCallbackWrapper, trustedRootsCallbackWrapper},
	)
	if err != nil {
		return err
	}

	// TODO remove once all references to mspmgmt are gone from peer code
	mspmgmt.XXXSetMSPManager(cid, configtxManager.MSPManager())

	cs := &chainSupport{
		Manager:     configtxManager,
		Application: configtxManager.ApplicationConfig(), // TODO, refactor as this is accessible through Manager
		ledger:      ledger,
	}

	c := committer.NewLedgerCommitter(ledger, txvalidator.NewTxValidator(cs))
	ordererAddresses := configtxManager.ChannelConfig().OrdererAddresses()
	if len(ordererAddresses) == 0 {
		return errors.New(""No orderering service endpoint provided in configuration block"")
	}
	service.GetGossipService().InitializeChannel(cs.ChainID(), c, ordererAddresses)

	chains.Lock()
	defer chains.Unlock()
	chains.list[cid] = &chain{
		cs:        cs,
		cb:        cb,
		committer: c,
	}
	return nil
}
{code}

Where relevant part of callback registration for config block arrival is:

{code}
	configtxManager, err := configtx.NewManagerImpl(
		envelopeConfig,
		configtxInitializer,
		[]func(cm configtxapi.Manager){gossipCallbackWrapper, trustedRootsCallbackWrapper},
	)
{code}

This should be refactored and replaced with call for *CofigUpdate* from CSCC:

{code}
// These are function names from Invoke first parameter
const (
	JoinChain         string = ""JoinChain""
	UpdateConfigBlock string = ""UpdateConfigBlock""
	GetConfigBlock    string = ""GetConfigBlock""
	GetChannels       string = ""GetChannels""
)
{code}

And 

{code}
func updateConfigBlock(blockBytes []byte) pb.Response {
	if blockBytes == nil {
		return shim.Error(""Configuration block must not be nil."")
	}
	block, err := utils.GetBlockFromBlockBytes(blockBytes)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to reconstruct the configuration block, %s"", err))
	}
	chainID, err := utils.GetChainIDFromBlock(block)
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed to get the chain ID from the configuration block, %s"", err))
	}

	if err := peer.SetCurrConfigBlock(block, chainID); err != nil {
		return shim.Error(err.Error())
	}

	return shim.Success(nil)
}
{code}",,binhn,C0rWin,ChristopherFerris,JonathanLevi,jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3430,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq67:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,binhn,C0rWin,ChristopherFerris,JonathanLevi,jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/May/17 8:09 AM;mastersingh24;I don't think we need to call CSCC.  We should be able to register a callback / handler function on the configtx manager.  We do this for gossip and TLS already ;;;","27/May/17 4:24 AM;binhn;+1

In review CR [https://gerrit.hyperledger.org/r/#/c/8403];;;","28/May/17 6:48 AM;C0rWin;{quote}
I don't think we need to call CSCC.  We should be able to register a callback / handler function on the configtx manager.  We do this for gossip and TLS already 
{quote}

I think that I'd agree with this approach especially keeping in mind that configuration manager already takes care of updating msp and gossip with callbacks upon configuration update.

{code}
	gossipEventer := service.GetGossipService().NewConfigEventer()

	gossipCallbackWrapper := func(cm configtxapi.Manager) {
		gossipEventer.ProcessConfigUpdate(&chainSupport{
			Manager:     cm,
			Application: configtxInitializer.ApplicationConfig(),
		})
		service.GetGossipService().SuspectPeers(func(identity api.PeerIdentityType) bool {
			// TODO: this is a place-holder that would somehow make the MSP layer suspect
			// that a given certificate is revoked, or its intermediate CA is revoked.
			// In the meantime, before we have such an ability, we return true in order
			// to suspect ALL identities in order to validate all of them.
			return true
		})
	}

	trustedRootsCallbackWrapper := func(cm configtxapi.Manager) {
		updateTrustedRoots(cm)
	}

	configtxManager, err := configtx.NewManagerImpl(
		envelopeConfig,
		configtxInitializer,
		[]func(cm configtxapi.Manager){gossipCallbackWrapper, trustedRootsCallbackWrapper},
	)
	if err != nil {
		return err
	}

	// TODO remove once all references to mspmgmt are gone from peer code
	mspmgmt.XXXSetMSPManager(cid, configtxManager.MSPManager())
{code};;;","02/Jun/17 3:51 AM;jyellick;Are we certain we even want to keep these two methods?

{noformat}
	UpdateConfigBlock string = ""UpdateConfigBlock""
	GetConfigBlock    string = ""GetConfigBlock""
{noformat}

The only consumer I found of {{GetConfigBlock}} was {{peer/chaincode/common.go}} the {{GetOrdererEndpointOfChain}} method.  Here, the config block is retrieved, a new manager is constructed, the config block is fed in and parsed, and finally the resulting config is read.  This method probably should simply be retrieving the existing config manager, and querying the config.

The existance of the {{GetConfigBlock}} method seems to encourage users to re-parse configuration which has already been parsed, so seems to invite bad patterns like {{GetOrdererEndpointOfChain}} above.

And as best as I can tell, there are currently no consumers of {{UpdateConfigBlock}}.

My suggestion would be to remove these, rather than update the code to call them.
;;;","02/Jun/17 7:03 AM;ChristopherFerris;This has received the requisite votes to proceed, but [~jyellick] has some reasonable feedback that should be considered (IMO). [~C0rWin] Please work with Jason. Thanks I'll remove from review-needed.;;;","02/Jun/17 7:54 AM;C0rWin;[~jyellick] I'd agree that {{UpdateConfigBlock}} API should be removed from the CSCC API, while I think that {{GetConfigBlock}} could not be changed to simply retrieve configuration manager instead of configuration block, simply because the only change in code is peer cli which creates it again to parse the block. CSCC is a public API which invoked via system chaincode invocation and finding usages in the code it not enough to take a decision of removing/changing {{GetConfigBlock}} API.

Will update my CR accordingly.;;;","02/Jun/17 8:22 AM;C0rWin;CR updated: https://gerrit.hyperledger.org/r/#/c/8403/;;;","02/Jun/17 12:00 PM;binhn;[~C0rWin] [~jyellick]  That is correct. CSCC.GetConfigBlock is an external API for App/SDK to retrieve the current configuration block on a channel. ;;;","02/Jun/17 8:05 PM;JonathanLevi;As noted in Gerrit, [https://gerrit.hyperledger.org/r/#/c/8403] looks good to merge (at least to me), in case we all agree on the behavior functionality. Are we there?;;;","02/Jun/17 11:25 PM;jyellick;Thanks for the explanation, although I'll maintain we should not be invoking this call internally within the peer, it makes sense to supply {{GetConfigBlock}} as an external API for the App/SDK.

My primary concern was the {{UpdateConfigBlock}} call, which I see has been removed in [~C0rWin]'s CR.  I can support this as is.;;;","02/Jun/17 11:27 PM;JonathanLevi;[~jyellick] Thank you, can you please formally vote? (top right);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document PKCS11 usage,FAB-3200,15787,,Task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,vpaprots,vpaprots,17/Apr/17 10:50 PM,28/Jul/19 1:21 AM,28/Oct/23 2:59 AM,,,,,,,,,,,,,0,,,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3773,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq6f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,vpaprots,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix broken links in Read the Docs (using relative file paths),FAB-3201,15788,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tkuhrt,nickgaski,nickgaski,17/Apr/17 11:55 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/May/17 1:56 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,A lot of these broken links occurred as a result of the md -> rst conversion.  A good number will need to be scrubbed.  This will be ongoing... ,,ChristopherFerris,JonathanLevi,lehors,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,"1|hzx33z:",,,,,,Sprint 17 - Documentation,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,JonathanLevi,lehors,markparz,nickgaski,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Apr/17 4:08 AM;markparz;[~tkuhrt] [~lehors] and [~nickgaski] are collaborating together on these.;;;","16/May/17 9:08 PM;JonathanLevi;Gerrit CR: https://gerrit.hyperledger.org/r/#/c/8887;;;","17/May/17 4:57 PM;lehors;With the merge of CR8887 the only broken links left according to Xenu are the following:
{code:java}
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxOERBMTRGRDBFMUUxMUUzODUwMkJCOThDMEVFNURFMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxOERBMTRGRTBFMUUxMUUzODUwMkJCOThDMEVFNURFMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjE4REExNEZCMEUxRTExRTM4NTAyQkI5OEMwRUU1REUwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjE4REExNEZDMEUxRTExRTM4NTAyQkI5OEMwRUU1REUwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+EwrlwAAAAA5JREFUeNpiMDU0BAgwAAE2AJgB9BnaAAAAAElFTkSuQmCC
error code: 404 (not found), linked from page(s):
	file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/css/theme.css

file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/fonts/fontawesome-webfont.woff2
error code: 2 (file not found), linked from page(s):
	file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/css/theme.css

file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/images/fabric1.png
error code: 2 (file not found), linked from page(s):
	file:///C:/Users/lehors/Documents/Projects/Go/src/github.com/hyperledger/fabric/docs/build/html/_static/css/custom.css
{code}
I'd like to address those so we can close this ticket but I have to admit not to be sure what to do about those.

The fabric1.png is nowhere in the tree. Should its reference just be removed from the custom.css file? Obviously no one would see any different.

As for the problem with fontawesome it comes from the theme.css file which gets generated but I don't know how...

Any help on this would be appreciated.

Thanks.

 ;;;","17/May/17 9:18 PM;ChristopherFerris;for problems with other software (e.g. theme.css) ignore. For the fabric1.png, just delete the reference.;;;","17/May/17 10:29 PM;lehors;All right. Fair enough.

Thanks for the input.

 ;;;","18/May/17 1:57 AM;lehors;It's not like the doc is perfect by any means but I believe the crux of this issue has been addressd. So I'm closing it now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lock down the python modules using a requirements.txt file,FAB-3203,15790,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,jeffgarratt,jeffgarratt,jeffgarratt,18/Apr/17 1:10 AM,23/Jan/20 4:05 AM,28/Oct/23 2:59 AM,23/Jan/20 4:05 AM,,,,,,,,,,,,0,stale-item,,,,,,,,,jeffgarratt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1141,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxq6n:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,jeffgarratt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:05 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Documentation for Running Docker Images on Windows (without Vagrant),FAB-3204,15791,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,bmos299,bmos299,18/Apr/17 1:20 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,10/Feb/18 1:33 AM,,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,Many blockchain want to run images native on windows wiithout vagrant.  Recently merges have allowed this to be possible and we need to add some info in our e2e instructions. ,,bmos299,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,86400,86400,,0%,86400,86400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq6v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check if hf.Revoker attribute is set to true to determine if an identity has revoker previlege,FAB-3206,15793,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,aambati,aambati,18/Apr/17 2:29 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/May/17 12:38 AM,v1.0.0-alpha1,,,,v1.0.0,WON'T FIX,,,,,,0,,,,,,,,"Check if *hf.Revoker* attribute is set to ""true"" to determine if an identity has revoker privilege, as opposed to just checking if *hf.Revoker* attribute is set (to some value)

Also, in configuration template hf.Revoker attribute in the admin identity section is set to true, instead of ""true"" as attribute values need to be strings
",,aambati,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq73:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/17 7:55 PM;ChristopherFerris;This needs more information - have no idea what this is about.;;;","26/May/17 3:47 PM;ChristopherFerris;[~aambati] [~bmos299] this needs more information to make it actionable.;;;","27/May/17 12:38 AM;aambati;I think it is working as it is currently – code is checking if the attribute hf.Revoker is set or not.  There is no need to check if the value is true or not. I will close this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Join channel might fail if events are failed to be published,FAB-3207,15794,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,yacovm,yacovm,18/Apr/17 3:47 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,19/Apr/17 3:43 AM,v1.0.0,,,,,,,fabric-peer,,,,0,,,,,,,,"The code below is invoked when join channel is called:
https://github.com/hyperledger/fabric/blob/master/core/scc/cscc/configure.go#L124-L127
{code}
	if err := producer.SendProducerBlockEvent(block); err != nil {
		msg := fmt.Sprintf(""Error sending block event %s"", err)
		return shim.Error(msg)
	}
{code}
While the call to publish the event might fail in case a subscriber is reading ""too slow"" from the channel/stream:
https://github.com/hyperledger/fabric/blob/master/events/producer/events.go#L324-L327
{code}
func Send(e *pb.Event) error {
                ...
                ...
                ... 
		select {
		case gEventProcessor.eventChannel <- e:
		case <-time.After(time.Duration(gEventProcessor.timeout) * time.Millisecond):
			return fmt.Errorf(""could not send the blocking event"")
		}
	}
{code}

IMO an event publishing shouldn't fail a channel joining, and this also exposes the peer to an attack by a client - it can render the peer unable to join to any channel in this way.
[~C0rWin] [~mastersingh24] [~binhn]",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq7b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Apr/17 3:49 AM;yacovm;Also - my opinion is that slow reading clients should just be removed as subscribers from the event hub, as they also ""block"" the publishing for all other subscribers:
https://github.com/hyperledger/fabric/blob/master/events/producer/events.go#L212-L236
{code}
		hl.foreach(e, func(h *handler) {
			if e.Event != nil {
				h.SendMessage(e)
			}
		})
{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Produce a container which contains the various fabric tools,FAB-3208,15795,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mffrench,mffrench,mffrench,18/Apr/17 4:20 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,21/Sep/17 8:28 AM,,,,,v1.0.0,,,fabric-tools,,,,0,,,,,,,,Currently cryptogen and configtxgen are used to generate fabric PKI and configuration for peer and orderer. Adding these binaries inside of a container might make it easier for developers since at times it can be a little tricky with native binaries to connect to other running containers (e.g. using Docker for Windows) ,,mastersingh24,mffrench,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3095,,,,,,,,,"1|hzxq7j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,mffrench,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/17 9:14 PM;mastersingh24;[~mffrench] I'm going to modify this request a bit to try to meet the intent and not modify the existing runtime containers;;;","08/May/17 9:39 PM;mffrench;Hi Gari,

that's OK for me. 

FYI : following our discussion on Gerrit I tried to download these tools from the link defined on the get started doc but unfortunately this link is down. So a docker fabric-tools image will be useful at least to provide some backup way to get the release of these tools...

Best, ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen bug -outputBlock & -channelID,FAB-3210,15798,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,Lin-YiTang,Lin-YiTang,18/Apr/17 1:09 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Jun/17 2:55 AM,v1.0.0-alpha1,,,,WON'T FIX,,,fabric-orderer,,,,0,won't-fix,,,,,,,"i try -outputBlock & -channelID
and Orderer use that Block(setting ORDERER_GENERAL_GENESISFILE)
it can't work , when ""peer channel create""
example 
configtxgen -profile TwoOrgs -outputBlock orderer.block {color:red}-channelID mychannel{color}

you can try modify e2e_cli/generateCfgTrx.sh ,then you will understand my mind

./build/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block 
change to
./build/bin/configtxgen -profile TwoOrgs -outputBlock orderer.block {color:red}-channelID $CHANNEL_NAME{color}
",,arun17,jyellick,Lin-YiTang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq7z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,arun17,jyellick,Lin-YiTang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/17 2:53 AM;jyellick;I do not believe this is a bug.  I cannot reproduce.

I've attempted to recreate this locally.

I ran the following:

{noformat}
configtxgen -outputBlock foo.block -channelID foo

ORDERER_GENESIS_METHOD=file ORDERER_GENESIS_FILE=foo.block orderer &

configtxgen -outputCreateChannelTx -channelID bar.tx -profile SampleEmptyInsecureChannel

peer channel create -f bar.tx -c bar -o 127.0.0.1:7050
{noformat}

The channel was created and the bar.block was retrieved.

I also tested this in e2e with similar results.

It looks to me like what may have been done to the e2e script was to re-use the variable $CHANNEL_NAME to generate the genesis block.  If you have done this, this would mean that the peer is trying to create a channel with the same name as the ordering system channel, which will most certainly, and correctly fail (causing the e2e test to fail).

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add revocation support to gossip,FAB-3213,15802,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,18/Apr/17 7:05 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,20/Apr/17 8:39 PM,,,,,,,,,,,,0,,,,,,,,"When a peer gets a new config block and it contains CRLs, the gossip layer needs to be notified in order to close existing connections to peers that their certificates have been expired. 

If this is not done, then these peers are still forwarded data like peer membership and channel membership, because the connection is already open.

What can be done, is to simply expand the [config | https://github.com/hyperledger/fabric/blob/master/gossip/service/eventer.go#L27-L37] interface:
{code}
// Config enumerates the configuration methods required by gossip
type Config interface {
	// ChainID returns the chainID for this channel
	ChainID() string

	// Organizations returns a map of org ID to ApplicationOrgConfig
	Organizations() map[string]config.ApplicationOrg

	// Sequence should return the sequence number of the current configuration
	Sequence() uint64
}
{code}
To have an object/function that given a serialized identity, it returns true or false whether it is revoked.
Then, this object would be passed further down to the [gossip package | https://github.com/hyperledger/fabric/blob/master/gossip/gossip/], where we'd iterate over the certificates known to us, and obtain the PKI-IDs that their corresponding connections should be closed (we can detect if a certificate is revoked by simply asking the MSP to [validate | https://github.com/hyperledger/fabric/blob/master/gossip/api/crypto.go#L55] that certificate) , and then the code would make the gossip's code layer to [close | https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm.go#L53] the connection

[~C0rWin] [~mastersingh24] [~binhn] [~elli-androulaki]",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxq8n:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Omitting a dot in policy principals makes parser segfault,FAB-3215,15804,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,ales,mne,mne,18/Apr/17 9:51 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/Jun/17 10:01 AM,,,,,v1.0.0,,,fabric-crypto,,,,2,,,,,,,,"For endorsement and instantiation policies, using a principal without a dot-separator segfaults, for example:
{noformat}
build/bin/peer chaincode instantiate -n example02 -v 1 -c '{""Args"":[""init"",""a"",""10"",""b"", ""20""]}' -p github.com/hyperledger/fabric/examples/chaincode/go/chaincode_example02 -o orderer:7050 -P ""OR('A.member', 'Bmember')""
{noformat}",,ChristopherFerris,elli-androulaki,mne,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4212,FAB-4379,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx2fz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,elli-androulaki,mne,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jun/17 3:48 AM;ChristopherFerris;[~ales] [~elli-androulaki] what is the status of this one? Would like to get it done for the beta release. Thanks;;;","02/Jun/17 8:39 AM;elli-androulaki;Related CR:

https://gerrit.hyperledger.org/r/#/c/10027/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
behave tests are failing inconsistently,FAB-3216,15805,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,jeffgarratt,rameshthoomu,rameshthoomu,18/Apr/17 10:08 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,28/Apr/17 11:04 PM,,,,,v1.0.0,,,fabric-quality,,,,0,build-system,quality,,,,,,"observed behave tests are failing inconsistently on fabric commits. Below is the log reference and error message.

*Build log:* https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/510/console

{code:java}
11:38:05     And user ""dev0Org0"" using cert alias ""dev0Org0App1"" sends proposal ""instantiateProposal1"" to endorsers with timeout of ""90"" seconds with proposal responses ""instantiateProposalResponses""                                                       # steps/endorser_impl.py:109
11:38:05       | Endorser |
11:38:05       | peer0    |
11:38:05       | peer2    |
11:38:29       Traceback (most recent call last):
11:38:29         File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/venv/local/lib/python2.7/site-packages/behave/model.py"", line 1456, in run
11:38:29           match.run(runner.context)
11:38:29         File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/venv/local/lib/python2.7/site-packages/behave/model.py"", line 1903, in run
11:38:29           self.func(context, *args, **kwargs)
11:38:29         File ""steps/endorser_impl.py"", line 124, in step_impl
11:38:29           resultsDict =  dict(zip(endorsers, [respFuture.result() for respFuture in proposalResponseFutures]))
11:38:29         File ""/w/workspace/fabric-verify-behave-x86_64/gopath/src/github.com/hyperledger/fabric/venv/local/lib/python2.7/site-packages/grpc/_channel.py"", line 294, in result
11:38:29           raise self
11:38:29       _Rendezvous: <_Rendezvous of RPC that terminated with (StatusCode.INVALID_ARGUMENT, Received message larger than max (19600686 vs. 4194304))>
{code}
",,harsha544,kchristidis,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq8v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harsha544,kchristidis,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Apr/17 10:11 PM;rameshthoomu;Observed latest failure on below fabric commit

{code:java}
fabric commit# f477ccc
{code}
;;;","19/Apr/17 10:40 PM;kchristidis;Updated the component as this does not seem to be orderer-related.;;;","28/Apr/17 11:04 PM;rameshthoomu;behave tests are working as expected on fabric commit # *fc268dabd0c5d93ba5e7a5cbdc1e02c366b5827a*.. Please find below the build log.

{code:java}
00:10:31.522 context.failed = False
00:10:31.522 1 feature passed, 0 failed, 2 skipped
00:10:31.522 1 scenario passed, 0 failed, 24 skipped
00:10:31.522 71 steps passed, 0 failed, 211 skipped, 0 undefined
00:10:31.522 Took 0m50.277s
{code}

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-behave-x86_64/634/consoleFull..  Closing this issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sync Java/Golang ChaincodeStub interface,FAB-3218,15807,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,18/Apr/17 10:52 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,12/May/17 11:37 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"(!): *Required for V1.0 – * Either missing API or existing API needs cleanup before finalizing in V1.0 
(?): *Optional for V1.0 –* Can always be added after V1.0 

||V1.0||Go ChaincodeStub            || Java ChaincodeStub (proposed)     ||Status|| Notes                                       |
|(!)|GetArgs()                     | getArgs()                       | Done                                                |                                        |
|(!)|GetStringArgs()               | getStringArgs()                 | [Merged|https://gerrit.hyperledger.org/r/#/c/8167/] |(rename as getStringArgs() in FAB-3221)                               |
|(!)|GetFunctionAndParameters()    | getFunction()                   | [Merged|https://gerrit.hyperledger.org/r/#/c/8167/] | FAB-3221 add getFunction()              |
|(!)|                              | getParameters()                 | [Merged|https://gerrit.hyperledger.org/r/#/c/8167/] | FAB-3221 add getParameters()            |
|(!)|GetTxID()                     | getUuid()                       | [Merged|https://gerrit.hyperledger.org/r/#/c/8157/] | FAB-3222 rename to getTxId()            |
|(!)|InvokeChaincode               | invokeChaincode()               | [Merged|https://gerrit.hyperledger.org/r/#/c/8057/] | FAB-3170                            |
|(!)|GetState                      | getState()                      | [Merged|https://gerrit.hyperledger.org/r/#/c/8159/] | FAB-3223 cleanup getState/getStateRaw   |
|(!)|                              | getStateAsString()              |                                                     |                                      |
|(!)|PutState                      | putState(byte[])                | [Merged|https://gerrit.hyperledger.org/r/#/c/8159/] | FAB-3223 cleanup putState/putStateRaw   |
|(!)|                              | getState(String)                |                                                     |                                      |
|(!)|DelState                      | delState()                      | Done                                                |                                      |
|(!)|GetStateByRange               | getStateByRange()               | [Merged|https://gerrit.hyperledger.org/r/#/c/8303/] | FAB-3273                               |
|(!)|GetStateByPartialCompositeKey | getStateByPartialCompositeKey() | [Merged|https://gerrit.hyperledger.org/r/#/c/8303/] | FAB-3273                                |
|(!)|CreateCompositeKey            | createCompositeKey()            | [Merged|https://gerrit.hyperledger.org/r/#/c/8251/] | FAB-3220 sync w/ golang impl            |
|(!)|SplitCompositeKey             | splitCompositeKey()             | [Merged|https://gerrit.hyperledger.org/r/#/c/8251/] | FAB-3220 add splitCompositeKey()        |
|(!)|GetQueryResult                | getQueryResult()                | [Merged|https://gerrit.hyperledger.org/r/#/c/8355/] | FAB-3305                                |
|(!)|GetHistoryForKey              | getHistoryForKey()              | [In review|https://gerrit.hyperledger.org/r/#/c/8407/] | FAB-3311                                |
|(?)|GetCreator()                  | getCreator()                    | TODO   | FAB-3648 add getCreator()                  |
|(?)|GetTransient()                | getTransient()                  | TODO   | FAB-3649 add getTransient()                |
|(?)|GetBinding()                  | getBinding()                    | TODO   | FAB-3650 add getBinding()                  |
|(?)|GetSignedProposal()           | getSignedProposal()             | TODO   | FAB-3651 add getSignedProposal()           |
|(?)|GetArgsSlice()                | getArgsSlice()                  | TODO   | FAB-3652 add getArgsSlice()                |
|(?)|GetTxTimestamp()              | getTxTimestamp()                | TODO   | FAB-3653 add getTxTimestamp()              |
|(!)|SetEvent                      | setEvent()                      | [Merged|https://gerrit.hyperledger.org/r/#/c/8033/] | FAB-2852                                |",,Clayton Sims,JonathanLevi,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxr4f:",,,,Unset,,Sprint 16  - Endorser,,,,,,,,,,,,,Unset,,,,,,,,,,,Clayton Sims,JonathanLevi,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/17 5:05 AM;Clayton Sims;What change set is this tied to.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
sync composite key chaincodestub APIs,FAB-3220,15809,15807,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,19/Apr/17 12:01 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,04/May/17 12:03 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The current java impl does not match the golang version:
# Go version  uses {{U+0000}} as delimiter, Java version uses the length of the next attribute.
# Go version is of the form {{object\u000(attribute\u000)*}} (note the final {{\u000}}), while the Java version is missing the final ""delimiter"".
# {{splitCompositeKey()}} method is missing in Java.",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3273,,,,,,,,,,,,,,,,FABCJ-192,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq9b:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
implement getFunctionAndParameters() equivalent,FAB-3221,15810,15807,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,19/Apr/17 12:12 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,04/May/17 11:58 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Golang ChaincodeStub offers the {{GetFunctionAndParameters()}} convenience API for chaincode that dispatches code to different _functions_ based on the first argument to {{Init()}} or {{Invoke()}}.
Add a similar API to the Java ChaincodeStub interface:
# Add {{getFunction()}}
# Add {{getParameters()}}
Also:
# Use this CR to rename {{getArgsAsStrings()}} to {{getStringArgs()}}
",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq9j:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
extract ChaincodeStub interface,FAB-3222,15811,15807,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,19/Apr/17 12:24 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 10:53 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,Extract interface for Java ChaincodeStub.,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq9r:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cleanup get/put state APIs in Java ChaincodeStub,FAB-3223,15812,15807,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,19/Apr/17 12:36 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,04/May/17 11:57 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"Cleanup naming of get/put state methods:

{code:java}
public interface ChaincodeStub {
	byte[] getState(String key); // replacing getRawState()
	String getStringState(String key); // replacing getState()
	void putState(String key, byte[] value); // replacing putRawState()
	void putStringState(String key, String value); // replacing putState()
}
{code}
",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-263,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxq9z:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
dead link in Setting up the development environment/Building the fabric,FAB-3225,15814,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tkuhrt,jjjjibm,jjjjibm,19/Apr/17 3:00 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Apr/17 10:32 PM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-docs,,,,0,,,,,,,,"1.Using a browser, navigate here: http://hyperledger-fabric.readthedocs.io/en/latest/getting_started.html

2.Scroll down to  this section: 
{color:#59afe1}Building the fabric

Once you have all the dependencies installed, and have cloned the repository, you can proceed to* build and test *the fabric.{color}

3.In that section, click the highlighted phrase {color:#cccccc}build and test{color}

4.See this output:
 \          SORRY            /
         \                         /
          \    This page does     /
           ]   not exist yet.    [    ,'|
           ]                     [   /  |
           ]___               ___[ ,'   |
           ]  ]\             /[  [ |:   |
           ]  ] \           / [  [ |:   |
           ]  ]  ]         [  [  [ |:   |
           ]  ]  ]__     __[  [  [ |:   |
           ]  ]  ] ]\ _ /[ [  [  [ |:   |
           ]  ]  ] ] (#) [ [  [  [ :===='
           ]  ]  ]_].nHn.[_[  [  [
           ]  ]  ]  HHHHH. [  [  [
           ]  ] /   `HH(""N  \ [  [
           ]__]/     HHH  ""  \[__[
           ]         NNN         [
           ]         N/""         [
           ]         N H         [
          /          N            \
         /           q,            \
        /                           \

How to recreate:
As described.",IE 11 browser on Win7  (but probably no important for this defect),ChristopherFerris,jjjjibm,tkuhrt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-46,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqaf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,jjjjibm,tkuhrt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/17 11:23 PM;ChristopherFerris;This is usually the result of a link to a markdown file not having been translated to point to the corresponding rst file (html).;;;","24/Apr/17 9:15 AM;tkuhrt;Janet, can you verify that this is still a problem.  I just checked the getting started file, and I could not find the link that you mention.;;;","25/Apr/17 2:03 AM;jjjjibm;Found the link:
Building the fabric

Once you have all the dependencies installed, and have cloned the repository, you can proceed to build and test the fabric.


It looks like the link has been fixed.;;;","25/Apr/17 10:32 PM;tkuhrt;Marked as Done since this has been fixed outside of this bug.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer puts up lots of logs related to gossip module,FAB-3226,15815,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,rhegde,rhegde,19/Apr/17 3:00 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 3:31 AM,,,,,,,,,,,,0,,,,,,,,Gossip logs keeps on adding and its default log level need to be changed. This creates spam.,,bmos299,rhegde,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqan:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bmos299,rhegde,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/17 5:18 AM;wlahti;This work is in progress via https://jira.hyperledger.org/browse/FAB-2351. There will be a `logging.gossip` parameter (and parameters for other modules) that will override the default level for all gossip-related logging modules. Hoping to have it enabled by the end of this week. ;;;","21/Apr/17 5:04 AM;bmos299;This is very important as the gossip logs are making debugging very difficult.  Changing to HIGH. ;;;","21/Apr/17 5:15 AM;wlahti;https://gerrit.hyperledger.org/r/#/c/8311/ (work in progress until I'm sure the CI passes) will put the code in place to change the default level for all gossip-related logging modules at peer startup (and dynamically). Once that CR is merged, a CR related to https://jira.hyperledger.org/browse/FAB-3144 will quickly follow to handle the update for gossip logs at startup. ;;;","25/Apr/17 5:56 AM;yacovm;Will has pushed this change set https://gerrit.hyperledger.org/r/#/c/8439 and I have tweaked it a bit (but 99% of the work there is his... thanks [~wlahti] !) and I have tested it locally (by running e2e and grepping for gossip logs *docker logs peer0 2>&1 | grep -i gossip*) and now at peer startup, gossip is running in WARN and not in DEBUG.
;;;","27/Apr/17 9:11 PM;yacovm;I assigned this to Will since he solved the problem.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer logs doesnt have any log indication for Trasaction Commited or Block Notification Sent,FAB-3227,15816,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,rhegde,rhegde,19/Apr/17 3:18 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 3:31 AM,,,,,,,,,,,,0,,,,,,,,"During debugging of an block event notification, no notification was received by the java fabric sdk client. Peer logs doesn't help to indicate there is no block transaction notification sent. Peer logging will help to indicate that there could be a issue in Java Fabric SDK. 

Raised issue after discussion. CC: [~jimthematrix]  ",,rhegde,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqav:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rhegde,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/17 2:39 AM;wlahti;Didn't notice this JIRA item so I created a new one. Additional logging has been merged via https://jira.hyperledger.org/browse/FAB-3233.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
dead links in Building the fabric page,FAB-3229,15818,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tkuhrt,jjjjibm,jjjjibm,19/Apr/17 3:24 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 9:10 AM,,,,,,,,fabric-docs,,,,0,,,,,,,,"1.Using a browser, navigate here: http://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build.html
2. In this section,
_Building the fabric

The following instructions assume that you have already set up your{color:#14892c} development environment._{color}

click the highlighted phrase {color:#14892c}development environment{color}. 

and see this output\          SORRY            /
h1.          \                         /
h1.           \    This page does     /
h1.            ]   not exist yet.    [    ,'|
h1.            ]                     [   /  |
h1.            ]___               ___[ ,'   |
h1.            ]  ]\             /[  [ |:   |
h1.            ]  ] \           / [  [ |:   |
h1.            ]  ]  ]         [  [  [ |:   |
h1.            ]  ]  ]__     __[  [  [ |:   |
h1.            ]  ]  ] ]\ _ /[ [  [  [ |:   |
h1.            ]  ]  ] ] (#) [ [  [  [ :===='
h1.            ]  ]  ]_].nHn.[_[  [  [
h1.            ]  ]  ]  HHHHH. [  [  [
h1.            ]  ] /   `HH(""N  \ [  [
h1.            ]__]/     HHH  ""  \[__[
h1.            ]         NNN         [
h1.            ]         N/""         [
h1.            ]         N H         [
h1.           /          N            \
h1.          /           q,            \
h1.         /                           \
h1. 3.In this section:
_Running Node.js Unit Tests

You must also run the Node.js unit tests to insure that the Node.js client SDK is not broken by your changes. To run the Node.js unit tests, follow the instructions here._

click the highlighted word{color:#14892c} here{color}
and see this output: 
Not Found

4.In this section:
_Running Behave BDD Tests
Note: currently, the behave tests must be run from within in the Vagrant environment. See the devenv setup instructions if you have not already set up your Vagrant environment._

click the highlighted words {color:#14892c}Vagrant environment{color}
and see this output: 
\          SORRY            /
         \                         /
          \    This page does     /
           ]   not exist yet.    [    ,'|
           ]                     [   /  |
           ]___               ___[ ,'   |
           ]  ]\             /[  [ |:   |
           ]  ] \           / [  [ |:   |
           ]  ]  ]         [  [  [ |:   |
           ]  ]  ]__     __[  [  [ |:   |
           ]  ]  ] ]\ _ /[ [  [  [ |:   |
           ]  ]  ] ] (#) [ [  [  [ :===='
           ]  ]  ]_].nHn.[_[  [  [
           ]  ]  ]  HHHHH. [  [  [
           ]  ] /   `HH(""N  \ [  [
           ]__]/     HHH  ""  \[__[
           ]         NNN         [
           ]         N/""         [
           ]         N H         [
          /          N            \
         /           q,            \
        /                           \
5. In this sectionBuilding on Power Platform

_Development and build on Power (ppc64le) systems is done outside of vagrant as outlined here. _
click the highlighted word {color:#cccccc}here{color} 

and see no output whatsoever (a truly dead link).

6.In this section:
_Logging
_Logging utilizes the go-logging library.

The available log levels in order of increasing verbosity are: CRITICAL | ERROR | WARNING | NOTICE | INFO | DEBUG

See specific logging control instructions when running the peer process.
_

click the highlighted{color:#14892c} phrase specific logging control {color}
and see this output:
{color:#59afe1}404 This is not the web page you are looking for
{color}",,jjjjibm,tkuhrt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-46,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqbb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jjjjibm,tkuhrt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 4:36 AM;tkuhrt;https://gerrit.hyperledger.org/r/#/c/8325/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support to set log level of user-chain-code at runtime,FAB-3230,15819,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,rhegde,rhegde,19/Apr/17 4:48 AM,23/Jan/20 4:05 AM,28/Oct/23 2:59 AM,23/Jan/20 4:05 AM,,,,,Future,,,,,,,0,stale-item,,,,,,,"There is currently no option to set the user-chain-code log-level dynamically. 

In Production environment, operation will prefer to run system at log level = Info (or less) and when-ever there is issue, they would bump up the log level to DEBUG.


CC: [~wlahti]
",,Clayton Sims,rhegde,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqbj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,rhegde,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/17 3:45 AM;Clayton Sims;I spoke to Jim and Will.   This is duplicate of 3232 so will close.   Will is aware and will be working 3232;;;","27/Apr/17 4:50 AM;wlahti;Just looked a little closer and realized this item is the request to update the log level for chaincode containers dynamically (as in after the container has started up). Moving this to post v1.0 as this will be a new feature. ;;;","03/Aug/18 11:58 PM;Clayton Sims;This is not in plan for 1.3;;;","23/Jan/20 4:05 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot turn on DEBUG log-level for user-chain-code,FAB-3232,15821,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,wlahti,rhegde,rhegde,19/Apr/17 5:32 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,08/May/17 3:32 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Currently the support to enable DEBUG log-level using ` CORE_CHAINCODE_LOGLEVEL=DEBUG ` doesn't work (discussed with [~wlahti]).

+Following is run on the Fabric-Alpha-Release-1.0.0+

{quote}
var logger = shim.NewLogger(""myChaincode"")

func (t *SimpleChaincode) Init(stub shim.ChaincodeStubInterface) pb.Response {
        ...
	logger.Debugf(""DEBUG LEVEL"")
	logger.Infof(""INFO LEVEL"")
	logger.Warningf(""WARNING LEVEL"")
	logger.Criticalf(""CRITICAL LEVEL"")
{quote}

{quote}
2017-04-18 20:23:15.717 UTC [shim] beforeInit -> DEBU 00c [925bf221]Received INIT, initializing chaincode
2017-04-18 20:23:15.717 UTC [myChaincode] Infof -> INFO 00d INFO LEVEL
ex02 Init
2017-04-18 20:23:15.717 UTC [myChaincode] Warningf -> WARN 00e WARNING LEVEL
2017-04-18 20:23:15.717 UTC [myChaincode] Criticalf -> CRIT 00f CRITICAL LEVEL
2017-04-18 20:23:15.717 UTC [shim] handlePutState -> DEBU 010 [925bf221]Inside putstate
Aval = 100, Bval = 200
)
{quote}",,Clayton Sims,rhegde,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqbz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,rhegde,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Apr/17 5:41 AM;rhegde;Impact - This is becoming hard to debug for any root-cause analysis hence marked with highest priority.;;;","27/Apr/17 3:46 AM;Clayton Sims;Wil is aware and will be working this.   ;;;","02/May/17 4:51 AM;wlahti;CR submitted for review: https://gerrit.hyperledger.org/r/#/c/8807/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance logging when event is sent from peer,FAB-3233,15822,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,19/Apr/17 6:16 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,20/Apr/17 2:40 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"The peer does not log any information when sending block events from the peer. This is a problem when events that a client (an SDK, for example) is waiting on are not received. Without logging on the peer side, it is hard to tell if the problem occurred with the peer sending the event or if the event was not received/processed by the client correctly. 

Example of the updated logging messages, which show the channel, block number, and any transaction ids in the block event:
{code}
2017-04-14 23:46:55.090 UTC [eventhub_producer] SendProducerBlockEvent -> DEBU 698 Entry
2017-04-14 23:46:55.090 UTC [eventhub_producer] SendProducerBlockEvent -> DEBU 699 Channel [mychannel]: Block event for block number [1] contains transaction id: 8d74fd3a843ea49fe8f44d7d5c2e74101b43c98cda531962e42925f52fcba3a2
2017-04-14 23:46:55.090 UTC [eventhub_producer] SendProducerBlockEvent -> INFO 69a Channel [mychannel]: Sending event for block number [1]
2017-04-14 23:46:55.090 UTC [eventhub_producer] Send -> DEBU 69b Entry
2017-04-14 23:46:55.090 UTC [eventhub_producer] Send -> DEBU 69c Event processor timeout > 0
2017-04-14 23:46:55.090 UTC [eventhub_producer] Send -> DEBU 69d Event sent successfully
2017-04-14 23:46:55.090 UTC [eventhub_producer] Send -> DEBU 69e Exit
2017-04-14 23:46:55.090 UTC [eventhub_producer] SendProducerBlockEvent -> DEBU 69f Exit
{code}",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqc7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sync Java Chaincode response status meaning w/ Golang Chaincode,FAB-3235,15824,15807,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,19/Apr/17 7:13 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/May/17 11:36 PM,v1.0.0,v1.0.0-alpha2,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"The {{Reponse.Status}} field is documented as (in {{proposal_response.proto}}):
bq. A status code that should follow the HTTP status codes.
But the chaincode implementation in golang only considers status codes over 500 as indicating that an error has occurred. This means that 4xx status codes cannot be used to indicate an error.

Make the Java chain code match the behavior of the golang chaincode.",,JonathanLevi,muralisr,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-256,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqcv:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,JonathanLevi,muralisr,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/17 5:07 AM;JonathanLevi;https://gerrit.hyperledger.org/r/#/c/8529/;;;","12/May/17 9:29 PM;muralisr;Discussion in https://jira.hyperledger.org/browse/FAB-3040 whether to include this or move it to post alpha2.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move CouchDB config to couchdb,FAB-3238,15827,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,19/Apr/17 9:33 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 12:04 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,CouchDB configuration should be moved from the ledgerconfig package to couchdb since the config options are specific to CouchDB.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqd3:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
MSP setup with rootCA CRLs including one of the MSP intermediate CAs should return an error,FAB-3240,15832,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,angelo.decaro,elli-androulaki,elli-androulaki,19/Apr/17 6:43 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/May/17 2:04 AM,,,,,v1.0.0-alpha2,,,fabric-crypto,,,,0,,,,,,,,"Currently setting up an MSP with a root CA, a bunch of intermediate CAs, and a CRL through which rootCA is blacklisting one of the listed intermediate CAs is not outputing an error of malformed MSP configuration. We should address this.",,binhn,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5h3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/May/17 2:00 AM;binhn;https://gerrit.hyperledger.org/r/#/c/9221/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Do not send redundant StateInfo messages in gossip,FAB-3241,15833,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,19/Apr/17 6:56 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Apr/17 4:21 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,"In gossip, whenever the channel related metadata is updated, a ""dirty flag"" is turned on, and periodically a goroutine disseminates to peers if the dirty flag is turned on.
There is a bug that this dirty flag is never turned off. 
This causes a redundant dissemination of StateInfo. 

The stateInfo is periodically pulled from peers via a pull mechanism anyway- so there is no point in having periodical dissemination and thus the dirty flag should be turned off after dissemination.

https://github.com/hyperledger/fabric/blob/master/gossip/gossip/channel/channel.go#L230-L238

{code}

func (gc *gossipChannel) publishStateInfo() {
	if atomic.LoadInt32(&gc.shouldGossipStateInfo) == int32(0) {
		return
	}
	gc.RLock()
	stateInfoMsg := gc.stateInfoMsg
	gc.RUnlock()
	gc.Gossip(stateInfoMsg)
}
{code}",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqen:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove CouchDB skip TODO,FAB-3242,15834,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,19/Apr/17 8:31 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Apr/17 11:47 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,CouchDB skip will remain for future use.   Remove the TODO.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqev:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CC-GetStates-PutStates,FAB-3243,15835,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,liuwenliang0632,liuwenliang0632,liuwenliang0632,19/Apr/17 8:51 PM,23/Jan/20 4:06 AM,28/Oct/23 2:59 AM,23/Jan/20 4:06 AM,,,,,Future,,,fabric-peer,,,,0,stale-item,,,,,,,"Description
        CC can getStates from peer and putState to peer by batch, it can reduce network traffic.
Motivation and Context
        1、for example,getState by list a,b,c,d, e ,i need to call getState some times
        2、for example,setState by list a->10,b->20,c->30,d->40, e->50 ,i also need to call putState some times
        Now only need to call once by batch",,baohua,Hangyu_FJH,liuwenliang0632,mastersingh24,miyamae,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1244,FAB-6336,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqfb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,Hangyu_FJH,liuwenliang0632,mastersingh24,miyamae,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/17 11:33 PM;baohua;This is a useful feature!

Could u help clarify how to handle the partial error, e.g., one k-v error when setting/getting 5 k-v pairs?;;;","26/Apr/17 12:55 AM;mastersingh24;Changed type to ""New Feature""

[~liuwenliang0632] - Thanks for creating this feature requirement.  It definitely seems like it would be very useful for people.  I changed this to ""New Feature"" as this is adding additonal APIs beyond the initial scope of the currently defined API set.

I set the target to ""Future"" as the core is currently locked down for bugs fixes and stabilization at this point;;;","18/Sep/17 4:29 PM;liuwenliang0632;https://gerrit.hyperledger.org/r/#/c/13493/
plz help me review;;;","29/Sep/17 2:14 AM;miyamae;Hi Liu, Baohua, Gari and all,

I've created a JIRA for similar performance improvement (FAB-6336). I'm so glad if we can cooperate for it.;;;","29/Sep/17 6:24 PM;liuwenliang0632;i had saw the document of P2PFISY2017. 
make sure we want that feature ;;;","02/Oct/17 3:06 PM;miyamae;I'm really sorry that I might have changed this issue's status by mistake.
 I did not mean that at all. Could you please recover it, Liu-san?;;;","23/Jan/20 4:06 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-enable CouchDB bad connect unit test,FAB-3244,15836,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,19/Apr/17 9:23 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Apr/17 10:46 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"The CouchDB test bad connection unit test was disabled when retry logic was added.

Hard coding the maxRetriesOnStartup to 3 will allow the test to complete without a excessive delay in overall test execution.",,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqfj:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip random functions have more entropy,FAB-3245,15837,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,19/Apr/17 10:06 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 8:34 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,"In gossip the random uses math instead of crypto, and it is initialized with a static seed of 42 instead of something more random. 

I think we should make it be more random.",,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxqfr:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 5:35 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8219/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove TODO from removeDataWrapper,FAB-3246,15838,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,19/Apr/17 11:10 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 11:47 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,The TODO in removeDataWrapper was from early development and should be removed.  The empty byte array is the correct return value.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqf3:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Optimize 2nd commit in CouchDB recordSavePoint,FAB-3247,15839,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,19/Apr/17 11:35 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,28/Apr/17 9:54 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,The second commit in recordSavepoint can be removed.  The saveDoc in recordSavepoint will be flushed with the next batch.,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqg7:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
flag to accept the configtx.yaml file path for configtxgen tool,FAB-3248,15840,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,mastersingh24,Ratnakar,Ratnakar,19/Apr/17 11:54 PM,08/Dec/18 4:51 AM,28/Oct/23 2:59 AM,08/Dec/18 4:51 AM,,,,,Future,,,fabric-orderer,,,,2,v1.0,,,,,,,"configtxgen tool looks for configtx.yaml file in the following paths
{panel}
ORDERER_CFG_PATH
PEER_CFG_PATH
$GOPATH/src/github.com/hyperledger/fabric/common/configtx/tool
{panel}


However, If user wants to provide a custom path that is not possible without exporting/Overiding the environment variables *ORDERER_CFG_PATH* , *PEER_CFG_PATH*

Providing a flag to accept filePath to the tool to access configtx.yaml will give more control to the end user while generating the orderer genesis block and channel configuration transaction.",,mastersingh24,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-8686,,,FAB-8686,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqgf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,Ratnakar,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jun/17 1:00 AM;mastersingh24;Will look at this as we adjust the usability of the tool(s);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger txmgr commontests are not running,FAB-3249,15841,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,denyeart,denyeart,20/Apr/17 12:08 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 9:36 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"These tests are no longer running:
/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/commontests$ go test ./... -v

Need to Run() the tests from TestMain().",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4mv:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 5:51 AM;ChristopherFerris;[~denyeart] this seems fixed, but I cannot find the CR that did that.;;;","23/Apr/17 9:37 PM;ChristopherFerris;[~denyeart] NVM found it - please add FAB-nnnn in commit title thanks;;;","23/Apr/17 9:37 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8321/;;;","23/Apr/17 11:43 PM;denyeart;Actually it was fixed by FAB-2897:
https://gerrit.hyperledger.org/r/#/c/7605/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"examples/e2e_cli fails when channel name contains ""_""",FAB-3250,15842,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,mrkiouak,mrkiouak,20/Apr/17 12:15 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/May/17 12:48 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,"Ubuntu 16.04

docker-compose down && docker-compose up -d && ./network_setup.sh up underscore-test && docker-compose down && docker-compose up -d && ./network_setup.sh up underscore_test

./network_setup.sh up underscore-test succeeds, ./network_setup.sh up underscore_test fails

https://pastebin.com/nNxZyAXY",,chawlanikhil24,hanwei,mrkiouak,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jul/17 9:35 PM;chawlanikhil24;orderer-logs.png;https://jira.hyperledger.org/secure/attachment/11682/orderer-logs.png",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqgn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,chawlanikhil24,hanwei,mrkiouak,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 5:07 PM;hanwei;you can find the reason at func validateChainID in fabric/common/configtx/manager.go.
To kafka, the legal is ""[a-zA-Z0-9\\._\\-]"", and find it for detail:
https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/common/Topic.scala#L29;;;","21/Apr/17 5:10 PM;hanwei;You can find the error log with ""docker logs orderer"",which looks like:

2017-04-21 07:51:58.100 UTC [orderer/multichain] Apply -> DEBU 178 Rejecting channel creation because: Failed to create config manager and handlers: Bad channel id: Chain ID 'test_test' contains illegal characters
2017-04-21 07:51:58.100 UTC [orderer/common/broadcast] Handle -> WARN 179 Rejecting broadcast message because of filter error: Rejected by rule: *multichain.systemChainFilter
2017-04-21 07:51:58.105 UTC [orderer/common/deliver] Handle -> WARN 17a Error reading from stream: stream error: code = 1 desc = ""context canceled""
;;;","26/May/17 12:48 AM;wlahti;Yes, as [~hanwei] pointed out, a valid channel ID cannot contain an underscore. Here are the code comments for the validateChainID function: 
{code:java}
// validateChainID makes sure that proposed chain IDs (i.e. channel names)
// comply with the following restrictions:
// 1. Contain only ASCII alphanumerics, dots '.', dashes '-'
// 2. Are shorter than 250 characters.
// 3. Are not the strings ""."" or "".."".
//
// Our hand here is forced by:
// https://github.com/apache/kafka/blob/trunk/core/src/main/scala/kafka/common/Topic.scala#L29{code}
 

 ;;;","15/Jul/17 9:33 PM;chawlanikhil24;Hi, I am setting up fabric-1.0 over kubernetes. I've successfully created channel on K8s but, peers are not able to join these channels. I went though the source code of fabric and found out that error is due to grpc. I am attaching the logs of orderer-service in K8s and the highlighted warning is the possible cause of that GRPC error. 

!image-2017-07-15-18-04-25-581.png!  ;;;","15/Jul/17 9:35 PM;chawlanikhil24;!orderer-logs.png!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unused variables in github.com/hyperledger/fabric/core/deliverservice,FAB-3251,15843,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,20/Apr/17 12:45 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 6:12 AM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,staticanalysis,,,,,,,"unused github.com/hyperledger/fabric/core/deliverservice
core/deliverservice/client_test.go:85:6: type atomicBroadcastBroadcastClient is unused (U1000)",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqgv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Apr/17 12:55 AM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8237/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Inaccurate error message when event registration message is not properly signed,FAB-3252,15844,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,20/Apr/17 12:48 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,11/May/17 2:14 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"If the event message is not properly signed, the peer returns the following error:

event message must be properly signed by an identity from a participating organization in any of the channels existing in the peer

This is not accurate because the latest logic is only check against the local MSP, no checks against channel is done for v1.0.",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqh3:",,,,,,Sprint 16 - SDK node,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
unused variables in core/ledger packages,FAB-3254,15846,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,20/Apr/17 12:58 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/May/17 6:16 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-ledger,,,,0,staticanalysis,,,,,,,"cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/history/historydb/historyleveldb
core/ledger/kvledger/history/historydb/historyleveldb/historyleveldb.go:35:5: var compositeKeySep is unused (U1000)
cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/rwsetutil
core/ledger/kvledger/txmgmt/rwsetutil/query_results_helper.go:235:22: func (*merkleTree).getMaxLevel is unused (U1000)
core/ledger/kvledger/txmgmt/rwsetutil/query_results_helper.go:239:22: func (*merkleTree).getMaxLevelHashes is unused (U1000)
cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb
cbf$ unused github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb
core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb_test_export.go:30:5: var badConnectURL is unused (U1000)",,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,3600,,0%,3600,3600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqhj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
disable delivery service test goroutine check in CI ,FAB-3257,15849,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,20/Apr/17 1:53 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Apr/17 2:06 AM,,,,,,,,fabric-build,,,,0,,,,,,,,"The goroutine check (checks that goroutines are dead after each test) sometimes starts with the wrong number of goroutines and has a false-negative (i.e, started with 4 goroutines but has only 3 of them in the end of the test)
so it fails the entire unit test run.

I want to temporarily disable the test and investigate.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqhz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Env Setup for examples Chaincode e2e tests in daily regresssion test suite,FAB-3258,15850,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,Nishi,Nishi,Nishi,20/Apr/17 2:41 AM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,09/May/17 4:55 AM,,,,,v1.0.0,,,fabric-quality,,,,0,quality,,,,,,,"Goal: 

1. To build a environment that can generate certs, orderer block and channel transaction for an organization and its peers. A docker-compose.yaml that can launch a network of 4 peers.

2. Add tests for all example chaincodes under fabric/examples folder as an e2e CLI test using the network launched in step1.

3. Add new chaincodes to test other fabric chaincode features like upgrade

4. Have an report generated that CI can use for reporting daily regression runs.",,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx2yn:",,,,Unset,,Sprint 18 - Quality,,,,,,,,,,,,,Unset,,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Apr/17 10:18 PM;Nishi;Submitted patchset https://gerrit.hyperledger.org/r/#/c/8669/ (pending merge);;;","09/May/17 1:47 AM;Nishi;Submitted new patchset : [https://gerrit.hyperledger.org/r/#/c/9043/] after comments on earlier patchet.

In this new patchset we make use of e2e_cli scripts and setup.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make the output of cryptogen more consumable by deployment and orchestration tools,FAB-3259,15851,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,greg.haskins,mastersingh24,mastersingh24,20/Apr/17 3:32 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,02/May/17 3:17 AM,,,,,v1.0.0,,,fabric-tools,,,,0,,,,,,,,"cryptogen currently creates useful artifacts but the are hard to use with common configuration and orchestration tools.

As an example, fitting into a structure similar to the following would make life simpler:

build/nodes/
├── cli
│   ├── channel.tx
│   ├── configtx.yaml
│   ├── core.yaml
│   ├── msp
│   │   ├── admincerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── cacerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── keystore
│   │   │   └── d2ee5e16f9578778965ac4f61befbac4a714a84e8b33b6c774c5fab9f8640152_sk
│   │   └── signcerts
│   │       └── peerOrg1Admin-cert.pem
│   └── tls
│       ├── ca.crt
│       ├── server.crt
│       └── server.key
├── orderer
│   ├── configtx.yaml
│   ├── core.yaml
│   ├── genesis.block
│   ├── msp
│   │   ├── admincerts
│   │   │   └── ordererOrg1-cert.pem
│   │   ├── cacerts
│   │   │   └── ordererOrg1-cert.pem
│   │   ├── keystore
│   │   │   └── 21bec31fd0f2a2388e98845ad8bef09b096d0f679a4fa1a0dfea009e64fae416_sk
│   │   └── signcerts
│   │       └── ordererOrg1Orderer1-cert.pem
│   ├── orderer.yaml
│   └── tls
│       ├── ca.crt
│       ├── server.crt
│       └── server.key
├── peer1
│   ├── configtx.yaml
│   ├── core.yaml
│   ├── msp
│   │   ├── admincerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── cacerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── keystore
│   │   │   └── fd8948274f5b7a36dafbb36d1ae4fcaff7a7c2a57da12cc2f90b23a5b4c6a305_sk
│   │   └── signcerts
│   │       └── peer1-cert.pem
│   └── tls
│       ├── ca.crt
│       ├── server.crt
│       └── server.key
├── peer2
│   ├── configtx.yaml
│   ├── core.yaml
│   ├── msp
│   │   ├── admincerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── cacerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── keystore
│   │   │   └── 859d526f3fe70c0dcc65d43811f9cfcb26934e67de444ffc2ad178813a773703_sk
│   │   └── signcerts
│   │       └── peer2-cert.pem
│   └── tls
│       ├── ca.crt
│       ├── server.crt
│       └── server.key
├── peer3
│   ├── configtx.yaml
│   ├── core.yaml
│   ├── msp
│   │   ├── admincerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── cacerts
│   │   │   └── peerOrg1-cert.pem
│   │   ├── keystore
│   │   │   └── 58f8e5d5efe8da887007d121910e66608de017696e3cee19c5048c0910a9b685_sk
│   │   └── signcerts
│   │       └── peer3-cert.pem
│   └── tls
│       ├── ca.crt
│       ├── server.crt
│       └── server.key
└── peer4
    ├── configtx.yaml
    ├── core.yaml
    ├── msp
    │   ├── admincerts
    │   │   └── peerOrg1-cert.pem
    │   ├── cacerts
    │   │   └── peerOrg1-cert.pem
    │   ├── keystore
    │   │   └── 2b183ef178008b81fa68c72cdd7e5b9a5fb250f9ed6f1ce1307bcae09b6d1f33_sk
    │   └── signcerts
    │       └── peer4-cert.pem
    └── tls
        ├── ca.crt
        ├── server.crt
        └── server.key",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,3600,900,2700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3095,,,,,,,,,"1|hzxqi7:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - add support for channel update,FAB-3262,15854,15490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,20/Apr/17 4:36 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,06/Oct/17 5:29 AM,,,,,Abandoned,,,fabric-sdk-node,,,,0,node-SDK,,,,,,,"Add update methods to the 'Client' class to allow users to build a Config Update protobuf
object. The versions values on all config items must increment  from their current value
as seen in the included readset (which must be queried during the build of the Config Update
object from the Orderer) .",,harrisob@us.ibm.com,jimthematrix@gmail.com,shanlusun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqiv:",,,,,,Sprint 15 - SDK node,Sprint 16 - SDK node,,,,,,,,,,,,,,,,,,,,,,,harrisob@us.ibm.com,jimthematrix@gmail.com,shanlusun,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Oct/17 5:30 AM;jimthematrix@gmail.com;this one has been abandoned in favor of the configtxlator based workflow support;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove abstract getChaincodeID() from ChaincodeBase,FAB-3263,15855,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,20/Apr/17 5:23 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,04/May/17 11:57 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,Dead code. Need to make sure it does not make it into V1.0.0 api.,,ChristopherFerris,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-263,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4u7:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 9:27 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8259/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Config utility for Behave functional tests,FAB-3264,15856,19362,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,20/Apr/17 5:56 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/May/17 7:34 PM,,,,,,,,fabric-quality,,,,0,,,,,,,,This config utility will contain functions that will be used when configuring a fabric network for use in the behave functional test runs. ,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx31z:",,,,,,Sprint 19 - Quality,,,,,,,,,,,,3.0,,,,,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 3:49 AM;latitiah;Submitted PR: https://gerrit.hyperledger.org/r/#/c/8265/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove TODO from ledger_interface.go,FAB-3266,15858,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,chris.elder,chris.elder,20/Apr/17 7:25 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 10:37 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"The following TODO in ledger_interface.go is from early development, is no longer needed and can be removed:

// TODO detailed illustration of a couple of representations.",,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqfz:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,chris.elder,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make KV query result protos available from Java shim,FAB-3267,15859,15552,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,20/Apr/17 11:41 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,04/May/17 11:49 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2980,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqjb:",,,,,,Sprint 15 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The peer does not properly honour endorsement policies,FAB-3269,15861,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,ales,ales,ales,20/Apr/17 8:32 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/May/17 8:52 PM,,,,,v1.0.0,,,fabric-peer,,,,0,endorser,security,Security,v1.0,,,,"PROBLEM
=======

Currently, endorsement policies are checked EXCLUSIVELY for the chaincode whose name is referenced in the ChaincodeId field of the ChaincodeHeaderExtension. However this is not the check that a chaincode developer expects, nor is it secure. The peer should instead check the endorsement policy of each ledger namespace (i.e. chaincode) that is being written to in the read-write set of the transaction. This fact would honour the invariant that 

""any write to a chaincode namespace has been verified against the endorsement policy of that chaincode""

This it is a security vulnerability.

The attack can be perpetrated in a number of ways (I'll list only two below, more are likely to be possible):
1) from a cc with more permissive endorsement policies (cc-permissive) call a chaincode with stricter endorsement policies (cc-strict); the ensuing transaction can modify the state of cc-strict, but only the endorsement policies of cc-permissive are checked. The attacker has successfully bypassed the endorsement of cc-strict;
2) we have to expect that the default endorsement policy will be used in >0 cases (otherwise we should remove it); we also have to expect that in a channel, the default endorsement policy might exist alongside stricter endorsement policies (otherwise we should forbid it); for all those cases, with this vulnerability in place, any org can make arbitrary writes to the ledger as follows: produce a tx out of thin air with the desired rwset, endorse it, submit it as an invoke of their own cc; the attacker has successfully bypassed the endorsement policies of that channel; note that arbitrary writes include writes to system namespaces such as lscc's;

FIX
===

The validator code should perform the following checks

if tx invokes scc {
  do scc-specific validation as it is today
} else {
  foreach namespace in rwset.WRITES {
    if namespace is a system namespace {
      tx is invalid
    }

      invoke lscc to extract vscc and endorsement policy for the chaincode that corresponds to that namespace;

      invoke the returned vscc with the returned endorsement policy to validate the tx;

  }
}
",,ales,elli-androulaki,mastersingh24,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5g7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ales,elli-androulaki,mastersingh24,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Apr/17 8:36 PM;mastersingh24;[~ales] I think your writeup of the severity of the issue makes sense and so does your solution.;;;","20/Apr/17 8:37 PM;ales;adding [~muralisr] [~binhn] [~mastersingh24] [~yacovm] [~adc];;;","20/Apr/17 8:57 PM;elli-androulaki;Thumbs up, thanks!;;;","20/Apr/17 8:57 PM;yacovm;{quote}
Alessandro Sorniotti I think your writeup of the severity of the issue makes sense and so does your solution.
{quote}
+1 ;;;","20/Apr/17 11:50 PM;muralisr;+1;;;","25/Apr/17 11:28 PM;ales;All, please have a look at this WIP 

https://gerrit.hyperledger.org/r/#/c/8509/

and pls provide comments. Thx!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger queryHelper done() not handling/returning errors,FAB-3270,15862,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,denyeart,denyeart,20/Apr/17 9:07 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 1:51 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,," kvledger/txmgmt/txmgr/lockbasedtxmgr/helper.go

In the done() method:

			// TODO Change the method signature of done() to return error. However, this will have
			// repercurssions in the chaincode package, so deferring to a separate changeset.
			// For now, capture the first error that is encountered
			// during final processing and return the error when the caller retrieves the simulation results.

",,ChristopherFerris,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqjr:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 7:14 PM;manish-sethi;I revisited this TODO and the overall strategy of not returning error from done() appears fine to me.

Because, the semantics of done() function is limited to take an indication from the client that the client is done with the query helper and any resources can be released. 

However, this function better exit on the first error rather than proceeding further. Also, close all the iterators before exit on error.;;;","23/Apr/17 11:00 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8347/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
State based validator test needs to assert for tran invalidation,FAB-3271,15863,14111,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,denyeart,denyeart,20/Apr/17 9:09 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,21/Apr/17 5:19 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"kvledger/txmgmt/validator/statebasedval/state_based_validator_test.go.

	In checkValidation()

	//TODO Add the check for exact txnum that is marked invlid when bitarray is in place
",,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqjz:",,,,,,Sprint 10 - Ledger,Sprint 12 - Ledger,Sprint 13 - Ledger,Sprint 14  - Ledger,Sprint 15  - Ledger,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 5:18 PM;manish-sethi;I just checked that this has been fixed in the CR
https://gerrit.hyperledger.org/r/#/c/7605/3/core/ledger/kvledger/txmgmt/validator/statebasedval/state_based_validator_test.go@232. Thanks to [~Honglei]
Marking this as done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The peer should mark transactions with more than 1 action as invalid,FAB-3272,15864,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,ales,ales,ales,20/Apr/17 11:06 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/May/17 8:52 PM,,,,,v1.0.0,,,fabric-crypto,fabric-peer,,,0,security,Security,v1.0,,,,,"[~manish-sethi]: thanks for the discussion on this one, whose conclusions I report here - feel free to amend

PROBLEM
========
Ledger doesn't support yet transactions with >1 action. However, the peer fails to mark such transactions as invalid. As a result, the following attack may be carried out: create two conflicting actions (e.g. double spending), put them both in the same transaction. The expected behaviour is that the tx is marked as invalid; the real behaviour is that the tx will be marked as valid, and so the creator may present false proof of the second action having being part of the ledger, whereas its action is discarded.

FIX
===
The validator code marks every transaction with >1 action as invalid (the change is tiny).",,ales,bmos299,ChristopherFerris,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3537,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4hz:",,,,,,Sprint 16 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,ales,bmos299,ChristopherFerris,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 9:28 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8309/ needs a test added [~ellaki];;;","01/May/17 10:14 PM;bmos299;[~ales] I am going to create a task for [~2020Nishi] to automate this test and add to our daily run.  Can you please keep her in the loop? I will post the FAB for automating this work.
Thanks. ;;;","03/May/17 4:53 AM;Nishi;After discussing with Srinivasan Muralidharan, Barry Mosakowski ,  to generate multiple Actions on a single transaction from CLI or Node is not the right approach.
Since Alessandro Sorniotti has a test added in https://gerrit.hyperledger.org/r/#/c/8309/ this task is a Done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
java cc implement get state by range or composite key,FAB-3273,15865,15552,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,21/Apr/17 12:41 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/May/17 8:45 PM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3220,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqk7:",,,,,,Sprint 15 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
need CLI to send proposal to multiple endorsers to test policies,FAB-3274,15866,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,suryalnvs,suryalnvs,21/Apr/17 12:51 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,23/Apr/18 10:49 PM,,,,,Future,,,fabric-peer,,,,0,,,,,,,,"CLI supports sending proposal to only one endorser at a time. This does not allow us to test policies such as ""AND"". Murali suggested adding a new feature to the CLI invoke command to send proposal to multiple endorsers.  Here are the steps he suggested:

# Step 1: Adding a new parameter CORE_PEER_ENDORSERS to core.yaml to allow user to specify list of endorser peers 
# Step 2: Adding a new method like sendProposalToEndorsers to peer/chaincode/common.go and leverage existing code to send proposals to multiple endorsers using list of endorser addresses provided in CORE_PEER_ENDORSERS parameter if specified.  Also, if CORE_PEER_ENDORSERS is undefined/empty, we expect the command to default to using current behavior and CORE_PEER_ADDRESS.
# Step 3: Adding related changes to peer/chaincode/invoke.go

In Step 2:   We would expect CLI command to send proposal to all the listed peers, and provide all the proposal responses received (after some time period) together in the transaction that it broadcasts to the orderer. CLI would not need extra logic to evaluate the responses; the validation stage (after orderer delivers block) could handle that.",,baohua,denyeart,hanwei,nnao,rickr,suryalnvs,troyronda,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqkf:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,denyeart,hanwei,nnao,rickr,suryalnvs,troyronda,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 10:49 AM;baohua;This will also affect those sdk components.

I update that dependencies.;;;","22/Apr/17 8:46 PM;rickr;I think the java sdk does this thus removing that dependency ;;;","31/May/17 11:12 AM;jimthematrix;node SDK already supports this. it's purely a enhancement request against the peer CLI;;;","03/Feb/18 10:34 PM;troyronda;Go SDK already supports sending to multiple endorsers.;;;","05/Feb/18 6:07 PM;baohua;Besides, SDK may decide the partial numbers of endorsers to send the proposal to, in order to collect enough endorsement for a given policy.;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","23/Apr/18 10:48 PM;wlahti;This feature was recently merged into master for the peer CLI via FAB-9446. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Speed up SDK CI jobs by not building fabric images from scratch,FAB-3278,15870,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,jimthematrix,jimthematrix,21/Apr/17 3:51 AM,20/Jul/18 11:17 PM,28/Oct/23 2:59 AM,20/Jul/18 11:05 PM,,,,,DUPLICATE,,,fabric-build,,,,0,,,,,,,,"right now the SDK builds always build fabric images from scratch, which on average takes >40min or so, which the SDK tests themselves take only 3-5min. can this be streamlined such that the fabric merge builds publishes to a private docker registry and for the SDK builds to pull from there? it'll speed up the builds dramatically

fabric-baseimage and fabric-baseos rarely changes so they should be built into the worker VMs to speed up the docker pull even further",,ChristopherFerris,nnao,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxql3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,nnao,rameshthoomu,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 11:31 AM;rickr;Will this be updated on demand with each fabric commit ?   You won't know if you really broken or not with the latest otherwise.;;;","02/May/17 9:01 AM;rameshthoomu;We can implement this by pushing images to nexus repository or private docker hub account. If we implement this we can reduce 20-30 mins build time. I see below concerns 

1) We don't publish images for every merge commit in current CI process. Based on the e2e test result, CRON job push images to private docker hub account from sandbox environment. Instead of private repository we can publish nexus3.. 
2) If we don't publish images for every commit, how fabric-sdk-node know which commit image it has to pick? Do we need to update docker-compose file every time to fetch docker image using snapshot tag.

[~jimthematrix] will discuss this;;;","09/May/18 9:39 PM;ChristopherFerris;no longer relevant, sdk builds do not build fabric.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix gossip package related golint warning,FAB-3279,15871,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,21/Apr/17 3:52 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 9:34 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,"There are quite a few golint warning produced on the gossip package, which need to be fixed:

{code}
./comm/comm_test.go:195:20: error strings should not be capitalized or end with punctuation or a newline
./discovery/discovery.go:93:1: receiver name nm should be consistent with previous receiver name n for NetworkMember
./election/election.go:386:1: exported function SetStartupGracePeriod should have comment or be unexported
./election/election.go:390:1: exported function SetMembershipSampleInterval should have comment or be unexported
./election/election.go:394:1: exported function SetLeaderAliveThreshold should have comment or be unexported
./election/election.go:398:1: exported function SetLeaderElectionDuration should have comment or be unexported
./election/election.go:422:1: exported function GetMsgExpirationTimeout should have comment or be unexported
./gossip/channel/channel.go:654:6: func name will be used as channel.ChannelMAC by other packages, and that stutters; consider calling this MAC
./gossip/orgs_test.go:64:1: receiver name cs should be consistent with previous receiver name c for configurableCryptoService
./gossip/pull/pullstore.go:41:6: type name will be used as pull.PullMsgType by other packages, and that stutters; consider calling this MsgType
./gossip/pull/pullstore.go:59:6: type name will be used as pull.PullConfig by other packages, and that stutters; consider calling this Config
./integration/integration_test.go:80:20: error strings should not be capitalized or end with punctuation or a newline
./service/gossip_service.go:128:1: comment on exported function InitGossipServiceCustomDeliveryFactory should be of the form ""InitGossipServiceCustomDeliveryFactory ...""
./service/gossip_service_test.go:452:1: receiver name jcm should be consistent with previous receiver name jmc for joinChanMsg
./service/gossip_service_test.go:457:1: receiver name jcm should be consistent with previous receiver name jmc for joinChanMsg
./state/state.go:565:26: error strings should not be capitalized or end with punctuation or a newline
./util/misc.go:154:1: comment on exported function GetDurationOrDefault should be of the form ""GetDurationOrDefault ...""
./util/msgs.go:26:6: exported type MembershipStore should have comment or be unexported
./util/msgs.go:31:1: exported function NewMembershipStore should have comment or be unexported
./util/msgs.go:35:1: comment on exported method MembershipStore.MsgByID should be of the form ""MsgByID ...""
./util/msgs.go:46:1: exported method MembershipStore.Size should have comment or be unexported
{code}",,C0rWin,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxqlb:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,ChristopherFerris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 9:34 PM;ChristopherFerris;https://gerrit.hyperledger.org/r/#/c/8321/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Functional Tests Using Behave,FAB-3280,15872,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,21/Apr/17 4:28 AM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,28/Apr/17 5:48 AM,,,,,DUPLICATE,,,fabric-quality,,,,0,FunctionalBehave,,,,,,,"Functional and behavior driven tests should be written based on the understanding of a fabric requirement (story) and not on the implementation of the requirement. This story will add this capability. These tests can then be executed to verify that the implementation was completed as expected.

When writing the underlying code behind the feature files, certain details of implementation should be understood and used, but this should not stop the initial setup of the tests.

This story should allow for the basic setup of functional and behavior tests for the fabric project.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1017,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx327:",,,,Unset,,Sprint 16 - Quality,,,,,,,,,,,,,Unset,,,,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Import protobuf files from bddtests directory,FAB-3281,15873,19362,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,21/Apr/17 4:31 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 3:24 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,"Instead of regenerating the python files based on the protobuf files, import the generating files for use in the utilities for these tests.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqlj:",,,,,,Sprint 19 - Quality,,,,,,,,,,,,3.0,,,,,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Event listener sample needs update to sign registration message,FAB-3282,15874,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Hangyu_FJH,jimthematrix,jimthematrix,21/Apr/17 7:16 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,07/Jun/17 5:15 AM,,,,,v1.0.0,,,fabric-peer,,,,0,help-wanted,,,,,,,due to https://gerrit.hyperledger.org/r/#/c/7905/ the (un)registration request must be signed,,denyeart,Hangyu_FJH,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4a7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,Hangyu_FJH,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jun/17 3:33 AM;muralisr;[~jimthematrix] Would this be post 1.0 ?;;;","03/Jun/17 3:01 AM;jimthematrix;I don't have a problem deferring it to post 1.0. not sure if there are strong opinions out there. possibly from [~denyeart] who's handling the beta criteria?;;;","03/Jun/17 3:13 AM;denyeart;Jim explained to me that this is a grpc client sample, which is currently broken due to lack of signing.  We really don't have many other grpc client samples like this.  For the most part, we will point people to use sdk (which does work), or have them look at the sdk impl if they want to understand the detailed grpc interactions.  This sample is outdated and not very useful anymore, therefore I suggest we delete it before 1.0, rather than try to fix it.;;;","03/Jun/17 3:31 AM;muralisr;[~denyeart] Its not a low level gRPC client. Its really a sample that shows how to use event listener client that goes with the event producer server...its got a readme. Given we do want to show how to use the event client, I propose we leave it in but move to post 1.0.;;;","03/Jun/17 3:50 AM;denyeart;Ok, we could even leave it in and add a comment indicating which part is currently broken.;;;","04/Jun/17 8:48 AM;muralisr;It was easy enough fix, so fixed it -  https://gerrit.hyperledger.org/r/#/c/10123.

[~nickgaski] could use help with doc. We can resurrect old doc (which was actually pretty good) and fix it up for 1.0;;;","04/Jun/17 8:53 AM;muralisr;Actually going to abandon https://gerrit.hyperledger.org/r/#/c/10123 as there appears to be another CR https://gerrit.hyperledger.org/r/#/c/10063 to fix this.

[~Hangyu_FJH] can you assign this to yourself (or dup it) given you have a CR to fix this please ?;;;","05/Jun/17 8:51 AM;Hangyu_FJH;thank you [~muralisr], I have already assigned this ticket to me. I will read your comments on gerrit and get back to you ASAP.;;;","06/Jun/17 8:49 PM;muralisr;[~Hangyu_FJH] thanks for https://gerrit.hyperledger.org/r/#/c/10063.

[~jimthematrix] can you confirm the fix and close please ?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add orderer test scaffolding,FAB-3283,15875,19362,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,latitiah,latitiah,latitiah,21/Apr/17 7:26 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/May/17 2:27 AM,,,,,,,,fabric-quality,,,,0,,,,,,,,This scaffolding will be the basis for implementing the orderer feature files.,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3516,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqlr:",,,,,,Sprint 19 - Quality,,,,,,,,,,,,3.0,,,,,,,,,,,,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer CLI fails to Instantiate Chaicode,FAB-3284,15876,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Clayton Sims,rhegde,rhegde,21/Apr/17 8:44 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,08/May/17 7:58 PM,v1.0.0-alpha1,,,,WON'T FIX,,,fabric-peer,,,,0,,,,,,,,"Peer CLI performs 
1. Creating Channel
2. Peer Joins the Channel
3. Install Chaincode
4. Instantiate Chaincode

The 4th command processing fails. This happens on one of the setup and is been shown to [~bmos299]. And discussed with [~binhn]
*Setup*
Current setup uses 2-Organization setup and 2-Peers per Organization, https://github.com/hyperledger/fabric-sdk-java/tree/master/src/test/fixture/sdkintegration/e2e-2Orgs.

1. we are using scripts from ` https://github.com/hyperledger/fabric/tree/master/examples/e2e_cli `
2. we are currently using already created channel configuration block, orderer genesis block and certification related data from ` https://github.com/hyperledger/fabric-sdk-java/tree/master/src/test/fixture/sdkintegration/e2e-2Orgs 

Peer CLI is currently used by our environment for bootstrapping channels and also adding business reference data.  

Peer Logs are attached soon after the instantiation fails 
{quote}
Error: Error endorsing chaincode: rpc error: code = 2 desc = Transaction returned with failure: Failed extracting proposal fields. [Could not extract the channel header from the proposal: UnmarshalChannelHeader failed, err proto: bad wiretype for field common.ChannelHeader.Type: got wiretype 2, want 0]
{quote}",,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 8:45 AM;rhegde;PeerCLI-InstantiationFailureLogs.tgz;https://jira.hyperledger.org/secure/attachment/10673/PeerCLI-InstantiationFailureLogs.tgz",,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqmn:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 10:36 AM;rhegde;After further discussion with Bin, Gari, found stale images of the user-chaincode that were picked up and caused the instantiation failure. 

This issue can be closed. Thanks

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen tool generates invalid channel config tx binary,FAB-3285,15877,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,kchristidis,jimthematrix,jimthematrix,21/Apr/17 12:15 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Feb/18 3:04 AM,v1.0.0-alpha1,v1.1.0-preview,,,Not a Bug,,,fabric-orderer,,,,0,configuration,,,,,,,"when generating using the following command:

./build/bin/configtxgen -outputCreateChannelTx ./mychannel.tx -profile <profilename>

and tried to use the mychannel.tx to submit channel create request, the orderer will return the following error:

2017-04-21 00:19:41.338 UTC [orderer/common/broadcast] Handle -> WARN 1a7 Rejecting CONFIG_UPDATE because: Error validating DeltaSet: Attempt to set key [Policy] /Channel/Orderer/Admins to version 0, but key is at version 0",,denyeart,kchristidis,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Feb/18 1:35 AM;zamrokk;Archive.zip;https://jira.hyperledger.org/secure/attachment/14678/Archive.zip","23/Feb/18 6:44 PM;zamrokk;ca.yaml;https://jira.hyperledger.org/secure/attachment/14675/ca.yaml","21/Feb/18 6:54 PM;zamrokk;channel1.json;https://jira.hyperledger.org/secure/attachment/14660/channel1.json","21/Feb/18 6:54 PM;zamrokk;channel1.tx;https://jira.hyperledger.org/secure/attachment/14662/channel1.tx","23/Feb/18 3:50 AM;kchristidis;channel1_repr.tx;https://jira.hyperledger.org/secure/attachment/14671/channel1_repr.tx","23/Feb/18 11:38 PM;kchristidis;channel1_repr_alpha.json;https://jira.hyperledger.org/secure/attachment/14676/channel1_repr_alpha.json","23/Feb/18 11:38 PM;kchristidis;channel1_repr_alpha.tx;https://jira.hyperledger.org/secure/attachment/14677/channel1_repr_alpha.tx","21/Feb/18 6:54 PM;zamrokk;configtx.yaml;https://jira.hyperledger.org/secure/attachment/14661/configtx.yaml",,,,,,,,,,,,,,,,,,,,,,"1|hzxqmv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,denyeart,kchristidis,zamrokk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 2:06 PM;kchristidis;On the latest master (??d661d11 Merge ""[FAB-3317] Update peer CouchDB timeout""??):

# The E2E CLI test passes w/o issues.
# Created a genesis block for the SampleInsecureSolo profile, launched the orderer, ran the sample broadcast_config client against it (which generates a channel creation transaction using the same library as configtxgen), and the channel was created successfully.

So: so far I am unable to reproduce the problem.

I am currently extending the broadcast_config client so that it can use a channel creation TX produced by the configtxgen binary. This will allow me to get eveb closer to your sequence of steps. Will update.;;;","24/Apr/17 4:51 AM;kchristidis;I extended the broadcast_config client to have it send the channel creation TX produced by the configtxgen binary. Everything works w/o issues.

See the temporary commit I pushed here w/ instructions: https://gerrit.hyperledger.org/r/#/c/8459/

Let me know if I am missing something.

If I am not, let's proceed with closing this.;;;","28/Apr/17 3:32 PM;kchristidis;Marking this as done, if the issue persists, please re-open.;;;","21/Feb/18 6:56 PM;zamrokk;I encounter same issue while generating the binary.

Here attached the files : the config file , the output binary and the json displayed with the option  inspectChannelCreateTx

 

Here is the output log :

Caused by: com.google.protobuf.InvalidProtocolBufferException$InvalidWireTypeException: Protocol message tag had invalid wire type.

 at com.google.protobuf.InvalidProtocolBufferException.invalidWireType(InvalidProtocolBufferException.java:115)

 at com.google.protobuf.CodedInputStream$ArrayDecoder.skipField(CodedInputStream.java:686)

 at org.hyperledger.fabric.protos.common.Common$Envelope.<init>(Common.java:5641)

 

Docker Image version : 1.1.0-preview

 

SDK version : 1.1.0-SNAPSHOT

 

 ;;;","21/Feb/18 10:28 PM;kchristidis;Are you getting the same issue as indicated in this JIRA's description a ""Rejecting CONFIG_UPDATE message"" or an ""invalid wire type"" message, as you indicate on your post?;;;","22/Feb/18 5:19 PM;zamrokk;it is a different error message but the cause might be the same : the .tx binary cannot be parsed (same as the title);;;","23/Feb/18 12:25 AM;kchristidis;Thanks for clarifying.

When exactly do you get that error?

You write that this happens while generating the binary, but I'm not sure what binary you refer to.

And is this the Java SDK?;;;","23/Feb/18 12:28 AM;zamrokk;Using Java SDK, when try to connect to a channle using a new fresh enrolled user

the binary is the .tx file that is generated by fabric-tools ;;;","23/Feb/18 3:50 AM;kchristidis;Here's what I got:

# The binary file that you have attached ({{channel1.tx}}) is indeed broken. When attempting to decode it, I get an {{bad wiretype for field common.Envelope.Payload: got wiretype 5, want 2}} error. A [length-delimited type|https://developers.google.com/protocol-buffers/docs/encoding#structure] is expected, but a 32-bit value is returned instead.
# The JSON file that you have attached ({{channel1.json}}) works w/o issues. I can encode it into an {{Envelope}}, and decode that envelope just fine.
# Using your {{configtx.yaml}} configuration file and a {{1.1.0-preview}} configtxgen binary, I created a channel creation transaction -- see {{channel1_repr.tx}}. This one works w/o issues -- it can be decoded using {{configtxlator}} just fine.

I've got two questions:

1. How did you generate that {{channel1.tx}} file. What is the output of {{configtx -version}}?
2. How did you generate its JSON representation. What is the output of {{configtxlator version}}?;;;","23/Feb/18 6:34 PM;zamrokk;I am using x86_64-1.1.0-alpha from all images

 

1)  I generate the channel from K8 scripting files , here is the line :

image: byomc/fabric-tools:x86_64-1.1.0-alpha                        <= this is the hyperledger/fabric-tools , just modified the ca.yaml to have only 1 org
imagePullPolicy: Always
command: [""sh"", ""-c"", ""cd /shared && pwd && ls && configtxgen -profile OneOrgsChannel -outputCreateChannelTx channel1.tx -inspectChannelCreateTx channel1.tx -channelID channel1 && touch /shared/status_channeltx_complete ""]

Juste did the same configtxlator commands as yours, get exactly same problem and got also the json displayed well on your channel1_repr.tx file  :s

Do you need also my ca.yaml file ?

2)

root@2edfa1b2b476:/shared# configtxlator version
configtxlator:
 Version: development build
 Go version: go1.9.2
 OS/Arch: linux/amd64

As you see the .json file is taken from the option ""inspectChannelCreateTx"" that displays it on the stdout while generating the binary

 ;;;","23/Feb/18 6:34 PM;zamrokk;For info, my environnement is MacOs, but I ran the scripts on an IBM Cloud Kubernetes cluster;;;","23/Feb/18 6:44 PM;zamrokk;just joined the ca.yaml file;;;","23/Feb/18 11:31 PM;kchristidis;# You mention 1.1.0-alpha in your latest message, but you wrote 1.1.0-preview in your first message in this thread. Which one is it?
# Your configtxlator version is ""development build"". This suggests that you are not using the binary that comes with whatever version (see question 1) you downloaded. Please use the configtxlator version that comes with the image you downloaded and let me know what you get.

I cannot reproduce this with the info that I have.;;;","23/Feb/18 11:40 PM;kchristidis;Switched to 1.1.0-alpha binaries. I can encode a channel creation transaction using 1.1.0-alpha configtxgen, and then decode it using configtxlator v1.1.0-alpha without issues. {{channel1_repr_alpha.tx}} gives me {{channel1_repr_alpha.json}}. See attached files.;;;","24/Feb/18 1:36 AM;zamrokk;It seems linked to this issue too : https://jira.hyperledger.org/browse/FAB-7585?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel

 

I am uploading a very light archive containing : configtx.yaml, crypto-config.yaml and docker-compose.yaml

just run a : docker-compose -f docker-compose.yaml up

and tell me if you get the same logs as mine    [^Archive.zip];;;","26/Feb/18 8:58 PM;denyeart;Deferring to 1.2 since we have not been able to reproduce on latest master.;;;","27/Feb/18 2:17 AM;kchristidis;Unable to reproduce.

Using the {{hyperledger/fabric-tools:x86_64-1.1.0-alpha}} image (same as in your Docker Compose file), I cd'd to directory {{3285}} (see https://github.com/kchristidis/fabric/tree/fab-3285-dc/3285) and did the following: https://pastebin.com/Lwnawjtd;;;","27/Feb/18 2:28 AM;zamrokk;I created configtx.yaml back from scratch and now the binary is ok. Maybe something with a space or invisible character on file   o.O   . You can close for my case.;;;",,,,,,,,,,,,,,,,,,,,,,
Fix debug statements in orderer package,FAB-3287,15879,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,kchristidis,kchristidis,kchristidis,21/Apr/17 2:06 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,25/Apr/17 6:26 AM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,common-components,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqn3:",,,,Unset,,Sprint 16 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 2:10 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/8331/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sync Docker Compose defaults with configtx.yaml defaults,FAB-3288,15880,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,21/Apr/17 2:20 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,28/Apr/17 9:12 PM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,kafka,,,,,,,"The default value in configtx.yaml for ""Absolute Max Bytes"", the size batches that the ordering service outputs, breaks the Docker Compose configuration files in ""bddtests/environments"". This changeset brings all configurations in sync.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3040,,,,,,,,,"1|hzxqnb:",,,,Unset,,Sprint 16 - Consensus,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 2:33 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/8333/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix failing multi-broker Kafka bootstrap test,FAB-3289,15881,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,kchristidis,kchristidis,kchristidis,21/Apr/17 2:35 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Jun/17 7:43 PM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,,,,,,,The `bootstrap.feature` test fails in the case of a multi-broker Kafka-based ordering service. We'll need to correct the timing assumptions and orderer references to fix that.,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3751,,,,,,,,,,,,,,,,,,,,,,,,FAB-3291,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqnj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 2:39 PM;kchristidis;WIP: https://gerrit.hyperledger.org/r/#/c/8335/;;;","06/May/17 8:34 AM;kchristidis;Fixed the issues with the feature that were causing the Kafka case to fail. They had to do with timing and with targeting the wrong orderer.

Only thing remaining is to have the test automatically detect the addresses of the Kafka brokers and encode them in the system genesis block — [~jeffgarratt]'s on it.;;;","10/May/17 3:14 AM;kchristidis;Not sure why the priority of this one was changed?;;;","11/May/17 11:56 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/9229/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add 3x orderer 3x Kafka broker bootstrap scenario,FAB-3291,15883,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,kchristidis,kchristidis,kchristidis,21/Apr/17 2:47 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,18/May/17 3:26 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3289,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqnr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 2:52 PM;kchristidis;WIP: https://gerrit.hyperledger.org/r/#/c/8337/;;;","06/May/17 8:37 AM;kchristidis;As soon as the functionality described in FAB-3289 is added in `bootstrap_util.py`, this should be good to go.;;;","12/May/17 12:26 AM;kchristidis;[https://gerrit.hyperledger.org/r/#/c/9231/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JoinChannel failing in End2End test at the current master (e4074cee2e30e89b7b1d8514b125b2d3ce859577),FAB-3292,15884,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,angelo.decaro,angelo.decaro,angelo.decaro,21/Apr/17 4:52 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 9:49 PM,,,,,,,,fabric-crypto,,,,0,security,,,,,,,"The e2e example is failing in the current master because who signs the JoinChannel is not recognized as administrator of the peer.

A fix for this is by setting the peer's identity as its own administrator. This is done by copying
the peer's certificate into the admincerts folder.",,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqnz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor default MSP type code to obtain the hash family from a field in FabricMSPConfig ,FAB-3293,15885,14924,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,elli-androulaki,elli-androulaki,21/Apr/17 6:22 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,14/Aug/17 12:30 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"This issue refers to the refactoring of the code of the default MSP type (mspimpl.go) for fabric peers/orderers, such that 
 - extend FAbricMSPConfig message to include a hash family specification 
 - hash family used throughout this MSP operations, e.g., hash family passed at signing time (identity.sign) is not hardcoded but rather controlled but a single parameter in the MSP configuration (FabricMSPConfig)
 
",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,14400,14400,,0%,14400,14400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqo7:",,,,,,Sprint 13 - Crypto,Sprint 14 - Crypto,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Apr/17 6:24 PM;elli-androulaki;Related CR:
https://gerrit.hyperledger.org/r/#/c/8301/;;;","11/Aug/17 6:28 PM;elli-androulaki;[~angelo.decaro] this is done right?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Retrieve hashes for chainless operations via core.yaml ,FAB-3294,15886,15888,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,elli-androulaki,elli-androulaki,21/Apr/17 6:35 PM,26/Aug/19 6:52 AM,28/Oct/23 2:59 AM,26/Aug/19 6:52 AM,,,,,Future,,,fabric-crypto,,,,0,,,,,,,,"This is to think through which hash function is to be used by  a set of of operations that are not channel-scoped. For example the hash function used for PKI-ID, or the hash function used at chaincode isntallation for generating CC identifier (FAB-2931).

",,elli-androulaki,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57600,57600,,0%,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqof:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Aug/19 6:52 AM;mastersingh24;No longer valid;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enablement of configuration of crypto algorithms of default MSP type through core.yaml or channel genesis,FAB-3295,15887,15888,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,elli-androulaki,elli-androulaki,21/Apr/17 6:37 PM,23/Jan/20 4:06 AM,28/Oct/23 2:59 AM,23/Jan/20 4:06 AM,,,,,Future,,,fabric-crypto,,,,0,stale-item,,,,,,,"This is a follow-up of FAB-3293 such that the added parameter in FabricMSPConfig proto message is retrieved as configuration parameter in core.yaml, or channel config block (or some other way as we do currently with local msp setup).",,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqon:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:06 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As an infrastructure developer I need to make hashes used throughout fabric configurable (post v1),FAB-3296,15888,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,elli-androulaki,elli-androulaki,21/Apr/17 6:44 PM,23/Jan/20 4:06 AM,28/Oct/23 2:59 AM,23/Jan/20 4:06 AM,,,,,Future,,,fabric-crypto,,,,0,stale-item,,,,,,,"Ultimate goal of two jira items FAB-2362 and FAB-3296  is to work towards the following :
 - retrieve hashes used within the context of a chain (proposal, txid, binding, block) from chain genesis block (*done*)
 - [subtask of FAB-3262] retrieve hashes used within a signature from a (hardcoded) MSP property (FAB-3293)
 - [subtask of FAB-3296] retrieve chain-less operation hashes from local configuration of peers/orderers (FAB-3294) - post v1
 - [subtask of FAB-3296] enable MSP crypto configuration be retrieved at peer setup time or channel genesis (FAB-3295) - post v1


Side change-sets needed are:
 - Remove the usage of BCCSP default opts",,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,57600,57600,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzws1b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 4:06 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BCCSP does not generate PKCS8 compliant private keys when storing to file keystore,FAB-3297,15889,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,21/Apr/17 7:34 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 4:28 AM,v1.0.0,v1.0.0-alpha1,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"When PEM-encoding and storing EC private keys, BCCSP currently uses the header ""BEGIN ECDSA PRIVATE KEY"".  While this is not illegal, it produces a format which is not consumable by the current Node SDK or by openssl.

The proposed fix is to simply generate PKCS8 compliant PEM-encoded EC keys",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";22/Apr/17 6:30 PM;mastersingh24;7200",,,,7200,0,7200,100%,7200,0,7200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqov:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/17 7:59 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8349/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer see bad policy with Consortium changes applied,FAB-3298,15890,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,harrisob@us.ibm.com,harrisob@us.ibm.com,21/Apr/17 10:21 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 2:28 AM,v1.0.0-alpha1,,,,WON'T FIX,,,fabric-orderer,,,,0,,,,,,,,"Starting with current Fabric at commit bac1fadec830d445c5205be0c64ec704f5f8f6d1 
apply 
git fetch ssh://bretharrison@gerrit.hyperledger.org:29418/fabric refs/changes/15/7315/6 && git checkout FETCH_HEAD

the git log of the 'HEAD detached at FETCH_HEAD)' looks like
```
89572fe Jason Yellick   Fri Mar 17 13:57:40 2017 -0400  [FAB-2821] Print readset/writeset/deltaset on updt
00a7bea Jason Yellick   Fri Mar 10 13:46:16 2017 -0500  [FAB-2735] (PA) Clean up config mocks
3c4748d Jason Yellick   Thu Mar 9 23:10:40 2017 -0500   [FAB-2723] (PA) Remove old ChainCreationPolicyName
9734c1c Jason Yellick   Thu Mar 9 14:59:41 2017 -0500   [FAB-1302] (PA) Add channel create authorization
fd5672c Jason Yellick   Tue Mar 14 15:05:48 2017 -0400  [FAB-2783] (PA) configtxgen specify admin principl
48ac6ba Jason Yellick   Wed Mar 8 15:26:54 2017 -0500   [FAB-2703] (PA) Expose committed configEnvelope
43309dc Jason Yellick   Wed Mar 8 14:05:43 2017 -0500   [FAB-2702] (PA) Specify consortium in chan config
b2c09f2 Jason Yellick   Wed Mar 8 13:48:51 2017 -0500   [FAB-2646] (PA) Create consortium configuration
118f82f Gari Singh      Tue Apr 11 23:37:59 2017 +0000  Merge ""[FAB-3087] Fix peer/core.yaml misleading comments""
0b86ba9 Gari Singh      Tue Apr 11 22:59:06 2017 +0000  Merge ""[FAB-3058] CONTRIBUTING improvements""
1c5c32c Binh Nguyen     Tue Apr 11 22:30:46 2017 +0000  Merge ""[FAB-3086] Fix log event formatting""
e77644d Greg Haskins    Tue Apr 11 21:15:18 2017 +0000  Merge ""[FAB-3060] skip java chaincode tests on non-x86_84""
0050981 Christopher Ferris      Mon Apr 10 09:07:00 2017 -0400  [FAB-3058] CONTRIBUTING improvements
eee9070 YACOVM  Tue Apr 11 11:54:29 2017 +0300  [FAB-3087] Fix peer/core.yaml misleading comments
3a66788 YACOVM  Tue Apr 11 11:47:32 2017 +0300  [FAB-3086] Fix log event formatting
a076bba Jim Zhang       Mon Apr 10 18:19:33 2017 +0000  Merge ""[FAB-2943] Event publishing failure fails block commit""
dc143e2 Luis Sanchez    Mon Apr 10 09:59:07 2017 -0400  [FAB-3060] skip java chaincode tests on non-x86_84
7984725 Chris Elder     Sat Apr 8 13:46:45 2017 -0400   FAB-3047 Change attachment arrays to use pointers
a932b54 Chris Elder     Sat Apr 8 12:35:06 2017 -0400   FAB-3046 Add CouchDB batch select operations
458bcdf YACOVM  Mon Apr 10 01:58:01 2017 +0300  [FAB-2943] Event publishing failure fails block commit
0640d43 Jonathan Levi (HACERA)  Sun Apr 9 22:30:43 2017 +0000   Merge ""FAB-2959 Add CouchDB batch update operations""
2663d8b Binh Nguyen     Sun Apr 9 14:03:34 2017 +0000   Merge ""Organizational Unit Certification Path Support""
```
Build the docker images on Mac
Start a docker compose with Orderer
Noticed the following error::
orderer0    | 2017-04-20 15:04:22.398 UTC [orderer/multichain] newLedgerResources -> CRIT 052 Error creating configtx manager and handlers: Error deserializing key ChainCreationPolicyNames for group /Channel/Orderer: Unexpected key ChainCreationPolicyNames",,harrisob@us.ibm.com,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqp3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harrisob@us.ibm.com,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 2:28 AM;kchristidis;You are feeding this network with a genesis block that is no longer current since it contains the ChainCreationPolicyNames key. You'll need to use the configtxgen tool to get a proper genesis block. You can confirm that things are running properly by running the E2E CLI test.

Tried this on the very latest master with those changes applied on top and it works w/o issues.

{noformat}
~/Repositories/fabric (config-changes) $ git lg | head -n10
* 58465486 - (HEAD -> config-changes) [FAB-2821] Print readset/writeset/deltaset on updt (14 minutes ago) <Jason Yellick>
* ace0f3e1 - [FAB-2735] (PA) Clean up config mocks (14 minutes ago) <Jason Yellick>
* 2d09d379 - [FAB-2723] (PA) Remove old ChainCreationPolicyName (14 minutes ago) <Jason Yellick>
* 580113e2 - [FAB-1302] (PA) Add channel create authorization (14 minutes ago) <Jason Yellick>
* 4a0b3ac0 - [FAB-2783] (PA) configtxgen specify admin principl (14 minutes ago) <Jason Yellick>
* 9236f6cb - [FAB-2703] (PA) Expose committed configEnvelope (14 minutes ago) <Jason Yellick>
* d8685f26 - [FAB-2702] (PA) Specify consortium in chan config (14 minutes ago) <Jason Yellick>
* 513aece9 - [FAB-2646] (PA) Create consortium configuration (14 minutes ago) <Jason Yellick>
* 441b3085 - (origin/master, origin/HEAD, master) [FAB-3292] JoinChannel fails on e2e (10 hours ago) <Angelo De Caro>
*   e4074cee - Merge ""Add orderer details to command in doc"" (18 hours ago) <Yacov Manevich>
{noformat}
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Optimize chaincode deploy/upgrade transaction structure to not require endorser signature,FAB-3299,15891,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,elli-androulaki,elli-androulaki,21/Apr/17 10:24 PM,12/Sep/18 6:36 PM,28/Oct/23 2:59 AM,12/Sep/18 6:36 PM,,,,,Future,,,fabric-crypto,,,,0,,,,,,,,"Endorsement signatures are not needed in a deploy/upgrade tx, since for these two functions validation is performed using :
 - creator certificate & creator signature
 - invocation data (and to some extend validation of the simulated results by repeating parts of its)

Endorsement signatures are not needed here from a security perspective. They are simply used for convenience for the client to be able tor retrieve the instantiation policy of the chaincode to deploy without knowing it in advance.

 

",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11237,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx5n3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Sep/18 6:36 PM;elli-androulaki;Given new lifecycle is being in progress, this item is no longer needed. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Define a default chaincode instantiation policy,FAB-3300,15892,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mne,elli-androulaki,elli-androulaki,21/Apr/17 10:26 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,06/May/17 5:26 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"When a instantiator of a chaincode does not provide a policy, a default needs to be granted.
Currently an Accept all policy is assumed as default.
",,elli-androulaki,mne,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,43200,43200,,0%,43200,43200,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5iv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,mne,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/17 9:46 PM;elli-androulaki;As a suggestion for the default instantiation policy for a chaincode installed on a peer P, would it make sense to consider the admin of MSP of P? 

[~muralisr], [~ales], [~mne], [~adc], what do you think?;;;","26/Apr/17 12:09 AM;mne;[~ellaki] sounds good to me!
Essentially this means that:
* it allows only the MSP admin of P to instantiate CC packages that come without an instantiation policy.
* after deploy, this instantiation policy is also in effect for upgrades of the chaincode.
* it can be changed through a CC upgrade by the MSP admin of P.;;;","26/Apr/17 2:06 AM;elli-androulaki;[~mne], correct! 

What is important is that although the instantiation policy is ""nil"" at installation time, during deploy instantiation policy related entry (that is filled by the corresponding endorser) needs to include the actual policy; otherwise the network will not be able to substitute the ""nil"" properly. Unless the default policy is assumed to be produced by the endorser certificate (e.g., its MSP admin), but this is already more complex. 

What do you think?
;;;","28/Apr/17 2:02 AM;mne;[~ellaki] Sounds good!

implemented in CR: http://gerrit.hyperledger.org/r/8667;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Event support enhancements,FAB-3302,15894,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jimthematrix,jimthematrix,21/Apr/17 10:35 PM,12/Jul/19 8:41 PM,28/Oct/23 2:59 AM,12/Jul/19 8:41 PM,,,,,Future,,,fabric-sdk-node,,,,0,,,,,,,,"""Advanced"" features not contained in v1.0",,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3621,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzx49r:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Don't allow nil InstantiationPolicy,FAB-3304,15896,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ales,ales,21/Apr/17 11:23 PM,23/Jan/20 4:06 AM,28/Oct/23 2:59 AM,23/Jan/20 4:06 AM,v1.0.0-alpha1,,,,Future,,,fabric-peer,,,,0,Endorser,stale-item,,,,,,Instantiation policies are supplied when a chaincode is installed. Currently we accept nil policies for backward compatibility but this should be removed,,ales,ChristopherFerris,denyeart,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqpr:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ales,ChristopherFerris,denyeart,muralisr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/17 7:59 PM;ChristopherFerris;not clear that this is a bug if working as designed (even if design needs to evolve) [~muralisr];;;","08/May/17 8:41 PM;muralisr;[~ChristopherFerris] would say working as designed. This is a placeholder for SDK moving away from sending raw ChaincodeDeploymentSpec for install and using the SignedChaincodeDeploymentSpec instead. CLI can accept either and does generate a non-nil default if an instantiation policy is not supplied. 

 ;;;","23/Mar/18 2:07 PM;denyeart;Many issues were bulk moved from v1.0 or v1.1 to v1.2 as part of a cleanup effort, and many of these issues are not high priority or actually intended to be worked for v1.2.  This issue is being bulk moved to Future.  If the issue is indeed high priority for v1.2 and/or very low effort, please move back to v1.2 and add a comment to indicate rationale.;;;","23/Jan/20 4:06 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
java cc implement get query result for rich queries,FAB-3305,15897,15552,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,21/Apr/17 11:31 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/May/17 8:46 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqpz:",,,,,,Sprint 15 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move admin user certs to proper MSP location for peers and orderers,FAB-3306,15898,15851,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,22/Apr/17 1:06 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 6:29 PM,,,,,v1.0.0,,,fabric-tools,,,,0,,,,,,,,cryptogen needs to add the public certificate of each organization's admin user to the MSP for each peer and orderer in the organization,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";22/Apr/17 1:25 AM;mastersingh24;2700",,,,3600,900,2700,75%,3600,900,2700,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqq7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 1:25 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8363/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SatisfiesPrincipal function of MSP needs to check validity of the principal identity under the MSP of the principal ,FAB-3307,15899,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adc,elli-androulaki,elli-androulaki,22/Apr/17 1:26 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Apr/17 7:18 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"SatisfiesPrincipal is a function of the MSP that checks if an identity satisifes a given principal. 
Principals among other things can be also identity-based, in which case the function should accept if the identity in question matches the msp principal' s identity.

However, for the check to actually make sense one needs to ensure that the identity in the principal is valid under the MSP of the identity of that principal. This is currently not checked.",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5gf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/17 11:42 PM;elli-androulaki;Related CR: https://gerrit.hyperledger.org/r/#/c/8547/
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade from one fabric version to another - Process Documentation,FAB-3308,15900,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,nickgaski,bkvellanki,bkvellanki,22/Apr/17 1:29 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Mar/18 5:38 AM,,,,,,,,fabric-docs,,,,0,Documentation,,,,,,,"Lets say an org want to need to upgrade from one version of fabric, fabric-ca, fabric-peer, fabric-orderer to another  . Example -  (alpha to beta orv1.0 to v1.1)   OR applying a patch. Organizations needs a document to follow the steps to upgrade or patch process that should include at a minimum:

1) Steps (Process) to upgrade - Version of fabric, fabric
2) Components to backup (DB, CC, Orderder,etc)
3) Testing process after upgrade - How to and what to?
4) Time taken
5) What is the impact
6) Release notes
7) Patch vs Major release

",,bkvellanki,caoyu,joe-alewine,peoplehlj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqqf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,bkvellanki,caoyu,joe-alewine,peoplehlj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 5:38 AM;joe-alewine;[http://hyperledger-fabric.readthedocs.io/en/release-1.1/upgrading_your_network_tutorial.html]

Applies not just to 1.0 to 1.1, but as a general flow as well.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE supports multiple users,FAB-3309,15901,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,22/Apr/17 2:40 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,25/Apr/17 3:00 AM,,,,,,,,fabric-quality,,,,0,quality,,,,,,,"PTE supports multiple user/password, one for each org.
This is the request from Z team.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2247,,,,,,,,,"1|hzxqqn:",,,,,,Sprint 16 - Quality,,,,,,,,,,,,,,,,,,,,,,,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gRPC timeout b/w committer and orderer and SDK event listeners,FAB-3310,15902,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,rhegde,jimthematrix,22/Apr/17 2:50 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,19/Jun/17 11:38 PM,v1.0.0,,,,v1.0.0,,,fabric-sdk-node,,,,1,alpha2,,,,,,,"based on a client's exhaustive testing, we are concluding that the grpc stream connection b/w the committer and orderer are broken due to inactivity. so this is what the client did and observed:
- start the whole system (one orderer, two peer orgs, two peers in each org, the client app)
- send 20 or so transactions in succession, all succeeded
- wait for 10min, submit another transaction
- at this point, the endorsement proposal request used to error out due to timeout
- but after setting CORE_CHAINCODE_KEEPALIVE to 10 (default was 0 which is off), this timeout doesn't happen any longer and the endorsement request happily returns to the app, and the app is able to send the transaction to the orderer. the orderer successfully processed it and proposed a block
- however the committer never received that block. so the logical conclusion is that the stream connection b/w the committer and the orderer is broken at that point

Would it be the right thing to do to expose the grpc keepalive setting on the committer in order to get around this issue?",,binhn,DennisM330,denyeart,mastersingh24,muralisr,rhegde,sstone1,troyronda,weeds,xixuejia,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,21600,10800,10800,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-4518,,,,,,,,,,,FAB-2843,FAB-4002,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx3db:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,DennisM330,denyeart,mastersingh24,muralisr,rhegde,sstone1,troyronda,weeds,xixuejia,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 2:58 AM;yacovm;You mean, on the delivery service - not the committer. right?
Jim, are you still capable of debugging with that client? Have you tried using tcpdump port 7050 to see if something does pass? 

My guess is that the client has some LB that drops connections after a while and the peer simply waits silently and indefinitely. ;;;","22/Apr/17 4:19 AM;mastersingh24;We are down level on the most current Go GRPC package - the one which has the client keepalive.
I believe that this is at least partially a duplicate and/or tied to https://jira.hyperledger.org/browse/FAB-1261 which I am happy to implement this weekend.

@yacov - I can take this off your plate;;;","22/Apr/17 4:20 AM;yacovm;{quote}Would it be the right thing to do to expose the grpc keepalive setting on the committer in order to get around this issue?{quote}
I am not aware that grpc-go has a keepalive extension.
from what I know there is some health check that needs application-level support both in the server and client side.

However - is it possible to make an experiment and try to reproduce the problem in the client's environment with the following change?
in https://github.com/hyperledger/fabric/blob/master/core/deliverservice/deliveryclient.go#L201-L211 :
{code}
func DefaultConnectionFactory(endpoint string) (*grpc.ClientConn, error) {
	keepAlive := grpc.WithDialer(func(addr string, timeout time.Duration) (net.Conn, error) {
		return (&net.Dialer{
			Timeout: timeout,
			KeepAlive: time.Minute,
		}).Dial(""tcp"", addr)
	})

	dialOpts := []grpc.DialOption{grpc.WithTimeout(connTimeout), grpc.WithBlock(), keepAlive}

	if comm.TLSEnabled() {
		dialOpts = append(dialOpts, grpc.WithTransportCredentials(comm.GetCASupport().GetDeliverServiceCredentials()))
	} else {
		dialOpts = append(dialOpts, grpc.WithInsecure())
	}
	grpc.EnableTracing = true
	return grpc.Dial(endpoint, dialOpts...)
}
{code};;;","24/Apr/17 6:26 PM;mastersingh24;I'm working on this - trying to figure out what the real issue is before implementing any type of fix.
I actually have not yet been able to reproduce - but will try adding something in between the orderer and the peer in order to see if we can reproduce the error.  Don't want to assume that keepalive is the only problem;;;","25/Apr/17 12:19 AM;mastersingh24;Ideally, part of the long term solution will be to update the grpc-go package.  Unfortunately, we can't move to it at this point.;;;","12/May/17 10:38 PM;binhn;Next week we will attempt to upgrade grpc and see where it might break and address that.;;;","12/May/17 10:38 PM;denyeart;[~mastersingh24] Could you clarify 'long term' and why we can't move up 'at this point'?;;;","13/May/17 12:42 AM;jimthematrix;I just moved FAB-3320 into this one as a sub-task. So it takes two fixes to make the whole thing work again:
- timeout b/w the orderer and committer. from the log that [~rhegde] sent it's pretty clear that the orderer successfully cut a block but the committer never received it.
- SDK needs to manage the grpc stream better. for Java SDK this has been done in https://gerrit.hyperledger.org/r/#/c/9067/. for node SDK a CR is pending https://gerrit.hyperledger.org/r/#/c/9165/ and we'd like to wait until after alpha2 to merge it;;;","13/May/17 12:47 AM;jimthematrix;also moved FAB-2843 into this one as sub-task, to track the work on the node SDK side;;;","19/May/17 9:25 PM;mastersingh24;[~denyeart] - there were some interface changes and I think it might involve more changes than we'd like in terms of risk at this point.

I'm going to give it a run and see what happens;;;","19/May/17 10:06 PM;mastersingh24;After assessing a number of options and looking at one with the least risk, I think that [~yacovm] was onto the right idea for what's needed for this specific case.  Passing in dialer *should* do the trick and seem like the least invasive option;;;","01/Jun/17 6:38 PM;mastersingh24;Now that we've upgraded grpc-go, I'm going to go with the keepalive option;;;","02/Jun/17 2:50 AM;muralisr;the bug has two tasks ..the grpc upgrade for fabric-peer is done. fabric-sdk-node task is left. Moving  it to fabric-sdk-node for visibility there.;;;","02/Jun/17 10:18 PM;jimthematrix;[~muralisr] we are using FAB-2787 to track the work on the node SDK side. java SDK has recently upgraded to grpc latest which integrated the keepalive capability controlled by a system property: https://gerrit.hyperledger.org/r/#/c/9955/

the work with node SDK has been on implementing the keepalive ping ourselves which would require an update to the proto definition (peer/events.proto). [~harrisob@us.ibm.com]. in the past couple of days I've been poking around the option to use built-in keepalive support. it seems for the current gprc level (1.2.4) we could use ""grpc.http2.keepalive_time"", or upgrade to 1.3.7 and use ""grpc.keepalive_time_ms"". Bret is investigating. Ideally 1.2.4 has the support so we don't have to upgrade at this point (upgrading to 1.3.7 introduce some issues that would need time to resolve).;;;","02/Jun/17 11:55 PM;mastersingh24;FAB-4305  seems to have done the trick.  I'm not sure exactly how we can add a real test for this (perhaps we can add it to BDD) but I've verified this manually by doing the following:

1) Locally modified e2e_cli to place an haproxy in front of the orderer and have the peers connect to the haproxy endpoint

2) Set client and server idle timeouts on haproxy to be less than the 300 sec keepalive set in the peer and verified that the connection was indeed terminated (on the good news front since this sends on EOF that the peer can handle it actually does reconnect)

3) Set the client and server idle timeouts to be larger than the 300 sec keepalive and left things running idle for an hour and did not see any connections timeout and terminate on the proxy;;;","03/Jun/17 5:48 PM;mastersingh24;[~timpii]  [~rhegde] - this should solve the timeout issue between the peer and the orderer.

I'll leave this open until you verify that this solves the problem in your environment

 ;;;","05/Jun/17 11:27 PM;rhegde;[~mastersingh24] Could you confirm the Docker Environment Variable to be set for the Orderer Container.;;;","06/Jun/17 12:08 AM;jimthematrix;[~timpii] [~rhegde] all changes needed in the fabric and SDKs are merged. can you please give it a try and let us know if all the timeout issues have been taken care of?

[~mastersingh24] I just saw your comment above about leaving it open until verified by CLS. will revert the status to in review.;;;","07/Jun/17 10:08 AM;rhegde;[Update - 6 June] We have picked up [https://chat.hyperledger.org/channel/fabric-ci?msg=KZrRzaZqzwYExt3WT] fabric images and transferring to our internal network. This JIRA should be verified by ET tomorrow EOD.;;;","07/Jun/17 1:08 PM;weeds;Thanks Rahul- I really appreciate it.;;;","09/Jun/17 5:18 PM;weeds;any input on this?;;;","09/Jun/17 8:42 PM;rhegde;Apologies for no update. There is some issue in getting the images (2nd set) to our network, Vikas should be position to update you on the status.;;;","09/Jun/17 8:48 PM;muralisr;thanks [~rhegde];;;","10/Jun/17 5:19 AM;weeds;Vikhas indicated they have build downloaded- but they have specific processes they need to get done.  He is trying to do it on weekend and will have updated status on Monday.;;;","13/Jun/17 4:03 AM;Clayton Sims;[~VikasJakhar]  [~rhegde] [~timpii]  how is this looking?   Did you get this validated?;;;","16/Jun/17 8:32 PM;Clayton Sims;Did this get validated?  I know Jason was helping you with an issue yesterday, but unclear if that was blocking the validation of this defect

 ;;;","16/Jun/17 11:41 PM;rhegde;Sorry Clayton, we are getting blockers for testing this item on beta-release, first https://jira.hyperledger.org/browse/FAB-4590 and now https://jira.hyperledger.org/browse/FAB-4827;;;","19/Jun/17 11:22 PM;rhegde;We used the Fabric Beta Images and we are not able to reproduce this issue on our environment. 

Thanks all for the assistance.;;;","19/Jun/17 11:38 PM;weeds;i am putting this to done given the comment from Rahul- thank you!;;;","24/Jun/17 12:20 AM;mastersingh24;Woo hoo;;;",,,,,,,,,,
java cc get history for key,FAB-3311,15903,15552,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,22/Apr/17 3:12 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/May/17 2:29 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqqv:",,,,,,Sprint 15 - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Identity.Validate() rejects if the identity represents one of the rootCAs, intermediateCAs, admins of the msp configuration",FAB-3312,15904,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,adc,elli-androulaki,elli-androulaki,22/Apr/17 3:48 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 10:56 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,We need to ensure that MSP.Validate accepts if the passed identity equals to any of the privilege identities.,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5fz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 10:59 PM;elli-androulaki;Given it is conceptually difficult for developers to exclude root CAs from the members of an MSP, they may have hard time specifying policies for their channels. ;;;","24/Apr/17 9:37 PM;elli-androulaki;Here we need to understand, whether the following would make sense and apply them:
 1. CAs in the CA hierarchy be considered valid identities of that MSP? (currently they are not)
 2. enforce that an admin's certificate has a signature from one of the considered CAs? (currently it is not enforced)
 3. in cases where intermediate CAs are present, exclude nonCA certificates signed directly by the root? (currently, we do not exclude them)

[~adc], [~ales], [~mastersingh24], [~keithsmith] what do you think for 1-3?;;;","26/Apr/17 10:56 PM;elli-androulaki;Related CR: https://gerrit.hyperledger.org/r/#/c/8463/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger related error on system restart,FAB-3314,15906,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jimthematrix,jimthematrix,22/Apr/17 4:04 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/Jun/17 1:56 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"When the client system gets restarted, which comprises of a client app, an orderer, two peers in separate orgs and two chaincodes that have already been instantiated, each on a separate channel, the peer reported an error saying something like ""trying to create the ledger but the ledger by this ID already exists"". will fill in more details once the peer log gets captured.",,Clayton Sims,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4pb:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/17 3:38 AM;Clayton Sims;[~rhegde] can you update logs;;;","03/Jun/17 1:56 AM;denyeart;We are unable to reproduce this, I will close for now, if somebody can reproduce and attach logs we will re-open.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
An identity can correspond to two valid identity identifiers as returns with existing Identity.getIdentifier method,FAB-3315,15907,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,angelo.decaro,elli-androulaki,elli-androulaki,22/Apr/17 4:06 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,09/May/17 10:38 PM,,,,,v1.0.0,,,fabric-crypto,fabric-gossip,,,0,,,,,,,,"Identity.getIdentifier for the default MSP returns the HASH of the x509 certificate representing the identity.

ECDSA signature malleability allows for two valid representations of a signature.

Notice that though we have fixed related issues in ECDSA signatures with BCCSP , certificate validation leverages X.509 golang library that does not consider the same fix.

Given this a certificate who has a valid ECDSA signature under a root CA, can have two valid identities. We want to eliminate valid identity identifiers to one.

Solution:
We convert the signature of the certificate to a specific one of the two available valid signature representations, and hash the certificate with that signature representation.",,angelo.decaro,elli-androulaki,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5j3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,elli-androulaki,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/17 7:52 AM;yacovm;What about just using the To-Be-Signed (RawTBSCertificate) certificate field instead of the cert.Raw field? Would that work?;;;","06/May/17 8:31 PM;mastersingh24;I honestly don't know why we need this nor should care about this at this point?  ;;;","08/May/17 4:39 PM;angelo.decaro;[~mastersingh24], let's consider a policy that can be satisfied by any two members of Org1. Then a malicious member of Org1 can manipulate his certificate by changing its ECDSA signature. Notice that the new certificate is still valid. The new certificate and the old one have different representation and therefore will be considered as coming from different entities. This should be avoided in a way or in another. Wdyt?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test TestCloseConn fails in CI sometimes,FAB-3316,15908,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,22/Apr/17 4:53 AM,19/Mar/19 8:13 PM,28/Oct/23 2:59 AM,25/Apr/17 10:37 PM,v1.0.0,,,,v1.0.0,,,fabric-build,fabric-gossip,,,0,ci-failure,,,,,,,"16:32:30 unit-tests_1  | --- FAIL: TestCloseConn (10.01s)
16:32:30 unit-tests_1  | 	assertions.go:219: 
                        
	Error Trace:	comm_test.go:335
16:32:30 unit-tests_1  | 		
	Error:		An error is expected but got nil. %s
16:32:30 unit-tests_1  | 		
	Messages:	Should have failed because connection is closed
16:32:30 unit-tests_1  | 		
16:32:30 unit-tests_1  | FAIL
16:32:30 unit-tests_1  | coverage: 83.3% of statements
16:32:30 unit-tests_1  | FAIL	github.com/hyperledger/fabric/gossip/comm	11.154s
16:32:30 unit-tests_1  | error: exit status 1
16:32:30 unit-tests_1  | panic: EOF
16:32:30 unit-tests_1  | 
16:32:30 unit-tests_1  | goroutine 1 [running]:
16:32:30 unit-tests_1  | panic(0x4daca0, 0xc42000a0f0)
16:32:30 unit-tests_1  | 	/opt/go/src/runtime/panic.go:500 +0x1a1
16:32:30 unit-tests_1  | main.main()
16:32:30 unit-tests_1  | 	/opt/gotools/obj/gopath/src/github.com/AlekSi/gocov-xml/gocov-xml.go:60 +0x15fd


[~C0rWin] I say we t.skip() it and look into it next week.... what do you say?",,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxqr3:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 5:43 AM;C0rWin;I'd say, that sounds reasonable. [~yacovm];;;","22/Apr/17 6:31 PM;yacovm;While the commit that disabled the tests is merged I think it would make sense to keep this JIRA item ""TODO"" to revisit next week.
Or should we open a new JIRA?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB occasionally doesn't respond for 30s - update peer timeout,FAB-3317,15909,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,denyeart,denyeart,denyeart,22/Apr/17 5:10 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 9:20 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"CouchDB occasionally doesn't respond for 30s - update peer timeout.

Occasionally CouchDB doesn't respond for (exactly) 30s.  This is most often seen in create database calls which happens frequently during unit tests. 

The default peer behavior is to retry couch after 20s, and therefore these occurrences disrupt unit tests and causes them to fail occasionally.

This change will set the peer CouchDB timeout to 35s for now, in order to avoid the retries in the peer avoid the unit test problems.

The root cause of the 30s delay is being worked with CouchDB team in FAB-3318.

",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3318,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4mf:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB in docker occasionally doesn't respond for 30s,FAB-3318,15910,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,chris.elder,denyeart,denyeart,22/Apr/17 5:12 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/May/17 3:54 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,"Occasionally CouchDB doesn't respond for (exactly) 30s.  This work item will investigate root cause of the 30s delay with CouchDB.  

For details see the bug opened in CouchDB jira:
https://issues.apache.org/jira/browse/COUCHDB-3409",,chris.elder,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3685,,,,,FAB-3317,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4mn:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,chris.elder,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/17 3:54 AM;chris.elder;Root cause for the delay is CouchDB is the docker image installed inside Vagrant.  The delays do not occur with CouchDB installed in docker outside of Vagrant.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[FAB-2772] NodeSDK - add consortium name to new channel create,FAB-3319,15911,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,harrisob@us.ibm.com,harrisob@us.ibm.com,22/Apr/17 5:16 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,11/May/17 11:39 PM,,,,,v1.0.0,,,,,,,0,node-SDK,,,,,,,"Add in the consortium name to the simplified user input JSON and be able to build the correct
protoBuf config objects to allow for a new channel to be created by the NodeSDK. ",,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2772,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqrb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
java SDK - Client didn't receive Block Event from Committing Peer,FAB-3320,15912,15902,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rickr,rhegde,rhegde,22/Apr/17 5:51 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,13/May/17 12:47 AM,,,,,v1.0.0,,,,,,,0,,,,,,,,"Environment: 
Client is using Java Fabric SDK and running on Fabric Eco system on following  changeset

{quote}
rameshthoomu/fabric-orderer-x86_64:x86_64-1.0.0-snapshot-7e0cff2
rameshthoomu/fabric-peer-x86_64:x86_64-1.0.0-snapshot-7e0cff2
rameshthoomu/fabric-javaenv-x86_64:x86_64-1.0.0-snapshot-7e0cff2
rameshthoomu/fabric-ccenv-x86_64:x86_64-1.0.0-snapshot-7e0cff2
rameshthoomu/fabric-couchdb-x86_64:x86_64-1.0.0-snapshot-7e0cff2
rameshthoomu/fabric-zookeeper-x86_64:x86_64-1.0.0-snapshot-7e0cff2
rameshthoomu/fabric-kafka-x86_64:x86_64-1.0.0-snapshot-7e0cff2
rameshthoomu/fabric-ca-x86_64:x86_64-1.0.0-snapshot-e583181
{quote}

Steps to reproduce 
--------------------------
1.  Install and Instantiate any sample chain-code 
2. Wait for around 15mins and then Invoke a New Transaction to be sent to Orderer.
3. Block Event for Transaction is not received 

Opening following JIRA for adding logs that were captured during exercise. [~jimthematrix]",,Clayton Sims,rhegde,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 5:55 AM;rhegde;ClientNotReceivedBlockEvent_OrdererLogs.tgz;https://jira.hyperledger.org/secure/attachment/10674/ClientNotReceivedBlockEvent_OrdererLogs.tgz","22/Apr/17 6:15 AM;rhegde;ClientNotReceivedBlockEvent_PeerLogs_Part1.tgz;https://jira.hyperledger.org/secure/attachment/10675/ClientNotReceivedBlockEvent_PeerLogs_Part1.tgz","22/Apr/17 6:15 AM;rhegde;ClientNotReceivedBlockEvent_PeerLogs_Part2.tgz;https://jira.hyperledger.org/secure/attachment/10676/ClientNotReceivedBlockEvent_PeerLogs_Part2.tgz","27/Apr/17 10:03 PM;rickr;end2end_wait.log;https://jira.hyperledger.org/secure/attachment/10680/end2end_wait.log",,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqrj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Clayton Sims,rhegde,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 7:54 PM;rickr;[~rhegde]  Where are the SDK logs ?  What was the transaction Id that for the event that went missing. What time was it submitted!  ... *please help us help you*!
[~wlahti] Can you make anything from this ?;;;","24/Apr/17 3:38 AM;rhegde;This Jira was opened to pass on logs (described in issue) and this issue is somewhat a explained to have a same root cause where we see a Peer Timeout (user-chaincode and peer container connection). As per [~jimthematrix] the connection between orderer and peer committer is lost and hence keep-alive needs to be activated or exposed as configuration. 

However from the orderer logs - last three lines are not seen in the world-state ledger.
{quote}
[36m2017-04-21 17:13:56.905 UTC [orderer/ramledger] appendBlock -> DEBU 13e1[0m Sending signal that block 22 has a successor
[36m2017-04-21 17:13:56.905 UTC [orderer/common/deliver] Handle -> DEBU 13e2[0m Delivering block for (0xc4202f5de0) channel: bar
[36m2017-04-21 17:13:56.905 UTC [orderer/common/deliver] Handle -> DEBU 13e3[0m Delivering block for (0xc420300be0) channel: bar
{quote} 

Can you please check with Jim.;;;","27/Apr/17 3:58 AM;Clayton Sims;Most likely a dup of 3310;;;","27/Apr/17 10:05 PM;rickr; [^end2end_wait.log]  
So I put the wait in above is the log .. Did not reproduce.

Please send both SDK logs at trace and alll fabric logs. Specify the  specific transaction id that was not received. ;;;","13/May/17 12:46 AM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/9067/ for the java SDK client side handling of the grpc streams in peer and orderer client classes;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Documentation for chaincode installation,FAB-3321,15913,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mne,elli-androulaki,elli-androulaki,22/Apr/17 6:04 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,28/Apr/17 4:03 PM,,,,,v1.0.0,,,fabric-crypto,fabric-peer,,,0,,,,,,,,"Produce .rst file under docs/source to describe the steps for installing a chaincode including the instantiation policy. 

Guidelines for how to edit it you may find here: 
https://github.com/hyperledger/fabric/blob/master/docs/source/cc-packaging-and-signing.rst

",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5in:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/17 10:58 PM;elli-androulaki;https://gerrit.hyperledger.org/r/#/c/8527/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Haskfest DC scripts for running binaries,FAB-3322,15914,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Ratnakar,bmos299,bmos299,22/Apr/17 6:12 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 12:51 AM,,,,,v1.0.0-alpha1,,,fabric-quality,,,,0,,,,,,,,We need to update the 'getting started' in the docs to make the experience more consumable.  This can start by eliminating the need for git clone and makes.  We will publish the binaries and modify the scripts to use the binaries.   Ratnakar is working on the scripts update. ,,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqrr:",,,,,,Sprint 16 - Quality,,,,,,,,,,,,,,,,,,,,,,,,bmos299,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hackfest DC published binaries,FAB-3323,15915,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,rameshthoomu,bmos299,bmos299,22/Apr/17 6:15 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 11:41 AM,,,,,v1.0.0-alpha1,,,fabric-quality,,,,0,,,,,,,,We need to update the 'getting started' in the docs to make the experience more consumable.  This can start by eliminating the need for git clone and makes.  We will publish the binaries and modify the scripts to use the binaries.  Ramesh is generating the binaries and publishing to nexus. ,,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqrz:",,,,,,Sprint 16 - Quality,,,,,,,,,,,,,,,,,,,,,,,,bmos299,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/17 6:22 AM;rameshthoomu;build and publish cryptogen and configtxgen binary tar files of each platform using CI (Jenkins) job and publish binary files and cli e2e scripts to nexus repository. You can get the latest tar files here https://logs.hyperledger.org/sandbox/vex-yul-hyp-jenkins-2/fabric-verify-x86_64_1/4/release.tar.gz. This is a temporary location and we will move to nexus3 repository.. Will publish permanent link location here or in docs.;;;","26/Apr/17 11:41 AM;rameshthoomu;have been submitted ""crypto"" and ""configtxgen"" binaries to nexus repository through CI job.. Once the transition from nexus to nexus3 is completed will move these binaries to a permanent location.. You can find latest binary files are here https://logs.hyperledger.org/sandbox/vex-yul-hyp-jenkins-2/fabric-binaries/. Closing this issue;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hacfest DC Update Doc,FAB-3324,15916,,Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,nickgaski,bmos299,bmos299,22/Apr/17 6:17 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Apr/17 10:41 AM,,,,,v1.0.0-alpha1,,,fabric-docs,,,,0,,,,,,,,We need to update the 'getting started' in the docs to make the experience more consumable.  This can start by eliminating the need for git clone and makes.  We will publish the binaries and modify the scripts to use the binaries.  Nick is working on the doc.  We may just create a README for the short-term. ,,bmos299,daijianw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx33b:",,,,,,Sprint 17 - Documentation,,,,,,,,,,,,,,,,,,,,,,,,bmos299,daijianw,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dependabot/go_modules/golang.org/x/crypto-0.1.0,release-2.5,release-2.4,dependabot/go_modules/test/performance/golang.org/x/net-0.7.0,main,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/github.com/prometheus/client_golang-1.11.1,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode instantiation fails after a Peer Recovery,FAB-3325,15917,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,rhegde,rhegde,22/Apr/17 6:22 AM,24/Sep/20 9:07 PM,28/Oct/23 2:59 AM,03/Jun/17 5:32 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Procedure
- Install and instantiate a chaincode on  say Peer0 using Peer CLI
- Peer0 is bounced thus causing user-chaincode container to stop.
- Client now tries to Invoke a new Fabric Proposal request thus causing an instantiation failure of the user-chaincode

Logs of Client using Fabric Java SDK
{quote}

2017-04-21 20:31:45.045 ERROR 74358 --- [ingleThreadTask] o.h.f.s.Chain                            : Sending proposal to peer1 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}

java.lang.Exception: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at org.hyperledger.fabric.sdk.Chain.sendProposalToPeers(Chain.java:2041) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendProposal(Chain.java:1980) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendTransactionProposal(Chain.java:1918) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at com.cls.clsnet.fabric.wrapper.FabricWrapperImpl.ledgerTransaction(FabricWrapperImpl.java:70) [clsnet-cls-fabric-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.inbound.msg.serviceimpl.FabricWrapperInputServiceImpl.processInboundMessage(FabricWrapperInputServiceImpl.java:78) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.task.FabricWrapperInputTask.executeTask(FabricWrapperInputTask.java:30) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.executor.SingleThreadExecutor.run(SingleThreadExecutor.java:50) [clsnet-common-core-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_121]
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_121]
        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]
Caused by: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at io.grpc.Status.asRuntimeException(Status.java:540) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.stub.ClientCalls$UnaryStreamToFuture.onClose(ClientCalls.java:439) ~[grpc-stub-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:428) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.access$100(ClientCallImpl.java:76) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:514) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:431) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:546) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.SerializingExecutor$TaskRunner.run(SerializingExecutor.java:152) ~[grpc-core-1.2.0.jar!/:1.2.0]
        ... 3 more

2017-04-21 20:31:45.046 ERROR 74358 --- [ingleThreadTask] o.h.f.s.Chain                            : Sending proposal to peer0 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}

java.lang.Exception: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at org.hyperledger.fabric.sdk.Chain.sendProposalToPeers(Chain.java:2041) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendProposal(Chain.java:1980) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at org.hyperledger.fabric.sdk.Chain.sendTransactionProposal(Chain.java:1918) [fabric-sdk-java-1.0-SNAPSHOT.jar!/:?]
        at com.cls.clsnet.fabric.wrapper.FabricWrapperImpl.ledgerTransaction(FabricWrapperImpl.java:70) [clsnet-cls-fabric-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.inbound.msg.serviceimpl.FabricWrapperInputServiceImpl.processInboundMessage(FabricWrapperInputServiceImpl.java:78) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.task.FabricWrapperInputTask.executeTask(FabricWrapperInputTask.java:30) [clsnet-participant-services-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at com.cls.clsnet.executor.SingleThreadExecutor.run(SingleThreadExecutor.java:50) [clsnet-common-core-0.0.1-SNAPSHOT.jar!/:0.0.1-SNAPSHOT]
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_121]
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_121]
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_121]
        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]
Caused by: io.grpc.StatusRuntimeException: UNKNOWN: Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory
        at io.grpc.Status.asRuntimeException(Status.java:540) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.stub.ClientCalls$UnaryStreamToFuture.onClose(ClientCalls.java:439) ~[grpc-stub-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:428) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl.access$100(ClientCallImpl.java:76) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.close(ClientCallImpl.java:514) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl.access$700(ClientCallImpl.java:431) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:546) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52) ~[grpc-core-1.2.0.jar!/:1.2.0]
        at io.grpc.internal.SerializingExecutor$TaskRunner.run(SerializingExecutor.java:152) ~[grpc-core-1.2.0.jar!/:1.2.0]
        ... 3 more

2017-04-21 20:31:45.047  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Received Proposal Response -
2017-04-21 20:31:45.047  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Proposal Response - FAILURE
2017-04-21 20:31:45.048  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Proposal Response - FAILURE
2017-04-21 20:31:45.048  INFO 74358 --- [ingleThreadTask] c.c.c.f.w.FabricWrapperImpl              :  Verifying Proposal Responses
java.lang.Exception: Not enough endorsers :0.  Sending proposal to peer1 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}. Was verified: false
        at com.cls.clsnet.fabric.wrapper.FabricWrapperImpl.ledgerTransaction(FabricWrapperImpl.java:94)
        at com.cls.clsnet.inbound.msg.serviceimpl.FabricWrapperInputServiceImpl.processInboundMessage(FabricWrapperInputServiceImpl.java:78)
        at com.cls.clsnet.task.FabricWrapperInputTask.executeTask(FabricWrapperInputTask.java:30)
        at com.cls.clsnet.executor.SingleThreadExecutor.run(SingleThreadExecutor.java:50)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
        at java.lang.Thread.run(Thread.java:745)
2017-04-21 20:31:45.049 ERROR 74358 --- [ingleThreadTask] c.c.c.t.FabricWrapperInputTask           : Exception Occured while Processing Object from Fabric Wrapper Input Queue ... java.lang.Exception: Not enough endorsers :0.  Sending proposal to peer1 failed because of gRPC failure=Status{code=UNKNOWN, description=Error executing chaincode: Could not get deployment transaction from LSCC for p2pcls:1.0 - Get ChaincodeDeploymentSpec for p2pcls/bar from LSCC error: invalid deployment spec : open /var/hyperledger/production/chaincodes/p2pcls.1.0: no such file or directory, cause=null}. Was verified: false
{quote}

We were not able to capture peer logs due to Gossip Logging. Log capture went into an irrecoverable state.",,mastersingh24,muralisr,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqs7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,muralisr,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 6:12 PM;muralisr;[~rhegde] some questions

_Peer0 is bounced thus causing user-chaincode container to stop._
how do you do bounce peer0 ? 

_Client now tries to Invoke a new Fabric Proposal request thus causing an instantiation failure of the user-chaincode_
Using terms ""invoke"" and ""instantiation failure"" for the same request is confusing
* are you doing a invoke request or an instantiation request ?
* if instantiation request, did you try to install the chaincode  ?

Assuming the steps are
* you ""bounce"" the peer
* you send an invoke transaction (without doing an install or instantiate first)

If the above is true and the ""bounce"" destroys the old container and creates a new one AND you are not persisting ledger or chaincodes by mounting the volume, then that might explain the above error.

Can you give detailed steps of what you are doing and - if you can - share the docker compose files ?;;;","24/Apr/17 3:29 AM;rhegde;how do you do bounce peer0 ? 
<< Did a docker stop <container-id>. This caused the running user chain-code container to stop. This was followed with docker start of the peer. >>

Using terms ""invoke"" and ""instantiation failure"" for the same request is confusing
<<This was a invoke and this should have resulted in the launching (loosely used in my JIRA defecet - instantiation)  of installed user-chaincode.

Since we stopped the PEER container (not docker rm) and upon docker start, this definitely gave a new container ID. My understanding this should have persisted the file-system. Is your suggestion - we mount the /var/hyperledger/production of the container?;;;","24/Apr/17 10:41 AM;muralisr;[~rhegde] yes, you should mount the container to a local system. If there are many peers using the same local system you'd obviously have different mount points for them. 

[~mastersingh24] can you provide some best practice from other envs you dealt with please ?;;;","02/Jun/17 3:35 AM;muralisr;[~rhegde] can you move this to ""Done"" if this is resolved please ?;;;","03/Jun/17 5:32 AM;rhegde;This can be marked as resolved - verified following on the release [https://chat.hyperledger.org/channel/fabric-ci?msg=8KeH9TZbB4aY5Y9Bb]after mounting the peer file-system.;;;","24/Sep/20 9:07 PM;mastersingh24;marking as a security issue due to submitter's concern around SIFMU;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update and Install operations need to clean up orphaned CC containers,FAB-3326,15918,,Story,To Do,FAB,Fabric,software,denyeart,,,Highest,,,ptippett,ptippett,22/Apr/17 6:40 AM,03/Aug/19 4:33 AM,28/Oct/23 2:59 AM,,v1.0.0-alpha1,v1.1.0,,,Future,,,fabric-peer,,,,3,HSBN,Serviceability,,,,,,"When running an update or install of chaincode, the SDK needs to clean up orphaned containers. Otherwise, old version of any instantiated chaincode stay running and it's not easy for an application/user to tell when chaincode containers can be removed.

Given this environment:

I've got 3 peers, P1, P2, P3.
 P1 and P2 are transacting on Channel1 with CCv1
 P1 and P3 are transacting on Channel2 with CCv1.

This would result in 3 instances of the CCv1 container running, 1 for each peer.

Scenario 1: 
 I make a call to P2 to install CCv2 and then update CCv2 on Channel1. CCv1 can be stopped and deleted on P2 since P2 is no longer using CCv1 on 
 any channels.

Scenario 2:

I instead make a call to install CCV2 on P1 and then update CCv1 to CCv2 on Channel1. CCv1 can't be stopped and deleted on P1 since P1 is still using
 CCv1 to transact with P3 on Channel2.

Once I've installed CCv2 on P1 and updated CCv2 on Channel1, performing just an install of CCv2 on P2 would mean that I could stop and remove 
 the CCv1 instance running on P2 since it's no longer needed.

The issue here is as currently written, the install and update operations don't ever do anything to determine if an installed or updated cc
 can be cleaned up and never cleans up orphaned containers. I believe this check and cleanup should be part of the update and install operations. It's difficult for a user or service owner to know when chaincode is no longer needed and clean up appropriately.

 ",,AshishkumarLakshmanan,baohua,binhn,ChristopherFerris,jiangyaoguo,joaquimpedrooliveira,kchristidis,mastersingh24,muralisr,ptippett,rhegde,toddinpal,troyronda,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9989,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzzu90:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,AshishkumarLakshmanan,baohua,binhn,ChristopherFerris,jiangyaoguo,joaquimpedrooliveira,kchristidis,mastersingh24,muralisr,ptippett,rhegde,toddinpal,troyronda,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/17 9:23 PM;muralisr;[~ptippett] let me think about this and update.

Also [~jiangyaoguo] FYI... wondering if you'd like to help with this ? ;;;","11/May/17 10:26 PM;jiangyaoguo;[~muralisr] Sure, I'd like to. I consider this as container GC problem.  It's more like a new feature of peer if we decide to handle this at peer side. In view of peer reboot, we can have a module to do periodic gc. Peer should expose interfaces that query channels peer belong to  and chaincodes instantiated on peer(lscc can supply chaincode infos). This is my original thoughts. Need more design.;;;","11/May/17 11:34 PM;muralisr;Thanks [~jiangyaoguo] ! Agreed.. let me suggest an addition to what you have stated above.

A simpler quick approach would be just to have a time-to-live on the chaincodes so the container manager will just stop a chaincode if its not in use for a specified period. This will take care of 80% of the problem without involving Chaincode Lifecycle operations or needing serious management.

We can layer the approach to do three things
# your GC module to use TTL on the container framework
# layer any other clean up (""this chaincode is not referenced in any LSCC"") on top
# implement start/stop Life-cycle to aid with additional management

We could implement 1 immediately to provide relief.

What do you think ?;;;","12/May/17 4:46 AM;binhn;I like TTL since it also takes care of once-a-blue-moon chaincode containers. Some chaincode only runs once in a great while (eg  fiscal quarter), so TTL would shut down these chaincodes automatically.;;;","12/May/17 11:08 PM;jiangyaoguo;Like TTL. This method makes things simple and effective. Doing detailed gc analysis from lscc is expensive operate.;;;","25/May/17 5:46 PM;yacovm;IS this for V1.0 ? or just a WIP that is for post V1?
[~muralisr];;;","25/May/17 8:49 PM;muralisr;[~yacovm] Its WIP. Release TBD.;;;","26/May/17 7:44 AM;ChristopherFerris;what is the impact if we postpone this to 1.1?;;;","26/May/17 6:36 PM;mastersingh24;[~ChristopherFerris]  - this problem really manifests itself when people are doing iterative development of chaincode - especially in cloud environments where they mess up their chaincode and decide to upgrade it to basically fix it.  My guess is that in true production environments we won't see this as often.

I tend to think we should defer this 

I also think that there is a missing option which is that when upgrading chaincode you should be able to specify if this is a side-by-side update (meaning keep multiple versions running / enabled) or a pure replace (meaning only use the new version and make the old version unavailable);;;","26/May/17 6:56 PM;yacovm;I think a workaround for now (if it will be decided not to go with this for V1.0)  is to document this and have the administrators manually kill the containers. ;;;","26/May/17 8:22 PM;muralisr;[~jiangyaoguo] what do you think ? I like the document for 1.0 with suggestion that we don't get rid of unused chaincodes after upgrade and its upto admins to get rid of them.
;;;","26/May/17 9:04 PM;jiangyaoguo;For 1.0, I agree that we can ducument it and suggest to manually kill containers.  Automatic container management need more time to design and test. We can leave it for now and pick this up after 1.0.

[~mastersingh24] Now chaincode containers are shared between different channels (if instantiate/upgrade same name and version chaincode on multiple channels,there's only one container served for these channels on peer). We can only call the latest version chaincode (client can't specify version, peer will match the latest one). So every chaincode upgrade is a pure replace from client perspective. Multiple versions chaincodes will run on one peer because different channels may instantiate/upgrade different version chaincode.;;;","26/May/17 9:20 PM;jiangyaoguo;[~ptippett] do you think if it is acceptable that we could manully kill containers for now and handle this after 1.0?  I made a WIP TTL CR in [https://gerrit.hyperledger.org/r/#/c/9711/] . you can track on this and give your advice about implement.;;;","26/May/17 9:57 PM;ptippett;I think we can leave it up to and allow customers to delete the CC containers they know they aren't using anymore.  

Once point of clarification however, it's my understanding that in order to really remove chaincode, it needs to be removed from the peer image in addition to the container being stopped and removed, right?  We could stop and remove the chaincode container and that would free up CPU/Memory and reduce the container count, but without removing files from the peer, if someone tried an operation on that chaincode, it'd attempt to spin it up again and eventually, the peer could run out of disk space, although I don't think that's a big concern.

A service admin could work around this by using docker exec to delete the chaincode files from the peer if that's all that's needed to remove the peers references to it.  Not sure that's the case though.  Is that all that's needed to completely remove chaincode?

 ;;;","01/Jun/17 2:19 AM;ChristopherFerris;So, I think that where we are with this is it is post 1.0 item. [~ptippett] I would suggest that we change this to an improvement, or maybe a story, that seeks to better address the management of chaincode (containers and the source bundle) on a peer node.;;;","01/Jun/17 2:32 AM;ptippett;yeah that's cool.  I've got an idea as well how this could be managed by a service owner that I'll send around.

 

Changed to a Story.;;;","23/Aug/17 5:04 PM;baohua;I think this feature is very important for the coming 1.1 release.

So would like to +1 on this.

Currently, both channel and chaincode lacks full life-cycle management as the following. 

Channel:
 * Leave (peer leave a channel that he joined)
 * Destroy (destroy an empty channel)

 

Chaincode:
 * Stop (Stop a running cc container)
 * Uninstantiate (Remove the cc containers from a channel)
 * Uninstall (Uninstall a cc from peer, and deregister);;;","24/Aug/17 10:54 AM;jiangyaoguo;[~baohua] About chaincode full life-cycle, we can discuss more at https://jira.hyperledger.org/browse/FAB-5781 ;;;","31/Aug/17 12:16 PM;baohua;The chaincode full life-cycle management design is initiated at [https://docs.google.com/document/d/1aSWNOuvOBzi1OzZ-b8h0IP-Qs6JL8iREXM7Jtc0VkE0,] welcome for comments!;;;","02/May/18 1:38 AM;kchristidis;Right URL for doc: https://docs.google.com/document/d/1aSWNOuvOBzi1OzZ-b8h0IP-Qs6JL8iREXM7Jtc0VkE0/edit (no comma);;;",,,,,,,,,,,,,,,,,,,,
fix ledger/util/couchdb unit test failures,FAB-3328,15920,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,22/Apr/17 6:48 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 7:38 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"
unit-tests_1  | # github.com/hyperledger/fabric/core/ledger/util/couchdb
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:54: undefined: connectURL
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:54: undefined: maxRetries
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:55: undefined: maxRetriesOnStartup
unit-tests_1  | core/ledger/util/couchdb/couchdbutil_test.go:55: undefined: requestTimeout
unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/ledger/util/couchdb [build failed]

A stale changeset got merged: https://gerrit.hyperledger.org/r/#/c/7975/
containing code that was incompatible with more recent merges.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4m7:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
set version of the chaincode in the proposal response,FAB-3329,15921,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jiangyaoguo,muralisr,muralisr,22/Apr/17 8:30 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,28/Apr/17 11:41 AM,,,,,,,,fabric-peer,,,,0,,,,,,,,"As part of the upgrade task (FAB-183) we need to check if the version of the chaincode matches the version in LSCC for the transaction. To this end every endorsed proposal response shoud contain the version of the chaincode.

Note that we could have used the Version field in the ChaincodeID in the Proposal and insisted user sets that version. Given we only support the ""latest"" version, the current model of user needs to only set the chaincode name. Requiring a version in proposal reeks of implementation leakage.",,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3334,,,,,,,,,,,,,,,,,,,,,,,,FAB-198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4tr:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/17 1:21 AM;binhn;[~muralisr] Please elaborate on this issue. Are we saying that the proposal shouldn't require the cc version? And that we should use the latest version from LSCC bc we only support 1 version at a time per channel?

If so, this is code clean up, or you could say usability bug.;;;","25/Apr/17 2:27 PM;muralisr;[~binhn] this is part of the upgrade work (or bug as it blocks the FAB-198 which is a bug). As mentioned in FAB-198, the endorser will set chaincode version and the committer will validate the version in the proposal response against the version in LSCC for the chaincode for the channel.

The Proposal already has a ChaincodeID so we *could* just have a Version field in the ProposalResponse's ChaincodeAction. However we use ChaincodeID as it contains more information and can be used for other purposes in future (we may have a ChaincodeAction for each CC-2-CC call in the request). 

Also moved this to a Bug as its a task for bug FAB-198;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
check version of chaincode against version in LSCC,FAB-3330,15922,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,jiangyaoguo,muralisr,muralisr,22/Apr/17 8:44 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/May/17 10:12 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"this is the complement of fab-3329 where the version in the proposal response is checked against the version the LSCC.

So this guards against the following scenario

The following transactions are issued to the endorsers
* TX1, ....TX15 on chaincode CC:v0/mychannel
* TXUpgrade to CC:v1/mychannel

The following blocks are validated on the committers
* TX1-TX8 and TXUpgrade in Block-11 , TX1-TX8 get rejected and TXUpgrade gets committed 
* TX9-TX15 in Block-12 get validated
** TX9-TX12 use the KV pairs that were touched by the Init method of TXUpgrade and will get invalidated by ledger validation
** TX13-TX15 do not use KV pairs touched by TXUpgrade and would pass ledger validation

By checking for Chaincode Version set by the endorser in the Proposal response (FAB-3329) , TX13-TX15 will be invalidated. Note that TX9-TX12 will also get invalidated by this same method which is a good thing (consistency and early weed-out of invalid TXs).

",,binhn,Clayton Sims,muralisr,smartheye,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3334,,,,,,,,,,,,,,,,,,,,,,,,FAB-198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqsf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,Clayton Sims,muralisr,smartheye,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/17 12:10 AM;Clayton Sims;Sprint 16 should be our final sprint.   We want to feature freeze.    I see you just created (2 days ago)  this Jira and it references 3329 (also create 2 days ago).    Can we defer these.   If you think these can;t be deferred please talk to [~binhn] or [~mastersingh24]. 

Maintainers are now cross referencing CRs to Jira items. ;;;","25/Apr/17 1:29 AM;binhn;I would consider this as a bug because the current implementation of cc upgrade doesn't work in the scenario you described.;;;","25/Apr/17 2:18 PM;muralisr;[~Clayton Sims] [~binhn] this is a task for fixing part of bug FAB-198 (blocks it) which in turn is needed for FAB-183. So treating this as a bug is fine.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix inc_number in gossip peerTime message,FAB-3333,15925,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,22/Apr/17 12:35 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,08/May/17 3:33 AM,,,,,v1.0.0,,,fabric-gossip,,,,0,,,,,,,,"Existing proto msg is defined as:

// PeerTime defines the logical time of a peer's life
message PeerTime {
    uint64 inc_number = 1;
    uint64 seq_num    = 2;
}

We suggest change inc_number to inc_num, to keep aligned with the seq_num, which would make the code more clear and easy to follow.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqsv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 12:40 PM;baohua;Patchset is submitted to http://gerrit.hyperledger.org/r/8405.

Welcome for review, thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ChaincodeID to ChaincodeAction,FAB-3334,15926,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jiangyaoguo,jiangyaoguo,jiangyaoguo,22/Apr/17 1:29 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,22/Apr/17 7:09 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"As talking in https://jira.hyperledger.org/browse/FAB-198, when upgrading chaincode, we need get chaincode version of transaction. Endorser will return it in proposalResponse and committer will utilize it to check expired transactions. 

We have 2 ways to get it :
1. Add version field to ChaincodeAction
2. Add ChaincodeID(contains name/version/path) to ChaincodeAction

today, when transaction do CC1 -> CC2 -> CC3 -> CC4, we have only one ChaincodeAction of CC1, which means we ignore all the other data from CC2, CC3 CC4 (Response, chaincode event, etc. If in future we want to add a chain of ChaincodeAction, we need ChaincodeID in ChaincodeAction.
So we'd better add ChaincodeID, and the name in ChaincodeID from the Proposal should match ChaincodeAction.ChaincodeID.Name",,jiangyaoguo,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3329,FAB-3330,FAB-198,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqt3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jiangyaoguo,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/Apr/17 2:04 PM;muralisr;[~jiangyaoguo] Thanks for creating this. Agree that having chaincodeID in ChaincodeAction is has some interesting possibilities. If we are ever going to use just one ChaincodeAction then the duplication is not that valuable (but no harm done) On the other hand it opens up the possibilty of multiple chaincodes per TX.

Also, even with a single Chaincode we can check if ChaincodeAction.ChaincodeID.Name == ChaincodeHeaderExtension.ChaincodeID.Name

[~binhn] [~mastersingh24];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip pull may send zero-length digests,FAB-3335,15927,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,22/Apr/17 7:08 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 5:02 AM,v1.0.0,,,,v1.0.0,,,fabric-gossip,,,,0,gossip,,,,,,,"The bug was introduced in a [recent commit | https://gerrit.hyperledger.org/r/#/c/8077/12/gossip/gossip/algo/pull.go@299] that added filtering capability.

Basically when the gossip puller gets a hello from a peer, it iterates over the items it has, and applies a filter on each of them.
If the filter doesn't permit, it skips to the next iteration, but the returned slice then contains an ""empty-string"" digest in the response to the remote peer.

This bug blocks me from fixing https://gerrit.hyperledger.org/r/#/c/8081/ 's test, so I shall upload a fix now.
",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxqtb:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deploying Fabric In Real World Architecture and Topologies,FAB-3336,15928,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,mastersingh24,mastersingh24,22/Apr/17 7:44 PM,23/Jan/20 4:07 AM,28/Oct/23 2:59 AM,23/Jan/20 4:07 AM,,,,,Future,,,,,,,12,stale-item,,,,,,,"As the Fabric project matures, more and more people will want to understand how to setup Fabric in real world environments.  The current getting started and samples are all based on running a setup locally and/or on single machine.  

Examples:

1) How to deploy Fabric on multiple machines?
2) What orchestration / deployment tools are recommended?
3) Is their any documentation for production deployment",,AshishkumarLakshmanan,asuchit,baohua,daijianw,DaVi,Exci,gba,gloriow,greg.haskins,joaquimpedrooliveira,knagware9,mastersingh24,mgk,mihaig,pdina,qiang0723,RashitKh,suryalnvs,sykesm,TiantianGao,Vishal3152,vjuge,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/17 6:06 AM;DaVi;hyperledger topology v0.2.pdf;https://jira.hyperledger.org/secure/attachment/10677/hyperledger+topology+v0.2.pdf",,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-3,,Real World Deployment Topologies,To Do,,,Unset,,,,"1|hzxqtj:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,AshishkumarLakshmanan,asuchit,baohua,daijianw,DaVi,Exci,gba,gloriow,greg.haskins,joaquimpedrooliveira,knagware9,mastersingh24,mgk,mihaig,pdina,qiang0723,RashitKh,suryalnvs,sykesm,TiantianGao,Vishal3152,vjuge,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/17 9:43 PM;baohua;Since the nodes are connected over IP, it should be not difficult in technique to provide cross zone/dc fabric network connectivity. Actually, [Cello](https://wiki.hyperledger.org/projects/cello) already supports multi-host deployment of fabric with Swarm as the underly infrastructure (with Swarm supported the overlay connectivity).

I think the key concerns may include:

1: What specific requirement for different node type configuration, e.g., for endorser or orderer, the hardware resources are various;
2: What specific requirement for the network configuration, e.g., to secure with VPN connection;
3: Best-practices in the deployment procedure.

Technical Working Group China has already started collecting and drafting the spec to guide the deployment and operations, I think it's good timing to start the deploying discussion in global community, and share those experience together.;;;","23/Apr/17 6:06 AM;DaVi;Objective:

Get a set of different hosts (machines, VMs ,...) owned by different clients or entities . Over this ""network"" of machines ,each client/entity will be able to deploy its own blockchain(s) and make then available to their own customers. 

Current idea:

set all the hosts in a docker swarm cluster . Each host joins as a ""manager (so that each client/host owner can create its own network(s) over swarm. 
Each client/entity has on it swarm manager node its own repository of blockchain code and can start a blockchain that will be distributed across all the hosts in the swarm cluster (or a definable subset of hosts)  using a docker-compose yaml file where it will be possible to either assign manually the different containers/roles (like by example have CA on its own host, orderer on identified host ,and peers automatically distributed) or let docker distribute the container across the hosts depending on the load/affinity definition ... 

current attempts :

I'm trying to modify the docker-compose yaml file of the getting-started example to achieve a multi-host deployment . I'm encountering dificulties in 2 areas: 

- first ,I'm not really familiar with docker swarm and related compose files (this is why I'm looking for tutorial or example) 
-as soon swarm network is created , the level of the compose-files must be set to 3 ...and by exemple , extends are not supported in V3 ... so a lot of modification are needed in the docker-compose.yaml file.Docker-compose itself does not seems to be yet able to handle a swarm setup ... 

currently I can deploy services on the different hosts but they do not start because they do not communicate with each others .. (bad docker configs on my side , but I'm still trying to discover what parameters I should add/modify for this multi-hosts setup) 

suggestion : 

of course it would be so nice to have all that managed through cello without having to learn docker  :-) 

I""m attaching a short pdf trying to illustrate what I try to push forward. ;;;","23/Jan/20 4:07 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a Fabric user, I'd like to be able to set up real world deployment topologies",FAB-3337,15929,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,mastersingh24,mastersingh24,22/Apr/17 7:49 PM,30/Jul/19 11:41 AM,28/Oct/23 2:59 AM,30/Jul/19 11:41 AM,,,,,Future,,,fabric-quality,fabric-samples,,,6,,,,,,,,"The current getting started is focused on using Docker Compose on a local machine or single remote node.  While this is great for testing and development of chaincode and applications, it does not mimic real world multi-host deployments.

Users would like to be able to quickly mimic a real world setup and have sample topologies, deployment scripts and documentation to create more realistic sandbox environments.",,AshishkumarLakshmanan,asuchit,Deepakbyrappa,guoger,kit,knagware9,mastersingh24,suryalnvs,Urko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-1431,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3336,,,,,,,,,"1|hzx2qf:",,,,Unset,,Sprint 19 - Quality,,,,,,,,,,,,4.0,Unset,,,,,,,,,,,AshishkumarLakshmanan,asuchit,Deepakbyrappa,guoger,kit,knagware9,mastersingh24,suryalnvs,Urko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jul/17 3:19 PM;Urko;Instead of Docker Swarm Mode, it would be posibble to change the configuration of the network_mode in the Docker configuracion files (docker-compose.yaml file and peer-base.yaml file). There, you define how is going to be your network and the drivers.

If you define the following variables, it start :
 * The property {{_network_mode: host_,}} for each container
 * _{{- CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=host}}_

You should define a docker-compose file for each node that you are goint to put up.;;;","30/Jul/19 11:41 AM;mastersingh24;Open 1 year or more with no activity ... time to cleanup;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a sample deployment and topology for Docker Swarm Mode,FAB-3338,15930,15929,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,mastersingh24,mastersingh24,22/Apr/17 7:52 PM,29/Oct/18 9:57 PM,28/Oct/23 2:59 AM,29/Oct/18 9:57 PM,,,,,Future,,,fabric-quality,,,,3,,,,,,,,"Docker 1.13+ has a built-in multi-host orchestration engine called ""Swarm Mode""

This task is to provide the relevant artifacts and documentation to help create a sandbox topology using Docker Swarm",,asuchit,baohua,bmos299,chaozh 1,daijianw,davidkhala,gloriow,harsha544,mastersingh24,mgk,mihaig,qiang0723,rmohta,sanchezl,Senthil1,suryalnvs,ume0202,vu3mmg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/May/17 2:31 AM;bmos299;SVT.txt;https://jira.hyperledger.org/secure/attachment/10691/SVT.txt","29/Apr/17 12:08 AM;bmos299;dockerswarm_svt.JPG;https://jira.hyperledger.org/secure/attachment/10687/dockerswarm_svt.JPG","08/May/17 10:53 PM;suryalnvs;multihost_launcher.txt;https://jira.hyperledger.org/secure/attachment/10802/multihost_launcher.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqtz:",,,,,,Sprint 19 - Quality,,,,,,,,,,,,2.0,,,,,,,,,,,,asuchit,baohua,bmos299,chaozh 1,daijianw,davidkhala,gloriow,harsha544,mastersingh24,mgk,mihaig,qiang0723,rmohta,sanchezl,Senthil1,suryalnvs,ume0202,vu3mmg,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/17 3:47 AM;suryalnvs;I am launching orderer, peer1(1st org) and peer2(2nd org) each on different vlaunch hosts using docker swarm mode (docker 1.17ce) with crypto material I generated once and distributed to each host. Once we ensure they are all set up correctly, we will be running e2e against the network. Next step is to provide instructions for others to repeat. Would that satisfy this jira issue?;;;","29/Apr/17 12:09 AM;bmos299;The deployment we plan to implement.;;;","30/Apr/17 11:07 PM;vu3mmg;Could you please give some hints about the parameters to be modified for  pointing to the network and peers.
for example CORE_PEER_GOSSIP_BOOTSTRAP and parameters in https://github.com/hyperledger/fabric/blob/master/sampleconfig/core.yaml  .
I got confused with many of the parameters .
I wanted to try this manually  using exisitng docker files and  running two peers of separate networks/hosts .

Thank you ;;;","02/May/17 2:30 AM;bmos299;This is the early stages and we are taking baby steps.   The scaling topology has been updated and included.  The startup options, at this time, will be how long you want this environment to run.;;;","03/May/17 10:13 PM;Senthil1;[~suryalnvs] [~bmos299]
Can we get the early stage scripts so that we can continue with our performance study?;;;","08/May/17 10:57 PM;suryalnvs;[~Senthil1] Here is the update in using multihost environment with 1.0 alpha images, 4 orderers, 5 kafka brokers, 1 zookeeper, 2 organizations with 2 peers in each (no tls). I am able to run end-to-end scenario successfully.

Need to modify Node name and IP address section in this script [^multihost_launcher.txt];;;","08/May/17 11:44 PM;Senthil1;[~suryalnvs] Thank you.. We can modify the script as needed. ;;;","12/May/17 6:11 PM;gloriow;[~suryalnvs] Actually, I think that the --mount label should also be modified, as I'm using ~/go/ directory to store the msp files.;;;","27/Sep/17 3:24 PM;davidkhala;In my project, I did

distributes crypto-material and channel,block file to other machine

build up local volume holding above files on each machine separately.

instead of docker-compose up, i created a overlay network and 'docker stack up' on this network

Since I did to set constraints on service yet. most service running at current machine. 

then I run an e2e test, and encountered error in instantiate chaincode
{code:java}
{""message"":""Could not attach to network myNetwork: rpc error: code = 7 desc = network myNetwork not manually attachable""}{code};;;","28/Sep/17 7:24 PM;mastersingh24;[~davidkhala] - So the issue is that by default, overlay networks created when using Swarm mode do not allow non-Swarm containers to join the network.  You can use the *--attachable* property when using the *network create* command or you can set this in your compose file:


{noformat}
networks:
  mynetwork:
    driver: overlay
    attachable: true
{noformat}
;;;","29/Sep/17 12:46 AM;sanchezl;Is the goal of this JIRA to run the the services as scalable tasks (for example, define the {{peer}} task, which can then be instantiated {{x}} times on the swarm)?

The comments and attachments so far do not indicate this, but I am asking to clarify, as that is one of the major features of using swarm mode. It seems that we are happy with creating (for example) specific peer tasks (e.g. {{peer1}} , {{peer2}}, {{peer3}}, etc.. ) that are only instantiated only once and hence are never actually scaled automatically by the swarm.;;;","29/Sep/17 11:14 AM;baohua;Hyperledger Cello already supports running fabric network on top of swarm: 

github.com/hyperledger/cello.

May help in this place.;;;","29/Sep/17 7:31 PM;davidkhala;[~mastersingh24] thanks for your comment and it does help.

Now my project works as running fabric in swarm mode.

most significant difference is about docker volume, in swarm mode, I take efforts on how to share,distributes crypto-material(MSP, key, cert file) and genesis block files

Finally I use NFS server-client structure, manually create local volume in each nfs-client machine with same name and same content (take mount folder in client machine as content) to support docker service everywhere.;;;","30/Sep/17 5:51 AM;mastersingh24;[~davidkhala] - Is there something you can contribute back to the project?;;;","30/Sep/17 10:52 AM;davidkhala;[~mastersingh24]Yes, I am wondering whether I could share some critical but anonymous of my project to fabric-samples. 
But before that interested people can refer to my repository https://github.com/davidkhala/delphi-fabric 
Email david-khala@hotmail.com if there is problem
;;;","01/Oct/17 10:33 PM;mastersingh24;[~davidkhala] I'll try to take a look this week and make some suggestions on what we can do;;;","29/Oct/18 9:57 PM;mastersingh24;Kubernetes seems to be the generally accepted orchestration approach supported by all vendors (including Docker) there days so no need to do Swarm;;;",,,,,,,,,,,,,,,,,,,,,,,
Provide a sample deployment and topology for Kubernetes,FAB-3339,15931,15929,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Highest,,chawlanikhil24,mastersingh24,mastersingh24,22/Apr/17 7:54 PM,13/Jun/19 6:05 PM,28/Oct/23 2:59 AM,,,,,,Future,,,,,,,8,,,,,,,,"Kubernetes is a very popular Docker / container orchestration tool used by many cloud providers as well as by a growing number of companies as well.

Users would like to be able to quickly mimic a real world setup and have sample topologies, deployment scripts and documentation to create more realistic sandbox and production environments",,alexvicegrab,aproesta,baohua,cagdast,chawlanikhil24,daijianw,Deepakbyrappa,greg.haskins,harsha544,kit,knagware9,mastersingh24,mattpuccini,mirioeggmann,mplisov,nramesh,pchaivong,pdina,qiang0723,raft 3,remmeier,shanlusun,tatsu-sato,tongliofcary,Udossohn,Vishal3152,xixuejia,yopep,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,CE-7,,,FAB-7406,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxquf:",,,,,,Sprint 19 - Quality,,,,,,,,,,,,2.0,,,,,,,,,,,,alexvicegrab,aproesta,baohua,cagdast,chawlanikhil24,daijianw,Deepakbyrappa,greg.haskins,harsha544,kit,knagware9,mastersingh24,mattpuccini,mirioeggmann,mplisov,nramesh,pchaivong,pdina,qiang0723,raft 3,remmeier,shanlusun,tatsu-sato,tongliofcary,Udossohn,Vishal3152,xixuejia,yopep,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jun/17 11:39 AM;baohua;Great, and this feature can strongly support https://jira.hyperledger.org/browse/CE-7.;;;","08/Jun/17 10:03 PM;chawlanikhil24;I've begun work on this issue and the initial step I am following so to convert these [compose files |https://github.com/hyperledger/cello/tree/master/src/agent/docker/_compose_files] to Kubernetes manifests and use these manifests to run fabric on top of Kubernetes. 

I am using Kompose for now , for the conversion of current docker compose files. 

Any other suggestions ?;;;","08/Jun/17 10:42 PM;baohua;I suppose the template file is not very large.

We can first put the converted files under agent/k8s and keep it updated.;;;","09/Jun/17 1:07 AM;chawlanikhil24;Sure! I'll update with successfully generated manifests in the folder you mentioned.;;;","29/Jun/17 2:34 PM;chawlanikhil24;Kubernetes Manifests for Fabric 0.6 and Fabric 1.0 has been developed and can be found [here|https://github.com/chawlanikhil24/hyperledger-fabric-k8s] . There are some issues which are still needed to be debugged.;;;","04/Jul/17 5:02 PM;chawlanikhil24;People! Need your reviews over [this|https://jira.hyperledger.org/projects/CE/issues/CE-7?filter=allopenissues] issue, this might create some troubles in future, please do come forward with your opinions and ideas.;;;","07/Jul/17 4:24 PM;chawlanikhil24;https://gerrit.hyperledger.org/r/#/c/11433/;;;","17/Jul/17 10:59 PM;tongliofcary;My assessement is that fabric will probably not work on k8s due to how chaincode container gets created. If I understand this correctly, chaincode container gets created by peer container using docker APIs. which will create a bare container in k8s env, that bare container will never be managed by k8s, it won't know anything about other k8s services, kube-proxy probably will not route correctly with anything else put into k8s pods. Unless fabric peer is configured to create chaincode container in a pod via k8s APIs.;;;","18/Jul/17 4:14 AM;greg.haskins;[~tongliofcary]  It does actually work, believe it or not.  It's just that the container is not visible/managed by k8s (its managed by the peer).  The fact is, the chaincode container doesn't need any services except for the ability to find the peer's TLS endpoint.  There are a few tricks you can do to help the peer surface the endpoint in a way in which it is conducive to k8s dynamic IP, etc, but it does work.;;;","18/Jul/17 2:30 PM;chawlanikhil24;[~greg.haskins] , can you refer any link on net for this ? Any sort of blog,tutorial or anything. K8s managing container. ;;;","18/Jul/17 10:02 PM;tongliofcary;Greg, thanks for your quick response. I think I am missing this ""the chaincode container doesn't need any services except for the ability to find the peer's TLS endpoint"", I could not really find any document on how this is actually done, starting within a tools container with only peer and orderer container info, then a new chaincode container gets created, this whole process is a mystery to me. Let's assume that the chaincode container gets created one way or the other, how does it communicate with anybody else once it is born? Your pointer to any doc or direct comment will be really appreciated. Thanks.;;;","18/Jul/17 10:30 PM;baohua;[~greg.haskins]

The key here is that fabric currently uses the docker API to boot up cc container. Hence we still need the docker service even with the k8s cluster.

After bootup, the cc container can connect to peer with appropriate address (e.g., if it knows the service ip of the corresponding peer node).;;;","18/Jul/17 10:37 PM;greg.haskins;[~tongliofcary] you can think of the peer as an application platform like tomcat in a way.  Like tomcat, it can take an application payload (chaincode in this case) and then run that application in a way that it has endpoints surfaced to network clients.  When you launch a chaincode application, it is never just this free-standing thing...its managed by the peer.  The peer compiles, launches, and maintains a connection to the chaincode for its entire lifecycle.  Access to the chaincode from clients always goes through the peer.

As such, operationally, the only thing that the chaincode needs is a connection back to the peer.  This is handled transparently to the application code by the shim library.  Under the covers, the shim library opens a TLS connection back to the peer, and all flows between clients and the application tunnel through this connection.

Therefore, the peer only needs a way to control the building/running of docker containers, and the chaincode only needs a TLS connection back to the peer.  We solve the former by using things like making the peer pod privleged (so that it has permission to connect to /var/lib/docker.sock and to create containers, etc).  We solve the latter by using a few environment variables that allow the peer to surface its TLS endpoint to the chaincode in a k8s friendly way.  Otherwise, that is all that is needed to get a basic environment running.

In the longer term, I would like to see formal support for k8s. What this might mean is that the chaincode containers are no longer ""invisible"" to k8s but the peer drives them explicitly through the k8s pod-creation APIs. Etc.

Hope that helps.;;;","18/Jul/17 10:47 PM;greg.haskins;[~baohua] Yes, I understand this.  What I was responding to what the comment that ""fabric will probably not work on k8s"".  That isn't true.  It will work, albeit in a slightly awkward/less-than-ideal way.  Longer term, I hope to make it work in a better integrated way, but we aren't there yet.;;;","18/Jul/17 10:51 PM;baohua;[~greg.haskins]

yeap, then the point is clear here.

 

[~chawlanikhil24] i guess we can start with some workaround solution, as greg suggested. first, let fabric run atop k8s, then make it better with the service discovery support. How do u think?;;;","18/Jul/17 11:15 PM;chawlanikhil24;Thanks a lot [~greg.haskins] , you really shared a lot of useful material . 

+*We solve the former by using things like making the peer pod privleged (so that it has permission to connect to /var/lib/docker.sock and to create containers, etc). ,*+ as said by you, is somewhat similar to what i was thinking, since, you mentioned it, So, I'll experiment first that, *a pod creating a container ,* like , nginx container running inside of K8s pod, is enough to solve our current issue or not. Although It looks fine to me, rest is on the machine.

[~baohua] , I am feeling like a mad scientist ;), I should better start with what Greg said ! 

[~tongliofcary] remember, it is almost the same we discussed on rocket-chat ?

 ;;;","19/Jul/17 12:02 AM;tongliofcary;[~greg.haskins] thanks for your information, I will try to follow your sugguestions and make it working. will report back after. Now on this statement ""The peer compiles, launches, and maintains a connection to the chaincode for its entire lifecycle.  Access to the chaincode from clients always goes through the peer."", what happens when connection between chaincode and peer breaks, how does chaincode finds its peer or the other way around? Will chaincode container simply ends its life cycle, peer will launch a new one? I feel like this topic needs a little section in the formal fabric document if there is none currently.;;;","16/Aug/17 9:47 PM;chawlanikhil24;https://gerrit.hyperledger.org/r/#/c/12389/;;;","13/Oct/17 3:39 AM;knagware9;Hi All,

 

I setup fabric1.0 setup on Kubernetes,please use below git lib

https://github.com/knagware9/ibm-container-service;;;","13/Oct/17 4:30 AM;tongliofcary;Cello ansible agent already supports setting up fabric network on k8s. It actually also sets up k8s. Please see cello/src/agent/ansible readme files.;;;","13/Apr/18 5:09 PM;remmeier;it would be good to have Helm examples available to setup and upgrade fabric in kubernetes. Helm seems to become the defacto standard how to do packaging and deployment in Kubernetes (and does a very good job at that).

The involved Kubernetes yaml files should then also provide liveness/readiness checks. 

Such a setup could also provide an alternative to the current docker compose setup. Personally I don't like Docker compose much. It is good for development, but unsuited for production. And these makes it a bit cumbersome to hand out to developers. Development and production setups should be aligned. With minikube there is the tooling similar to docker compose to run everything locally.

Then there are also issues like  this here: [https://medium.com/kokster/simpler-setup-for-hyperledger-fabric-on-kubernetes-using-docker-in-docker-8346f70fbe80.] Fabric should really become a first class citizen in Kubernetes. The outlined solution there seems quite reasonable. A fairly big no-go is having to modify the underlying docker hosts to be able to run fabric. That is something people are able to do when running kubernetes locally, but rather not when going with managed Kubernetes services by Cloud providers. 

To some degree I have the feeling the Kubernetes setup clashes a bit with Cello. At least there seems to a partial overlap. All major cloud providers now supporting managed kubernetes. And there is tooling like Hashicorp Terraform. Potentially cello shifts it focus a bit more on managing a running cluster and let a kubernetes stack do its thing below.;;;","22/Feb/19 9:45 PM;alexvicegrab;There are Helm charts and basic examples:

https://hub.kubeapps.com/charts?q=hyperledger

https://github.com/aidtechnology/hgf-k8s-workshop

https://github.com/aidtechnology/lf-k8s-hlf-webinar

https://hgf18.sched.com/event/G9QX/deploying-hyperledger-fabric-with-kuberneteshelm-alejandro-sasha-vicente-grabovetsky-nicola-paoli-aidtech

Full disclosure: I am author of all :);;;","12/Jun/19 7:14 PM;raft 3;Dear all, 

We had recently opened the source code of our work for running and operating HL Fabric in Kubernetes and announced at Fabric mail list. Adding here as a comment for those who are not following the mail list.

[https://github.com/APGGroeiFabriek/PIVT]

This repository contains a couple of Helm charts to:
 * Configure and launch the whole HL Fabric network, either:
 ** A simple one, one peer per organization and Solo orderer
 ** Or scaled up one, multiple peers per organization and Kafka orderer
 ** Raft orderer is WIP
 * Populate the network:
 ** Create the channels, join peers to channels, update channels for Anchor peers
 ** Install/Instantiate all chaincodes, or some of them, or upgrade them to newer version
 * Backup and restore the state of whole network

As mentioned in the repository and also in the mail list, we strongly encourage the HL Fabric community to take ownership of this repository, extend it for further use cases, use it as a test bed and adapt it to the Fabric provided samples to get rid of endless Docker Compose files and Bash scripts.

Cheers,
_Hakan (r a f t)_;;;","13/Jun/19 6:05 PM;baohua;Nice work, and that could be integrated into Cello's k8s agent:

https://wiki.hyperledger.org/display/cello/Hyperledger+Cello;;;",,,,,,,,,,,,,,,,
README's link to CONTRIBUTING doc is broken,FAB-3340,15932,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,lehors,lehors,lehors,22/Apr/17 9:13 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 3:05 AM,,,,,v1.0.0,,,fabric-docs,,,,0,Documentation,,,,,,,The reference to CONTRIBUTING in the README still points to the old location and now leads to a 404.,,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqun:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move errors package from fabric/core to fabric/common,FAB-3341,15933,15565,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,22/Apr/17 10:22 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 4:02 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,The error handling package should be moved from fabric/core to fabric/common so that it can be utilized not just by the peer but also by the orderer. ,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxquv:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Vagrant fails to launch on Windows using vagrant 1.9.3 (the latest),FAB-3342,15934,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,lehors,lehors,lehors,22/Apr/17 10:58 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 3:16 AM,,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,"Unfortunately the latest release of vagrant on Windows has a bug that prevents the environment to successfully launch:

$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Checking if box 'hyperledger/fabric-baseimage' is up to date...
==> default: Clearing any previously set forwarded ports...
C:/HashiCorp/Vagrant/embedded/gems/gems/vagrant-1.9.3/lib/vagrant/util/is_port_open.rb:21:in `initialize': The requested address is not valid in its context. - connect(2) for ""0.0.0.0"" port 7050 (Errno::EADDRNOTAVAIL)
from C:/HashiCorp/Vagrant/embedded/gems/gems/vagrant-1.9.3/lib/vagrant/util/is_port_open.rb:21:in `new'
...

This is a known bug with a workaround, see [http://stackoverflow.com/questions/43032321/hyperledger-fabric-end-to-end-flow-vagrant-up-in-devenv-fails]",,lehors,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqv3:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,lehors,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 3:16 AM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8025/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NodeSDK - decode transaction readwrite sets,FAB-3343,15935,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,harrisob@us.ibm.com,harrisob@us.ibm.com,23/Apr/17 5:43 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 2:07 AM,,,,,DUPLICATE,,,,,,,0,,,,,,,,"Pull in new proto files to support the decode of this new area of the transaction. 
Update Chain class to now decode transactions along with the readwrite sets.",,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-610,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqvb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix CSCC error messages reporting. ,FAB-3344,15936,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,23/Apr/17 6:29 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,23/Apr/17 7:48 PM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"After ACL check has been added to CSCC, there are few places with incorrect logging messages, which need to be fixed.

The body of *Invoke* method:
{code}
	args := stub.GetArgs()

	if len(args) < 1 {
		return shim.Error(fmt.Sprintf(""Incorrect number of arguments, %d"", len(args)))
	}

	fname := string(args[0])

	if fname != GetChannels && len(args) < 2 {
		return shim.Error(fmt.Sprintf(""Incorrect number of arguments, %d"", len(args)))
	}

	cnflogger.Debugf(""Invoke function: %s"", fname)

	// Handle ACL:
	// 1. get the signed proposal
	sp, err := stub.GetSignedProposal()
	if err != nil {
		return shim.Error(fmt.Sprintf(""Failed getting signed proposal from stub: [%s]"", err))
	}

	switch fname {
	case JoinChain:
		// 2. check local MSP Admins policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Admins, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""JoinChain\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}

		return joinChain(args[1])
	case GetConfigBlock:
		// 2. check the channel reader policy
		if err = e.policyChecker.CheckPolicy(string(args[1]), policies.ChannelApplicationReaders, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""GetConfigBlock\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}
		return getConfigBlock(args[1])
	case UpdateConfigBlock:
		// TODO: It needs to be clarified if this is a function invoked by a proposal or not.
		// The issue is the following: ChannelApplicationAdmins might require multiple signatures
		// but currently a proposal can be signed by a signle entity only. Therefore, the ChannelApplicationAdmins policy
		// will be never satisfied.

		return updateConfigBlock(args[1])
	case GetChannels:
		// 2. check local MSP Members policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Members, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""GetChannels\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}

		return getChannels()

	}
	return shim.Error(fmt.Sprintf(""Requested function %s not found."", fname))
{code}

So based on the invoke API *JoinChannel* and *UpdateConfigBlock* calls receives as a parameter genesis block and configuration update block respectively. Therefore:

{code}
	case JoinChain:
		// 2. check local MSP Admins policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Admins, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""JoinChain\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}
		return joinChain(args[1])
{code}

In particular:

{code}
shim.Error(fmt.Sprintf(""\""JoinChain\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
{code}

Will print the content of the genesis block rather the channel id. 

Next, the code 
{code}
	case GetChannels:
		// 2. check local MSP Members policy
		if err = e.policyChecker.CheckPolicyNoChannel(mgmt.Members, sp); err != nil {
			return shim.Error(fmt.Sprintf(""\""GetChannels\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
		}

		return getChannels()

	}
{code}

Call to the *GetChannels*  doesn't receives any input parameters, therefore 

{code}
shim.Error(fmt.Sprintf(""\""GetChannels\"" request failed authorization check for channel [%s]: [%s]"", args[1], err))
{code}

Will end up with panic, since no {{arg[1]}} is provided.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqvj:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Issue with starting chaincode - after deploy,FAB-3346,15939,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,Amjadnz,Amjadnz,23/Apr/17 3:20 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,29/Apr/17 6:21 PM,,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,"{code:java}
2017-04-22 11:37:07.177 UTC [msp] Sign -> DEBU 006 Sign: plaintext: 0A8B050A5508032205616A3030352A40...304D53500A04657363630A0476736363 
2017-04-22 11:37:07.177 UTC [msp] Sign -> DEBU 007 Sign: digest: C0955F453C7309BFB4096941118E7F28B3901A655C2E08C6365D36027EF3388B 
Error: Error endorsing chaincode: rpc error: code = 2 desc = Timeout expired while starting chaincode aj005:1.0(networkid:dev,peerid:peer0,tx:3edd80708ea8ed61285933575b094356a743d142c6431ef8445f9120d932d136)
{code}

Following the steps as mentioned in the getting started guide:
# Step 1: Create new channel with TX and BLOCK files (as per the getting started on fabric site)
# Step 2: Create a new channel at the start up by pasing the channel name
	CHANNEL_NAME=aj005 docker-compose -f ./docker-compose.yaml up -d
# Step 3: Create a new network of peers using docker-compose.yaml
##*	this creates 4 Peers Peer 0, Peer 1 for (ORG0) and Peer 2 and Peer 3 (for ORG1)
##*	1 Orderer
##*	4 Couch DB State DBs
##*	1 Fabric CA
##*	1 Cli
# Step 4: All start up fine and I login to CLI (as per the fabric site)
# Step 5: Create channels again within CLI (by passing peer0 to peer3) - All looks fine.
# Step 6: Join the channels - all is fine here too (no errors)
# Step 7: Deploy the chaincode - all fine here too (no errors)
# Step 8: Initialize the chain code - here is where the things breaks and cannot get hte container up and running.

My ""docker images"" output:

{code:java}
REPOSITORY                     TAG                  IMAGE ID            CREATED             SIZE
dev-peer0-aj005-1.0            latest               ca2bae4d3179        3 hours ago         176 MB
dev-peer0-aj004-1.0            latest               e6773217c7e4        4 hours ago         176 MB
dev-peer0-aj002-1.0            latest               f3e828838f17        2 days ago          176 MB
{code}

So my chaincode is getting deployed by not getting initiated.

Command used to initiate:
{code:java}
CORE_PEER_ADDRESS=peer0:7051 peer chaincode instantiate -o orderer0:7050 --tls false --cafile $GOPATH/src/github.com/hyperledger/fabric/peer/crypto/orderer/localMspConfig/cacerts/ordererOrg0.pem -C aj005 -n aj005 -v 1.0 -p tts/sc/user05 -c '{""Args"":[""init""]}' -P ""OR ('Org0MSP.member','Org1MSP.member')""
{code}

Now tried with the script as well that is shipped with the getting started pack.
{code:java}
2017-04-23 10:36:00.203 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-04-23 10:36:00.213 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-04-23 10:36:00.213 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-04-23 10:36:00.213 UTC [golang-platform] collectChaincodeFiles -> DEBU 004 not using input for hash computation for path:""tts/sc/user05"" name:""aj009"" version:""1.0""  
2017-04-23 10:36:00.213 UTC [golang-platform] getCodeFromFS -> DEBU 005 getCodeFromFS tts/sc/user05
2017-04-23 10:36:00.213 UTC [util] HashFilesInDir -> DEBU 006 hashFiles /opt/gopath/src/tts/sc/user05
2017-04-23 10:36:00.214 UTC [golang-platform] writeGopathSrc -> INFO 007 rootDirectory = /opt/gopath/src
2017-04-23 10:36:00.214 UTC [container] WriteFolderToTarPackage -> INFO 008 rootDirectory = /opt/gopath/src
2017-04-23 10:36:00.216 UTC [msp] Sign -> DEBU 009 Sign: plaintext: 0A84050A4E08032A4062316462333934...C13EFF370000FFFF7AA0F75500800000 
2017-04-23 10:36:00.216 UTC [msp] Sign -> DEBU 00a Sign: digest: 710BB9E967C398DA73EC3110D3BA6D450085E2B34DF714E45F05DCCCA918AD5E 
2017-04-23 10:36:00.218 UTC [chaincodeCmd] install -> DEBU 00b Installed remotely %v response:<status:200 payload:""OK"" > 
2017-04-23 10:36:00.219 UTC [main] main -> INFO 00c Exiting.....
===================== Chaincode is installed on remote peer PEER2 ===================== 

Instantiating chaincode on Peer2/Org1 ...
CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer2/localMspConfig/cacerts/peerOrg1.pem
CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer0/localMspConfig/keystore/peer0Signer.pem
CORE_PEER_LOCALMSPID=Org1MSP
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer0/localMspConfig/signcerts/peer0Signer.pem
CORE_PEER_ADDRESSAUTODETECT=true
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peer/peer2/localMspConfig
CORE_PEER_ID=cli
CORE_LOGGING_LEVEL=DEBUG
CORE_PEER_ADDRESS=peer2:7051
CORE_PEER_ENDORSER_ENABLED=true
CORE_NEXT=true
2017-04-23 10:36:00.252 UTC [logging] InitFromViper -> DEBU 001 Setting default logging level to DEBUG for command 'chaincode'
2017-04-23 10:36:00.260 UTC [msp] GetLocalMSP -> DEBU 002 Returning existing local MSP
2017-04-23 10:36:00.260 UTC [msp] GetDefaultSigningIdentity -> DEBU 003 Obtaining default signing identity
2017-04-23 10:36:00.271 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 004 Using default escc
2017-04-23 10:36:00.272 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 005 Using default vscc
2017-04-23 10:36:00.283 UTC [msp] Sign -> DEBU 006 Sign: plaintext: 0A8B050A5508032205616A3030392A40...314D53500A04657363630A0476736363 
2017-04-23 10:36:00.283 UTC [msp] Sign -> DEBU 007 Sign: digest: 12D9BBC2DB04066A53374514335FB92E745BFFA06B7DCFD205E18295AC5D6497 
Error: Error endorsing chaincode: rpc error: code = 2 desc = Timeout expired while starting chaincode aj009:1.0(networkid:dev,peerid:peer2,tx:3b8b586fe5477d248920c41530a0d4826921a698c763fd1a8fe198a0a188570d)
Usage:
  peer chaincode instantiate [flags]

Global Flags:
      --cafile string              Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
  -C, --chainID string             The chain on which this command should be executed (default ""testchainid"")
  -c, --ctor string                Constructor message for the chaincode in JSON format (default ""{}"")
  -E, --escc string                The name of the endorsement system chaincode to be used for this chaincode
  -l, --lang string                Language the chaincode is written in (default ""golang"")
      --logging-level string       Default logging level and overrides, see core.yaml for full syntax
  -n, --name string                Name of the chaincode
  -o, --orderer string             Ordering service endpoint
  -p, --path string                Path to chaincode
  -P, --policy string              The endorsement policy associated to this chaincode
      --test.coverprofile string   Done (default ""coverage.cov"")
  -t, --tid string                 Name of a custom ID generation algorithm (hashing and decoding) e.g. sha256base64
      --tls                        Use TLS when communicating with the orderer endpoint
  -u, --username string            Username for chaincode operations when security is enabled
  -v, --version string             Version of the chaincode specified in install/instantiate/upgrade commands
  -V, --vscc string                The name of the verification system chaincode to be used for this chaincode

!!!!!!!!!!!!!!! Chaincode instantiation on PEER2 on channel 'aj009' failed !!!!!!!!!!!!!!!!
================== ERROR !!! FAILED to execute End-2-End Scenario ==================
{code}","Mac Pro OSX 10.11.6 running Virtual Host (FEDORA LINUX 13)
VM Fedora Version: Fedora release 25 (Twenty Five)
Hyper-ledger Fabric : 1.0.0 - Alpha
Samples : Downloaded latest form the ""getting started guide""
Go : 1.7
Docker compose version:
-------------------------
docker-compose version 1.8.0, build 94f7016
docker-py version: 1.10.6
CPython version: 2.7.13
OpenSSL version: OpenSSL 1.0.2j-fips  26 Sep 2016
--------------------------

Docker Version:
---------------------------------------
Client:
 Version:      1.13.0
 API version:  1.25
 Go version:   go1.7.3
 Git commit:   49bf474
 Built:        Tue Jan 17 09:58:06 2017
 OS/Arch:      linux/amd64

Server:
 Version:      1.13.0
 API version:  1.25 (minimum version 1.12)
 Go version:   go1.7.3
 Git commit:   49bf474
 Built:        Tue Jan 17 09:58:06 2017
 OS/Arch:      linux/amd64
 Experimental: false
---------------------------------------
User: Running everything as root
",Amjadnz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqw7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Amjadnz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/17 6:20 PM;Amjadnz;This item is now resolved - the resolution is as follows

1. Created the new go chaincode under the src folder
2. The same folder is mapped to the containers hyperledger src folder
3. Ran the the docker compose (after configTXGen) and manually generated the .block an tx files
4. Containers started up fine now issues
5. Deploy and Inititalization happens with no issues
6. Could do all CRUD activity and all the transactions get replicated with other nodes as well

The key was paths not set properly. if I use the e2e_client folder - all went fine.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make gossip logging level at startup be WARN instead of INFO,FAB-3347,15940,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,yacovm,yacovm,23/Apr/17 7:49 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 3:44 AM,,,,,v1.0.0,,,fabric-peer,,,,0,v1.0,,,,,,,"Since we are working torwards an ability to change logging levels per components dynamically, this should start with WARN instead of INFO as the rest of the components.

Also- this affects the tests- some tests are running in parallel and are creating lots of ""gossip instances"" and the combined logging is too much for CI to handle and the tests time out.",,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqwf:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/17 3:44 AM;wlahti;Fixed via https://jira.hyperledger.org/browse/FAB-3144;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode should log build level,FAB-3348,15941,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,muralisr,muralisr,23/Apr/17 8:37 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,24/Apr/17 12:19 AM,,,,,,,,fabric-peer,,,,0,Usability,,,,,,,"Chaincode images may become stale and may not match fabric runtime images. Cleaning of chaincode images will take care of this but for debugging and servicing, it is important to know if that is necessary. 

Version information should be passed to the chaincode at the time of building it so the chaincode can log it.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqwn:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
change channel MAC in gossip proto from channelMAC to channel_mac,FAB-3349,15942,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,23/Apr/17 8:55 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,02/May/17 10:36 PM,,,,,v1.0.0,,,fabric-gossip,,,,0,beta,gossip,,,,,,"The fields in proto message definitions should not be CamelCase but should be with underscores.

Therefore we should change the proto field channelMAC to channel_mac",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-290,,,,,,,,,"1|hzxqwv:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve test coverage for cryptogen,FAB-3350,15943,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,23/Apr/17 9:19 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,24/Apr/17 8:43 AM,,,,,v1.0.0,,,fabric-tools,,,,0,,,,,,,,"As more people start using cryptogen, need to make sure the test coverage is increased",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";23/Apr/17 9:20 PM;mastersingh24;1800",";23/Apr/17 11:53 PM;mastersingh24;3600",,,3600,0,5400,150%,3600,0,5400,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqx3:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 11:54 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/8441/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
As a fabric developer I want to be able to configure the OrganizationalUnitIdentifiers of a FabricMSPConfig ,FAB-3351,15944,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,angelo.decaro,angelo.decaro,angelo.decaro,23/Apr/17 9:52 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/May/17 8:39 AM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,It should be possible to load from a file under sample config the OrganizationalUnitIdentifiers of a given MSP.,,angelo.decaro,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5i7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/17 10:59 PM;elli-androulaki;Related CR: 
https://gerrit.hyperledger.org/r/#/c/8531/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
No need to initialize grpc servers in CSCC tests,FAB-3352,15945,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,23/Apr/17 10:27 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 12:13 AM,,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"Currently each test in [configure_test.go|https://github.com/hyperledger/fabric/blob/master/core/scc/cscc/configure_test.go] initialize peer endpoint by using 

{code}
func setupEndpoint(t *testing.T) {
	peerAddress := peer.GetLocalIP()
	if peerAddress == """" {
		peerAddress = ""0.0.0.0""
	}
	peerAddress = peerAddress + "":21213""
	t.Logf(""Local peer IP address: %s"", peerAddress)
	var opts []grpc.ServerOption
	grpcServer := grpc.NewServer(opts...)
	getPeerEndpoint := func() (*pb.PeerEndpoint, error) {
		return &pb.PeerEndpoint{Id: &pb.PeerID{Name: ""cscctestpeer""}, Address: peerAddress}, nil
	}
	ccStartupTimeout := time.Duration(30000) * time.Millisecond
	pb.RegisterChaincodeSupportServer(grpcServer, chaincode.NewChaincodeSupport(getPeerEndpoint, false, ccStartupTimeout))
}
{code}

While tests leverages mocking chaincode framework, for instance:

{code}
// Failed path: Not enough parameters
	args := [][]byte{[]byte(""JoinChain"")}
	if res := stub.MockInvoke(""2"", args); res.Status == shim.OK {
		t.Fatalf(""cscc invoke JoinChain should have failed with invalid number of args: %v"", args)
	}
{code}

There is not need to use {{setupEndpoint}} and initialize grpc server, hence function could be removed and tests should not use it.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqxb:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/17 11:15 PM;C0rWin;https://gerrit.hyperledger.org/r/#/c/8437/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A local MSP is not able to update its CRLs,FAB-3353,15946,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,angelo.decaro,elli-androulaki,elli-androulaki,23/Apr/17 10:56 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/May/17 5:12 PM,,,,,v1.0.0,,,fabric-crypto,,,,0,,,,,,,,"Problem:

A local MSP cannot retrieve CRLs stored locally to setup its configuration with.
Given that the only way of updating an MSP is manual, and CRLs are part of the MSP configuration components, it is important that we enable the configuration also of this component.

Fix:
Add a folder in configsample, called ""CRLs"" where a list of flies are included each a marshalled version of X.509 CRLs, and have msp configuration go through this.",,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,28800,28800,,0%,28800,28800,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx5ef:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,elli-androulaki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Apr/17 10:55 PM;elli-androulaki;Related CR: 
https://gerrit.hyperledger.org/r/#/c/8539/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
solo && --peer-defaultchain=false always orderer0:7050 can't setting orderer ip,FAB-3354,15947,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,markparz,Lin-YiTang,Lin-YiTang,23/Apr/17 11:08 PM,10/Jan/20 1:56 AM,28/Oct/23 2:59 AM,10/Jan/20 1:56 AM,v1.0.0-alpha1,,,,,,,fabric-docs,,,,0,,,,,,,,"i cann't invoke or query
because cann't fount orderer0:7050 join chainnel after

i have not orderer0 , i setting orderer name is orderer1


you can try modify e2e_cli about orderer0 word
all change to orderer1 or any word",,ChristopherFerris,joe-alewine,Lin-YiTang,markparz,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxqxj:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,joe-alewine,Lin-YiTang,markparz,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/May/17 3:26 PM;ChristopherFerris;[~Lin-YiTang] can you please provide a bit more detail on your issue? Can you provide gists of your e2e configuration and highlight any changes you made to the default configuration? Thanks!;;;","07/Jun/17 7:35 PM;mastersingh24;This is not a bug - it's a possible documentation issue in terms of understanding how hostnames work end to end in the system (especially when using compose);;;","10/Jun/17 2:50 AM;markparz;[~Lin-YiTang] I agree with both fellas above. I am changing this to an improvement as there might be some improvement to documentation to help clarify things. However, please provide information what you changed exactly. For now will keep it under the doc category.

This is a really old issue and looks to be labeled properly at Alpha-1, as that is what what we had in April. Have you tried the more recent images and e2e? Beta was just released. Let us know if you are really having and issue still or we can close this out as there have been significant changes in the last 2+ months.;;;","10/Jan/20 1:56 AM;joe-alewine;So old it's hard to imagine this is relevant anymore.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
We need to enhance e2e tests to cover security-sensitive operations,FAB-3355,15948,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,2020Nishi,elli-androulaki,elli-androulaki,23/Apr/17 11:31 PM,23/Jan/20 4:07 AM,28/Oct/23 2:59 AM,23/Jan/20 4:07 AM,,,,,Future,,,fabric-crypto,,,,1,stale-item,,,,,,,"We may want to consider extending our e2e flow to check the following:

a) Installation of various versions of a chaincode (with instantiation policies - [~yacovm] suggested)
b) Instantiation of chaincodes in various chains, attempts of instantiating twice on the same chain or more
c) Application chaincode querying another application chaincode on the same chain
d) Application chaincode invoking another application chaincode on the same chain
e) Application chaincode querying another application chainocde on a different chain
f) Application chaincode invoking a system chaincode (LSCC, QSCC, CSCC, ESCC, VSCC) 
   - on the same chain? 
   - on a separate chain?
   - chainless functions of theirs? 
   - while considering invoking each function separately(?)
g) System chaincode invoking another system chaincode (?)
h) Installing chaincodes with same name but different metadata on different peers, and attempting to instantiate and invoke afterwards these chaincodes on each of the peer. 
i) Configuration updates of multiple components on a chain 
j) others? Inviting [~adc], [~ales], [~mne], [~yacovm], [~binhn], [~mastersingh24], [~muralisr], [~bmos299] to comment on these or more additions are needed here (?)
",,bmos299,ChristopherFerris,elli-androulaki,joe-alewine,Nishi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3370,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzws27:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,bmos299,ChristopherFerris,elli-androulaki,joe-alewine,Nishi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/17 12:43 AM;yacovm;A few points:
* Access control tests that check that a certain operation with a given principal isn't allowed, are very fast to check in comparison to operations that succeed (instantiate that succeeds, install that succeeds, etc.) , hence they won't prolong much the total time of the e2e test if such tests would be added to it.
* In my opinion, checking access control only in mock tests is risky. Especially since the implementations of the tests relies on many ""Mock"" code that might somehow be initialized in a different way in the execution in production, therefore rendering the test not accurate. 
* We only use the same (single) instantiation policy in the e2e test... so there is nothing that checks if access control of that aspect works at all. ;;;","24/Apr/17 3:12 AM;bmos299;Thanks for the suggestions.  The Quality team has created a folder structure hyperledger/fabric/test/regression/ which includes folders for daily, weekly, and release testing.  Many of the tests described above have been tested and will go into the daily folder and PRs are in an open state or about to be submitted with these automated tests.   All the tests suggested above can be evaluated to determine if they belong in the verify run and/or daily run.  The trade off is time vs coverage.  I'll assign to [~2020Nishi] and have her work to create Jira's and make sure these security tests are covered. ;;;","24/Apr/17 11:20 PM;Nishi;Created a story FAB-3370 with subtasks to cover security in e2e tests. 

I had few question mentioned inside FAB-3370 subtasks:
1. FAB-3372  

2. FAB-3375 

Can you update inside these individual sub-tasks with your comments, please?. 
;;;","26/May/17 9:41 AM;ChristopherFerris;[~elli-androulaki] [~bmos299] how is this a bug? It is an improvement, and likely a needed improvement, but it isn't a defect.;;;","26/May/17 4:52 PM;elli-androulaki;Correct, it is indeed an improvement on testing. My mistake. Just updated it. ;;;","30/May/17 3:21 AM;ChristopherFerris;If the point of this is to improve the tests, that's already been given approval so long as the production code is not substantially changed. Removing from review-needed;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
flogging introduces verbose messages on peer initialization,FAB-3356,15949,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,24/Apr/17 1:08 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,24/Apr/17 2:52 AM,,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,"When you run the e2e, the flogging emits lots of output on peer startup:

2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 001 Module 'flogging' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 002 Module 'golang-platform' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 003 Module 'cauthdsl' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 004 Module 'configtx/tool/localconfig' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 005 Module 'protos' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 006 Module 'ConnProducer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 007 Module 'common/policies' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 008 Module 'lockbasedtxmgr' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 009 Module 'common/configtx' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00a Module 'kvledger' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00b Module 'peer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00c Module 'common/configtx/tool/provisional' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00d Module 'java/hash' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00e Module 'protoutils' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 00f Module 'inproccontroller' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 010 Module 'endorser' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 011 Module 'viperutil' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 012 Module 'msp' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 013 Module 'configvalues/msp' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 014 Module 'committer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 015 Module 'kvledger.util' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 016 Module 'bccsp' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 017 Module 'chaincode' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 018 Module 'server' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 019 Module 'statevalidator' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01a Module 'leveldbhelper' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01b Module 'deliveryClient' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01c Module 'container' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01d Module 'util' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01e Module 'lscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 01f Module 'qscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 020 Module 'sccapi' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 021 Module 'bccsp_p11' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 022 Module 'bccsp_sw' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 023 Module 'core' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 024 Module 'gossip/state' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 025 Module 'vscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 026 Module 'ccprovider' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 027 Module 'rwset' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 028 Module 'escc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 029 Module 'cscc' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02a Module 'channelCmd' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02b Module 'cli/logging' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02c Module 'chaincode-platform' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02d Module 'couchdb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02e Module 'statecouchdb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 02f Module 'gossip/service' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 030 Module 'chaincodeCmd' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 031 Module 'main' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 032 Module 'stateleveldb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 033 Module 'ledgermgmt' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 034 Module 'eventhub_producer' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 035 Module 'gossip/util' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 036 Module 'peer/gossip/mcs' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 037 Module 'txvalidator' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 038 Module 'historyleveldb' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 039 Module 'peer/gossip/sa' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03a Module 'dockercontroller' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03b Module 'common/configtx/test' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03c Module 'common/config' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03d Module 'comm' logger set to 'DEBUG' log level
2017-04-23 16:01:29.379 UTC [flogging] GetModuleLevel -> DEBU 03e Module 'blocksProvider' logger set to 'DEBUG' log level


[~wlahti]",,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqxr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/17 2:04 AM;wlahti;Yes, I've been meaning to remove that. Thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove testchainid from peer start up,FAB-3358,15951,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,mastersingh24,mastersingh24,mastersingh24,24/Apr/17 2:37 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,30/May/17 3:40 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"I'm not sure if it's even used anymore other than in tests, but we must remove testchainid from the peer startup.  Minimally I'll settle for making the default false.

this code should be removed from the peer altogether IMHO:


{code}
if peerDefaultChain {
		if orderingEndpoint == """" {
			logger.Panic(""No ordering service endpoint provided, please use -o option."")
		}

		if len(strings.Split(orderingEndpoint, "":"")) != 2 {
			logger.Panicf(""Invalid format of ordering service endpoint, %s."", orderingEndpoint)
		}

		chainID := util.GetTestChainID()

		var block *cb.Block

		func() {
			defer func() {
				if err := recover(); err != nil {
					logger.Fatalf(""Peer configured to start with the default test chain, but supporting configuration files did not match.  Please ensure that configtx.yaml contains the unmodified SampleSingleMSPSolo profile and that msp/sampleconfig is present.\n%s"", err)
				}
			}()

			genConf := genesisconfig.Load(genesisconfig.SampleSingleMSPSoloProfile)
			genConf.Orderer.Addresses = []string{orderingEndpoint}
			genConf.Application.Organizations[0].Name = XXXDefaultChannelMSPID
			genConf.Application.Organizations[0].ID = XXXDefaultChannelMSPID
			block = provisional.New(genConf).GenesisBlockForChannel(chainID)
		}()

		//this creates testchainid and sets up gossip
		if err = peer.CreateChainFromBlock(block); err == nil {
			fmt.Printf(""create chain [%s]"", chainID)
			scc.DeploySysCCs(chainID)
			logger.Infof(""Deployed system chaincodes on %s"", chainID)
		} else {
			fmt.Printf(""create default chain [%s] failed with %s"", chainID, err)
		}
	}
{code}
",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,";27/May/17 9:10 PM;mastersingh24;900",,,,10800,0,900,8%,10800,0,900,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqy7:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dev,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/May/17 9:10 PM;mastersingh24;https://gerrit.hyperledger.org/r/#/c/9887/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-introduce usage of TLS-Unique in gossip handshake,FAB-3359,15952,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,yacovm,yacovm,yacovm,24/Apr/17 3:49 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,06/Jun/17 6:56 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-gossip,,,,5,gossip,Security,,,,,,"Long long ago, the gossip comm layer used TLS-Unique as a challenge to be signed during the communication layer handshake.
 At some point it was decided to use a [different TLS binding |https://github.com/hyperledger/fabric/commit/a9508542cf3125ef9aa2883b70e7c14140b152c1] that takes advantage of mutual TLS between peers.

After some time when TLS was introduced (however- without client authentication), it was decided to [add a configuration flag to disable checking |https://github.com/hyperledger/fabric/commit/cc03cac020eebfefa058adcf98f9c2cbb8f50d34] the TLS binding of the handshake in order to allow peers to communicate with no TLS.

The gossip layer uses the TLS binding in order to authenticate the identity of the peer on the other side of the connection.
 Using the configuration flag above *exposes the peer to impersonation attacks* on the one hand, but on the other hand- it's not possible to make peers communicate without this flag, until mutual TLS can be supported in the peer.

Since we are at the brink of the release and it doesn't seem like mutual TLS will be supported anytime soon, I suggest the following:
 * To bring back the use of TLS-Unique (it enables authenticating both sides of the connection) and include that too in the gossip [handshake message |https://github.com/hyperledger/fabric/blob/master/protos/gossip/message.proto#L155-L159]
 * To get rid of the [skipHandshake flag |https://github.com/hyperledger/fabric/blob/master/sampleconfig/core.yaml#L138] and instead have the runtime decide which binding to use according to what's available:
 ** If TLS is detected, and the client-side peer sent its certificate, use both the signature over the TLS-Unique and the the signature over the remote peer's certificate's hash (that's what is used now) to authenticate the remote peer.
 ** If TLS is detected, and the client side peer hasn't sent it's certificate, use only TLS-Unique to authenticate the remote peer.
 ** If TLS isn't detected, do what is done now

Time-wise I don't think it's a big of a change because we already have unit tests that test the current flow, and we even have the old code (from git) that extracts the TLS-Unique. 
 All that is needed to test such a change is just adjust the [existing unit test |https://github.com/hyperledger/fabric/blob/master/gossip/comm/comm_test.go#L204-L258].

Also- our current e2e test uses TLS without mutual authentication, so if it passes we know that the change didn't hurt the existing situation.",,binhn,C0rWin,ChristopherFerris,Clayton Sims,elli-androulaki,mastersingh24,troyronda,weeds,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3040,,,,,,,,,"1|hzxqyf:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,binhn,C0rWin,ChristopherFerris,Clayton Sims,elli-androulaki,mastersingh24,troyronda,weeds,yacovm,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/17 3:51 AM;yacovm;[~C0rWin] [~mastersingh24] [~binhn] and also [~ellaki] and [~adc] and [~ales] Please weigh in;;;","24/Apr/17 6:29 PM;mastersingh24;this makes sense - I was also thinking that we might possible be able to try out using mutual TLS by making in optional but having the peer(s) use their MSP signing cert as their client certificate.  But I think that looking to add the TLS-Unique back might make sense.

Let's get through merging any new features and suggest we schedule a review of critical issues later in the week;;;","24/Apr/17 7:01 PM;elli-androulaki;Makes sense to me too. New version of TLS is to fix the issue with TLS-Unique (essentially being so short), so ideally we would finally move entirely to the TLS-Unique binding :);;;","24/Apr/17 8:11 PM;yacovm;I'd say that ideally we use both since this only happens once per connection attempt so there is no waste of resources if we sign 2 challenges instead of 1;;;","08/May/17 10:24 PM;binhn;If we use TLS binding, would it work with TLS-terminating proxy (fronting peers)?;;;","09/May/17 5:49 AM;mastersingh24;Terminating proxies always present some type of problem when trying to do any type of mutual authentication end to end.

We'd have to do a little extra work, but it's possible to support both cases (depending on the proxy).  It's definitely easier to support mutual TLS because most proxies have the ability to use a standard HTTP header to pass the client certificate through to the actual backend node (which in our case is of course the peer).  I know you can extract tls-unique in haproxy but not sure about others.

My preference would be of course to use tls-unique but I fear that it *might* be hard to support proxies.  Of course there are only a few (well at least one - nghttpx) proxies which actually support acting as a reverse proxy for HTTP/2 in any case;;;","09/May/17 7:42 AM;mastersingh24;OK - I vote for 

 
 * If TLS is enabled, request but not not require client certificates.  If the peer sends a client certificate, authenticate them at the gossip layer
 * If TLS is detected, and the client side peer hasn't sent it's certificate, reject them at the gossip layer
 * If TLS isn't detected, do what is done now
 * To support proxies, we'll look to use the common practice of having the proxy extract the client certificate and forward via an HTTP header  (this will require that the proxy authenticate with a client certificate though).
 * Test with at least one HTTP/2 reverse proxy (nghttpx is the only one I've seen to date which works with gRPC)

 ;;;","09/May/17 10:06 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/9119/;;;","30/May/17 11:23 PM;ChristopherFerris;This CR has languished but does need to be addressed before 1.0. What it needs is careful scrutiny because of the production code changes. I doubt anyone would say that the fix should not be made. However, let's get some eyeballs on the CR please.;;;","30/May/17 11:35 PM;yacovm;I'm waiting for [~mastersingh24]'s gRPC change set to be merged, no point in resolving the merge conflict before that.;;;","01/Jun/17 2:26 AM;ChristopherFerris;[~yacovm] it's been merged...;;;","01/Jun/17 3:26 AM;yacovm;So it seems.

 I will need to change the code of the change set and test it all over again, it's not so simple as resolving a merge conflict.;;;","05/Jun/17 10:40 PM;ChristopherFerris;This now has the requisite votes to proceed and the CR may be merged when ready.;;;","05/Jun/17 10:44 PM;yacovm;I am testing. will comment when ready.;;;","06/Jun/17 2:47 AM;weeds;Yacov- can you add the CR number please?  Thanks!;;;","06/Jun/17 2:49 AM;Clayton Sims;[https://gerrit.hyperledger.org/r/#/c/9119/]

 ;;;","06/Jun/17 4:29 AM;yacovm;OK I verified that the TLS change set works for gossip by deploying it on a few peers and:
* Seeing that they chat with one another
* Invoking *nmap --script ssl-enum-ciphers -p 7051* to ensure they indeed use TLS ;;;",,,,,,,,,,,,,,,,,,,,,,,
node-sdk to update e2e test with using an Admin identity to install chaincode,FAB-3360,15953,15549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,24/Apr/17 5:16 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/Apr/17 8:33 PM,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,https://gerrit.hyperledger.org/r/#/c/8229 now requires an admin user to install chaincode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3361,FAB-3362,FAB-3380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqyn:",,,,,,Sprint 15 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/17 12:06 PM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/8499/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
java-sdk to update e2e test with using an Admin identity to install chaincode,FAB-3361,15954,15549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rickr,jimthematrix,jimthematrix,24/Apr/17 5:17 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,06/May/17 11:24 PM,,,,,v1.0.0,,,fabric-sdk-java,,,,0,,,,,,,,https://gerrit.hyperledger.org/r/#/c/8229 now requires an admin user to install chaincode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3381,,,FAB-3360,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqyv:",,,,,,Sprint 15 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
go-sdk to update e2e test with using an Admin identity to install chaincode,FAB-3362,15955,15549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,aleksandar.likic@gmail.com,24/Apr/17 9:19 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Jun/17 1:03 AM,,,,,v1.0.0,,,fabric-sdk-go,,,,0,,,,,,,,https://gerrit.hyperledger.org/r/#/c/8229 now requires an admin user to install chaincode,,aleksandar.likic@gmail.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3360,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqz3:",,,,,,Sprint 15 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,aleksandar.likic@gmail.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
python-sdk to update e2e test with using an Admin identity to install chaincode,FAB-3363,15956,15549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,grapebaba,grapebaba,24/Apr/17 11:08 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,11/Apr/18 2:57 PM,,,,,v1.0.0,,,fabric-sdk-py,,,,0,fabric-sdk-py,,,,,,,https://gerrit.hyperledger.org/r/#/c/8229 now requires an admin user to install chaincode,,baohua,grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqzb:",,,,,,Sprint 15 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,baohua,grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/17 12:31 PM;baohua;parent issue: https://jira.hyperledger.org/browse/FAB-2969;;;","15/Jun/17 11:33 AM;baohua;We may use the admin user to install/instantiate/invoke the chaincode for the first step, to avoid the potential permission issues.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ledger backup/restore to Operations Guide,FAB-3364,15957,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,denyeart,denyeart,24/Apr/17 11:11 AM,12/Mar/21 12:03 PM,28/Oct/23 2:59 AM,13/Dec/19 4:47 AM,,,,,v2.0.0,,,fabric-docs,fabric-ledger,,,2,,,,,,,,"*Ledger backup*
 It is not required to backup the ledger data of a peer. This is because, even in the worst case of catastrophic failure of a peer (e.g, a disk failure) , the peer can be brought up with no ledger at all. You can then have the peer re-join the desired channels and as a result, the peer will automatically create a ledger for each of the channels and will start receiving the blocks from genesis block on, via regular block transfer mechanism from other peers in the channel. As the peer processes blocks, it will build up it's state database.

Still, some organizations may want to be more self-reliant and hence may want to take backup of their ledger data so as to be able to recover from catastrophic failures and resume block processing from the point of the last backup. In addition, ledger data backups may help to expedite the addition of a new peer, which can be achieved by backing up the ledger data from one peer and starting the new peer with the backed up ledger data.

In order to back up the ledger data of a peer, perform the following steps.

1. Stop the peer
 2. Backup the folders `<peer.fileSystemPath>`/ledgersData and `<peer.fileSystemPath>`/chaincodes.
 `<peer.fileSystemPath>` refers to the value of the property specified in the configuration (core.yaml or overridden in docker with CORE_PEER_FILESYSTEMPATH) - default value of this property is `/var/hyperledger/production`.

In the step 2 above, some of the sub-folders under `<peer.fileSystemPath>`/ledgersData can be skipped while backing up the ledger data.
 These sub-folders include `stateLeveldb`, `historyLeveldb`, `chains/index`. Skipping these folders reduces the storage demand for the backup however, at the same time, the peer recovery from the backed up data may take more time, as these ledger artifacts will be re-constructed when the peer starts if they are found to be missing.

if using CouchDB as state database, there will be no stateLeveldb directory, as the state database data would stored within CouchDB instead.  But similarly, if peer starts up and finds CouchDB databases are missing or at lower block height (based on using an older CouchDB backup), the state database will be automatically re-constructed to catch up to current block height.  Therefore, if you backup peer ledger data and CouchDB data separately, ensure that the CouchDB backup is always older than the peer backup.

In order to restore the ledger data to a fresh peer, perform the following steps.

1. Copy the backed-up folders to the new peer's `<peer.fileSystemPath>` directory.
 2. Start the peer

Note - additional details provided in google doc for handling private data in later releases:
https://docs.google.com/document/d/1dEhUpMcqOYfOngDvSlyXL6NIBuTKmhP5s0fr_--U_OA/edit#
I'd suggest community docs include offline backup information.",,abhijeetpal23,AdnanChoudhury,Dayal22,denyeart,grapebaba,gregnotso,hakan.eryargi,joe-alewine,manish-sethi,MichaelWang,mplisov,nemoto,raft 3,SebCasanova,silveraid,YashGanthe,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3017,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|i00wvc:k",,,,Unset,,v2.x,,,,,,,,,,,,,Unset,,,,,,,,,,,abhijeetpal23,AdnanChoudhury,Dayal22,denyeart,grapebaba,gregnotso,hakan.eryargi,joe-alewine,manish-sethi,MichaelWang,mplisov,nemoto,raft 3,SebCasanova,silveraid,YashGanthe,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Mar/18 5:40 AM;joe-alewine;[~denyeart]

Do we still need this? We cover how to back up ledger data in our Upgrade doc.;;;","10/Jun/18 6:20 PM;denyeart;[~joe-alewine] [~pandrejko] Yes, we still need this doc topic.   Many people ask about how to backup and restore a peer, so that if they need to rebuild a peer they can resume from the point of the last backup rather than process all blocks from genesis block again.;;;","11/Aug/18 4:35 AM;gregnotso;I can see quite a few FABs on this topic but no real implementation plan. Some vendors may not want to wait and may have already implemented their own proprietary code to allow for backup and restore. Needless to say they would not share it here.;;;","16/Apr/19 7:00 PM;raft 3;What does _""Stop the peer""_ means exactly?

Is killing the peer safe? What if it was in the middle of writing a block to the disk?

In particular, I especially want to know if stopping the peer with the below command is safe?
{code:java}
kill -STOP <peer process id>{code}
After taking the backup, it can be resumed with:
{code:java}
kill -CONT <peer process id>{code}
We are running Fabric in Kubernetes, and as opposed to Docker, Kubernetes doesn't have any mechanism to stop/resume the containers. We are considering taking the backup in between STOP and CONT but of course only if we can be sure it's a safe operation.;;;","23/Jul/19 10:24 PM;denyeart;[~raft 3] Yes, peers are crash tolerant and can be stopped/killed at anytime. Upon restart there is logic to check what was written and recover/resume from there.;;;","23/Jul/19 10:38 PM;hakan.eryargi;[~denyeart] thanks, good to know!

Assuming that restart logic only applies when the peer is actually restarted, I guess this doesn't apply to kill -STOP/-CONT. In particular, to my knowledge, STOP happens at OS level, application (peer) cannot catch that signal, OS just stops the application without killing it. When the peer is resumed by CONT, this wont be a restart but a resume, so restart logic wont apply.

Also not sure what happens to IO in between STOP/CONT.

Can you please confirm?

[http://man7.org/linux/man-pages/man7/signal.7.html];;;","23/Jul/19 10:46 PM;denyeart;[~raft 3] I can't confirm, but I would assume the OS resumes IO where it left off in which case STOP/CONT would be safe.;;;","25/Jul/19 7:15 AM;hakan.eryargi;[~denyeart] this is the worst case scenario I can think of:
 * peer starts writing a block
 * we stop the peer in the middle of that, assuming peer IO is also stopped here
 * we take backup (latest block is not completely backed up in this case, but in half)
 * we resume the peer, it continues writing the block and continue normally

Later when we restore from the backup and restart the peer, latest block will not be complete. 

I'm guessing, peers are crash tolerant means, they can tolerate being killed in the middle of writing a block. So, when restoring from a backup where a block is half written, they can also tolerate this.

Can you please confirm this? 

 ;;;","25/Jul/19 11:11 PM;manish-sethi;[~hakan.eryargi], yes your understanding is correct. 
To be precise, upon start of a peer, any such partial written block is detected and removed and peer behaves as if it never received that block.;;;","05/Dec/19 6:04 AM;joe-alewine;Changes here: https://github.com/hyperledger/fabric/pull/299;;;","13/Dec/19 4:47 AM;joe-alewine;Done as part of upgrade. See: https://hyperledger-fabric.readthedocs.io/en/master/upgrading_your_components.html#ledger-backup-and-restore;;;","10/Jan/20 4:54 AM;silveraid;[~manish-sethi], [~hakan.eryargi], I was looking for existing backup solutions and run into this ticket. I just want everyone to know that peers are not crash resistant! It happened with us twice already that when the peer crashed the LevelDB database got corrupted and from that there was no recovery. We had to zero out all data from these peers to be able to recover them.;;;","18/Jan/20 1:30 AM;manish-sethi;[~silveraid] - You use a remote NFS for leveldb or you observed this in the local OS filesystem?;;;","06/Mar/21 5:06 AM;silveraid;No, I don't think so, but I don't know much about the implementation, this happened to us in IBM Blockchain Platform v1 SaaS many times, always when the peer get stopped. Even though we are not using the v1 platform anymore it seems like that you more than likely solved this issue here:

https://jira.hyperledger.org/browse/FAB-18304

Thanks,;;;","12/Mar/21 12:03 PM;denyeart;[~silveraid] Yes, the root cause of leveldb manifest corruption was finally found and a fix was pushed into goleveldb, which Fabric has now vendored in.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
kafka orderer channel join error,FAB-3365,15958,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jsong1230,jsong1230,24/Apr/17 12:26 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,01/Jun/17 11:17 AM,v1.0.0-alpha1,,,,WON'T FIX,,,fabric-orderer,,,,0,common-components,,,,,,,"I have deleted /var/hyperledger/ and restart all (zookeeper, kafka, orderer, peer), but has the following error message in joining channel at the second, and third peer.

[aloe@aloe2 fabric]$ peer channel join -o 127.0.0.1:7050 -b ch3-3.block -f ch3-3.tx
Error: proposal failed (err: rpc error: code = 2 desc = Block number should have been 2 but was 0)

I have deleted data directory of zookeeper and kafka but the situation is the same.
I am using fabric v1.0-alpha release.
Thanks.",,jsong1230,kchristidis,sait,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqzr:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,jsong1230,kchristidis,sait,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/May/17 5:07 AM;kchristidis;Not enough details to reproduce.

Identify the minimum number of steps needed to reproduce and identify them here.

List your expectation and what you get instead.

Provide artifacts if necessary.

Think of this as a StackOverflow question and phrase it as such.

Also, I see that you're using alpha-1. Can you please try with alpha-2? Alpha-releases will inevitably have critical flaws, so you should always roll with the latest one.;;;","27/May/17 5:08 AM;kchristidis;Also, wait – why are you deleting `/var/hyperledger`, or the data directories in Kafka and Zookeeper? What's the intent here, and what's the expectation?;;;","01/Jun/17 11:16 AM;kchristidis;Closing this, feel free to reopen w/ needed details.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer warning (v1.0-alpha),FAB-3366,15959,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,baohua,jsong1230,jsong1230,24/Apr/17 1:05 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,12/May/17 11:01 AM,,,,,,,,,,,,0,,,,,,,,"I cannot guess what the problem is.

2017-04-24 12:00:46.758 KST [gossip/discovery#0.0.0.0:7051] resurrectMember -> INFO 05a Entering, AliveMessage: GossipMessage: tag:EMPTY alive_msg:<membership:<pki_id:""\212\324\352\260\352\264\212\210es\233\030\204\206\377\036\363\331Wz9'\224Nt\277\306\35238\276\334"" > timestamp:<inc_number:1493002837169531594 seq_num:7 > identity:""\n\004org1\022\244\006-----BEGIN -----\nMIICNjCCAd2gAwIBAgIUAwsjoiANzHWtEPPMRWjxRPur0LkwCgYIKoZIzj0EAwIw\naDELMAkGA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQK\nEwtIeXBlcmxlZGdlcjEPMA0GA1UECxMGRmFicmljMRkwFwYDVQQDExBmYWJyaWMt\nY2Etc2VydmVyMB4XDTE3MDQyNDAyMDUwMFoXDTE4MDMyMzEwMDUwMFowWzELMAkG\nA1UEBhMCVVMxFzAVBgNVBAgTDk5vcnRoIENhcm9saW5hMRQwEgYDVQQKEwtIeXBl\ncmxlZGdlcjEPMA0GA1UECxMGRmFicmljMQwwCgYDVQQDEwNjcDMwWTATBgcqhkjO\nPQIBBggqhkjOPQMBBwNCAARsjfDTCrzo2AWAOdGgkR4BZEo5kjLrpVtV+MYRcZ/6\nHbC6J4pg1pgu5bZCVluP+rLhOLtOhEQZd14XOeVGj8mjo3IwcDAOBgNVHQ8BAf8E\nBAMCAgQwDAYDVR0TAQH/BAIwADAdBgNVHQ4EFgQUcNobAjkpOQ17iSiQQADEae9X\nkycwHwYDVR0jBBgwFoAU0/TMJmTLwIaYpv1FGeIWyp1qAx8wEAYDVR0RBAkwB4IF\nYWxvZTMwCgYIKoZIzj0EAwIDRwAwRAIgOrpN3xIJy69kVFF7+fjjvrsr1cHuvkRI\nfQvutS7kF6ICIE+pZTrhEJMRjZf8GWuJy9sR0X9hCHkh8RU7gYMYVNUW\n-----END -----\n"" > , Envelope: 871 bytes, Signature: 71 bytes Secret payload: 14 bytes, Secret Signature: 70 bytes t: {1493002837169531594 7}
2017-04-24 12:00:46.758 KST [gossip/discovery#0.0.0.0:7051] resurrectMember -> INFO 05b Exiting
2017-04-24 12:00:47.198 KST [gossip/comm#-1] createConnection -> WARN 05c Remote endpoint claims to be a different peer, expected [138 212 234 176 234 180 138 136 101 115 155 24 132 134 255 30 243 217 87 122 57 39 148 78 116 191 198 234 51 56 190 220] but got [208 108 204 135 115 65 130 36 117 241 199 27 148 181 225 3 35 124 153 51 232 17 221 33 162 146 222 78 226 232 22 117]
2017-04-24 12:00:47.199 KST [gossip/comm#-1] sendToEndpoint -> WARN 05d Failed obtaining connection for 0.0.0.0:7051, PKIid:[138 212 234 176 234 180 138 136 101 115 155 24 132 134 255 30 243 217 87 122 57 39 148 78 116 191 198 234 51 56 190 220] reason: Authentication failure
2017-04-24 12:00:47.199 KST [gossip/discovery#0.0.0.0:7051] expireDeadMembers -> WARN 05e Entering [[138 212 234 176 234 180 138 136 101 115 155 24 132 134 255 30 243 217 87 122 57 39 148 78 116 191 198 234 51 56 190 220]]
2017-04-24 12:00:47.199 KST [gossip/discovery#0.0.0.0:7051] expireDeadMembers -> WARN 05f Closing connection to Endpoint: , InternalEndpoint: 0.0.0.0:7051, PKI-ID: [138 212 234 176 234 180 138 136 101 115 155 24 132 134 255 30 243 217 87 122 57 39 148 78 116 191 198 234 51 56 190 220], Metadata: []
2017-04-24 12:00:47.199 KST [gossip/discovery#0.0.0.0:7051] expireDeadMembers -> WARN 060 Exiting",,baohua,jsong1230,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqzz:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,baohua,jsong1230,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/May/17 11:01 AM;baohua;the alpha is a intermediate release, pls see master for latest code, thanks!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a sample deployment and topology for Apache Mesos,FAB-3367,15960,15929,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,mupparajuv,guoger,guoger,24/Apr/17 4:25 PM,27/Jul/19 9:31 PM,28/Oct/23 2:59 AM,27/Jul/19 9:31 PM,,,,,Future,,,,,,,1,,,,,,,,Apache Mesos is a mature and production-proven container orchestration tool. This task is to provide the relevant artifacts and documentation to help create a sandbox topology using Apache Mesos,,guoger,jane3wang,mastersingh24,shanfeng,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxqu7:",,,,,,Sprint 19 - Quality,,,,,,,,,,,,,,,,,,,,,,,,guoger,jane3wang,mastersingh24,shanfeng,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jul/19 9:31 PM;mastersingh24;The world has moved to Kubernetes;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB doesn't respond after empty attachment is saved.,FAB-3368,15961,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chris.elder,denyeart,denyeart,24/Apr/17 9:20 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,18/May/17 8:53 AM,,,,,,,,fabric-ledger,,,,0,,,,,,,,"Tests in /fabric/core/ledger/kvledger/txmgmt/statedb/statecouchdb times out (after 35s, current client timeout threshold) at: handleRequest() method=POST url=http://couchdb:5984/testbasicrw/_ensure_full_commit

I have dug deeper and found that it is due to saving an empty byte array for key4 in TestBasicRW.  This turns into a couchdb document attachment of length 0.  While couchdb appears to handle this ok at first, the subsequent request to couch hangs (which happens to be http://couchdb:5984/testbasicrw/_ensure_full_commit), until the client times out after 35 seconds.  The retry is successful.

Saving an empty byte array for a chaincode key is allowable, therefore we need a resolution.

It seems like the empty attachment is causing a problem, which was hidden before FAB-2724, but now that connection is reused the problem shows up on the subsequent request.  ",,balaji.viswanathan,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2724,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4ov:",,,,,,Sprint 16  - Ledger,,,,,,,,,,,,,,,,,,,,,,,,balaji.viswanathan,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/17 9:21 PM;denyeart;From [~balaji.viswanathan]:

I ran a bunch of tests for this using haproxy as a reverse proxy as well to snoop on messages. I can recreate this over a telnet client sending exact PUT requests. This seems to be a couch specific issue regd handling of empty attachments. 

The response for the PUT(empty attachment) is sent back to client. But, couch does not log the PUT in its log and the connection is in a undetermined state after that.

One option is to make this test in handleRequest and set req.Close = True for such requests, thereby not reusing the connection and telling server to explicitly close the connection. ;;;","24/Apr/17 9:21 PM;denyeart;Let's investigate with CouchDB committers before making a decision.;;;","24/Apr/17 9:31 PM;balaji.viswanathan;Created https://issues.apache.org/jira/browse/COUCHDB-3394;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
enhance e2e tests to cover security-sensitive operations,FAB-3370,15963,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Nishi,Nishi,Nishi,24/Apr/17 10:42 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,10/Jul/18 3:23 AM,,,,,v1.0.0,,,fabric-peer,fabric-quality,,,0,quality,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3355,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-1017,,,,,,,,,"1|hzy8zb:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Installation of various versions of a chaincode with varying endorsement policies ,FAB-3372,15965,15963,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,muralisr,Nishi,Nishi,24/Apr/17 11:01 PM,27/Jul/19 9:09 PM,28/Oct/23 2:59 AM,27/Jul/19 9:09 PM,,,,,,,,fabric-peer,,,,0,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr0n:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/17 3:21 AM;Nishi;1. Got to find what kind of endorsement policies we can have and understand how they work.

2. Another thing to understand, how do we verify in CLI commands (in e2e tests) policies on different peers, when invoke/queries are actually being executed on a single peer.;;;","28/Apr/17 10:07 PM;Nishi;[~muralisr],

May be you can throw some pointers to questions I have in this JIRA.

Thanks!

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Instantiation/Invoke/Query of chaincodes in various chains,FAB-3373,15966,15963,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Nishi,Nishi,Nishi,24/Apr/17 11:09 PM,27/Jul/19 9:09 PM,28/Oct/23 2:59 AM,27/Jul/19 9:09 PM,,,,,,,,,,,,0,,,,,,,,"1. Attempts of instantiating twice on the same chain or more
2. Application chaincode querying another application chaincode on the same chain
3. Application chaincode invoking another application chaincode on the same chain

4. Application chaincode querying another application chainocde on a different chain
Note: We can only query on a chaincode that is installed on a different chain, currently no invokes are allowed.",,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr0v:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Nishi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Application chaincode invoking a system chaincode,FAB-3375,15968,15963,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,elli-androulaki,Nishi,Nishi,24/Apr/17 11:17 PM,20/Oct/21 6:56 PM,28/Oct/23 2:59 AM,27/Jul/19 9:08 PM,,,,,,,,,,,,0,,,,,,,,"f) Application chaincode invoking a system chaincode (LSCC, QSCC, CSCC, ESCC, VSCC)

    on the same chain?
    on a separate chain?
    chainless functions of theirs?
    while considering invoking each function separately
    g) System chaincode invoking another system chaincode
    h) Installing chaincodes with same name but different metadata on different peers, and attempting to instantiate and invoke afterwards these chaincodes on each of the peer.
    i) Configuration updates of multiple components on a chain ",,ghoshbishakh,Nishi,troyronda,vramaiitkgp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr1b:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ghoshbishakh,Nishi,troyronda,vramaiitkgp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/17 3:20 AM;Nishi;f) Possible calls to system chaincodes:

Say we have
mycc1 = from where we are calling system chaincodes
qscc=system chaincode we are interested to call from mycc1
channel1 = channel on which mycc1 is instantiated fromc
channel2 = channel2 which has other chaincodes instantiated

To my knowledge system chaincode do not live on any channel, they are instantiated during some boot time, and they might be queried as

1. on the same chain as mycc1

{code}
peer chaincode query -C """" -n qscc -c '
{""Args"":[""GetChainInfo"",""channel1""]}
{code}
2. on a separate chain from mycc1
{code}
peer chaincode query -C channel1 -n mycc1 -c ""
{""Args"":[""query"",""qscc"", ""GetChainInfo"", ""channel2""]}
{code}

3. chainless functions of theirs
(??)

g) One system chaincode calling another system chaincode
(??)

h. Installing chaincodes with same name but different metadata on different peers, and attempting to instantiate and invoke afterwards these chaincodes on each of the peer.

How to pass different metadata on each peer from CLI?
Is this the first call before installing chaincode?

Do rest of the calls (install, instantiate, join, invoke/query) remain the same?

i) Configuration updates of multiple components on a chain 
what configuration updates? How can they be done?;;;","20/Oct/21 6:56 PM;vramaiitkgp;Can I request this issue to be reopened? We are facing the need for such a feature (to be precise, invoking the CSCC from another chaincode to fetch the latest channel configuration). From what we can see in the CSCC code, it disallows such a cross-chaincode invocation ([https://github.com/hyperledger/fabric/blob/main/core/scc/cscc/configure.go#L119...L124).] I understand there are safety issues involved in invoking the CSCC or any other system chaincode if write sets are created in these chaincodes' namespaces, but is it possible to remove the filter for invocations that only produce read sets?

 

In the absence of this feature, any chaincode that needs the channel configuration must depend on Layer-2 agents, which presents safety and synchronization issues.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
node-sdk to update e2e test with using an Admin identity to query for installed chaincodes,FAB-3380,15973,15549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jimthematrix,jimthematrix,jimthematrix,25/Apr/17 2:38 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,04/May/17 6:04 AM,,,,,v1.0.0,,,fabric-sdk-node,,,,0,,,,,,,,https://gerrit.hyperledger.org/r/#/c/8229 now requires an admin user to install chaincode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3429,,,FAB-3360,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr1z:",,,,,,Sprint 15 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/17 12:07 PM;jimthematrix;https://gerrit.hyperledger.org/r/#/c/8499/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
java-sdk to update e2e test with using an Admin identity to query for installed chaincodes,FAB-3381,15974,15549,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rickr,jimthematrix,jimthematrix,25/Apr/17 2:38 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,06/May/17 11:27 PM,,,,,v1.0.0,,,fabric-sdk-java,,,,0,,,,,,,,https://gerrit.hyperledger.org/r/#/c/8229 now requires an admin user to install chaincode,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3361,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr27:",,,,,,Sprint 15 - Crypto,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide more test coverage for chaincode/platforms/golang,FAB-3382,15975,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,muralisr,binhn,binhn,25/Apr/17 3:27 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,26/May/17 6:24 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-peer,,,,0,,,,,,,,"vagrant@hyperledger-devenv:v0.3.0-6807ab6:/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/platforms/golang$ go test -cover
PASS
coverage: 17.0% of statements
ok  	github.com/hyperledger/fabric/core/chaincode/platforms/golang	29.084s

[~muralisr]",,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr2f:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,binhn,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/May/17 6:24 AM;muralisr;UT has been added to improve coverage from 17 to 80+ %. Closing;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Increase gossip unit test coverage,FAB-3383,15976,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,25/Apr/17 7:53 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 7:37 PM,,,,,,,,fabric-gossip,,,,0,gossip,,,,,,,"Gossip unit test coverage is currently pretty good, but can be even better",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr2n:",,,,,,Sprint 16 - Gossip,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document how to bring Kafka-based ordering service up,FAB-3384,15977,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,25/Apr/17 12:09 PM,21/Jul/18 3:56 AM,28/Oct/23 2:59 AM,17/Jun/17 3:18 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-orderer,,,,0,kafka,,,,,,,,,ChristopherFerris,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxr2v:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,ChristopherFerris,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/17 7:27 PM;ChristopherFerris;[~kchristidis] why is this backlog? Seems to me that it is important that we get this into 1.0.;;;","01/Jun/17 11:15 PM;kchristidis;Yeah that was supposed to be FAB-2404, not this one.

This one's in, and in fact it'll be up for review by EOD.;;;","14/Jun/17 2:51 PM;kchristidis;https://gerrit.hyperledger.org/r/#/c/10555/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Increase unit test coverage across the orderer package,FAB-3385,15978,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,kchristidis,kchristidis,25/Apr/17 12:10 PM,21/Jul/18 4:09 AM,28/Oct/23 2:59 AM,10/May/17 10:58 PM,,,,,WON'T FIX,,,fabric-orderer,,,,0,common-components,kafka,,,,,,,,kchristidis,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,Unset,ghx-label-5,,orderer-unit-tests,To Do,,,Unset,,,,"1|hzxr33:",,,,Unset,Unset,,,,,,,,,,,,,,,,,,,,,,,,,kchristidis,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/May/17 10:58 PM;kchristidis;Duplicate of FAB-3631, closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove fabric-testenv-orderer Docker image,FAB-3386,15979,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kchristidis,kchristidis,kchristidis,25/Apr/17 12:11 PM,21/Jul/18 3:55 AM,28/Oct/23 2:59 AM,11/May/17 12:41 AM,v1.0.0-alpha1,,,,v1.0.0-alpha2,,,fabric-orderer,,,,0,common-components,,,,,,,"We need to make our examples/scripts work with production-level artifacts.

The fabric-testenv-orderer image is not an artifact targeted for production. This abundance of options leads to user confusion (I've had folks ask me whether they need to use `fabric-testenv-orderer` to make Kafka work), and it also means we have yet another image we need to maintain.",,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-3040,,,,,,,,,"1|hzxr3b:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/May/17 2:50 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/9145/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up Docker Compose configurations,FAB-3387,15980,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Done,kchristidis,kchristidis,kchristidis,25/Apr/17 1:17 PM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,27/May/17 5:35 AM,v1.0.0-alpha2,,,,v1.0.0,,,fabric-orderer,,,,0,common-components,,,,,,,"Some cruft has been accumulated over time on the orderer-related Docker Compose configurations under the ""bddtests"" folder. This changeset:
 # Removes environment variables that are either deprecated (e.g. `ORDERER_RAMLEDGER`) or not in use by the BDD tests (e.g. all `CONFIGTX` variables since `bootstrap.feature` does not use the `configtxgen` tool, or the `provisional` bootstrapper).
 # Removes configurations that are either no longer relevant (e.g. `bdd-docker/docker-compose-4-consensus-batch-nosnapshotbuffer.yml`) or no longer in use.
 # Moves all Docker Compose files to the `bddtests` folder and renames them to filenames that are hopefully a bit more expressive. Thanks to Jeff Garratt for guiding me through his.
 # Modified the Kafka environment so that it uses the bare-minimum sensisble defaults, and added comments for the critical settings.",,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,,,,,,,,,,"1|hzxr3j:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,kchristidis,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/May/17 5:58 AM;kchristidis;https://gerrit.hyperledger.org/r/#/c/9495/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Serviceability - Operational Metrics for Fabric runtime components,FAB-3388,15981,,Epic,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,sykesm,mastersingh24,mastersingh24,25/Apr/17 9:07 PM,04/Sep/20 1:58 PM,28/Oct/23 2:59 AM,30/Apr/19 11:44 PM,v1.0.2,,,,v1.4.0,v1.4.1,v2.0.0,fabric-orderer,fabric-peer,,,2,HSBN,operations,serviceability,,,,,"When Fabric runtime components are deployed in real-world environments, it will be necessary to provide runtime metrics so that operators can actively monitor the health and status of each component.

Additionally, operators will need a way to integrate these operational metrics into their existing monitoring solutions and/or ask for recommendations for which tools to use.",,AdnanChoudhury,bjwswang,bryangross,cagdast,davidkhala,grapebaba,hou_qing_hui,latitiah,luomin,mastersingh24,moriohara,mplisov,nnao,osmola,ptippett,qizhang87,scottz,SjirNijssen,sykesm,TiantianGao,xixuejia,yingmsky,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-9696,,,,,,,,,,,,,,,,FAB-12871,FAB-12872,FAB-12889,,,,,,,,,,,,,,,,,,"Metrics added in v1.4. Gossip, endorser, CA metrics added in v1.4.1 and v2.0.","Design doc for Fabric peers (FAB-3389):
https://docs.google.com/document/d/1xveVQM6e2XeAZBisYRTSfElmeBeYKntnghGyWPtsMSs/edit",Reviewed,,Done,ghx-label-7,,Serviceability - Operational Metrics for Fabric runtime components,To Do,,,Done,,,,"1|hzxr3r:",,,,No,Not Required,,,,,,,,,,,,,4.0,,,,,,"System Tests:

* Configure the peer and orderer to send statsd metrics to statsd and use something like graphite to record and graph the associated data.
- Run a workload.
- Verify that the metrics make sense for the workload and that the metrics have appropriate names.
* Configure the peer and orderer to use prometheus for metrics. Set up an instance of prometheus with the appropriate service scrape configuration to collect metrics from the peers and orderers.
- Run a workload.
- Verify that the metrics make sense for the workload and that the metrics have appropriate names, labels, and help text.",,,,,,AdnanChoudhury,bjwswang,bryangross,cagdast,davidkhala,grapebaba,hou_qing_hui,latitiah,luomin,mastersingh24,moriohara,mplisov,nnao,osmola,ptippett,qizhang87,scottz,SjirNijssen,sykesm,TiantianGao,xixuejia,yingmsky,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Sep/17 10:49 AM;kchristidis;I see a release-planning-1.2 label and a v1.1 fix-version. What's the target for this one?;;;","23/Feb/18 6:19 AM;mastersingh24;Will keep this on the list for now .... would be good to attack a few metrics as part of usability improvements;;;","23/Feb/18 10:23 AM;grapebaba;Got it. ;;;","31/Oct/18 10:20 PM;latitiah;This epic still needs a test plan summary associated with it. Here is a quick guide for what the summary should contain. Thanks!
{code}
Functional Tests:
 - FAB-XXX1: Make sure config is accepted and turns on feature (Integration) - PersonA
 - FAB-XXX2: What happens when config is set wrong (unit) - PersonA
 - FAB-XXX3: When FeatureX is turned on in both ComponentA and ComponentB (End-to-end) - PersonB
 - FAB-XXX4: When FeatureX is turned on in ComponentA and not ComponentB (End-to-end) - PersonA

System Tests:
 - FAB-XXX5: How is performace impacted when sending 5 packets per second for 3 hours? - PersonC
   * Be sure to set the following config values on ComponentA as such:
     - FEATUREX=true
     - FEATURE_PATH=/some/path/for/my/feature
   * Be sure to send the messages using the foo SDK
 - FAB-XXX6: Is the feature and component stable when executing 10 packets per second for 1 week? - PersonC
   * Be sure to set the following config values on ComponentA as such:
     - FEATUREX=true
     - FEATURE_PATH=/some/path/for/my/feature
{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide framework for operational metrics,FAB-3389,15982,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,grapebaba,ptippett,ptippett,25/Apr/17 9:25 PM,29/Nov/18 11:35 AM,28/Oct/23 2:59 AM,29/Nov/18 11:30 AM,,,,,v1.4.0,,,fabric-orderer,fabric-peer,,,4,HSBN,operations,Serviceability,,,,,"Need metrics from Fabric so users can monitor fabric metrics to be able to support the fabric in a production environment
and maintain a high SLA.

1 - Need to create a metrics component, similar to a logger, that allows a developer to easily publish a metric by including
a few lines in their code at the point an operation they want to publish a metric for occurs.
2 - This metrics component would publish any metrics to a statsd endpoint that was configured in core.yaml.
3 - Metrics we urgently want published are:
	a - Endorsement Count
	b - rejected endorsement count
	c - validated transaction count
	d - invalid transaction count
	e - Block count
	f - channel count per network
        g - endorsement response time (including time spent in statedb, e.g. couchdb queries)



Other requests from Fabric solutions:

Provide basic information about deployed chain code on the chain, such as chain code ID, its deployed time, etc；For each chain code, with proper permission, provide invoke/query metrics data such as TPS, consensus latency(average, 50%, 85%), broken down into different chain code API (function)；Provide storage usage information on peer node. (@huangssh, Nov 16, 2016)
",,baohua,bjwswang,blaed01,caoyu,daijianw,dinotone,divyank,grapebaba,Hangyu_FJH,inatatsu,lovelyidiot,LuckyMart,luomin,MichaelWang,moriohara,mplisov,muralisr,nnao,ptippett,qiang0723,qizhang87,sunhwei,troyronda,xixuejia,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-2174,,,,,,,,,,,,,,"21/Jul/17 6:01 PM;grapebaba;Fabric metrics.pdf;https://jira.hyperledger.org/secure/attachment/11742/Fabric+metrics.pdf","06/Sep/18 9:18 PM;qizhang87;Fabric_metrics_test.pptx;https://jira.hyperledger.org/secure/attachment/15784/Fabric_metrics_test.pptx","06/Sep/18 11:36 AM;qizhang87;Fabric_metrics_test.pptx;https://jira.hyperledger.org/secure/attachment/15781/Fabric_metrics_test.pptx","06/Sep/18 11:28 AM;qizhang87;Fabric_metrics_test.pptx;https://jira.hyperledger.org/secure/attachment/15780/Fabric_metrics_test.pptx",,,,,,,,,,,,,,Unset,,,FAB-3388,,,,,,,,,"1|hzwu47:",,,,Unset,,,,,,,,,,,,,,,Unset,,,,,,,,,,,baohua,bjwswang,blaed01,caoyu,daijianw,dinotone,divyank,grapebaba,Hangyu_FJH,inatatsu,lovelyidiot,LuckyMart,luomin,MichaelWang,moriohara,mplisov,muralisr,nnao,ptippett,qiang0723,qizhang87,sunhwei,troyronda,xixuejia,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jun/17 10:28 AM;grapebaba;[~ptippett] [~mastersingh24]Is this task already in progress or not? I am interested in this one.;;;","30/Jun/17 5:55 PM;grapebaba;[~ptippett] [~mastersingh24] A simple draft degisn is [here |https://docs.google.com/document/d/1nPjGpl5gdd22iF0ju6BLOioWhBOE1U16_-yGCLxEZuw/edit]

Would you like help review it and give some feedback.;;;","17/Jul/17 5:50 PM;grapebaba;[~mastersingh24] Updated the doc, feel free to feed back;;;","21/Jul/17 6:03 PM;grapebaba;The initial design draft is [here|https://docs.google.com/document/d/1nPjGpl5gdd22iF0ju6BLOioWhBOE1U16_-yGCLxEZuw/edit#heading=h.iyk2aiitp4sx];;;","24/Jul/17 1:19 PM;baohua;Maybe present to the pswg, to see if there's useful feedback.

The pswg is working on give some performance tool/number on the hyperledger platform.;;;","20/Dec/17 11:33 PM;blaed01;Hello - 

1) What's the status of the progress made on this?

2) Why did you select those 6 metrics, why are they important?

3) Have you found any other metrics that are important since you opened this case?

Thanks!
 ;;;","07/Mar/18 11:52 PM;kchristidis;What is the status of this? Its priority is set to Highest but there have been no updates for 3 months now. Please update issue with current assignee, if any.;;;","08/Mar/18 12:58 PM;grapebaba;hi [~kchristidis] [~blaed01] will update recently. 

[~blaed01] we not limit this six metrics, just a start from these.;;;","28/Mar/18 4:15 PM;bjwswang;Hi. What's the status now ? I am interested in this part.Hope could help on this .Any thoughts on the priorities between prometheus and  statsD? And why would u choose the Tally project to implement this ? Would it be better that just use the origin library in prometheus or statsD? ;;;","29/Mar/18 12:32 AM;grapebaba;Actually the fundamental work already done, right now we just need collect effective metrics from each modules. Tally can adapte both statsd and Prometheus metrics server easily, that's from a requirement that we need support both;;;","29/Mar/18 12:46 AM;bjwswang;Thanks. Any plan on the following work ? And can I talk with you via rocket chat or other tools you like ? ;;;","29/Mar/18 7:09 PM;grapebaba;Sure, you can find me @grapebaba ;;;","24/Aug/18 11:39 PM;ptippett;[~bjwswang] [~qizhang87] Can you guys post some information on reliability testing of the metrics reporter?  Some things I can think of:

1 - What happens if the back end metrics service is not available?  Do metrics get queued up?  For how long?  Does it store them in memory or on disk?  Want to make sure a large amount of memory and/or disk would not be consumed in this case.

2 - What happens if the metrics component in fabric stops taking requests?  What effect does that have, if any, on anywhere in the fabric where you are trying to send metrics?  Need to ensure that the code that is sending the metrics doesn't block execution while it's waiting or retrying to send or again, queue things up to the point where it causes a reliability issue.

 

Thanks!;;;","24/Aug/18 11:46 PM;grapebaba;[~ptippett] [~bjwswang] [~qizhang87] we are redesigning the fabric metrics with [~muralisr], we will take account into this two question. https://docs.google.com/document/d/1xveVQM6e2XeAZBisYRTSfElmeBeYKntnghGyWPtsMSs/edit;;;","06/Sep/18 11:35 AM;qizhang87;Hi [~ptippett]I did some tests ([^Fabric_metrics_test.pptx]) for the Fabric metrics component, which shows it incurs only negligible overhead in terms of both TPS and resource utilization, even when the metrics server is malfunctioning.;;;","17/Oct/18 4:38 AM;muralisr;The list of metrics listed in Description are important, generic ""fabric"" ones. However they leave out the crucial metric which organizations and users would be glad to avail of - application specific metrics injected by chaincode. Application Chaincodes do not have access to the Fabric Metric APIs directly. We could enhance the gRPC interface to include metrics. This would be invasive and would need to be done for each chaincode language. 

Alternately, this can be easily implemented using a ""MetricsEmitter"" system chaincode callable from any chaincode. A section has been started in  https://docs.google.com/document/d/1xveVQM6e2XeAZBisYRTSfElmeBeYKntnghGyWPtsMSs/edit to expand on this.;;;","29/Nov/18 11:35 AM;MichaelWang;I try to find the commits, and modified the status mistakenly. Sorry for that.;;;",,,,,,,,,,,,,,,,,,,,,,,
flogging must control [cauthdsl] module's logging level,FAB-3390,15983,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,yacovm,yacovm,25/Apr/17 9:27 PM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,27/Apr/17 11:03 PM,v1.0.0,,,,v1.0.0,,,fabric-peer,,,,0,quality,,,,,,,"After the log level tuning there are still 2 modules which are verbose and are emitted into the logs in a timely manner, and should be restricted in the same way the gossip logs were restricted to WARN by default.

{code}
2017-04-25 12:13:53.313 UTC [cauthdsl] func2 -> DEBU 6bb Principal evaluation succeeds: (&{%!s(int32=0)}) (used [%!s(bool=false)])
2017-04-25 12:13:53.313 UTC [cauthdsl] func1 -> DEBU 6bc Gate evaluation succeeds: (&{n:1 policies:<signed_by:0 > })
2017-04-25 12:13:55.387 UTC [common/policies] GetPolicy -> DEBU 6bd Returning policy Application/Readers for evaluation
2017-04-25 12:13:55.387 UTC [cauthdsl] func1 -> DEBU 6be Gate evaluation starts: (&{n:1 policies:<signed_by:0 > })
2017-04-25 12:13:55.387 UTC [cauthdsl] func2 -> DEBU 6bf Principal evaluation starts: (&{%!s(int32=0)}) (used [%!s(bool=false)])
2017-04-25 12:13:55.388 UTC [cauthdsl] func2 -> DEBU 6c0 Principal evaluation succeeds: (&{%!s(int32=0)}) (used [%!s(bool=false)])
2017-04-25 12:13:55.388 UTC [cauthdsl] func1 -> DEBU 6c1 Gate evaluation succeeds: (&{n:1 policies:<signed_by:0 > })
{code}",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr3z:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup Java shim code whitespace,FAB-3391,15985,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sanchezl,sanchezl,sanchezl,26/Apr/17 12:40 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/May/17 2:28 AM,,,,,v1.0.0,,,fabric-peer,,,,0,chaincode,,,,,,,"Fabric Java shim code is inconsistent regarding its use of tabs, spaces and line endings. This will make them consistent.",,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzx4sv:",,,,,,Sprint 16  - Endorser,,,,,,,,,,,,,,,,,,,,,,,,sanchezl,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gerrit git links not using ssl,FAB-3394,15988,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ChristopherFerris,ChristopherFerris,ChristopherFerris,26/Apr/17 1:56 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,17/Jun/17 11:14 AM,v1.0.0-alpha1,,,,v1.0.0,,,fabric-build,,,,0,,,,,,,,"Gerrit defaults to HTTP not HTTPS or SSH for the download link for Git source. Should be SSH or HTTPS by default.

We should investigate whether Gerrit config can be changed to fix this.",,ChristopherFerris,ryjones,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr53:",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ChristopherFerris,ryjones,weeds,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/17 8:37 AM;ryjones;While the http links are shown and are the default, when you check out (or push), you are silently redirected to https links. Does this redirection work? A git remote -v will still show an http remote, even though it works over https;;;","25/May/17 11:47 PM;ChristopherFerris;talking about the default. can we make the default ssh?;;;","03/Jun/17 3:59 AM;weeds;Given this is rated as ""high"", is this making progress? if so, can you add comment please?

 ;;;","03/Jun/17 5:57 AM;ChristopherFerris;dropping to medium, but it would be nice to get some attention, please;;;","07/Jun/17 6:44 AM;ryjones;There are two issues, one of which we can address, one of which we cannot. The [gerrit download plugin|https://gerrit.googlesource.com/plugins/download-commands/] does not allow us to default to ssh - this is a weakness in the plugin itself.

The second issue is that http: instead of https: is offered. This is a config error on gerrit - we will need to take a fifteen minute downtime in order to fix it. I will send mail to the TSC to schedule this downtime in the next few weeks.;;;","07/Jun/17 9:25 AM;ChristopherFerris;perfect thanks. https is an acceptable alternative.;;;","17/Jun/17 11:14 AM;ryjones;default git clone is over https;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve unit test coverage for ledger,FAB-3398,15992,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,,denyeart,denyeart,26/Apr/17 5:02 AM,21/Jul/18 3:54 AM,28/Oct/23 2:59 AM,06/Jul/18 10:51 PM,,,,,v1.0.0,,,fabric-quality,,,,0,,,,,,,,"Improve unit test coverage for ledger.  
There will be a subtask per ledger package.  Developers can pick up any available package subtask to work on.
As each package is inspected, tests can also be refactored and ledger testutil assertions can be replaced with github.com/stretchr/testify/assert assertions. 
Eventually we will be able to remove ledger testutil.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,,,FAB-758,,,,,,,,,"1|hzx31r:",,,,Unset,,Sprint 16 - Quality,,,,,,,,,,,,,Unset,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve unit tests for /fabric/common/ledger packages,FAB-3399,15993,15992,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,denyeart,denyeart,26/Apr/17 5:04 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,05/May/17 8:25 AM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr5z:",,,,,,Sprint 16 - Quality,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve unit tests for /fabric/core/ledger/kvledger,FAB-3400,15994,15992,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Done,balaji.viswanathan,denyeart,denyeart,26/Apr/17 5:05 AM,20/Jul/18 11:12 PM,28/Oct/23 2:59 AM,03/May/17 7:32 PM,,,,,v1.0.0,,,fabric-ledger,,,,0,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzxr67:",,,,,,Sprint 16 - Quality,,,,,,,,,,,,,,,,,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
