Summary,Issue key,Issue id,Parent id,Issue Type,Status,Project key,Project name,Project type,Project lead,Project description,Project url,Priority,Resolution,Assignee,Reporter,Creator,Created,Updated,Last Viewed,Resolved,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Affects Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Fix Version/s,Component/s,Component/s,Component/s,Component/s,Component/s,Due Date,Votes,Labels,Labels,Labels,Labels,Labels,Description,Environment,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Watchers,Original Estimate,Remaining Estimate,Time Spent,Work Ratio,Σ Original Estimate,Σ Remaining Estimate,Σ Time Spent,Security Level,Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Inward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Outward issue link (Blocks),Inward issue link (Cloners),Inward issue link (Cloners),Outward issue link (Cloners),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Inward issue link (Duplicate),Outward issue link (Duplicate),Inward issue link (Issue split),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Inward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Outward issue link (Relates),Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Attachment,Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Authorized Watchers),Custom field (Business Value),Custom field (Commit Levels),Custom field (Current Status),Custom field (Design),Custom field (Design Status),Custom field (Documentation Impact),Custom field (Documentation Status),Custom field (Epic Color),Custom field (Epic Link),Custom field (Epic Name),Custom field (Epic Status),Custom field (Executed),Custom field (Found in Commit),Custom field (Function Test Status),Custom field (Must Fix),Custom field (Original story points),Custom field (Parent Link),Custom field (Rank),Custom field (Release Note),Custom field (Release Note Required),Custom field (Root Cause Analysis),Custom field (SDK Impact),Custom field (Sample/Tutorial),Sprint,Custom field (Steps to Reproduce),Custom field (Story Points),Custom field (System Test Impact),Custom field (Target end),Custom field (Target start),Custom field (Team),Custom field (Team),Custom field (Test Plan),Custom field (Test Result),Custom field (Test Result Details),Custom field (Test Type),Custom field (Triaged),Custom field (Usage),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Watchers),Custom field (Workaround),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitBranch),Custom field (gitCommitsReferenced),Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment,Comment
Validate against resulting config instead of config update,FAB-14851,38817,38793,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,guoger,guoger,28/Mar/19 11:14 AM,02/Dec/19 5:14 PM,28/Oct/23 3:08 AM,02/Dec/19 5:14 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,https://gerrit.hyperledger.org/r/c/30424/4/orderer/consensus/etcdraft/chain.go#438,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i5b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 5:14 PM;guoger;Already taken care of during config tx processor refactoring;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ensure PEM contains a certificate,FAB-14852,38820,38768,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,28/Mar/19 6:26 PM,02/Apr/19 5:19 AM,28/Oct/23 3:08 AM,28/Mar/19 11:38 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i5j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft integration test need to wait for ordering service to become available before contnue to actual test case.,FAB-14853,38821,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,28/Mar/19 9:29 PM,15/May/19 9:46 PM,28/Oct/23 3:08 AM,15/May/19 9:46 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,"Before running integration test use case, which works with several Raft nodes, there is a need to make sure ordering service is available. Therefore need to test, whenever Raft nodes conducted leader election before continue.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00i5r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Mar/19 9:31 PM;C0rWin; https://gerrit.hyperledger.org/r/30489 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use context with timeout when CLIs connect to endorser/ordering endpoint,FAB-14854,38822,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ales,ales,28/Mar/19 10:02 PM,23/Jan/20 7:32 AM,28/Oct/23 3:08 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,,,,,,,,,,0,stale-item,,,,,"Currently the only timeout that would prevent an unresponsive endpoint (ordering/endorsing) from stalling a CLI invocation forever is the long grpc connection timeout. We should instead supply a context with a timeout as part of the invocation, and expose a timeout.",,ales,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i5z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consolidate single node Raft e2e tests,FAB-14855,38823,38844,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,28/Mar/19 10:12 PM,15/May/19 9:45 PM,28/Oct/23 3:08 AM,15/May/19 9:45 PM,v2.0.0,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"There are few tests in e2e test suite related to Raft which spans single node ordering service network. There is actually no need to span and create resources for those test, but could be optimized and consolidated into one test case, hence improving execution time and utilization.",,C0rWin,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i67:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Mar/19 10:12 PM;C0rWin;https://gerrit.hyperledger.org/r/30493 ;;;","03/Apr/19 12:51 PM;denyeart;[~C0rWin] this should be cherry-picked to release-1.4 right?  As a matter of policy I'd recommend to do the cherry picks upon merge so that we don't miss any.;;;","03/Apr/19 4:44 PM;C0rWin;[~denyeart] 
{quote}
As a matter of policy I'd recommend to do the cherry picks upon merge so that we don't miss any.
{quote}
Agreed. https://gerrit.hyperledger.org/r/#/c/30667/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper usage in core/container,FAB-14856,38826,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,28/Mar/19 11:27 PM,08/May/19 1:35 AM,28/Oct/23 3:08 AM,08/May/19 1:35 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i6v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/19 1:35 AM;btl5037;https://gerrit.hyperledger.org/r/c/30656/6;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a user from an org with channel reader permission, I should be able to invoke chaincode that queries the channel",FAB-14857,38827,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,denyeart,denyeart,28/Mar/19 11:28 PM,11/Aug/19 6:42 PM,28/Oct/23 3:08 AM,11/Aug/19 6:42 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"As an org with channel Reader permission, I should be able to invoke chaincode that queries channel ledger data.

Currently you must have channel Writer permission to invoke a chaincode that only queries (reads) channel ledger data.  This does not make sense and has caused problems for many users.

We should either check access control based on the actual chaincode operations performed (e.g. Puts vs Gets), or we should make this explicit and introduce a read-only Invoke that can only do Gets (no Puts) that channel Readers can call.
",,denyeart,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-6959,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i73:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Aug/19 6:42 PM;mastersingh24;bumped FAB-6959 to high to match;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address flake in TestSendBigMessage,FAB-14858,38829,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,29/Mar/19 12:02 AM,16/Jul/19 10:33 PM,28/Oct/23 3:08 AM,29/Mar/19 1:55 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14116,,,,,,,,,,FAB-15974,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i7j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryInstalledChaincode and QueryChaincodeDefinition should return 404 not found,FAB-14859,38830,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,29/Mar/19 12:03 AM,29/Mar/19 5:29 AM,28/Oct/23 3:08 AM,29/Mar/19 5:29 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"QueryInstalledChaincode and QueryChaincodeDefinition should return ""404 Not Found"" to distinguish between a true error and simply that the desired chaincode/chaincode definition was not found.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00i7r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/19 12:24 AM;wlahti;https://gerrit.hyperledger.org/r/c/30498/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
skip submitting missing pvtData of invalid tx to txmgr ,FAB-14861,38832,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Senthil1,Senthil1,Senthil1,29/Mar/19 12:26 AM,27/Jul/19 11:19 AM,28/Oct/23 3:08 AM,01/Jul/19 1:04 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-ledger,,,,,,0,,,,,,"As we are storing pvtData of both valid and invalid tx, we do store missing info for both valid and invalid tx. When the reconciler fetches the missing pvtData, it passes to the ledger coordinator. As the pvtData contains data of both valid and invalid tx, we need to pass both to pvtdataStore and only valid tx's pvtData to the txmgr.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i7z:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow transfer when there is remaining quantity after transfer,FAB-14862,38833,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,29/Mar/19 12:50 AM,04/Apr/19 8:11 AM,28/Oct/23 3:08 AM,04/Apr/19 8:11 AM,,,,,,,,,,,,,,,,,,,,,,,,0,fabtoken,,,,,"Currently, you must transfer exact same quantity as the quantity in token ids. This causes usability issue because client will have to subtract to get the remaining quantity and include it in the transfer share.

Update transactor.go to automatically calculate the remaining quantity and include it in the token transaction. 

 ",,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00i87:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/19 8:10 AM;wenjian;CR: [https://gerrit.hyperledger.org/r/#/c/30501/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address flake in TestBlockingSend,FAB-14863,38835,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,29/Mar/19 1:50 AM,01/Apr/19 10:54 PM,28/Oct/23 3:08 AM,29/Mar/19 4:42 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,FAB-14817,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i8n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve error message for missing private data,FAB-14865,38839,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,denyeart,denyeart,29/Mar/19 3:36 AM,05/Apr/19 3:13 AM,28/Oct/23 3:08 AM,05/Apr/19 3:13 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,"In the below error, the block number and transaction number should be an integer:


{code:java}
2019-03-27 15:18:47.031 UTC [chaincode] HandleTransaction -> ERRO 05d�[0m [91cf2bcd] Failed to handle GET_STATE. error: Private data matching public hash version is not available. Public hash version = &version.Height{BlockNum:0xe4, TxNum:0x0}, Private data version = &version.Height{BlockNum:0xe2, TxNum:0x0
{code}
",,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00i9j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Mar/19 12:06 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/30506/ Updated message merged and cherry picked to release-1.4 and release-1.3. 

Will leave Jira open to update other related locations as well.;;;","30/Mar/19 8:19 PM;mastersingh24;A Pivotal Tracker story has been created for this Issue: https://www.pivotaltracker.com/story/show/165001838;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Error in peer log for ""Config history manager""",FAB-14866,38840,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,latitiah,latitiah,29/Mar/19 5:53 AM,16/May/19 10:49 PM,28/Oct/23 3:08 AM,16/May/19 10:49 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"The following error is seen in the peer logs after an invoke (looks as though it occurs when a block is being committed to the ledger)
{code}
HandleStateUpdates -> ERRO 212 Config history manager is expected to recieve events only if at least one chaincode is updated stateUpdates = ledger.StateUpdates{""_lifecycle"":(*ledger.KVStateUpdates)(0xc002e793a0)}
{code}

",,latitiah,manish-sethi,wlahti,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15095,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:ir",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,manish-sethi,wlahti,yoheiueda,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 12:06 AM;wlahti;Just making a note that this error message shouldn't appear anymore once we get the ledgermgmt/cceventmgmt and service discovery code paths working with _lifecycle. ;;;","08/Apr/19 9:27 PM;wlahti;Since we know this won't work in time for alpha, perhaps we should temporarily remove / change the level of this log message .;;;","16/May/19 10:26 AM;manish-sethi;https://gerrit.hyperledger.org/r/31393;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Log chaincode definitions,FAB-14867,38841,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,29/Mar/19 6:01 AM,03/Apr/19 2:07 AM,28/Oct/23 3:08 AM,03/Apr/19 2:07 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,logannwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00i9z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,logannwu,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As Fabric developer, i want Raft integration tests to complete more quickly with at least same coverage",FAB-14869,38844,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,guoger,guoger,guoger,29/Mar/19 11:26 AM,02/Dec/19 5:21 PM,28/Oct/23 3:08 AM,02/Dec/19 5:21 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,Consolidate integration tests to avoid unnecessary resource allocation and bootstrap,,guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14772,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00ian:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 8:19 PM;mastersingh24;A Pivotal Tracker story has been created for this Issue: https://www.pivotaltracker.com/story/show/165001837;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consolidate etcdraft reconfig integrationt tests,FAB-14870,38845,38844,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,guoger,guoger,guoger,29/Mar/19 11:28 AM,02/Dec/19 5:21 PM,28/Oct/23 3:08 AM,02/Dec/19 5:21 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,,,guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iav:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 8:19 PM;mastersingh24;A Pivotal Tracker story has been created for this Issue: https://www.pivotaltracker.com/story/show/165001836;;;","02/Dec/19 5:21 PM;guoger;Raft integration tests have been consolidated during several iterations.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extricate etcdraft consensus parameter validation from the etcdraft consensus plugin,FAB-14871,38846,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adarshsaraf123,jyellick,jyellick,29/Mar/19 1:11 PM,09/Jul/19 11:08 PM,28/Oct/23 3:08 AM,09/Jul/19 11:08 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ipm,,,,,"The etcdraft package presently handles all of the parsing and validation of config updates for etcdraft consensus parameters within the etcdraft package itself.

This is very problematic for a number of reasons:

1) This forces etcdraft to re-implement the config update parsing, and there have been several bugs discovered around scenarios where that parsing was actually not being done correctly.
2) There are multiple reconfiguration scenarios, including creating new channels, modifying existing channels, starting up in a bootstrap scenario, where the config must be validated, and all of these cases are currently handled independently (though with some shared code).
3) Finally, the interwoven nature of config processing with the rest of the consensus logic is simply messy and difficult to maintain, and makes understanding the consensus plugin more difficult.

Finally, as we move towards BFT, we will almost definitely need a very similar plug-point for BFT config update validation.  We should be able to convert this processing into a re-usable component acceptable for both.",,jyellick,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00mth:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 8:19 PM;mastersingh24;A Pivotal Tracker story has been created for this Issue: https://www.pivotaltracker.com/story/show/165001835;;;","09/Jul/19 11:08 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/30811/12;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deprecate the old consenter metadata storage location and prefer the metadata stored in the block signature.,FAB-14872,38847,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,jyellick,jyellick,29/Mar/19 1:18 PM,09/Jul/19 11:11 PM,28/Oct/23 3:08 AM,09/Jul/19 11:11 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ipm,ipm-planned,,,,"Today, the consensus plugins use the 4th field of the block metadata to store their consensus metadata info.  This made sense for Kafka, as each node was producing the blocks locally and the metadata was never shared.  However, for Raft, a single node is producing the metadata, and the block is then shared across orderers.

Because the block is shared but there is no integrity over the block metadata, for v1.4.1, the metadata was added into the bytes over which there was a block signature via FAB-14697 however, now the block metadata is duplicated in two places.

For v2.0.0, we should stop writing the metadata into the old spot, and we should prefer the metadata encoded into the first metadata field if it exists when bootstrapping a chain.  This will be especially important as we move towards BFT and the assurances provided by TLS and Deliver become much weaker, and metadata correctness will need to be checked by signature.

This will likely require modifications to the consenter interface for block writing, as metadata is currently passed as a part of the block to WriteBlock and it should be passed explicitly.",,jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00mth:9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 8:19 PM;mastersingh24;A Pivotal Tracker story has been created for this Issue: https://www.pivotaltracker.com/story/show/165001833;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update miekg/pkcs11 dependency,FAB-14873,38850,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,firas.qutishat,firas.qutishat,29/Mar/19 10:22 PM,23/Jan/20 7:32 AM,28/Oct/23 3:08 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,,,,,,,,,,0,stale-item,,,,,,,firas.qutishat,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ibr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),firas.qutishat,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Fix up ""orderer deploy""",FAB-14874,38851,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,29/Mar/19 10:26 PM,30/Mar/19 8:29 PM,28/Oct/23 3:08 AM,30/Mar/19 2:39 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-docs,,,,,,0,,,,,,Links and simplification.,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00ibz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix orderer concept,FAB-14875,38852,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,29/Mar/19 10:28 PM,30/Mar/19 8:29 PM,28/Oct/23 3:08 AM,30/Mar/19 2:38 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,,0,,,,,,Link.,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00ic7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix what's new,FAB-14876,38853,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,29/Mar/19 10:28 PM,30/Mar/19 8:30 PM,28/Oct/23 3:08 AM,30/Mar/19 2:38 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,,,,,,,0,,,,,,Links.,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00icf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix raft config,FAB-14877,38854,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,29/Mar/19 10:29 PM,30/Mar/19 8:31 PM,28/Oct/23 3:08 AM,30/Mar/19 2:39 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-docs,,,,,,0,,,,,,Links,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00icn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Panic in Peer log when performing (unnecessary) invoke after chaincode redefinition,FAB-14878,38855,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,ales,latitiah,latitiah,29/Mar/19 10:46 PM,01/Apr/19 6:07 PM,28/Oct/23 3:08 AM,01/Apr/19 6:07 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The peer panics when performing an invoke on the init function after a chaincode redefinition has taken place. While the invoke is not necessary unless the chaincode has actually changed, the panic should not take place. There should be an error message instead that states something along the lines of ""init has already been completed'.

Logs have been attached (panic appears in peer0.org3.example.com log).",,ales,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 10:47 PM;latitiah;6d9a8f22518711e99fce023052256069-peer0.org1.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17034/6d9a8f22518711e99fce023052256069-peer0.org1.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;6d9a8f22518711e99fce023052256069-peer0.org2.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17035/6d9a8f22518711e99fce023052256069-peer0.org2.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;6d9a8f22518711e99fce023052256069-peer0.org3.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17036/6d9a8f22518711e99fce023052256069-peer0.org3.example.com-mycc_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;ca.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17046/ca.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;ca.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17045/ca.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;ca.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17044/ca.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;orderer0.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17043/orderer0.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;peer0.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17042/peer0.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;peer0.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17041/peer0.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;peer0.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17040/peer0.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;peer1.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17039/peer1.org1.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;peer1.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17038/peer1.org2.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log","29/Mar/19 10:47 PM;latitiah;peer1.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log;https://jira.hyperledger.org/secure/attachment/17037/peer1.org3.example.com_FAB-13971__Test_adding_new_org_using_new_chaincode_lifecycle.log",,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00icv:",,,,Unset,Unset,,"This was found using the behave framework using the following steps:
  Given I changed the ""Application"" capability to version ""V2_0""
  And I have a bootstrapped fabric network of type solo
  And I want to use the new chaincode lifecycle
  When an admin sets up a channel
  And an admin packages a chaincode
  And the organization admins install the chaincode package on all peers
  Then a packageId is received on all peers
  When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')""
  And an admin commits the chaincode package to the channel
  And I wait up to ""10"" seconds for the chaincode to be committed

  When a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on both orgs
  And I wait up to ""30"" seconds for deploy to complete
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 1000
  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 990

  # Start update process
  When an admin adds an organization to the channel config
  # Assume channel config file is distributed out of band
  And all organization admins sign the updated channel config
  When the admin updates the channel using peer ""peer0.org1.example.com""

  When an admin fetches genesis information using peer ""peer0.org1.example.com""
  Then the config block file is fetched from peer ""peer0.org1.example.com""
  Then the updated config block contains Org3ExampleCom

  When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]
  And I wait ""5"" seconds
  When a user queries on the chaincode with args [""query"",""a""]
  Then a user receives a success response of 980

  When the peers from the added organization are added to the network

  When an admin fetches genesis information at block 0 using peer ""peer0.org3.example.com""
  When an admin makes peer ""peer0.org3.example.com"" join the channel
  And an admin makes peer ""peer1.org3.example.com"" join the channel

  When the organization admins install the chaincode package on peer ""peer0.org3.example.com""
  Then a packageId is received on peer ""peer0.org3.example.com""
  When the organization admins install the chaincode package on peer ""peer1.org3.example.com""
  Then a packageId is received on peer ""peer1.org3.example.com""

  When each organization admin approves the upgraded chaincode package with policy ""OutOf(1,'org1.example.com.member','org2.example.com.member','org3.example.com.member')""

  And an admin commits the chaincode package to the channel on peer ""peer0.org3.example.com""
  And I wait up to ""10"" seconds for the chaincode to be committed on peer ""peer0.org3.example.com""
  When a user invokes on the chaincode with args [""init"",""a"",""1000"",""b"",""2000""] on  ""peer0.org3.example.com""
  When a user queries on the chaincode with args [""query"",""a""] from ""peer0.org3.example.com""
  Then a user receives a success response of 970 from ""peer0.org3.example.com""",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Apr/19 6:07 PM;ales;Thanks Latitia. I believe what we have in the logs is not a panic, just an error whose full stack trace is also logged

 
{noformat}
[31m2019-03-28 18:33:01.463 UTC [endorser] SimulateProposal -> ERRO 186[0m [behavesystest][87118c9c] failed to invoke chaincode name:""mycc"" , error: chaincode 'mycc' is already initialized but called as initt
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).CheckInit
	/go/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:367
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Invoke
	/go/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:318
...{noformat}
Indeed, chaincode_support.go:367 has

 
{code:java}
endorserLogger.Errorf(""[%s][%s] failed to invoke chaincode %s, error: %+v"", txParams.ChannelID, shorttxid(txParams.TxID), cid, err)
{code}
which is just returning the error. The full stack trace is printed because the endorser has this log entry
{code:java}
res, ccevent, err = e.callChaincode(txParams, idBytes, requiresInit, cis.ChaincodeSpec.Input, cid)
if err != nil {
       endorserLogger.Errorf(""[%s][%s] failed to invoke chaincode %s, error: %+v"", txParams.ChannelID, shorttxid(txParams.TxID), cid, err)
       return nil, nil, nil, nil, err
}
{code}
Where you can see that the error is printed using the %+v directive which includes the stack trace. We could restrict to %s which would only print the error message, but it might be helpful to have the full stack trace for debugging purposes.

 

For these reasons I'll tentatively close the issue - feel free to reopen if you think that we should change something.

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pass context to tx_submitter instead of building it,FAB-14879,38856,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wenjian,wenjian,wenjian,29/Mar/19 10:53 PM,23/Jan/20 7:32 AM,28/Oct/23 3:08 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,,,,fabric-token,,,,,,0,stale-item,,,,,"Refer to Matt's comment: 

[https://gerrit.hyperledger.org/r/#/c/28302/18/token/client/tx_submitter.go@90]",,sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00id3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix intro doc link,FAB-14880,38858,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,29/Mar/19 11:42 PM,30/Mar/19 8:31 PM,28/Oct/23 3:08 AM,30/Mar/19 2:39 AM,,,,,,,,,,,,,,v1.4.1,,,,,,,,,,0,,,,,,,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00idj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cut v1.4.1-rc1 release,FAB-14881,38859,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,29/Mar/19 11:48 PM,03/Apr/19 10:58 AM,28/Oct/23 3:08 AM,03/Apr/19 10:58 AM,v1.4.0,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,1,,,,,,"Prepare and publish v1.4.1-rc1 release of Hyperledger Fabric. The tasks are listed in execution order and I have indicated any dependencies in the description of each.

 ",,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13111,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00idr:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Mar/19 11:54 PM;JonathanLevi;[~denyeart] This weekend, or on Monday/Tuesday?;;;","30/Mar/19 12:39 PM;denyeart;[~JonathanLevi] Done as of Friday night... note only 'fabric' project has a v1.4.1-rc1, so that users can try it and provide feedback on new Raft ordering service.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - verify release jobs to support 1.4.1-rc1 release,FAB-14882,38860,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,denyeart,29/Mar/19 11:48 PM,30/Mar/19 10:52 AM,28/Oct/23 3:08 AM,30/Mar/19 10:52 AM,,,,,,,,,,,,,,v1.4.0,,,,fabric-ci,fabric-release,,,,,0,fabric-ci,,,,,Make sure all the release jobs are ready for release.,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00idz:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric for 1.4.1-rc1 release,FAB-14883,38861,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,29/Mar/19 11:48 PM,30/Mar/19 5:07 AM,28/Oct/23 3:08 AM,30/Mar/19 5:07 AM,,,,,,,,,,,,,,v1.4.0,,,,fabric-release,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

*----------*

{\{git checkout master }}

{{git pull}}

_*checkout the CR from Gerrit - be sure you have latest!!!*_ 

{{git checkout -b <newbranch>}}

{\{git rebase master }}

git commit --amend

*_make a tweak to commit message_*

git review

 

Check for clean CI passes

merge

----------------------

Changes

----------------------------

Update bootstrap.sh for latest baseimage:

export THIRDPARTY_IMAGE_VERSION=0.4.13

 

Update Makefile

{{BASE_VERSION}}
 {{PREV_VERSION}}

EXPERIMENTAL ?= false

 
 Update docs/source/install.rst 

e.g. 
 curl -sSL [https://goo.gl/6wtTN5] | bash -s 1.3.0-rc1--
  

grep code for last release number or rc1, ensure all other references updated.

{{release_notes/v1.3.0.txt should be created}}

{{docs/source/releases.rst should be updated with prose and link to GH release page}}

Update hard coded release version in cryptogen, configtxgen, configtxlator, idemixgen binaries, e.g. *common/tools/configtxlator/metadata/metadata.go* (try to resolve this in the future)

{{change log should be generated just *after* *rebasing* to pick up the last minute merged CRs and linked from docs/source/releases.rst}}

./scripts/changelog.sh v1.3.0-rc1 v1.3.0",,ChristopherFerris,denyeart,luomin,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00ie7:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,luomin,sambhavdutt,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric for next release,FAB-14884,38862,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,29/Mar/19 11:48 PM,30/Mar/19 6:01 PM,28/Oct/23 3:08 AM,30/Mar/19 6:01 PM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the v1.4.0-rc1 release.

Update Makefile

BASE_VERSION = 1.4.0-rc1

PREV_VERSION = 1.3.0

EXPERIMENTAL ?= true

 

Also, update master branch to have BASE_VERSION=1.4.0

Note: Release should be tagged prior to merging this ""prepare for next CR"".",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00ief:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Mar/19 12:32 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/30559/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify fabric docker images are published,FAB-14887,38865,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,denyeart,29/Mar/19 11:48 PM,30/Mar/19 10:54 AM,28/Oct/23 3:08 AM,30/Mar/19 10:54 AM,,,,,,,,,,,,,,v1.4.0,,,,fabric-ci,fabric-release,,,,,0,,,,,,Verify fabric docker images are published to hyperledger docker-hub account and make sure fabric-binaries are published to nexus repository.,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00if3:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Push multiarch manifests,FAB-14888,38866,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,ChristopherFerris,denyeart,29/Mar/19 11:48 PM,30/Mar/19 10:54 AM,28/Oct/23 3:08 AM,30/Mar/19 10:54 AM,,,,,,,,,,,,,,v1.4.0,,,,fabric-build,,,,,,0,,,,,,BASE_VERSION=1.4.1-rc1 scripts/multiarch.sh user password,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00ifb:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test download of release artifacts and samples across all platforms,FAB-14889,38867,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,ChristopherFerris,denyeart,29/Mar/19 11:48 PM,30/Mar/19 12:33 PM,28/Oct/23 3:08 AM,30/Mar/19 12:33 PM,,,,,,,,,,,,,,v1.4.0,,,,fabric-release,,,,,,0,,,,,,test download of release artifacts and samples across all platforms,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00ifj:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 11:34 AM;vijaypunugubati;Please check the below links for tested Byfn: default, custom, node chaincode, and CouchDB.

https://jenkins.hyperledger.org/sandbox/job/fabric-end-2-end-checks-master-s390x_1/4/consoleFull

https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-checks-master-x86_64/1/consoleFull

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tag repositories for 1.4.1-rc1,FAB-14896,38874,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,29/Mar/19 11:48 PM,30/Mar/19 12:33 PM,28/Oct/23 3:08 AM,30/Mar/19 12:33 PM,,,,,,,,,,,,,,v1.4.0,,,,fabric-release,,,,,,0,,,,,,"*NOTE:* depends on preceding related CRs being merged.

Tag each repository local clone with the release_notes/v1.2.0.txt as the tag comment

% git tag -a v1.4.0-rc1 -F release_notes/v1.4.0-rc1.txt

{{% git push origin v1.4.0-rc1 HEAD:refs/heads/master}}

Tag each of fabric, fabric-ca , fabric-chaincode-java ad fabric-samples (use v1.4.0-rc1).

 
----
Note, that one can also tag the repo at a specific commit-level.

NOTE *e4b4704 should be updated with latest commit sha*

E.g., to add the {color:#f79232}*v1.4.0-rc1*{color} tag at commit level {color:#205081}*e4b4704*{color}, I used

{{% git tag -a *{color:#f79232}v1.4.0-rc1{color} {color:#205081}e4b4704{color}* -}}F release_notes/v1.4.0-rc1.{{txt}}

 

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00ih3:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify doc build status on ReadTheDocs,FAB-14898,38876,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,rameshthoomu,denyeart,29/Mar/19 11:48 PM,30/Mar/19 12:34 PM,28/Oct/23 3:08 AM,30/Mar/19 12:34 PM,,,,,,,,,,,,,,v1.4.0,,,,fabric-ci,fabric-docs,fabric-release,,,,0,,,,,,Verify readthedocs version release-1.4 gets built and published from release-1.4 branch edits.,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00ihj:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric-samples for 1.4.1-rc1 release,FAB-14900,38878,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,denyeart,denyeart,29/Mar/19 11:48 PM,30/Mar/19 12:37 PM,28/Oct/23 3:08 AM,30/Mar/19 12:36 PM,,,,,,,,,,,,,,v1.4.0,,,,fabric-samples,,,,,,0,,,,,,"Update version references in fabric-samples, and then tag fabric-samples and create release-1.4 branch.

See associated CR for updates.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ihz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 12:36 PM;denyeart;Will be done for final v1.4.1, not v1.4.1-rc1.

Tag v1.4.1-rc1 has been applied however, so that download script checks out the correct version of fabric-samples.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Send email to hyperledger-fabric mailing list,FAB-14901,38879,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,29/Mar/19 11:48 PM,03/Apr/19 10:57 AM,28/Oct/23 3:08 AM,03/Apr/19 10:57 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,send email announcing the release to hyperledger-fabric@lists.hyperledger.org mailing list.,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00ii7:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Pin fabric-samples to node.js ""~1.4.1""",FAB-14902,38880,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,denyeart,denyeart,29/Mar/19 11:48 PM,30/Mar/19 12:35 PM,28/Oct/23 3:08 AM,30/Mar/19 12:35 PM,,,,,,,,,,,,,,v1.3.0,,,,fabric-samples,,,,,,0,,,,,,"*AFTER V1.4.0 ONLY... NOT AFTER V1.4.0-RC1.*

After creating release-1.4 branch, pin the fabric samples to use version ""~1.4.0"" of node sdk and node chaincode.  This will forever align fabric samples in release-1.4 branch with the 1.4.x node.js releases. 

fabric-samples master branch continues to use ""unstable"" to pick up the latest and greatest node.js releases.

This should be merged in release-1.4 branch, before fabric-samples is tagged with ""v1.4.0"".

 

*Clarification - for v1.4.0-rc1 node sdk had a release, therefore we pinned at ""1.4.0-rc1"" until final release.*",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00iif:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Mar/19 12:35 PM;denyeart;Will do upon final v1.4.1 release.. not for v1.4.1-rc1.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Use of ""None"" as field name causes compiler error in Scala (None is keyword).",FAB-14904,38883,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,ales,jeffgarratt,jeffgarratt,30/Mar/19 2:15 AM,01/Apr/19 11:04 PM,28/Oct/23 3:08 AM,01/Apr/19 11:04 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The ChaincodeSource message in protos/peer/lifecycle/lifecycle.proto has a field name of ""None"", which is a keyword in Scala.  I spoke with [~jyellick] and he suggested ""Unavailable"".  He also stated that this should NOT cause ABI break.",,ales,jeffgarratt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ij3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,jeffgarratt,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 5:54 PM;ales;Thanks [~jeffgarratt], should be fixed here https://gerrit.hyperledger.org/r/30574;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace gometalinter with golangci-lint,FAB-14905,38886,36696,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,30/Mar/19 3:32 AM,03/Apr/19 12:08 AM,28/Oct/23 3:08 AM,02/Apr/19 12:08 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Gometalinter has been deprecated.  The recommended replacement is [golangci-lint|https://github.com/golangci/golangci-lint].",,bpbuch,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ijr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,lehors,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/19 12:08 AM;lehors;https://gerrit.hyperledger.org/r/#/c/30556/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric master references to v1.4.1-rc1,FAB-14906,38887,38859,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,30/Mar/19 4:17 AM,30/Mar/19 6:01 PM,28/Oct/23 3:08 AM,30/Mar/19 6:01 PM,,,,,,,,,,,,,,v1.4.1,,,,,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ijz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use go modules instead of dep,FAB-14907,38889,36696,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,30/Mar/19 4:57 AM,03/Apr/19 12:06 AM,28/Oct/23 3:08 AM,03/Apr/19 12:06 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Modules are becoming the supported way for handling dependencies in golang.  Dep should be replaced with go mod.,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ikf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 3:37 AM;bpbuch;https://gerrit.hyperledger.org/r/#/c/30594/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support various versions of java chaincode javaenv and node chaincode baseimage,FAB-14908,38890,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,30/Mar/19 6:08 AM,29/May/19 7:59 PM,28/Oct/23 3:08 AM,29/May/19 7:59 PM,,,,,,,,,,,,,,v1.4.1,,,,fabric-peer,,,,,,0,,,,,,"Allow java chaincode javaenv and node chaincode baseimage to be at different version level than Fabric, by changing the javaenv and baseimage versions to 'latest' in core.yaml instead of specifying the Fabric version.

This will allow Fabric to work with different versions of chaincodes.  For example with this change Fabric v1.4.1-rc1 and v1.4.1 could work with javaenv v1.4.0. Similarly Fabric v1.4.1 could work with a newer javaenv or baseimage if there was a newer java or Node.js fixpack that was needed.

The only downside is that if a user forgets to pull the latest version of javaenv or baseimage, they could be using older versions without knowing it, and these older versions at some point may become incompatible.

Note that because the javaenv and baseimage version is defined in core.yaml, it can still be overridden with environment variables to specify an exact version.

Similar updates were made for v2.0 in FAB-11096:
https://gerrit.hyperledger.org/r/#/c/27491/33/sampleconfig/core.yaml",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ikn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 12:03 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/30552/ - release-1.4

;;;","02/Apr/19 12:04 AM;denyeart;There have been some issues with getting undesired versions pulled, we've decided to revert this change before v1.4.1 goes out:

https://gerrit.hyperledger.org/r/#/c/30590/ - revert in release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky Integration Test - [It] executes an etcdraft network with 2 orgs and three orderer nodes,FAB-14909,38892,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,30/Mar/19 11:39 AM,10/Apr/19 1:03 PM,28/Oct/23 3:08 AM,04/Apr/19 12:50 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7801/consoleFull

Several problems contribute to this failure:
1. There are ~3.4 seconds delay between these two operations:
{code}
18:05:45 [e][OrdererOrg.orderer2] 2019-03-29 10:04:46.755 UTC [fsblkstorage] newBlockfileMgr -> INFO 040 Getting block information from block storage
18:05:45 [e][OrdererOrg.orderer2] 2019-03-29 10:04:50.102 UTC [orderer.consensus.etcdraft] createOrReadWAL -> INFO 041 No WAL data found, creating new WAL at path '/tmp/e2e581931518/orderers/OrdererOrg.orderer2/etcdraft/wal/testchannel' channel=testchannel node=2
{code}
we probably should have more logs in between for serviceability, i.e. throw out warning if read operation takes too long.

2. fsync takes too long to persist wal data (this is observed fairly frequently on CI)

3. seemingly message -lost- delay during election. Node 2 made several attempts before eventually being elected

*EDIT*
another factor:
4. pick node start proactive campaign too excessively, which results in votes at old term being ignored. [patch|https://gerrit.hyperledger.org/r/c/30622/] is submitted to increase campaign interval.",,C0rWin,denyeart,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00il3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,guoger,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 10:07 PM;C0rWin;another one: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7801/console

{quote}
10:05:45 • Failure [62.140 seconds]
10:05:45 EndToEnd three node etcdraft network with 2 orgs [It] executes an etcdraft network with 2 orgs and three orderer nodes 
10:05:45 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/e2e_test.go:205
10:05:45 
10:05:45   Timed out after 60.061s.
10:05:45   Expected
10:05:45       <int>: 1
10:05:45   to equal
10:05:45       <int>: 0
10:05:45 
10:05:45   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network.go:769
10:05:45 ------------------------------
10:07:19 •••
10:07:19 
10:07:19 Summarizing 1 Failure:
{quote}
;;;","02/Apr/19 2:01 PM;guoger;https://gerrit.hyperledger.org/r/30623 master
https://gerrit.hyperledger.org/r/c/30669 release-1.4;;;","03/Apr/19 1:38 PM;denyeart;Merged in master. 
[~guoger] I assume you cherry pick to release-1.4 upon merge in master?;;;","03/Apr/19 5:04 PM;guoger;[~denyeart] cherry-picked at https://gerrit.hyperledger.org/r/c/30669;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow different cc instances backed by the same package to cc2cc,FAB-14913,38896,38322,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,ales,ales,ales,31/Mar/19 11:23 PM,09/May/19 9:27 PM,28/Oct/23 3:08 AM,09/May/19 9:27 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ilb:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 9:27 PM;ales;CR [https://gerrit.hyperledger.org/r/#/c/30567/] implemented a fix, but it was abandoned because nobody reviewed it;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Policy translator for state-based endorsement policies,FAB-14914,38897,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,31/Mar/19 11:48 PM,01/Apr/19 10:44 PM,28/Oct/23 3:08 AM,01/Apr/19 5:04 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00ilj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,manish-sethi,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 10:44 PM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/30569/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update whats new for 2.0 Alpha,FAB-14915,38898,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,01/Apr/19 1:04 AM,10/Apr/19 12:29 AM,28/Oct/23 3:08 AM,10/Apr/19 12:29 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,Update what's new for Chaincode lifecycle and tokens.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00ilr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
idemix test flake,FAB-14916,38899,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,ales,ales,01/Apr/19 3:51 AM,01/Apr/19 8:39 PM,28/Oct/23 3:08 AM,01/Apr/19 8:39 PM,,,,,,,,,,,,,,,,,,,,,,,,0,ci-first-failure,,,,,"See [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11148/console]

 

•! Panic [3.088 seconds]
Idemix Bridge
/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:23
 setting up the environment with one issuer and one user
 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:596
 producing an idemix signature
 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:1083
 fails when the credential is invalid [It]
 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:1158

Test Panicked
 runtime error: invalid memory address or nil pointer dereference
 /opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513

Full Stack Trace
 /opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
 github.com/hyperledger/fabric/bccsp/idemix/bridge_test.glob..func1.9.6.5()
 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:1187 +0x8a9
 github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync(0xc000070960, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_suite_test.go:18 +0xf7
 testing.tRunner(0xc0002f6b00, 0xaeadb0)
 /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
 created by testing.(*T).Run
 /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x65a
 
------------------------------
•••••••••••••••

Summarizing 1 Failure:

[Panic!] Idemix Bridge setting up the environment with one issuer and one user producing an idemix signature [It] fails when the credential is invalid 
/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513

Ran 95 of 95 Specs in 56.387 seconds
FAIL! -- 94 Passed | 1 Failed | 0 Pending | 0 Skipped
--- FAIL: TestPlain (56.39s)",,ales,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ilz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 5:50 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/30573/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Review comments for FAB-14914,FAB-14917,38900,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,01/Apr/19 5:04 PM,01/Apr/19 10:43 PM,28/Oct/23 3:08 AM,01/Apr/19 10:43 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00im7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,manish-sethi,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 10:42 PM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/30570/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
State-based endorsement proper use of ApplicationPolicies,FAB-14918,38901,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,01/Apr/19 5:46 PM,04/Apr/19 10:27 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.1.0,,,,,,,,,,0,,,,,,"There are 2 types of chaincode shims (2.0 shim that produces SBEP as ApplicationPolicy, and <2.0 shim that produces SBEP as SignaturePolicyEnvelope) that might interact with 2 different peers (a 2.0 peer on a 2.0 channel and a 2.0 peer on a 1.4 channel).
1) 1.4 shim <-> 2.0 channel: the 1.4 shim will set a SignaturePolicyEnvelope to the MetaDataKeys_VALIDATION_PARAMETER key of the metadata; the 2.0 validator will perform the translation as expected - all good
2) 2.0 shim <-> 2.0 channel: the 2.0 shim will set an ApplicationPolicy to the MetaDataKeys_VALIDATION_PARAMETER_V2 key of the metadata; the 2.0 validator will perform no translation for policies set in the metakey - all good
3) 1.4 shim <-> 1.4 channel: the 1.4 shim will set a SignaturePolicyEnvelope to the MetaDataKeys_VALIDATION_PARAMETER key of the metadata; the 1.4 validator anyway expects SignaturePolicyEnvelope - all good
4) 2.0 shim <-> 1.4 channel: the 2.0 shim will set an ApplicationPolicy to the MetaDataKeys_VALIDATION_PARAMETER_V2 key of the metadata; the problem is that the 1.4 validator won't look at this meta key and so will think that there is no state-based endorsement policy; one might argue this is WAD. If this is not acceptable, we might be forced to introduce an additional capability check here https://github.com/hyperledger/fabric/blob/master/core/chaincode/handler.go#L1065-L1098 to ensure that if the channel is still at 1.4 we won't allow setting the MetaDataKeys_VALIDATION_PARAMETER_V2 metakey

Further, there's an even more complex problem on the chaincode side between the two types of shim (1.4 that uses the MetaDataKeys_VALIDATION_PARAMETER meta key and 2.0 that uses the MetaDataKeys_VALIDATION_PARAMETER_V2) and the two types of convenience libraries (1.4 that produces SignaturePolicyEnvelope and 2.0 that produces ApplicationPolicy):
1) 1.4 library <-> 1.4 shim: the 1.4 library will produce SignaturePolicyEnvelope that the 1.4 shim will correctly set to the MetaDataKeys_VALIDATION_PARAMETER meta key
2) 1.4 library <-> 2.0 shim: the 1.4 library will produce SignaturePolicyEnvelope that the 2.0 shim will mistakenly set to the MetaDataKeys_VALIDATION_PARAMETER_V2 meta key
3) 2.0 library <-> 1.4 shim: the 2.0 library will produce ApplicationPolicy that the 1.4 shim will mistakenly set to the MetaDataKeys_VALIDATION_PARAMETER meta key
4) 2.0 library <-> 2.0 shim: the 2.0 library will produce ApplicationPolicy that the 2.0 shim will correctly set to the MetaDataKeys_VALIDATION_PARAMETER_V2 meta key

Cases 2 and 3 are problematic: one possible solution would be for 
* in case 2) the 2.0 shim may use reflection to detect that it is linked to the old 1.4 library and use the old metakey
* in case 3) the 2.0 library may use reflection to detect that it is linked to the old 1.4 shim and return old policies
This may work but it's a tad brittle and inelegant.

Other solutions might be to yet again change the shim interface (https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/interfaces.go#L99-L105) adding the possibility to set ""new"" validation parameters (and deprecate and eventually remove the old one). This seems by far the cleanest option, but I have a feeling people will not like new changes to the shim interface.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00imf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extend coding guidelines,FAB-14920,38904,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,01/Apr/19 11:02 PM,11/Apr/19 10:53 PM,28/Oct/23 3:08 AM,11/Apr/19 10:53 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Add information on practical go, go proverbs, fake generation, and assertion libraries.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00in3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Apr/19 11:03 PM;sykesm; https://gerrit.hyperledger.org/r/30566;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft: validate cert expiry,FAB-14921,38905,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,01/Apr/19 11:09 PM,24/Jul/19 5:50 AM,28/Oct/23 3:08 AM,24/Jul/19 5:50 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,,0,raft,,,,,"Test raft network operation with expiring certs.
h3. Setup:

Create a raft network with an orderersystemchannel and at least one application channel, similar to the setup described in FAB-13641. However, while doing so, generate certs for one or more of the orderers _(or peers?)_ which expire within a week.

_Here is the git diff for creating a certificate that expires tomorrow in cryptogen. Rebuild cryptogen, and use it to generate certs for the network test._
{quote}diff --git a/internal/cryptogen/ca/generator.go b/internal/cryptogen/ca/generator.go
 index 755c36925..4f8d67546 100644
 — a/internal/cryptogen/ca/generator.go
 +++ b/internal/cryptogen/ca/generator.go
 @@ -172,8 +172,8 @@ func x509Template() x509.Certificate {
 serialNumberLimit := new(big.Int).Lsh(big.NewInt(1), 128)
 serialNumber, _ := rand.Int(rand.Reader, serialNumberLimit)
 - // set expiry to around 10 years
 - expiry := 3650 * 24 * time.Hour
 + // set expiry to around 1 day
 + expiry := 24 * time.Hour
 // round minute and backdate 5 minutes
 notBefore := time.Now().Round(time.Minute).Add(-5 * time.Minute).UTC(){quote}
 
h3. Input:

Optional:  Send transactions.
h3. Expectations:

Every orderer should produce a warning log every 5 minutes for each orderer with a soon-to-expire cert.

 ",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/19 9:55 AM;suryalnvs;Logs-cert-expiry.png;https://jira.hyperledger.org/secure/attachment/17091/Logs-cert-expiry.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i00inb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/19 9:55 AM;suryalnvs;Created certs to newly built cryptogen to have certs expire in 24 hours. Launched network using new certs and seen the following for orderersystemchannel:
{code:java}
Apr 10 20:51:11 orderer2nd-ordererorg1-75b696f485-24dv6 orderer2nd-ordererorg1 2019-04-11 00:51:11.009 UTC [orderer.common.cluster.step] checkExpiration -> WARN 41fd Certificate of orderer1st-ordererorg1.ordererorg1 from orderer1st-ordererorg1:7050 for channel orderersystemchannel expires in less than 22h35m48.990984408s
{code}
After creating channel testorgschannel1, seen the WARN message for testorgschannel1 as shown below
{code:java}
Apr 10 20:53:34 orderer3rd-ordererorg1-84d6696c8f-fdtp5 orderer3rd-ordererorg1 2019-04-11 00:53:34.171 UTC [orderer.common.cluster.step] checkExpiration -> WARN 2824 Certificate of orderer2nd-ordererorg1.ordererorg1 from orderer2nd-ordererorg1:7050 for channel testorgschannel1 expires in less than 22h33m25.828057068s
{code}
Attached the logs screenshot with WARN messages for certificate expiration.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft scaling: increasingly large transactions,FAB-14922,38906,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,scottz,scottz,01/Apr/19 11:19 PM,30/Apr/19 5:54 AM,28/Oct/23 3:08 AM,30/Apr/19 5:54 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-quality,,,,,,0,raft,,,,,"Test raft network operation with very large transaction sizes: 1MB, 2MB, 4MB, 8MB,... Ensure that an old known problem has been fixed, concerning large messages (AbsoluteMaxMsgSize exceeding 1.5M batchsize).
h3. Setup and Input:

Create a raft network with at least one application channel, similar to the setup described in FAB-13641, and send traffic, with the following exceptions:
 * Set the abs max msg size to something extremely large, such as 90M; keep the preferred msgsize the same as default value. Larger transactions will simply be alone in their own block.
 * Use large transactions with large payloads.
 * With each test iteration, increase TX sizes to use the block sizes, 1M, 2M, 4M, 16M, ... to discover limitation.

h3. Expectations:

Handle transactions and blocks larger than 2MB just fine. At some point, we expect to encounter logs/errors identifying limitations due to inherant size limits in various components. We should identify those limits, and any config paramters that can be tuned.

 ",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/19 2:45 AM;dongming;FAB-14922-peer-rpc-error.log;https://jira.hyperledger.org/secure/attachment/17082/FAB-14922-peer-rpc-error.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i00inj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,"The actual transaction size is approximately:
  2 * proposal size + number of endorsements * (endorser identity + signature size)
Note: we used number of endorsements = 1.
Note: the total size for a delivered block (containing a single transaction, with proposal size = 16 bytes) was about 6700 bytes.

Payload sizes of proposals sent in different tests:
1 MB: passed for for 10 min run with ingress TPS=10
2 MB: passed for for 10 min run with ingress TPS=10
4 MB: passed for for 10 min run with ingress TPS=10
8 MB: passed for for 10 min run with ingress TPS=10
16 MB: passed for for 10 min run with ingress TPS=5
32 MB: passed for 10 transactions run with ingress TPS= 1 per 5 second
48 MB: passed for 1 transaction
50 MB: failed (as expected, because the total transaction size would exceed the 100MB rpc limit)
64 MB: failed (as expected). Peer log FAB-14922-peer-rpc-error.log, is attached.
    Apr 9 10:57:11 peer1st-org1-6495b849db-vml5c peer1st-org1 2019-04-09 14:57:11.180     UTC [chaincode] Execute -> DEBU 2d6a Entry
    Apr 9 10:57:11 peer1st-org1-6495b849db-vml5c peer1st-org1 2019-04-09 14:57:11.210 UTC [chaincode] serialSend -> ERRO 2d6b rpc error: code = ResourceExhausted desc = trying to send message larger than max (131073267 vs. 104857600)
    Apr 9 10:57:11 peer1st-org1-6495b849db-vml5c peer1st-org1 error [a97805a5] error sending TRANSACTION",System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"10/Apr/19 7:31 AM;scottz;We observed these peer logs when attempting to send the endorser payload size of 50MB:
{quote}Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 2019-04-09 20:52:08.583 UTC [chaincode] Execute -> DEBU a8e Entry
Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 2019-04-09 20:52:08.672 UTC [chaincode] serialSend -> ERRO a8f rpc error: code = ResourceExhausted desc = trying to send message larger than max (104858865 vs. 104857600)
Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 error [bad8a412] error sending TRANSACTION
Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 2019-04-09 20:52:08.672 UTC [chaincode] Notify -> DEBU a90 [bad8a412] notifying Txid:bad8a412e04ad962bb35efdf0244f5ea8f5b82f0a4429103000c93151d8cbafc, channelID:testorgschannel1
Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 2019-04-09 20:52:08.672 UTC [chaincode] Execute -> DEBU a91 Exit
Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 2019-04-09 20:52:08.673 UTC [endorser] callChaincode -> INFO a92 [testorgschannel1][bad8a412] Exit chaincode: name:""samplecctestorgschannel1"" (130ms)
Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 2019-04-09 20:52:08.673 UTC [chaincode] ProcessStream -> ERRO a93 handling chaincode support stream: rpc error: code = Canceled desc = context canceled
Apr 9 16:52:08 peer1st-org1-6495b849db-xtvhr peer1st-org1 receive failed
{quote};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A java-only chaincode function should live with the java platform code,FAB-14923,38908,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,02/Apr/19 12:13 AM,11/Apr/19 10:56 PM,28/Oct/23 3:08 AM,11/Apr/19 10:56 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,{{WriteJavaProjectToPackage}} should be moved to the java platform,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00inr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 12:14 AM;sykesm;https://gerrit.hyperledger.org/r/30549;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode.Platforms should not quick-return on empty package,FAB-14924,38909,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,02/Apr/19 12:17 AM,11/Apr/19 10:55 PM,28/Oct/23 3:08 AM,11/Apr/19 10:55 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,"{{chaincode.Platforms#ValidateDeploymentSpec}} calls platform implementations of {{ValidateCodePackage}} - even when the package is empty.

Within all of our platform implementations, the first thing that happens is a check for an empty code package - which short circuits the check.

Collapse the short-circuit into the caller...",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00inz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 12:19 AM;sykesm;https://gerrit.hyperledger.org/r/30550;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reduce protoutil dependencies on core/chaincode,FAB-14925,38910,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,02/Apr/19 12:22 AM,11/Apr/19 10:54 PM,28/Oct/23 3:08 AM,11/Apr/19 10:54 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,"By separating the ChaincodeDeploymentSpec deserialization from validation, we get functions that have more appropriate scope and reduce the dependency drag in protoutil.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00io7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 12:22 AM;sykesm;https://gerrit.hyperledger.org/r/30551;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use idiomatic name for platform self-reference,FAB-14926,38912,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,sykesm,sykesm,02/Apr/19 12:34 AM,11/Apr/19 10:55 PM,28/Oct/23 3:08 AM,11/Apr/19 10:55 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,"goPlatform, javaPlatform, and nodePlatform are not idiomatic self-reference names.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ion:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 12:34 AM;sykesm;https://gerrit.hyperledger.org/r/30591;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop using fabric/common/util from protoutil code,FAB-14927,38913,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ynamiki,sykesm,sykesm,02/Apr/19 1:15 AM,10/Apr/19 11:04 PM,28/Oct/23 3:08 AM,10/Apr/19 11:04 PM,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,help-wanted,hygiene,ipm,,,"As of current master, the following functions are used by protoutil from the common/util package in fabric:
 - {{CreateUtcTimestamp}} - replace with ptypes.TimestampProto(time.Now().UTC())
 - {{GetTestChainID}} - any constant string for tests...
 - {{ComputeSHA256}} - crypto/sha256.Sum256
 - {{ConcatenateBytes}} - append

In most cases, the utility of the functions does not outweigh the coupling between the packages.
{code:java}
$ ag -w util protoutil/
protoutil/proputils.go
17:	""github.com/hyperledger/fabric/common/util""
302:	timestamp := util.CreateUtcTimestamp()

protoutil/proputils_test.go
18:	""github.com/hyperledger/fabric/common/util""
239:		util.GetTestChainID(), createCIS(),
353:		util.GetTestChainID(),
365:		util.GetTestChainID(),
481:	prop, _, err := protoutil.CreateChaincodeProposal(common.HeaderType_ENDORSER_TRANSACTION, util.GetTestChainID(), createCIS(), signerSerialized)

protoutil/blockutils.go
15:	""github.com/hyperledger/fabric/common/util""
63:	return util.ComputeSHA256(BlockHeaderBytes(b))
67:	return util.ComputeSHA256(util.ConcatenateBytes(b.Data...))

protoutil/txutils_test.go
17:	""github.com/hyperledger/fabric/common/util""
474:	prop, _, err := protoutil.CreateChaincodeProposal(cb.HeaderType_ENDORSER_TRANSACTION, util.GetTestChainID(), createCIS(), signerSerialized)

protoutil/blockutils_test.go
16:	""github.com/hyperledger/fabric/common/util""
49:	headerHash := util.ComputeSHA256(asn1Bytes)

protoutil/signeddata.go
13:	""github.com/hyperledger/fabric/common/util""
44:			Data:      util.ConcatenateBytes(configSig.SignatureHeader, ce.ConfigUpdate),
{code}",,sykesm,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14928,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iov:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,ynamiki,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/19 5:03 PM;ynamiki;I would like to try to fix this.;;;","09/Apr/19 11:45 AM;ynamiki;https://gerrit.hyperledger.org/r/30807;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop explicit use of bccsp from protoutil code,FAB-14928,38914,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ynamiki,sykesm,sykesm,02/Apr/19 2:22 AM,10/Apr/19 7:09 PM,28/Oct/23 3:08 AM,10/Apr/19 7:09 PM,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,help-wanted,hygiene,ipm,,,"As of current master, bccsp.GetHash is the only bccsp function directly used by protoutil. This can be replaced with direct use of the hasher returned by crypto/sha256.New().

{code}
$ ag -w bccsp protoutil/
protoutil/txutils.go
13:	""github.com/hyperledger/fabric/bccsp""
14:	""github.com/hyperledger/fabric/bccsp/factory""
459:	hash, err := factory.GetDefault().GetHash(&bccsp.SHA256Opts{})
494:	hash2, err := factory.GetDefault().GetHash(&bccsp.SHA256Opts{})

protoutil/proputils.go
14:	""github.com/hyperledger/fabric/bccsp""
15:	""github.com/hyperledger/fabric/bccsp/factory""
583:		&bccsp.SHA256Opts{})
639:		&bccsp.SHA256Opts{})
{code}",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14929,,FAB-14927,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ip3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop explicit use of common/crypto from protoutil code,FAB-14929,38915,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,02/Apr/19 2:30 AM,11/May/19 5:21 AM,28/Oct/23 3:08 AM,11/May/19 5:21 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,help-wanted,hygiene,ipm,,,"As of current master, crypto.GetRandomNonce() is the only common/crypto function directly used by production code in the protoutil package. This can be replaced with direct use of rand.Read with an appropriate receiving slice.

{code}
$ ag -w crypto protoutil/
protoutil/proputils_test.go
11:	""crypto/sha256""

protoutil/proputils.go
16:	""github.com/hyperledger/fabric/common/crypto""
243:	nonce, err := crypto.GetRandomNonce()
262:	nonce, err := crypto.GetRandomNonce()
455:	nonce, err := crypto.GetRandomNonce()

protoutil/commonutils.go
15:	""github.com/hyperledger/fabric/common/crypto""
37:// CreateNonceOrPanic generates a nonce using the common/crypto package
47:// CreateNonce generates a nonce using the common/crypto package.
49:	nonce, err := crypto.GetRandomNonce()

protoutil/commonutils_test.go
15:	""github.com/hyperledger/fabric/common/crypto""
49:	expected := crypto.NonceSize
{code}

In fact, the only production users of GetRandomNonce are in {{protoutil}} and {{token/client}} packages. In the case of the token client, it's used on a call to {{ComputeTxID}}.",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14928,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ipb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/May/19 8:38 AM;MHBauer;Should this move the GetRandomNonce parts from common/crypto to protoutil? If moved it can be made private and a second copy made for the client use

{{
 token/client/tx_submitter.go
 156: nonce, err := crypto.GetRandomNonce()
}}

 

I don't see any public use of fabric/crypto/GetRandomBytes, so that can be private if necessary.;;;","09/May/19 4:51 AM;sykesm;https://gerrit.hyperledger.org/r/c/31266/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
What's New for 2.0-alpha feature,FAB-14930,38917,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,pandrejko,pandrejko,02/Apr/19 3:48 AM,07/Jan/20 6:55 AM,28/Oct/23 3:08 AM,07/Jan/20 6:55 AM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,"Create new What's new content for alpha-2.0 feature which includes

CC Lifecycle
Fabtoken
Alpine images
Raft (re-introduction)

[~negupta] can help with the links to the lifecycle and fabtoken topics.",,harrisob@us.ibm.com,joe-alewine,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),harrisob@us.ibm.com,joe-alewine,pandrejko,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/19 12:33 AM;harrisob@us.ibm.com;I would like to get the links for CC Lifecycle and FabToken to reference in the NodeSDK docs;;;","03/Apr/19 4:27 AM;joe-alewine;[~harrisob@us.ibm.com] What do you mean by ""reference""? You want the ""What's New"" to have links to the SDK docs? Or do you want the links that will be in What's New (for Lifecycle and FabToken) so you can link to them in the SDK docs?;;;","04/Apr/19 12:41 AM;harrisob@us.ibm.com;I just want the links that would be in the ""whats new"" , but I think it would be good to have a link to the NodeSDK tutorials for the new Lifecycle and FabToken supprt in the ""whats new"". So the short answer ... both;;;","04/Apr/19 3:05 AM;joe-alewine;[~harrisob@us.ibm.com]

Here is the CR for What's New. Let me know what SDK links you'd like me to add and I'll put them in a patch set.

https://gerrit.hyperledger.org/r/c/30693/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Changing the package ID in the chaincode definition doesn't trigger a definition refresh,FAB-14931,38918,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,02/Apr/19 3:56 AM,02/Apr/19 5:04 AM,28/Oct/23 3:08 AM,02/Apr/19 5:04 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00ipr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Return JSON objects from  lifecycle queries,FAB-14932,38919,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,02/Apr/19 4:21 AM,24/Jul/19 8:36 AM,28/Oct/23 3:08 AM,22/Jul/19 9:58 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Use --output, -O flag to toggle output to JSON. Otherwise, default to human readable plaintext. ",,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ipz:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jun/19 5:07 AM;wlahti;Updated the peer CLI's ""querycommitted"" function to do this: [https://gerrit.hyperledger.org/r/c/fabric/+/31963];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Raft to BYFN in master branch,FAB-14933,38920,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,02/Apr/19 4:45 AM,03/Dec/19 5:42 AM,28/Oct/23 3:08 AM,03/Dec/19 5:42 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,Need to add Raft text to master branch.,,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|hzwrrq:4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 4:52 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30606/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Small fixes to BYFN in release-1.4,FAB-14934,38921,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,02/Apr/19 4:56 AM,11/Apr/19 10:45 PM,28/Oct/23 3:08 AM,11/Apr/19 10:45 PM,v1.4.0,,,,,,,,,,,,,v1.4.1,,,,fabric-docs,,,,,,0,,,,,,"Update port, small text changes.",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|hzwrrq:6",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 4:58 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/30608/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft e2e flaky test - reconfiguration and onboarding when the orderer certificates are all rotated [It] is still possible to onboard new orderers ,FAB-14935,38922,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,C0rWin,C0rWin,02/Apr/19 5:01 AM,16/Apr/19 12:08 PM,28/Oct/23 3:08 AM,16/Apr/19 12:08 PM,v1.4.0,v2.0.0,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,,0,ci-flake,,,,,"{quote}
10:06:02 • Failure [88.329 seconds]
10:06:02 EndToEnd reconfiguration and onboarding when the orderer certificates are all rotated [It] is still possible to onboard new orderers 
10:06:02 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:311
10:06:02 
10:06:02   Timed out after 1.000s.
10:06:02   Expected
10:06:02       <<-chan struct {} | len:0, cap:0>: 0xc0005ef860
10:06:02   to be closed
10:06:02 
10:06:02   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/etcdraft_reconfig_test.go:520
{quote}

Link: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7805/console
Link: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7805/console
Link: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7737/console
",,C0rWin,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00iq7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/19 12:08 PM;guoger;Pls reopen if hit again.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky unit test TestParallelSend,FAB-14936,38923,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,C0rWin,C0rWin,02/Apr/19 5:04 AM,10/Apr/20 5:53 AM,28/Oct/23 3:08 AM,19/Jun/19 8:02 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{quote}

01:20:19 --- FAIL: TestParallelSend (30.01s)
01:20:19     comm_test.go:663: 
01:20:19         	Error Trace:	comm_test.go:663
01:20:19         	Error:      	Not equal: 
01:20:19         	            	expected: 20
01:20:19         	            	actual  : 1
01:20:19         	Test:       	TestParallelSend
01:20:19 FAIL
01:20:19 coverage: 89.5% of statements
01:20:19 FAIL	github.com/hyperledger/fabric/gossip/comm	32.045s

{quote}

Link: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11160/console",,C0rWin,denyeart,MHBauer,ronenschafferibm,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14960,,FAB-15309,,,,FAB-14960,FAB-15486,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/May/19 10:41 PM;ronenschafferibm;image-2019-05-29-16-41-43-269.png;https://jira.hyperledger.org/secure/attachment/17274/image-2019-05-29-16-41-43-269.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iqf:",,,,Unset,Unset,,go test -race -count 1000 -failfast -v -run TestParallelSend,,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,MHBauer,ronenschafferibm,swetharepakula,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/May/19 12:56 AM;MHBauer;I'm pretty sure this is the same ""one side hangs up the other side"" I describe in FAB-13539 ;;;","28/May/19 8:04 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/c/fabric/+/31565;;;","29/May/19 4:58 AM;MHBauer;dup with more information in https://jira.hyperledger.org/browse/FAB-14960
;;;","29/May/19 10:49 PM;ronenschafferibm;There might be more than one connection created from comm1 to comm2.
That’s because getConnection() in conn.go doesn’t [add |https://github.com/hyperledger/fabric/blob/bf67707e609b1d61392c8f614412ddcf53eabd55/gossip/comm/conn.go#L122]the connection it [creates |https://github.com/hyperledger/fabric/blob/bf67707e609b1d61392c8f614412ddcf53eabd55/gossip/comm/conn.go#L79-L92]into the pki2conn map in the same critical block.
The creation of more than one connection alone is not the problem, since there are examples of test running where 2 connection are created, and the test still passes.
But, every time the test fails, 2 connection (or more) are created.

When the test fails and there are 2 connections, the following sequence of events happen (the diagram below might help understand).
comm1 [opens |https://github.com/hyperledger/fabric/blob/842c10043f68bedb606eb7d1ddc04e802c7c271b/gossip/comm/comm_test.go#L639-L645]2 connections to comm2 simultaneously in different goroutines.
Then, comm1 [closes |https://github.com/hyperledger/fabric/blob/842c10043f68bedb606eb7d1ddc04e802c7c271b/gossip/comm/conn.go#L105-L113]the 2nd connection and keeps the 1st one. According to the [comment|https://github.com/hyperledger/fabric/blob/842c10043f68bedb606eb7d1ddc04e802c7c271b/gossip/comm/conn.go#L105], it wrongly thinks that the connection it keeps is a connection that a remote peer has initiated.

From comm2 perspective, when it sees the 2nd connection, it [closes |https://github.com/hyperledger/fabric/blob/842c10043f68bedb606eb7d1ddc04e802c7c271b/gossip/comm/conn.go#L164-L173]the older one (the 1st connection).
Now, both connections are closed and when comm1 will try to send a new message (on the 1st connection), it’ll fail because the connection is closed.

Basically, there is a race between the goroutines to create a connection when no connection exists.
 !image-2019-05-29-16-41-43-269.png!
One option for a hack to make the test pass is to add a small sleep (50 ms) after the first sending to make all subsequent sendings use the first’s connection.

 ;;;","30/May/19 1:19 AM;swetharepakula;This test seems to have the same problem as TestAccept. Essentially because comm.Send starts up a goroutine to send the message they both are doing parallel sends.

[~ronenschafferibm]I have already submitted a fix for this problem. [https://gerrit.hyperledger.org/r/#/c/fabric/+/31552/]. Perhaps that fix will fix this test as well.;;;","19/Jun/19 8:01 PM;ronenschafferibm;Closing this issue since it'll be solved by https://jira.hyperledger.org/browse/FAB-15486;;;","03/Jul/19 4:10 AM;MHBauer;refactored into something that can't hit this issue as of https://gerrit.hyperledger.org/r/#/c/fabric/+/31841/;;;","10/Apr/20 5:53 AM;denyeart;Hit again on release-1.4:

[https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=11794&view=logs&jobId=a11cdf60-0d11-5130-c801-1b4953009464&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky privacy enabled test - failed to start coudchDB,FAB-14937,38924,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,C0rWin,C0rWin,02/Apr/19 5:06 AM,28/Nov/19 6:39 PM,28/Oct/23 3:08 AM,28/Nov/19 6:39 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,1,ci-flake,,,,,"{quote}
13:37:17 panic: failed to start couchDB: database in container 109a9fcb2d7b3bd905f1e98d915e2833f335a2154d469c1ceee14fac2ccf8a1c did not start: context deadline exceeded [recovered]
13:37:17 	panic: failed to start couchDB: database in container 109a9fcb2d7b3bd905f1e98d915e2833f335a2154d469c1ceee14fac2ccf8a1c did not start: context deadline exceeded
13:37:17 
13:37:17 goroutine 20 [running]:
13:37:17 testing.tRunner.func1(0xc0003bc000)
13:37:17 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:792 +0x6a7
13:37:17 panic(0x14b34a0, 0xc0003102f0)
13:37:17 	/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
13:37:17 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).setupCouch(0x2144460, 0x1a, 0x145f6a0)
13:37:17 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:97 +0x44e
13:37:17 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).Init(0x2144460, 0x172a680, 0xc0003bc000)
13:37:17 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:106 +0x9a
13:37:17 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.testDB(0xc0003bc000, 0x1720140, 0x2144460)
13:37:17 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/db_test.go:83 +0x76
13:37:17 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.TestDB.func1(0xc0003bc000)
13:37:17 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/db_test.go:77 +0x6b
13:37:17 testing.tRunner(0xc0003bc000, 0xc0003e8080)
13:37:17 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
13:37:17 created by testing.(*T).Run
13:37:17 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x65a
13:37:17 FAIL	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate	31.641s
{quote}

Link: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11174/console",,C0rWin,guoger,jyellick,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iqn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,guoger,jyellick,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/19 4:27 AM;MHBauer;[~wlahti]is this the same couchdb issue? I've seen it a couple times more in unit-tests. Maybe 45seconds isn't enough. I don't understand any of this bit to know what's going wrong.;;;","16/Jul/19 11:03 PM;jyellick;Another instance https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13696/console;;;","28/Nov/19 6:39 PM;guoger;close for now, reopen if resurfaces;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Peer Commands,FAB-14938,38926,,Story,In Progress,FAB,Fabric,software,denyeart,,,Medium,,bpbuch,bpbuch,bpbuch,02/Apr/19 5:33 AM,02/Apr/19 10:02 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Peer administration is one of the most used features of the existing CLI support in fabric.  The current peer cli provides a good base line for functionality that should be supported by the redesigned CLI. ,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10734,,,No,,Unset,No,,,"1|i00ir3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CLI Quality of Life Enhancements,FAB-14939,38927,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,TopJohn,bpbuch,bpbuch,02/Apr/19 5:52 AM,15/Oct/19 3:54 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"No matter what the use case is, the redesigned CLI should be easy to use and contribute to.  This can be accomplished through various tools and support, such as command autocomplete, global command flags, trace/debug support, and powerful common utilities.",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10734,,,No,,Unset,No,,,"1|i00irb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add autocomplete,FAB-14940,38928,38927,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,bpbuch,bpbuch,02/Apr/19 5:54 AM,02/Apr/19 5:54 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Cobra provides support for bash completion scripts that can reduce the amount of keystrokes required to issue a command.  For example, nouns can be populated using the tab key.

`fabric channel [tab][tab]` -> `fabric channel delete` ",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00irj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused code from common/util,FAB-14941,38929,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,02/Apr/19 6:43 AM,01/May/19 5:55 AM,28/Oct/23 3:08 AM,01/May/19 5:55 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i009w7:f",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 6:46 AM;sykesm;remote:   https://gerrit.hyperledger.org/r/30612 [FAB-14941] remove unused GenerateIntUUID
remote:   https://gerrit.hyperledger.org/r/30613 [FAB-14941] remove GenerateHashFromSignature
remote:   https://gerrit.hyperledger.org/r/30614 [FAB-14941] remove unused GenerateIDWithAlg
remote:   https://gerrit.hyperledger.org/r/30615 [FAB-14941] remove unused GenerateIDfromTxSHAHash
remote:   https://gerrit.hyperledger.org/r/30616 [FAB-14941] remove unused FindMissingElements
remote:   https://gerrit.hyperledger.org/r/30617 [FAB-14941] move util.Flatten to localconfig
remote:   https://gerrit.hyperledger.org/r/30618 [FAB-14941] remove unused ArrayToChaincodeArgs
remote:   https://gerrit.hyperledger.org/r/30619 [FAB-14941] remove unused GetTestOrgID;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip UT failes due to not initialized mock,FAB-14942,38930,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,02/Apr/19 6:47 AM,04/Apr/19 8:03 PM,28/Oct/23 3:08 AM,04/Apr/19 8:03 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{quote}
08:18:28 mock: Unexpected Method Call
08:18:28 -----------------------------
08:18:28 
08:18:28 GetMembership()
08:18:28 		
08:18:28 
08:18:28 The closest call I have is: 
08:18:28 
08:18:28 GetMembership()
08:18:28 		
08:18:28 
08:18:28 
08:18:28 Diff: No differences.
08:18:28 
08:18:28 goroutine 130 [running]:
08:18:28 github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).fail(0xc0003355e0, 0xed82d3, 0x6f, 0xc000656200, 0x4, 0x4)
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:235 +0x16d
08:18:28 github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).MethodCalled(0xc0003355e0, 0x1414da1, 0xd, 0x0, 0x0, 0x0, 0x4, 0xe33240, 0x7f4a4836a801)
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:357 +0x7f1
08:18:28 github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).Called(0xc0003355e0, 0x0, 0x0, 0x0, 0x10, 0x0, 0x10)
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:333 +0x147
08:18:28 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).GetMembership(0xc0003355e0, 0x90, 0xc000052190, 0xc000050f00)
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:221 +0x42
08:18:28 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).GetPeers(0xc00030b900, 0x1, 0xc0000d8d70, 0xc00021b560)
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:363 +0x78
08:18:28 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).GetPeers-fm(0xc0003dde58, 0xc0003dde28, 0x2)
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:289 +0x2a
08:18:28 github.com/hyperledger/fabric/gossip/gossip/channel.(*membershipTracker).trackMembershipChanges(0xc0002c8ec0)
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:1099 +0x326
08:18:28 created by github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel
08:18:28 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:297 +0xa13
08:18:28 FAIL	github.com/hyperledger/fabric/gossip/gossip/channel	0.133s
{quote}

observed in: https://gerrit.hyperledger.org/r/#/c/30525/
ci log: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11165/consoleFull
",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00irr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Apr/19 5:59 PM;C0rWin;https://gerrit.hyperledger.org/r/30679;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EYFN: Unable to approve a definition of a Chaincode for Org3,FAB-14943,38931,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,yuki-kon,yuki-kon,yuki-kon,02/Apr/19 9:34 AM,27/Apr/19 1:51 AM,28/Oct/23 3:08 AM,27/Apr/19 1:51 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"EYFN has been updated to use the new Chaincode lifecycle.
 When adding an Org to a Channel manually according to the EYFN's document (fabric/docs/source/channel_update_tutorial.rst), I failed to approve a definition of a Chaincode for Org3.
 The reason is that the version of the Chaincode is wrong in the document. The version should be changed from ""1.0"" to ""1"".
 - Command and error message
{code:Bash}
 $bash-4.4# peer lifecycle chaincode approveformyorg --channelID $CHANNEL_NAME --name mycc --version 1.0 --init-required --package-id $CC_PACKAGE_ID --sequence 1 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --waitForEvent
 (snip)
 2019-04-01 22:21:58.802 UTC [msp.identity] Sign -> DEBU 0e6 Sign: plaintext: 0AC5070A6D08031A0C08869E8AE50510...37356466636132653230656638326361
 2019-04-01 22:21:58.802 UTC [msp.identity] Sign -> DEBU 0e7 Sign: digest: 96905D0D5A03E2F426B84E798640074ED0557AE02D5F305CF87C66D151EE2F27
 Error: proposal failed with status: 500 - failed to invoke backing implementation of 'ApproveChaincodeDefinitionForMyOrg': attempted to define the current sequence (%d) for namespace %s, but: Version '1' != '1.0'
{code}",,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14384,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,3e68a7eff82eba776275ad168f387099303a8ba0,Unset,No,,,"1|i00irz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 9:53 AM;yuki-kon;CR is posted here. [https://gerrit.hyperledger.org/r/#/c/30620/];;;","27/Apr/19 1:51 AM;yuki-kon;Already fixed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race in orderer/common/cluster_test TestSend,FAB-14944,38932,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,sykesm,sykesm,02/Apr/19 9:44 AM,07/Apr/19 11:12 PM,28/Oct/23 3:08 AM,07/Apr/19 11:12 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,race,,,,"https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11211/consoleFull

{code}
22:24:36 ==================
22:24:36 WARNING: DATA RACE
22:24:36 Write at 0x00c0002d6d68 by goroutine 90:
22:24:36   sync/atomic.CompareAndSwapInt32()
22:24:36       /opt/go/go1.11.5.linux.amd64/src/runtime/race_amd64.s:293 +0xb
22:24:36   sync.(*Mutex).Lock()
22:24:36       /opt/go/go1.11.5.linux.amd64/src/sync/mutex.go:74 +0x4d
22:24:36   github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).MethodCalled()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:394 +0x4e3
22:24:36   github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).Called()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:333 +0x18c
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster/mocks.(*StepClient).Send()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/mocks/step_client.go:107 +0xa0
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster.(*Stream).sendMessage.func2()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm.go:545 +0x157
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster.(*Stream).operateWithTimeout.func1()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm.go:600 +0x76
22:24:36 
22:24:36 Previous write at 0x00c0002d6d68 by goroutine 155:
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster_test.TestSend.func1()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/rpc_test.go:128 +0x9b
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster_test.TestSend.func4()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/rpc_test.go:255 +0xc46
22:24:36   testing.tRunner()
22:24:36       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
22:24:36 
22:24:36 Goroutine 90 (running) created at:
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster.(*Stream).operateWithTimeout()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm.go:598 +0x17a
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster.(*Stream).sendMessage()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm.go:550 +0x184
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster.(*Stream).serviceStream()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm.go:559 +0x10a
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster.(*RemoteContext).NewStream.func4()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/comm.go:715 +0x9b
22:24:36 
22:24:36 Goroutine 155 (finished) created at:
22:24:36   testing.(*T).Run()
22:24:36       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x659
22:24:36   github.com/hyperledger/fabric/orderer/common/cluster_test.TestSend()
22:24:36       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/rpc_test.go:198 +0x1148
22:24:36   testing.tRunner()
22:24:36       /opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x162
22:24:36 ==================
22:24:36 2019-04-01 22:22:57.123 UTC [orderer.common.cluster.step] checkExpiration -> WARN 309 Certificate of unidentified node from  for channel  expires in less than -2562047h47m16.854775808s
22:24:36 2019-04-01 22:22:57.130 UTC [test] handleMessage -> WARN 30a Stream read from  failed: oops
22:24:36 --- FAIL: TestSend (0.01s)
22:24:36     --- FAIL: TestSend/Send_step_fails (0.00s)
22:24:36         testing.go:771: race detected during execution of test
{code}",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00is7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/19 8:56 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/30796/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make sure ElectionTimeout is 10x greater than HeartbeatTimeout,FAB-14945,38934,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,guoger,guoger,02/Apr/19 12:52 PM,10/Jun/19 10:53 AM,28/Oct/23 3:08 AM,10/Jun/19 10:53 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,,0,raft,,,,,We should enforce {{ElectionTimeout}} to be at least 10x greater than {{HeartbeatTimeout}} to avoid flakiness caused by user misconfiguration.,,guoger,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00isn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 2:02 PM;guoger;https://gerrit.hyperledger.org/r/c/30621/;;;","10/Jun/19 10:45 AM;jyellick;I saw this was abandoned, is there a plan here?;;;","10/Jun/19 10:53 AM;guoger;[~jyellick] this task should be abandoned, as we can not introduce stricter check into config process w/o new capability. We could add a check to configtxgen though if it adds value.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Increate interval of proactive campaign,FAB-14946,38935,33490,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,02/Apr/19 1:22 PM,01/May/19 4:43 AM,28/Oct/23 3:08 AM,01/May/19 4:43 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"In proactive campaign, picked node (according to {{hash(channelID) % cluster_size}}) starts campaign every {{TickInterval}} till leader is present (either this node successfully claims leadership or another node was already leader). This is excessive if network latency is large, and the term would keep advancing in extreme cases. The interval of campaign should be increased to {{TickInterval * HeartbeatTimeout * Constant(2?)}}. Recall that {{HeartbeatTimeout}} is suggested to be [larger than RTT|https://coreos.com/etcd/docs/latest/tuning.html].",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00isv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 2:02 PM;guoger;https://gerrit.hyperledger.org/r/c/30622 master
https://gerrit.hyperledger.org/r/c/30979 release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in TestNewGossipStateProvider_BatchingOfStateRequest,FAB-14947,38936,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,guoger,guoger,02/Apr/19 3:19 PM,28/Nov/19 6:39 PM,28/Oct/23 3:08 AM,28/Nov/19 6:39 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{code}
13:21:48 --- FAIL: TestNewGossipStateProvider_BatchingOfStateRequest (31.20s)
13:21:48     state_test.go:1721: Started to spin off, until predicate will be satisfied.
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1249: Peer discovery has not finished yet
13:21:48     state_test.go:1733: Timeout has expired
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11218/console",,btl5037,denyeart,guoger,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00it3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,guoger,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 4:44 AM;denyeart;Hit again: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11475/console;;;","02/May/19 3:31 AM;btl5037;And again...

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11848/console;;;","28/Nov/19 6:39 PM;guoger;close for now, reopen if resurfaces;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestDifferentMessages Flake,FAB-14948,38937,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,ronenschafferibm,ales,ales,02/Apr/19 4:13 PM,07/May/19 6:33 AM,28/Oct/23 3:08 AM,07/May/19 6:33 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"22:43:05 2019-04-01 22:41:40.072 UTC [discovery] NewService -> INFO 001 Created with config TLS: true, auth cache disabled
22:43:05 2019-04-01 22:41:40.093 UTC [discovery] chaincodeQuery -> ERRO 002 Failed constructing descriptor for chaincode chaincodes:<name:""mycc"" > ,: cannot satisfy any principal combination
22:43:05 --- FAIL: TestDifferentMessages (0.00s)
22:43:05 <autogenerated>:1: 
22:43:05 Error Trace: signer_test.go:79
22:43:05 Error: Should be true
22:43:05 Test: TestDifferentMessages
22:43:05 FAIL
22:43:05 coverage: 92.9% of statements",,ales,denyeart,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15143,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00itb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/19 6:01 AM;denyeart;TestDifferentMessages in discovery/client/signer_test.go;;;","07/May/19 6:32 AM;MHBauer;Looks like dup of https://jira.hyperledger.org/browse/FAB-15143;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce dispatcher for token transaction in the verifier,FAB-14949,38938,,Story,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,bur,bur,bur,02/Apr/19 4:52 PM,09/Apr/19 9:06 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The current structure of the verifier is getting more and more complex with new functionality being added. Therefore, introducing a dispatcher for token transactions improves code structure and readability.",,bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00itj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Apr/19 4:52 PM;bur;https://gerrit.hyperledger.org/r/#/c/30463/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky UT - rotates leader certificate and triggers leadership transfer,FAB-14950,38939,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,02/Apr/19 6:07 PM,03/Apr/19 11:03 PM,28/Oct/23 3:08 AM,02/Apr/19 9:31 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"{code}
15:51:27 ------------------------------
15:51:27 • Failure [10.467 seconds]
15:51:27 Chain
15:51:27 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:70
15:51:27   3-node Raft cluster
15:51:27   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1451
15:51:27     when reconfiguring raft cluster
15:51:27     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1585
15:51:27       reconfiguration
15:51:27       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1799
15:51:27         rotates leader certificate and triggers leadership transfer [It]
15:51:27         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1891
15:51:27 
15:51:27         Timed out after 10.001s.
15:51:27         Expected
15:51:27             <raft.SoftState>: {Lead: 3, RaftState: 0}
15:51:27         to equal
15:51:27             <raft.SoftState>: {Lead: 0, RaftState: 0}
15:51:27 
15:51:27         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1926
15:51:27 ------------------------------
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11226/consoleFull",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00itr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Apr/19 6:12 PM;guoger;Leader change in Raft can be either {{X -> 0 -> Y}} or {{X -> Y}} depending on specific cases. *Unless* we are certain about the _transition_, *AND* _both fields_ in raft soft state during, {{Lead}} and {{StateType}}, we should assert the final state to avoid flakiness.;;;","02/Apr/19 6:24 PM;guoger;https://gerrit.hyperledger.org/r/c/30627/ master
https://gerrit.hyperledger.org/r/c/30668/ release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
add v1.4.2 application capability tag for enabling ledger rollback,FAB-14951,38940,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,02/Apr/19 7:26 PM,27/Jul/19 11:48 AM,28/Oct/23 3:08 AM,01/Jul/19 1:04 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-gossip,fabric-ledger,,,,,0,,,,,,"To ensure that pvtdata of invalid transactions are never lost, we store the pvtdata of invalid transactions starting at v1.4.2 capability. As rollback and block revalidation on a corrupt peer can locally change the status of invalid transaction to valid, storing pvtData of invalid tx would ensure that the pvtdata are never lost.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00itz:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer rollback offline command ,FAB-14952,38941,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,02/Apr/19 7:27 PM,27/Jul/19 11:18 AM,28/Oct/23 3:08 AM,01/Jul/19 1:04 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-peer,,,,,,0,,,,,,"Need to introduce a new peer command.

_peer rollback channelName blockNumber_",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iu7:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gracefully close channel in unit test,FAB-14953,38945,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,02/Apr/19 9:17 PM,02/Apr/19 10:23 PM,28/Oct/23 3:08 AM,02/Apr/19 10:23 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iv3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Complete the IdentityMixer feature (from ""soup to nuts"")",FAB-14954,38949,,Epic,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,JonathanLevi,JonathanLevi,02/Apr/19 9:46 PM,03/Apr/19 2:57 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Various degrees of Identity Mixer support have been merged into several Hyperledger Fabric versions. While we worked closely with various people in IBM Research Zurich in previous versions of Fabric (1.2, 1.3 with a fully working end-to-end flow in Fabric 1.4)... there is some work to do in order to allow users, organizations, consortiums and integrators to be able to have the full lifecycle of an ""Identity Mixer""-like anonymous credentials.

Now that Fabric 1.4.1-alpha was released yesterday, I will start pushing related tasks under this Epic, and will mark the various JIRA items that are being carried over since the good ol' Fabric 1.x days accordingly.",,huxd,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Reviewed,Unset,Required,ghx-label-8,,"IdentityMixer in Fabric 2.x - Consistent configuration, documentation, issuance all the way to anonymized revocation",To Do,No,,Unset,No,,,"1|i00ivz:",,,,Yes,Required,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),huxd,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IdentityMixer: Create a Revocation Authority (service),FAB-14955,38950,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,JonathanLevi,JonathanLevi,JonathanLevi,02/Apr/19 9:47 PM,02/Apr/19 9:47 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ca,,,,,,0,,,,,,,,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14954,,,No,,Unset,No,,,"1|i00iw7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UT flake - timeout due to deadlock in gossip/com/comm_test.go,FAB-14956,38951,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,ronenschafferibm,guoger,guoger,02/Apr/19 9:48 PM,29/May/19 5:06 AM,28/Oct/23 3:08 AM,29/May/19 4:53 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11230/consoleFull],,guoger,jyellick,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13377,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/19 8:24 AM;C0rWin;consoleText;https://jira.hyperledger.org/secure/attachment/17107/consoleText",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iwf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 2:39 AM;sykesm;Possible dupe: FAB-15032

The stacks are different but it's a timeout in testing this package.

Also: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11312/console;;;","12/Apr/19 4:46 AM;jyellick;https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11474/consoleFull

I believe this is another instance;;;","15/May/19 3:06 PM;MHBauer;from the stacks, this looks like the filled demuxer issue.

same root cause as FAB-13377;;;","29/May/19 4:53 AM;MHBauer;We should not see this any more.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IdentityMixer: Java client support for client-side (anonymous) revocation,FAB-14957,38952,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,JonathanLevi,JonathanLevi,JonathanLevi,02/Apr/19 9:48 PM,15/Jan/20 2:17 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,external,,,,,,,heatherp,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14954,,,No,,Unset,No,,,"1|i00iwn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Oct/19 7:45 PM;heatherp;Hi [~JonathanLevi] I'm going through the fabric-sdk-java backlog, are you actively working this?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deprecate disabling of endpoint in peer deliver client,FAB-14958,38953,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,02/Apr/19 9:51 PM,30/Apr/19 9:51 PM,28/Oct/23 3:08 AM,30/Apr/19 9:51 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"Currently, whenever we get a bad status from an OSN for a deliver call we disable the endpoint of the peer until a timeout expires.

The idea was to not waste time on selecting that endpoint, and select another one instead in the next time we re-connect to an OSN.

This is intrusive because we need APIs to disable the endpoint from the layer of the block delivery all the way to the layer that selects a new connection. 

In reality, it doesn't add much, and we can accomplish an equivalent effect if we just permute the order of the OSNs, and keep a reference to the last OSN we were connected to.


[~jyellick] [~C0rWin] ",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00iwv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add channel commands,FAB-14959,38954,38926,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,02/Apr/19 10:00 PM,30/Apr/19 3:50 AM,28/Oct/23 3:08 AM,30/Apr/19 3:50 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The cli should provide commands to interact with and manage channels, such as create, join, list, and update. ",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ix3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/19 4:16 AM;bpbuch;https://gerrit.hyperledger.org/r/#/c/30966/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestParallelSend failed in unit-tests as TLS authentication failed.,FAB-14960,38956,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sambhavdutt,sambhavdutt,02/Apr/19 10:21 PM,29/May/19 5:06 AM,28/Oct/23 3:08 AM,29/May/19 4:57 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"TestParallelSend failed in the daily unit-tests. Remote peer authentication failed as no TLS certificate was not sent from peer.

*Branch:* master
*Platform:* s390x
*Error Snippet:*

{code:java}
23:18:59 [33m2019-03-12 23:18:41.847 EDT [gossip.comm] createConnection -> WARN 00b[0m Remote endpoint claims to be a different peer, expected 3132372e302e302e313a3334373533 but got 3132372e302e302e313a3338343532
23:18:59 [33m2019-03-12 23:18:41.847 EDT [gossip.comm] sendToEndpoint -> WARN 00c[0m Failed obtaining connection for 127.0.0.1:38452, PKIid:3132372e302e302e313a3334373533 reason: authentication failure
23:18:59 [33m2019-03-12 23:18:47.853 EDT [gossip.comm] authenticateRemotePeer -> WARN 00d[0m 127.0.0.1:44850 didn't send TLS certificate
23:18:59 [31m2019-03-12 23:18:47.853 EDT [gossip.comm] GossipStream -> ERRO 00e[0m Authentication failed: No TLS certificate
:
23:18:59 --- FAIL: TestParallelSend (30.01s)
23:18:59     comm_test.go:663: 
23:18:59         	Error Trace:	comm_test.go:663
23:18:59         	Error:      	Not equal: 
23:18:59         	            	expected: 20
23:18:59         	            	actual  : 1
23:18:59         	Test:       	TestParallelSend
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/51/",,denyeart,guoger,MHBauer,sambhavdutt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14622,FAB-14936,,,,,,FAB-14936,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/May/19 4:22 AM;MHBauer;TestParallelSend-success+fail.txt;https://jira.hyperledger.org/secure/attachment/17234/TestParallelSend-success%2Bfail.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,aa6bfc6b21bb7460bd331c29c1a08515f5276673,Unset,No,,,"1|i00ixj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,MHBauer,sambhavdutt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 9:18 PM;sykesm;{code}
06:39:05 --- FAIL: TestParallelSend (30.01s)
06:39:05     comm_test.go:663: 
06:39:05         	Error Trace:	comm_test.go:663
06:39:05         	Error:      	Not equal: 
06:39:05         	            	expected: 20
06:39:05         	            	actual  : 17
06:39:05         	Test:       	TestParallelSend
06:39:05 FAIL
06:39:05 coverage: 90.0% of statements
06:39:05 FAIL	github.com/hyperledger/fabric/gossip/comm	32.247s
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12033/console;;;","15/May/19 3:45 AM;MHBauer;I don't think this has anything to do with TLS. It's very easy to trigger locally.

go test -race -count 1000 -failfast -v -run TestParallelSend

Most runs take 0.01 -0.02s, which I'm guessing is just the resolution of the timer.

Sometimes it fails and times out

{noformat}
2019-05-14 11:44:22.432 PDT [gossip.comm] func1 -> WARN 001 127.0.0.1:39393, PKIid:3132372e302e302e313a3339333933 isn't responsive: EOF
 — FAIL: TestParallelSend (30.01s)
 comm_test.go:663: 
 Error Trace: comm_test.go:663
 Error: Not equal: 
 expected: 20
 actual : 5
 Test: TestParallelSend
 FAIL
 exit status 1
 FAIL github.com/hyperledger/fabric/gossip/comm 30.431s
 {noformat};;;","15/May/19 4:14 AM;MHBauer;The test uses a bunch of goroutines and a waitgroup with no effect.

The comment
// Making sure all messages was indeed sent
does not actually do what it says.
The send call in the innermost loop, itself, spawns a groutine per peer to do the actual send.

One error looks like the accept is started after the messages are sent. I see no reason why the messages would be queued for an acceptor that does not exist.;;;","15/May/19 4:23 AM;MHBauer;Here's a debug log of one success and one fail. Maybe someone else can follow what's going on better.

 [^TestParallelSend-success+fail.txt] ;;;","29/May/19 4:57 AM;MHBauer;same test, same failure.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"DOC: Fix minor content issues on fabric ""Build Your First Network"" Life Cycle changes",FAB-14962,38959,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,rameshthoomu,rameshthoomu,02/Apr/19 11:49 PM,25/Jul/19 8:13 PM,28/Oct/23 3:08 AM,25/Jul/19 8:13 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"Recent changes made in the below document has some minor content issues related to new life cycle changes.
https://hyperledger-fabric.readthedocs.io/en/master/build_network.html

ex:
```
1) 
t is possible to discover the approval status for the chanincode definition across all organizations by issuing the following query

The command will produce as output a JSON map showing if the organizations in the channel have approved the chaincode definition provided in the queryapprovalstatus command. In this case, given that both organizations have approved, we obtain
```
*queryapprovalstatus command is not provided.*

2) The endorsement policy of mycc will be set to require endorsements from a peer in both Org1 and Org2. Therefore, we also need to install the chaincode on a {color:red}peer in Org2.{color}

*Specify the peer number. like the way it mentioned here `Issue the following command to install the package on {color:red}peer0{color} of Org1.`*

3) # this returns the {color:red}details of the packages{color} installed on your peers
peer lifecycle chaincode queryinstalled.

*I think this should be ""details of the chaincode package""
*
4) The package ID may not be the same for all users, so you need to complete this step using the package ID returned from your console.

*Instead of saying all users, better keep something like this. Package ID gets created dynamically on the install command, so use the package ID which got returned.*

5) The approval is distributed within each organization using {color:red}gossip{color}, so the command does not need to target every peer within an organization.

*Change this to gossip protocol.*

6) Finally, the chaincode is accessible after it is installed (like peer1.org2.example.com in the above example) because it has already been {color:red}instantiated.{color}

*I think with the new life cycle changes, there is no instantiation.*

7) commands mentioned in this section needs to be modified https://hyperledger-fabric.readthedocs.io/en/master/build_network.html#how-can-i-see-the-chaincode-logs

*When I execute, I see below container name.. 
dev-peer0.org1.example.com-mycc_1-27ef99cb3cbd1b545063f018f3670eddc0d54f40b2660b8f853ad2854c49a0d8
*",,denyeart,negupta,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ixz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,rameshthoomu,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/19 7:45 PM;denyeart;[~negupta] I think some have been addressed, can you take a look?;;;","18/Apr/19 3:39 AM;negupta;Comments addressed in this CR: [https://gerrit.hyperledger.org/r/#/c/30986/]

Responding to specific points:

1) This was already addressed

2) I specify the peer installed in the sentence below: Now install the chaincode package onto peer0 of Org2.

3) Good suggestion. Done.

4) I am going to keep the language in the docs because the hash is not created by the peer, it is created deterministically by the peer.  However, that process may be different for different users.

5) Addressed by removing gossip. Not necessary in the sentence.

6) This has been addressed.

7) Good suggestion. Section rewritten in the CR above.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"goroutine failed after TestGossipStateProvider with panic error, Timeout expired",FAB-14963,38960,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,sambhavdutt,sambhavdutt,02/Apr/19 11:53 PM,09/Apr/19 6:21 AM,28/Oct/23 3:08 AM,09/Apr/19 6:21 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-first-failure,,,,,"Fail in goroutine after TestGossipStateProvider_TestStateMessages has completed, panic error observed,


*Branch:* master
*Platform:* s390x
*Error Snippet:*

{code:java}
21:11:09 2019-04-01 21:10:18.527 EDT [gossip.privdata] StoreBlock -> ERRO 008 Validation failed: foobar
21:11:09 2019-04-01 21:10:29.058 EDT [gossip.gossip#p0] NewGossipService -> WARN 7b8 External endpoint is empty, peer will not be accessible outside of its organization
.
.
21:11:09 --- FAIL: TestGossipStateProvider_TestStateMessages (30.79s)
21:11:09     state_test.go:1721: Started to spin off, until predicate will be satisfied.
21:11:09     state_test.go:1733: Timeout has expired
21:11:09     state_test.go:1154: Peer receiving channel was closed before getting response from bootstrap peer
21:11:09 panic: Fail in goroutine after TestGossipStateProvider_TestStateMessages has complete

{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/72/",,C0rWin,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,1868800decc9bd8a4fc5c73f24e0347ef25c6695,Unset,No,,,"1|i00iy7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,sambhavdutt,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/19 6:03 AM;C0rWin;https://gerrit.hyperledger.org/r/30798 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cut v1.4.1 release,FAB-14964,38962,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,03/Apr/19 12:51 AM,18/Jul/19 2:55 AM,28/Oct/23 3:08 AM,29/May/19 7:59 PM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"Prepare and publish the release of Hyperledger Fabric. The tasks are listed in execution order and I have indicated any dependencies in the description of each.

 ",,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14986,FAB-15995,FAB-13553,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00iyn:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - verify release jobs to support 1.4.1 release,FAB-14965,38963,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,denyeart,03/Apr/19 12:51 AM,12/Apr/19 2:33 AM,28/Oct/23 3:08 AM,12/Apr/19 2:33 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-ci,fabric-release,,,,,0,fabric-ci,,,,,"Make sure all the release jobs & multiarch jobs are ready for the release.

*fabric* -- fabric-release-jobs-x86_64 & fabric-release-jobs-s390x (included docker images and binaries)
*fabric-ca* --fabric-ca-image-release-x86_64 & fabric-ca-image-release-s390x & fabric-ca-binaries-x86_64 (for binaries)
*fabric-chaincode-java* -- fabric-chaincode-java-release-x86_64 ( javaenv image on x platform)
*fabric-chaincode-node* -- fabric-chaincode-node-nodeenv-release-jobs-x86_64 & fabric-chaincode-node-nodeenv-release-jobs-s390x (nodeenv image on x and z)

Multiarch jobs:
https://jenkins.hyperledger.org/view/multi-arch/

",,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00iyv:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 2:33 AM;rameshthoomu;above said jobs are configured for 1.4.1 release and are working as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric for 1.4.1 release,FAB-14966,38964,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 12:23 AM,28/Oct/23 3:08 AM,12/Apr/19 12:23 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

*----------*

{\{git checkout master }}

{{git pull}}

_*checkout the CR from Gerrit - be sure you have latest!!!*_ 

{{git checkout -b <newbranch>}}

{\{git rebase master }}

git commit --amend

*_make a tweak to commit message_*

git review

 

Check for clean CI passes

merge

----------------------

Changes

----------------------------

Update bootstrap.sh for latest baseimage:

export THIRDPARTY_IMAGE_VERSION=0.4.13

 

Update Makefile

{{BASE_VERSION}}
 {{PREV_VERSION}}

EXPERIMENTAL ?= false

 
 Update docs/source/install.rst 

e.g. 
 curl -sSL [https://goo.gl/6wtTN5] | bash -s 1.3.0-rc1--
  

grep code for last release number or rc1, ensure all other references updated.

{{release_notes/v1.3.0.txt should be created}}

{{docs/source/releases.rst should be updated with prose and link to GH release page}}

Update hard coded release version in cryptogen, configtxgen, configtxlator, idemixgen binaries, e.g. *common/tools/configtxlator/metadata/metadata.go* (try to resolve this in the future)

{{change log should be generated just *after* *rebasing* to pick up the last minute merged CRs and linked from docs/source/releases.rst}}

./scripts/changelog.sh v1.3.0-rc1 v1.3.0",,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00iz3:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric for next release,FAB-14967,38965,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 8:57 AM,28/Oct/23 3:08 AM,12/Apr/19 8:57 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the v1.4.0-rc1 release.

Update Makefile

BASE_VERSION = 1.4.0-rc1

PREV_VERSION = 1.3.0

 

Also, update master branch to have BASE_VERSION=1.4.0

Note: Release should be tagged prior to merging this ""prepare for next CR"".",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00izb:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric-ca for 1.4.1 release,FAB-14968,38966,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 1:36 AM,28/Oct/23 3:08 AM,12/Apr/19 1:36 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

Check for clean CI

Update Makefile

{{BASE_VERSION = 1.4.0-rc1}}
 {{PREV_VERSION = 1.3.0}}
 {{IS_RELEASE = true}}

change log should be generated just *after* *rebasing* to pick up the last minute merged CRs 
 ./scripts/changelog.sh v1.3.0 v1.4.0-rc1

update release_notes/v1.4.0.txt

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00izj:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 12:10 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/30891/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric-ca for next release,FAB-14969,38967,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 3:21 AM,28/Oct/23 3:08 AM,12/Apr/19 3:21 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the next release on the release-1.2 branch

1. Update Makefile

{{BASE_VERSION = 1.4.0}}
 {{PREV_VERSION = 1.4.0-rc1}}
 {{IS_RELEASE = false}}

2. Update lib/metadata/version.go

var Version = ""1.4.0""
  
 Note: Release should be tagged prior to merging this ""prepare for next CR"".

 Note, also update master branch with:

1. Update Makefile

{{BASE_VERSION = 1.4.0}}
 {{PREV_VERSION = 1.4.0-rc1}}
 {{IS_RELEASE = false}}

2. Update lib/metadata/version.go

var Version = ""1.4.0""",,aambati,ChristopherFerris,denyeart,rennman,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00izr:",,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,denyeart,rennman,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Verify fabric, fabric-ca docker images are published",FAB-14970,38968,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,denyeart,03/Apr/19 12:51 AM,12/Apr/19 3:52 AM,28/Oct/23 3:08 AM,12/Apr/19 3:52 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-ci,fabric-release,,,,,0,,,,,,"Verify fabric, fabric-ca docker images are published to hyperledger docker-hub account and make sure fabric-binaries are published to nexus repository.",,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00izz:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Push multiarch manifests,FAB-14971,38969,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 1:51 AM,28/Oct/23 3:08 AM,12/Apr/19 1:51 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-build,,,,,,0,,,,,,BASE_VERSION=1.4.0-rc2 TWO_DIGIT_VERSION=1.4 scripts/multiarch.sh user password,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j07:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric-sdk-node,FAB-14976,38974,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,andrew-coleman,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 1:56 AM,28/Oct/23 3:08 AM,12/Apr/19 1:56 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"*MUST BE REBASED JUST PRIOR TO MERGING*

generate CHANGELOG.md just *after rebasing* to pick up last minute merged CRs

./scripts/changelog.sh 2b862d7 v1.3.0 (have to use hash as there is no tag to find)

update release_notes/v1.3.0.txt

update package.json files with the release identifier

./package.json

    ""version"": ""1.3.0-snapshot"",  -> ""version"": ""1.3.0"",

    ""testFabricVersion"": ""master"",  -> ""testFabricVersion"": ""1.3.0"",

./fabric-ca-client/package.json

    ""version"": ""1.3.0-snapshot"",  -> ""version"": ""1.30"",

   ""tag"": ""unstable"" -> ""latest""

./fabric-client/package.json

    ""version"": ""1.3.0-snapshot"",  -> ""version"": ""1.3.0"",

    ""tag"": ""unstable"" -> ""latest""

 ",,andrew-coleman,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j1b:",,,,,,,,,,,,,,,,,,,,andrew-coleman,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric-sdk-node for next release,FAB-14977,38975,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 6:18 AM,28/Oct/23 3:08 AM,12/Apr/19 6:18 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"update package.json files with the SNAPSHOT release identifier

  ./package.json

  fabric-client/package.json

  fabric-ca-client/package.json",,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j1j:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 3:54 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/30903/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric-samples,FAB-14978,38976,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,denyeart,denyeart,03/Apr/19 12:51 AM,12/Apr/19 2:50 AM,28/Oct/23 3:08 AM,12/Apr/19 2:50 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-samples,,,,,,0,,,,,,"Update version references in fabric-samples, and then tag fabric-samples and create release-1.4 branch.

See associated CR for updates.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00j1r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 2:50 AM;denyeart;We can leave node.js package.json references to ~1.4.0, as this will pull latest 3rd digit releases from npm automatically.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Pin fabric-samples to node.js ""~1.4.1""",FAB-14979,38977,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,denyeart,denyeart,03/Apr/19 12:51 AM,12/Apr/19 2:50 AM,28/Oct/23 3:08 AM,12/Apr/19 2:50 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-samples,,,,,,0,,,,,,"*AFTER V1.4.0 ONLY... NOT AFTER V1.4.0-RC1.*

After creating release-1.4 branch, pin the fabric samples to use version ""~1.4.0"" of node sdk and node chaincode.  This will forever align fabric samples in release-1.4 branch with the 1.4.x node.js releases. 

fabric-samples master branch continues to use ""unstable"" to pick up the latest and greatest node.js releases.

This should be merged in release-1.4 branch, before fabric-samples is tagged with ""v1.4.0"".

 

*Clarification - for v1.4.0-rc1 node sdk had a release, therefore we pinned at ""1.4.0-rc1"" until final release.*",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j1z:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 2:50 AM;denyeart;We can leave node.js package.json references to ~1.4.0, as this will pull latest 3rd digit releases from npm automatically.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tag all repositories for 1.4.1,FAB-14981,38979,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 3:21 AM,28/Oct/23 3:08 AM,12/Apr/19 3:20 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,"*NOTE:* depends on preceding related CRs being merged.

Tag each repository local clone with the release_notes/v1.2.0.txt as the tag comment

% git tag -a v1.4.0-rc1 -F release_notes/v1.4.0-rc1.txt

{{% git push origin v1.4.0-rc1 HEAD:refs/heads/master}}

Tag each of fabric, fabric-ca , fabric-chaincode-java, fabric-chaincode-node, fabric-sdk-node, fabric-samples (use v1.4.0-rc1).

 
----
Note, that one can also tag the repo at a specific commit-level.

NOTE *e4b4704 should be updated with latest commit sha*

E.g., to add the {color:#f79232}*v1.4.0-rc1*{color} tag at commit level {color:#205081}*e4b4704*{color}, I used

{{% git tag -a *{color:#f79232}v1.4.0-rc1{color} {color:#205081}e4b4704{color}* -}}F release_notes/v1.4.0-rc1.{{txt}}

 

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j2f:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test download of release artifacts and samples across all platforms,FAB-14982,38980,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 3:36 AM,28/Oct/23 3:08 AM,12/Apr/19 3:22 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,test download of release artifacts and samples across all platforms,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j2n:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 3:36 AM;vijaypunugubati;Please see the results for the post release checks job ran the byfn-eyfn tests: default, custom, node chaincode, and CouchDB with 1.4.1 released images from dockerhub.

[https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-checks-master-x86_64/3/console]

[https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-checks-master-s390x_1/12/console]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Verify doc build status on ReadTheDocs,FAB-14984,38982,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,rameshthoomu,denyeart,03/Apr/19 12:51 AM,12/Apr/19 3:25 AM,28/Oct/23 3:08 AM,12/Apr/19 3:25 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-ci,fabric-docs,fabric-release,,,,0,,,,,,Verify readthedocs version release-1.4 gets built and published from release-1.4 branch edits.,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j33:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Send email to hyperledger-fabric mailing list,FAB-14985,38983,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 12:51 AM,12/Apr/19 6:22 AM,28/Oct/23 3:08 AM,12/Apr/19 6:22 AM,,,,,,,,,,,,,,v1.4.1,,,,fabric-release,,,,,,0,,,,,,send email announcing the release to hyperledger-fabric@lists.hyperledger.org mailing list.,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j3b:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cut v2.0.0-alpha release,FAB-14986,38985,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,03/Apr/19 1:13 AM,09/Nov/20 11:36 PM,28/Oct/23 3:08 AM,09/Nov/20 11:36 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"Prepare and publish the release of Hyperledger Fabric. The tasks are listed in execution order and I have indicated any dependencies in the description of each.

 ",,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17245,,FAB-14964,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j3r:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,JonathanLevi,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[CI] - verify release jobs are ready,FAB-14987,38986,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,denyeart,03/Apr/19 1:13 AM,10/Apr/19 10:05 PM,28/Oct/23 3:08 AM,10/Apr/19 10:05 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ci,fabric-release,,,,,0,fabric-ci,,,,,Make sure all the release jobs are ready for release.,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j3z:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/19 12:06 AM;rameshthoomu;Updating multiarch scripts to disable publishing images with latest tag...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric v2.0.0-alpha,FAB-14988,38987,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,10/Apr/19 11:42 AM,28/Oct/23 3:08 AM,10/Apr/19 11:42 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

*----------*

{\{git checkout master }}

{{git pull}}

_*checkout the CR from Gerrit - be sure you have latest!!!*_ 

{{git checkout -b <newbranch>}}

{\{git rebase master }}

git commit --amend

*_make a tweak to commit message_*

git review

 

Check for clean CI passes

merge

----------------------

Changes

----------------------------

Update bootstrap.sh for latest baseimage:

export THIRDPARTY_IMAGE_VERSION=0.4.13

 

Update Makefile

{{BASE_VERSION}}
 {{PREV_VERSION}}

EXPERIMENTAL ?= false

 
 Update docs/source/install.rst 

e.g. 
 curl -sSL [https://goo.gl/6wtTN5] | bash -s 1.3.0-rc1--
  

grep code for last release number or rc1, ensure all other references updated.

{{release_notes/v1.3.0.txt should be created}}

{{docs/source/releases.rst should be updated with prose and link to GH release page}}

Update hard coded release version in cryptogen, configtxgen, configtxlator, idemixgen binaries, e.g. *common/tools/configtxlator/metadata/metadata.go* (try to resolve this in the future)

{{change log should be generated just *after* *rebasing* to pick up the last minute merged CRs and linked from docs/source/releases.rst}}

./scripts/changelog.sh v1.3.0-rc1 v1.3.0",,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j47:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,luomin,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric for next release,FAB-14989,38988,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,12/Apr/19 8:57 AM,28/Oct/23 3:08 AM,12/Apr/19 8:57 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the v1.4.0-rc1 release.

Update Makefile

BASE_VERSION = 1.4.0-rc1

PREV_VERSION = 1.3.0

 

Also, update master branch to have BASE_VERSION=1.4.0

Note: Release should be tagged prior to merging this ""prepare for next CR"".",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j4f:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric-ca v2.0.0-alpha,FAB-14990,38989,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,10/Apr/19 11:42 AM,28/Oct/23 3:08 AM,10/Apr/19 11:42 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"*MUST BE REBASED JUST BEFORE MERGING*

Check for clean CI

Update Makefile

{{BASE_VERSION = 1.4.0-rc1}}
 {{PREV_VERSION = 1.3.0}}
 {{IS_RELEASE = true}}

change log should be generated just *after* *rebasing* to pick up the last minute merged CRs 
 ./scripts/changelog.sh v1.3.0 v1.4.0-rc1

update release_notes/v1.4.0.txt

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j4n:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/19 4:54 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/30844/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric-ca for next release,FAB-14991,38990,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,12/Apr/19 8:58 AM,28/Oct/23 3:08 AM,12/Apr/19 8:58 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"Note that this change must be stacked on the previous CR to prepare for the next release on the release-1.2 branch

1. Update Makefile

{{BASE_VERSION = 1.4.0}}
 {{PREV_VERSION = 1.4.0-rc1}}
 {{IS_RELEASE = false}}

2. Update lib/metadata/version.go

var Version = ""1.4.0""
  
 Note: Release should be tagged prior to merging this ""prepare for next CR"".

 Note, also update master branch with:

1. Update Makefile

{{BASE_VERSION = 1.4.0}}
 {{PREV_VERSION = 1.4.0-rc1}}
 {{IS_RELEASE = false}}

2. Update lib/metadata/version.go

var Version = ""1.4.0""",,aambati,ChristopherFerris,denyeart,rennman,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j4v:",,,,,,,,,,,,,,,,,,,,aambati,ChristopherFerris,denyeart,rennman,rickr,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Verify fabric, fabric-ca docker images are published",FAB-14992,38991,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,denyeart,03/Apr/19 1:13 AM,10/Apr/19 11:43 AM,28/Oct/23 3:08 AM,10/Apr/19 11:43 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ci,fabric-release,,,,,0,,,,,,"Verify fabric, fabric-ca docker images are published to hyperledger docker-hub account and make sure fabric-binaries are published to nexus repository.",,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j53:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Push multiarch manifests,FAB-14993,38992,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,10/Apr/19 11:43 AM,28/Oct/23 3:08 AM,10/Apr/19 11:43 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-build,,,,,,0,,,,,,BASE_VERSION=1.4.0-rc2 TWO_DIGIT_VERSION=1.4 scripts/multiarch.sh user password,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j5b:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric-sdk-node,FAB-14998,38997,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,31/Jul/19 2:53 AM,28/Oct/23 3:08 AM,31/Jul/19 2:53 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"*MUST BE REBASED JUST PRIOR TO MERGING*

generate CHANGELOG.md just *after rebasing* to pick up last minute merged CRs

./scripts/changelog.sh 2b862d7 v1.3.0 (have to use hash as there is no tag to find)

update release_notes/v1.3.0.txt

update package.json files with the release identifier

./package.json

    ""version"": ""1.3.0-snapshot"",  -> ""version"": ""1.3.0"",

    ""testFabricVersion"": ""master"",  -> ""testFabricVersion"": ""1.3.0"",

./fabric-ca-client/package.json

    ""version"": ""1.3.0-snapshot"",  -> ""version"": ""1.30"",

   ""tag"": ""unstable"" -> ""latest""

./fabric-client/package.json

    ""version"": ""1.3.0-snapshot"",  -> ""version"": ""1.3.0"",

    ""tag"": ""unstable"" -> ""latest""

 ",,andrew-coleman,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j6f:",,,,,,,,,,,,,,,,,,,,andrew-coleman,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 10:18 AM;harrisob@us.ibm.com;https://gerrit.hyperledger.org/r/#/c/30912/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare fabric-sdk-node for next release,FAB-14999,38998,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,30/Apr/19 4:54 AM,28/Oct/23 3:08 AM,30/Apr/19 4:54 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"update package.json files with the SNAPSHOT release identifier

  ./package.json

  fabric-client/package.json

  fabric-ca-client/package.json",,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j6n:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,harrisob@us.ibm.com,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release fabric-samples,FAB-15000,38999,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,03/Apr/19 1:13 AM,09/Nov/20 11:35 PM,28/Oct/23 3:08 AM,09/Nov/20 11:35 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,"Tag fabric-samples v2.0.0-alpha.

Note, tagging is really not necessary for fabric-samples alpha, but would be nice to maintain consistency with other repos and indicate when the node sdk token samples that go with fabric v2.0.0-alpha features is all merged and ready for people to use.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00j6v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Pin fabric-samples in master to ""unstable""",FAB-15002,39001,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,03/Apr/19 1:13 AM,12/Apr/19 9:41 AM,28/Oct/23 3:08 AM,12/Apr/19 9:41 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,"Pin fabric-samples in master to ""unstable"" so that latest node modules get used by default.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00j7b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Tag all repositories for v2.0.0-alpha,FAB-15003,39002,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,10/Apr/19 2:38 PM,28/Oct/23 3:08 AM,10/Apr/19 2:38 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,"*NOTE:* depends on preceding related CRs being merged.

Tag each repository local clone with the release_notes/v1.2.0.txt as the tag comment

% git tag -a v1.4.0-rc1 -F release_notes/v1.4.0-rc1.txt

{{% git push origin v1.4.0-rc1 HEAD:refs/heads/master}}

Tag each of fabric, fabric-ca , fabric-chaincode-java, fabric-chaincode-node, fabric-samples (use v1.4.0-rc1).

 
----
Note, that one can also tag the repo at a specific commit-level.

NOTE *e4b4704 should be updated with latest commit sha*

E.g., to add the {color:#f79232}*v1.4.0-rc1*{color} tag at commit level {color:#205081}*e4b4704*{color}, I used

{{% git tag -a *{color:#f79232}v1.4.0-rc1{color} {color:#205081}e4b4704{color}* -F release_notes/v1.4.0-rc1.txt}}

 

 ",,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j7j:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test download of release artifacts and samples across all platforms,FAB-15004,39003,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,10/Apr/19 10:10 PM,28/Oct/23 3:08 AM,10/Apr/19 10:10 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,test download of release artifacts and samples across all platforms,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j7r:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,harrijk,rameshthoomu,vijaypunugubati,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/19 10:09 PM;vijaypunugubati;Please check the below links for tested Byfn: default, custom, node chaincode, and CouchDB with 2.0.0-alpha images.

[https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-checks-master-s390x_1/1/console]

https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-checks-master-x86_64/1/consoleFull;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Send email to hyperledger-fabric mailing list,FAB-15006,39005,38985,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,ChristopherFerris,denyeart,03/Apr/19 1:13 AM,11/Apr/19 1:52 PM,28/Oct/23 3:08 AM,11/Apr/19 1:52 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-release,,,,,,0,,,,,,send email announcing the release to hyperledger-fabric@lists.hyperledger.org mailing list.,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|i00j87:",,,,,,,,,,,,,,,,,,,,ChristopherFerris,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""Instantiation"" word in fabric 2.0 lifecyle flow",FAB-15008,39007,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Duplicate,,rameshthoomu,rameshthoomu,03/Apr/19 2:25 AM,11/Apr/19 7:49 PM,28/Oct/23 3:08 AM,11/Apr/19 7:49 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,fabric-samples,,,,,0,,,,,,"In the below scenario observed ""instantiation"" word. As per the document, there is no instantiation step in the new life cycle flow.

Query the ledger without commiting the chaincode.

bash-4.4# peer chaincode query -C $CHANNEL_NAME -n mycc -c '{""Args"":[""query"",""a""]}'
Error: endorsement failure during query. response: status:500 message:""make sure the chaincode mycc has been successfully {color:red}instantiated {color}and try again: chaincode mycc not found""
bash-4.4#",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15097,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00j8n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"IdentityMixer: Backend Support (Revocation Alg, Prover, Verifier)",FAB-15010,39010,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,JonathanLevi,JonathanLevi,JonathanLevi,03/Apr/19 2:57 AM,03/Apr/19 3:07 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14954,,,No,,Unset,No,,,"1|i00j8v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),JonathanLevi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Augment Raft leader election section to include how and when new leader elected,FAB-15011,39011,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,pandrejko,ChristopherFerris,ChristopherFerris,03/Apr/19 3:00 AM,05/Apr/19 2:36 AM,28/Oct/23 3:08 AM,05/Apr/19 2:36 AM,v1.4.1,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,"Noticed that the section on leader election for Raft does not indicate that leader election happens periodically and can be configured. Important to know so that people understand that ordering service cannot be easily compromised.

 

https://hyperledger-fabric.readthedocs.io/en/release-1.4/orderer/ordering_service.html#how-leader-election-works-in-raft",,ChristopherFerris,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00j93:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChristopherFerris,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/19 2:36 AM;jyellick;At least in the v1.4.1 implementation of Raft, we have no notion of leader 'spinning' or similar.  Leader election happens per the standard etcdraft protocols, and leader is changed proactively only for safety during reconfiguration.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Validate collection names,FAB-15012,39013,38776,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,03/Apr/19 3:45 AM,24/Apr/19 4:23 PM,28/Oct/23 3:08 AM,24/Apr/19 4:23 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00j9j:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/19 3:30 AM;wlahti;https://gerrit.hyperledger.org/r/c/30816/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update tutorials to reflect latest CLI,FAB-15013,39014,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,03/Apr/19 4:21 AM,06/Apr/19 7:29 PM,28/Oct/23 3:08 AM,06/Apr/19 7:29 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,Update chaincode for operators tutorial and the channel update tutorial to incorperate the queryapprovals and querycommitted commands,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00j9r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace mockClient with actual mock in core/container/dockercontroller_test.go,FAB-15014,39016,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,btl5037,btl5037,03/Apr/19 6:47 AM,07/May/19 12:49 AM,28/Oct/23 3:08 AM,07/May/19 12:49 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,,,btl5037,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00j9z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,MHBauer,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/May/19 9:05 AM;MHBauer;Does this mean a generated mock?

 

Why? The existing hand-rolled mock appears to have all functionality needed for a very simple client.;;;","02/May/19 9:17 AM;btl5037;Very simple is using the actual docker interface, from the actual docker client Fabric currently uses, to auto generate a mock. That leaves us with 5 lines of code we would have to maintain. That's about as simple as it gets. This is a remnant of a bygone era, before we had counterfeiter and mockery. We need to standardize and cleanup the codebase. We now have tools to generate the mock that didn't exist in Fabric when it was written, and we should be using them. Just because something works, doesn't mean it's the best way. It's ugly, unclean, and requires maintaining. This is part of our hygiene tasks intended to cleanup the polluted codebase.;;;","02/May/19 3:21 PM;MHBauer;[https://gerrit.hyperledger.org/r/#/c/31187/]

attempt at swapping it out with a mock;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create a multi-org Raft sample,FAB-15015,39017,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,yacovm,yacovm,03/Apr/19 7:30 AM,03/Dec/19 5:42 AM,28/Oct/23 3:08 AM,03/Dec/19 5:42 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00ja7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System Behave Framework: Fix wording for installing using args,FAB-15016,39019,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,latitiah,latitiah,03/Apr/19 8:34 AM,21/Sep/19 5:36 AM,28/Oct/23 3:08 AM,21/Sep/19 5:36 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"The wording in a few of the behave framework has the install step contain the args that should be used for instantiation. Instead of having the install step contain the instantiation args, the following instantiation step should contain the args. See test case FAB-3852 in the orderer.feature file.

{code}
When an admin installs chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/mapkeys/go"" with args [""init""] on all peers
    When an admin instantiates the chaincode on ""peer0.org1.example.com""
{code}

should instead read and interpret
{code}
When an admin installs chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/mapkeys/go"" on all peers
    When an admin instantiates the chaincode  with args [""init""] on ""peer0.org1.example.com""
{code}",,latitiah,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jan:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Sep/19 5:36 AM;scottz;Deprecating behave framework and tests.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System Behave Framework: make fabric-ca-client work for enrolling an admin,FAB-15017,39020,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,latitiah,latitiah,03/Apr/19 8:38 AM,21/Sep/19 5:37 AM,28/Oct/23 3:08 AM,21/Sep/19 5:37 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Currently, it is not possible to register a user as an admin using fabric-ca-client in the behave framework.  Even when selecting as an admin, the code currently sets the new user as a user. 

https://github.com/hyperledger/fabric-test/blob/master/feature/steps/endorser_util.py#L1081-L1086 

This needs to be fixed.",,latitiah,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jav:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Sep/19 5:37 AM;scottz;Deprecating behave framework and tests.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System Behave Framework: When using the CLI with TLS turned on invoke fails,FAB-15018,39021,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,latitiah,latitiah,03/Apr/19 8:43 AM,29/Jul/19 2:52 AM,28/Oct/23 3:08 AM,29/Jul/19 2:52 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"When using the CLI interface in the system behave framework with TLS turned on, the invoke fails with the following error:

{code}
Error: error getting broadcast client: orderer client failed to connect to orderer0.example.com:7050: failed to create new connection: context deadline exceeded
{code}

The stderr log from the invoke also shows that the incorrect certificate is being used for the orderer0.example.com
{code}
HandleSubConnStateChange -> DEBU 049 pickfirstBalancer: HandleSubConnStateChange: 0xc0003ffcc0, CONNECTING
      2019-04-02 21:54:05.781 UTC [grpc] createTransport -> DEBU 04a grpc: addrConn.createTransport failed to connect to {orderer0.example.com:7050 0  <nil>}. Err :connection error: desc = ""transport: authentication handshake failed: x509: certificate signed by unknown authority"". Reconnecting...
      2019-04-02 21:54:05.781 UTC [grpc] HandleSubConnStateChange -> DEBU 04b pickfirstBalancer: HandleSubConnStateChange: 0xc0003ffcc0, TRANSIENT_FAILURE
{code}

As an example, run FAB-6489 where the CLI interface is used in fabric-ca.feature.",,latitiah,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15375,FAB-15370,FAB-15380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jb3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,vijaypunugubati,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"29/Jul/19 2:51 AM;vijaypunugubati;Tool framework issue. we are deprecating behave framework, so no point in pursuing this.;;;","29/Jul/19 2:52 AM;vijaypunugubati;Tool framework issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the Makefile in fabric-test to build instead of pull,FAB-15019,39022,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,latitiah,latitiah,03/Apr/19 12:07 PM,03/Apr/19 12:07 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The Makefile needs to be updated to have the following built 
from the fabric repo: 
- cryptogen
- configtxlator
- configtxgen
- docker

from the fabric-ca repo:
- fabric-ca-client
- fabric-ca-server
- docker

Targets for building the docker images for fabric-chaincode-node and fabric-chaincode-java are already in the Makefile.

Once these targets are in place, the smoke, daily, etc. targets need to be updated to build instead of pull",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jbb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate to use python3 instead of python2,FAB-15020,39023,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,latitiah,latitiah,03/Apr/19 12:13 PM,17/Apr/19 10:38 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"All python scripts, applications and test frameworks need to be updated to ensure that they are python3 compatible.

The known areas that are affected by this:
 - system behave test framework (fabric-test/feature, fabric-test/feature-upgrade)
 - fabric-test test wrappers that use py.test (fabric-test/regression)
 - ATD (in fabric-test/tools) - uses ansible which is python based
 - anywhere pip is used
 - fabric-sdk-python",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jbj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 11:15 PM;latitiah;Some suggested hints to help with this process:
 # Use a VM without python2 installed, but with python3 installed instead. This allows you to isolate and rerun as needed. If your environment gets messed up, just throw it away and get a new one.
 # Install the different fabric repositories
 # Build the images and binaries from the repositories
 # From fabric-test repo, execute the install_behave.sh (this uses pip, so I'm pretty sure this will need to change)
 # Run the regression scripts.
 # What breaks? Do you see what needs to be fixed from the errors?
 # There is a python converter script that can help migrate python files to python3 [https://docs.python.org/2/library/2to3.html] if needed. Feel free to run this on any python files to see if anything comes up as needing to be converted. (Sometimes if I'm not paying attention, I can see myself resorting back to python2 habits.)
 # Run the tests individually if needed, if the error messages are too great.
 # Most of the changes will probably be in the feature and feature-upgrade directories.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Protos and Interfaces,FAB-15021,39024,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,angelo.decaro,angelo.decaro,angelo.decaro,03/Apr/19 4:59 PM,03/Dec/19 3:04 AM,28/Oct/23 3:08 AM,02/Dec/19 11:13 PM,,,,,,,,,,,,,,,,,,fabric-token,,,,,,0,,,,,,This story is about introducing the relative protobuf and interfaces to support integration of tokens in lifecycle.,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11169,,,No,,Unset,No,,,"1|i00jbr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 5:01 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/30631/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Basic-network support for new lifecycle,FAB-15022,39025,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,03/Apr/19 5:03 PM,03/May/19 9:00 PM,28/Oct/23 3:08 AM,03/May/19 8:57 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,ales,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14733,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jbz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,lehors,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/19 8:57 PM;lehors;https://gerrit.hyperledger.org/r/#/c/30670/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bridge Functions Implementation,FAB-15023,39026,,Story,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,angelo.decaro,angelo.decaro,angelo.decaro,03/Apr/19 5:25 PM,18/Apr/19 3:58 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-token,,,,,,0,,,,,,This story is about the implementation of the bridge functions between lifecycle chaincode and the backing implementation supporting tokens,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11169,,,No,,Unset,No,,,"1|i00jc7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/19 5:35 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/30671/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtx.yaml needs proper documentation,FAB-15024,39027,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,lehors,lehors,03/Apr/19 5:40 PM,13/Jan/21 4:50 AM,28/Oct/23 3:08 AM,13/Jan/21 4:12 AM,v1.4.0,v2.0.0,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,"The format of the config file fed to configtxgen is all but a largely undocumented feature.

The generated template and examples around contain some useful comments but that is insufficient.

The whole structure, list of attributes and their possible values ought to be part of fabric's documentation.

 ",,lehors,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jcf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/20 9:21 PM;pandrejko;PR: https://github.com/hyperledger/fabric/pull/1105;;;","13/Jan/21 4:12 AM;pandrejko;Nik did a fantastic job of documenting this here: https://hyperledger-fabric.readthedocs.io/en/latest/create_channel/create_channel_config.html
Closing.;;;","13/Jan/21 4:50 AM;lehors;I agree. Thank you!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in port number for peer0.org1.example.com ,FAB-15025,39028,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,tehsunnliu,tehsunnliu,03/Apr/19 6:23 PM,11/Aug/19 6:15 PM,28/Oct/23 3:08 AM,11/Aug/19 6:15 PM,v1.4.0,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,,,,,,"I was following the documentation and faced a problem 
{code:java}
""Error: error getting endorser client for invoke: endorser client failed to connect to peer0.org1.example.com:9051: failed to create new connection: context deadline exceeded""1{code}
while executing 


{code:java}
peer chaincode invoke -o orderer.example.com:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n mycc --peerAddresses peer0.org1.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt -c '{""Args"":[""invoke"",""a"",""b"",""10""]}'{code}


 I checked the default port in `base/docker-compose-base.yaml` and found that the port for peer0.org1.example.com is actually set to 7051.

 
 - 
{code:java}
CORE_PEER_ADDRESS=peer0.org1.example.com:7051{code}

The below command worked gracefully.


{code:java}
peer chaincode invoke -o orderer.example.com:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C $CHANNEL_NAME -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt -c '{""Args"":[""invoke"",""a"",""b"",""10""]}'{code}",,tehsunnliu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2276,,,No,,Unset,No,,,"1|i00jcn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tehsunnliu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer chaincode install fails with segmentation violation - switch to dynamically linked binaries,FAB-15026,39029,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,raft 3,raft 3,03/Apr/19 6:45 PM,12/Nov/19 3:49 AM,28/Oct/23 3:08 AM,18/Oct/19 9:43 PM,v1.4.0,v1.4.1,,,,,,,,,,,,v1.4.4,,,,fabric-peer,,,,,,0,ipm,,,,,"The below error happens every now and then when running _peer chaincode install_ command. We are running the command not on the peer itself, but in another container targeting the peer.

Also applies to version 1.4.1-rc1, which is not in the list below.

Error:

{code:java}
fatal error: unexpected signal during runtime execution
[signal SIGSEGV: segmentation violation code=0x1 addr=0xe5 pc=0x7f7b8f5fa3f8]
{code}


Logs are attached: [^log.txt]

 

 ",,gauravgiri,hakan.eryargi,jyellick,mastersingh24,raft 3,sykesm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16816,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 6:43 PM;raft 3;log.txt;https://jira.hyperledger.org/secure/attachment/17065/log.txt","25/Apr/19 10:35 PM;raft 3;peer_logs.txt;https://jira.hyperledger.org/secure/attachment/17162/peer_logs.txt","25/Apr/19 10:49 PM;raft 3;peer_logs_1.4.1.txt;https://jira.hyperledger.org/secure/attachment/17163/peer_logs_1.4.1.txt",,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:6rq4",,Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),gauravgiri,hakan.eryargi,jyellick,mastersingh24,raft 3,sykesm,ymlbright,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/19 7:17 PM;mastersingh24;Try running `GODEBUG=netdns=go  peer chaincode install ...`   ;;;","25/Apr/19 10:36 PM;raft 3;Attached are new logs with `GODEBUG=netdns=go peer chaincode install ...`;;;","25/Apr/19 10:50 PM;raft 3;also logs for 1.4.1 is attached;;;","30/Apr/19 8:45 PM;mastersingh24;oops ... I did not carefully read the stack trace ... assume the cgo call error was the usual net lookup call, but it's actually a call to get the user.;;;","09/May/19 11:47 PM;raft 3;on high end machines this happens much more frequently. 5-6 failures in a row is not uncommon, if that gives a clue;;;","25/Sep/19 12:31 AM;jyellick;Is this still a problem?;;;","25/Sep/19 5:46 PM;gauravgiri;Yes, we receive the same issue, described in rocket chat at: https://chat.hyperledger.org/channel/fabric?msg=9yFhctzwWwvCuKWH6;;;","26/Sep/19 10:08 PM;sykesm;This problem (like others that are open) are due to how the binaries in 1.4.x were built as static.

https://github.com/hyperledger/fabric/blob/b6fdef9ebd9a86a328d1aa113434671d3e1fc0da/docker-env.mk#L65-L70

The issue is that even in static builds, there are at least two places where libc is required: DNS (net), and user/group account resolution (os/user).

These requirements can be avoided by building with CGO_ENABLED=0 but that also means that packages that require cgo (like pkcs11) can't be used.

The libc requirement for DNS resolution can be avoided by setting the {{netgo}} build tag at build or by setting {{GODEBUG=netdns=go}} at runtime. This works in environments that include simple {{/etc/resolv.conf}} configurations. This workaround has been around for a while.

As for the {{os/user}} libc requirement, there was no way to disable that until go 1.11, it can be avoided by building the binary with the {{osusergo}} build tag.

Given 1.4 is built with go 1.11, we could use the {{netdns,osusergo}} build tags in the static builds to avoid the libc dependencies.  However, in v2/master, we have chosen to build with dynamic linking against alpine with the musl libc.;;;","26/Sep/19 11:14 PM;gauravgiri;Thank you Mathew, However even after adding  GODEBUG=netdns=go, the issue remains the same.

This issue is specific for a Redhat machine, using standard docker hub hyperledger fabric images 1.4.1.;;;","27/Sep/19 12:43 AM;sykesm;> Thank you Mathew, However even after adding  GODEBUG=netdns=go, the issue remains the same.

I understand - that's because it only solves the net issue and not os/user. Perhaps my comments were not  as clear as they could have been.

The published 1.4.x images have issues. The network package has a workaround that you referenced will do the trick with simple resolver configurations but there is *not* a workaround for the os/user issue.

The os/user package is used indirectly during chaincode packaging when we call tar.FileInfoHeader.

https://github.com/golang/go/blob/83bd88129ea3b5a1272c06db3e865ee75740cee8/src/archive/tar/stat_unix.go#L39-L45

Using a native binary for linux (instead of containerized tools) is a viable workaround.

;;;","27/Sep/19 1:30 AM;gauravgiri;Thank you Mathew. As i understood this issue is there in the docker images for hyperledger fabric v 1.4.x., and may not be solved depending on os/user. Shall we try to build docker images from v1.4.1 source locally? Any specific config/step i need to do locally, so that this issue doesn't crop again in locally build docker images for fabric?;;;","27/Sep/19 3:31 AM;sykesm;I think the easiest local change is to build docker images with dynamic linking.

{{make docker DOCKER_DYNAMIC_LINK=true}}

I can verify that shortly but it's probably the most straightforward.;;;","27/Sep/19 3:39 AM;sykesm;If you see these errors, you're still building static and the issue will not be resolved:
{code:java}
✓ [14:35:53][~/workspace/fabric/src/github.com/hyperledger/fabric]
[sykesm@trapped] (release-1.4)$ make docker
Building .build/docker/bin/peer
# github.com/hyperledger/fabric/peer
/tmp/go-link-847207756/000006.o: In function `pluginOpen':
/workdir/go/src/plugin/plugin_dlopen.go:19: warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-847207756/000021.o: In function `mygetgrouplist':
/workdir/go/src/os/user/getgrouplist_unix.go:16: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-847207756/000020.o: In function `mygetgrgid_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:38: warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-847207756/000020.o: In function `mygetgrnam_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:43: warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-847207756/000020.o: In function `mygetpwnam_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:33: warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-847207756/000020.o: In function `mygetpwuid_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:28: warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-847207756/000004.o: In function `_cgo_18049202ccd9_C2func_getaddrinfo':
{code};;;","27/Sep/19 12:09 PM;gauravgiri;Thank you Mathew, you also updated the fix to v1.4.4. Any timeline when can we expect the docker images of this version in docker hub?;;;","17/Oct/19 11:40 PM;mastersingh24;We can try setting the osusergo build tag ;;;","18/Oct/19 12:32 AM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric/+/34005;;;","18/Oct/19 5:58 AM;sykesm;Between the netgo and osusergo issues, I think we should just change to dynamic linking in 1.4.4. We're using a glibc based image so there's no reason to have static linking.

If we go dynamic, it will resolve most of the issues we've historically seen in this space.;;;",,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper usage in core/scc,FAB-15029,39032,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,btl5037,btl5037,03/Apr/19 11:16 PM,21/May/19 3:29 AM,28/Oct/23 3:08 AM,21/May/19 3:29 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jdj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/May/19 5:04 AM;sykesm;https://gerrit.hyperledger.org/r/31237 [FAB-15029] refactor scc whitelist and viper;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Application V2_0 capabilities flag to sampleconfig/configtx.yaml,FAB-15030,39034,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,04/Apr/19 12:19 AM,09/Apr/19 12:20 AM,28/Oct/23 3:08 AM,08/Apr/19 11:49 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,The configtx.yaml under fabric/sampleconfig is currently missing the V2_0 capabilities flag in the application section. ,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jdz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/19 12:26 AM;wlahti;https://gerrit.hyperledger.org/r/c/30688/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger block storage metrics are reported against kvledger and not block storage,FAB-15031,39035,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,jyellick,jyellick,04/Apr/19 12:33 AM,18/Jun/19 10:44 PM,28/Oct/23 3:08 AM,13/Jun/19 10:35 AM,v1.4.0,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,metrics,operations,,,,"The current ledger block storage metrics are all tied to kvledger.  This means they are only valid for the peer when in fact, both peers and orderers need this same sort of information.

This metric (along with similar metrics, like block storage times) should be moved to the block store component so that it is valid for both orderer and peer.",,denyeart,jyellick,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12801,,,,FAB-15144,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz4r","Release note that ledger.blockstorage_commit_time applies to peer and orderer now, and no longer includes private data storage commit time, while new metric ledger_blockstorage_and_pvtdata_commit_time is available on peer to include total commit time for blockstorage and pvtdata.",Yes,,Unset,Unset,Ledger v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/May/19 3:01 AM;denyeart;[~manish-sethi] [~wenjian]

Wenjian will work on this. Looks like two metrics would be applicable at the common layer for orderer and peer:
 * ledger_blockchain_height
 * ledger_blockstorage_commit_time - note that currently this includes time for private data storage (only applicable to peer) and regular block storage (applicable to peer and orderer). I think it would be ok to re-define this as being for the common regular block storage only.

For background see https://gerrit.hyperledger.org/r/#/c/27486/;;;","11/May/19 4:45 AM;wenjian;I moved ledger_blockstorage_commit_time to common/ledger. Meanwhile, I renamed ledger_blockstorage_commit_time in kvledger to be ledger_blockstorage_commit_pvtdata_time.

I can remove ledger_blockstorage_commit_pvtdata_time if it is not important to track private data storage time.

 ;;;","11/May/19 4:46 AM;wenjian;CR (master): [https://gerrit.hyperledger.org/r/#/c/31330/];;;","13/Jun/19 3:49 AM;denyeart;merged in master... Wenjian will cherry pick to release-1.4.;;;","13/Jun/19 6:22 AM;wenjian;CR (release-1.4): [https://gerrit.hyperledger.org/r/#/c/fabric/+/31865/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FAIL	github.com/hyperledger/fabric/gossip/service - panic after 20 minutes,FAB-15032,39037,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,sykesm,sykesm,04/Apr/19 1:45 AM,19/Jun/19 4:31 AM,28/Oct/23 3:08 AM,09/May/19 8:41 AM,v2.0.0,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-gossip,,,,,,0,ci-flake,,,,,"Running locally (but observed similar issues in the past):

{code}
2019-04-03 11:46:56.717 EDT [gossip.gossip#p1] Gossip -> WARN 15c Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:46:57.354 EDT [gossip.gossip#p0] Gossip -> WARN 15d Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:46:57.830 EDT [gossip.gossip#p1] Gossip -> WARN 15e Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:46:59.217 EDT [gossip.gossip#p1] Gossip -> WARN 15f Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:46:59.856 EDT [gossip.gossip#p0] Gossip -> WARN 160 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:00.334 EDT [gossip.gossip#p1] Gossip -> WARN 161 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:01.718 EDT [gossip.gossip#p1] Gossip -> WARN 162 Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:02.359 EDT [gossip.gossip#p0] Gossip -> WARN 163 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:02.838 EDT [gossip.gossip#p1] Gossip -> WARN 164 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:04.224 EDT [gossip.gossip#p1] Gossip -> WARN 165 Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:04.863 EDT [gossip.gossip#p0] Gossip -> WARN 166 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:05.340 EDT [gossip.gossip#p1] Gossip -> WARN 167 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:06.724 EDT [gossip.gossip#p1] Gossip -> WARN 168 Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:07.368 EDT [gossip.gossip#p0] Gossip -> WARN 169 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:07.840 EDT [gossip.gossip#p1] Gossip -> WARN 16a Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:09.228 EDT [gossip.gossip#p1] Gossip -> WARN 16b Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:09.870 EDT [gossip.gossip#p0] Gossip -> WARN 16c Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:10.342 EDT [gossip.gossip#p1] Gossip -> WARN 16d Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:10.699 EDT [gossip.comm] sendToEndpoint -> WARN 16f Failed obtaining connection for 127.0.0.1:60921, PKIid:3132372e302e302e313a3630393231 reason: context deadline exceeded
2019-04-03 11:47:10.699 EDT [gossip.comm] sendToEndpoint -> WARN 16e Failed obtaining connection for 127.0.0.1:60924, PKIid:3132372e302e302e313a3630393234 reason: context deadline exceeded
2019-04-03 11:47:10.707 EDT [gossip.comm] sendToEndpoint -> WARN 170 Failed obtaining connection for 127.0.0.1:60921, PKIid:3132372e302e302e313a3630393231 reason: context deadline exceeded
2019-04-03 11:47:11.731 EDT [gossip.gossip#p1] Gossip -> WARN 171 Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:12.373 EDT [gossip.gossip#p0] Gossip -> WARN 172 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:12.842 EDT [gossip.gossip#p1] Gossip -> WARN 173 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:14.234 EDT [gossip.gossip#p1] Gossip -> WARN 174 Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:14.874 EDT [gossip.gossip#p0] Gossip -> WARN 175 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:15.345 EDT [gossip.gossip#p1] Gossip -> WARN 176 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:16.739 EDT [gossip.gossip#p1] Gossip -> WARN 177 Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:17.379 EDT [gossip.gossip#p0] Gossip -> WARN 178 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:17.848 EDT [gossip.gossip#p1] Gossip -> WARN 179 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:19.242 EDT [gossip.gossip#p1] Gossip -> WARN 17a Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:19.884 EDT [gossip.gossip#p0] Gossip -> WARN 17b Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:20.351 EDT [gossip.gossip#p1] Gossip -> WARN 17c Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:21.745 EDT [gossip.gossip#p1] Gossip -> WARN 17d Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:22.385 EDT [gossip.gossip#p0] Gossip -> WARN 17e Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:22.856 EDT [gossip.gossip#p1] Gossip -> WARN 17f Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:24.249 EDT [gossip.gossip#p1] Gossip -> WARN 180 Failed obtaining gossipChannel of [99 104 97 110 66] aborting
2019-04-03 11:47:24.885 EDT [gossip.gossip#p0] Gossip -> WARN 181 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:25.358 EDT [gossip.gossip#p1] Gossip -> WARN 182 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:25.749 EDT [gossip.service] waitForMultipleLeadersElection -> WARN 183 Incorrect number of leaders 2
2019-04-03 11:47:25.750 EDT [gossip.service] waitForMultipleLeadersElection -> WARN 184 Peer at index 0 is leader true
2019-04-03 11:47:25.750 EDT [gossip.service] waitForMultipleLeadersElection -> WARN 185 Peer at index 1 is leader true
2019-04-03 11:47:25.750 EDT [gossip.service] waitForMultipleLeadersElection -> WARN 186 Peer at index 2 is leader false
2019-04-03 11:47:27.387 EDT [gossip.gossip#p0] Gossip -> WARN 187 Failed obtaining gossipChannel of [99 104 97 110 65] aborting
2019-04-03 11:47:29.761 EDT [gossip.comm] sendToEndpoint -> WARN 188 Failed obtaining connection for 127.0.0.1:60934, PKIid:3132372e302e302e313a3630393334 reason: Shutting down
coverage: 81.9% of statements
panic: test timed out after 20m0s

... lots of stacks 
FAIL	github.com/hyperledger/fabric/gossip/service	1200.746s
{code}

Logs are attached.",,denyeart,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 1:43 AM;sykesm;gossip.log;https://jira.hyperledger.org/secure/attachment/17068/gossip.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jen:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/19 2:38 AM;sykesm;Similar failures observed https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11312/console - panic from timeout but different stacks.;;;","07/May/19 5:55 AM;MHBauer;Looks like a deadlock from this particular stack


goroutine 39049 [semacquire, 17 minutes]:
sync.runtime_SemacquireMutex(0xc0005f977c, 0x0)
	/usr/local/Cellar/go/1.12.1/libexec/src/runtime/sema.go:71 +0x3d
sync.(*Mutex).Lock(0xc0005f9778)
	/usr/local/Cellar/go/1.12.1/libexec/src/sync/mutex.go:134 +0x109
sync.(*RWMutex).Lock(0xc0005f9778)
	/usr/local/Cellar/go/1.12.1/libexec/src/sync/rwmutex.go:93 +0x2d
github.com/hyperledger/fabric/gossip/comm.(*connectionStore).shutdown(0xc0005f9740)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:147 +0x4b
github.com/hyperledger/fabric/gossip/comm.(*commImpl).Stop(0xc000317440)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:375 +0x136
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).Stop(0xc000648c80)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:759 +0x1a5
github.com/hyperledger/fabric/gossip/service.(*gossipServiceImpl).Stop(0xc0001ff7c0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:425 +0x4e6
github.com/hyperledger/fabric/gossip/service.(*gossipGRPC).Stop(0xc00041aef0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:745 +0x2e
github.com/hyperledger/fabric/gossip/service.stopPeers.func1(0xc002cc60f0, 0x1, 0x4a853e0, 0xc00041aef0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:627 +0x5a
created by github.com/hyperledger/fabric/gossip/service.stopPeers
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:625 +0xb2

It's a series of calls to Stop() that end in a rwMutex.Lock();;;","07/May/19 6:02 AM;MHBauer;The repeated stack of 

goroutine 37191 [semacquire, 17 minutes]:
sync.runtime_SemacquireMutex(0xc0005f9784, 0xc000cbe000)
	/usr/local/Cellar/go/1.12.1/libexec/src/runtime/sema.go:71 +0x3d
sync.(*RWMutex).RLock(...)
	/usr/local/Cellar/go/1.12.1/libexec/src/sync/rwmutex.go:50
github.com/hyperledger/fabric/gossip/comm.(*connectionStore).getConnection(0xc0005f9740, 0xc0022c7560, 0x0, 0x0, 0x0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:61 +0x80c
github.com/hyperledger/fabric/gossip/comm.(*commImpl).sendToEndpoint(0xc000317440, 0xc0022c7560, 0xc0006b7540, 0xc001ea8000)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:231 +0x1d4
github.com/hyperledger/fabric/gossip/comm.(*commImpl).Send.func1(0xc000317440, 0xc0022c7560, 0xc0006b7540)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:218 +0x44
created by github.com/hyperledger/fabric/gossip/comm.(*commImpl).Send
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:217 +0x179

is the same mutex on RLock()

Although there may be multiple instances of these connections. I can't tell what test this is.;;;","07/May/19 6:05 AM;MHBauer;goroutine 7611 [chan receive, 19 minutes]:
github.com/hyperledger/fabric/gossip/comm.(*connection).drainOutputBuffer(0xc000f1c5b0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:353 +0x36
github.com/hyperledger/fabric/gossip/comm.(*connection).close(0xc000f1c5b0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:252 +0x78
github.com/hyperledger/fabric/gossip/comm.(*connectionStore).onConnected(0xc0005f9740, 0x4a7eac0, 0xc0018fc920, 0xc001d76500, 0xc00056ae70, 0x0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:174 +0x3a5
github.com/hyperledger/fabric/gossip/comm.(*commImpl).GossipStream(0xc000317440, 0x4a7eac0, 0xc0018fc920, 0x0, 0x0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:557 +0x361
github.com/hyperledger/fabric/protos/gossip._Gossip_GossipStream_Handler(0x4912d20, 0xc000317440, 0x4a7c7e0, 0xc002e6a540, 0x51066a0, 0xc0021cab00)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/protos/gossip/message.pb.go:2758 +0xad
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc0004d7500, 0x4a7fe40, 0xc002380300, 0xc0021cab00, 0xc0005781e0, 0x50d6fa0, 0x0, 0x0, 0x0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1175 +0xacd
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc0004d7500, 0x4a7fe40, 0xc002380300, 0xc0021cab00, 0x0)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1254 +0xcbe
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc002e38a20, 0xc0004d7500, 0x4a7fe40, 0xc002380300, 0xc0021cab00)
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:690 +0x9f
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:688 +0xa1

This looks like a race condition on reading from a channel.;;;","19/Jun/19 4:27 AM;denyeart;cherry picked to release-1.4: https://gerrit.hyperledger.org/r/#/c/fabric/+/31958/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Invalid Raft config metadata are not happy path integration tests,FAB-15033,39038,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,04/Apr/19 1:53 AM,04/Apr/19 1:53 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci,hygiene,,,,"While looking into why the e2e tests are now spanning the logs with the following:

{code}
EndToEnd three node etcdraft network with 2 orgs executes an etcdraft network with 2 orgs and three orderer nodes 
/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/integration/e2e/e2e_test.go:243
------------------------------
2019-04-03 12:30:40.833 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 001 orderer type: etcdraft
2019-04-03 12:30:40.833 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 Orderer.EtcdRaft.Options.ElectionTick unset, setting to 10
2019-04-03 12:30:40.833 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 Orderer.EtcdRaft.Options.HeartbeatTick unset, setting to 1
2019-04-03 12:30:40.833 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004 Orderer.EtcdRaft.Options.MaxInflightBlocks unset, setting to 5
2019-04-03 12:30:40.833 EDT [common.tools.configtxgen.localconfig] Load -> INFO 005 Loaded configuration: /var/folders/tw/dsbwtnf50w7dhvhh0tkg7fwr0000gn/T/e2e305727571/configtx.yaml
2019-04-03 12:30:42.821 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 006 orderer type: etcdraft
2019-04-03 12:30:42.821 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 007 Orderer.EtcdRaft.Options.ElectionTick unset, setting to 10
2019-04-03 12:30:42.821 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 008 Orderer.EtcdRaft.Options.HeartbeatTick unset, setting to 1
2019-04-03 12:30:42.821 EDT [common.tools.configtxgen.localconfig] completeInitialization -> INFO 009 Orderer.EtcdRaft.Options.MaxInflightBlocks unset, setting to 5
2019-04-03 12:30:42.821 EDT [common.tools.configtxgen.localconfig] Load -> INFO 00a Loaded configuration: /var/folders/tw/dsbwtnf50w7dhvhh0tkg7fwr0000gn/T/e2e998956438/configtx.yaml
2019-04-03 12:30:42.837 EDT [common.tools.configtxgen.localconfig] Load -> INFO 00b Loaded configuration: /var/folders/tw/dsbwtnf50w7dhvhh0tkg7fwr0000gn/T/e2e998956438/configtx.yaml
••
{code}

I discovered that we're performing even more unhappy tests in the integration suite. This is not what this bucket is to be used for.

Please move these tests closer to the orderer, in a package that is related to raft, that uses the minimal machinery to validate the function.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14772,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jev:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove existing logging,FAB-15034,39039,37512,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,04/Apr/19 3:32 AM,11/Apr/19 10:52 PM,28/Oct/23 3:08 AM,11/Apr/19 10:52 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jf3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/19 3:45 AM;sykesm;https://gerrit.hyperledger.org/r/30694;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Steamline what is debugged for CouchDB HTTP headers,FAB-15035,39041,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,denyeart,denyeart,04/Apr/19 4:06 AM,12/Jun/20 12:31 AM,28/Oct/23 3:08 AM,06/Dec/19 10:14 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"Some non-useful information is written to debug in the CouchDB HTTP headers, this can be streamlined without impacting troubleshooting ability.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfn:g",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use errors.WitthMessagef where appropriate,FAB-15036,39042,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,04/Apr/19 4:09 AM,06/Apr/19 5:29 AM,28/Oct/23 3:08 AM,06/Apr/19 12:54 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,pkg/errors introduced errors.WithMessagef a while ago. We can now use that method instead of errors.WithMessage + fmt.Sprintf.,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jfr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dependabot/go_modules/golang.org/x/crypto-0.1.0,release-2.5,release-2.4,dependabot/go_modules/test/performance/golang.org/x/net-0.7.0,main,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/github.com/prometheus/client_golang-1.11.1,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/19 4:22 AM;sykesm;https://gerrit.hyperledger.org/r/30696;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configtxlator unable to parse non-config blocks,FAB-15037,39044,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Not Supported,,siddjain,siddjain,04/Apr/19 6:07 AM,24/Apr/20 12:04 AM,28/Oct/23 3:08 AM,24/Apr/20 12:04 AM,,,,,,,,,,,,,,,,,,fabric-tools,,,,,,0,,,,,,"[https://lists.hyperledger.org/g/fabric/message/5816]

[https://stackoverflow.com/questions/51219466/how-can-i-read-the-blcokfile-xxxx]

copying email from Jason:
{quote}Although configtxlator's primary purpose is to translate config blocks, assuming you're using a recent build, it should also be able to decode standard blocks as well.  If you have a standard block which cannot be decoded with the latest version, please feel free to open a bug in JIRA, including the block, as this function is expected to work.  Please include how you got the block.  Commonly, CLI utilities will include extraneous data like newlines in the output which can confuse the proto decoding.

Thanks,
 ~Jason
{quote}
we have tried using the most recent (1.4.0) build of configtxlator",,jyellick,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Nov/19 2:38 AM;siddjain;blockfile_000000;https://jira.hyperledger.org/secure/attachment/17967/blockfile_000000","21/Nov/19 4:52 AM;siddjain;blockfile_000000;https://jira.hyperledger.org/secure/attachment/17959/blockfile_000000",,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jg7:",,,,Unset,Unset,,"configtxlator proto_decode --input ./channel-artifacts/blockfile_000000 --type common.Block

```
configtxlator: error: Error decoding: error unmarshaling: proto: can't skip unknown wire type 7
```

```
$ configtxlator version
configtxlator:
 Version: 1.4.3
 Commit SHA: b8c4a6a
 Go version: go1.11.5
 OS/Arch: darwin/amd64
```",,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/Aug/19 10:57 PM;wlahti;Please use the #fabric channel on Rocketchat ([https://chat.hyperledger.org/]) to seek help troubleshooting this issue. Jira should only be used for bugs, improvements, new features, etc. ;;;","05/Nov/19 3:58 AM;siddjain;how is this not a bug?;;;","21/Nov/19 4:36 AM;wlahti;If you are still unable to parse non-config blocks, please attach the block file (and let us know which version of Fabric and configtxlator you're currently using).;;;","21/Nov/19 4:53 AM;siddjain;we have attached the blockfile. 

```

$ configtxlator version
configtxlator:
 Version: 1.4.3
 Commit SHA: b8c4a6a
 Go version: go1.11.5
 OS/Arch: darwin/amd64

```

 

```

$ configtxlator proto_decode --input ./blockfile_000000 --type common.Block
configtxlator: error: Error decoding: error unmarshaling: proto: can't skip unknown wire type 6

```;;;","22/Nov/19 3:29 AM;wlahti;When was this block generated? Is this a new block generated by a 1.4.3 peer or is this the same block referenced in stackoverflow that was generated on 1.2.0 over a year ago? I similarly am unable to decode the attached block but I am able to decode blocks generated from a local network.;;;","24/Nov/19 2:36 AM;siddjain;see this video where it is shown that it is not able to parse the blockfile

[https://youtu.be/NTmSLGatl6A]

we have also attached another blockfile. we noticed that parsing a block works but not the blockfile.;;;","24/Apr/20 12:03 AM;jyellick;The confusion here is the term 'block file'.  {{configtxlator}} can decode Fabric blocks, which are binary proto-encoded, to JSON.  These Fabric blocks may be retrieved using CLI utilities like {{peer channel fetch}}, or can be retrieved via the SDKs.

What you are attempting to do is to decode the 'blockfile' off of the filesystem of a peer or orderer.  This is also a binary encoding, which embeds the proto-encoded blocks, but is not meant to be consumed directly outside of the peer or orderer binaries themselves.  {{configtxlator}} is not designed to read these blockfiles, only the blocks themselves.;;;","24/Apr/20 12:04 AM;jyellick;See my last comment, but this is not a supported use of {{configtxlator}}.  If you wish to have a tool capable of inspecting the 'blockfiles' in the ledger directory, this would be a new feature request, not a bug.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Miscellaneous static analysis cleanup,FAB-15038,39045,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,04/Apr/19 7:53 AM,10/Apr/19 6:17 AM,28/Oct/23 3:08 AM,10/Apr/19 6:17 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jgf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestLeaderYield has failed in the unit-tests as deadline exceeded in gossip service,FAB-15039,39046,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,C0rWin,sykesm,sykesm,04/Apr/19 8:17 AM,16/Apr/19 3:55 AM,28/Oct/23 3:08 AM,16/Apr/19 3:55 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"This was cloned from FAB-14030. Running locally with current master as of April 3:

{code}
--- FAIL: TestLeaderYield (94.00s)
    integration_test.go:169: p0 started its delivery service
    integration_test.go:174: p0 stopped its delivery service
    integration_test.go:184: p1 hasn't taken over leadership within 1m0s: -1
{code}

Logs to be attached.",,C0rWin,denyeart,rameshthoomu,sambhavdutt,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14030,,,,,FAB-12065,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Apr/19 8:20 AM;sykesm;gossip-2.log;https://jira.hyperledger.org/secure/attachment/17069/gossip-2.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jgn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,denyeart,rameshthoomu,sambhavdutt,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/19 1:28 AM;sykesm;{code}
12:08:13 2019-04-15 16:07:13.472 UTC [blocksProvider] DeliverBlocks -> WARN 049 [channelA] Receive error: attempts (2) or elapsed time (1s) exhausted
12:08:13 2019-04-15 16:07:13.472 UTC [blocksProvider] DeliverBlocks -> WARN 04a [channelA] Receive error: attempts (2) or elapsed time (1s) exhausted
12:08:13 goroutine 586 [running]:
12:08:13 github.com/hyperledger/fabric/gossip/util.PrintStackTrace()
12:08:13 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/util/misc.go:144 +0x87
12:08:13 github.com/hyperledger/fabric/gossip/service.TestLeaderYield(0xc000232600)
12:08:13 	/w/workspace/fabric-verify-unit-tests-
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11515/console;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kafka to Raft consensus-type migration,FAB-15041,39050,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,04/Apr/19 5:15 PM,11/Jul/19 2:45 AM,28/Oct/23 3:08 AM,11/Jul/19 2:44 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,ipm,ipm-planned,kafka,raft,Raft,"Migrate an existing kafka-based ordering service to a raft-based ordering service.


This epic includes:
 * Design & implement the mechanism in the orderer node
 * Provide tools that automate the process
 * Provide documentation and guidelines

Design document: [Google Drive|https://docs.google.com/document/d/1I7zWBomEPsgxgDYiYwE7ZPaT_Htll996nM2Y5A4xY-8/edit?usp=sharing], or see attached PDF.

Revised design of previous task: https://jira.hyperledger.org/browse/FAB-12777",,baohua,C0rWin,githubcpc,grice_32,guoger,jyellick,minollo,pmcosta1,scottz,sykesm,tock,yacovm,ymlbright,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15760,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/May/19 5:05 PM;tock;Fabric-OSN-ConsensusType-Migration-30May2019.pdf;https://jira.hyperledger.org/secure/attachment/17278/Fabric-OSN-ConsensusType-Migration-30May2019.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00c0a:4",,,,No,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),baohua,C0rWin,githubcpc,grice_32,guoger,jyellick,minollo,pmcosta1,scottz,sykesm,tock,yacovm,ymlbright,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/May/19 11:23 AM;baohua;Is there any design spec or workflow for this new mechanism?

Seems different from https://jira.hyperledger.org/browse/FAB-12777.;;;","30/May/19 5:07 PM;tock;[~baohua] A design document was added.;;;","30/May/19 10:48 PM;baohua;[~tock], thanks, will review it!;;;","10/Jul/19 3:05 AM;sykesm;[~jyellick] Can you please go through the remaining subtasks and split out the ones that still need to be done so we can get this story closed?

Looks like two are in progress without commits...

Thanks.;;;","10/Jul/19 4:14 PM;guoger;I think 3 remaining tasks in this story are low priority and should not block release.;;;","10/Jul/19 4:21 PM;tock;I agree with [~guoger].;;;","11/Jul/19 2:45 AM;jyellick;Agreed -- I've converted these to tasks/stories and put them into the backlog.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean-up #1 - integration tests,FAB-15042,39051,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,04/Apr/19 5:23 PM,07/Jun/19 5:09 AM,28/Oct/23 3:08 AM,08/Apr/19 5:33 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In preparation to the alternative migration design (v2), revert some of the commits already merged.

Remove integration tests.

Clean commits:

05485b98dcaeb59c564dbaad3f4f7625e67ef4e8

5d98705ed37e42c54c2aa50cacbd2a304fcde820",,C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jhr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean-up #2 - consensus/etcdraft ,FAB-15043,39052,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,04/Apr/19 5:31 PM,08/Jun/19 1:33 AM,28/Oct/23 3:08 AM,14/Apr/19 7:41 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In preparation to the alternative migration design (v2), revert some of the commits already merged.

 

Clean commit 050498317d698df7fbb2c46d43df694882ec0c57
 Kafka2Raft green path #4 of (v1)",,C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jhz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean-up #3 - common/multichannel & consensus/kafka,FAB-15044,39053,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,04/Apr/19 5:35 PM,08/Jun/19 1:33 AM,28/Oct/23 3:08 AM,14/Apr/19 7:42 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In preparation to the alternative migration design (v2), revert some of the commits already merged.

Clean commit 4950eddfb23aebecb6ad32be22be0f06caa6b88a
 Kafka2raft green path #3 (of v1)

 ",,C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ji7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean-up #4 - remove migration package,FAB-15045,39054,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,04/Apr/19 5:39 PM,08/Jun/19 1:33 AM,28/Oct/23 3:08 AM,14/Apr/19 7:42 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In preparation to the alternative migration design (v2), revert some of the commits already merged.

Clean commits

9002e75b740f12bddabd36a5dd2f984f08109ba5

a0a91895d6abfc200bbf9ed3cb696e4c9c51353a

2d924d0d8a7e6da24b873a121fe13e360afcce9f

15bf213aa5724696b70cc2b358ab083fff9dc74a

Remove migration package",,C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jif:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,tock,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky UT - [Fail] Chain 2-node Raft cluster [It] can remove follower by reconfiguring cluster,FAB-15046,39055,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,04/Apr/19 7:55 PM,15/Apr/19 10:38 AM,28/Oct/23 3:08 AM,15/Apr/19 10:38 AM,,,,,,,,,,,,,,v1.4.1,v2.0.0,,,fabric-orderer,,,,,,0,ci-flake,Raft,,,,https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11346/console,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jin:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Apr/19 8:07 PM;guoger;https://gerrit.hyperledger.org/r/c/30722 master
https://gerrit.hyperledger.org/r/30724 release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestGossipStateProvider_TestStateMessages failure,FAB-15047,39056,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,mastersingh24,mastersingh24,04/Apr/19 7:56 PM,09/Apr/19 6:21 AM,28/Oct/23 3:08 AM,09/Apr/19 6:21 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ci-flake,,,,,"
{noformat}
--- FAIL: TestGossipStateProvider_TestStateMessages (31.52s)
21:07:03     state_test.go:1721: Started to spin off, until predicate will be satisfied.
21:07:03     state_test.go:1733: Timeout has expired
21:07:03     state_test.go:1154: Peer receiving channel was closed before getting response from bootstrap peer
21:07:03     state_test.go:1154: Peer receiving channel was closed before getting response from bootstrap peer
{noformat}
",,C0rWin,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jiv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,mastersingh24,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/19 6:03 AM;C0rWin;https://gerrit.hyperledger.org/r/30798 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Query enhancements for _lifecycle,FAB-15048,39057,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,04/Apr/19 10:24 PM,30/Oct/19 11:16 PM,28/Oct/23 3:08 AM,30/Oct/19 11:16 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Other queries under consideration:
 * ""That said, we plan to add another query that takes only the sequence number as arguments and returns the full info about the definition with that sequence number, including the list of orgs that have approved it."" [https://gerrit.hyperledger.org/r/c/fabric/+/30340/1/core/chaincode/lifecycle/lifecycle.go#228]",,ales,crashmark93,wlahti,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:ino",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,crashmark93,wlahti,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Jul/19 10:40 AM;ymlbright;Hi [~wlahti] , I have a question: In the old lscc we can get the chaincode package installed on the peer node through the query interface; in the new _lifecycle will we provide a similar one? This type of interface makes it easy for us to audit the chaincode package used by the peer node.;;;","16/Jul/19 11:46 PM;wlahti;[~ymlbright] Ah, yes. Excellent idea! I've created a sub-task to add that functionality.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ripple the organizations of the channel to the deliver client,FAB-15049,39058,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,yacovm,yacovm,04/Apr/19 10:48 PM,20/Sep/19 4:35 AM,28/Oct/23 3:08 AM,20/Sep/19 4:35 AM,v2.0.0,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-peer,,,,,,0,,,,,,,,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jjb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yacovm,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/19 10:07 PM;denyeart;Merged in release-1.4.

Blocked by CredentialSupport cleanup in master.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Push for interop jobs between JavaSDK, NodeSDK and CLI with different envs",FAB-15050,39060,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,latitiah,latitiah,latitiah,04/Apr/19 11:06 PM,13/Jan/20 11:35 PM,28/Oct/23 3:08 AM,13/Jan/20 11:35 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"This will allow a basic interop test to run in CI that uses the JavaSDK, NodeSDK, and CLI with the different java, nodejs, and golang chaincode environments.",,latitiah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jjr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
High Throughput fabric sample - delStandard() function,FAB-15051,39061,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,EthanFox,EthanFox,EthanFox,04/Apr/19 11:30 PM,16/May/19 11:18 PM,28/Oct/23 3:08 AM,16/May/19 11:18 PM,v1.4.0,,,,,,,,,,,,,v1.4.0,,,,fabric-samples,,,,,,0,,,,,,"Currently, there is no way to do a simple 'delState()' for any objects put on-chain while trying out the high throughput example.  I would like to create a simple delStandard() function to alleviate this issue.",,EthanFox,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00jjz:",,,,No,Unset,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),EthanFox,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/19 11:41 PM;EthanFox;[https://gerrit.hyperledger.org/r/#/c/30744/] attaching gerrit CR for reference.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Readme update: confluence wiki link  ,FAB-15052,39065,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,davidkhala,davidkhala,davidkhala,05/Apr/19 1:02 AM,17/Jul/19 9:13 PM,28/Oct/23 3:08 AM,17/Jul/19 9:13 PM,v1.4.0,v2.0.0,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,"pages not found:

[https://wiki.hyperledger.org/community/hyperledger-project-code-of-conduct]

[https://wiki.hyperledger.org/projects/Fabric]

[https://wiki.hyperledger.org/community/calendar-public-meetings]

 ",,davidkhala,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jkv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Apr/19 1:17 AM;davidkhala;https://gerrit.hyperledger.org/r/30738;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support for CouchDB Indices,FAB-15053,39066,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,ales,ales,05/Apr/19 1:16 AM,08/Jun/19 6:49 AM,28/Oct/23 3:08 AM,08/Jun/19 6:49 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,1,,,,,,,,ales,gregnotso,,,,,,,,,,,,,,,,,,,,,,FAB-15060,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rc:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,gregnotso,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow bundling of couchdb indexes in new packaging,FAB-15054,39067,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,ales,ales,05/Apr/19 1:16 AM,20/Apr/19 7:30 PM,28/Oct/23 3:08 AM,20/Apr/19 7:30 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jlb:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/19 7:30 PM;ales;It already works;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extractor of couchdb Indexes from the package,FAB-15055,39068,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,05/Apr/19 1:17 AM,18/May/19 11:40 PM,28/Oct/23 3:08 AM,18/May/19 11:40 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jlj:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,manish-sethi,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/19 11:16 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/30959/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate events from old lscc eventmgmt and new lifecycle cache event mgmt,FAB-15057,39070,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,05/Apr/19 1:17 AM,20/Apr/19 7:31 PM,28/Oct/23 3:08 AM,20/Apr/19 7:31 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jlz:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace lscc hard coded references by deployedCCInfoprovider,FAB-15058,39071,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ales,ales,05/Apr/19 1:18 AM,20/Apr/19 7:27 PM,28/Oct/23 3:08 AM,20/Apr/19 7:27 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jm7:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/19 7:27 PM;ales;No point in changing LSCC code since it will disappear in 2.1 - we have coded around it;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integrate events from old lscc eventmgmt and new lifecycle cache event mgmt,FAB-15059,39072,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,05/Apr/19 1:18 AM,20/Apr/19 7:26 PM,28/Oct/23 3:08 AM,20/Apr/19 7:26 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jmf:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dependency management for initializing lifecycle and ledger at startup,FAB-15060,39073,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,05/Apr/19 1:19 AM,07/Jan/20 4:26 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15053,FAB-13869,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00wv8:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove LSCC,FAB-15061,39075,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,05/Apr/19 1:36 AM,04/Sep/20 2:56 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v3.0.0,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00jn3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test cases for 1.4->2.0 upgrade path for lifecycle,FAB-15062,39076,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,05/Apr/19 1:45 AM,09/May/19 9:20 PM,28/Oct/23 3:08 AM,09/May/19 9:20 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15303,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zz",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
1.4 -> 2.0 upgrade should not present attack scenarios,FAB-15063,39077,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,ales,ales,05/Apr/19 1:47 AM,09/May/19 9:22 PM,28/Oct/23 3:08 AM,09/May/19 9:22 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Examples of attack scenarios we need to test/code against:
 * define _lifecycle when the network is on 1.4
 * define an implicit collection when the network is on 1.4
 * ...",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzi",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lifecycle Init method should not be required CC when initRequired is false,FAB-15064,39079,,Story,Backlog,FAB,Fabric,software,denyeart,,,High,,ales,rickr,rickr,05/Apr/19 2:12 AM,12/Apr/19 10:57 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.1.0,,,,,,,,,,0,,,,,,,,ales,gennadyl,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jnr:",,,,Unset,Unset,,"Create chaincode which no longer has an Init method.  Then with new lifecycle 2.0 set initRequired to false or don't set it at all as this is now the default.
expect chaincode to run ok 
get  

generate platform-specific docker build: Error returned from build: 2 ""# github.com/example_cc
/chaincode/input/src/github.com/example_cc/example_cc.go:259:23: cannot use new(SimpleChaincode) (type *SimpleChaincode) as type shim.Chaincode in argument to shim.Start:
    *SimpleChaincode does not implement shim.Chaincode (missing Init method)
"". Was verified: false


The direction I've been told is to no longer need any initialization thus no need to have Init.  chaincode should be able to be written that way.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,gennadyl,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 10:57 PM;ales;I'll change to story since it's not a bug - we currently require all chaincodes to implement the specified interface which - alas - still has to include the init function, whether required or not. I completely agree that we should go beyond that with a new feature.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Event scoping,FAB-15065,39080,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,05/Apr/19 2:18 AM,05/Apr/19 2:27 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.1.0,,,,,,,,,,0,,,,,,"Currently events are implicitly covered by the endorsement policy: when a client receives an event, it is guaranteed that the endorsement policy was fulfilled. However, this concept is becoming less and less static, especially after the introduction of state-based endorsement policies and implicit collections. The proposal is to add a collection/key field to the event so that the endorsement rules it was subject to are clear",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jnz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Endorsement policies for collections,FAB-15066,39081,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,caod,ales,ales,05/Apr/19 2:20 AM,18/Dec/19 2:35 AM,28/Oct/23 3:08 AM,21/Nov/19 11:11 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"Now that implicit collections have an endorsement policy, it makes sense to introduce an endorsement policy for normal (static) collections as well",,ales,caod,denyeart,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11141,,,,,,FABJ-504,,,,FABN-1437,FAB-17279,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-5108,,,No,,Unset,No,,,"1|i008rj:iwy",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,caod,denyeart,mastersingh24,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,main,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,release-2.5,release-2.4,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Apr/19 4:11 AM;mastersingh24;[~ales]  - we have implicit collections?  I know there was something put in for use by lifecycle ... but I did not think it was broad support for implicit collections?;;;","12/Apr/19 9:56 PM;ales;Implicit collections now exist, in the sense that if a chaincode tries to write to a collection whose name matches the {{ImplicitCollectionMatcher}}
{code:java}
func ImplicitCollectionNameForOrg(mspid string) string {
       return fmt.Sprintf(""_implicit_org_%s"", mspid)
}
var ImplicitCollectionMatcher = regexp.MustCompile(""^"" + ImplicitCollectionNameForOrg(""(.+)"") + ""$"")
{code}
then we'll automatically return a collection configuration with {color:#172b4d}{{MemberOrgsPolicy}}{color} set to peers of the org only.

It is not (yet?) an advertised feature, and we may consider restricting it only to the {{_lifecycle}} chaincode (however experience has thought me that this kind of custom checks and custom validation tends to backfire).;;;","06/Nov/19 11:44 PM;denyeart;Discussed with [~jyellick] , since the infrastructure is in place for validating endorsement policies on implicit collections, it will be fairly trivial now to add an endorsement policy on regular collection configurations as well. This has been a highly requested feature that would make sense to expose in v2.0.

See related code at:

https://github.com/hyperledger/fabric/blob/a5bd17f9ec21241c324f453f0ded3d045bd28ff3/core/chaincode/lifecycle/deployedcc_infoprovider.go#L355-L359;;;","09/Nov/19 12:52 AM;caod;Jira issues for updating ApplicationPolicy references

FABG-920

FABJ-498

FABN-1415

FAB-17038;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lifecycle - QueryApprovalStatus - fails after commit,FAB-15067,39082,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,ales,harrisob@us.ibm.com,harrisob@us.ibm.com,05/Apr/19 2:27 AM,13/Apr/19 1:23 AM,28/Oct/23 3:08 AM,,v2.0.0,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I do not understand what the query is trying to tell the user. If the query is run before the CommitChaincodeDefinition with the sequence used in the ApproveChaincodeDefinitionForMyOrg I get results of {""approved"":{""Org2MSP"":true,""Org1MSP"":true}}, which I do understand, these organizations have both run the 'Approve'. Then if I query is run after the CommitChaincodeDefinition I get a system error 500 indicating that the sequence is not correct. Why should the status change, the definition at that sequence is still approved.

If I change the query to add 1 to the sequence, I get a system failure 500 indicating that the sequence is not correct if run before the commit of that sequence number. If the query is run after the commit I get results of {""approved"":{""Org1MSP"":false,""Org2MSP"":false}}, which I do understand, these organizations have not approved this sequence.

What is the query trying to tell me. Why does it have to fail, what does a failure mean ?",,ales,harrisob@us.ibm.com,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jof:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,harrisob@us.ibm.com,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 10:55 PM;ales;I'll change the defect from bug to documentation, because really what's missing is an explanation of what the query does.

In short, the query - given a chaincode name - reports the approval status (i.e. which orgs have approved the definition with the supplied terms) of the chaincode definition that may supplant the current one, or the first if none exist yet for that name.

It is intended to serve as a synchronisation mechanism for org admins to determine when is a good time for a chaincode definition to be committed, given that a successful commit requires the approval of a majority of orgs. Clearly the subject of the query is restricted to a definition that has a chance of being approved: this can only be one with sequence number 1 or n+1, where n is the sequence number  of the currently committed one.;;;","13/Apr/19 12:34 AM;harrisob@us.ibm.com;I still do not understand why if I run the query after CommitChaincodeDefinition it fails , shouldn't I get a list of those that have approved and not approved. Then as an Organization I would be able to check if I have to run the ApproveChaincodeDefinitionForMyOrg for my organization on that specific definition.;;;","13/Apr/19 1:23 AM;ales;The purpose of the query is to determine the approval status of a definition +that is not yet committed+. So after definition with sequence number n commits, your next legal query is for sequence number n+1. We can certainly expose a different query, or change the semantics of this one;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change plugin interface to pass in dependencies as opposed to passing them through Init,FAB-15068,39083,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ales,ales,05/Apr/19 2:28 AM,09/May/19 10:33 PM,28/Oct/23 3:08 AM,09/May/19 10:33 PM,,,,,,,,,,,,,,v2.1.0,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15338,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jon:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip State Metrics ,FAB-15070,39085,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,rolsonquadras,rolsonquadras,rolsonquadras,05/Apr/19 5:14 AM,05/Apr/19 11:03 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Currently Gossip state has few metrics added. This issue is a proposal to add following metrics in Fabric Gossip state.
 * Gauge metrics for payload sequence numbers for different actions

 * 
 ** Queued
 ** Received
 ** Delivered
 ** Pushed",,rolsonquadras,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jp3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rolsonquadras,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Apr/19 11:03 PM;rolsonquadras;PR - [https://jira.hyperledger.org/browse/FAB-15070|https://gerrit.hyperledger.org/r/#/c/30747/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Metrics for github.com/hyperledger/fabric/core/ledger/ledgerstorage,FAB-15071,39086,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,parasu17,parasu17,parasu17,05/Apr/19 5:22 AM,12/Apr/19 1:26 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Add metrics for the package

github.com/hyperledger/fabric/core/ledger/ledgerstorage

Function: CommitWithPvtData
 * counter: The number of commit requests with private data received
 * counter: The number of successful commits of the private data
 * gauge: The block diff of the block header number and the last committed private block store height
 * counter: The number of commit requests that are skipped from writing
 * counter: The number of commit requests with private data that failed
 * histogram: The time to complete a successful commit request with private data.
 * histogram: The time to complete an unsuccessful commit request with private data.

Function: GetPvtDataAndBlockByNum
 * histogram: The time to complete GetPvtDataAndBlockByNum.

Function: GetPvtDataByNum
 * histogram: The time to complete GetPvtDataByNum.",,parasu17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jpb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),parasu17,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused common/attrmgr,FAB-15073,39089,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/Apr/19 5:29 PM,16/Apr/19 4:05 PM,28/Oct/23 3:08 AM,16/Apr/19 4:05 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,,,mastersingh24,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jpz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,troyronda,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Apr/19 5:30 PM;mastersingh24;https://gerrit.hyperledger.org/r/30758;;;","08/Apr/19 11:03 PM;troyronda;FYI - fabric-ca is importing this package. e.g., https://github.com/hyperledger/fabric-ca/blob/master/lib/client/credential/x509/signer.go#L15 (so it will also need to be updated).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement token-related SCC backend,FAB-15075,39091,,Story,In Progress,FAB,Fabric,software,denyeart,,,Medium,,angelo.decaro,angelo.decaro,angelo.decaro,05/Apr/19 5:36 PM,18/Apr/19 5:47 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-token,,,,,,0,,,,,,This story is about implementing the token-related SCC backend. The backend deals directly with internal objects handling de/serialization to the ledger state.,,angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11169,,,No,,Unset,No,,,"1|i00jqf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Differentiate between direct and invoke thru another chaincode ,FAB-15076,39094,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,denyeart,Rajatsharma,Rajatsharma,05/Apr/19 8:17 PM,03/Dec/19 1:42 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,fabric-chaincode,fabric-chaincode-node,,,,"In current fabric, there are majorly 2 ways to invoke a chaincode :
 # To invoke that directly using CLI or SDK on any language
 #  And we could invoke 1 chaincode from another chaincode using 
{code:java}
stub.invokeChaincode(chaincodeName, args, channelName){code}

But there's no way that I could get to know from where the call is coming.

For example, I have a chaincode where I want to prevent it from being invoked by another chaincode, this could be implemented in Ethereum. But It's not currently present in fabric or I'm not able to find that. 

Or, Imagine a use-case where we would want a call coming from a chaincode being treated differently to that which comes directly to the chaincode.

I personally feel if this is not present, we might want to add this. ",,jyellick,Rajatsharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jqv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,Rajatsharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Sep/19 12:10 AM;jyellick;I do think that we might want to consider adding this to a chaincode library or extension, though this is possible (though somewhat annoying) to do through the current APIs.  See [https://github.com/hyperledger/fabric/blob/50152af43390fd7ffbe627f0f5d1fb18b456cad6/core/scc/cscc/configure.go#L123-L130];;;","25/Sep/19 12:12 AM;jyellick;I've converted this to a story as it's more of a feature request than a bug.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove viper usage in core/peer,FAB-15078,39101,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,05/Apr/19 11:54 PM,08/May/19 4:37 AM,28/Oct/23 3:08 AM,08/May/19 4:37 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Remove viper usage out of core/peer package, instead using custom configuration structs. 
 * Replace viper calls in peer with coreConfig
 * Adding Godoc for coreConfig struct
 * Refactor peer coreConfig tests
 * Refactor code with best golang practices",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00js7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/19 4:37 AM;dereckluo;task completed under this CR: [https://gerrit.hyperledger.org/r/c/31010/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
JavaSDK fails in behave system tests when TLS is turned on ,FAB-15079,39102,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,latitiah,latitiah,06/Apr/19 12:12 AM,29/Jul/19 2:50 AM,28/Oct/23 3:08 AM,29/Jul/19 2:50 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"When using the JavaSDK interface with TL turned on, the following error is seen when using the wrapper that allows testing of the interface APIs. 
{code}
Exception in thread ""main"" org.hyperledger.fabric.sdk.exception.ProposalException: org.hyperledger.fabric.sdk.exception.TransactionException: org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel behavesystest failed with peer peer0.org1.example.com.  Status FAILURE, details: Channel Channel{id: 2, name: behavesystest} Sending proposal with transaction: 3a240e95d369e67ccc92b23a6c6aa9416de5757fdbb6b20a25f3fd0d2a28b3e5 to Peer{ id: 4, name: peer0.org1.example.com, channelName: behavesystest, url: grpcs://localhost:7051} failed because of: gRPC failure=Status{code=UNAVAILABLE, description=io exception, cause=javax.net.ssl.SSLHandshakeException: General OpenSslEngine problem
	at io.netty.handler.ssl.ReferenceCountedOpenSslContext$AbstractCertificateVerifier.verify(ReferenceCountedOpenSslContext.java:629)
	at io.netty.internal.tcnative.SSL.readFromSSL(Native Method)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.readPlaintextData(ReferenceCountedOpenSslEngine.java:488)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1036)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1144)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1187)
	at io.netty.handler.ssl.SslHandler$SslEngineType$1.unwrap(SslHandler.java:216)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1297)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1199)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1243)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:646)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:581)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:460)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.security.cert.CertificateException: No subject alternative DNS name matching localhost found.
	at sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:214)
	at sun.security.util.HostnameChecker.match(HostnameChecker.java:96)
	at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:455)
	at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:436)
	at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:252)
	at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)
	at io.netty.handler.ssl.ReferenceCountedOpenSslClientContext$ExtendedTrustManagerVerifyCallback.verify(ReferenceCountedOpenSslClientContext.java:237)
	at io.netty.handler.ssl.ReferenceCountedOpenSslContext$AbstractCertificateVerifier.verify(ReferenceCountedOpenSslContext.java:625)
	... 27 more
}
	at org.hyperledger.fabric.sdk.Channel.sendProposalToPeers(Channel.java:4059)
	at org.hyperledger.fabric.sdk.Channel.sendProposal(Channel.java:4030)
	at org.hyperledger.fabric.sdk.Channel.queryByChaincode(Channel.java:3940)
	at org.hyperledger.fabric.sdk.Channel.queryByChaincode(Channel.java:3926)
	at org.hyperledger.fabric_test.operations.PeerOperations.sendQuery(PeerOperations.java:343)
	at org.hyperledger.fabric_test.operations.PeerOperations.run(PeerOperations.java:179)
	at org.hyperledger.fabric_test.operations.PeerOperations.main(PeerOperations.java:112)
Caused by: org.hyperledger.fabric.sdk.exception.TransactionException: org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel behavesystest failed with peer peer0.org1.example.com.  Status FAILURE, details: Channel Channel{id: 2, name: behavesystest} Sending proposal with transaction: 3a240e95d369e67ccc92b23a6c6aa9416de5757fdbb6b20a25f3fd0d2a28b3e5 to Peer{ id: 4, name: peer0.org1.example.com, channelName: behavesystest, url: grpcs://localhost:7051} failed because of: gRPC failure=Status{code=UNAVAILABLE, description=io exception, cause=javax.net.ssl.SSLHandshakeException: General OpenSslEngine problem
	at io.netty.handler.ssl.ReferenceCountedOpenSslContext$AbstractCertificateVerifier.verify(ReferenceCountedOpenSslContext.java:629)
	at io.netty.internal.tcnative.SSL.readFromSSL(Native Method)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.readPlaintextData(ReferenceCountedOpenSslEngine.java:488)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1036)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1144)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1187)
	at io.netty.handler.ssl.SslHandler$SslEngineType$1.unwrap(SslHandler.java:216)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1297)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1199)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1243)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:646)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:581)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:460)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.security.cert.CertificateException: No subject alternative DNS name matching localhost found.
	at sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:214)
	at sun.security.util.HostnameChecker.match(HostnameChecker.java:96)
	at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:455)
	at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:436)
	at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:252)
	at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)
	at io.netty.handler.ssl.ReferenceCountedOpenSslClientContext$ExtendedTrustManagerVerifyCallback.verify(ReferenceCountedOpenSslClientContext.java:237)
	at io.netty.handler.ssl.ReferenceCountedOpenSslContext$AbstractCertificateVerifier.verify(ReferenceCountedOpenSslContext.java:625)
	... 27 more
}
	at org.hyperledger.fabric.sdk.Channel.parseConfigBlock(Channel.java:1796)
	at org.hyperledger.fabric.sdk.Channel.loadCACertificates(Channel.java:1616)
	at org.hyperledger.fabric.sdk.Channel.sendProposalToPeers(Channel.java:4057)
	... 6 more
Caused by: org.hyperledger.fabric.sdk.exception.ProposalException: getConfigBlock for channel behavesystest failed with peer peer0.org1.example.com.  Status FAILURE, details: Channel Channel{id: 2, name: behavesystest} Sending proposal with transaction: 3a240e95d369e67ccc92b23a6c6aa9416de5757fdbb6b20a25f3fd0d2a28b3e5 to Peer{ id: 4, name: peer0.org1.example.com, channelName: behavesystest, url: grpcs://localhost:7051} failed because of: gRPC failure=Status{code=UNAVAILABLE, description=io exception, cause=javax.net.ssl.SSLHandshakeException: General OpenSslEngine problem
	at io.netty.handler.ssl.ReferenceCountedOpenSslContext$AbstractCertificateVerifier.verify(ReferenceCountedOpenSslContext.java:629)
	at io.netty.internal.tcnative.SSL.readFromSSL(Native Method)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.readPlaintextData(ReferenceCountedOpenSslEngine.java:488)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1036)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1144)
	at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.unwrap(ReferenceCountedOpenSslEngine.java:1187)
	at io.netty.handler.ssl.SslHandler$SslEngineType$1.unwrap(SslHandler.java:216)
	at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1297)
	at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1199)
	at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1243)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:489)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:428)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:265)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:340)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1434)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:362)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:348)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:965)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:163)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:646)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:581)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:498)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:460)
	at io.netty.util.concurrent.SingleThreadEventExecutor$5.run(SingleThreadEventExecutor.java:884)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.security.cert.CertificateException: No subject alternative DNS name matching localhost found.
	at sun.security.util.HostnameChecker.matchDNS(HostnameChecker.java:214)
	at sun.security.util.HostnameChecker.match(HostnameChecker.java:96)
	at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:455)
	at sun.security.ssl.X509TrustManagerImpl.checkIdentity(X509TrustManagerImpl.java:436)
	at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:252)
	at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:136)
	at io.netty.handler.ssl.ReferenceCountedOpenSslClientContext$ExtendedTrustManagerVerifyCallback.verify(ReferenceCountedOpenSslClientContext.java:237)
	at io.netty.handler.ssl.ReferenceCountedOpenSslContext$AbstractCertificateVerifier.verify(ReferenceCountedOpenSslContext.java:625)
	... 27 more
}
{code}

As a hint, the JavaSDK wrapper needs to include a hostOverride that includes ""localhost"" to the host name to allow communication between the TLS-enabled nodes.
",,latitiah,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jsf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),latitiah,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Apr/19 12:15 AM;latitiah;Change this line: https://github.com/hyperledger/fabric-test/blob/master/feature/fabric-ca.feature#L15
to use turn TLS on in order to test that this works as expected.;;;","29/Jul/19 2:50 AM;vijaypunugubati;This test case from fabric-ca feature was incorporated in the interoperability test, and no modifications suggested in behave frame. Closing this bug.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test for adding a new organization to a running network,FAB-15084,39111,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,06/Apr/19 1:24 AM,08/Jun/19 8:53 AM,28/Oct/23 3:08 AM,08/Jun/19 8:53 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:j",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/19 1:25 AM;wlahti;Picking up this task from Latitia. She didn't have a separate JIRA item for it so I'm creating one to make sure I don't forget about this. Her existing CR is: https://gerrit.hyperledger.org/r/c/29366/;;;","12/Apr/19 2:24 AM;wlahti;Reworked/updated https://gerrit.hyperledger.org/r/c/29366. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Alpha feature,FAB-15085,39114,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,06/Apr/19 4:50 AM,10/Apr/19 12:29 AM,28/Oct/23 3:08 AM,10/Apr/19 12:29 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Do not use the language alpha feature to refer to lifecycle.

.. feature introduced with the 2.0 Alpha.",,ales,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jun:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,negupta,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Apr/19 4:54 PM;ales;I've started doing it in a couple of docs already and have used the wording

 

""The new Fabric chaincode lifecycle has limitations in the v2.0.0 alpha release.""

 

[~negupta] could you please improve this wording if you see fit and change in consistently in all docs/tutorials? Thx!;;;","08/Apr/19 10:37 AM;negupta;In progress: [https://gerrit.hyperledger.org/r/#/c/30804/]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor viper usage in core/ledger,FAB-15086,39120,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,06/Apr/19 4:45 PM,26/Apr/19 4:40 AM,28/Oct/23 3:08 AM,25/Apr/19 12:40 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,,,mastersingh24,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12483,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jvz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,yoheiueda,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/19 11:19 PM;mastersingh24;https://gerrit.hyperledger.org/r/31064   (last CR in the stack);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use gRPC stub interfaces directly,FAB-15087,39121,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,06/Apr/19 4:50 PM,09/Apr/19 12:24 AM,28/Oct/23 3:08 AM,09/Apr/19 12:24 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"There are interfaces defined in sub-packages of internal/peer which are extraneous and even misplaced.  They basically mimic the gRPC generated stubs; there's no reason not use use the stub interfaces directly given these interfaces are shared across sub-packages anyway.

The main interfaces to remove are in

internal/peer/chaincode/api

internal/peer/common/api",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jw7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/19 9:32 PM;mastersingh24;[https://gerrit.hyperledger.org/r/30787]

https://gerrit.hyperledger.org/r/30788;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft Consensus not mentioned on Introduction Page,FAB-15088,39122,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,udyan.sharma,udyan.sharma,udyan.sharma,07/Apr/19 2:32 AM,15/Jun/19 9:37 PM,28/Oct/23 3:08 AM,15/Jun/19 9:37 PM,v1.4.0,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-docs,,,,,,0,,,,,,"There is no mention of raft consensus algorithm being used in fabric, as it got incorporated recently.",,udyan.sharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jwf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),udyan.sharma,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a chaincode author, I want to set private data in chaincode Init()",FAB-15089,39123,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,denyeart,denyeart,07/Apr/19 4:26 AM,09/May/19 11:15 PM,28/Oct/23 3:08 AM,09/May/19 11:15 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"In v1.x, chaincode could not Init() with private data since the collection policy was not yet committed. An error like the following was returned:

""private data APIs are not allowed in chaincode Init""

With new lifecycle, this restriction can be lifted.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dt2:",,,,Unset,Unset,v2.0 (should do),(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 11:15 PM;denyeart;As Init() is not strategic, we will not make enhancements such as these.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode for Operators - minor doc edits,FAB-15090,39124,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,07/Apr/19 5:56 AM,08/Apr/19 5:53 PM,28/Oct/23 3:08 AM,08/Apr/19 5:53 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jwv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Apr/19 5:58 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/30791/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
first-network should only spin up nodes,FAB-15091,39125,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,sstone1,mastersingh24,mastersingh24,07/Apr/19 9:17 PM,14/Aug/19 5:44 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,,,,,,"The *first-network* sample attempts to be everything to everybody and it is going to crater soon.  *first-network* should actually just spin up the various nodes (it's ok to generate the required crypto material).
It should not:


 * create channels
 * install chaincode
 * instantiate chaincode
 * invoke / query chaincode

 

We can then decide how to build tutorials for performing those actions.  Doing all of these things through various scripts really does not help demonstrate how to actually perform these actions.  There actually ""tutorial-like"" documentation about the samples ... this just needs to be modified to actually be a real tutorial.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00jx3:",,,,No,Unset,,(Please add steps to reproduce),3.0,No,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestGossipChannelEligibility not initialized mock,FAB-15093,39127,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,C0rWin,C0rWin,08/Apr/19 7:10 AM,06/Jun/19 3:37 PM,28/Oct/23 3:08 AM,06/Jun/19 3:37 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{code}
21:29:37 ok  	github.com/hyperledger/fabric/gossip/gossip/algo	5.620s	coverage: 96.9% of statements
21:29:39 2019-04-07 21:29:39.734 UTC [gossip.channel#test] verifyMsg -> WARN 001 Messsage is nil
21:29:39 2019-04-07 21:29:39.734 UTC [gossip.channel#test] verifyMsg -> WARN 002 Message content is empty
21:29:39 2019-04-07 21:29:39.742 UTC [gossip.channel#test] verifyMsg -> WARN 003 Message has nil PKI-ID
21:29:39 2019-04-07 21:29:39.742 UTC [gossip.channel#test] HandleMessage -> WARN 004 Failed verifying message: channel:""A"" tag:CHAN_AND_ORG data_msg:<payload:<seq_num:5 > > 
21:29:39 2019-04-07 21:29:39.743 UTC [gossip.channel#test] HandleMessage -> WARN 005 Point to point message came from  706b694944696e4f726732 , org( ORG2 ) but it's not eligible for the channel A
21:29:39 2019-04-07 21:29:39.743 UTC [gossip.channel#test] func5 -> WARN 006 peer [112 107 105 73 68 105 110 79 114 103 50] 's organization( ORG2 ) isn't in the channel A
21:29:39 2019-04-07 21:29:39.743 UTC [gossip.channel#test] func5 -> WARN 007 Peer [112 107 105 73 68 73 110 79 114 103 49] isn't eligible for channel A : Not eligible
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel.func5
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:268
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.(*stateInfoCache).validate
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:979
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).ConfigureChannel
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:563
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.TestChannelGetPeers
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:1721
21:29:39 testing.tRunner
21:29:39 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827
21:29:39 runtime.goexit
21:29:39 	/opt/go/go1.11.5.linux.amd64/src/runtime/asm_amd64.s:1333
21:29:39 2019-04-07 21:29:39.743 UTC [gossip.channel#test] HandleMessage -> WARN 008 Point to point message came from  706b694944696e4f726732 , org( ORG2 ) but it's not eligible for the channel A
21:29:39 2019-04-07 21:29:39.744 UTC [gossip.channel#test] func5 -> WARN 009 Peer [112 107 105 73 68 73 110 79 114 103 49 66 117 116 78 111 116 69 108 105 103 105 98 108 101] isn't eligible for channel A : Not eligible
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel.func5
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:268
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.(*stateInfoCache).validate
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:979
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).ConfigureChannel
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:563
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.TestChannelGetPeers
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:1721
21:29:39 testing.tRunner
21:29:39 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827
21:29:39 runtime.goexit
21:29:39 	/opt/go/go1.11.5.linux.amd64/src/runtime/asm_amd64.s:1333
21:29:39 2019-04-07 21:29:39.745 UTC [gossip.channel#test] verifyMsg -> WARN 00a Message contains wrong channel MAC( [236 254 103 42 92 15 128 69 128 23 93 211 64 117 4 245 122 169 53 61 97 52 130 122 122 247 124 49 223 8 78 79] ), expected [223 190 237 241 229 126 55 153 124 7 243 164 172 139 78 65 62 107 7 154 203 163 4 26 100 24 146 10 59 53 199 167]
21:29:39 2019-04-07 21:29:39.745 UTC [gossip.channel#test] HandleMessage -> WARN 00b Failed verifying message: tag:CHAN_OR_ORG state_info:<timestamp:<inc_num:1554672579745005189 seq_num:1 > pki_id:""pkiIDInOrg1"" channel_MAC:""\354\376g*\\\017\200E\200\027]\323@u\004\365z\2515=a4\202zz\367|1\337\010NO"" properties:<ledger_height:1 > > 
21:29:39 2019-04-07 21:29:39.746 UTC [gossip.channel#test] HandleMessage -> WARN 00c Point to point message came from  706b694944696e4f726733 , org( ORG3 ) but it's not eligible for the channel A
21:29:39 2019-04-07 21:29:39.746 UTC [gossip.channel#test] func5 -> WARN 00d peer [112 107 105 73 68 105 110 79 114 103 50] 's organization( ORG2 ) isn't in the channel A
21:29:39 2019-04-07 21:29:39.747 UTC [gossip.channel#test] ConfigureChannel -> WARN 00e Already have a more updated JoinChannel message( 1554672579847322498 ) than 1554672579747322638
21:29:39 2019-04-07 21:29:39.747 UTC [gossip.channel#test] func5 -> WARN 00f Peer [112 107 105 73 68 73 110 79 114 103 49 66 117 116 78 111 116 69 108 105 103 105 98 108 101] isn't eligible for channel A : Not a channel reader
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel.func5
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:268
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.(*stateInfoCache).validate
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:979
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).ConfigureChannel
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:563
21:29:39 github.com/hyperledger/fabric/gossip/gossip/channel.TestGossipChannelEligibility
21:29:39 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:1649
21:29:39 testing.tRunner
21:29:39 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827
21:29:39 runtime.goexit
21:29:39 	/opt/go/go1.11.5.linux.amd64/src/runtime/asm_amd64.s:1333
21:29:39 2019-04-07 21:29:39.747 UTC [gossip.channel#test] EligibleForChannel -> WARN 010 Identity for peer 706b694944496e4f726731 doesn't exist
21:29:39 2019-04-07 21:29:39.747 UTC [gossip.channel#test] HandleMessage -> WARN 011 Point to point message came from  706b694944496e4f726731 , org( ORG1 ) but it's not eligible for the channel A
21:29:39 2019-04-07 21:29:39.747 UTC [gossip.channel#test] EligibleForChannel -> WARN 012 Identity for peer 706b694944496e4f726731 doesn't exist
21:29:39 panic: 
21:29:39 
21:29:39 mock: Unexpected Method Call
21:29:39 -----------------------------
21:29:39 
21:29:39 GetIdentityByPKIID(common.PKIidType)
21:29:39 		0: common.PKIidType{0x70, 0x6b, 0x69, 0x49, 0x44, 0x49, 0x6e, 0x4f, 0x72, 0x67, 0x31, 0x42, 0x75, 0x74, 0x4e, 0x6f, 0x74, 0x45, 0x6c, 0x69, 0x67, 0x69, 0x62, 0x6c, 0x65}
21:29:39 
21:29:39 The closest call I have is: 
21:29:39 
21:29:39 GetIdentityByPKIID(common.PKIidType)
21:29:39 		0: common.PKIidType{0x70, 0x6b, 0x69, 0x49, 0x44, 0x49, 0x6e, 0x4f, 0x72, 0x67, 0x31}
21:29:39 
21:29:39 Difference found in argument 0:
21:29:39 
21:29:39 --- Expected
21:29:39 +++ Actual
21:29:39 @@ -1,2 +1,2 @@
21:29:39 -(common.PKIidType) (len=11) 706b694944496e4f726731
21:29:39 +(common.PKIidType) (len=25) 706b694944496e4f7267314275744e6f74456c696769626c65
21:29:39  
21:29:39 
21:29:39 Diff: 0: FAIL:  (common.PKIidType=706b694944496e4f7267314275744e6f74456c696769626c65) != (common.PKIidType=706b694944496e4f726731)
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11393/console

{code}
common.PKIidType{0x70, 0x6b, 0x69, 0x49, 0x44, 0x49, 0x6e, 0x4f, 0x72, 0x67, 0x31, 0x42, 0x75, 0x74, 0x4e, 0x6f, 0x74, 0x45, 0x6c, 0x69, 0x67, 0x69, 0x62, 0x6c, 0x65} == pkiIDInOrg1ButNotEligible
{code}

and 

{code}
common.PKIidType{0x70, 0x6b, 0x69, 0x49, 0x44, 0x49, 0x6e, 0x4f, 0x72, 0x67, 0x31} == pkiIDInOrg1
{code}",,C0rWin,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jxj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jun/19 3:36 PM;ronenschafferibm;This unit-test didn't fail for over a month (last known fail on 08/Apr/19) - closing...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Log INFO for important lifecycle steps,FAB-15094,39128,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,denyeart,denyeart,08/Apr/19 10:18 AM,28/Aug/19 7:39 PM,28/Oct/23 3:08 AM,28/Aug/19 7:39 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"Chaincode installation is not logged in peer for new lifecycle. Important lifecycle steps should be logged at INFO level.

The 'old' lifecycle logged INFO with the following message:
{code:java}
Installed Chaincode [marbles] Version [0] to peer{code}
 It looks like the other important lifecycle steps like approve and commit are already logged well at INFO level.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:iwr",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Received error ""Config history manager is expected to recieve events only if at least one chaincode is updated""",FAB-15095,39129,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,denyeart,denyeart,08/Apr/19 10:20 AM,08/Apr/19 9:26 PM,28/Oct/23 3:08 AM,08/Apr/19 9:26 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"Following BYFN using new lifecycle, at the step approve for my org, upon validation/commit received this error:
{code:java}
2019-04-08 01:15:15.681 UTC [confighistory] HandleStateUpdates -> ERRO 1f0c Config history manager is expected to recieve events only if at least one chaincode is updated stateUpdates = ledger.StateUpdates{""_lifecycle"":(*ledger.KVStateUpdates)(0xc002a5c700)}{code}",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14866,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jxz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"There are no longer default policies with configtxgen, but they are documented.",FAB-15096,39130,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,iamksseo2,jyellick,jyellick,08/Apr/19 11:34 AM,25/Sep/19 12:08 AM,28/Oct/23 3:08 AM,25/Sep/19 12:08 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,configtxgen,,,,,"https://hyperledger-fabric.readthedocs.io/en/latest/policies.html#policy-defaults

This section is out of date.  configtxgen no longer emits default policies and they must be specified explicitly in {{configtx.yaml}}.",,iamksseo2,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jy7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),iamksseo2,jyellick,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update all log and error messages that mention chaincode ""instantiated""",FAB-15097,39131,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,wlahti,denyeart,denyeart,08/Apr/19 11:50 AM,18/May/19 11:44 PM,28/Oct/23 3:08 AM,18/May/19 11:44 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"With the new lifecycle, we should avoid the term ""instantiated"" in log and error messages.

For example in this one:
{code:java}
Error: endorsement failure during query. response: status:500 message:""make sure the chaincode mycc has been successfully instantiated and try again: chaincode mycc not found"" {code}
",,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15008,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:iy",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/19 7:50 PM;denyeart;This one is more general, so we'll keep this one open and close FAB-15008 as dup.;;;","16/May/19 1:23 AM;wlahti;Fix for the error message pointed out in the description: https://gerrit.hyperledger.org/r/c/31385/

Also, [~denyeart], the two error messages in the description are the same. Have you noticed another obvious error/log message you want to be sure is fixed?;;;","16/May/19 2:10 AM;denyeart;[~wlahti] Oops... I've edited the description to collapse to one now.  I'd suggest grep the code for ""instantiate"" and identify any other occurrences that are user-facing. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improvements to BYFN doc for new lifecycle,FAB-15098,39132,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,denyeart,denyeart,08/Apr/19 12:27 PM,09/Apr/19 10:33 PM,28/Oct/23 3:08 AM,08/Apr/19 7:32 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,Misc improvements to BYFN doc for new lifecycle.,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jyn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Apr/19 12:35 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/30805/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update BYFN couchdb marbles section for new lifecycle,FAB-15099,39133,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,denyeart,denyeart,08/Apr/19 12:37 PM,10/Apr/19 12:29 AM,28/Oct/23 3:08 AM,10/Apr/19 12:29 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"BYFN doc has been updated for new lifecycle everywhere except for near the end in the CouchDB marbles chaincode section.  That section still talks about ""install"" and ""instantiate"".

I cleaned up a few other sections higher up in the doc in FAB-15098 CR.",,denyeart,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00jyv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Apr/19 6:28 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30817/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer & Channel capabilities to gate consensus type migration v2,FAB-15101,39135,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,08/Apr/19 5:39 PM,08/Jun/19 1:43 AM,28/Oct/23 3:08 AM,29/Apr/19 11:06 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Add v1_4_2  channel capability

This should be used in places where both peer & orderer are exposed to migration - especially in Bundle.ValidateNew(). The capability introduced in 1.4.1 / 2.0 may already fit our needs - validate that.

Add v1_4_2  orderer capability

This should be used in places where only the orderer is exposed to migration.

 ",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jzb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Define maintenance-mode migration states in the orderer configuration protobuf,FAB-15102,39136,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,08/Apr/19 5:50 PM,08/Jun/19 1:43 AM,28/Oct/23 3:08 AM,29/Apr/19 11:07 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In the orderer configuration proto-buff definition, extend ConsensusType to include:

migration_state enum \{NONE, START, COMMIT}

NONE is normal state

START is entry to ""maintenance mode"", with current consensus type.

COMMIT is in ""maintenance mode"", with a new consensus type.

 

When this state is either START | COMMIT, the orderer goes into maintenance mode, which means:
 - Normal transactions are rejected
 - Only config changes that change the ConsesusType group are allowed (and those need to be signed by an orderer admin)
 - Deliver requests are rejected

(these are not implemented in this task, though).

 ",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jzj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use idiomatic name for self-references in couchdb pkg,FAB-15103,39137,,Task,To Do,FAB,Fabric,software,denyeart,,,Medium,,mastersingh24,mastersingh24,mastersingh24,08/Apr/19 8:04 PM,25/Oct/19 7:11 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.1.0,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jzr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update or remove the bootstrap.sh in fabric-samples/scripts,FAB-15104,39138,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yukkyhira,ChanderGovindarajan,ChanderGovindarajan,08/Apr/19 8:18 PM,06/Aug/19 11:41 AM,28/Oct/23 3:08 AM,16/Jul/19 11:16 PM,,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,,,,,,"The bootstrap.sh in fabric-samples/scripts is incorrect primarily wrt to parsing of cli args to obtain version numbers.

However, there seems to be a bootstrap.sh in fabric/scripts which seems to have superseded the samples one as it does not have this problem. Also the tutorials/docs recommend this option.

Hence the samples/ script can be removed (to avoid duplication and out-of-date issues such as this) or updated to solve this particular issue.",,ChanderGovindarajan,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jzz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ChanderGovindarajan,yukkyhira,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jun/19 5:21 PM;yukkyhira;[https://gerrit.hyperledger.org/r/c/fabric-samples/+/31883]

To avoid the duplication of bootstrap.sh, I removed fabric-samples/scripts/bootstrap.sh. And I updated README.md of fabric-samples repository with steps to download bootstrap.sh from Fabric repository.

The reasons why I removed fabric-samples/scripts/bootstrap.sh are as below:
 * [The official document|https://hyperledger-fabric.readthedocs.io/en/latest/install.html] says that we should use fabric/scripts/bootstrap.sh
 * fabric/scripts/bootstrap.sh is a super set of fabric-samples/scripts/bootstrap.sh.
 * We downloaded binaries and docker Images using fabric/scripts/bootstrap.sh, and it works correctly.
 * We checked the version option and it worked correctly, too.

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add visuals for new lifecycle process,FAB-15105,39139,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,,pandrejko,pandrejko,08/Apr/19 8:53 PM,24/Sep/19 10:33 PM,28/Oct/23 3:08 AM,24/Sep/19 10:33 PM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,"A diagram showing how the package and definition relate would be helpful, with all the terms included (edited) 
as well as diagram showing approval and commit process.

We need to show practically how a workflow would work. That in general, we expect for approving to be unanimous across network participants, and to occur before commit. That our default 'majority' is more about fault tolerance than governance.",,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:7",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Sep/19 10:39 PM;pandrejko;[~negupta] Can this be closed?;;;","24/Sep/19 10:32 PM;negupta;added here: https://hyperledger-fabric.readthedocs.io/en/latest/chaincode4noah.html;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add disclaimer to Private Data Tutorial about video,FAB-15106,39140,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,pandrejko,pandrejko,08/Apr/19 9:10 PM,04/Feb/20 12:13 AM,28/Oct/23 3:08 AM,04/Feb/20 12:13 AM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,"The video link at the bottom of the Private Data tutorial still uses the old lifecycle process.

We should add a disclaimer about that to avoid confusion.",,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:6i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jan/20 7:38 AM;pandrejko;[~negupta] While you are updating the private data tutorial, could you get this one?;;;","04/Feb/20 12:13 AM;pandrejko;This was implemented already: https://hyperledger-fabric.readthedocs.io/en/latest/private_data_tutorial.html#additional-resources;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Idemix Orgs should not be included in ImplicitMeta majority count.,FAB-15107,39141,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,rickr,rickr,08/Apr/19 9:23 PM,25/Sep/19 1:35 AM,28/Oct/23 3:08 AM,25/Sep/19 1:35 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-crypto,fabric-docs,,,,,0,,,,,,,,denyeart,jyellick,pandrejko,rickr,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15991,,,,,,FAB-11237,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzzgzc:",,,,Unset,Unset,,"Have two orgs that require creator signing with Idemix credentials. You'll need two Orgs defined for X509 and two Orgs for Idemix.  Use ImplicitMeta Majority for signing/endorsing.  The Idemix orgs  are included in the majority  so you will need three orgs endorsing; however,  the Idemix orgs should not be used for endorsing so you can't meet the majority.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,pandrejko,rickr,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/19 3:03 AM;rickr;As part of this work please test and provide CR for the JSDK.    The specific org policy signature should be replaced with the ImplicitMeta policies in
src/test/fixture/sdkintegration/e2e-2Orgs/v2.0/configtx.yaml

In that directory then run 

configtxgen --configPath . -outputBlock orderer.block -profile TwoOrgsOrdererGenesis_v20 -channelID systemordererchannel
and
configtxgen --configPath . -outputCreateChannelTx v2channel.tx -profile TwoOrgsChannel_v20 -channelID v2channel

This  should then pass the integration test if checked in to gerrit 

Thanks!;;;","16/Jul/19 11:42 PM;denyeart;Will be addressed with additional doc.;;;","24/Sep/19 11:18 PM;jyellick;Has this been doc-ed [~pandrejko] ?;;;","25/Sep/19 12:56 AM;pandrejko;[~jyellick] - This has been doc'd as part of https://jira.hyperledger.org/browse/FAB-15991;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configtx creating orderer block with Idemix,FAB-15108,39142,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,,rickr,rickr,08/Apr/19 9:48 PM,16/Oct/19 3:58 PM,28/Oct/23 3:08 AM,09/Apr/19 9:36 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Be first to admit this may be a user error. When I try to add Idemix orgs in my orderer consortium I get the below error when starting the orderer:


Command to build the orderer block:
/bin/configtxgen --configPath . -outputBlock orderer.block -profile TwoOrgsOrdererGenesis_v20 -channelID systemordererchannel 

Orderer logs :

https://ctrlv.it/id/172021/1678656002


2019-04-08 12:41:46.301 UTC [orderer.common.server] Start -> PANI 104 Failed validating bootstrap block: initializing channelconfig failed: could not create channel Consortiums sub-group config: creating the MSP manager failed: Invalid *IdemixNewOpts. Version not recognized [0]
panic: Failed validating bootstrap block: initializing channelconfig failed: could not create channel Consortiums sub-group config: creating the MSP manager failed: Invalid *IdemixNewOpts. Version not recognized [0]
goroutine 1 [running]:
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc000324000, 0x0, 0x0, 0x0)
	/go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0003be168, 0xc0002fa004, 0x14b47fe, 0x25, 0xc0002efcf8, 0x1, 0x1, 0x0, 0x0, 0x0)
	/go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc0003be168, 0x14b47fe, 0x25, 0xc0002efcf8, 0x1, 0x1)
	/go/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc0003be170, 0x14b47fe, 0x25, 0xc0002efcf8, 0x1, 0x1)
	/go/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60
github.com/hyperledger/fabric/orderer/common/server.Start(0x14929a6, 0x5, 0xc0004e8900)
	/go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:98 +0xcd
github.com/hyperledger/fabric/orderer/common/server.Main()
	/go/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1ce
main.main()
	/go/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20",,justformorefun,jyellick,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,FABJ-288,,,,,,,,,,,,,,,,,,,FAB-11237,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/19 9:50 PM;rickr;configtx.yaml;https://jira.hyperledger.org/secure/attachment/17076/configtx.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k0f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),justformorefun,jyellick,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Apr/19 9:57 PM;rickr;Note if I comment out the Idemix orgs in my Orderer's consortium then all the JSDK lifecycle test work fine.  

{code:yaml}
TwoOrgsOrdererGenesis_v20:
        <<: *ChannelDefaults
        Orderer:
            <<: *OrdererDefaults
            Organizations:
                - <<: *OrdererOrg
                  Policies:
                      <<: *OrdererOrgPolicies
                      Admins:
                          Type: Signature
                          Rule: ""OR('OrdererMSP.member')""
            Capabilities:
                <<: *OrdererCapabilities
        Application:
            <<: *ApplicationDefaults
            Organizations:
                - *OrdererOrg
            Capabilities:
                <<: *ApplicationCapabilities2_0
        Consortiums:
            SampleConsortium:
                Organizations:
                    - *Org1
                    - *Org2
#                    - *Org1Idemix
#                    - *Org2Idemix

{code};;;","09/Apr/19 5:09 AM;jyellick;Try:

{noformat}
Channel: &ChannelDefaults
    Capabilities:
        <<: *ChannelCapabilities
{noformat};;;","09/Apr/19 9:36 PM;rickr;I got the orderer to start up with the Idemix  consortiums .    The new lifecycle test case runs fine.  All the previous end2end test cases are running with the exception of Idemix.  I'll close this and open a new JIRA for that if necessary.  Thanks [~jyellick];;;","16/Oct/19 3:58 PM;justformorefun;[~rickr] hi, I came across the same problem(with same error info). When I bootstrap a fabric network with Idemix orgs, the other components(two CAs,  four peers) are all up except orderer service. Could you give some hints on how to fix the issue? Any reply will be appreciated, thanks.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Struct field names should match purpose,FAB-15109,39145,,Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,mastersingh24,mastersingh24,mastersingh24,09/Apr/19 12:18 AM,09/Apr/19 12:18 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,The names of the fields for DeliverClient don't match their purpose,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k13:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor internal/peer/* packages,FAB-15110,39146,,Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,mastersingh24,mastersingh24,mastersingh24,09/Apr/19 12:21 AM,09/Apr/19 12:21 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Code can be simplified by removing the ""*Fnc"" pattern which is really only used for mocking.  Should likely be able to more directly use gRPC stubs",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k1b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Instantiation with collections fails at unmarshalling JSON,FAB-15111,39148,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Low,,,jlcs,jlcs,09/Apr/19 12:45 AM,09/Apr/19 4:15 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"When instantiating with the binary utility and the option to add a collections config file (which works fine using the Node SDK):

 
 bin/peer chaincode instantiate --collections-config myfile.json [...]
  
 The error is:
  
 Error: invalid collection configuration in file myfile.json: could not parse the collection configuration: json: cannot unmarshal object into Go struct field collectionConfigJson.policy of type string
  
 Because of this line:
  
 [https://github.com/hyperledger/fabric/blob/eca1b14b7e3453a5d32296af79cc7bad10c7673b/peer/chaincode/common.go#L157]
  
 Instead of a string, it should be a JSON object type, thus the error being unable to parse it.

 

 
----
 

 

EDIT:

 

The file used for the collections at instantiation is different when used from the SDK or the command line, as the policies need to be formated as JSON or polish notation, respectively.

 

This is not a bug, but should be added to the documentation.",,jlcs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k1r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jlcs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Lifecycle concept section,FAB-15112,39150,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,09/Apr/19 2:43 AM,09/May/19 11:28 PM,28/Oct/23 3:08 AM,09/May/19 11:28 PM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"This Jira tracks the work required to create a new chapter in the ""key concepts"" sectuib, dedicated to lifecycle, describing concepts, deployment models, highlighting the differences between old and new and providing graphical support to understand those",,ales,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzyc",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 11:27 PM;negupta;Done in this CR: https://jira.hyperledger.org/browse/FAB-15165;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
OTE channel creation fails in fabric-test merge job,FAB-15113,39152,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,scottz,scottz,scottz,09/Apr/19 3:02 AM,12/Oct/19 4:37 AM,28/Oct/23 3:08 AM,14/May/19 7:24 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"There are multiple errors. The primary one seems to be the failure of the channel creation request because the policy was not satisfied. Recently the policy code in fabric master branch was changed for v2.0, as well as the policies in the configtx.yaml files throughout fabric-test (refer to   [https://gerrit.hyperledger.org/r/#/c/30429/18/tools/NL/configtx.yaml-in]), so we may need to touch something else in OTE or NL to get this to work. Another point: the NL is used by PTE to create a network, and the PTE test passes.

The output errors from recent merge job

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/635/testReport/junit/orderer_ote/OTE_Orderer_Traffic_Engine/test_FAB7936_100tx_3ch_3ord_3kb/]

include the following:

{{Creating OTE ...}}{{2019-04-04 22:15:28.418 UTC [channelCmd] InitCmdFactory -> INFO 001#x1B[0m Endorser and orderer connections initialized Error: got unexpected status: BAD_REQUEST – error validating channel creation transaction for new channel 'testorgschannel1', could not succesfully apply update to template configuration: error authorizing update: error validating DeltaSet: *policy for [Value] /Channel/Capabilities not satisfied: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Admins' sub-policies to be satisfied*}}{{ }}

{{2019-04-04 22:15:30.127 UTC [channelCmd] InitCmdFactory -> INFO 001#x1B[0m Endorser and orderer connections initialized}}

{{Error: got unexpected status: BAD_REQUEST – error validating channel creation transaction for new channel 'testorgschannel3', could not succesfully apply update to template configuration: error authorizing update: error validating DeltaSet: policy for [Value] /Channel/Capabilities not satisfied: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Admins' sub-policies to be satisfied}}

{{github.com/hyperledger/fabric/OTE ./ote.go:234:9: undefined: ""github.com/hyperledger/fabric/common/crypto"".LocalSigner}}

{{runtime/cgo exec: ""gcc"": executable file not found in $PATH}}

{{mv: can't rename 'ote-*.log': No such file or directory}}

{{Error: No such container:path: OTE:/opt/gopath/src/github.com/hyperledger/fabric/OTE/ote.log}}{{grep: ./logs/FAB-7936_100tx_3ch_3ord_3kb.log: No such file or directory}}{{./runote.sh: line 355: [: too many arguments Removing OTE ...}}

 ",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15356,FAB-15357,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k2n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,release-2.4,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"23/Apr/19 11:35 PM;dongming;NL changes: https://gerrit.hyperledger.org/r/#/c/31067/;;;","27/Apr/19 1:10 AM;scottz;Dongming submitted one fix to NL, but the OTE tool must be updated too. I reopened this and will work on that.;;;","06/May/19 10:51 PM;scottz;https://gerrit.hyperledger.org/r/#/c/31176/ fixes several pieces for OTE tests.

However, we opened separate issues for remaining bugs - the test flake failure of the basic OTE test, and the failures of the multiple orderers tests.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Change ""fabric-baseos"" image name in fabric",FAB-15114,39153,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,denyeart,rameshthoomu,rameshthoomu,09/Apr/19 3:06 AM,29/Jan/20 2:34 PM,28/Oct/23 3:08 AM,29/Jan/20 2:34 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-build,,,,,,0,,,,,,"With the recent changes in fabric master branch, we are now publishing ""fabric-baseos"" image but we already have ""fabric-baseos"" image in fabric-baseimage repository and we use this image in all release branches.

If we now publish fabric-baseos to hyperledger dockerhub, release branches get the baseos image which has fabric code not fabric-baseimage.

I think we have to rename the fabric-baseos name to maintain uniqueness in the build flow.",,btl5037,denyeart,rameshthoomu,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k2v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,rameshthoomu,sambhavdutt,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/19 3:44 AM;denyeart;[~rameshthoomu] Agreed we should rename baseos in master before the final v2.0 release.  In the shorter term we will simply not tag images from master as 'latest' in dockerhub, so as to not impact v1.4.x users.  For example the 2.0.0-alpha images will only be tagged as 2.0.0-alpha.;;;","09/Apr/19 4:58 AM;sambhavdutt;[~denyeart][~rameshthoomu]
https://gerrit.hyperledger.org/r/#/c/30821/
CR submitted for this;;;","10/Apr/19 3:43 AM;denyeart;Temp solution of not tagging as 'latest' is merged: [https://gerrit.hyperledger.org/r/#/c/30821/]

Let's leave this task open to rename baseos after alpha release.;;;","03/Dec/19 12:04 PM;btl5037;Do we really need to rename this now? BaseOS in master has a different versioning scheme, with the GA release of 2.0 the latest baseos would point to the one released through the Fabric Process. The one belonging to the baseimage repo and the one used by release-1.4 will remain using the 0.x.x versioning scheme from baseimage. In a year we will retire the baseimage repo anyway.;;;","29/Jan/20 2:34 PM;denyeart;With the move away from 'latest' tag, I agree with Brett that we do not need to do this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
create Maintainers file in fabric-test,FAB-15115,39154,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,09/Apr/19 3:24 AM,16/Apr/19 11:56 PM,28/Oct/23 3:08 AM,11/Apr/19 5:30 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"We should create a text file to identify those with maintainer privileges, as is done in other fabric project repositories.

Also, we need to add maintainers, since Adnan and Latitia are inactive or less active now. I am thinking we could add those with the most change requests and knowledge of the repo: Dongming and Surya, at least to provide coverage for those areas of which they are knowledgeable.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k33:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"11/Apr/19 5:30 AM;scottz;[https://gerrit.hyperledger.org/r/#/c/30834/];;;","16/Apr/19 11:56 PM;scottz;Dongming is already a maintainer. 

Policy says that adding a new maintainer (e.g. Surya) should be done with another Jira task, with approval from majority of maintainers. We can handle that separately.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Misc Doc Fixes,FAB-15117,39157,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,09/Apr/19 6:30 AM,09/Apr/19 11:58 PM,28/Oct/23 3:08 AM,09/Apr/19 11:58 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00k3r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use big.Int to hold block number is asn1 encoded header,FAB-15118,39159,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,09/Apr/19 11:18 AM,10/Apr/19 11:03 PM,28/Oct/23 3:08 AM,10/Apr/19 11:03 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k47:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BYFN with java chaincode fails,FAB-15119,39160,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,09/Apr/19 6:45 PM,09/Apr/19 11:18 PM,28/Oct/23 3:08 AM,09/Apr/19 11:18 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,"BYFN with -l java fails due to error:

""transaction returned with failure: function other than init is not supported""

The issue is that BYFN passes ""Init"" function while the sample Java chaincode checks for ""init"" function.

Within the init function, there is no need to check the function argument that is passed in. The sample Go chaincode and Node.js chaincode do not check the function argument. This change makes sample Java chaincode behave the same way.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k4f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Apr/19 6:48 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/30827/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LSCC tests should invoke the validator specifying the lscc namespace,FAB-15120,39163,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,09/Apr/19 9:00 PM,03/May/19 10:46 PM,28/Oct/23 3:08 AM,03/May/19 10:46 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,ales,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k4v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/19 10:46 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/30828/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove MemoryLedger,FAB-15121,39164,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,bur,bur,09/Apr/19 9:09 PM,09/Apr/19 9:09 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"MemoryLedger is used in some tests to emulate the ledger when processing token operations. However, we also use a FakeLedger mock in many cases which is the preferred way.",,bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13209,,,No,,Unset,No,,,"1|i00k53:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bur,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Private data tutorial note fix,FAB-15122,39166,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,negupta,negupta,09/Apr/19 10:39 PM,10/Apr/19 5:45 AM,28/Oct/23 3:08 AM,10/Apr/19 5:45 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00k5j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor config template usage,FAB-15123,39170,39370,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,09/Apr/19 11:25 PM,17/Apr/19 11:57 PM,28/Oct/23 3:08 AM,13/Apr/19 4:16 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,The template file is a reference that is local to the fabric package.  The template string should be loaded into a variable to ensure that it is built into memory.,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k5z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/19 11:45 PM;bpbuch;https://gerrit.hyperledger.org/r/#/c/30890/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken link in whats new,FAB-15124,39173,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,09/Apr/19 11:54 PM,10/Apr/19 4:33 AM,28/Oct/23 3:08 AM,10/Apr/19 4:33 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,Token link does not work.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k6f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert profile storage to a map,FAB-15125,39174,39370,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,10/Apr/19 12:02 AM,17/Apr/19 11:57 PM,28/Oct/23 3:08 AM,13/Apr/19 1:32 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Currently, profiles must be looped through to access the active profile metadata.  Settings should provide a more usable way to access the active profile metadata.  ",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k6n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/19 12:55 AM;bpbuch;https://gerrit.hyperledger.org/r/30893;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Disable ""latest"" multiarch tag from master branch",FAB-15126,39181,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,10/Apr/19 3:27 AM,25/Apr/19 12:25 AM,28/Oct/23 3:08 AM,25/Apr/19 12:25 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Disable ""latest"" multiarch tag from master branch",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00k7j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,release-2.4,purge-pd,main-emeritius,main,correct-nodeenv-version,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Apr/19 3:44 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/q/topic:disable-latest-multiarch+(status:open+OR+status:merged);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update high throughput sample for lifecycle,FAB-15127,39183,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,10/Apr/19 5:52 AM,29/May/19 1:38 AM,28/Oct/23 3:08 AM,29/May/19 1:38 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,fabric-samples,,,,,0,,,,,,Update the install and instantiate scripts in the high throughput sample to define a chaincode on a channel.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzww",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/19 12:09 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30847/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-test verify jobs fail all PTE/nodesdk tests with ""Error: Cannot find module 'fabric-client/lib/User.js""",FAB-15128,39185,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,scottz,scottz,scottz,10/Apr/19 7:04 AM,19/Apr/19 10:05 PM,28/Oct/23 3:08 AM,19/Apr/19 10:05 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"fabric-test daily test suite PTE tests: passed 7 out of 8 tests April 5th. (The only failing test was the only one using marbles cc. FAB-15132 is created for that one test failure problem.)

Starting April 6th, the fabric-test daily test suite shows all 8 tests failing every day. Similar behavior (PTE test passes April 5th, but fails April 6th) is observed in the fabric-test verify jobs and merge jobs (which execute one of the PTE tests). Refer to the error in job 212:

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-pte-master-x86_64/212/]

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-pte-master-x86_64/lastCompletedBuild/testReport/systest_pte/Perf_Stress_CouchDB/test_FAB3832_4i_FAB3834_4q/]
{quote}module.js:549

throw err;

^

Error: Cannot find module 'fabric-client/lib/User.js'

at Function.Module._resolveFilename (module.js:547:15)

at Function.Module._load (module.js:474:25)

at Module.require (module.js:596:17)

at require (internal/module.js:11:18)

at Object.<anonymous> (/w/workspace/fabric-test-daily-pte-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/tools/PTE/pte-util.js:30:12)

at Module._compile (module.js:652:30)

at Object.Module._extensions..js (module.js:663:10)

at Module.load (module.js:565:32) at tryModuleLoad (module.js:505:12) at Function.Module._load (module.js:497:3)
{quote}",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00k8f:",,,,Unset,Unset,,"run daily test suite PTE tests, or push any changeset to trigger the verify job",,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"17/Apr/19 6:03 AM;scottz;On April 5th, a changeset was merged to fabric-sdk-node for FABN-909, and broke all fabric-test/ PTE tests:

[https://gerrit.hyperledger.org/r/#/c/30450/]

indicating it moved User.js to
 * fabric-common/lib/User.js

from
 * fabric-client/lib/User.js

So it looks like PTE code must be modified accordingly, for this and others too that moved (utils.js, and impl directory):
{quote}$ grep -r -n User.js *

PTE/pte-util.js:30:var User = require('fabric-client/lib/User.js');

$ grep -r -n fabric-client/lib/utils.js *
{quote}

This new changeset in fabric-test includes exactly this fix:  https://gerrit.hyperledger.org/r/#/c/30970/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LSCC: Multiple LSCC namespaces in the read-write set of an LSCC deploy transaction allow arbitrary writes in the LSCC namespace,FAB-15129,39199,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,ales,ales,10/Apr/19 11:04 PM,08/Aug/19 4:45 AM,28/Oct/23 3:08 AM,08/Aug/19 4:45 AM,v1.0.0,v1.0.1,v1.0.2,v1.0.3,v1.0.4,v1.0.5,v1.0.6,v1.1.0,v1.1.1,v1.2.0,v1.2.1,v1.3.0,v1.4.0,,,,,fabric-peer,,,,,,0,,,,,,,,ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,FAB-15845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/19 12:42 AM;wenjian;15129_v142.patch;https://jira.hyperledger.org/secure/attachment/17371/15129_v142.patch","10/Apr/19 11:30 PM;ales;LSCCattack.1.patch;https://jira.hyperledger.org/secure/attachment/17089/LSCCattack.1.patch","29/Jun/19 12:42 AM;wenjian;test_v142_v1_2capability.log;https://jira.hyperledger.org/secure/attachment/17369/test_v142_v1_2capability.log","29/Jun/19 12:42 AM;wenjian;test_v142_v1_3capability.log;https://jira.hyperledger.org/secure/attachment/17370/test_v142_v1_3capability.log","29/Jun/19 12:17 AM;wenjian;test_v20_v1_2capability.log;https://jira.hyperledger.org/secure/attachment/17367/test_v20_v1_2capability.log","29/Jun/19 12:17 AM;wenjian;test_v20_v1_3capability.log;https://jira.hyperledger.org/secure/attachment/17368/test_v20_v1_3capability.log",,,,,,,,angelo.decaro,caod,elli-androulaki,jyellick,manish-sethi,sykesm,wenjian,wlahti,yacovm,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzwr6z:zza",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Apr/19 11:29 PM;ales;h1. Problem

LSCC custom validation was written under the assumption that ledger would only accept read-write sets
{code:java}
type TxReadWriteSet struct {
       DataModel            TxReadWriteSet_DataModel `protobuf:""varint,1,opt,name=data_model,json=dataModel,proto3,enum=rwset.TxReadWriteSet_DataModel"" json:""data_model,omitempty""`
       NsRwset              []*NsReadWriteSet        `protobuf:""bytes,2,rep,name=ns_rwset,json=nsRwset,proto3"" json:""ns_rwset,omitempty""`
       XXX_NoUnkeyedLiteral struct{}                 `json:""-""`
       XXX_unrecognized     []byte                   `json:""-""`
       XXX_sizecache        int32                    `json:""-""`
}
{code}
where the {{NsRwset}} array would not contain 2 {{NsReadWriteSet}} entries 
{code:java}
// NsReadWriteSet encapsulates the read-write set for a chaincode
type NsReadWriteSet struct {
       Namespace             string                          `protobuf:""bytes,1,opt,name=namespace,proto3"" json:""namespace,omitempty""`
       Rwset                 []byte                          `protobuf:""bytes,2,opt,name=rwset,proto3"" json:""rwset,omitempty""`
       CollectionHashedRwset []*CollectionHashedReadWriteSet `protobuf:""bytes,3,rep,name=collection_hashed_rwset,json=collectionHashedRwset,proto3"" json:""collection_hashed_rwset,omitempty""`
       XXX_NoUnkeyedLiteral  struct{}                        `json:""-""`
       XXX_unrecognized      []byte                          `json:""-""`
       XXX_sizecache         int32                           `json:""-""`
}
{code}
with identical {{Namespace}} field. However this assumption is incorrect, it is entirely possible for a read-write set to contain 2 or more {{NsReadWriteSet}} entries in the {{NsRwset}} array with identical {{Namespace}} field, and ledger will commit all writes in all {{NsReadWriteSets}}.

LSCC custom validation does not deal with this scenario because it assumes that there will only be a single namespace for LSCC upon deploy/upgrade. In a scenario with multiple entries for LSCC, the first entry in the array referring to LSCC is properly validated, whereas any subsequent entry is entirely ignored and will be committed as-is without any check. 

The endorsement policy of LSCC is hardcoded to allow any org member to write to LSCC, and so any org may forge a transaction with 2 {{NsReadWriteSet}} entries for LSCC, and use the second entry to perform arbitrary writes in the LSCC namespace.
h1. Consequences

This issue entirely breaks the endorsement model: any org in the channel may use this attack to overwrite the endorsement policy field of any chaincode definition. They can:
 # set any endorsement policy to be an accept-all policy, and subsequently modify any ledger key in any namespace directly, bypassing the chaincode
 # add themselves as members of any collection, triggering reconciliation and possibly learning about all past private data of any org (to be confirmed?)

h1. Proof of concept

Attached is a PoC for the attack using our integration tests. Just apply it on top of master, go to {{integration/nwo/}} and run tests. The PoC shows how a malicious organisation in the channel is able to overwrite the endorsement policy of a chaincode which originally required endorsement of 2 orgs. The endorsement policy is downgraded to an accept-all policy, at which point the malicious organisation is able to write arbitrary data into the chaincode namespace.;;;","10/Apr/19 11:59 PM;ales;[~manish-sethi]: I speculated in the consequences section that the malicious user can change collection definitions to their advantage, triggering reconciliation to learn about all private data in the namespace. Is that assumption correct?;;;","11/Apr/19 12:06 PM;manish-sethi;[~ales]: yes, I do not expect ledger not to process the change in the collection config as a legitimate one - as long as the transaction is marked `valid` by the validator.;;;","11/Apr/19 8:26 PM;mastersingh24;Wasn't this one of the reasons for doing the new lifecycle in the first place?
I believe it's already possible for a single org to change the endorsement policy for chaincode with the current lifecycle?;;;","11/Apr/19 10:14 PM;jyellick;[~mastersingh24] When you use the default instantiation policy (which all our users seem to do), any org admin can change your chaincode definition.  However, modifications were still prevented by unprivileged users, and if you specified an instantiation policy scoped to a particular org, you could restrict it further.  This attack represents a more fundamental and total break of LSCC, exploiting some of the already known broken-ness.  Because any unprivileged user may deploy a chaincode with an instantiation policy authorizing its own deployment, any user can commit to LSCC.  Combining this with the fact that any commit to LSCC may piggy-back arbitrary writes onto the latter portion of the writeset allows any user to modify any chaincode, bypassing all instanation policy checks which were protecting us to some extent.;;;","12/Apr/19 1:36 AM;ales;Exactly, the instantiation policy was there to ensure that only the original instantiator could modify the definition of a chaincode. Note that without the instantiation policy, collection configurations are entirely meaningless because we set a policy that restricts data movement, while allowing anyone to override it. Same for endorsement policies.

This vulnerability entirely bypasses that check, and lets any consortium member modify any chaincode definition (notably, its endorsement policy/collection configuration).;;;","27/Apr/19 3:30 AM;ales;Speaking of fixes: the simplest way to fix the issue is to add a fix in the validator code to perform deduplication of the 

{code:java}
NsRwset              []*NsReadWriteSet
{code}

array to make sure that no two entries may refer to the same namespace. Clearly the new check can only be deployed 
* as part of the 2.0 validator (so that it would be covered by the new 2.0 capability) 
* as part of previous validators, gated by a specific capability;;;","28/Jun/19 2:20 AM;wenjian;v1.4 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32115/]

v2.0 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32126/];;;","28/Jun/19 4:48 AM;wenjian;Below are log messages. Log file is attached as test.log.

^[[91m[e]^[[36m[org1.peer2]^[[0m ^[[31m2019-06-27 15:19:24.423 EDT [committer.txvalidator] validateTx -> ERRO 04c^[[0m VSCCValidateTx for transaction txId = 6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc returned error: duplicate namespace 'lscc' in txRWSet
^[[91m[e]^[[36m[org1.peer2]^[[0m ^[[34m2019-06-27 15:19:24.423 EDT [committer.txvalidator] Validate -> INFO 04d^[[0m [testchannel] Validated block [3] in 0ms
^[[91m[e]^[[36m[org1.peer2]^[[0m ^[[33m2019-06-27 15:19:24.423 EDT [valimpl] preprocessProtoBlock -> WARN 04e^[[0m Channel [testchannel]: Block [3] Transaction index [0] TxId [6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc] marked as invalid by committer. Reason code [ILLEGAL_WRITESET]
^[[91m[e]^[[91m[org2.peer2]^[[0m ^[[31m2019-06-27 15:19:24.423 EDT [committer.txvalidator] validateTx -> ERRO 049^[[0m VSCCValidateTx for transaction txId = 6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc returned error: duplicate namespace 'lscc' in txRWSet
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[31m2019-06-27 15:19:24.423 EDT [committer.txvalidator] validateTx -> ERRO 064^[[0m VSCCValidateTx for transaction txId = 6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc returned error: duplicate namespace 'lscc' in txRWSet
^[[91m[e]^[[91m[org2.peer2]^[[0m ^[[34m2019-06-27 15:19:24.423 EDT [committer.txvalidator] Validate -> INFO 04a^[[0m [testchannel] Validated block [3] in 0ms
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[34m2019-06-27 15:19:24.423 EDT [committer.txvalidator] Validate -> INFO 065^[[0m [testchannel] Validated block [3] in 0ms
^[[91m[e]^[[91m[org2.peer2]^[[0m ^[[33m2019-06-27 15:19:24.423 EDT [valimpl] preprocessProtoBlock -> WARN 04b^[[0m Channel [testchannel]: Block [3] Transaction index [0] TxId [6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc] marked as invalid by committer. Reason code [ILLEGAL_WRITESET]
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[33m2019-06-27 15:19:24.423 EDT [valimpl] preprocessProtoBlock -> WARN 066^[[0m Channel [testchannel]: Block [3] Transaction index [0] TxId [6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc] marked as invalid by committer. Reason code [ILLEGAL_WRITESET]
^[[91m[e]^[[37m[org2.peer1]^[[0m ^[[31m2019-06-27 15:19:24.423 EDT [committer.txvalidator] validateTx -> ERRO 049^[[0m VSCCValidateTx for transaction txId = 6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc returned error: duplicate namespace 'lscc' in txRWSet
^[[91m[e]^[[37m[org2.peer1]^[[0m ^[[34m2019-06-27 15:19:24.423 EDT [committer.txvalidator] Validate -> INFO 04a^[[0m [testchannel] Validated block [3] in 0ms
^[[91m[e]^[[37m[org2.peer1]^[[0m ^[[33m2019-06-27 15:19:24.423 EDT [valimpl] preprocessProtoBlock -> WARN 04b^[[0m Channel [testchannel]: Block [3] Transaction index [0] TxId [6b8ed1053fb8320e0ef6b69f7766ade80e968f5a1f4a5a5d49e7974c3af993dc] marked as invalid by committer. Reason code [ILLEGAL_WRITESET];;;","08/Aug/19 4:45 AM;denyeart;Addressed via FAB-15845;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve release process - Avoid manual triggerring of release and multiarch jobs,FAB-15130,39201,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,rameshthoomu,rameshthoomu,10/Apr/19 11:50 PM,22/Aug/19 1:49 AM,28/Oct/23 3:08 AM,22/Aug/19 1:49 AM,,,,,,,,,,,,,,,,,,fabric-release,,,,,,0,,,,,,"Existing release process required manual intervention to trigger release and mulitarch jobs. This required Jenkins permissions to a user to trigger these jobs manually but as per the Linux Foundation team, they don't want to give permissions to anyone outside of LF team.

Proposed Solution:

Create a pipeline script in Jenkins to publish images and binaries from merge job after a Release CR is merged. To do this, we need to add a flag in Makefile to identify a release CR and push images and binaries to nexus and DockerHub. This is applicable to all the releases like fabric, fabric-ca, fabric-chaincode-java, fabric-chaincode-node. This avoids publishing release artifiacts manually and creates a seamless release process.

We can achieve this with Jenkins pipeline flow.

We can include the above approach with what [~sykesm] was proposing on multibranch strategy.",,btl5037,denyeart,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10068,FAB-11236,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kb3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,rameshthoomu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Run ""Shellcheck"" on fabric shell scripts",FAB-15131,39202,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,rameshthoomu,rameshthoomu,10/Apr/19 11:54 PM,17/Apr/19 10:46 PM,28/Oct/23 3:08 AM,,v2.0.0,,,,,,,,,,,,,,,,,fabric-build,,,,,,0,,,,,,"Most of the shell scripts in fabric, fabric-ca, fabric-samples repos have shellcheck errors. It's always a good idea to run shellcheck on all the shell scripts.

See this url for more reference.
https://github.com/koalaman/shellcheck",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kbb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test daily pte test fails to install marbles02 cc,FAB-15132,39205,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,11/Apr/19 1:48 AM,19/Apr/19 6:10 AM,28/Oct/23 3:08 AM,19/Apr/19 6:10 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"In master branch, the fabric-test daily test suite PTE tests: passed 7 out of 8 tests on the days leading up to April 5th. The only failing test was the only one using marbles cc. For reference, here is the failure msg:

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-results-master-x86_64/155/testReport/systest_pte/Perf_Stress_CouchDB/test_FAB6813_4i_marbles_FAB8199_4q_FAB8200_4q_FAB8201_4q/]
{quote}#x1B[1B2019-04-05T02:00:32.669Z - #x1B[31merror#x1B[39m: [packager/Golang.js]: error while packaging /w/workspace/fabric-test-daily-pte-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02 2019-04-05T02:00:32.669Z - #x1B[31merror#x1B[39m: [Client.js]: installChaincode error ENOENT: no such file or directory, lstat '/w/workspace/fabric-test-daily-pte-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02' #x1B[31merror#x1B[39m: [2019-04-05T02:00:32.670Z PTE 0 main]: [chaincodeInstall] Failed to install chaincode in (testorgschannel2:PeerOrg1) due to error: message=ENOENT: no such file or directory, lstat '/w/workspace/fabric-test-daily-pte-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02', stack=Error: ENOENT: no such file or directory, lstat '/w/workspace/fabric-test-daily-pte-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02', errno=-2, code=ENOENT, syscall=lstat, path=/w/workspace/fabric-test-daily-pte-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/fabric/examples/chaincode/go/marbles02
{quote}
 ",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kbz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"17/Apr/19 2:46 AM;scottz;The marbles chaincodes have been removed from fabric/examples/. These are some versions of marbles that are available. One option, used in some of the behave tests: since marbles02 is a subset of marbles02_private, we could simply use the marbles02_private (go) chaincode in fabric-test for any tests that require marbles02 or marbles02_private.

 
 * fabric-samples/chaincode/marbles02/go
 * fabric-samples/chaincode/marbles02/node
 * fabric-samples/chaincode/marbles02_private/go

 
 * fabric-test/chaincodes/marbles/node
 * fabric-test/chaincodes/marbles02_private    //go version only

 

First thought, at a high level, the objective is to change all the scripts and test files in the fabric-test/tools/ (NL or PTE or whatever directories) to change from using marbles or marbles02_private in the fabric/examples/ directory 
 * fabric/examples/chaincode/go/marbles02 (or any relative references to marbles02)
 * fabric/examples/chaincode/marbles02_private/go/

to
 * fabric-test/chaincodes/marbles02_private

 

 

NOTE: the couchdb index tests must use the marbles02* chaincodes in fabric-samples, since they contain the required folder for meta information .../go/META_INF/ :
 * fabric-samples/chaincode/marbles02/go/ , or, 
 * fabric-samples/chaincode/marbles02_private/go/

{quote}
PTE/CITest/scenarios/FAB-8251.sh

PTE/CITest/scenarios/FAB-8252.sh

PTE/CITest/README.md (only _some_ of the changes here)

and other dependencies too:

PTE/CITest/scenarios/FAB-8694-4i

PTE/CITest/scenarios/FAB-9575-4i

PTE/CITest/scenarios/FAB-6813-4i
{quote}

*Or better yet*: the  META_INF directory with index files could be copied into fabric-test/chaincodes/marbles02_private/ , so marbles02_private can be used for every test, and so the indexing files will be used for every test. (Note it is a different directory structure under marbles02/go/ than under marbles02_private/go/, so the paths used in the marbles02 tests should be changed too if consolidating with marbles02_private).
;;;","19/Apr/19 1:07 AM;scottz;Decided NOT to update and move all chaincodes into fabric-test/chaincodes from fabric/examples and fabric-samples/chaincode. That can be done with another jira task, if necessary. Instead, I decided to fix the chaincodePath as painlessly as possible. Most were moved from fabric/examples to fabric-samples, so that is the update we will make for marbles chaincodes. I also found some example02 paths that needed changing for rarely-run test files in fabric-test, so I fixed them too.

https://gerrit.hyperledger.org/r/#/c/31016/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify multiarch scripts to publish images to Nexus,FAB-15133,39206,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sambhavdutt,sambhavdutt,11/Apr/19 1:59 AM,29/May/19 8:00 PM,28/Oct/23 3:08 AM,29/May/19 8:00 PM,,,,,,,,,,,,,,v1.4.1,,,,fabric-build,,,,,,0,,,,,,,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kc7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify multiarch script in fabric to publish images to Nexus,FAB-15134,39207,39206,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,11/Apr/19 2:05 AM,24/Apr/19 3:21 AM,28/Oct/23 3:08 AM,24/Apr/19 3:21 AM,v1.4.1,,,,,,,,,,,,,v1.4.2,,,,fabric-build,,,,,,0,,,,,,Update the multiarch script to publish the images to Nexus.,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kcf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/19 11:53 AM;sambhavdutt;https://gerrit.hyperledger.org/r/#/c/30864/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test behave tests debug printlogs should be removed,FAB-15135,39208,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,11/Apr/19 2:06 AM,16/Apr/19 11:54 PM,28/Oct/23 3:08 AM,16/Apr/19 11:54 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"In some behave tests, we are dumping out

{{14:29:42 Proposal Response length: 1}}

{{14:29:42 Proposal Response payload '}}

and lots of data

before printing “All good”. 

The output is a huge number of lines.

The print statements are from the sdk wrapper. 

Those had been added for debug purposes, but were never removed.

We should stop printing the entire payload, with its non-text characters.

My suspicion is that these may be messing up the jenkins xml reader, so it is time to remove them, to eliminate this as a possible cause of FABCI-331.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15292,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kcn:",,,,Unset,Unset,,"Push a changeset into fabric-test to execute the verify job.
Or, execute the daily test suite behave tests.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"11/Apr/19 5:35 AM;scottz;[https://gerrit.hyperledger.org/r/#/c/30878/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify multiarch script in fabric-chaincode-java to publish javaenv to Nexus,FAB-15137,39210,39206,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sambhavdutt,sambhavdutt,sambhavdutt,11/Apr/19 4:24 AM,24/Apr/19 6:06 AM,28/Oct/23 3:08 AM,24/Apr/19 6:06 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Update the multiarch script to publish the javaenv to Nexus.,,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kd3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/19 11:56 AM;sambhavdutt;https://gerrit.hyperledger.org/r/#/c/30877/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow new lifecycle to invoke listeners for the events when a chaincode becomes invocable,FAB-15138,39216,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,11/Apr/19 11:54 AM,18/May/19 11:44 PM,28/Oct/23 3:08 AM,18/May/19 11:44 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ke7:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/19 8:05 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/30884/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Run staticcheck and fix errors,FAB-15139,39221,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,11/Apr/19 8:33 PM,16/Apr/19 4:32 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,1,help-wanted,hygiene,,,,"Run staticcheck on packages / folders and fix errors.

{{go get -u honnef.co/go/tools/cmd/staticcheck}}
https://staticcheck.io/",,crashmark93,mastersingh24,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ken:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),crashmark93,mastersingh24,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Apr/19 8:34 PM;mastersingh24;For those who want to help, run staticcheck on a package, create a task under this story and then fix any issues you can.;;;","16/Apr/19 4:32 AM;MHBauer;Is there something to enable on the build to run on fixed packages, to keep them fixed? I'd be willing to make the cleanup happen if we can enforce it to stay cleaned up.

 

There's a lot of ` error strings should not be capitalized (ST1005)` which makes me think it's a very common 'mistake' but hardly something that could be considered a hard error.

 

On master dd8961c95bba5161cda63e208f4f10770ef44212

$ staticcheck ./... > staticcheck.txt

$ wc -l staticcheck.txt
 1077 staticcheck.txt

$ grep 'error strings should not be capitalized (ST1005)' staticcheck.txt | wc -l
 429



About 40% are capitalization issues. Probably masking deeper issues.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck - core/comm,FAB-15140,39222,39221,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,11/Apr/19 8:36 PM,11/Apr/19 9:59 PM,28/Oct/23 3:08 AM,11/Apr/19 9:59 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"core/comm/server.go:49:25: error strings should not be capitalized (ST1005)
core/comm/server.go:251:20: error strings should not be capitalized (ST1005)
core/comm/server.go:255:20: error strings should not be capitalized (ST1005)
core/comm/server.go:298:20: error strings should not be capitalized (ST1005)
core/comm/server.go:302:20: error strings should not be capitalized (ST1005)
core/comm/server.go:328:21: error strings should not be capitalized (ST1005)
core/comm/server_test.go:200:2: var orgCAKey is unused (U1000)
core/comm/server_test.go:206:2: var childCAKey is unused (U1000)",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kev:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/19 8:54 PM;mastersingh24;https://gerrit.hyperledger.org/r/30886;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kill zombie code in chaincode/platforms,FAB-15142,39226,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,11/Apr/19 10:58 PM,01/May/19 5:55 AM,28/Oct/23 3:08 AM,01/May/19 5:55 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kfb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Apr/19 11:29 PM;sykesm;remote:   https://gerrit.hyperledger.org/r/30880 [FAB-15142] move IsCodeExist to caller
remote:   https://gerrit.hyperledger.org/r/30881 [FAB-15142] kill dead hashing code in platform;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Service discovery TestDifferentMessages fails in CI intermitently ,FAB-15143,39227,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,C0rWin,C0rWin,11/Apr/19 11:06 PM,07/May/19 6:32 AM,28/Oct/23 3:08 AM,13/Apr/19 5:19 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{code}
03:31:26 2019-04-11 03:30:05.854 UTC [discovery] NewService -> INFO 001 Created with config TLS: true, auth cache disabled
03:31:26 2019-04-11 03:30:05.868 UTC [discovery] chaincodeQuery -> ERRO 002 Failed constructing descriptor for chaincode chaincodes:<name:""mycc"" > ,: cannot satisfy any principal combination
03:31:26 --- FAIL: TestDifferentMessages (0.00s)
03:31:26     <autogenerated>:1: 
03:31:26             Error Trace:    signer_test.go:79
03:31:26             Error:          Should be true
03:31:26             Test:           TestDifferentMessages
03:31:26 FAIL
03:31:26 coverage: 92.9% of statements
{code}",,C0rWin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14948,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kfj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,yacovm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Apr/19 4:37 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/30928/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Assorted orderer serviceability fixes,FAB-15144,39248,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,12/Apr/19 12:39 AM,17/Jun/19 10:00 PM,28/Oct/23 3:08 AM,12/Jun/19 6:07 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,Implementing some lessons learned from some recent support interactions.,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15031,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00knj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Expose last block offset through Kafka metrics,FAB-15146,39250,39248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,12/Apr/19 12:46 AM,17/Jun/19 11:12 AM,28/Oct/23 3:08 AM,07/Jun/19 2:17 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"When attempting to recover from a Kafka failure, it's important to be able to understand the last offset processed and committed into a block.  Presently it can only be scraped from the logs, but being able to grammatically access this information would be very useful.",,jyellick,kchristidis,sykesm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00knz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,kchristidis,sykesm,ymlbright,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 2:37 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/30896;;;","17/Jun/19 11:12 AM;kchristidis;Link above is for master.

1.4.2 branch: [https://gerrit.hyperledger.org/r/c/fabric/+/31793];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow deliver to request ignoring of consenter errors.,FAB-15147,39252,39248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,12/Apr/19 1:28 AM,12/Jun/19 5:37 AM,28/Oct/23 3:08 AM,21/May/19 2:37 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"When debugging an orderer problem, it can be critical to pull the latest block for a channel, but, the deliver service will refuse to deliver blocks if there is a problem with consensus.  We need to add a flag to the deliver service allowing best effort pulling of blocks, despite consensus errors.",,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kof:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 2:37 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/30899;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance configtxlator to support decoding block metadata,FAB-15148,39253,39248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,jyellick,jyellick,jyellick,12/Apr/19 1:30 AM,12/Apr/19 10:55 AM,28/Oct/23 3:08 AM,12/Apr/19 10:55 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"Presently, configtxlator only displays block metadata as bytes, which, can ultimately be mapped to consenter metadata, but requires too many steps with intimate system knowledge for users to decode the metadata.",,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kon:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Apr/19 10:55 AM;jyellick;Because of the inconsistent encoding of the block metadata, especially with respect to the validation mask from the statedb, this is not practical to implement without significantly restructuring the protolator code.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update fabric master references to v1.4.1,FAB-15149,39254,38962,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,12/Apr/19 1:35 AM,12/Apr/19 5:25 AM,28/Oct/23 3:08 AM,12/Apr/19 5:25 AM,,,,,,,,,,,,,,v1.4.1,,,,,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kov:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race encountered in etcdraft unit tests,FAB-15151,39259,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,sykesm,sykesm,12/Apr/19 3:17 AM,22/Apr/19 10:26 AM,28/Oct/23 3:08 AM,22/Apr/19 10:26 AM,v1.4.1,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,ci-flake,race,,,,"{code}
==================
WARNING: DATA RACE
Write at 0x00c0004ebe58 by goroutine 79:
  github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.(*network).elect()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:3915 +0xa47
  github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.glob..func1.4.4.5()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1660 +0x136
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:110 +0xbd
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).run()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/runner.go:64 +0x107
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*SetupNode).Run()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes/setup_nodes.go:15 +0x87
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).runSample()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:181 +0x2a8
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec.(*Spec).Run()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/spec/spec.go:138 +0x142
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpec()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:198 +0x172
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).runSpecs()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:168 +0x217
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner.(*SpecRunner).Run()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/specrunner/spec_runner.go:64 +0x101
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite.(*Suite).Run()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/suite/suite.go:62 +0x6a2
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecsWithCustomReporters()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:220 +0x33a
  github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo.RunSpecs()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/ginkgo_dsl.go:201 +0x99
  github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.TestEtcdraft()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/etcdraft_suite_test.go:20 +0x120
  testing.tRunner()
      /usr/local/Cellar/go/1.12.3/libexec/src/testing/testing.go:865 +0x163

Previous read at 0x00c0004ebe58 by goroutine 83:
  github.com/hyperledger/fabric/orderer/consensus/etcdraft_test.(*network).addChain.func5()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:3727 +0xa1
  github.com/hyperledger/fabric/orderer/consensus/etcdraft/mocks.(*FakeBlockPuller).HeightsByEndpoints()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/mocks/mock_blockpuller.go:74 +0x314
  github.com/hyperledger/fabric/orderer/common/cluster.latestHeightAndEndpoint()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/cluster/replication.go:493 +0x59
  github.com/hyperledger/fabric/orderer/common/cluster.PullLastConfigBlock()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/common/cluster/replication.go:464 +0x49
  github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*evictionSuspector).confirmSuspicion()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/util.go:613 +0x226
  github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*evictionSuspector).confirmSuspicion-fm()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/util.go:603 +0x4b
  github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*PeriodicCheck).conditionFulfilled()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/util.go:572 +0x164
  github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*PeriodicCheck).check()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/util.go:552 +0x98
  github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*PeriodicCheck).check-fm()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/util.go:550 +0x41

Goroutine 79 (running) created at:
  testing.(*T).Run()
      /usr/local/Cellar/go/1.12.3/libexec/src/testing/testing.go:916 +0x65a
  testing.runTests.func1()
      /usr/local/Cellar/go/1.12.3/libexec/src/testing/testing.go:1157 +0xa8
  testing.tRunner()
      /usr/local/Cellar/go/1.12.3/libexec/src/testing/testing.go:865 +0x163
  testing.runTests()
      /usr/local/Cellar/go/1.12.3/libexec/src/testing/testing.go:1155 +0x523
  testing.(*M).Run()
      /usr/local/Cellar/go/1.12.3/libexec/src/testing/testing.go:1072 +0x2eb
  main.main()
      _testmain.go:130 +0x334

Goroutine 83 (finished) created at:
  time.goFunc()
      /usr/local/Cellar/go/1.12.3/libexec/src/time/sleep.go:169 +0x51
==================
...
--- FAIL: TestEtcdraft (47.26s)
    testing.go:809: race detected during execution of test
{code}

This is on current master - f18b91a3c475b43b199144302c806a7b13fd89a4",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,f18b91a3c475b43b199144302c806a7b13fd89a4,Unset,No,,,"1|i00kpr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/19 6:32 PM;guoger;https://gerrit.hyperledger.org/r/c/30917/ master
https://gerrit.hyperledger.org/r/c/30955/ release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add flag to peer channel fetch to allow best effort block retrieval,FAB-15152,39260,39248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,12/Apr/19 3:44 AM,12/Jun/19 5:40 AM,28/Oct/23 3:08 AM,12/Jun/19 5:40 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-peer,,,,,,0,,,,,,,,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kpz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 2:38 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/30904;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Have cluster replication utilize best effort block deliver,FAB-15153,39261,39248,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,12/Apr/19 3:53 AM,12/Jun/19 5:39 AM,28/Oct/23 3:08 AM,10/Jun/19 4:56 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,,,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kq7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 2:39 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/30907;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestSend/Send_step_succeed failures in CR unit tests,FAB-15155,39263,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,12/Apr/19 5:38 AM,02/Jul/19 12:11 AM,28/Oct/23 3:08 AM,02/Jul/19 12:11 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,ipm,,,,"{code}
4:11:38 --- FAIL: TestSend (0.02s)
14:11:38 2019-04-11 18:10:11.485 UTC [test] RetrieveVerifier -> ERRO 302 No verifier for channel mychannel exists
14:11:38     --- FAIL: TestSend/Send_step_succeed (0.00s)
14:11:38         <autogenerated>:1: 
14:11:38             	Error Trace:	rpc_test.go:249
14:11:38             	Error:      	Not equal: 
14:11:38             	            	expected: 1
14:11:38             	            	actual  : 2
14:11:38             	Test:       	TestSend/Send_step_succeed
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11466/consoleFull",,denyeart,dereckluo,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Jul/19 12:10 AM;dereckluo;screenshot-1.png;https://jira.hyperledger.org/secure/attachment/17375/screenshot-1.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mth:c",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dereckluo,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/19 6:00 AM;denyeart;TestSend in orderer/common/cluster/rpc_test.go;;;","02/Jul/19 12:11 AM;dereckluo;Focused on the test, and re-ran for 5000 times. Test flake was not shown, this flake might be resolved by recent code changes. 
 !screenshot-1.png|thumbnail! 
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
can we replace couch/level DB with mongo db in hyperledger Fabric 1.4,FAB-15156,39268,,Story,In Progress,FAB,Fabric,software,denyeart,,,High,,,Ramya140525,Ramya140525,12/Apr/19 1:30 PM,29/Apr/19 8:07 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,can we replace couch/level DB with mongo db in hyperledger Fabric 1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00krj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Explicit error out when !TLSEnabled && isClusterType,FAB-15157,39269,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,guoger,guoger,12/Apr/19 4:13 PM,13/Apr/19 4:36 AM,28/Oct/23 3:08 AM,13/Apr/19 3:25 AM,v1.4.1,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"Current panic stack is:
{code}
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0xacb884]

goroutine 1 [running]:
github.com/hyperledger/fabric/core/comm.(*GRPCServer).SetClientRootCAs(0xc00017c000, 0xc000498240, 0x4, 0x6, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/core/comm/server.go:326 +0x1b4
github.com/hyperledger/fabric/orderer/common/server.updateTrustedRoots(0xc000430c00, 0x11563a0, 0xc000132700, 0xc00000e320, 0x1, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:752 +0x159a
github.com/hyperledger/fabric/orderer/common/server.Start.func1(0xc000132700)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:151 +0xf4
github.com/hyperledger/fabric/common/channelconfig.(*BundleSource).Update(0xc0009c0210, 0xc000132700)
	/opt/gopath/src/github.com/hyperledger/fabric/common/channelconfig/bundlesource.go:46 +0x7c
github.com/hyperledger/fabric/common/channelconfig.NewBundleSource(0xc000132700, 0xc00000e328, 0x1, 0x1, 0xc00035f020)
	/opt/gopath/src/github.com/hyperledger/fabric/common/channelconfig/bundlesource.go:38 +0x72
github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).newLedgerResources(0xc000498480, 0xc000350b90, 0xc000350b90)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:354 +0x379
github.com/hyperledger/fabric/orderer/common/multichannel.(*Registrar).Initialize(0xc000498480, 0xc00032d230)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/multichannel/registrar.go:158 +0x242
github.com/hyperledger/fabric/orderer/common/server.initializeMultichannelRegistrar(0xc00003fe00, 0xc000430300, 0xc00042c1d0, 0x0, 0xc0004982d0, 0x1b25180, 0xc00042c320, 0x2, 0x2, 0xc00042c330, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:585 +0x315
github.com/hyperledger/fabric/orderer/common/server.Start(0x1013e09, 0x5, 0xc000540900)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:158 +0x7a3
github.com/hyperledger/fabric/orderer/common/server.Main()
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1ce
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20
{code}
which is not very friendly.

wdyt [~yacovm]",,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00krr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,yacovm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/19 7:04 PM;yacovm;Yes I am aware of it :) 

But fine, I'll fix it. ;;;","12/Apr/19 8:50 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/30918/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Token (base support): History,FAB-15158,39270,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,12/Apr/19 4:36 PM,13/Jan/20 11:39 PM,28/Oct/23 3:08 AM,13/Jan/20 11:39 PM,,,,,,,,,,,,,,,,,,,,,,,,0,fabtoken,,,,,This epic aims at allowing a end-user to display the history of their transactions. The displayed history will be implemented in such a way that it emulates bank statements.,,geahaad,KaoutarEL,qsmen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,https://docs.google.com/presentation/d/1PVwRgqFTozms0vG5bQ_QklX0UyEAP66hfct3OymhhH4/edit?usp=sharing,Unset,Unset,Unset,ghx-label-10,,Fabtoken (base support): History ,To Do,No,,Unset,No,,,"1|i00krz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),geahaad,KaoutarEL,qsmen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
_lifecycle should not be defined by default on a 1.4 channel,FAB-15159,39271,39077,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,ales,ales,ales,12/Apr/19 5:11 PM,12/Apr/19 5:11 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"ChaincodeDefinitionIfDefined by default returns a definition for _lifecycle, but this is a problem because on a 1.4 channel, 1.4 binaries will not have such def whereas 2.0 binaries will. A capability check is required",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ks7:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race in Raft chain,FAB-15160,39272,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,12/Apr/19 6:27 PM,27/May/19 4:10 PM,28/Oct/23 3:08 AM,27/May/19 4:10 PM,v1.4.1,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"[Update RaftIndex in BlockMetadata|https://github.com/hyperledger/fabric/blob/6c005dd53448d0a3f70a816b79749e5d9ea433ae/orderer/consensus/etcdraft/chain.go#L1244] should be guarded by Lock as well, since it potentially races with [clone of BlockMetadata|https://github.com/hyperledger/fabric/blob/6c005dd53448d0a3f70a816b79749e5d9ea433ae/orderer/consensus/etcdraft/util.go#L173]",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ksf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Apr/19 6:33 PM;guoger;[https://gerrit.hyperledger.org/r/c/30916];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Client: display history of transactions,FAB-15161,39273,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,12/Apr/19 8:53 PM,13/Jan/20 11:39 PM,28/Oct/23 3:08 AM,13/Jan/20 11:39 PM,,,,,,,,,,,,,,,,,,,,,,,,0,fabtoken,,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15158,,,No,,Unset,No,,,"1|i00ksn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prover Server: display history of transactions,FAB-15162,39274,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,12/Apr/19 8:54 PM,13/Jan/20 11:39 PM,28/Oct/23 3:08 AM,13/Jan/20 11:39 PM,,,,,,,,,,,,,,,,,,,,,,,,0,fabtoken,,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15158,,,No,,Unset,No,,,"1|i00ksv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
transactor: display history of transactions,FAB-15163,39275,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,KaoutarEL,KaoutarEL,KaoutarEL,12/Apr/19 8:54 PM,13/Jan/20 11:39 PM,28/Oct/23 3:08 AM,13/Jan/20 11:39 PM,,,,,,,,,,,,,,,,,,,,,,,,0,fabtoken,,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15158,,,No,,Unset,No,,,"1|i00kt3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ChaincodeData and CDSData protos,FAB-15164,39284,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,GuillaumeCisco,GuillaumeCisco,GuillaumeCisco,13/Apr/19 12:09 AM,14/Jan/20 12:31 AM,28/Oct/23 3:08 AM,14/Jan/20 12:31 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Add new ChaincodeData and CDSData protos for correctly handling return from an instantiation chaincode process.

It follows [https://lists.hyperledger.org/g/fabric/topic/30520766#5801] discussion.",,GuillaumeCisco,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kuf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),GuillaumeCisco,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Apr/19 12:22 AM;GuillaumeCisco;[https://gerrit.hyperledger.org/r/#/c/30924/];;;","21/Apr/19 7:02 PM;mastersingh24;The real question should be why are we actually returning this at all?;;;","21/Apr/19 7:16 PM;GuillaumeCisco;Yes, why?
Is there any more information we can handle from a correct chaincode instantiation?;;;","14/Jan/20 12:31 AM;sykesm;Abandoned;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add lifecycle visuals,FAB-15165,39287,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,13/Apr/19 1:28 AM,24/Jul/19 9:58 PM,28/Oct/23 3:08 AM,24/Jul/19 9:58 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,Adding diagrams to documentation to help clarify the flow and concepts,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/19 10:43 AM;negupta;LifecycleDiagrams.pptx;https://jira.hyperledger.org/secure/attachment/17113/LifecycleDiagrams.pptx",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzwi",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/19 1:17 AM;negupta;https://gerrit.hyperledger.org/r/#/c/30989/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE queryblock includes the last block specified,FAB-15166,39288,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,13/Apr/19 4:40 AM,16/Apr/19 4:58 AM,28/Oct/23 3:08 AM,16/Apr/19 4:58 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,PTE queryblock includes the last block specified in the json.,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00kvb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"15/Apr/19 10:21 PM;dongming;https://gerrit.hyperledger.org/r/#/c/30929/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add TLS Support,FAB-15167,39289,,Story,In Progress,FAB,Fabric,software,denyeart,,,Medium,,muralisr,muralisr,muralisr,13/Apr/19 5:02 AM,13/Apr/19 5:02 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"With TLS config support in previous tasks, this story completes the TLS support by reading in the TLS creds and setting up TLS connection.",,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13582,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00kvj:",,,,Unset,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
hook TLS configuration,FAB-15168,39290,39289,Sub-task,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,muralisr,muralisr,muralisr,13/Apr/19 5:10 AM,18/Jul/19 1:45 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,This does the basic configuration-to-flow hooks but stubs out `TLS=true` awaiting integration test.,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kvr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TLS integration test,FAB-15169,39291,39289,Sub-task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,asaurabh,muralisr,muralisr,13/Apr/19 5:11 AM,18/Jul/19 1:53 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kvz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),muralisr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Channel Client Query Call benchmarks,FAB-15170,39293,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Baha-sk,Baha-sk,Baha-sk,13/Apr/19 6:38 AM,17/Apr/19 12:26 PM,28/Oct/23 3:08 AM,17/Apr/19 12:26 PM,,,,,,,,,,,,,,,,,,fabric-sdk-go,,,,,,0,,,,,,"Currently the Channel Client Benchmarks are done for Execute call, include Query calls as well.",,Baha-sk,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kwf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Baha-sk,,,,,,,,,,,,,,,,dependabot/go_modules/golang.org/x/crypto-0.1.0,dependabot/go_modules/test/performance/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/net-0.7.0,main,dependabot/go_modules/github.com/prometheus/client_golang-1.11.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
X509KeyPair has checked the length of cert.Certificate,FAB-15171,39297,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ZZMarquis,ZZMarquis,14/Apr/19 9:09 AM,15/Apr/19 6:10 PM,28/Oct/23 3:08 AM,15/Apr/19 6:10 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,,,,,,"in function GenerateCertificatesOrPanic(gossip/comm/crypto.go), X509KeyPair has checked the length of cert.Certificate, no need to check it again",,ZZMarquis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kxb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ZZMarquis,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"On maintenance mode, selectively block broadcast and deliver",FAB-15172,39298,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/Apr/19 7:54 PM,12/Jun/19 12:52 AM,28/Oct/23 3:08 AM,22/May/19 4:35 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"When maintenance mode is set, block broadcast requests:
 * block new channel creation
 * block all regular messages
 * block config updates that are not signed by oderer org admin

On maintainenece mode, block deliver requests unless they are coming from an orderer admin client, i.e. block requests from peers.

This is done by: 
- changing the sigfilter such that in maintenance mode it requires an orderer org admin signature. This will block both Broadcast and Deliver requests, unless signed by orderer admin.
- the msgprocessor ProcessNormalMsg(...) will reject all messages in maintenance mode
- the systemchannel filter will reject new channel creation in maintenance mode.
",,jyellick,sykesm,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kxj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,tock,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Validate config transitions into, in, and out-of maintenance mode",FAB-15173,39299,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/Apr/19 7:56 PM,20/Jun/19 1:01 PM,28/Oct/23 3:08 AM,04/Jun/19 11:29 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Entry into maintenance mode should not be accompanied with additional config changes, because the whole point of maintenance mode it to first create a stable and safe backup point, with a good configuration. In particular, it should not be allowed change the concesus type together with entry or exit from maintenance mode. Changing the consensus type should only be done in maintenance mode. 

In addition the type of consensus type transitions should be checked - currently we only support kafka to raft.

* Entry: Prevent transition into maintenance mode, i.e. a change in ConsensusType.State, together with change in ConsensusType.Type
* Prevent changes to ConsensusType.Type unless in maintenance mode
* Exit: Prevent transition out-of maintenance mode, i.e. a change in ConsensusType.State, together with change in ConsensusType.Type

This is achieved by adding a new filter - the maintenance-filter - which is only evaluated on ProcessesConfigUpdate(). This is unlike all other filters, which are evaluated on both normal and config messages. For that end it is added to a separate  Rule field in the standardchannel.go. This Rule can later be extended to a <configFilters []Rule> array (slice) if we find we need more filters that apply to config only.
",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kxr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change boot order to detect correct consenter type,FAB-15174,39300,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/Apr/19 7:57 PM,12/Jun/19 12:49 AM,28/Oct/23 3:08 AM,30/Apr/19 11:41 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Change the orderer server boot sequence to determine clusterType from the system channel last config block or the bootstrap block, depending on which block number is higher.

We do this because after migration the bootstrap file will have ConsensusType.Type=""kafka"", whereas the system channel last config block will have ConsensusType.Type=""etcdraft"". If clusterType is not set to ""etcdraft"" at this point,  the creation of a raft consenter will fail later on.
",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kxz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consensus type migration integration tests,FAB-15175,39301,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/Apr/19 7:58 PM,15/Jun/19 10:19 PM,28/Oct/23 3:08 AM,04/Jun/19 3:13 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,,,,,,"Four test cases.

Two test cases of the migration flow on the kafka side. These will later be extended to check the filtering capability once implemented.
    
Two test cases that execute the migration flow all the way from a kafka system to a functioning raft system. One test case with a single node, one test case with 3 orderers.
  
",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ky7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"On consensus-type change, reset config block metadata on blockwriter",FAB-15176,39302,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,14/Apr/19 11:51 PM,08/Jun/19 1:43 AM,28/Oct/23 3:08 AM,01/May/19 3:03 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In the blockwriter, detect a consensus type change by comparing the current config with the incoming config.
When that happens, set the block consenter metadata to nil.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kyf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"In the same namespace, kubectl can get the pod, fabric cannot",FAB-15177,39303,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Environment Issue,,LiuDui,LiuDui,15/Apr/19 1:06 PM,30/Jun/19 7:43 PM,28/Oct/23 3:08 AM,30/Jun/19 7:43 PM,,,,,,,,,,,,,,,,,,fabric-common,,,,,,0,common-components,,,,,"*Use kubectl to check the pod using the fabric network (attention: alertmanager-main-1 pod)*

```shell
[root@master183 ~]# kubectl get pod -n monitoring -o wide |grep 10.10.
alertmanager-main-0 2/2 Running 17 3h31m 10.10.20.17 node184.boms.com <none>
alertmanager-main-1 2/2 Running 0 37m 10.10.20.47 node184.boms.com <none>
alertmanager-main-2 2/2 Running 0 154m 10.10.20.12 node66.boms.com <none>
grafana-677c45988d-68xdn 1/1 Running 0 152m 10.10.20.33 node66.boms.com <none>
kube-state-metrics-867bcc4558-nz64j 4/4 Running 0 153m 10.10.20.24 node66.boms.com <none>
prometheus-k8s-0 3/3 Running 2 3h2m 10.10.20.28 node66.boms.com <none>
prometheus-k8s-1 3/3 Running 1 3h44m 10.10.20.8 node184.boms.com <none>
prometheus-operator-84cd85974b-rl9jx 1/1 Running 0 3h31m 10.10.20.38 node184.boms.com <none>
```

*Using fabric to view the pod under monitoring namespaces, no alertmanager-main-1 pod was found*

```
[root@master183 ~]# fabric-admin get pod -n monitoring
NAMESPACE PODNAME NETWORK IP GATEWAY MASK VLANID OWNERKIND OWNERNAME
-------- -------- -------- -------------- -------------- --- ----- -------- --------
monitoring alertmanager-main-0 default 10.10.20.17 10.10.20.1 24 200 
monitoring alertmanager-main-2 default 10.10.20.12 10.10.20.1 24 200 
monitoring grafana-677c45988d-68xdn default 10.10.20.33 10.10.20.1 24 200 
monitoring kube-state-metrics-867bcc4558-nz64j default 10.10.20.24 10.10.20.1 24 200 
monitoring kube-state-metrics-867bcc4558-s6rm6 default 10.10.20.14 10.10.20.1 24 200 
monitoring prometheus-k8s-0 default 10.10.20.28 10.10.20.1 24 200 
monitoring prometheus-k8s-1 default 10.10.20.8 10.10.20.1 24 200 
monitoring prometheus-operator-84cd85974b-khzqp default 10.10.20.34 10.10.20.1 24 200 
monitoring prometheus-operator-84cd85974b-rl9jx default 10.10.20.38 10.10.20.1 24 200 
```

```
fabric version: fabric-node-0.0.6rc16

[root@master83 ~]# kubectl version 
Client Version: version.Info

{Major:""1"", Minor:""12"", GitVersion:""v1.12.6"", GitCommit:""ab91afd7062d4240e95e51ac00a18bd58fddd365"", GitTreeState:""clean"", BuildDate:""2019-02-26T12:59:46Z"", GoVersion:""go1.10.8"", Compiler:""gc"", Platform:""linux/amd64""}
Server Version: version.Info

{Major:""1"", Minor:""12"", GitVersion:""v1.12.6"", GitCommit:""ab91afd7062d4240e95e51ac00a18bd58fddd365"", GitTreeState:""clean"", BuildDate:""2019-02-26T12:49:28Z"", GoVersion:""go1.10.8"", Compiler:""gc"", Platform:""linux/amd64""}
```",,denyeart,LiuDui,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kyn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,LiuDui,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/19 1:13 PM;LiuDui;Dear developers, since this is my first time here, there may be some wrong tags, for which I am sorry. Who should be assigned the problem?;;;","24/Apr/19 7:02 AM;denyeart;[~LiuDui] Can you clarify the request, are you requesting something from Fabric open source? Or something from a Fabric operator/vendor?;;;","16/Jun/19 2:41 AM;mastersingh24;[~LiuDui]  - are you sure you have the right project?  Are you by chance using something from the [fabric8|http://fabric8.io/]?;;;","30/Jun/19 7:42 PM;mastersingh24;Closing as this does not seem related at all to Fabric.  See comment above;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rm trailing whitespace when parsing go version in check_go_version.sh,FAB-15178,39304,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,guoger,guoger,guoger,15/Apr/19 1:13 PM,16/Apr/19 11:50 AM,28/Oct/23 3:08 AM,16/Apr/19 11:50 AM,,,,,,,,,,,,,,,,,,fabric-ci,,,,,,0,,,,,,"when required go version is parsed from {{ci.properties}}, there is a trailing {{\r}}, which prevents correct version being parsed.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kyv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Apr/19 1:27 PM;guoger;https://gerrit.hyperledger.org/r/c/30936/;;;","16/Apr/19 11:50 AM;guoger;Local line ending problem, false alert.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Flaky IT: Gossip Test State transfer test [It] solo network with 2 orgs, 2 peers each, should sync from the peer if no orderer available",FAB-15179,39306,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,guoger,guoger,15/Apr/19 4:43 PM,16/Apr/19 8:15 AM,28/Oct/23 3:08 AM,16/Apr/19 8:15 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8173/consoleFull

{code}
14:43:13 ------------------------------
14:43:13 • Failure [45.574 seconds]
14:43:13 Gossip Test State transfer test [It] solo network with 2 orgs, 2 peers each, should sync from the peer if no orderer available 
14:43:13 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:90
14:43:13 
14:43:13   Timed out after 10.058s.
14:43:13   Expected
14:43:13       <int>: 4
14:43:13   to equal
14:43:13       <int>: 14
14:43:13 
14:43:13   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:160
14:43:13 ------------------------------
14:43:13 
14:43:13 
14:43:13 Summarizing 1 Failure:
14:43:13 
14:43:13 [Fail] Gossip Test State transfer test [It] solo network with 2 orgs, 2 peers each, should sync from the peer if no orderer available 
14:43:13 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:160
14:43:13 
14:43:13 Ran 1 of 1 Specs in 45.609 seconds
14:43:13 FAIL! -- 0 Passed | 1 Failed | 0 Pending | 0 Skipped
{code}",,C0rWin,guoger,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kzb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,guoger,wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/19 3:30 AM;wlahti;Also hit by https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8186/;;;","16/Apr/19 3:39 AM;wlahti;And hit again already: https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8187/console;;;","16/Apr/19 7:14 AM;C0rWin; https://gerrit.hyperledger.org/r/30951 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add to BYFN Raft channel creation with subset of orderers,FAB-15180,39308,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,tock,tock,15/Apr/19 5:58 PM,19/Jun/19 7:56 PM,28/Oct/23 3:08 AM,19/Jun/19 7:56 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Add to fabric-samples  first-network  a demonstration of how to create a channel with a subset of orderers. That is, run the 

bq. /byfn.sh up -o etcdraft

 to start a 5 node network. Then create a new script 

bq. ./raftop.sh up

that creates a new channel ""mychannel2"" with 3 orderers only.
",,sykesm,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kzj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/May/19 9:46 PM;sykesm;https://gerrit.hyperledger.org/r/c/30938/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Introduce a Consensus MetadataValidator for config updates.,FAB-15181,39309,38793,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adarshsaraf123,adarshsaraf123,adarshsaraf123,15/Apr/19 7:18 PM,28/Jun/19 3:58 AM,28/Oct/23 3:08 AM,28/Jun/19 3:58 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Beginning with the implementation of the Raft consensus type we now have a ConsensusMetadata field in the channel config. Since this is specific to a consensus implementation, we need a consensus-type specific validator of updates to the same.",,adarshsaraf123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00kzr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshsaraf123,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use idiomatic name for provider self-reference,FAB-15182,39312,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,15/Apr/19 8:41 PM,08/Jul/19 11:09 PM,28/Oct/23 3:08 AM,16/Apr/19 4:03 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,mastersingh24,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l07:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,scottz,,,,,,,,,,,,,,,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,main,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,mergify/bp/release-2.2/pr-4374,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,mergify/bp/release-2.5/pr-3782,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,mergify/bp/release-2.4/pr-3646,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"TestMsgStoreExpirationWithMembershipMessages failed in discovery test, ping to localhost failed",FAB-15183,39313,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,C0rWin,sambhavdutt,sambhavdutt,15/Apr/19 9:15 PM,22/Apr/19 1:32 AM,28/Oct/23 3:08 AM,22/Apr/19 1:32 AM,v1.4.1,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-first-failure,,,,,"TestMsgStoreExpirationWithMembershipMessages failed in discovery test, ping to localhost failed in discovery test.

*Branch:* release-1.4
*Platform:* x86_64
*Error Snippet:*

{code:java}
21:52:13 2019-04-15 01:50:54.990 UTC [gossip.discovery#localhost:2048] handleMsgFromComm -> WARN 001 Got message with wrong type (expected Alive or MembershipResponse or MembershipRequest message): data_msg:<> 
21:52:13 Ping to localhost:7615 failed
.
.
21:52:13 2019-04-15 01:51:24.244 UTC [gossip.discovery#localhost:4676] expireDeadMembers -> WARN 154 Exiting
21:52:13 Ping to localhost:4676 failed
21:52:13 Ping to localhost:4676 failed
21:52:13 --- FAIL: TestMsgStoreExpirationWithMembershipMessages (75.00s)
21:52:13     discovery_test.go:1296: 
21:52:13         	Error Trace:	discovery_test.go:1296
21:52:13         	            				discovery_test.go:1373
21:52:13         	Error:      	Should be empty, but was map[localhost:22610:1555293058006658098, 274]
21:52:13         	Test:       	TestMsgStoreExpirationWithMembershipMessages
21:52:13         	Messages:   	[Step6 - after lost MembershipResp process] Data from alive msg still exists in aliveLastTS of discovery inst 2
21:52:13     discovery_test.go:1298: 
21:52:13         	Error Trace:	discovery_test.go:1298
21:52:13         	            				discovery_test.go:1373
21:52:13         	Error:      	Should be empty, but was map[localhost:22610:Endpoint: localhost:22610, InternalEndpoint: localhost:22610, PKI-ID: 6c6f63616c686f73743a3232363130, Metadata: ]
21:52:13         	Test:       	TestMsgStoreExpirationWithMembershipMessages
21:52:13         	Messages:   	[Step6 - after lost MembershipResp process] id2Member mapping still still contains data related to Alive msg: discovery inst 2
21:52:13     discovery_test.go:1300: 
21:52:13         	Error Trace:	discovery_test.go:1300
21:52:13         	            				discovery_test.go:1373
21:52:13         	Error:      	Should be zero, but was 1
21:52:13         	Test:       	TestMsgStoreExpirationWithMembershipMessages
21:52:13         	Messages:   	[Step6 - after lost MembershipResp process] Alive membership list is not empty, discovery instance2
21:52:13 FAIL
.
21:52:13 FAIL	github.com/hyperledger/fabric/gossip/discovery	78.048s
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-x86_64/92/",,denyeart,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,e78616aa206a3775034b4ab01a6c570c7ab2bf48,Unset,No,,,"1|i00l0f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Launcher and tools for k8s network - phase 1,FAB-15189,39325,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,suryalnvs,scottz,scottz,15/Apr/19 11:54 PM,20/Aug/19 4:15 AM,28/Oct/23 3:08 AM,20/Aug/19 4:15 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"1 - Create network input yaml file with all inputs that NL supports and kubernetes cluster related section

2 - Add function to NL to take network input yaml file and read in values from input file

3 - Add ability to read kubeconfig file, to specify and use k8s instead of local network

4 - Generate all config files needed to create pvc, services, yaml to launch fabric. (This and following items will be called by NL. NL already creates docker compose file and configtx yaml file, so it will be similar method to that)

5 - Create pvc and copy certs

6 - Launch network

7 - Query for health of pods (peers, orderers) before returning ""success""

8 - Generate connection profile

For example:
 cd fabric-test/tools/NL
go run networkLauncher.go -i ""path of networkSpec.yaml file"" -k ""path of Kube config file""
  ",,scottz,suryalnvs,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16061,,,,FAB-15191,FAB-15405,FAB-15408,FAB-15409,FAB-15410,FAB-15412,FAB-15414,FAB-15415,FAB-15416,FAB-15439,FAB-15441,FAB-15455,FAB-15466,FAB-15467,FAB-15468,FAB-15469,FAB-15587,FAB-15721,FAB-15722,FAB-15765,FAB-15777,FAB-15850,FAB-15851,FAB-15853,FAB-15918,FAB-15919,FAB-15931,FAB-16041,FAB-16073,FAB-16075,FAB-16095,FAB-16137,FAB-16142,FAB-16276,FAB-16071,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|hzwqrk:4",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,suryalnvs,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
quick sanity check for k8s fabric network,FAB-15191,39328,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,16/Apr/19 12:21 AM,31/Jul/19 3:49 AM,28/Oct/23 3:08 AM,31/Jul/19 3:49 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,," 

Read network configuration info from ...

and confirm each step pass/fail, or skip steps after any failure:
 # create channel
 # install and instantiate chaincode throughout
 # join all the peers
 # send invoke to each peer
 # send query to each peer
 # fetch last block from all orderers, and compare blockheight and TX IDs
 # Report pass/fail

 

Also (maybe with another task): Include this  network functionality sanity check as an optional testcase available with runPte.sh.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15415,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l3j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 3:49 AM;scottz;The concept of sanity check to make sure nodes are up and running can be done with healthchecks (FAB-15415). We should do that one instead, which is general and usable for any network.

Any user can implement the concept described in THIS jira (to create channel, install/instantiate their own cc, and test a transaction).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace bespoke mocks with counterfeiter generated ones,FAB-15193,39331,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rickr,jyellick,jyellick,16/Apr/19 1:21 AM,09/Jun/19 5:22 PM,28/Oct/23 3:08 AM,09/Jun/19 5:22 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,"There are a number of places in the code, especially {{common/mocks}} which contain hand-written (and maintained) mocks.  This is burden to maintain and saps development resources and should be removed.

We should begin by fixing tests package by package which reference these common mocks, and, once no packages depend on them, remove them from the code.",,denyeart,jyellick,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l47:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,rickr,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/19 4:25 AM;rickr;gerrit cr https://gerrit.hyperledger.org/r/#/c/30947/;;;","09/Jun/19 5:22 PM;denyeart;Looks like this is done:

[https://gerrit.hyperledger.org/r/#/q/FAB-15193]

Re-open if more work is required.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor func NewDeliverEventsServer in core/peer/deliverevents.go,FAB-15194,39333,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,16/Apr/19 3:09 AM,30/Apr/19 7:15 AM,28/Oct/23 3:08 AM,30/Apr/19 6:40 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"The `NewDeliverEventsServer` function in `core/peer/deliverevents.go` should be refactored. The constructor really only needs the result of deliver.NewHandler and the policy checker.

Once that's done, there's *no value* to the constructor. We can simply create a struct literal and set the two fields ( if we're willing to export Server ).",,dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l4f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Apr/19 3:18 AM;sykesm;[~dereckluo] I added a comment to the CR asking for a rename of the DH field to something more meaningful. That can be done as a separate commit on the top of the stack.;;;","30/Apr/19 3:40 AM;sykesm;https://gerrit.hyperledger.org/r/31128 [FAB-15194] deliverevents: s/DH/DeliverHandler/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update command argument syntax,FAB-15195,39335,38926,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,16/Apr/19 4:26 AM,17/Apr/19 4:13 AM,28/Oct/23 3:08 AM,17/Apr/19 4:13 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Command arguments should be lowercase characters delimited by hyphens. Angle brackets should be used to show required arguments. Square brackets should be used to show optional arguments,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l4v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/19 3:35 AM;bpbuch;https://gerrit.hyperledger.org/r/#/c/30950/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make parameters are not passed into docker container for build,FAB-15196,39336,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Not Supported,suppandi,suppandi,suppandi,16/Apr/19 5:05 AM,25/Sep/19 12:05 AM,28/Oct/23 3:08 AM,25/Sep/19 12:05 AM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Eg: running `make docker DOCKER_NS=testing` will make the build inside the docker image default to `hyperledger`. This is because the environment variable from the makefile are not passed into the docker build container and are so unknown to the makefile running inside the container.,,jyellick,mastersingh24,suppandi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l53:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,mastersingh24,suppandi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/19 4:23 PM;mastersingh24;While I agree this is an issue based on how things have been working, before diving in to fix this I think we need to seriously consider removing all of the ""Docker"" stuff from the peer metadata and relying on *explicit* config parameters to determine which images to use.

[~sykesm] - What do you think?;;;","17/Apr/19 3:37 AM;suppandi;My suggestion is to make the makefile support the user providing the variables in an optional `config.mk` file. The main makefile can generate this file inside the build container (based on current values). This will cause the makefile in the container to include the file and learn the variables. This will also cover the GO_TAGS case passed in FAB-14401.  

 

Please look at the CR at [https://gerrit.hyperledger.org/r/#/c/30964/] to check if this is a valid way.;;;","25/Sep/19 12:05 AM;jyellick;Looks like the CR for this was abandoned due to lack of interest. Closing the bug as well, feel free to re-open if there is still interest.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
no need to print trace for gossip warns,FAB-15197,39337,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,16/Apr/19 7:50 AM,15/May/19 9:45 PM,28/Oct/23 3:08 AM,15/May/19 9:45 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,,,,,,,,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l5b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/19 7:52 AM;C0rWin;https://gerrit.hyperledger.org/r/30952 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Doc - CouchDB indexes may not get applied in crash scenarios,FAB-15198,39338,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,manish-sethi,manish-sethi,16/Apr/19 8:12 AM,16/Jan/20 7:26 AM,28/Oct/23 3:08 AM,16/Jan/20 7:26 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"In the legacy code, the chaincode install is two-phased. In the first phase, it invokes the chaincode lifecycle listeners such as couchdb index creator and in the second phase, it makes changes to the persistent store. The main purpose of making this a two phased is so that the listeners are guaranteed to receive the events.

In the new chaincode install path, the chaincode is installed first and then the listeners are invoked if the install is successful. In this approach, if a crash is to take place immediately after install and before invoking the listeners, the indexes will be missing from the couchdb.",,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:iwrzi",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jul/19 11:46 PM;denyeart;Address via documentation [~manish-sethi] [~negupta];;;","05/Dec/19 4:00 AM;denyeart;[~manish-sethi] [~negupta] Can you remind exactly what we wanted to document here?;;;","05/Dec/19 6:17 AM;manish-sethi;Following may make sense...

In a rare scenario, if a peer crash takes place during install of a chaincode, this can leave couchdb without any indexes that were supposed to bet created during the install process. If such an event is detected, the chaincode should be installed again for creation of indexes.;;;","15/Jan/20 8:16 PM;denyeart;https://github.com/hyperledger/fabric/pull/474;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update interest rate sample,FAB-15199,39339,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,16/Apr/19 10:05 AM,13/Jun/19 3:07 AM,28/Oct/23 3:08 AM,13/Jun/19 3:07 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,fabric-samples,,,,,0,,,,,,Update interest rate sample for lifecycle,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14807,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzwr",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/19 10:26 PM;negupta;https://gerrit.hyperledger.org/r/#/c/30954/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
orderer discards the config message,FAB-15200,39340,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,xwu,xwu,16/Apr/19 12:29 PM,09/Jun/19 5:33 PM,28/Oct/23 3:08 AM,09/Jun/19 5:33 PM,v1.1.0,v1.1.1,v1.2.1,v1.3.0,v1.4.0,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"I have a fabric network running in kafka model which is based on 1.0.4 version and inclueds two orderers belonging to two organizations. The network has a system channel named testchainid and a custom channel named mychannel, and a smart contract is installed in the cutom channel. After some data was put to the network, I want to upgrage to fabric 1.1. Acccord to the tutorial([https://hyperledger-fabric.readthedocs.io/en/release-1.1/upgrading_your_network_tutorial.html]), the network was runnint with fabric 1.1, and the smart contract works fine.

Then I add a new orderer(Orderer3MSP ) belongs to a new organization in the fabric network and start the orderer as a new docker, which throws some errors when it consues some old messages from kafka. The log info is as follows:

{code}
2019-04-14 12:39:36.186 CST [orderer.common.server] Start -> INFO 006 Beginning to serve requests
2019-04-14 12:39:36.186 CST [orderer.consensus.kafka] setupProducerForChannel -> INFO 007 [channel: testchainid] Setting up the producer for this channel...
2019-04-14 12:39:36.189 CST [orderer.consensus.kafka] startThread -> INFO 008 [channel: testchainid] Producer set up successfully
2019-04-14 12:39:36.189 CST [orderer.consensus.kafka] sendConnectMessage -> INFO 009 [channel: testchainid]About to post the CONNECT message...
2019-04-14 12:39:36.199 CST [orderer.consensus.kafka] startThread -> INFO 00a [channel: testchainid] CONNECT message posted successfully
2019-04-14 12:39:36.199 CST [orderer.consensus.kafka] setupParentConsumerForChannel -> INFO 00b [channel: testchainid] Setting up the parent consumer for this channel...
2019-04-14 12:39:36.204 CST [orderer.consensus.kafka] startThread -> INFO 00c [channel: testchainid] Parent consumer set up successfully
2019-04-14 12:39:36.204 CST [orderer.consensus.kafka] setupChannelConsumerForChannel -> INFO 00d [channel: testchainid] Setting up the channel consumer for this channel (start offset: -2)...
2019-04-14 12:39:36.206 CST [orderer.consensus.kafka] startThread -> INFO 00e [channel: testchainid] Channel consumer set up successfully
2019-04-14 12:39:36.206 CST [orderer.consensus.kafka] startThread -> INFO 00f [channel: testchainid] Start phase completed successfully
2019-04-14 12:39:36.208 CST [orderer.consensus.kafka] processRegular -> WARN 010 [channel: testchainid] This orderer is running in compatibility mode
2019-04-14 12:39:36.221 CST [cauthdsl] deduplicate -> {color:#FF0000}ERRO 011 Principal deserialization failure (MSP Orderer3MSP is unknown) for identity 0{color}
2019-04-14 12:39:36.221 CST [cauthdsl] deduplicate -> {color:#FF0000}ERRO 012 Principal deserialization failure (MSP Orderer3MSP is unknown) for identity 0{color}
2019-04-14 12:39:36.221 CST [orderer.consensus.kafka] processMessagesToBlocks ->{color:#FF0000} WARN 013 [channel: testchainid] Error when processing incoming message of type REGULAR = discarding bad config message because = Failed to reach implicit threshold of 1 sub-policies, required 1 remaining: permission denied{color}
2019-04-14 12:39:36.221 CST [orderer.consensus.kafka] processRegular -> WARN 014 [channel: testchainid] This orderer is running in compatibility mode
2019-04-14 12:39:36.230 CST [cauthdsl] deduplicate -> {color:#FF0000}ERRO 015 Principal deserialization failure (MSP Orderer3MSP is unknown) for identity 0{color}
2019-04-14 12:39:36.231 CST [cauthdsl] deduplicate -> {color:#FF0000}ERRO 016 Principal deserialization failure (MSP Orderer3MSP is unknown) for identity 0{color}
2019-04-14 12:39:36.231 CST [orderer.consensus.kafka] processMessagesToBlocks -> {color:#FF0000}WARN 017 [channel: testchainid] Error when processing incoming message of type REGULAR = discarding bad config message because = Failed to reach implicit threshold of 1 sub-policies, required 1 remaining: permission denied{color}
2019-04-14 12:39:36.231 CST [orderer.consensus.kafka] processRegular -> WARN 018 [channel: testchainid] This orderer is running in compatibility mode
2019-04-14 12:39:36.231 CST [orderer.consensus.kafka] processMessagesToBlocks -> WARN 019 [channel: testchainid] {color:#FF0000}Error when processing incoming message of type REGULAR = discarding bad config message because = error authorizing update: error validating ReadSet: readset expected key [Group] /Channel/Orderer at version 1, but got version 0{color}
2019-04-14 12:39:36.231 CST [orderer.consensus.kafka] processRegular -> WARN 01a [channel: testchainid] This orderer is running in compatibility mode
2019-04-14 12:39:36.232 CST [orderer.consensus.kafka] processMessagesToBlocks -> WARN 01b [channel: testchainid] {color:#FF0000}Error when processing incoming message of type REGULAR = discarding bad config message because = error authorizing update: error validating ReadSet: readset expected key [Group] /Channel at version 1, but got version 0{color}
{code}
 

{color:#172b4d}And while I upgrade the network to fabric 1.4, the added orderer does not work properly and the error info is consistent with the above information.{color}",,guoger,jyellick,mastersingh24,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10639,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l5z:",,,,Unset,Unset,,"1. start 3zk+4kafka+orderer(Orderer1MSP )+orderer(Orderer2MSP )+4peer based on fabric 1.0.4;
2. create a new channel mychannel and install the cc;
3. invoke cc;
4. stop the network;
5. upgrade to fabric 1.1, including upgrading peers, orderers, as well as enabling capability requirements;
6. invoke cc(normal);
7. update mychannel's config block to add a new orderer(Orderer3MSP );
8. start the new orderer with Orderer3MSP as its local msp id;(see the errors)",,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,mastersingh24,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/Apr/19 6:42 PM;mastersingh24;You actually need to start the new orderer with the same genesis block used for the other orderer nodes.  So you'll need to get block 0 for the system channel (testchainid) from one of the existing orderers and then use that as the genesis block for the new orderer.;;;","16/Apr/19 8:40 PM;xwu;[~mastersingh24] Thank you very much.

The new orderer's genesis block in the network is the same with the other two old orderer nodes, which does not include the information about the new orderer info(Orderer3MSP ).;;;","20/Apr/19 7:40 PM;xwu;When I set the log spec to debug, we can see the following log:

orderer0.ord3.example.com | 2019-04-20 18:09:01.040 CST [policies] func1 -> DEBU 285 Evaluation Failed: Only 0 policies were satisfied, but needed 1 of [{color:#FF0000} OrdererOrg1.Writers OrdererOrg2.Writers{color} ]
orderer0.ord3.example.com | 2019-04-20 18:09:01.040 CST [policies] Evaluate -> DEBU 286 Signature set did not satisfy policy /Channel/Orderer/Writers
orderer0.ord3.example.com | 2019-04-20 18:09:01.040 CST [policies] Evaluate -> DEBU 287 == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Orderer/Writers
orderer0.ord3.example.com | 2019-04-20 18:09:01.040 CST [policies] func1 -> DEBU 288 Evaluation Failed: Only 0 policies were satisfied, but needed 1 of [ {color:#FF0000}Orderer.Writers Consortiums.Writers{color} ]
orderer0.ord3.example.com | 2019-04-20 18:09:01.040 CST [policies] Evaluate -> DEBU 289 Signature set did not satisfy policy /Channel/Writers
orderer0.ord3.example.com | 2019-04-20 18:09:01.040 CST [policies] Evaluate -> DEBU 28a == Done Evaluating *policies.implicitMetaPolicy Policy /Channel/Writers
orderer0.ord3.example.com | 2019-04-20 18:09:01.040 CST [orderer.consensus.kafka] processMessagesToBlocks -> WARN 28b [channel: testchainid] Error when processing incoming message of type REGULAR = discarding bad config message because = Failed to reach implicit threshold of 1 sub-policies, required 1 remaining: permission denied

 

In the orderer.yaml file, we can see this sentence:

{color:#FF0000}IMPORTANT:{color} The local MSP ID of an orderer needs to match the MSP ID of one of the organizations defined in the orderer system channel's  /Channel/Orderer configuration.

But the Orderer3MSP is not in the configuration, which is added later. So the orderer node has no policy to write the config update block, Then it doesn't know the created channel's information and doesn't consume the msgs from kafka.

You can see the ProcessConfigUpdateMsg function in orderer/common/msgprocessor/systemchannel.go, which filters the config msg.

{color:#FF0000}err = s.StandardChannel.filters.Apply(wrappedOrdererTransaction){color}
{color:#FF0000}if err != nil {{color}
{color:#FF0000} return nil, 0, err{color}
{color:#FF0000}}{color}

 

{color:#ff0000}Therefor I think this problem is a bug, which should be fixed, otherwise no new orderer's org can be added to the network which was upgraded from v1.0 to v1.1/v1.2/v1.3/v1.4!{color};;;","04/Jun/19 12:20 PM;guoger;This looks like a duplicate of FAB-10639;;;","04/Jun/19 12:38 PM;guoger;[~xwu] you'll need to copy ledger data to new orderer to avoid bootstrapping from genesis block.

Please close the jira if you find it working, or comment further. thx!;;;","04/Jun/19 3:02 PM;xwu;[~guoger] Thank you very much!

In fact, the problem is the same with FAB-10639.

If the new orderer starts with old ledger, it works fine.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test flake in TestSend ,FAB-15201,39342,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,16/Apr/19 4:37 PM,17/Apr/19 3:27 PM,28/Oct/23 3:08 AM,17/Apr/19 3:27 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"The test ensures that a certain amount of sends were invoked on the fake gRPC stream, but it atomically increments it after writing to a channel instead of first atomically incrementing and then writing to the channel (which signals the test goroutine to asserting)",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l6f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Apr/19 4:39 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/30957/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Service discovery listener should tolerate being called multiple times for the same chaincode name/version,FAB-15202,39344,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,ales,ales,16/Apr/19 6:16 PM,20/Apr/19 7:28 PM,28/Oct/23 3:08 AM,20/Apr/19 7:28 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"See discussion here 

[https://gerrit.hyperledger.org/r/#/c/30884/1/core/chaincode/lifecycle/event_broker.go@79]

for context",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l6v:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/19 7:28 PM;ales;Doesn't apply;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""profile list"" command should sort the list",FAB-15203,39346,39370,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,lehors,lehors,lehors,16/Apr/19 9:29 PM,07/May/19 6:12 AM,28/Oct/23 3:08 AM,23/Apr/19 4:07 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l7b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE implements CHAI/Mocha,FAB-15204,39347,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,dongming,dongming,16/Apr/19 10:55 PM,29/Apr/19 11:33 PM,28/Oct/23 3:08 AM,29/Apr/19 11:33 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Implement Chai/mocha to have status of test results,,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10089,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00l7j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"22/Apr/19 11:40 PM;scottz;https://gerrit.hyperledger.org/r/#/c/31020/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE run remote scenarios,FAB-15206,39355,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,17/Apr/19 3:22 AM,23/Apr/19 4:39 AM,28/Oct/23 3:08 AM,23/Apr/19 4:39 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,This is to create scripts to execute PTE scenarios and calculate PTE reports on remote systems.,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00l8v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"17/Apr/19 3:32 AM;dongming;https://gerrit.hyperledger.org/r/#/c/30965/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor TestComputeChaincodeEndpoint for node/start_test.go,FAB-15207,39356,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,17/Apr/19 3:29 AM,01/May/19 1:40 AM,28/Oct/23 3:08 AM,01/May/19 1:40 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Refactoring node/start_test.go TestComputeChaincodeEndpoint

 

For multiple test cases with only few changes of parameters, tableDriveTests should be 

considered as a better practice.  ",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l93:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error message on Channel Name validation needs to modified.,FAB-15208,39358,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,rameshthoomu,rameshthoomu,17/Apr/19 3:39 AM,08/Jun/19 9:05 PM,28/Oct/23 3:08 AM,08/Jun/19 4:39 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,fabric-samples,,,,,0,help-wanted,ipm,,,,"1)export *CHANNEL_NAME*={color:red}my_Channel{color}  && ../bin/configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID $CHANNEL_NAME
2) export *CHANNEL_NAME*=my_Channel
root@8c00a75b1e8d:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer channel create -o orderer.example.com:7050 -c $CHANNEL_NAME -f ./channel-artifacts/channel.tx --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem

*Error: got unexpected status: BAD_REQUEST -- initializing configtx manager failed: bad {color:red}channel ID: channel ID 'my_Channel'{color} contains illegal characters*

Though both are referring the channel Names, channel ID is misleading in this context and user may confuse with Channle ID name as it not appearing on in these instructions. In this context, I am expecting CHANNEL_NAME in the error message instead of Channel ID.

Another issue is, why this validation check is not happening while creating channel transaction.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l9j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor node/start.go func computeChaincodeEndpoint,FAB-15209,39359,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,17/Apr/19 6:05 AM,01/May/19 1:40 AM,28/Oct/23 3:08 AM,01/May/19 1:40 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"func computeChaincodeEndpoint in node/start.go need to be refactored. 

For best golang practices, ""happy path"" should be stick to the left side as much as possible. This means logics should be modified to use less embedded ""if/else"". ",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l98:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft UT flake: [It] stop cluster quorum and continue reconfiguration after the restart ,FAB-15210,39360,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,17/Apr/19 11:41 AM,01/May/19 4:43 AM,28/Oct/23 3:08 AM,01/May/19 4:43 AM,v1.4.1,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,ci-flake,,,,,https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11552/console,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00l9r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Apr/19 3:28 PM;guoger;https://gerrit.hyperledger.org/r/c/30977/ master
https://gerrit.hyperledger.org/r/c/30978/ release-1.4;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Annotations for the init function - remove,FAB-15214,39367,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jtonline,mbwhite,mbwhite,17/Apr/19 11:02 PM,31/May/19 9:34 PM,28/Oct/23 3:08 AM,31/May/19 9:34 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Node.js was going to support the @init annotation like Java for the init function.

With lifecycle changes this concept of init is now deprecated and will be removed. Therefore Node.js won't get this function - and we should remove it from Java to be consistent. ",,jtonline,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCJ-4,,,No,,Unset,No,,,"1|i00lbb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jtonline,mbwhite,,,,,,,,,,,,,,,release-2.4,main-emeritius,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/May/19 5:13 PM;jtonline;[https://gerrit.hyperledger.org/r/c/fabric-chaincode-java/+/31510];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
e2e test: display history of transactions,FAB-15215,39368,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,KaoutarEL,KaoutarEL,KaoutarEL,17/Apr/19 11:06 PM,17/Apr/19 11:07 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15158,,,No,,Unset,No,,,"1|i00lbj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KaoutarEL,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add chaincode commands,FAB-15216,39369,38926,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,17/Apr/19 11:38 PM,26/Aug/19 11:57 PM,28/Oct/23 3:08 AM,26/Aug/19 11:57 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The cli should provide commands to install, instantiate, invoke and query chaincode.",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lbr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jul/19 4:36 AM;bpbuch;https://gerrit.hyperledger.org/r/c/fabric-cli/+/32463/1;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Profile Management,FAB-15217,39370,,Story,In Progress,FAB,Fabric,software,denyeart,,,Medium,,bpbuch,bpbuch,bpbuch,17/Apr/19 11:56 PM,17/Apr/19 11:56 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Profiles will serve as a core feature in the redesigned CLI.  The usage of profiles and contexts should be easily managed by the user.  Toggling and overriding context should allow the user granular control over specific use case.,,bpbuch,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10734,,,No,,Unset,No,,,"1|i00lbz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,nnao,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Populate profile from crypto config,FAB-15218,39371,39370,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,bpbuch,bpbuch,bpbuch,18/Apr/19 12:06 AM,23/Apr/19 4:07 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Crypto config provides details on the network topology and certificates/keys for various components in the network. This should serve as a starting point for generating a profile.,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lc7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add integration tests,FAB-15219,39373,38927,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,bpbuch,bpbuch,18/Apr/19 12:10 AM,18/Apr/19 12:10 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Integration tests should test the CLI with an active example network in various configurations.  They should also serve as a guard for regression testing and provide example usage.,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lcn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use Godoc to provide documentation,FAB-15220,39374,38927,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,bpbuch,bpbuch,18/Apr/19 12:16 AM,18/Apr/19 12:16 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Godoc parses source code, specifically comments, and generates documentation.  Function comments need to be updated with Godoc style comments to provide an increased level of detail.",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lcv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wiring of lifecycle cache and ledger for ledger to recieve lifecycle events,FAB-15221,39380,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,18/Apr/19 10:47 AM,18/May/19 11:40 PM,28/Oct/23 3:08 AM,18/May/19 11:40 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ldr:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Service discovery _lifecycle integration tests,FAB-15222,39381,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,18/Apr/19 10:56 AM,24/May/19 8:34 AM,28/Oct/23 3:08 AM,24/May/19 8:34 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15235,,,,,,FAB-15413,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ldz:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/19 5:25 AM;wlahti;Initial CR with one of the tests:

[https://gerrit.hyperledger.org/r/c/30994]

The rest to follow (plus some restructuring of the tests to avoid duplicated network setup/teardown where possible).;;;","17/May/19 11:15 PM;wlahti;The above CR now includes the other applicable integration tests for service discovery. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve file storage write performance,FAB-15223,39382,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,grapebaba,grapebaba,18/Apr/19 3:38 PM,18/Apr/19 3:38 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Many systems supports preallocating space for the WAL which can reduce the data that needs to be synced whenever {{fdatasync}} is called. In particular, if we pre-extend the size of the file, calling {{fdatasync}} will only need to write the data blocks and not the inode. We think it can be used in ledger file storage.[~manish-sethi] [~denyeart]",,grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00le7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),grapebaba,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Disable brittle state transfer integration test,FAB-15225,39385,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,C0rWin,C0rWin,C0rWin,18/Apr/19 8:54 PM,15/May/19 9:51 PM,28/Oct/23 3:08 AM,15/May/19 9:51 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,,,,,,"There is an integration state transfer test which intermittently fails in CI

{code}
10:48:07 [e][Org2.peer1] 2019-04-18 10:48:07.164 UTC [gossip.comm] func1 -> DEBU 339 Exiting Accept() loop
10:48:07 [e][Org2.peer1] 2019-04-18 10:48:07.164 UTC [gossip.comm] Stop -> INFO 33b Stopped
10:48:07 
10:48:07 ------------------------------
10:48:07 • Failure [40.307 seconds]
10:48:07 Gossip Test State transfer test [It] solo network with 2 orgs, 2 peers each, should sync from the peer if no orderer available 
10:48:07 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:81
10:48:07 
10:48:07   Timed out after 10.425s.
10:48:07   Expected
10:48:07       <int>: 4
10:48:07   to equal
10:48:07       <int>: 14
10:48:07 
10:48:07   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:153
10:48:07 ------------------------------
10:48:07 
10:48:07 
10:48:07 Summarizing 1 Failure:
10:48:07 
10:48:07 [Fail] Gossip Test State transfer test [It] solo network with 2 orgs, 2 peers each, should sync from the peer if no orderer available 
10:48:07 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/gossip/gossip_test.go:153
{code}

need to disable and understand the root cause behind failures.",,C0rWin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15226,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lev:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Apr/19 8:54 PM;C0rWin;https://gerrit.hyperledger.org/r/31004;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Re-enable state transfer integration tests in gossip area,FAB-15226,39386,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,C0rWin,C0rWin,18/Apr/19 8:55 PM,21/Nov/19 3:17 AM,28/Oct/23 3:08 AM,21/Nov/19 3:17 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,fabric-quality,,,,,0,,,,,,Once the root cause behind FAB-15225 will be resolved need to re-activate disabled test.,,C0rWin,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15225,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00uze:rzczqzxvi",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,scottz,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Sep/19 3:57 AM;scottz;Additional tests in this area are being added for integrations test, to replace some functional tests in fabric-test repo that were using Behave framework which is being deprecated. Once completed, it is more imperative to get to the bottom of the flaky test failures in the CI, and to stabilize them and reenable at fabric/integration/gossip/gossip_test.go#67. I am linking this to the epic to track.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement consensus.MetadataValidator for etcdraft,FAB-15228,39391,38793,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,adarshsaraf123,adarshsaraf123,adarshsaraf123,18/Apr/19 10:07 PM,28/Jun/19 3:58 AM,28/Oct/23 3:08 AM,28/Jun/19 3:58 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,adarshsaraf123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lg7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshsaraf123,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Service discovery needs to support channel config policy references,FAB-15229,39395,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,wlahti,wlahti,19/Apr/19 12:43 AM,24/May/19 12:12 AM,28/Oct/23 3:08 AM,24/May/19 12:12 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The chaincode definition in the new lifecycle requires:

an admin of an organization to define the chaincode for peers in the organization
an admin of a channel to invoke an endorsement on the lifecycle chaincode in order to collect the ""votes"" of step (1) and then send a transaction with these signatures (of the admins of all organization).
 

Step (2) is governed by an endorsement policy that is a meta-policy, which can be either a signature policy, or a quantifier predicate of meta-policies such as - all, any, or majority.

If we expand service discovery to support meta-policies, we can have SDKs know the peers to send endorsements for step (2) via discovery endorsement queries.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lgv:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
transactions using kafka with tls enabled between orderers and kafkas,FAB-15230,39398,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,scottz,scottz,19/Apr/19 6:24 AM,10/Jun/20 12:35 PM,28/Oct/23 3:08 AM,10/Jun/20 12:35 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Create the necessary certs, and create a fabric network, and run execute transactions with a kafka ordering system, when using `Orderer.Kafka.TLS.Enabled: true`
Refer to https://github.com/hyperledger/fabric/blob/release-1.4/sampleconfig/orderer.yaml#L241-L269.
This setting enables SSL communication between the orderers and the Kafka cluster.
Also, Gari made suggestions in this thread: https://lists.hyperledger.org/g/fabric/topic/17549764#6479",,scottz,,,,,,,,,,,,,,,,,,,,,,,FAB-16088,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16061,,,No,,Unset,No,,,"1|hzwqrk:5j2",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove viper usage in core/deliverservice,FAB-15231,39406,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,20/Apr/19 1:43 AM,03/Jul/19 12:20 AM,28/Oct/23 3:08 AM,02/Jul/19 4:24 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Remove viper usage in core/deliverservice as well as deliverclient package,,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00liv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
2019-03 license scanning results,FAB-15232,39411,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,dhuseby,dhuseby,20/Apr/19 4:13 AM,26/Apr/20 2:17 PM,28/Oct/23 3:08 AM,26/Apr/20 2:17 PM,,,,,,,,,,,,,,,,,,fabric-release,,,,,,0,ipm2,license,,,,"Issues to address from the latest software license scan. The attached .txt file has the notes, the attached .xls has the details, the attached .spdx file is for scripts to chew on.",,denyeart,dhuseby,jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,FAB-9383,,,,,,,,,,FABN-1215,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Apr/19 4:13 AM;dhuseby;fabric-2019-03-27.spdx;https://jira.hyperledger.org/secure/attachment/17128/fabric-2019-03-27.spdx","20/Apr/19 4:13 AM;dhuseby;fabric-2019-03-27.xlsx;https://jira.hyperledger.org/secure/attachment/17127/fabric-2019-03-27.xlsx","20/Apr/19 4:13 AM;dhuseby;fabric-notes-2019-03-27.txt;https://jira.hyperledger.org/secure/attachment/17126/fabric-notes-2019-03-27.txt",,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ljz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dhuseby,jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/19 6:41 PM;mastersingh24;Needs Review:

fabric-amcl   - these headers are correct ... these files are from https://github.com/apache/incubator-milagro-crypto ... you need to build your own distro so that's why we have our own repo for them and then this is vendored in multiple projects

No license found:

mocks / fakes - there are a number of files listed which have mock(s)/fake(s) in their path.  These are all generated by tools and there is currently no way to have those tools add headers.  Given we frequently need to regenerate these, I don't think it makes sense to add license headers to all of them.

;;;","25/Sep/19 12:03 AM;jyellick;[~mastersingh24] do you think everything that should be addressed has been? Are we good to close?;;;","26/Apr/20 2:17 PM;denyeart;I'll close based on Gari's responses. Please re-open if there is still an issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Metadata shim to aggregate _lifecycle and lscc chaincodes,FAB-15234,39418,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,wlahti,wlahti,20/Apr/19 4:38 AM,20/May/19 7:44 AM,28/Oct/23 3:08 AM,20/May/19 7:44 AM,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00llb:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/19 5:26 AM;wlahti;https://gerrit.hyperledger.org/r/c/30969;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test exercising implicit meta policy translation code,FAB-15235,39420,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,wlahti,ales,ales,20/Apr/19 7:22 PM,23/Apr/19 5:25 AM,28/Oct/23 3:08 AM,23/Apr/19 5:25 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Through unit tests I wasn't able to generate a ""real"" implicit meta policy and so we don't know whether the translation code will really work unless we have an integration test for it.",,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15222,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00llr:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/19 5:25 AM;wlahti;This is incorporated in FAB-15222.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration tests for couch indexes with _lifecycle,FAB-15236,39421,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,ales,ales,20/Apr/19 7:33 PM,08/Jun/19 6:49 AM,28/Oct/23 3:08 AM,08/Jun/19 6:49 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00llz:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,manish-sethi,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/19 11:15 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/31058/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Transient store should get directory path from config,FAB-15237,39422,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,21/Apr/19 1:50 AM,06/Jun/19 2:44 AM,28/Oct/23 3:08 AM,06/Jun/19 2:44 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lm7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 9:41 PM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric/+/31723;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot execute already deployed chaincodes after upgrade to 2.0,FAB-15238,39423,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,ales,ales,21/Apr/19 2:44 AM,03/May/19 10:45 PM,28/Oct/23 3:08 AM,03/May/19 10:45 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"The code complains about the missing key that controls the init behaviour, producing this error
{noformat}
[e][org1.peer2] 2019-04-20 19:39:47.123 CEST [endorser] SimulateProposal -> ERRO 056 [testchannel][069edd9d] failed to invoke chaincode name:""mycc"" , error: chaincode 'mycc' has not been initialized for this version, must call as init first
[e][org1.peer2] github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).CheckInit
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:364
[e][org1.peer2] github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Invoke
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:317
[e][org1.peer2] github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:246
[e][org1.peer2] github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/endorser/support.go:148
[e][org1.peer2] github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/endorser/endorser.go:149
[e][org1.peer2] github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/endorser/endorser.go:261
[e][org1.peer2] github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/endorser/endorser.go:514
[e][org1.peer2] github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
[e][org1.peer2] github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32
[e][org1.peer2] github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler.func1
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:169
[e][org1.peer2] github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:31
[e][org1.peer2] github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/common/grpclogging/server.go:91
[e][org1.peer2] github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34
[e][org1.peer2] github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:30
[e][org1.peer2] github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:39
[e][org1.peer2] github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:171
[e][org1.peer2] github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:971
[e][org1.peer2] github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1250
[e][org1.peer2] github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
[e][org1.peer2]         /home/aso/obc/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:690
[e][org1.peer2] runtime.goexit
{noformat}
This is because the init key does not exist",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00lmf:",,,,Unset,Unset,,"Deploy a chaincode in 1.4, upgrade to 2.0 and try to invoke it",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/19 2:45 AM;ales;[~manish-sethi], [~wlahti] - FYI;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use mock or fake for core/chaincode mocks but not both,FAB-15239,39424,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,21/Apr/19 3:30 AM,03/Dec/19 1:41 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,hygiene,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lmn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Endorsement policy defined via LSCC not interpreted properly on a 2.0 channel,FAB-15240,39425,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,ales,ales,ales,21/Apr/19 4:27 AM,30/May/19 6:24 AM,28/Oct/23 3:08 AM,30/May/19 6:24 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"An endorsement policy defined via LSCC is a SignaturePolicyEnvelope. However, 2.0 validators can only interpret ApplicationPolicy instances; when the validator attempts to do so, it ends up unmafshalling as a channel policy reference with a string with binary content, which can't be interpreted and results in an endorsement policy error.",,ales,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:i",,,,Unset,Unset,v2.0,"Deploy a chaincode  with LSCC, upgrade the network to 2.0 and try to invoke the chaincode (you may first stumble on FAB-15238).",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/19 10:47 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/31035/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Behave daily tests have been failing consistently with I/O  error.,FAB-15241,39431,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,bharadwajambati1,sambhavdutt,sambhavdutt,23/Apr/19 12:12 AM,18/May/19 7:17 AM,28/Oct/23 3:08 AM,18/May/19 12:26 AM,v1.4.2,v2.0.0,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"The Behave daily tests have been failing consistently as there is an I/O error observed in FAB-7251, 'IOError: [Errno 11] Resource temporarily unavailable'
The behave tests exit here and there are no further test cases executed. You can find the complete error log in the attached text file. The I/0 error is also observed in v1.4.1 but in a different test case detailed in the link below,

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-behave-release-1.4-x86_64/117/

*Branch:* master
*Error Snippet:*

{code:java}
21:03:28 Feature: Testing Fabric CouchDB indexing # CouchDB_index.feature:7
21:03:28 
21:03:28   @daily
21:03:28   Scenario Outline: FAB-7251: Test CouchDB indexing using marbles chaincode using GOLANG with 1 channels and 1 index with 1 selector -- @1.1                                                                                                              # CouchDB_index.feature:31
21:03:28     Given I have a bootstrapped fabric network of type kafka using state-database couchdb with tls                                                                                                                                                        # steps/basic_impl.py:300
21:03:28 org1.example.com
21:03:28 org2.example.com
.
.
21:05:13     When a user queries on the channel ""mychannel1"" using chaincode named ""mycc1"" with args [""queryMarbles"",""{\\""selector\\"":{\\""size\\"":5}, \\""use_index\\"":[\\""_design/indexdoc_behave_test\\"", \\""index_behave_test\\""]}""] on ""peer0.org1.example.com"" # steps/endorser_impl.py:466
21:05:18     Then a user receives a response containing ""owner"":""cassey""                                                                                                                                                                                           # steps/endorser_impl.py:1228
21:05:18       Assertion Failed: Expected response was ""owner"":""cassey""; received []
.
.
UTC [grpc] switchBalancer -> DEBU 03f\x1b[0m ClientConn switching balancer to ""pick_first""\n\x1b[36m2019-04-22 01:04:45.503 UTC [grpc] HandleSubConnStateChange -> DEBU 040\x1b[0m pickfirstBalancer: HandleSubConnStateChange: 0xc00024ec80, CONNECTING\n\x1b[36m2019-04-22 01:04:45.505 UTC [grpc] HandleSubConnStateChange -> DEBU 041\x1b[0m pickfirstBalancer: HandleSubConnStateChange: 0xc00024ec80, READY\n\x1b[36m2019-04-22 01:04:45.506 UTC [msp] GetDefaultSigningIdentity -> DEBU 042\x1b[0m Obtaining default signing identity\n\x1b[34m2019-04-22 01:04:45.506 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 043\x1b[0m Using default escc\n\x1b[34m2019-04-22 01:04:45.506 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 044\x1b[0m Using default vscc\n\x1b[36m2019-04-22 01:04:45.516 UTC [chaincode.platform.golang] getCodeFromFS -> DEBU 045\x1b[0m getCodeFromFS github.com/hyperledger/fabric-samples/chaincode/marbles02/go\n\x1b[36m2019-04-22 01:04:45.587 UTC [chaincode.platform.golang] func1 -> DEBU 046\x1b[0m Discarding GOROOT package bytes\n\x1b[36m2019-04-22 01:04:45.587 UTC [chaincode.platform.golang] func1 -> DEBU 047\x1b[0m Discarding GOROOT package encoding/json\n\x1b[36m2019Exception IOError: [Errno 11] Resource temporarily unavailable
21:05:18 Traceback (most recent call last):
21:05:18   File ""/usr/local/bin/behave"", line 11, in <module>
21:05:18     sys.exit(main())
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 183, in main
21:05:18     return run_behave(config)
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 127, in run_behave
21:05:18     failed = runner.run()
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 804, in run
21:05:18     return self.run_with_paths()
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 824, in run_with_paths
21:05:18     return self.run_model()
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 626, in run_model
21:05:18     failed = feature.run(self)
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 321, in run
21:05:18     failed = scenario.run(runner)
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1114, in run
21:05:18     failed = scenario.run(runner)
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 711, in run
21:05:18     if not step.run(runner):
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1379, in run
21:05:18     formatter.result(self)
21:05:18   File ""/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py"", line 151, in result
21:05:18     self.stream.write(indent(step.error_message.strip(), u""      ""))
21:05:18   File ""/usr/lib/python2.7/codecs.py"", line 370, in write
21:05:18     self.stream.write(data)
21:05:18 IOError: [Errno 11] Resource temporarily unavailable
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-behave-master-x86_64/227/",,bharadwajambati1,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,FAB-15375,FAB-15380,FAB-13365,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Apr/19 11:59 PM;sambhavdutt;Behave daily feature.txt;https://jira.hyperledger.org/secure/attachment/17143/Behave+daily+feature.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,6887cef,Unset,No,,,"1|i00lnj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,true,"09/May/19 3:21 AM;scottz;In master branch, the behave test jobs first started failing every day, continuing today, (with no post build report summary of behave pass/fail counts) with the IOError on Jan 24th, build 144. The actual failing testcase was in fabric-ca.feature, test FAB-11621 1.1.
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-behave-master-x86_64/144/

Nothing changed in fabric-test in the Behave framework or feature tests or Makefile on Jan 23 or Jan 24.;;;","11/May/19 11:05 AM;scottz;https://gerrit.hyperledger.org/r/#/c/31333/
It appears the behave framework can fail on ANY test that fails, producing the IOError msg, whenever the failing test produces at least 64K of output combined of stdout and stderr and CLI logging messages. This update reduces the amount of logs produced, mostly by eliminating some CLI Debug logs and some error logs that were not real errors.;;;","14/May/19 3:16 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31346/]

Added an option to redirect the logs of the behave tests to a file in features/behave_tests.log. This will helps in preventing the IOError in the logs and continue to run the remaining test scenarios, even if the previous scenario failed. 

 

Also reverted the previous change;;;","18/May/19 7:17 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31427/] for release-1.4 branch;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update couchDB tutorial for lifecycle,FAB-15243,39433,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,23/Apr/19 12:53 AM,08/Aug/19 12:34 AM,28/Oct/23 3:08 AM,08/Aug/19 12:34 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,Update couchDB tutorial to support using indexes with the new lifecycle.,,denyeart,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:iwrr",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 6:06 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/31046/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Private data doc fixes,FAB-15244,39434,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,23/Apr/19 1:16 AM,30/Jul/19 12:52 PM,28/Oct/23 3:08 AM,30/Jul/19 12:52 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,Some doc fixes for the private data tutorial and command reference,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lo7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Disable ""build-sdk-wrapper""  make target from ci-smoke tests",FAB-15245,39435,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,23/Apr/19 4:07 AM,27/Apr/19 4:03 AM,28/Oct/23 3:08 AM,27/Apr/19 4:03 AM,v2.1.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Existing smoke tests don't run SDK API tests so build SDK java jar files with ""build-sdk-wrapper"" is not a good idea. We keep this target in Makefile but disable this from ci-smoke test suite bucket.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lof:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"24/Apr/19 10:36 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/30987/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I would like read fabric documentation in my own native language",FAB-15246,39436,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,zRich,zRich,zRich,23/Apr/19 4:39 AM,04/Dec/20 4:46 AM,28/Oct/23 3:08 AM,04/Dec/20 4:45 AM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,"This issue is for supporting multi-language in fabric use a set of tools, sphinx, readthedocs.io and transifex.com.   The document  is at [https://docs.google.com/document/d/1lOF9kxjN4hK0b4YzlEVsHO8BcB2BjA3CMSemkfdDTdM/edit] ",,pandrejko,zRich,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15978,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00lon:",,,,No,Unset,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),pandrejko,zRich,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/20 8:34 AM;pandrejko;Content delivered in [zh_CN.|https://hyperledger-fabric.readthedocs.io/zh_CN/latest/];;;","04/Dec/20 4:46 AM;pandrejko;Language contributing guide is available here: https://hyperledger-fabric.readthedocs.io/en/latest/international_languages.html;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Combine NewProvider and Initialize functions,FAB-15247,39438,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,23/Apr/19 5:55 AM,30/Apr/19 2:49 AM,28/Oct/23 3:08 AM,30/Apr/19 2:49 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Now that config is passed via an object, we can remove the Initialize function from kvledger.Provider and simply add the logic back into the constructor",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lp3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Apr/19 6:54 PM;mastersingh24;https://gerrit.hyperledger.org/r/31118;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
address code review comments for FAB-15224,FAB-15251,39442,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,23/Apr/19 6:21 AM,04/Jun/19 6:27 AM,28/Oct/23 3:08 AM,24/Apr/19 2:41 AM,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lpz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect Raft proto comments,FAB-15252,39445,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,23/Apr/19 5:07 PM,26/Apr/19 10:54 PM,28/Oct/23 3:08 AM,26/Apr/19 10:54 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,"[This line of comment|https://github.com/hyperledger/fabric/commit/2e3a69b5acaf80cc255743f89927c1d6f2cb00d5#diff-4ca876b1cbaab05d0c1a35cdbfd9acdfL53] was accidentally removed on *master branch*",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lqf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Apr/19 5:17 PM;guoger;https://gerrit.hyperledger.org/r/31059;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove ledger/testutil,FAB-15253,39448,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,23/Apr/19 10:21 PM,27/Apr/19 5:57 PM,28/Oct/23 3:08 AM,27/Apr/19 5:57 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,Use of config setup functions no longer needed and the other functions are not used anywhere else.,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lr3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Apr/19 7:03 PM;mastersingh24;https://gerrit.hyperledger.org/r/31064;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor all test environment code in core/ledger,FAB-15255,39450,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,23/Apr/19 10:40 PM,23/Apr/19 10:56 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,hygiene,,,,,"Most of the test enviornment code can be removed now that object instances are constructed via config and not from viper.

A *ledgertest* package should meet a majority of the needs.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lrj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
error trying to connect to local peer: userChaincodeStreamGetter -> ERRO 003 context deadline exceeded,FAB-15256,39451,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Invalid: Not Supported,,czar0,czar0,23/Apr/19 10:59 PM,05/Jun/19 10:40 PM,28/Oct/23 3:08 AM,05/Jun/19 10:40 PM,v1.4.0,,,,,,,,,,,,,,,,,fabric-peer,fabric-tools,,,,,0,chaincode,helm,Kubernetes,,,"Environment:
 * macOS Mojave 10.14.4
 * Docker Desktop 2.0.0.3 - Engine 18.09.2
 * Kubernetes v1.10.11 using `docker-for-desktop` context ({{kubectl config current-context)}}
 * Using official stable helm charts configuration with a few changes in order to be able to deploy Fabric v1.4

 

Hi, I am deploying a Fabric network on Kubernetes (in Docker Desktop) using the official stable helm charts:
 [hlf-peer|https://github.com/helm/charts/tree/master/stable/hlf-peer]
 [hlf-couchdb|https://github.com/helm/charts/tree/master/stable/hlf-couchdb]
 [hlf-ca|https://github.com/helm/charts/tree/master/stable/hlf-ca]
 [hlf-ord|https://github.com/helm/charts/tree/master/stable/hlf-ord]

All the steps including registration/enrollment of users through the CA using the org admin; create/fetch/join channel go perfectly through, but *the instantiation of the chaincode fails with the error reported in the summary*.

 
 Log of the chaincode container attached to the peer:

{{2019-04-23 10:30:16.848 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 052 2019-04-23 10:30:16.847 UTC [shim] setupChaincodeLogging -> INFO 001 Chaincode (build level: 1.4.1) starting up ...}}
 {{2019-04-23 10:30:16.848 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 053 2019-04-23 10:30:16.847 UTC [shim] userChaincodeStreamGetter -> DEBU 002 Peer address: org1peer1-hlf-peer:7052}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 054 Error starting Sample chaincode: error trying to connect to local peer: context deadline exceeded2019-04-23 10:30:19.848 UTC [shim] userChaincodeStreamGetter -> ERRO 003 context deadline exceeded}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 055 error trying to connect to local peer}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 056 github.com/hyperledger/fabric/core/chaincode/shim.userChaincodeStreamGetter}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 057 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/chaincode.go:112}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 058 github.com/hyperledger/fabric/core/chaincode/shim.Start}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 059 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/chaincode.go:151}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 05a main.main}}
 {{2019-04-23 10:30:19.849 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 05b /chaincode/input/src/chaincode/mychaincode/main.go:399}}
 {{2019-04-23 10:30:19.850 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 05c runtime.main}}
 {{2019-04-23 10:30:19.850 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 05d /opt/go/src/runtime/proc.go:201}}
 {{2019-04-23 10:30:19.850 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 05e runtime.goexit}}
 {{2019-04-23 10:30:19.850 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 05f /opt/go/src/runtime/asm_amd64.s:1333}}
 {{2019-04-23 10:30:20.132 UTC [dockercontroller] func2 -> INFO 060 Container nid1-org1peer1-mychaincode-1.0 has closed its IO channel}}
 {{2019-04-23 10:30:20.277 UTC [endorser] callChaincode -> INFO 061 [mychannel][f425dbb8] Exit chaincode: name:""lscc"" (54274ms)}}
 {{2019-04-23 10:30:20.277 UTC [endorser] SimulateProposal -> ERRO 062 [mychannel][f425dbb8] failed to invoke chaincode name:""lscc"" , error: container exited with 0}}
 {{github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1}}
 {

{ /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:63}

}
 {{runtime.goexit}}
 {

{ /opt/go/src/runtime/asm_amd64.s:1333}

}
 {{chaincode registration failed}}

 

{{+Log on the fabric-tool CLI:+}}
 {{2019-04-23 10:29:26.070 UTC [msp.identity] Sign -> DEBU 0ac Sign: digest: 9E15E09E02EBED2F9D9DEB1F8F556B46F16D6C3D2D796560A2E9DA6EF746E90E}}
 {{Error: could not assemble transaction, err proposal response was not successful, error code 500, msg chaincode registration failed: container exited with 0}}
 {{command terminated with exit code 1}}

 

The orderer is reachable from the peer (tested using telnet).

 

I can see the deployed chaincode image has been built.
 {{nid1-org1peer1-mychaincode-1.0-0495160cf7dc458bb21980ff56b0a3383b4426e923a4180af5b7f746f1bcbc39 latest 32c4b74215ce 29 seconds ago 162MB}}

I am attaching the configtx file and the configmap used to load env variables on the peer.

+Note: I am only using Org1MSP.+

Other (possibly) useful logs

Peer channel list:
 {{kubectl exec --namespace $namespace $peer_pod – bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/admin_msp peer channel list""}}
 {{2019-04-23 11:18:21.117 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized}}
 {{Channels peers has joined:}}
 {{mychannel}}|

 

Peer channel info:
 {{kubectl exec --namespace $namespace $peer_pod – bash -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/admin_msp peer channel getinfo -c $channel_name""}}
 {{2019-04-23 11:14:08.734 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized}}
Blockchain info:

{""height"":1,""currentBlockHash"":""quqIAAOOkC/BuMeibGNujlq822y08nJ4/HvDtQ0nZq0=""}
  
  
 PS: If it can be any relevant to this issue the peer keeps logging this delivery block error:
 {{2019-04-23 11:18:21.124 UTC [comm.grpc.server] 1 -> INFO 0b2 unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=10.1.0.1:56708 grpc.code=OK grpc.call_duration=5.0801ms}}
 {{2019-04-23 11:18:24.085 UTC [ConnProducer] DisableEndpoint -> WARN 0b3 Only 1 endpoint remained, will not black-list it}}
2019-04-23 11:18:24.094 UTC [blocksProvider] DeliverBlocks -> ERRO 0b4 [mychannel] Got error &\{FORBIDDEN}
 {{2019-04-23 11:18:34.096 UTC [ConnProducer] DisableEndpoint -> WARN 0b5 Only 1 endpoint remained, will not black-list it}}
2019-04-23 11:18:34.112 UTC [blocksProvider] DeliverBlocks -> ERRO 0b6 [mychannel] Got error &\{FORBIDDEN}
 {{2019-04-23 11:18:44.079 UTC [ConnProducer] DisableEndpoint -> WARN 0b7 Only 1 endpoint remained, will not black-list it}}
2019-04-23 11:18:44.088 UTC [blocksProvider] DeliverBlocks -> ERRO 0b8 [mychannel] Got error &\{FORBIDDEN}
 {{2019-04-23 11:18:44.088 UTC [blocksProvider] DeliverBlocks -> ERRO 0b9 [mychannel] Wrong statuses threshold passed, stopping block provider}}
  
  ",,czar0,denyeart,MuhammadSalah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Apr/19 10:48 PM;czar0;configmap--peer.yaml;https://jira.hyperledger.org/secure/attachment/17149/configmap--peer.yaml","23/Apr/19 10:03 PM;czar0;configtx.yaml;https://jira.hyperledger.org/secure/attachment/17150/configtx.yaml","01/Jun/19 2:01 PM;MuhammadSalah;deployment.yaml;https://jira.hyperledger.org/secure/attachment/17285/deployment.yaml","01/Jun/19 2:58 AM;MuhammadSalah;hlf-minikube.tar;https://jira.hyperledger.org/secure/attachment/17284/hlf-minikube.tar","30/May/19 7:23 PM;MuhammadSalah;image-2019-05-30-12-24-00-295.png;https://jira.hyperledger.org/secure/attachment/17279/image-2019-05-30-12-24-00-295.png","30/May/19 8:53 PM;MuhammadSalah;image-2019-05-30-13-53-48-874.png;https://jira.hyperledger.org/secure/attachment/17280/image-2019-05-30-13-53-48-874.png","30/May/19 10:20 PM;MuhammadSalah;image-2019-05-30-15-20-52-406.png;https://jira.hyperledger.org/secure/attachment/17282/image-2019-05-30-15-20-52-406.png","05/Jun/19 8:51 PM;czar0;logs-from-chaincode-in-org1peer1-hlf-peer-776b759689-vscp6.txt;https://jira.hyperledger.org/secure/attachment/17305/logs-from-chaincode-in-org1peer1-hlf-peer-776b759689-vscp6.txt","30/May/19 9:41 PM;czar0;logs-from-peer-in-org1peer1-hlf-peer-5c8fcc767c-dtjnt.txt;https://jira.hyperledger.org/secure/attachment/17281/logs-from-peer-in-org1peer1-hlf-peer-5c8fcc767c-dtjnt.txt","05/Jun/19 8:51 PM;czar0;logs-from-peer-in-org1peer1-hlf-peer-776b759689-vscp6.txt;https://jira.hyperledger.org/secure/attachment/17306/logs-from-peer-in-org1peer1-hlf-peer-776b759689-vscp6.txt",,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lrr:",,,,Unset,Unset,,"- Create a new Kubernetes namespace
- Deploy CA with official stable helm charts, hlf-ca, (using a PostgreSQL DB underneath)
- Generate cryptos for Org1MSP admin, peer and orderer (solo)
- Deploy Peer (with couchdb) and Orderer with official stable helm charts, hlf-peer and hlf-ord
- Execute create/fetch/join channel commands from the peer
- Deploy CLI using fabric-tools
- Run install chaincode from CLI using peer credentials
- Run instantiate chaincode from CLI using peer credentials -> error",,Unset,,,,,,Unset,,Unset,,(Please add usage information),czar0,denyeart,MuhammadSalah,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/May/19 7:22 PM;MuhammadSalah;I have followed somewhat a similar approach to the trail, and I found out the charts on the peer are missing some important environment variable declaration, the cause of this problem is ""CORE_PEER_CHAINCODEADDRESS"" environment variable is not set to the peer service, and since the chaincode container is not kubernetes aware, and can not contact the peer back, it just halts, therefore context deadline.;;;","30/May/19 7:36 PM;MuhammadSalah;I have closed this, as it has nothing to do with fab code, an improvement to the chart is needed indeed.;;;","30/May/19 8:27 PM;MuhammadSalah;Re-opened because I just found out about the address auto-detect, and currently debugging.;;;","30/May/19 8:54 PM;MuhammadSalah;!image-2019-05-30-13-53-48-874.png!

Auto-detected address does not reflect on the chaincode runtime in minikube;;;","30/May/19 9:55 PM;czar0;Hi [~MuhammadSalah], indeed I forgot to mention I made some changes to the official charts in order to include the following environment variables otherwise missing:
{code:java}
CORE_PEER_CHAINCODEADDRESS: {{ .Release.Name }}-hlf-peer:7052 
CORE_PEER_CHAINCODELISTENADDRESS: 0.0.0.0:7052 
CORE_PEER_ADDRESS: {{ .Release.Name }}-hlf-peer:{{ .Values.service.portRequest }}
{code}
Where *portRequest* is set to *7051*

 

I attached the full peer log in case you may find it anyhow helpful.

 

There are a couple of details I would like to point to your attention:
 * The address of the peer seems to be correctly detected and the network ID *nid1* correctly assigned

 
{code:java}
2019-05-30 11:58:38.254 UTC [peer] func1 -> INFO 006 Auto-detected peer address: 10.1.6.22:7051
2019-05-30 11:58:38.255 UTC [peer] func1 -> INFO 007 Auto-detect flag is set, returning 10.1.6.22:7051
2019-05-30 11:58:38.255 UTC [peer] func1 -> INFO 008 Auto-detected peer address: 10.1.6.22:7051
2019-05-30 11:58:38.255 UTC [peer] func1 -> INFO 009 Auto-detect flag is set, returning 10.1.6.22:7051
2019-05-30 11:58:38.267 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 00a Entering computeChaincodeEndpoint with peerHostname: 10.1.6.22
2019-05-30 11:58:38.267 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 00b Exit with ccEndpoint: org1peer1-hlf-peer:7052
2019-05-30 11:58:38.270 UTC [sccapi] registerSysCC -> INFO 00c system chaincode lscc(github.com/hyperledger/fabric/core/scc/lscc) registered
2019-05-30 11:58:38.271 UTC [sccapi] registerSysCC -> INFO 00d system chaincode cscc(github.com/hyperledger/fabric/core/scc/cscc) registered
2019-05-30 11:58:38.271 UTC [sccapi] registerSysCC -> INFO 00e system chaincode qscc(github.com/hyperledger/fabric/core/scc/qscc) registered
2019-05-30 11:58:38.273 UTC [sccapi] registerSysCC -> INFO 00f system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle,true) disabled
2019-05-30 11:58:38.295 UTC [gossip.service] func1 -> INFO 010 Initialize gossip with endpoint 10.1.6.22:7051 and bootstrap set [org1peer1-hlf-peer:7051]

2019-05-30 11:58:38.352 UTC [nodeCmd] serve -> INFO 01c Starting peer with ID=[name:""org1peer1"" ], network ID=[nid1], address=[10.1.6.22:7051]
2019-05-30 11:58:38.352 UTC [nodeCmd] serve -> INFO 01d Started peer with ID=[name:""org1peer1"" ], network ID=[nid1], address=[10.1.6.22:7051]{code}
 
 * But the chaincode container has a wrong peer address. Why? This should be its own address.

 
{code:java}
2019-05-30 12:00:11.953 UTC [shim] userChaincodeStreamGetter -> DEBU 002 Peer address: org1peer1-hlf-peer:7052 
{code}
 ;;;","30/May/19 9:58 PM;MuhammadSalah;I am already taking that same procedure now, while I have the autodetect as false.;;;","30/May/19 11:19 PM;MuhammadSalah;[~czar0] I have found this article, and he seems to have a lot figured out
https://medium.com/google-cloud/helm-chart-for-fabric-for-kubernetes-80408b9a3fb6;;;","31/May/19 4:18 AM;denyeart;[~MuhammadSalah] I see you assigned this to yourself. Is there some Fabric update that you are suggesting?;;;","31/May/19 4:45 AM;czar0;[~MuhammadSalah] unluckily that suggested ""trick"" of adding the peer IP address to its _/etc/hosts_ file did not work out.
{code:java}
root@org1peer1-hlf-peer-5c8fcc767c-7hcdf:/# cat /etc/hosts
# Kubernetes-managed hosts file.
127.0.0.1 localhost
::1 localhost ip6-localhost ip6-loopback
fe00::0 ip6-localnet
fe00::0 ip6-mcastprefix
fe00::1 ip6-allnodes
fe00::2 ip6-allrouters
10.1.6.36 org1peer1-hlf-peer-5c8fcc767c-7hcdf
10.1.6.36 org1peer1-hlf-peer
{code}
Log on CLI (fabric-tool)

 
{code:java}
2019-05-30 19:31:58.984 UTC [msp.identity] Sign -> DEBU 0ac Sign: digest: FC5C778AC71E55629E3D2365D56BB9CA73111F6D5769D3838304AE11354CDDF5
Error: could not assemble transaction, err proposal response was not successful, error code 500, msg chaincode registration failed: container exited with 0
command terminated with exit code 1
{code}
 

 

Log on Peer (org1peer1)

 
{code:java}
2019-05-30 19:23:39.305 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 04a 2019-05-30 19:23:39.302 UTC [shim] setupChaincodeLogging -> INFO 001 Chaincode (build level: 1.4.1) starting up ...
2019-05-30 19:23:39.305 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 04a 2019-05-30 19:23:39.302 UTC [shim] setupChaincodeLogging -> INFO 001 Chaincode (build level: 1.4.1) starting up ...
2019-05-30 19:23:39.305 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 04b 2019-05-30 19:23:39.302 UTC [shim] userChaincodeStreamGetter -> DEBU 002 Peer address: org1peer1-hlf-peer:7052
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 04c Error starting Sample chaincode: error trying to connect to local peer: context deadline exceeded
2019-05-30 19:23:42.312 UTC [shim] userChaincodeStreamGetter -> ERRO 003 context deadline exceeded
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 04d error trying to connect to local peer
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 04e github.com/hyperledger/fabric/core/chaincode/shim.userChaincodeStreamGetter
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 04f  /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/chaincode.go:112
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 050 github.com/hyperledger/fabric/core/chaincode/shim.Start
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 051  /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/chaincode.go:151
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 052 main.main
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 053  /chaincode/input/src/chaincode/mychaincode/main.go:399
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 054 runtime.main
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 055  /opt/go/src/runtime/proc.go:201
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 056 runtime.goexit
2019-05-30 19:23:42.313 UTC [peer.chaincode.nid1-org1peer1-mychaincode-1.0] func2 -> INFO 057  /opt/go/src/runtime/asm_amd64.s:1333
2019-05-30 19:23:42.473 UTC [dockercontroller] func2 -> INFO 058 Container nid1-org1peer1-mychaincode-1.0 has closed its IO channel
2019-05-30 19:23:42.605 UTC [endorser] callChaincode -> INFO 059 [mychannel][3ce7f01f] Exit chaincode: name:""lscc""  (4362ms)
2019-05-30 19:23:42.605 UTC [endorser] SimulateProposal -> ERRO 05a [mychannel][3ce7f01f] failed to invoke chaincode name:""lscc"" , error: container exited with 0github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch.func1 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:63runtime.goexit /opt/go/src/runtime/asm_amd64.s:1333chaincode registration failed
{code}
 

 ;;;","31/May/19 6:49 AM;MuhammadSalah;[~denyeart] I tried to verify and debug the problem; however, I am not so sure if I can attempt to put an addition but I always wanted to and try.
I think the vm controller can be also extended to use kubecli to make fabric kubernetes aware; therefore resolving the chaincode hassle part.;;;","31/May/19 6:53 AM;MuhammadSalah;[~czar0] I will continue to dive into it; hopefully I find a clue.;;;","01/Jun/19 2:53 AM;MuhammadSalah;[~czar0] I tried with different setups using NodePorts, I could not get the chaincode to communicate back.
Maybe it's minikube problem, maybe nott; but I don't have a kubernetes cluster available to me now.

I am leaving this as un-assigned until someone who knows how to fix it takes over.;;;","01/Jun/19 1:58 PM;MuhammadSalah;[~czar0] I have solved this issue via a workaround here goes what I did, and it looks neater than proposed in the charts for details can be found here: 
https://applatix.com/case-docker-docker-kubernetes-part-2/

I simply created a chaincodevm container which is an official dind docker image
I augmented it in the helm chart in the deployment, swapped the host shared daemon socket (which I find a very big plus) runs chaincodes inside that container, drawback its a bit slow, but things work now, and it can reconnect the peer since it's running already inside the same pod.

I'll paste the changes here, and a screen shot of the configuration for you to verify as well.

[~denyeart] See if this closes it.


;;;","01/Jun/19 2:01 PM;MuhammadSalah;deployment.yaml includes the set of changes in the hlf-peer chart;;;","05/Jun/19 8:51 PM;czar0;[~MuhammadSalah] thanks for the tip but I did not manage to make it work yet. I am probably doing something wrong in the configuration of the DinD container, even though I followed all the changes you made on the pod, that is:
 * Adding a new container to the pod. I called it *chaincode*, so configured:
 
- name: chaincode
image: ""\{{ .Values.chaincode.image.repository }}:\{{ .Values.chaincode.image.tag }}""
imagePullPolicy: \{{.Values.chaincode.image.pullPolicy}}
securityContext:
privileged: true
volumeMounts:
- name: dockersocket
mountPath: /var/run
 
 * volumeMounts
 
 
- mountPath: /host/var/run
name: dockersocket
 
 * volumes:
 
- name: dockersocket
emptyDir: {}
 
 * Values
 
chaincode:
image:
repository: docker
tag: 18.09.6-dind
pullPolicy: IfNotPresent

 

CLI log:

 
{code:java}
2019-06-05 11:32:56.678 UTC [msp.identity] Sign -> DEBU 0ab Sign: plaintext: 0A9A090A6708031A0C08E8D0DEE70510...1A000A000A04657363630A0476736363 
2019-06-05 11:32:56.678 UTC [msp.identity] Sign -> DEBU 0ac Sign: digest: 00BD423054933666E8CF3B666423A0341580365A3AF987EE3D037AC23D9D557A Error: could not assemble transaction, err proposal response was not successful, error code 500, msg chaincode registration failed: container exited with 0 command terminated with exit code 1
{code}
 

 

I attach complete logs of peer and chaincode DinD container to the issue.;;;","05/Jun/19 9:25 PM;MuhammadSalah;[~czar0] The chaincode reports it can not connect to your peer instance yet, however, it has been passed ""org1peer1-hlf-peer:7052"" as peer address, however; in simple terms a localhost:7052 will do, if you leave the peer setup for the host ip discovery this should work as well, as they all get same host ip (pod ip).
So either, just remove the chaincode peer address variable, let the address auto detect be true, it should work, or just set the peer address as ""localhost:7052"" it will also work hopefully, and let me know.;;;","05/Jun/19 10:33 PM;denyeart;[~czar0] [~MuhammadSalah] While this is useful conversation, I don't think there is any change in base Fabric that you are proposing here.

The hlf helm charts found at [https://github.com/helm/charts/tree/master/stable/hlf-peer] are not part of the Fabric open source project managed in this Hyperledger Jira instance. For issues with the hlf helm charts, please open issues in the helm/charts github repository. I will also note that those helm charts are not ""official"" charts supported or endorsed by the Fabric maintainers.;;;","05/Jun/19 10:38 PM;MuhammadSalah;[~denyeart] Agreed, this is why I went to close it at first; but I had second guessed myself.;;;",,,,,,,,,,,,,,,,,,,,,,,,
core/ledger - constructors should return concrete types,FAB-15257,39452,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,23/Apr/19 11:08 PM,02/May/19 4:01 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,hygiene,,,,,"Example:  almost every sub-package has a *NewProvider(...)* function which returns an interface; instead it should return the concrete type (which of course needs to be exported as well)",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lrz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT - SDK function / API that on query would return list of orderers on a channel,FAB-15258,39453,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,,nileshdeotale,nileshdeotale,23/Apr/19 11:32 PM,15/Jan/20 2:18 AM,28/Oct/23 3:08 AM,15/Jan/20 2:18 AM,v1.4.1,,,,,,,,,,,,,,,,,fabric-sdk-go,fabric-sdk-java,fabric-sdk-node,,,,0,external,sdk-triaged,,,,Is there any way using SDK function or an API to query a single or multi-org channel that would return list of orderers on a channel at given point in time?,,heatherp,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ls7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Oct/19 10:04 PM;heatherp;Hi Nilesh - I'm working through the sdk backlogs with the maintainers and came across this. I'm not sure this is a user story, more of a question - have you considered asking on the Hyperledger RocketChat forums?
What SDK are you hoping will provide you with this functionality?
We think that service discovery will help you, docs here: https://hyperledger-fabric.readthedocs.io/en/release-1.4/discovery-overview.html#how-service-discovery-works-in-fabric;;;","15/Jan/20 2:18 AM;heatherp;Not had a response since October, so I'm closing this - feel free to re-open;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
'CORE_CHAINCODE_MODE=dev' for docker 'fabric-peer',FAB-15259,39458,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,davidkhala,davidkhala,24/Apr/19 1:27 AM,24/Apr/19 1:29 AM,28/Oct/23 3:08 AM,,v1.4.1,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,peer-chaincodedev,,,,,"I find even we set

{color:#6a8759}'CORE_CHAINCODE_MODE=dev'{color}, as a environment to a container based on 'fabric-peer' docker image.

The peer will not run in peer dev mode

Is it designed to be?",,davidkhala,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00lsn:",,,,Unset,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,siddjain,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use default error stream if GetSettings fails,FAB-15260,39459,39370,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,24/Apr/19 1:41 AM,24/Apr/19 4:51 PM,28/Oct/23 3:08 AM,24/Apr/19 4:51 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"if GetSettings fails, it returns nil for environment settings.  The default error stream should be used in this case.",,bpbuch,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lsv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,lehors,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/19 4:51 PM;lehors;https://gerrit.hyperledger.org/r/#/c/31071/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
discovery cc2cc queries fail when one policy covers entirely another policy.,FAB-15261,39460,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,24/Apr/19 1:41 AM,15/Jul/19 8:29 PM,28/Oct/23 3:08 AM,24/Apr/19 7:02 AM,,,,,,,,,,,,,,v1.2.2,v1.4.2,v2.0.0,,fabric-gossip,,,,,,0,,,,,,"given the following 2 endorsement policies (in any order), the chaincode to chaincode query return an empty set:

{code}
policy1: AND(Org1.member, Org2.member)
policy 2: OR(Org1.member, Org2.member)
{code}",,baohua,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lt3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,yacovm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.2,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Apr/19 1:50 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/31068/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Names: hyperledger/fabric/core/deliverservice hosts package deliverclient,FAB-15262,39462,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,24/Apr/19 3:38 AM,01/May/19 2:51 AM,28/Oct/23 3:08 AM,01/May/19 2:51 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,"The last segment of the import path should be the name of the package that's being imported. Either the folder (deliverservice) is incorrectly named or the package (deliverclient) is. Either way, something needs to change and all referencing code updated.

It's generally confusing to have an import of 'foo' only to have the exported symbols in the 'bar' package.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ltj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/May/19 2:51 AM;sykesm;https://gerrit.hyperledger.org/r/c/31079/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Newly defined and not yet instantiated chaincode definition must shadow any existing definition from the legacy lifecycle,FAB-15263,39473,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,24/Apr/19 4:54 PM,24/May/19 4:55 PM,28/Oct/23 3:08 AM,24/May/19 4:55 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,See [https://gerrit.hyperledger.org/r/#/c/30969/18/core/chaincode/lifecycle/metadata_manager.go@110] and [https://gerrit.hyperledger.org/r/#/c/30969/18/core/chaincode/lifecycle/metadata_provider.go@28] for more context,,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lvb:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/May/19 12:04 AM;wlahti;Incorporated a fix for this in [https://gerrit.hyperledger.org/r/c/30969/].;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Servicediscovery endorsments for lifecycle deployment API.,FAB-15264,39480,,Story,To Do,FAB,Fabric,software,denyeart,,,Medium,,,rickr,rickr,24/Apr/19 8:36 PM,17/May/19 11:34 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.1.0,,,,,,,,,,0,,,,,,Task to investigate and todo anding Service discovery endorsement layout discovery of the lifecycle management APIs where appropriate.  I'm thinking the only one really needed is CommitChaincodeDefinition,,rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00lvr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rickr,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
configtxgen Case sensitivity problem when parsing Profile ,FAB-15265,39490,,Bug,Returned,FAB,Fabric,software,denyeart,,,Medium,,,ghatdev,ghatdev,25/Apr/19 12:35 AM,11/Jun/19 12:14 AM,28/Oct/23 3:08 AM,,v1.4.1,,,,,,,,,,,,,,,,,fabric-tools,,,,,,0,,,,,,"{code:go}
func main() {
...
    flag.StringVar(&profile, ""profile"", genesisconfig.SampleInsecureSoloProfile, ""The profile from configtx.yaml to use for generation."")
...
{code}

When executing this:
{code:bash}
configtxgen -profile TwoOrgsOrdererGenesis -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block
{code}
profile value is TwoOrgsOrdererGenesis but parsed config value of profile (at uconf.Profiles) is twoorgsorderergenesis

So I fixed by adding this line right behind flag.Parse() like this:
{code:go}
profile = strings.ToLower(profile)
{code}
",,ghatdev,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lxr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ghatdev,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jun/19 12:14 AM;jyellick;This is tested successfully in the fabric-samples.  Is it possible this is being performed with an updated version of Viper (which changes the case sensitivity properties of the config parsing).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Peer Config Flag,FAB-15266,39491,39370,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,25/Apr/19 12:44 AM,09/Aug/19 3:06 AM,28/Oct/23 3:08 AM,09/Aug/19 3:06 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,The CLI should provide a flag that allows the user to specify which peers are associated with a specific context.,,bpbuch,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lxz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,lehors,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jul/19 4:36 AM;bpbuch;https://gerrit.hyperledger.org/r/c/fabric-cli/+/32464;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
mock generation should never reference foreign interfaces or traverse parent directories,FAB-15267,39492,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,sykesm,sykesm,25/Apr/19 1:35 AM,03/May/19 4:24 AM,28/Oct/23 3:08 AM,03/May/19 4:24 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"As of current master, the following {{go:generate}} statements traverse parent directories. 

{code}
$ ag 'go:generate' | grep '\.\.'
core/endorser/plugin_endorser.go:23://go:generate mockery -dir ../transientstore/ -name Store -case underscore -output mocks/
core/chaincode/chaincode_suite_test.go:68://go:generate mockery -dir ../common/ccprovider/ -name ChaincodeDefinition -case underscore -output mock/ -outpkg mock
core/committer/txvalidator/v14/plugin_validator.go:27://go:generate mockery -dir ../plugin/ -name Mapper -case underscore -output mocks/
core/committer/txvalidator/v14/plugin_validator.go:28://go:generate mockery -dir ../../../handlers/validation/api/ -name PluginFactory -case underscore -output mocks/
core/committer/txvalidator/v14/plugin_validator.go:29://go:generate mockery -dir ../../../handlers/validation/api/ -name Plugin -case underscore -output mocks/
core/committer/txvalidator/v14/plugin_validator.go:65://go:generate mockery -dir ../../../handlers/validation/api/capabilities/ -name Capabilities -case underscore -output mocks/
core/committer/txvalidator/v14/plugin_validator.go:66://go:generate mockery -dir ../../../../msp/ -name IdentityDeserializer -case underscore -output mocks/
core/committer/txvalidator/v20/validator.go:81://go:generate mockery -dir ../../../ledger/ -name QueryExecutor -case underscore -output mocks/
core/committer/txvalidator/v20/validator.go:82://go:generate mockery -dir ../../../../common/policies/ -name ChannelPolicyManagerGetter -case underscore -output mocks/
core/committer/txvalidator/v20/valinforetriever/shim.go:14://go:generate mockery -dir ../plugindispatcher/ -name LifecycleResources -case underscore -output mocks/
core/committer/txvalidator/v20/plugindispatcher/plugin_validator.go:29://go:generate mockery -dir ../../plugin/ -name Mapper -case underscore -output mocks/
core/committer/txvalidator/v20/plugindispatcher/plugin_validator.go:30://go:generate mockery -dir ../../../../handlers/validation/api/ -name PluginFactory -case underscore -output mocks/
core/committer/txvalidator/v20/plugindispatcher/plugin_validator.go:31://go:generate mockery -dir ../../../../handlers/validation/api/ -name Plugin -case underscore -output mocks/
core/committer/txvalidator/v20/plugindispatcher/plugin_validator.go:69://go:generate mockery -dir ../../../../handlers/validation/api/capabilities/ -name Capabilities -case underscore -output mocks/
core/committer/txvalidator/v20/plugindispatcher/plugin_validator.go:70://go:generate mockery -dir ../../../../../msp/ -name IdentityDeserializer -case underscore -output mocks/
core/committer/txvalidator/v20/plugindispatcher/plugin_validator.go:71://go:generate mockery -dir ../../../../../common/policies/ -name ChannelPolicyManagerGetter -case underscore -output mocks/
core/handlers/validation/builtin/v12/validation_logic.go:47://go:generate mockery -dir ../../api/capabilities/ -name Capabilities -case underscore -output mocks/
core/handlers/validation/builtin/v12/validation_logic.go:48://go:generate mockery -dir ../../api/state/ -name StateFetcher -case underscore -output mocks/
core/handlers/validation/builtin/v12/validation_logic.go:49://go:generate mockery -dir ../../api/identities/ -name IdentityDeserializer -case underscore -output mocks/
core/handlers/validation/builtin/v12/validation_logic.go:50://go:generate mockery -dir ../../api/policies/ -name PolicyEvaluator -case underscore -output mocks/
core/handlers/validation/builtin/v13/validation_logic.go:30://go:generate mockery -dir ../../api/capabilities/ -name Capabilities -case underscore -output mocks/
core/handlers/validation/builtin/v13/validation_logic.go:31://go:generate mockery -dir ../../api/state/ -name StateFetcher -case underscore -output mocks/
core/handlers/validation/builtin/v13/validation_logic.go:32://go:generate mockery -dir ../../api/identities/ -name IdentityDeserializer -case underscore -output mocks/
core/handlers/validation/builtin/v13/validation_logic.go:33://go:generate mockery -dir ../../api/policies/ -name PolicyEvaluator -case underscore -output mocks/
core/handlers/validation/builtin/v20/validation_logic.go:28://go:generate mockery -dir ../../api/identities/ -name IdentityDeserializer -case underscore -output mocks/
core/handlers/validation/builtin/v20/validation_logic.go:30://go:generate mockery -dir ../../../../common/validation/statebased/ -name CollectionResources -case underscore -output mocks/
core/policy/application.go:32://go:generate mockery -dir ../../common/policies/ -name Policy -case underscore -output mocks/
core/policy/application.go:33://go:generate mockery -dir ../../common/policies/ -name ChannelPolicyManagerGetter -case underscore -output mocks/
core/policy/application.go:34://go:generate mockery -dir ../../common/policies/ -name Manager -case underscore -output mocks/
core/policy/application_test.go:23://go:generate mockery -dir ../../msp/ -name IdentityDeserializer -case underscore -output mocks/
core/policy/application_test.go:24://go:generate mockery -dir ../../msp/ -name Identity -case underscore -output mocks/
discovery/cmd/stub.go:21://go:generate mockery -dir ../client/ -name LocalResponse -case underscore -output mocks/
discovery/cmd/stub.go:22://go:generate mockery -dir ../client/ -name ChannelResponse -case underscore -output mocks/
discovery/api.go:30://go:generate mockery -name GossipSupport -case underscore -output ../support/mocks/
discovery/support/acl/support.go:107://go:generate mockery -name ChannelPolicyManagerGetter -case underscore  -output ../mocks/
gossip/privdata/coordinator.go:40://go:generate mockery -dir ../../core/common/privdata/ -name CollectionStore -case underscore -output mocks/
gossip/privdata/coordinator.go:41://go:generate mockery -dir ../../core/committer/ -name Committer -case underscore -output mocks/
gossip/privdata/reconcile.go:33://go:generate mockery -dir ../../core/ledger/ -name MissingPvtDataTracker -case underscore -output mocks/
gossip/privdata/reconcile.go:34://go:generate mockery -dir ../../core/ledger/ -name ConfigHistoryRetriever -case underscore -output mocks/
gossip/privdata/dataretriever.go:27://go:generate mockery -dir ../../core/transientstore/ -name RWSetScanner -case underscore -output mocks/
gossip/privdata/dataretriever.go:28://go:generate mockery -dir ../../core/ledger/ -name ConfigHistoryRetriever -case underscore -output mocks/
gossip/api/channel.go:21://go:generate mockery -dir . -name SecurityAdvisor -case underscore -output ../mocks/
internal/configtxgen/encoder/encoder_test.go:26://go:generate counterfeiter -o fakes/signer_serializer.go --fake-name SignerSerializer ../../pkg/identity SignerSerializer
{code}

This introduces a latent dependency that is not discovered in the build process or testing that impacts refactoring.

The existing directives need to be evaluated and updated to place mocks in a subdirectory of the current folder using locally defined interfaces. Where the mock is for a foreign interface, a local interface that embeds the foreign interface should be declared in a test package and used to generate the mocks.",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15268,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lto:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add check to make process that prevents developers from using parent path references (..) in go:generate statements,FAB-15268,39493,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,25/Apr/19 1:43 AM,14/May/19 6:14 AM,28/Oct/23 3:08 AM,14/May/19 6:14 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"The {{checks}} target should be updated to look through the code base for {{go:generate}} lines that include the {{..}} literal. If one is found (outside of standard excludes like vendor), the check should fail.

One possible implementation could use something like

{code}
 find . -maxdepth 1 -type d | grep -Ev '^.$|.git|vendor|.build|.git' | xargs grep -R 'go:generate.*\.\.'
{code}

to find the pattern",,sykesm,,,,,,,,,,,,,,,,,,,,,,,FAB-15267,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ltp:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/19 4:51 AM;sykesm;https://gerrit.hyperledger.org/r/c/31268/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincodes installed via _lifecycle and lscc cannot coexist in the same folder on the peer,FAB-15269,39494,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,25/Apr/19 1:57 AM,02/May/19 5:34 AM,28/Oct/23 3:08 AM,02/May/19 5:34 AM,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,"Due to the way the lscc's ccprovider package parses installed chaincodes (simply splitting the name at the first period and then attempting to unmarshal the file into a ChaincodeDeploymentSpec), the call to list all installed chaincodes will fail when lscc and _lifecycle chaincode install packages exist in the folder on the peer.

Since we cannot change the location of the lscc installed chaincodes due to compatibility issues, we should store _lifecycle chaincodes in a new folder. The current thought is to use
{code:java}
<peer.fileSystemPath>/lifecycle/chaincodes {code}",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00ly7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/19 10:58 PM;wlahti;[https://gerrit.hyperledger.org/r/c/31096/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Check if active profile is populated,FAB-15270,39496,38926,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,bpbuch,bpbuch,25/Apr/19 3:51 AM,28/Aug/19 12:26 AM,28/Oct/23 3:08 AM,28/Aug/19 12:26 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,The commands that interact with the Go SDK should fail if the active profile is not populated.,,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15279,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lyn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Aug/19 12:26 AM;bpbuch;This was fixed during the profile refactor.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Installing a legacy chaincode should not process indexes definition if the chaincode is already defined using new lifecycle,FAB-15271,39498,39066,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,25/Apr/19 11:33 AM,29/May/19 1:12 PM,28/Oct/23 3:08 AM,29/May/19 1:12 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lyv:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Apr/19 12:27 PM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/31138/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove ValidatedLedger interface,FAB-15274,39503,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,25/Apr/19 6:15 PM,27/Sep/19 10:34 AM,28/Oct/23 3:08 AM,09/Jun/19 5:20 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,not used anywhere,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00lzj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Apr/19 6:16 PM;mastersingh24;https://gerrit.hyperledger.org/r/31086;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix license statements,FAB-15276,39507,39411,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,25/Apr/19 6:34 PM,25/Apr/19 9:34 PM,28/Oct/23 3:08 AM,25/Apr/19 9:34 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,Not a security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m0f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Apr/19 6:37 PM;mastersingh24;https://gerrit.hyperledger.org/r/31090;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test daily test suite: all 3 fabric-ca integration tests fail,FAB-15277,39512,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,25/Apr/19 10:58 PM,03/May/19 10:05 PM,28/Oct/23 3:08 AM,03/May/19 10:05 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"In master branch, all 3 tests executed by runCATestSuite.sh fail consistently.
After first examination:
* it appears the fabric-samples/fabric-ca directory itself was removed, so we need to locate the new home where the test was moved.
* the fabric-ca-fvt is no longer pushed to nexus, so probably we must build it ourselves

{quote}20:56:01 cd /w/workspace/fabric-test-daily-ca-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily && ./runCATestSuite.sh
20:56:01 ======== Fabric-CA ACL smoke test... ========
20:56:02 ============================= test session starts ==============================
20:56:02 platform linux2 -- Python 2.7.12, pytest-2.8.7, py-1.4.31, pluggy-0.3.1 -- /usr/bin/python
20:56:02 cachedir: .cache
20:56:02 rootdir: /w/workspace/fabric-test-daily-ca-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily, inifile: 
20:56:02 collecting ... collected 1 items
20:56:02 
20:56:02 acl_happy_path.py::ACL::test_FAB6490_Using_FCA_With_ACL_Permissioning FAILED
20:56:02 
20:56:02  generated xml file: /w/workspace/fabric-test-daily-ca-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily/results_acl.xml 
20:56:02 =================================== FAILURES ===================================
20:56:02 ______________ ACL.test_FAB6490_Using_FCA_With_ACL_Permissioning _______________
20:56:02 
20:56:02 self = <acl_happy_path.ACL testMethod=test_FAB6490_Using_FCA_With_ACL_Permissioning>
20:56:02 
20:56:02     def test_FAB6490_Using_FCA_With_ACL_Permissioning(self):
20:56:02         '''
20:56:02              In this ACL test, we execute the fabric-ca sample that
20:56:02              is located in the fabric-sample repository. This sample executes a
20:56:02              ""happy path"" scenario to ensure that the when a user is given limited
20:56:02              access, that the ACL rule is followed as expected.
20:56:02     
20:56:02              Passing criteria: The sample executes with a congratulatory message.
20:56:02             '''
20:56:02 >       self.assertTrue(os.path.exists(fca_sample_directory), msg=""The fabric-ca chaincode test does not exist in this directory setup"")
20:56:02 E       AssertionError: The fabric-ca chaincode test does not exist in this directory setup
20:56:02 
20:56:02 acl_happy_path.py:24: AssertionError
20:56:02 =========================== 1 failed in 0.04 seconds ===========================
20:56:02 ======== Fabric-CA tests...========
20:56:02 ============================= test session starts ==============================
20:56:02 platform linux2 -- Python 2.7.12, pytest-2.8.7, py-1.4.31, pluggy-0.3.1 -- /usr/bin/python
20:56:02 cachedir: .cache
20:56:02 rootdir: /w/workspace/fabric-test-daily-ca-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily, inifile: 
20:56:02 collecting ... collected 2 items
20:56:02 
20:56:02 ca_tests.py::FabricCaTests::test_FAB6863_BasicCAClustering FAILED
20:56:03 ca_tests.py::FabricCaTests::test_FAB7206_GenCrlWindows FAILED
20:56:03 
20:56:03  generated xml file: /w/workspace/fabric-test-daily-ca-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily/results_fabric-ca_tests.xml 
20:56:03 =================================== FAILURES ===================================
20:56:03 _________________ FabricCaTests.test_FAB6863_BasicCAClustering _________________
20:56:03 
20:56:03 self = <ca_tests.FabricCaTests testMethod=test_FAB6863_BasicCAClustering>
20:56:03 
20:56:03     def test_FAB6863_BasicCAClustering(self):
20:56:03         createLog = 'mkdir -p /tmp/logs/FAB6863; chmod 777 /tmp/logs/FAB6863'
20:56:03         startContainer = 'docker run -v /tmp/logs/FAB6863:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128'
20:56:03         command = createLog + ';' + startContainer
20:56:03 >       output = check_output([command], shell=True)
20:56:03 
20:56:03 ca_tests.py:17: 
20:56:03 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
20:56:03 
20:56:03 popenargs = (['mkdir -p /tmp/logs/FAB6863; chmod 777 /tmp/logs/FAB6863;docker run -v /tmp/logs/FAB6863:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128'],)
20:56:03 kwargs = {'shell': True}, process = <subprocess.Popen object at 0x7f042a119d90>
20:56:03 output = '', unused_err = None, retcode = 125
20:56:03 cmd = ['mkdir -p /tmp/logs/FAB6863; chmod 777 /tmp/logs/FAB6863;docker run -v /tmp/logs/FAB6863:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128']
20:56:03 
20:56:03     def check_output(*popenargs, **kwargs):
20:56:03         r""""""Run command with arguments and return its output as a byte string.
20:56:03     
20:56:03         If the exit code was non-zero it raises a CalledProcessError.  The
20:56:03         CalledProcessError object will have the return code in the returncode
20:56:03         attribute and output in the output attribute.
20:56:03     
20:56:03         The arguments are the same as for the Popen constructor.  Example:
20:56:03     
20:56:03         >>> check_output([""ls"", ""-l"", ""/dev/null""])
20:56:03         'crw-rw-rw- 1 root root 1, 3 Oct 18  2007 /dev/null\n'
20:56:03     
20:56:03         The stdout argument is not allowed as it is used internally.
20:56:03         To capture standard error in the result, use stderr=STDOUT.
20:56:03     
20:56:03         >>> check_output([""/bin/sh"", ""-c"",
20:56:03         ...               ""ls -l non_existent_file ; exit 0""],
20:56:03         ...              stderr=STDOUT)
20:56:03         'ls: non_existent_file: No such file or directory\n'
20:56:03         """"""
20:56:03         if 'stdout' in kwargs:
20:56:03             raise ValueError('stdout argument not allowed, it will be overridden.')
20:56:03         process = Popen(stdout=PIPE, *popenargs, **kwargs)
20:56:03         output, unused_err = process.communicate()
20:56:03         retcode = process.poll()
20:56:03         if retcode:
20:56:03             cmd = kwargs.get(""args"")
20:56:03             if cmd is None:
20:56:03                 cmd = popenargs[0]
20:56:03 >           raise CalledProcessError(retcode, cmd, output=output)
20:56:03 E           CalledProcessError: Command '['mkdir -p /tmp/logs/FAB6863; chmod 777 /tmp/logs/FAB6863;docker run -v /tmp/logs/FAB6863:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt ./scripts/fvt/cluster_test.sh 4 4 8 128']' returned non-zero exit status 125
20:56:03 
20:56:03 /usr/lib/python2.7/subprocess.py:574: CalledProcessError
20:56:03 ----------------------------- Captured stderr call -----------------------------
20:56:03 Unable to find image 'hyperledger/fabric-ca-fvt:latest' locally
20:56:03 docker: Error response from daemon: pull access denied for hyperledger/fabric-ca-fvt, repository does not exist or may require 'docker login'.
20:56:03 See 'docker run --help'.
20:56:03 ___________________ FabricCaTests.test_FAB7206_GenCrlWindows ___________________
20:56:03 
20:56:03 self = <ca_tests.FabricCaTests testMethod=test_FAB7206_GenCrlWindows>
20:56:03 
20:56:03     def test_FAB7206_GenCrlWindows(self):
20:56:03         createLog = 'mkdir -p /tmp/logs/FAB7206; chmod 777 /tmp/logs/FAB7206'
20:56:03         startContainer = 'docker run -v $PWD/../../tools/CTE/:/tmp/test -v /tmp/logs/FAB7206:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt /tmp/test/crl_test.sh'
20:56:03         command = createLog + ';' + startContainer
20:56:03 >       output = check_output([command], shell=True)
20:56:03 
20:56:03 ca_tests.py:25: 
20:56:03 _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
20:56:03 
20:56:03 popenargs = (['mkdir -p /tmp/logs/FAB7206; chmod 777 /tmp/logs/FAB7206;docker run -v $PWD/../../tools/CTE/:/tmp/test -v /tmp/logs/...WD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt /tmp/test/crl_test.sh'],)
20:56:03 kwargs = {'shell': True}, process = <subprocess.Popen object at 0x7f042a0c9410>
20:56:03 output = '', unused_err = None, retcode = 125
20:56:03 cmd = ['mkdir -p /tmp/logs/FAB7206; chmod 777 /tmp/logs/FAB7206;docker run -v $PWD/../../tools/CTE/:/tmp/test -v /tmp/logs/F...$PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt /tmp/test/crl_test.sh']
20:56:03 
20:56:03     def check_output(*popenargs, **kwargs):
20:56:03         r""""""Run command with arguments and return its output as a byte string.
20:56:03     
20:56:03         If the exit code was non-zero it raises a CalledProcessError.  The
20:56:03         CalledProcessError object will have the return code in the returncode
20:56:03         attribute and output in the output attribute.
20:56:03     
20:56:03         The arguments are the same as for the Popen constructor.  Example:
20:56:03     
20:56:03         >>> check_output([""ls"", ""-l"", ""/dev/null""])
20:56:03         'crw-rw-rw- 1 root root 1, 3 Oct 18  2007 /dev/null\n'
20:56:03     
20:56:03         The stdout argument is not allowed as it is used internally.
20:56:03         To capture standard error in the result, use stderr=STDOUT.
20:56:03     
20:56:03         >>> check_output([""/bin/sh"", ""-c"",
20:56:03         ...               ""ls -l non_existent_file ; exit 0""],
20:56:03         ...              stderr=STDOUT)
20:56:03         'ls: non_existent_file: No such file or directory\n'
20:56:03         """"""
20:56:03         if 'stdout' in kwargs:
20:56:03             raise ValueError('stdout argument not allowed, it will be overridden.')
20:56:03         process = Popen(stdout=PIPE, *popenargs, **kwargs)
20:56:03         output, unused_err = process.communicate()
20:56:03         retcode = process.poll()
20:56:03         if retcode:
20:56:03             cmd = kwargs.get(""args"")
20:56:03             if cmd is None:
20:56:03                 cmd = popenargs[0]
20:56:03 >           raise CalledProcessError(retcode, cmd, output=output)
20:56:03 E           CalledProcessError: Command '['mkdir -p /tmp/logs/FAB7206; chmod 777 /tmp/logs/FAB7206;docker run -v $PWD/../../tools/CTE/:/tmp/test -v /tmp/logs/FAB7206:/tmp -v $PWD/../../fabric-ca:/opt/gopath/src/github.com/hyperledger/fabric-ca hyperledger/fabric-ca-fvt /tmp/test/crl_test.sh']' returned non-zero exit status 125
20:56:03 
20:56:03 /usr/lib/python2.7/subprocess.py:574: CalledProcessError
20:56:03 ----------------------------- Captured stderr call -----------------------------
20:56:03 Unable to find image 'hyperledger/fabric-ca-fvt:latest' locally
20:56:03 docker: Error response from daemon: pull access denied for hyperledger/fabric-ca-fvt, repository does not exist or may require 'docker login'.
20:56:03 See 'docker run --help'.
20:56:03 =========================== 2 failed in 0.73 seconds ===========================
20:56:03 ------> Archiving generated logs
20:56:03 cp: cannot stat '/w/workspace/fabric-test-daily-ca-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/fabric-samples/fabric-ca/data/logs/*.log': No such file or directory{quote}",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m1j:",,,,Unset,Unset,,"Run the fabric-test daily test suite. In particular:
cd /w/workspace/fabric-test-daily-ca-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily && ./runCATestSuite.sh",,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,true,"26/Apr/19 1:29 AM;scottz;https://gerrit.hyperledger.org/r/#/c/31081/ = master branch;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Correct endpoint configuration type names,FAB-15278,39514,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,aleksandar.likic,aleksandar.likic,26/Apr/19 12:59 AM,26/Apr/19 1:04 AM,28/Oct/23 3:08 AM,26/Apr/19 1:04 AM,,,,,,,,,,,,,,,,,,fabric-sdk-go,,,,,,0,,,,,,"Type endpoint.TLSKeyPair is used in two contexts: as a TLS client identity, and as a user signing identity. TLSKeyPair should be renamed to reflect this.

Also, endpoint.TLSConfig just holds a key material in PEM format. The name should reflect the usage.",,aleksandar.likic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABG-858,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrnx:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),aleksandar.likic,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor profile model,FAB-15279,39516,39370,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bpbuch,bpbuch,bpbuch,26/Apr/19 2:03 AM,28/Aug/19 12:26 AM,28/Oct/23 3:08 AM,29/May/19 11:06 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Currently, the profile contains both network configuration and context information.  These details should be separated.",,bpbuch,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15270,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m1z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bpbuch,,,,,,,,,,,,,,,,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/May/19 11:15 PM;bpbuch;https://gerrit.hyperledger.org/r/#/c/fabric-cli/+/31454/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"If the statsd endpoint hostname cannot be resolved by DNS, or connection refused while using TCP, the process panics",FAB-15282,39519,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,nyet,nyet,26/Apr/19 2:53 AM,30/Apr/19 10:29 PM,28/Oct/23 3:08 AM,30/Apr/19 10:29 PM,v1.4.0,,,,,,,,,,,,,,,,,fabric-ca,fabric-orderer,fabric-peer,,,,0,metrics,operations,statsd,,,"{{stats}} is a host that cannot be resolved by DNS:
{code}
orderer0 | 2019-04-25 17:19:23.234 UTC [orderer.common.server] Start -> PANI 0cf failed to initialize operations subsystem: dial tcp: lookup stats on 127.0.0.11:53: no such host
orderer0 | panic: failed to initialize operations subsystem: dial tcp: lookup stats on 127.0.0.11:53: no such host
orderer0 |
orderer0 | goroutine 1 [running]:
orderer0 | github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0003e09a0, 0x0, 0x0, 0x0)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
orderer0 | github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc00000e1e0, 0xc00000e004, 0xf763f0, 0x2d, 0xc000455df0, 0x1, 0x1, 0x0, 0x0, 0x0)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
orderer0 | github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc00000e1e0, 0xf763f0, 0x2d, 0xc000455df0, 0x1, 0x1)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
orderer0 | github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc00000e1e8, 0xf763f0, 0x2d, 0xc000455df0, 0x1, 0x1)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60
orderer0 | github.com/hyperledger/fabric/orderer/common/server.Start(0xf4dfc0, 0x5, 0xc000428000)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:118 +0x22b
orderer0 | github.com/hyperledger/fabric/orderer/common/server.Main()
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:87 +0x1ce
orderer0 | main.main()
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20
orderer0 exited with code 2
{code}

{{stats}} is a host that is refusing TCP connections, and {{CORE_METRICS_STATSD_NETWORK=tcp}}
{code}
orderer0 | 2019-04-25 17:54:48.444 UTC [orderer.common.server] Start -> PANI 0cf failed to initialize operations subsystem: dial tcp 172.26.0.2:8126: connect: connection refused
orderer0 | panic: failed to initialize operations subsystem: dial tcp 172.26.0.2:8126: connect: connection refused
orderer0 |
orderer0 | goroutine 1 [running]:
orderer0 | github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0000edb80, 0x0, 0x0, 0x0)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
orderer0 | github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0000b2250, 0xc0000b2104, 0xf763f0, 0x2d, 0xc000017df0, 0x1, 0x1, 0x0, 0x0, 0x0)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
orderer0 | github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc0000b2250, 0xf763f0, 0x2d, 0xc000017df0, 0x1, 0x1)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
orderer0 | github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(0xc0000b2258, 0xf763f0, 0x2d, 0xc000017df0, 0x1, 0x1)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:74 +0x60
orderer0 | github.com/hyperledger/fabric/orderer/common/server.Start(0xf4dfc0, 0x5, 0xc000240000)
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:118 +0x22b
orderer0 | github.com/hyperledger/fabric/orderer/common/server.Main()
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:87 +0x1ce
orderer0 | main.main()
orderer0 |     /opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20
{code}
The code should drop (or queue) the message that is trying to be sent, and retry later",,nyet,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m2n:",,,,Unset,Unset,,"Either
1) Provision a statsd operations endpoint to a hostname that cannot be 
resolved
or
2) Provision a statsd operations endpoint that refuses connections and set CORE_METRICS_STATSD_NETWORK=tcp",,Unset,,,,,,Unset,,Unset,,(Please add usage information),nyet,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/19 2:57 AM;yacovm;[~sykesm]
;;;","26/Apr/19 3:12 AM;nyet;UDP behaves a bit differently on connection refused, but I think it still fails if DNS doesn't resolve, need to do further testing.;;;","26/Apr/19 3:17 AM;nyet;BTW this makes me think the upstream zap code probably also does not handle the case where the DNS changes for a host once the operations subsystem is initialized

That would be really really bad as well. Possibly worse, since stuff will just disappear with no trace.;;;","26/Apr/19 3:19 AM;nyet;In particular, docker may give components on the docker network a different internal IP. This means if the component is restarted
 1) the fabric process will panic
 2) if this bug is fixed, fabric will not be able to contact the statsd listener if its ip changed.;;;","27/Apr/19 1:11 AM;sykesm;The panic at start is from the pre-flight check on the endpoint and intentional. If you point to a destination that does appear to be ""correct,"" we terminate the process. If the endpoint becomes unreachable after launch or a write attempt fails, the go-kit connection manager includes recovery logic for reconnect and exponential backoff.

Also, I have no idea what this has to do with ""the upstream zap"" code that you're referring to.;;;","27/Apr/19 1:15 AM;nyet;Sorry, I misunderstood the backtrace. I assumed it was part of a connect library, but it seems to be a logging library?

 

Also if the DNS changes, will it pick it up or will it continue to use the IP resolved at launch time?;;;","27/Apr/19 1:33 AM;nyet;Finally it doesn't seem to affect UDP (assuming DNS resolves); is that expected?

Thanks!;;;","30/Apr/19 10:28 PM;sykesm;> Finally it doesn't seem to affect UDP (assuming DNS resolves); is that expected?

UDP is connectionless so, yeah, it's expected. Sending a UDP message presents very few failure modes to the sender but there are no assurances that the message makes it to its intended destination.;;;","30/Apr/19 10:29 PM;sykesm;> Also if the DNS changes, will it pick it up or will it continue to use the IP resolved at launch time?

System and environment dependent. Using cgo resolver or plain old go resolver, TTL on DNS records, etc. No easy answer. You have to try in your target environment.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
orderer/common/msgprocessor/systemchannel.go NewChannelConfig() needs more debug info,FAB-15283,39520,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,,nyet,nyet,26/Apr/19 3:03 AM,17/Apr/21 12:20 AM,28/Oct/23 3:08 AM,17/Apr/21 12:20 AM,v1.4.0,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"{code}
Rejecting broadcast of config message from xx.xx.xx.xx:41982 because of error: Attempted to include a member which is not in the consortium
{code}
maybe something like
{code:go}
diff --git a/orderer/common/msgprocessor/systemchannel.go b/orderer/common/msgprocessor/systemchannel.go
index bae5c60a7..8e8248e7a 100644
--- a/orderer/common/msgprocessor/systemchannel.go
+++ b/orderer/common/msgprocessor/systemchannel.go
@@ -284,16 +284,20 @@ func (dt *DefaultTemplator) NewChannelConfig(envConfigUpdate *cb.Envelope) (chan
        // if the consortium group has any members, there must be at least one member in the source request
        if len(systemChannelGroup.Groups[channelconfig.ConsortiumsGroupKey].Groups[consortium.Name].Groups) > 0 &&
                len(configUpdate.WriteSet.Groups[channelconfig.ApplicationGroupKey].Groups) == 0 {
-               return nil, fmt.Errorf(""Proposed configuration has no application group members, but consortium contains members"")
+               return nil, fmt.Errorf(""Proposed configuration has no application group members, but consortium '%s' contains members"", consortium.Name)
        }

        // If the consortium has no members, allow the source request to contain arbitrary members
        // Otherwise, require that the supplied members are a subset of the consortium members
        if len(systemChannelGroup.Groups[channelconfig.ConsortiumsGroupKey].Groups[consortium.Name].Groups) > 0 {
                for orgName := range configUpdate.WriteSet.Groups[channelconfig.ApplicationGroupKey].Groups {
-                       consortiumGroup, ok := systemChannelGroup.Groups[channelconfig.ConsortiumsGroupKey].Groups[consortium.Name].Groups[orgName]
+                       groups, ok := systemChannelGroup.Groups[channelconfig.ConsortiumsGroupKey].Groups[consortium.Name]
                        if !ok {
-                               return nil, fmt.Errorf(""Attempted to include a member which is not in the consortium"")
+                               return nil, fmt.Errorf(""Consortium '%s' has no '%s'"", channelconfig.ConsortiumsGroupKey, consortium.Name)
+                       }
+                       consortiumGroup, ok := groups.Groups[orgName]
+                       if !ok {
+                               return nil, fmt.Errorf(""Attempted to include member '%s' which is not in consortium '%s'\n"", orgName, consortium.Name)
                        }
                        applicationGroup.Groups[orgName] = proto.Clone(consortiumGroup).(*cb.ConfigGroup)
                }
{code}
",,nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m2v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),nyet,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 9:43 AM;nyet;https://gerrit.hyperledger.org/r/31293;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Minor changes to ledger config structs,FAB-15284,39521,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,manish-sethi,manish-sethi,26/Apr/19 3:53 AM,18/Jun/19 10:45 PM,28/Oct/23 3:08 AM,05/Jun/19 6:06 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"https://gerrit.hyperledger.org/r/#/c/31006/6/internal/peer/node/config.go@39
https://gerrit.hyperledger.org/r/#/c/31006/6/core/ledger/ledger_interface.go@42",,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz4w",,,,Unset,Unset,Ledger v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,wenjian,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/May/19 4:48 AM;wenjian;CR: [https://gerrit.hyperledger.org/r/#/c/31370/] (master branch);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deadlock on invocation qscc.GetChainInfo from user chaincode - deprecate user chaincode calls to qscc,FAB-15285,39524,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,jyellick,ConstC,ConstC,26/Apr/19 2:28 PM,24/Dec/20 5:23 AM,28/Oct/23 3:08 AM,30/Oct/19 5:30 AM,v1.4.0,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,2,ipm,,,,,"I got 30s timeout expiration when I invoke _qscc.GetChainInfo_ from user chaincode.
 According to peer logs there are two parallel processes:
 #1 receiving block 1318 from buffer and #2 invocation mychaincode that call _qscc.GetChainInfo_

I think that deadlock happens when
 - process #2 holds read lock *LockBasedTxMgr.commitRWLock* in _LockBasedTxMgr.NewTxSimulator_ then _kvLedger.GetBlockchainInfo_ try to acquire read lock *kvLedger.blockAPIsRWLock*
 - process #1 already holds write lock *kvLedger.blockAPIsRWLock* in _kvLedger.CommitWithPvtData_ then in _LockBasedTxMgr.Commit_ it try to acquire write lock *txmgr.commitRWLock*

process #2 exit when timeout exited and then process #1 successfuly commit received block.

To solve the problem I can suggest to acquire lock *txmgr.commitRWLock* before *kvLedger.blockAPIsRWLock* in _kvLedger.CommitWithPvtData_.


mychaincode.log
{code:java}
[2019-04-18 09:40:02.562 UTC [shim] handleInvokeChaincode -> ERRO 5d813←[0m [39319426] Received ERROR.
[2019-04-18 09:40:02.562 UTC [titan] Warningf -> WARN 5d814←[0m Error on EventService.findAll => 500, qscc.GetBlockByNumber invoke error: 500,
mychaincode/fabric.CallSystemChaincodeOnChannel
{code}

peer.log
{code:java}
[2019-04-18 09:39:32.523 UTC [gossip.privdata] StoreBlock -> INFO 26351[0m [general] Received block [1318] from buffer
[2019-04-18 09:39:32.526 UTC [lockbasedtxmgr] newQueryExecutor -> DEBU 26352[0m constructing new query executor txid = [6d78f155-ac99-4bf0-b92b-ce50ea4ac34e]
[2019-04-18 09:39:32.526 UTC [lockbasedtxmgr] Done -> DEBU 26353[0m Done with transaction simulation / query execution [6d78f155-ac99-4bf0-b92b-ce50ea4ac34e]
[2019-04-18 09:39:32.527 UTC [committer.txvalidator] Validate -> INFO 26354[0m [general] Validated block [1318] in 4ms
[2019-04-18 09:39:32.527 UTC [kvledger] CommitWithPvtData -> DEBU 26355[0m [general] Validating state for block [1318]
[2019-04-18 09:39:32.528 UTC [lockbasedtxmgr] ValidateAndPrepare -> DEBU 26356[0m Waiting for purge mgr to finish the background job of computing expirying keys for the block
[2019-04-18 09:39:32.528 UTC [lockbasedtxmgr] ValidateAndPrepare -> DEBU 26357[0m lock acquired on oldBlockCommit for validating read set version against the committed version
[2019-04-18 09:39:32.528 UTC [lockbasedtxmgr] ValidateAndPrepare -> DEBU 26358[0m Validating new block with num trans = [1]
[2019-04-18 09:39:32.542 UTC [kvledger] CommitWithPvtData -> DEBU 26359[0m [general] Committing block [1318] to storage
[2019-04-18 09:39:32.556 UTC [lockbasedtxmgr] NewTxSimulator -> DEBU 2635a[0m constructing new tx simulator
[2019-04-18 09:39:32.556 UTC [lockbasedtxmgr] newLockBasedTxSimulator -> DEBU 2635b[0m constructing new tx simulator txid = [8fba0b4c7c42d5d9f6ef197d5df9553656cde68639031f84d814698e9e9ff576]
[2019-04-18 09:39:32.556 UTC [endorser] callChaincode -> INFO 2635c[0m [general][8fba0b4c] Entry chaincode: name:""mychaincode"" 
[2019-04-18 09:39:32.570 UTC [kvledger] CommitWithPvtData -> DEBU 2635d[0m [general] Committing block [1318] transactions to state database
[2019-04-18 09:39:32.570 UTC [lockbasedtxmgr] Commit -> DEBU 2635e[0m lock acquired on oldBlockCommit for committing regular updates to state database
[2019-04-18 09:39:32.570 UTC [lockbasedtxmgr] Commit -> DEBU 2635f[0m Committing updates to state database
[2019-04-18 09:39:38.487 UTC [endorser] callChaincode -> INFO 26360[0m [general][33b32666] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:38.488 UTC [endorser] callChaincode -> INFO 26361[0m [general][33b32666] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:38.488 UTC [comm.grpc.server] 1 -> INFO 26362[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:38.486Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38936"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.732529ms""}
[2019-04-18 09:39:38.522 UTC [lockbasedtxmgr] NewTxSimulator -> DEBU 26363[0m constructing new tx simulator
[2019-04-18 09:39:38.523 UTC [lockbasedtxmgr] newLockBasedTxSimulator -> DEBU 26364[0m constructing new tx simulator txid = [bf17055b2aef23733490e810eb34762ec0937b84c2b85d3324748d4d789b05c7]
[2019-04-18 09:39:43.321 UTC [endorser] callChaincode -> INFO 26365[0m [general][794a35fd] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:43.322 UTC [endorser] callChaincode -> INFO 26366[0m [general][794a35fd] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:43.322 UTC [comm.grpc.server] 1 -> INFO 26367[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:43.32Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38938"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.671647ms""}
[2019-04-18 09:39:43.348 UTC [lockbasedtxmgr] NewTxSimulator -> DEBU 26368[0m constructing new tx simulator
[2019-04-18 09:39:43.348 UTC [lockbasedtxmgr] newLockBasedTxSimulator -> DEBU 26369[0m constructing new tx simulator txid = [0fc213d8fbaac33c9bd53e943e6a28be8ebd994d937c3210474c5318b058562b]
[2019-04-18 09:39:43.575 UTC [endorser] callChaincode -> INFO 2636a[0m [general][81c437e2] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:43.576 UTC [endorser] callChaincode -> INFO 2636b[0m [general][81c437e2] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:43.576 UTC [comm.grpc.server] 1 -> INFO 2636c[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:43.574Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38940"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.346857ms""}
[2019-04-18 09:39:43.597 UTC [lockbasedtxmgr] NewTxSimulator -> DEBU 2636d[0m constructing new tx simulator
[2019-04-18 09:39:43.597 UTC [lockbasedtxmgr] newLockBasedTxSimulator -> DEBU 2636e[0m constructing new tx simulator txid = [15988b6ca045ef44739388fb2ac4d4443a71879fcb4b885d2729ee64870d4c1a]
[2019-04-18 09:39:47.319 UTC [endorser] callChaincode -> INFO 2636f[0m [general][b2ecb571] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:47.323 UTC [endorser] callChaincode -> INFO 26370[0m [general][b2ecb571] Exit chaincode: name:""cscc""  (4ms)
[2019-04-18 09:39:47.324 UTC [comm.grpc.server] 1 -> INFO 26371[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:47.318Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38942"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""6.151683ms""}
[2019-04-18 09:39:47.350 UTC [endorser] callChaincode -> INFO 26372[0m [general][4ac41249] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:47.351 UTC [endorser] callChaincode -> INFO 26373[0m [general][4ac41249] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:47.352 UTC [comm.grpc.server] 1 -> INFO 26374[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:47.349Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38942"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.432345ms""}
[2019-04-18 09:39:47.378 UTC [endorser] callChaincode -> INFO 26375[0m [general][81806a89] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:47.378 UTC [endorser] callChaincode -> INFO 26376[0m [general][81806a89] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:47.379 UTC [comm.grpc.server] 1 -> INFO 26377[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:47.377Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38944"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.362986ms""}
[2019-04-18 09:39:47.412 UTC [lockbasedtxmgr] NewTxSimulator -> DEBU 26378[0m constructing new tx simulator
[2019-04-18 09:39:47.412 UTC [lockbasedtxmgr] newLockBasedTxSimulator -> DEBU 26379[0m constructing new tx simulator txid = [98598e833334a6cd00304b5e0a5c60d5c91adb830dadefc65eba0ee80253ae77]
[2019-04-18 09:39:52.760 UTC [endorser] callChaincode -> INFO 2637a[0m [general][10518e39] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:52.761 UTC [endorser] callChaincode -> INFO 2637b[0m [general][10518e39] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:52.762 UTC [comm.grpc.server] 1 -> INFO 2637c[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:52.759Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38946"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.432876ms""}
[2019-04-18 09:39:52.786 UTC [endorser] callChaincode -> INFO 2637d[0m [general][34508d42] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:52.787 UTC [endorser] callChaincode -> INFO 2637e[0m [general][34508d42] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:52.788 UTC [comm.grpc.server] 1 -> INFO 2637f[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:52.785Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38946"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.692763ms""}
[2019-04-18 09:39:52.796 UTC [endorser] callChaincode -> INFO 26380[0m [general][8d96a81f] Entry chaincode: name:""cscc"" 
[2019-04-18 09:39:52.797 UTC [endorser] callChaincode -> INFO 26381[0m [general][8d96a81f] Exit chaincode: name:""cscc""  (1ms)
[2019-04-18 09:39:52.798 UTC [comm.grpc.server] 1 -> INFO 26382[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:52.795Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38948"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""2.282349ms""}
[2019-04-18 09:39:52.825 UTC [lockbasedtxmgr] NewTxSimulator -> DEBU 26383[0m constructing new tx simulator
[2019-04-18 09:39:52.825 UTC [lockbasedtxmgr] newLockBasedTxSimulator -> DEBU 26384[0m constructing new tx simulator txid = [f954f92cf58e3aa2b511b474c7f536ab1a82b5d3429837c8584f0c012bddc4fb]
[2019-04-18 09:40:02.557 UTC [endorser] callChaincode -> INFO 26385[0m [general][8fba0b4c] Exit chaincode: name:""mychaincode""  (30000ms)
[2019-04-18 09:40:02.557 UTC [endorser] SimulateProposal -> ERRO 26386[0m [general][8fba0b4c] failed to invoke chaincode name:""mychaincode"" , error: timeout expired while executing transaction
github.com/hyperledger/fabric/core/chaincode.(*Handler).Execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:1225
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:312
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Invoke
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:301
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:238
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:147
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:142
github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:237
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:456
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler.func1
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:169
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:31
github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1
	/opt/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server.go:91
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34
github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1
	/opt/gopath/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:30
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:39
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:171
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:982
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1208
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686
runtime.goexit
	/opt/go/src/runtime/asm_amd64.s:1333
error sending
failed to execute transaction 8fba0b4c7c42d5d9f6ef197d5df9553656cde68639031f84d814698e9e9ff576
github.com/hyperledger/fabric/core/chaincode.processChaincodeExecutionResult
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:244
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:239
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).Execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:147
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:142
github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:237
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:456
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
	/opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler.func1
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:169
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:31
github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1
	/opt/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server.go:91
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34
github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1
	/opt/gopath/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:30
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:39
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
	/opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:171
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:982
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1208
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686
runtime.goexit
	/opt/go/src/runtime/asm_amd64.s:1333
[2019-04-18 09:40:02.557 UTC [lockbasedtxmgr] Done -> DEBU 26387[0m Done with transaction simulation / query execution [8fba0b4c7c42d5d9f6ef197d5df9553656cde68639031f84d814698e9e9ff576]
[2019-04-18 09:40:02.557 UTC [comm.grpc.server] 1 -> INFO 26388[0m unary call completed {""grpc.start_time"": ""2019-04-18T09:39:32.555Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""172.20.0.9:38934"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""30.002056937s""}
[2019-04-18 09:40:02.558 UTC [lockbasedtxmgr] Commit -> DEBU 26389[0m Write lock acquired for committing updates to state database
[2019-04-18 09:40:02.589 UTC [chaincode] HandleTransaction -> ERRO 2638a[0m [8fba0b4c] Failed to handle INVOKE_CHAINCODE. error: timeout expired while executing transaction
github.com/hyperledger/fabric/core/chaincode.(*Handler).Execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:1225
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).execute
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:312
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).Invoke
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:301
github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleInvokeChaincode
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:1185
github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleInvokeChaincode-fm
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:211
github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:272
runtime.goexit
	/opt/go/src/runtime/asm_amd64.s:1333
error sending
execute failed
github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleInvokeChaincode
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:1187
github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleInvokeChaincode-fm
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:211
github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:272
runtime.goexit
	/opt/go/src/runtime/asm_amd64.s:1333
INVOKE_CHAINCODE failed: transaction ID: 8fba0b4c7c42d5d9f6ef197d5df9553656cde68639031f84d814698e9e9ff576
github.com/hyperledger/fabric/core/chaincode.(*Handler).HandleTransaction
	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/handler.go:276
runtime.goexit
	/opt/go/src/runtime/asm_amd64.s:1333
[2019-04-18 09:40:02.627 UTC [lockbasedtxmgr] Commit -> DEBU 2638b[0m Updates committed to state database and the write lock is released
[2019-04-18 09:40:02.628 UTC [lockbasedtxmgr] func1 -> DEBU 2638c[0m launched the background routine for preparing keys to purge with the next block
[2019-04-18 09:40:02.628 UTC [kvledger] CommitWithPvtData -> DEBU 2638d[0m [general] Committing block [1318] transactions to history database
[2019-04-18 09:40:02.629 UTC [endorser] callChaincode -> INFO 2638e[0m [general][0fc213d8] Entry chaincode: name:""mychaincode"" 
[2019-04-18 09:40:02.630 UTC [kvledger] CommitWithPvtData -> INFO 2638f[0m [general] Committed block [1318] with 1 transaction(s) in 30102ms (state_validation=14ms block_commit=27ms state_commit=30057ms)
{code}",,baohua,C0rWin,const,ConstC,denyeart,jyellick,lmars,manish-sethi,MHBauer,secure12,sykesm,wenjian,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-10540,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00n2e:8ro",,,,Unset,Unset,,call qscc.GetChainInfo from user chaincode when peer receive new block,,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,C0rWin,const,ConstC,denyeart,jyellick,lmars,manish-sethi,MHBauer,secure12,sykesm,wenjian,ymlbright,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/May/19 4:03 PM;C0rWin;cc [~denyeart] [~manish-sethi];;;","06/May/19 4:25 PM;const;https://gerrit.hyperledger.org/r/#/c/31229/;;;","06/May/19 9:55 PM;manish-sethi;requires some investigation whether the bug fixed in this https://jira.hyperledger.org/browse/FAB-10540 has reoccurred or its a new one. ;;;","08/May/19 4:52 AM;wenjian;[~ConstC] 

For ""#2 invocation mychaincode that call _qscc.GetChainInfo"",_ it is not supported to call system chaincode inside of a user chaincode. If you need to call qscc, the right way is to invoke qscc directly for the client.;;;","08/May/19 12:44 PM;const;[~wenjian]
I found this implementation of *InvokableCC2CC* for *qscc* system chaincode.
There are no restrictions to call qscc inside of a user chaincode.
{code:go}
func (e *LedgerQuerier) Name() string              { return ""qscc"" }
...
func (e *LedgerQuerier) InvokableCC2CC() bool      { return true }
...
{code}

And I think this is an important feature that helps keep a ledger related domain logic in the same place (in the chaincode).;;;","08/May/19 11:07 PM;manish-sethi;[~const] As you see, this is surely an untested path. Can you elaborate a bit on your chaincode logic, particularly, how it depends on the blockchain info? Because, a user chaincode logic should depend on state only as such.;;;","15/May/19 11:11 PM;denyeart;[~const] Please describe the use case of why user chaincode would need to depend on blockchain info. This was not intended and the support will likely get removed unless there is a compelling use case.;;;","17/May/19 2:21 PM;const;I use ledger blocks as kind of event source to determine in which order entities were added. 
The client side isn't an appropriate place for calling qscc in my case, because all my chaincode models are defined in a chaincode layer (I need these models to parse ledger blocks).;;;","17/May/19 8:40 PM;denyeart;[~const] Fabric chaincode is designed to manage application state. The client SDKs are designed to handle blockchain info queries as well as block/transaction events. When deviating from the intended and tested use scenarios you are at risk of hitting limitations. Is there any reason you cannot adopt the intended usage?;;;","22/May/19 4:20 PM;const;[~denyeart] You offer me a workaround which in my case will require a large code duplication from chaincode layer to the client side.
It's strange to separate the use of ledger and application state, because the same models are stored here and there.

My approach worked fine on the hyperledger fabric version 1.0. Problems appeared after migration to version 1.4. I think this problem occurs after these changes https://gerrit.hyperledger.org/r/#/c/fabric/+/16563/

There is only one problem with using QSCC from user chaincode - this is the deadlock described above. QSCC is regular chaincode in other cases.
It's easy to fix this deadlock by acquiring *kvLedger.blockAPIsRWLock* and *LockBasedTxMgr.commitRWLock* in the same order in ""QSCC functions"" and ""saving a new block"" processes. 
;;;","22/May/19 4:30 PM;const;I think that the ability to write a chaincode that can parse a ledger can be a competitive advantage of Hyperledger Fabric.;;;","12/Jun/19 12:39 AM;denyeart;Discussed with a few other maintainers.

Intent is to document the limitation in v1.4.x and deprecate, then remove the ability to call qscc from user chaincodes in v2.0.;;;","12/Jun/19 10:11 AM;baohua;[~denyeart], curious to know how we can disable the qscc call from user chaincode, i.e., to distinguish the callers from clients or from chaincode.

Thanks!;;;","24/Sep/19 11:16 PM;jyellick;To summarize the above discussion – it's never safe to call qscc cc2cc, and we should enforce this in v2.0.  Setting fix version to 2.0 and adding to the ipm backlog.;;;","25/Sep/19 11:45 AM;lmars;[~denyeart] [~jyellick] why do you want to remove this feature?

Using the client SDK isn't always the answer. Only the chaincode logic can be endorsed (by several endorsers). Any client logic can be ignored by the application and domain logic can be hacked :(

There are at least several scenarios when the logic of the user chaincode may depend on the system chaincode(s):

1) some voting system which is limited by the time range. This is only one real safe way to extract the time of transaction (which has added the voting object to the blockchain) by parsing the block!
 2) the same applies to the order of some ""orders"" in the ordering system. When we implement such system we must know the real order of orders (for example, to select top ten). It's difficult (impossible) to implement without analyzing the ledger.
 3) analysis of the configuration block to select MspIds of connected organizations (this is already disabled in Fabric :()
 4) analysis of the configuration block to check rights of the creator of the transaction (we have some functions that only administrators of specific organizations can access) (this is already impossible in Fabric :()
 5) etc...;;;","26/Sep/19 12:52 AM;jyellick;So I would start with – today, we have a situation where chaincodes are able to call QSCC, but every time they do, they risk deadlocking the peer.  No matter how useful, this needs to be addressed.  The proposed solution to prevent the deadlock has too high of a performance impact, so, we are left with the only other practical option, of disabling the feature.  Now, nothing prevents us from adding back the ability to perform these operations from user chaincode in the future, but, this is addressing a real problem that exists now, and v2.0 is a natural boundary to make such a breaking change.

On to your more specific points:
1) You may retrieve the timestamp of your current transaction via the {{GetTxTimestamp}} chaincode API.  You may store this value into the statedb if you wish to easily reference it later.  You may trust this value, because it has undergone the multi-party endorsement process.  I would note, that in general, the timestamp in txes should not be relied upon, as clients may shift this timestamp forward or back within allowable clock drift, so if you reference this value, use it with care.
2) I don't quite follow this one, but I think you are wanting to know the actual order that multiple txes committed in.  In this case, you could employ a strategy of 'blind writes' to a key.  Select a key, and have all of the transactions perform a `PutState` to this key, but importantly not a `GetState`, this will allow them to commit concurrently without conflict, but, you will be able to use {{GetHistoryForKey}} to see the order that these txes committed in.
3) I do think we need a better story around providing identity services to the chaincode.  However, reading and parsing the config block is not a very nice model for accomplishing this.  And, as you say it's already not possible.
4) The same goes as for 3.

So, I think for (1) and (2) there are already better options than QSCC available.  For (3)/(4), this was already cludgy, and broken, and we should look for a better way to provide these services.;;;","29/Oct/19 5:17 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/34123
https://gerrit.hyperledger.org/r/c/fabric/+/34124;;;","29/Oct/19 9:27 PM;lmars;[~jyellick] Thanks for the detailed clarification.
{quote}The proposed solution to prevent the deadlock has too high of a performance impact
{quote}
I think I understand why. Is it because *kvLedger.CommitWithPvtData* holds *txmgr.commitRWLock* for too long?

Can I propose an alternative solution? If we couldn't change the order of acquiring locks in *kvLedger.CommitWithPvtData* can we change the order of acquiring locks in the user chaincode?
 I think of some special (advanced) mode in the user chaincode to call some system chaincode before calling *LockBasedTxMgr.NewTxSimulator*.

In this case, the user chaincode can call any system chaincodes like the client SDK does.

What do you think?
{quote}On to your more specific points
{quote}
Thank you for proposed solution for my specific points. 
 I like some, but the problem what we already have our project released, it is hard to change the ledger scheme now :(;;;","30/Oct/19 12:01 AM;jyellick;{quote}
Can I propose an alternative solution? If we couldn't change the order of acquiring locks in kvLedger.CommitWithPvtData can we change the order of acquiring locks in the user chaincode?
I think of some special (advanced) mode in the user chaincode to call some system chaincode before calling LockBasedTxMgr.NewTxSimulator.
{quote}

The problem here is two-fold.  First, I'm a little skeptical of delegating ledger locking to application code.  Getting locking right is hard, and a mistake in the application code will deadlock the entire channel.  Secondly, it would expand the chaincode API surface considerably, something which has been problematic in the past, and would require implementations in every chaincode platform.

{quote}
I like some, but the problem what we already have our project released, it is hard to change the ledger scheme now ￼
{quote}

The good news is that thanks to the chaincode model you can migrate your db schema on chaincode upgrade.  If the size of your DB is relatively small (tens of MBs), then you can do this in the 'Init' step of your chaincode.  If the DB is larger, you may need to paginate/batch your updates across multiple transactions and hold internal state as to whether the schema upgrade is complete.

I realize it's no fun to update application logic in response to a platform update, but v2.0 gives us the opportunity to make some breaking changes, and you can always run on v1.4.x until you're ready to migrate.;;;","30/Oct/19 8:36 PM;lmars;{quote}The problem here is two-fold. First, I'm a little skeptical of delegating ledger locking to application code.
{quote}
I will try to explain my proposal in more detail.
 * *ChaincodeEx* interface would be introduced
{code:java}
type ChaincodeEx interface {
  Chaincode

  // DecorateInvoke is called before Invoke out of transaction context
  // It isn't possible to query ledger in DecorateInvoke
  // Returned value will be merged and will be available by using ChaincodeStubInterface.GetDecorations inside Invoke
  DecorateInvoke(stub ChaincodeStubInterface) map[string][]byte
}
{code}

 * *Shim* would call *DecorateInvoke* only if user chaincode implements *ChaincodeEx* interface
 * An user chaincode would be able to use any system chaincodes in *DecorateInvoke* method (since this method is called before calling *LockBasedTxMgr.NewTxSimulator*)
 * The result of *DecorateInvoke* will be available inside Invoke by using *ChaincodeStubInterface.GetDecorations*

So:
{quote}Getting locking right is hard, and a mistake in the application code will deadlock the entire channel.
{quote}
In the proposed solution, it is impossible to obtain a lock manually. So there is no place for mistake.
{quote}Secondly, it would expand the chaincode API surface considerably, something which has been problematic in the past, and would require implementations in every chaincode platform.
{quote}
We can introduce *ChaincodeEx* on one platform and implement this feature on other platfroms at any time.
{quote}The good news is that thanks to the chaincode model you can migrate your db schema on chaincode upgrade
{quote}
The bad news is that in some scenarios (see, for example, my points 3) and 4)) we still need to call arbitrary system chaincodes.;;;","31/Oct/19 12:04 AM;jyellick;Perhaps I misunderstand your proposed solution, but I don't see how it can work.

When the initial proposal from the client is received, we first explicitly check if the request is for CSCC/QSCC [here|https://github.com/hyperledger/fabric/blob/5ed287c5f15c01b2acc54435515d8872d2ba31ac/core/endorser/endorser.go#L446-L462] and if not, we acquire the initial TxSimulator [here|https://github.com/hyperledger/fabric/blob/5ed287c5f15c01b2acc54435515d8872d2ba31ac/core/endorser/endorser.go#L350].

At this point, long before any call is made into the chaincode, it's unsafe to invoke QSCC.  So, by the time the invoke is actually dispatched to the chaincode the simulator lock is already acquired.  The only way I see this working is if the endorser code were to dispatch to the DecorateInvoke prior to acquiring the TxSim, but this creates a new problem.  If the chaincode makes a cc2cc call (which the peer necessarily cannot know of until after the invocation has occurred), then the new chaincode cannot call DecorateInvoke  without the lock acquired, because the lock already acquired for the first Invoke.  So now the chaincode calling semantics differ, whether your chaincode is being invoked directly, or cc2cc.

Note, even if we accepted this differing behavior, we'd still have a significant performance impact of requiring a round-trip message to the chaincode prior to every invocation.  Perhaps we could negotiate with the chaincode ahead of time whether the additional round-trip is necessary, but you can see that 'correctly' implementing this approach rapidly balloons in complexity.
{quote}In the proposed solution, it is impossible to obtain a lock manually. So there is no place for mistake.
{quote}
What happens if a user chaincode invokes QSCC from the normal Invoke path? We're back to preventing a deadlock, or inventing yet another mechanism to pass info that the Invoke is coming from a different pre-lock context.  In the former, we have not addressed the bug, in the latter, we've introduced significantly more code and complexity.
{quote}We can introduce ChaincodeEx on one platform and implement this feature on other platfroms at any time.
{quote}
We try to keep the chaincode platforms in sync, it's a documentation nightmare and general user experience problem when one platform has access to APIs that the others do not.  This would also be relatively obscure and I expect not often used API that we would need to maintain indefinitely.
{quote}The bad news is that in some scenarios (see, for example, my points 3) and 4)) we still need to call arbitrary system chaincodes.
{quote}
Per your own admission:
{quote}3) analysis of the configuration block to select MspIds of connected organizations (this is already disabled in Fabric ￼)
 4) analysis of the configuration block to check rights of the creator of the transaction (we have some functions that only administrators of specific organizations can access) (this is already impossible in Fabric ￼)
{quote}
The use cases of 3 and 4 are already broken.  As I've voiced before, I do think there's value in exposing more of the channel state to chaincodes to allow them to perform ACL and other checks.  However, there's no requirement that this be done through a cc2cc call, and in fact, I think there's some strong arguments to be made that it shouldn't be.;;;","05/Nov/19 9:26 PM;lmars;[~jyellick]

{quote}
When the initial proposal from the client is received, we first explicitly check if the request is for CSCC/QSCC here and if not, we acquire the initial TxSimulator here.

At this point, long before any call is made into the chaincode, it's unsafe to invoke QSCC.
{quote}

Oh no! You're right. My solution will not work :(

{quote}I do think there's value in exposing more of the channel state to chaincodes to allow them to perform ACL and other checks.{quote}

I vote for it! It's strange for me that I can do something by using Client SDK (is not a suitable place for these checks), but can not do the same on chaincode side.;;;","24/Dec/20 5:23 AM;secure12;Sorry for digging this up, but I would like to add some comments about accessing channel state/blocks from user chaincodes.

As mentioned by [~lmars] , some use cases require checking the ordering of Txs by the endorsers. One example I can think of is building an (append-only) merkle tree for some types of transaction on the ledger. [~jyellick]'s solution of putting all those Txs in the same key then use GetHistoryForKey to get the actual ordering might work, but 1) it is unnatural and 2) it would have bad performance for some use cases since HistoryQueryIteratorInterface is very restricted. For example, reading some latest Txs history requires reading from the oldest.

Is there a possibility of extending ChaincodeStubInterface's functionality to access channel state in the future?;;;",,,,,,,,,,,,,,,,,,,
Identify chaincodes uniquely in the context of service discovery,FAB-15286,39525,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,26/Apr/19 3:14 PM,01/Jun/19 5:41 PM,28/Oct/23 3:08 AM,01/Jun/19 5:41 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In the old lifecycle, chaincode name and chaincode version used to be sufficient to uniquely identify a chaincode on a channel. With the new lifecycle this is no longer true: the version field does not need to be changed on each update. The pair chaincode name, sequence number is instead unique. Note: the version number is not used in queries to service discovery.

See [https://gerrit.hyperledger.org/r/#/c/30969/18/core/chaincode/lifecycle/metadata_provider.go@28] for more info

The current thinking is that _lifecycle chaincodes should reported using name and sequence number from the chaincode definition. ",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m3j:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/May/19 8:54 PM;ales;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31520/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Get status of a transaction as pending,FAB-15288,39528,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,KartikChauhan,KartikChauhan,26/Apr/19 5:45 PM,26/Apr/19 5:45 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I was trying to get the status of a transaction by using node.js SDK. I know about `queryTransaction` method which returns the transaction data, and in it, I can find transaction response. But its limitation is that it only returns response `200` if the transaction gets succeeded or _Failed to get transaction_ message if the transaction is invalid or hasn't mined yet.

`queryTransaction` method queries ledger data present on the peers and then gives a response. But what if I want to know if a transaction is in process or not? How can I get the response _pending_ if a transaction id is valid but hasn't mined yet?",,KartikChauhan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m47:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),KartikChauhan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Forward port 1.4.1 Logging updates,FAB-15289,39529,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,heatherp,mbwhite,mbwhite,26/Apr/19 8:17 PM,26/Sep/19 12:20 AM,28/Oct/23 3:08 AM,26/Sep/19 12:20 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,heatherp,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCN-2,,,No,,Unset,No,,,"1|i00m4f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Apr/19 8:18 PM;mbwhite;https://gerrit.hyperledger.org/r/31109 [FAB-15289] Forward Port logging updates;;;","18/Sep/19 12:25 AM;heatherp;Inadvertently covered by some cherry picking I've done here: https://gerrit.hyperledger.org/r/c/fabric-chaincode-node/+/33531;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pre-pollution of _lifecycle chaincode namespace allows bypassing of endorsement policy and private data dissemination policy,FAB-15290,39535,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,ales,ales,27/Apr/19 2:43 AM,01/Aug/19 12:13 AM,28/Oct/23 3:08 AM,01/Aug/19 12:12 AM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"h1. Scenario

A channel operates with the 1.4 capability. The objective of the org {{evilorg}} is to be able to make changes to keys in the {{targetcc}} namespace and to obtain preimages for private data from the same chaincode. {{evilorg}} is unable to do so because:
 # the endorsement policy of {{targetcc}} does not permit {{evilorg}} peers to endorse changes to {{targetcc}}
 # the collection configuration of {{targetcc}} does not permit {{evilorg}} peers to receive preimages for private data of {{targetcc}}
 # the LSCC entry for {{targetcc}} sets and instantiation policy for {{targetcc}} that only permits admins of {{honestorg}} to make changes to {{targetcc}}

Additionally, {{evilorg}} knows that the channel will soon be upgraded to enable the 2.0 capability.
h1. Attack
h2. Step 1: create a chaincode definition for targetcc in the _lifecycle namespace

Due to FAB-15294, {{_lifecycle}} can be written to by any org member (including users with a client SDK certificate) in versions 1.3, 1.4 and 2.0. However, even if this is fixed, {{evilorg}} may simply craft an LSCC deployment transaction to deploy {{_lifecycle}} with an endorsement policy that permits its peers to write to it.

Then {{evilorg}} simply commits a chaincode definition for {{targetcc}} such that
 # the endorsement policy is satisfied by any member of {{evilorg}}
 # the dissemination policy of any existing collection includes {{evilorg}}

h2. Step 2: wait for the upgrade to 2.0

At this point, as soon as the channel is upgrade to 2.0, {{evilorg}} has achieved its objective because the definition in {{_lifecycle}} will take effect.

h1. Proof of concept

Attached is a PoC for the attack using our integration tests. Just apply it on top of master, go to {{integration/nwo/}} and run tests. The changes to the peer code are just a way to avoid having to manually craft transactions in the integration test and they don't impact the validation code of any honest peer.",,ales,angelo.decaro,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wlahti,yacovm,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/19 8:04 PM;ales;pollution.1.patch;https://jira.hyperledger.org/secure/attachment/17179/pollution.1.patch",,,,,,,,,,,,,angelo.decaro,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wlahti,yacovm,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:ik",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Apr/19 3:35 AM;ales;Speaking of fixes: unfortunately there is no obvious way to entirely close the gap. The best approach seems to be:
 # on 2.0 binary peer startup on <2.0 channels, print a warning message if namespaces that will be reserved starting from 2.0 aren't empty/nonexistent
 # on a 1.4->2.0 channel upgrade, panic if reserved namespaces aren't empty/nonexistent

Optionally we may also
 # provide external tools to cleanup reserved namespaces of non-deployable chaincodes; or
 # create an undocumented env variable to do so automagically on channel upgrade w/o panicking;;;","27/Apr/19 6:31 PM;ales;See the update - FAB-15294 makes things even simpler for the attacker;;;","27/Apr/19 8:01 PM;yacovm;{quote}
    1. the endorsement policy is satisfied by any member of evilorg
    2. the dissemination policy of any existing collection includes evilorg
{quote}

You don't even need to do (1), as we have private data reconciliation now, so just extend the collection policy - and the legitimate peers of the collection would gladly share their hash pre-images with illegitimate (evil) organization. ;;;","27/Apr/19 8:07 PM;ales;Yup [~yacovm]... :( Step (1) is only required if the attacker wants to be able to modify arbitrary data in the victim cc namespace;;;","27/Apr/19 8:09 PM;yacovm;and is it possible to detect a capability transition (pre 2.0 to 2.0) and then truncate *_lifecycle* ?

 

(and I think panicking is good enough of a solution. Anyone that would pull the attack would then have to admit it tried to hack the network).;;;","27/Apr/19 8:16 PM;ales;The capability transition is certainly detectable - the config tx processor will need to expose some sort of eventing service (if we want to do it cleanly); one listener can be interested in the event !2.0 capability -> 2.0 capability and perform the check. It's a lot of work by the looks of it..;;;","17/Jul/19 2:10 AM;denyeart;[~ales] I believe we said this one is addressed by one of the other recently added validation checks, can it be closed now? Please clarify the resolution here and in FAB-15294.;;;","31/Jul/19 11:43 PM;ales;[~denyeart]: 1.4.2 is no longer affected by this issue since it is impossible (to the best of our knowledge) to pollute the _lifecycle namespace. The 1.4.2->2.0 upgrade is safe from this perspective;;;","01/Aug/19 12:12 AM;denyeart;Fixed as of v1.4.2.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update pullbinaries script to pull binaries on the same PATH,FAB-15291,39536,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,vijaypunugubati,vijaypunugubati,vijaypunugubati,27/Apr/19 3:08 AM,08/May/19 1:17 AM,28/Oct/23 3:08 AM,08/May/19 1:17 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,Update pull binaries script to pull fabric and fabric-ca binaries on the same PATH,,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m5r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,vijaypunugubati,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"27/Apr/19 6:14 AM;scottz;https://gerrit.hyperledger.org/r/#/c/31117/;;;","01/May/19 12:23 AM;vijaypunugubati;This CR is to fix the issue I observed in the pull binaries script, with using the source command what ever the target we are executing (pull-binaries, pull-binaries-fabric, pull-binaries-fabric-ca) it’s pulling the both fabric and fabric-ca binaries and without source execution the pull binaries targets are working as expected, even if we execute the pull binaries with or without source command, there won’t be any effect on the PATH.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"fabric-test smoke test failures with ""Failed to read"" for xml files",FAB-15292,39018,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,bharadwajambati1,latitiah,latitiah,03/Apr/19 8:29 AM,30/Apr/19 10:39 PM,28/Oct/23 3:08 AM,30/Apr/19 10:39 PM,,,,,,,,,,,,,,,,,,,,,,,,0,ci-failure,,,,,"The behave test result xml files are not loading in the test analyzer. There is a ""Failed to read"" error next to them. When looking in the console, the tests show up as completing successfully. When run on the desktop, the xml files were apparently created successfully. Please see screenshots.

[https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2807/console]",,bharadwajambati1,latitiah,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15301,,,,FAB-15135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Apr/19 8:29 AM;latitiah;Screen Shot 2019-04-02 at 7.27.37 PM.png;https://jira.hyperledger.org/secure/attachment/17063/Screen+Shot+2019-04-02+at+7.27.37+PM.png","03/Apr/19 8:27 AM;latitiah;Screen Shot 2019-04-02 at 7.27.37 PM.png;https://jira.hyperledger.org/secure/attachment/17062/Screen+Shot+2019-04-02+at+7.27.37+PM.png","03/Apr/19 8:29 AM;latitiah;Screen Shot 2019-04-02 at 7.29.36 PM.png;https://jira.hyperledger.org/secure/attachment/17064/Screen+Shot+2019-04-02+at+7.29.36+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00jaf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,latitiah,rameshthoomu,scottz,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"09/Apr/19 1:59 AM;scottz;Including as a reference:  https://jira.hyperledger.org/browse/FAB-13494 , but actually I don't think this is related because jenkins is having trouble reading ALL the xml files (generated by all the tools LTE, PTE, OTE, behave). It is unlikely the problem is due to a specific output log character from a test.;;;","18/Apr/19 11:50 PM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/31015/;;;","23/Apr/19 3:12 AM;rameshthoomu;Observed some special characters in XML files generated by behave Junit. These special characters are observed when docker-compose is spinning up the containers. See the below log

Error occurred ['docker-compose', '-f', u'/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/docker-compose/docker-compose-kafka.yml', '-f', u'/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/docker-compose/docker-compose-couchdb.yml', '-f', '/w/workspace/fabric-test-verify-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/docker-compose/docker-compose-cli.yml', 'up', '-d', '--force-recreate']: Creating network ""d285d766651e11e99812fa163e58c932_behave"" with the default driver
Creating zookeeper0 ... 
Creating ca.org2.example.com ... 
Creating ca.example.com      ... 
Creating couchdb12           ... 
Creating couchdb11           ... 
Creating couchdb01           ... 
Creating zookeeper2          ... 
Creating ca.org1.example.com ... 
Creating couchdb02           ... 
Creating zookeeper1          ... 
{color:red}[2K{color}
Creating zookeeper0          ... done
[10B[2K
Creating ca.org2.example.com ... done

XML Parsing Error: not well-formed
Location: https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-test-verify-x86_64/5/artifact/gopath/src/github.com/hyperledger/fabric-test/regression/smoke/TESTS-bootstrap.xml
Line Number 39, Column 1:[2K
^
;;;","27/Apr/19 4:54 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31115/];;;","30/Apr/19 6:07 AM;scottz;Note: The merged solution (using the --no-ansi flag) requires minimum version 1.16.0 of docker-compose.
https://docs.docker.com/release-notes/docker-compose/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The validator accepts transactions for _lifecycle on channels <2.0,FAB-15294,39538,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Works as Expected,,ales,ales,27/Apr/19 6:09 PM,01/Aug/19 2:39 AM,28/Oct/23 3:08 AM,01/Aug/19 2:39 AM,v1.3.0,v1.4.0,v2.0.0,,,,,,,,,,,v1.3.0,v1.4.0,,,fabric-peer,,,,,,0,,,,,,"h1. Problem

The validator for versions <2.0 determines the validation information for a transaction in a different way depending on whether the chaincode is an application chaincode or a system chaincode:
{code:java}
if !v.sccprovider.IsSysCC(ccID) {
       // when we are validating a chaincode that is not a
       // system CC, we need to ask LSCC to give us the name
       // of VSCC and of the policy that should be used

       ...

} else {
       // when we are validating a system CC, we use the default
       // VSCC and a default policy that requires one signature
       // from any of the members of the channel
       p := cauthdsl.SignedByAnyMember(v.cr.GetMSPIDs(chdr.ChannelId))
       policy, err = protoutil.Marshal(p)
       if err != nil {
              return nil, nil, nil, err
       }
}
{code}
The snippet above shows that system chaincodes receive by default an endorsement policy allowing ledger writes to any member of any org currently defined in the channel.

Unfortunately, the {{_lifecycle}} system chaincode is a registered system chaincode since release 1.3, and so peer binaries at versions 1.3, 1.4 and 2.0 operating with <2.0 capability will consider any transaction writing to {{_lifecycle}} as valid if it is signed by any member (even a client SDK certificate will qualify).
h1. Fixes

Unfortunately the fix is not obvious. The addition of {{_lifecycle}} as a registered system chaincode may already have caused forks because it was not gated via a capability: on a channel with a 1.2 capability, a transaction writing to {{_lifecycle}} would be considered as valid by a 1.3 peer binary and invalid by a 1.2 peer binary.

Clearly, its removal (without a capability gate) may equally become the cause of forks. 

Note that this flaw makes the attack in FAB-15290 even simpler.",,ales,angelo.decaro,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wlahti,yacovm,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,angelo.decaro,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wlahti,yacovm,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m67:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 1:34 AM;ales;After a deeper analysis of the code, we luckily never shipped a version where _lifecycle is a writeable namespace. The initial namespace was +lifecycle, and the rename to _lifecycle took place in

{noformat}
commit d326707014eb164a3c627f2c6f3ff40cc9770bf4
Author: Jason Yellick <jyellick@us.ibm.com>
Date:   Wed Jan 23 12:21:36 2019 -0500

    FAB-13850 Change +lifecycle to _lifecycle
    
    The old + symbol creates some complications in parsing of the name in
    environment variables, and _ is a better understood symbol to indicate
    system namespaces.  Previously we were under the impression that
    chaincodes could not begin with an underscore, but, it turns out that it
    actually is acceptable.
    
    Change-Id: Ic5dd2e3494bfbc700a6a7265ea8faddb1e8bcaef
    Signed-off-by: Jason Yellick <jyellick@us.ibm.com>

{noformat}

This CR was never cherry picked to any release branch and so we are okay.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update grpc-go to 1.20.1,FAB-15295,39539,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,27/Apr/19 7:00 PM,30/Apr/19 5:04 AM,28/Oct/23 3:08 AM,30/Apr/19 5:04 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,maintenance,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m6f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Apr/19 7:12 PM;mastersingh24;https://gerrit.hyperledger.org/r/31119;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance policy string format to allow specifying OUs in addition to Roles,FAB-15296,39541,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,Vishal3152,Vishal3152,28/Apr/19 10:24 PM,14/Jun/19 12:05 AM,28/Oct/23 3:08 AM,,v1.4.0,,,,,,,,,,,,,Future,,,,fabric-tools,,,,,,0,help-wanted,ipm,,,,"The policy parsing at https://github.com/hyperledger/fabric/blob/release-1.4/common/cauthdsl/policyparser.go currently only supports parsing policies based on roles, e.g. Org1MSP.admin, Org2MSP.peer.

However, it would be generally useful to allow specification of policies by arbitrary OU rather than by role.  To accomplish this new specification, the policy parsing grammar would need to be updated.  Perhaps to something like {{Org1MSP.OU=master}}.

-------------------- Original bug text below -----------------------

Channel.tx fails after defining a custom signature policy and assigning it to resource:

qscc/GetTransactionByID: /Channel/Application/MyPolicy 

 

The modified version of basic-network sample is attached.",,crashmark93,jyellick,Vishal3152,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Apr/19 10:23 PM;Vishal3152;basic-network.zip;https://jira.hyperledger.org/secure/attachment/17180/basic-network.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:ao",,,,Unset,Unset,,"1. Added config.yaml to peer msp folder with two additional custom OUs.

2.  Define a new policy under Application -->Policies section in configtx.yaml:
        MyPolicy:
            Type: Signature
            Rule: ""OR('Org1MSP.master')""
3. Mapped the policy to resource qscc/GetTransactionByID

4. Create the genesis block by executing below command:
 /home/vishal/fabric-samples/bin/configtxgen  -profile OneOrgOrdererGenesis -channelID byfn-sys-channel -outputBlock ./config/genesis.block

5. An error occurred while generating channel.tx:

 export CHANNEL_NAME=mychannel  && ../bin/configtxgen -profile OneOrgChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID $CHANNEL_NAME

"" Error on outputChannelCreateTx: could not generate default config template: error parsing configuration: could not create application group: error adding policies to application group: invalid signature policy rule 'OR('Org1MSP.master')': Unable to parse numeric value '.' to float64
""",,Unset,,,,,,Unset,,Unset,,(Please add usage information),crashmark93,jyellick,Vishal3152,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/Jun/19 4:29 PM;yukkyhira;I have reproduced this issue and started to work on.;;;","10/Jun/19 11:48 PM;jyellick;This seems to stem from a misunderstanding of the policy format.  The {{<MSPID>.<id>}} format does not support OUs, instead it refers to roles.  The current set of possible roles are 'Admin', 'Peer', and 'Client'.  So this is not a bug.  It would be a useful addition to the policy parsing language to support OUs, but this is not a bug, rather a new feature.;;;","11/Jun/19 11:59 AM;yukkyhira;[~jyellick]  Thanks for your help.
 I'm still newbie in Fabric, so it's difficult for me to handle this JIRA, so I leave from assignee.

[~Vishal3152];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer option for URL to advertise in Service Discovery for SDK users,FAB-15297,39542,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mistogans,mistogans,29/Apr/19 11:24 AM,16/May/19 9:26 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,1,,,,,,"As a Blockchain Developer, I would like to explicitly set my peer's external endpoint advertised to SDK users in Service Discovery, so that I can use Service Discovery to discover peers without implementing a DNS.

 

Motivation:

As an application developer, I host my fabric network on a docker network. I use the node Fabric SDK on my application to discover other peers in the network so that I can send endorsement proposals to them.

Currently we use the PEER_GOSSIP_EXTERNALENDPOINT option on the peer for advertising the peer's url in the SDK. However, as the peers are hosted in a docker network (non-host network), the URLs used are only discoverable within the docker network. If I choose to use my host's hostname in that option, the docker containers are unable to bind to that address.

The current work around is to implement a DNS for my client applications to use, and use external port mappings to map to the internal ports the peers are listening on.

We propose to have such an option to speed up development of our applications and networks.",,denyeart,edwardaa,harrisob@us.ibm.com,mistogans,rhegde,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11665,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00m73:",,,,Unset,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),denyeart,edwardaa,harrisob@us.ibm.com,mistogans,rhegde,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Apr/19 7:57 PM;yacovm;I think it's pretty easy to add support for it in the peer side- all we need to do is to add to the [AliveMessage|https://github.com/hyperledger/fabric/blob/master/protos/gossip/message.proto#L266-L270] message an additional field. 

Since the discovery service returns the entire gossip envelope of an alive message, an SDK can just prefer that endpoint instead of the external endpoint.

However I'm not sure how complex it is for the SDK, since each SDK implemented discovery support differently.

[~troyronda] , [~bstasyszyn] , [~rickr],  [~harrisob@us.ibm.com]  - what do you guys think? Is it worth the effort? 

 

Also - [~C0rWin] , [~mastersingh24] , [~sykesm] please chime in.;;;","30/Apr/19 1:21 AM;harrisob@us.ibm.com;What change is needed for the SDK's, is it to use a different address just for discovery ?;;;","30/Apr/19 3:51 AM;yacovm;Instead of doing [this|https://github.com/hyperledger/fabric-sdk-node/blob/release-1.4/fabric-client/lib/Channel.js#L1400] you'll be doing: 
{quote}peer.someNewField = q_membership_message.alive_msg.membership.someNewField;{quote};;;","30/Apr/19 4:05 AM;harrisob@us.ibm.com;looks easy enough ... I will update when every it is ready;;;","05/May/19 1:45 AM;denyeart;[~yacovm] So let me see if I understand this correctly...

*Scenario: Each org hosts peers in their own internal network (typical)*

External peers and clients use the same address to reach a peer.  Address would remain configured in: *peer.gossip.externalEndpoint*

 

*Scenario: All orgs host peers in the same internal network (less typical)*

Peers would reach peers in other orgs via an 'internal' address configured in *peer.gossip.externalEndpoint*, but clients would reach peers in an external address configured in a new config option like *peer.gossip.externalEndpointForClients*

 

As you can see the terms 'external' and 'internal' get confusing in the latter scenario.  Things get even more confusing if a client is internal to one of the orgs, it would want to use the internal address for its own peers but external address for other org's peers. I don't think we have any facility to support that currently.

 

Note, this is essentially the same request that [~rickr] made for an orderer external endpoint for clients in FAB-11665.;;;","05/May/19 2:21 AM;yacovm;{quote}Note, this is essentially the same request that Rick Rine made for an orderer external endpoint for clients in FAB-11665.{quote}

According to the JIRA opener, the issue here is that:
{quote} If I choose to use my host's hostname in that option, the docker containers are unable to bind to that address.{quote}

So it's not a problem for the orderers, as they don't need to be aware of their endpoints. Peers, however - should be aware of their endpoints but can't publish 2 external endpoints.


{quote}
Scenario: All orgs host peers in the same internal network (less typical)

Peers would reach peers in other orgs via an 'internal' address configured in peer.gossip.externalEndpoint, but clients would reach peers in an external address configured in a new config option like peer.gossip.externalEndpointForClients{quote}
Not quite. Peers prefer to use the ""internal endpoint"" if they have the same MSP ID, and peers of different MSP IDs only see external endpoints (they don't see the internal endpoint at all).

So in a sense we have 3 networks - the peer's internal network, other peers network, and the client's network. 

{quote}As you can see the terms 'external' and 'internal' get confusing in the latter scenario.  Things get even more confusing if a client is internal to one of the orgs, it would want to use the internal address for its own peers but external address for other org's peers. I don't think we have any facility to support that currently.{quote}

We currently do not publish internal endpoints of peers in discovery, yet it's possible to do that with ease. However I haven't seen a demand for that, and this isn't what this JIRA is about. 


;;;","05/May/19 2:46 AM;denyeart;[~yacovm] I understand that we can think of it as three networks. In the Description they were talking about a Docker network that had all the peers, so I collapsed it to a peer network and a client network. Regardless, I wanted to summarize to ensure that we're on the same page:

*peer.gossip.endpoint* - endpoint that peers in the same org (same MSPID) use. defaults to *peer.address* if not set.

*peer.gossip.externalEndpoint* - endpoint that peers in different orgs (different MSPID) use. Note - if the peers are all in the same network (e.g. first-network sample network), this would be configured to be the same as *peer.gossip.endpoint*.

*peer.gossip.externalEndpointForClients* - proposed new config for external endpoint that clients use.

Right?

 

I still assert the same problem exists for orderers... if peers and orderers are on the same network, but clients external (e.g. first-network sample network), then the peers will need to use one orderer address, and the clients will need to use a different external orderer address.;;;","05/May/19 2:51 AM;yacovm;Yes, and yes - the problem still exists for orderers. ;;;","16/May/19 8:27 PM;rhegde;I am trying to understand the restriction for using the service discovery, can you correct me

1. So a client running as a native host process and is not part of the orderer or peer docker swarm network(s), cannot use the service discovery information for endorsement/broadcast activity on the exposed orderer or peer host port. This currently mandates client to be part of the swarm network to use service discovery?

2.  This further challenges for client to use the service discovery if the other organization peer & orderer node uses Port Forwarding, Firewall (as said by Rick).;;;","16/May/19 9:26 PM;yacovm;so, discovery simply returns what gossip tells it, and gossip returns what is in the peer's configuration which is routable only from the docker network. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Couchdb BYFN test failed with error validating channel creation transactions,FAB-15298,39547,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,29/Apr/19 10:22 PM,26/Jul/19 4:02 AM,28/Oct/23 3:08 AM,26/Jul/19 4:02 AM,v1.4.2,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,ci-first-failure,,,,,"Couchdb test failed in BYFN(first instance) with error in validating channel creation transaction for new channel 'custom-channel-couchdb

*Branch:* release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
19:39:19 Error: got unexpected status: BAD_REQUEST -- error validating channel creation transaction for new channel 'custom-channel-couchdb', could not succesfully apply update to template configuration: error authorizing update: error validating DeltaSet: policy for [Group]  /Channel/Application not satisfied: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Admins' sub-policies to be satisfied
19:39:19 !!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
19:39:19 ========= ERROR !!! FAILED to execute End-2-End Scenario
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-end-2-end-daily-release-1.4-s390x/59/Docker_Container_Logs/",,denyeart,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,0bc0a69793add96caad2619b3a64747f783f51e7,Unset,No,,,"1|i00m87:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jul/19 4:02 AM;vijaypunugubati;Not observed this issue recently, closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Detect restart after consensus type change, change raft start",FAB-15299,39550,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,29/Apr/19 11:13 PM,12/Jun/19 12:50 AM,28/Oct/23 3:08 AM,09/May/19 7:09 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Detect restart after consensus-type migration by:

1. The last block and the block before it carry a config-tx
2. In both config txs we have ConsensusType.State == MAINTENANCE
3. The ConsensusType.Type is different in these two blocks
4. The last block (orderer) metadata is empty

This part is implemented in multichannel/chainsupport.go in order to be reusable.

In the etcdraft chain we have to change the start method.
Change the etcdraft chain.start() such that: 
isJoin = height >0 && not-migration
(instead of isJoin=height>0).

""not-migration"" is computed by calling the respective method in chainsupport that detects restart after migration.

We do that in order to change the way chain.node.start(fresh, join) is starting.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m8v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consensus type migration integration tests - extended,FAB-15300,39551,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,29/Apr/19 11:22 PM,20/Jun/19 1:01 PM,28/Oct/23 3:08 AM,07/Jun/19 4:17 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Check corner cases and abort,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m93:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NL failed to bring up network,FAB-15301,39552,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,29/Apr/19 11:40 PM,30/Apr/19 10:04 PM,28/Oct/23 3:08 AM,30/Apr/19 10:04 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,NL gen_network.sh failed to bring up network using docker-compose command due to option --no-ansi.  Change to --no-color,,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15292,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00m9b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"29/Apr/19 11:43 PM;dongming;https://gerrit.hyperledger.org/r/#/c/31126/;;;","30/Apr/19 2:27 AM;scottz;Please share more details of the problem description. What is the steps to reproduce, in what environment? This works well in the CI tests; here is the result of the merge job which runs a NL/PTE test: https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/648/console;;;","30/Apr/19 10:03 PM;dongming;Update README with

Docker-compose verion 1.16.0 or later is required to bring up the network in local host.  Below are the steps to upgrade docker-compose:

   docker-compose -v
   sudo rm -rf docker-compose
   sudo curl -L ""https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)"" -o /usr/local/bin/docker-compose  (replace 1.24.0 if needed)
   sudo chmod +x /usr/local/bin/docker-compose
   docker-compose -v
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename peer.Server from core/peer/deliverevents.go DeliverServer,FAB-15302,39553,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,TopJohn,sykesm,sykesm,30/Apr/19 3:15 AM,28/May/19 4:16 PM,28/Oct/23 3:08 AM,15/May/19 7:05 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,help-wanted,ipm,ipm-planned,,,"The current structure is named peer.Server - implying a much grander scope... When reading the doc comment, we see the real name should be peer.DeliverServer.

This should be a simple change and an extremely easy first CR.",,guoger,hawchou,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ltq:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,hawchou,sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/May/19 4:16 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31253;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release interoperability tests for the new lifecycle,FAB-15303,39554,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,ales,ales,30/Apr/19 3:58 AM,23/Jul/19 5:21 PM,28/Oct/23 3:08 AM,23/Jul/19 5:21 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15062,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:g9",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode must be operational across channel upgrade and legacy/new definition upgrade,FAB-15304,39555,39554,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,30/Apr/19 3:59 AM,05/Jun/19 2:52 PM,28/Oct/23 3:08 AM,05/Jun/19 2:52 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m9r:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove mockery from chaincode,FAB-15305,39556,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,dereckluo,dereckluo,30/Apr/19 4:51 AM,09/May/19 4:38 AM,28/Oct/23 3:08 AM,09/May/19 4:28 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,hygiene,ipm,,,,"We need to be consistent on mock libraries that being used. For core/chaincode, do not use mockery for mock generation, and use counterfeiter instead. 

 ",,ales,dereckluo,mastersingh24,MHBauer,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ltq:i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,dereckluo,mastersingh24,MHBauer,sykesm,yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/May/19 1:26 AM;yacovm;{quote}We need to be consistent on mock libraries that being used. {quote}

Why? are we in the army? And what are the boundaries of this consistency? Is it only chaincode or also all of fabric code base?

Are you intending to change that in the entire project? 
If so, I think this is a waste of time since we have a lot of tests that use mockery already.
Besides, I can also argue the other way around - let's stop using counterfeiter, and convert everything to mockery.

There are advantages with mockery over counterfeiter, such as - it is forcing you to define a behavior for a function, instead of returning a zero value all the time, and this makes the person that writes the test aware of the the setup of the test, while with counterfeiter you might setup the mocks in a sloppy way but it will still pass unintentionally. With mockery, if you setup the mocks wrong - you will probably get a panic because some behavior isn't defined.;;;","02/May/19 1:27 AM;ales;+1 [~yacovm], let's switch counterfeiter -> mockery rather than the other way around;;;","02/May/19 1:34 AM;yacovm;No, i am not saying we should switch. I am saying we shouldn't switch, and as long as we use autogenerated mocks we're good. 

Every developer can just use what fits him/her the most, and we I don't see value in adhering to a single one. ;;;","02/May/19 3:22 AM;sykesm;There should be a single mocking library used *within a package*. The chaincode package uses counterfeiter; end of story.

If I contribute to a package that uses mockery, I'll adapt that style; I expect the same of those contributing to chaincode or other packages where counterfeiter has been used.

Also, mockery is less flexible in the code it generates (must be from production package, exported code, no renaming of types) so it's not like it's any better than counterfeiter. There are also exactly *three* (3) places in the entire code base where we use mockery assertions: cscc, qscc, and msp cache.;;;","02/May/19 3:22 AM;sykesm;{quote}
+1 Yacov Manevich, let's switch counterfeiter -> mockery rather than the other way around
{quote}

If you want to do that, please defend your position and show how that moves the ball forward?

Thanks.;;;","09/May/19 1:59 AM;sykesm;https://gerrit.hyperledger.org/r/c/31232/;;;","09/May/19 2:33 AM;sykesm;https://gerrit.hyperledger.org/r/c/31286/;;;","09/May/19 4:28 AM;mastersingh24;[~sykesm] is correct ... single mocking library per package.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Convert rpc definitions from block style `{}` to semicolon terminated `;`",FAB-15306,39557,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,srinivaskumarr,sykesm,sykesm,30/Apr/19 6:37 AM,21/May/19 3:59 AM,28/Oct/23 3:08 AM,21/May/19 3:59 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"Our proto definitions use the legacy rpc operation style with an empty block.
{code}
rpc GossipStream (stream Envelope) returns (stream Envelope) {}
{code}
An alternative, that appears more widely adopted, uses a semi-colon statement terminator instead.
{code}
rpc GossipStream (stream Envelope) returns (stream Envelope);
{code}
We would like to standardize on the semi-colon terminated rpc declaration.

In addition to updating the proto definitions, the bindings should also be updated with {make protos}.

This is a good CR for a new contributor; it's simple and can be used to understand the contribution process.",,guoger,srinivaskumarr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00m9z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,srinivaskumarr,sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/May/19 6:54 PM;srinivaskumarr;Hello i am interested in taking this issue.;;;","06/May/19 10:55 PM;guoger;[~srinivaskumarr] are you still planning to tackle this? Pls assign it to yourself if so, thx!;;;","09/May/19 8:41 PM;srinivaskumarr;[https://gerrit.hyperledger.org/r/#/c/31296/];;;","16/May/19 5:55 PM;srinivaskumarr;[~sykesm] is the above CR considered merged? Can i close this ticket now ?;;;","16/May/19 10:34 PM;sykesm;The CR has not been merged yet. It needs approval from two maintainers so we need one more +2. ;;;","17/May/19 1:33 AM;srinivaskumarr;Who else do i add for review?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove PeerID and PeerEndpoint,FAB-15307,39558,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,30/Apr/19 7:16 AM,30/Apr/19 9:05 PM,28/Oct/23 3:08 AM,30/Apr/19 9:05 PM,,,,,,,,,,,,,,,,,,,,,,,,0,hygiene,ipm,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00maf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Apr/19 11:16 AM;sykesm;https://gerrit.hyperledger.org/r/31136

/cc [~yacovm];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify godoc comments on the peer configuration structure to a conventional doc structure,FAB-15308,39559,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,dereckluo,sykesm,sykesm,30/Apr/19 11:24 AM,09/May/19 4:39 AM,28/Oct/23 3:08 AM,09/May/19 4:39 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Even though godoc doesn't explicitly annotate fields in structures, it would be good if our field documentation was consistent with that format.  In practice that means we format it as

[optional article] [field name] [verb] ...

Example: 

{code}
	// PeerID provides a name for this peer instance and is used when
	// naming docker resources.
	PeerID string
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00man:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve the reliability of gossip unit tests ,FAB-15309,39561,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,naaman,naaman,30/Apr/19 7:23 PM,04/Dec/19 5:28 AM,28/Oct/23 3:08 AM,04/Dec/19 5:28 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"The gossip unit tests should be improved in two aspects

Currently gossip unit tests fail around 2-3 times a day. Failures are intermittent and occur in a variety of tests.

Tests fail more often in the CI environment. This is probably due to the more constraint resources available in CI that lead to various timing effects the tests are vulnerable to.

 

 

 

 ",,caod,naaman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15093,FAB-15032,FAB-14956,FAB-14948,FAB-14947,FAB-14936,FAB-14130,FAB-14048,FAB-13997,FAB-13911,FAB-13784,FAB-13737,FAB-13736,FAB-13539,FAB-13377,FAB-12067,FAB-12065,FAB-15688,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,No,Unset,,,,,No,,Unset,No,,,"1|i00mav:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,naaman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Dec/19 5:28 AM;caod;Closing as all sub-tasks are complete;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reconstructing behaviour of peer and orderer,FAB-15310,39562,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,High,,,raft 3,raft 3,30/Apr/19 9:26 PM,30/Apr/19 9:26 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Hello,

Two relevant questions:
 # While peer is reconstructing CouchDB (when peer starts with data but with empty CouchDB). This happens when peer has persistent disk attached but not CouchDB 
 ** is it safe to use peer? 
 ** otherwise how to detect this situation and do not send traffic to peer? maybe (if not already in place) *peer node status* should return a proper message which can be used as *readiness probe* and do not send traffic to peer?
 # When using Kafka orderer, are we safe by not attaching persistent disk to orderer nodes? Experience suggests orderer nodes restore data from Kafka cluster, but is this something we can rely on?
 ** similar to above, is it safe to use that instance of orderer while restoring data?
 ** otherwise how to detect this situation and do not send traffic to that orderer instance? 

Thanks

 ",,hakan.eryargi,raft 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mb3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hakan.eryargi,raft 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Logging control documentation is incorrectly formatted in docs,FAB-15311,39564,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,sykesm,sykesm,30/Apr/19 11:36 PM,02/May/19 3:48 PM,28/Oct/23 3:08 AM,02/May/19 3:48 PM,v1.4.0,v2.0.0,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,docs,help-wanted,ipm,,,"https://hyperledger-fabric.readthedocs.io/en/latest/logging-control.html

{code}
In pretty-printed logs the logging level is indicated both by color and by a four-character code, e.g, “ERRO” for ERROR, “DEBU” for DEBUG, etc. In the logging context a logger is an arbitrary name (string) given by developers to groups of related messages. In the pretty-printed example below, the loggers ledgermgmt, kvledger, and peer are generating logs.

::
2018-11-01 15:32:38.268 UTC [ledgermgmt] initialize -> INFO 002 Initializing ledger mgmt 2018-11-01 15:32:38.268 UTC [kvledger] NewProvider -> INFO 003 Initializing ledger provider 2018-11-01 15:32:38.342 UTC [kvledger] NewProvider -> INFO 004 ledger provider Initialized 2018-11-01 15:32:38.357 UTC [ledgermgmt] initialize -> INFO 005 ledger mgmt initialized 2018-11-01 15:32:38.357 UTC [peer] func1 -> INFO 006 Auto-detected peer address: 172.24.0.3:7051 2018-11-01 15:32:38.357 UTC [peer] func1 -> INFO 007 Returning peer0.org1.example.com:7051
An arbitrary number of loggers can be created at runtime, therefore there is no “master list” of loggers, and logging control constructs can not check whether logging loggers actually do or will exist.
{code}",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mbj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/May/19 8:09 AM;MHBauer;https://gerrit.hyperledger.org/r/#/c/31184/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address remaining test comments from https://gerrit.hyperledger.org/r/c/31076/4,FAB-15313,39566,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,sykesm,sykesm,30/Apr/19 11:58 PM,17/Jun/19 11:23 AM,28/Oct/23 3:08 AM,04/Jun/19 7:17 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ipm,,,,,"Comments regarding the assertions in {{TestSelectClusterBootBlock}} need to be addressed.  Gerrit has the details but here are the comments:

{quote}
I think you either want to use assert.Same(t, bootstrapBlock, clusterBlock) so ensure you're getting back the exact same instance (ptr value) or just use assert.Equal(t, bootstrapBlock, clusterBoot) to ensure that the values pointed to are equal. The header number assertion is implied with the equality check.

Unrelated but for awareness (you may already know) - if proto objects get marshaled/unmarshaled, assert.Equals won't necessarily work and you'll have to use proto.Equal to check the values.
{quote}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mbz:",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide an easy way to determine the version of the fabric-chaincode in use,FAB-15314,39568,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,lesleyannj,lesleyannj,01/May/19 12:24 AM,01/May/19 12:31 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,fabric-chaincode,fabric-chaincode-node,"node,",,,The version of fabric-chaincode-node actually running on a system needs to be easily retrievable by the user.  This is required for support and issue reproduction.,,lesleyannj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mcf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lesleyannj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE supports general chaincode,FAB-15315,39569,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,01/May/19 12:27 AM,15/May/19 10:30 PM,28/Oct/23 3:08 AM,15/May/19 10:30 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"The purpose of this task is to have PTE support custom chaincode.

design:
Define the chaincode arguments as follow:
ccType: set to general
keyPayLoad:  an array of the chaincode argument indexes to be altered by PTE for each transaction
keyPayLoadType:  an array of the argument types, match with keyPayLoad array.  Supported types are:
    * Fixed: a fixed string with a random length between keyPayLoadMin and keyPayLoad Max
    * Random: a random string with random length between keyPayLoadMin and keyPayLoad Max
    * FixedInt: a fixed random number between keyPayLoadMin and keyPayLoad Max
    * RandomInt: a random number between keyPayLoadMin and keyPayLoad Max

payload size:  an array of minimum payload size for each argument
payload type: an array of maximum payload size for each argument

For each transaction, PTE will alter each argument accordingly.
",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00mcn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"04/May/19 2:41 AM;dongming;add keyPayLoadType[], keyPayLoadMin[], keyPayLoadMax[] to control the transaction arguments.

https://gerrit.hyperledger.org/r/#/c/31214/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address issues flagged by shellcheck in fabric scripts,FAB-15316,39570,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,swetharepakula,sykesm,sykesm,01/May/19 4:48 AM,05/Jun/19 12:25 AM,28/Oct/23 3:08 AM,05/Jun/19 12:25 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"The {{shellcheck}} linter flags a number of issues with the scripts in fabric. Evaluate each of the issues and resolve as appropriate.

{code}
for f in ./scripts/*; do shellcheck -f gcc $f; done
./scripts/bootstrap.sh:14:8: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/bootstrap.sh:15:8: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/bootstrap.sh:38:46: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:39:45: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:48:46: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:49:45: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:57:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:58:40: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:85:23: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:85:33: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:97:32: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:98:34: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:101:25: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:103:21: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:103:36: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:106:21: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:106:36: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:121:33: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:123:15: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:125:37: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:125:52: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:127:16: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:128:16: note: Use -n instead of ! -z. [SC2236]
./scripts/bootstrap.sh:131:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:131:56: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:140:18: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:140:135: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:140:154: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:148:18: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:148:144: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:148:166: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:157:3: note: which is non-standard. Use builtin 'command -v' instead. [SC2230]
./scripts/bootstrap.sh:161:21: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:163:17: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:165:31: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/bootstrap.sh:168:25: warning: Quote the grep pattern so the shell won't interpret it. [SC2062]
./scripts/bootstrap.sh:168:25: note: Note that unlike globs, r* here matches 'rrr' but not 'romeo'. [SC2022]
./scripts/bootstrap.sh:182:6: note: Use -n instead of ! -z. [SC2236]
./scripts/bootstrap.sh:182:16: warning: Prefer [ p ] && [ q ] as [ p -a q ] is not well defined. [SC2166]
./scripts/bootstrap.sh:184:8: note: Use -n instead of ! -z. [SC2236]
./scripts/bootstrap.sh:184:19: warning: Prefer [ p ] && [ q ] as [ p -a q ] is not well defined. [SC2166]
./scripts/bootstrap.sh:186:10: note: Use -n instead of ! -z. [SC2236]
./scripts/bootstrap.sh:186:21: warning: Prefer [ p ] && [ q ] as [ p -a q ] is not well defined. [SC2166]
./scripts/bootstrap.sh:199:5: note: This default assignment may cause DoS due to globbing. Quote it. [SC2223]
./scripts/bootstrap.sh:200:5: note: This default assignment may cause DoS due to globbing. Quote it. [SC2223]
./scripts/bootstrap.sh:201:5: note: This default assignment may cause DoS due to globbing. Quote it. [SC2223]
./scripts/changelog.sh:9:1: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/changelog.sh:9:6: note: echo may not expand escape sequences. Use printf. [SC2028]
./scripts/changelog.sh:11:9: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_license.sh:9:12: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
./scripts/check_license.sh:10:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_license.sh:10:59: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_license.sh:15:9: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_license.sh:43:17: warning: Prefer mapfile or read -a to split command output (or quote to avoid splitting). [SC2207]
./scripts/check_license.sh:44:78: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_license.sh:44:97: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_license.sh:53:9: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_license.sh:66:9: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_spelling.sh:8:35: note: Use ./*glob* or -- *glob* so names with dashes won't become options. [SC2035]
./scripts/check_spelling.sh:12:55: warning: Quote this to prevent word splitting. [SC2046]
./scripts/check_spelling.sh:18:6: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_spelling.sh:18:12: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_trailingspaces.sh:5:14: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_trailingspaces.sh:8:17: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_trailingspaces.sh:8:17: note: Useless echo? Instead of 'cmd $(echo foo)', just use 'cmd foo'. [SC2116]
./scripts/check_trailingspaces.sh:8:23: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_trailingspaces.sh:9:9: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_trailingspaces.sh:9:15: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_trailingspaces.sh:11:10: note: Use -n instead of ! -z. [SC2236]
./scripts/check_trailingspaces.sh:11:16: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/check_trailingspaces.sh:11:17: note: egrep is non-standard and deprecated. Use grep -E instead. [SC2196]
./scripts/check_trailingspaces.sh:11:32: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_trailingspaces.sh:15:7: note: egrep is non-standard and deprecated. Use grep -E instead. [SC2196]
./scripts/check_trailingspaces.sh:15:22: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/check_trailingspaces.sh:20:6: note: Use -n instead of ! -z. [SC2236]
./scripts/compile_protos.sh:14:20: warning: Use -print0/-0 or -exec + to allow for non-alphanumeric filenames. [SC2038]
./scripts/compile_protos.sh:17:23: warning: Use -print0/-0 or -exec + to allow for non-alphanumeric filenames. [SC2038]
./scripts/compile_protos.sh:17:28: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/compile_protos.sh:18:5: warning: Quote this to prevent word splitting. [SC2046]
./scripts/compile_protos.sh:19:11: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/compile_protos.sh:20:11: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/compile_protos.sh:24:25: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/compile_protos.sh:27:58: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:13:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:15:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:25:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:26:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:28:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:38:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:39:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:41:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:51:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:52:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:54:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:64:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:65:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:67:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:77:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:78:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:80:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:87:39: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:90:2: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:90:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:91:12: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:91:18: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:92:19: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:93:52: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:94:19: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:95:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:98:42: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:101:45: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:104:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:104:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:105:19: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:106:20: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:107:53: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:108:20: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:109:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:112:48: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:113:20: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:113:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:121:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:122:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:124:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:135:3: note: Consider using { cmd1; cmd2; } >> file instead of individual redirects. [SC2129]
./scripts/generateHelpDocs.sh:136:13: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/generateHelpDocs.sh:138:14: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/goListFiles.sh:10:10: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/goListFiles.sh:16:10: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/goListFiles.sh:16:46: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/goListFiles.sh:18:21: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/goListFiles.sh:18:33: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/goListFiles.sh:23:17: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/goListFiles.sh:25:29: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/goListFiles.sh:30:11: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/golinter.sh:18:23: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/golinter.sh:27:24: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/golinter.sh:30:10: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/golinter.sh:48:10: note: Expressions don't expand in single quotes, use double quotes for that. [SC2016]
./scripts/golinter.sh:49:51: warning: Quote this to prevent word splitting. [SC2046]
./scripts/golinter.sh:61:10: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/metrics_doc.sh:17:33: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/metrics_doc.sh:17:69: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/metrics_doc.sh:26:53: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:56:1: note: which is non-standard. Use builtin 'command -v' instead. [SC2230]
./scripts/multiarch.sh:57:6: note: Check exit code directly with e.g. 'if mycmd;', not indirectly with $?. [SC2181]
./scripts/multiarch.sh:66:15: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:66:26: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:66:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:67:15: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:67:26: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:67:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:72:28: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:72:47: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:78:28: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:78:47: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:85:15: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:85:26: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:85:35: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:86:15: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:86:26: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/multiarch.sh:86:35: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:71:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:71:48: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:71:54: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:72:40: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:72:47: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:72:53: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:72:79: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:72:86: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:72:92: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:73:40: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:73:47: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:73:53: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:73:79: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:74:43: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:74:50: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:74:56: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:80:10: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/pull_build_artifacts.sh:81:26: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:83:16: note: Useless echo? Instead of 'cmd $(echo foo)', just use 'cmd foo'. [SC2116]
./scripts/pull_build_artifacts.sh:85:21: note: Useless cat. Consider 'cmd < file | ..' or 'cmd file | ..' instead. [SC2002]
./scripts/pull_build_artifacts.sh:86:17: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:87:27: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:110: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:126: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:133: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:149: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:176: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:192: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:199: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:88:215: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:89:8: note: Check exit code directly with e.g. 'if mycmd;', not indirectly with $?. [SC2181]
./scripts/pull_build_artifacts.sh:101:44: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:101:57: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:102:43: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:102:56: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:102:82: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:102:95: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:103:46: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:103:59: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:113:42: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:113:49: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:113:55: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:114:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:114:48: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:114:54: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:114:83: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:115:41: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:115:48: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:115:54: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:115:83: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:115:90: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:115:96: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:116:44: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:116:51: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:116:57: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:123:40: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:123:47: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:123:53: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:124:39: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:124:46: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:124:52: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:124:78: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:124:85: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:124:91: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:125:39: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:125:46: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:125:52: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:125:78: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:126:42: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:126:49: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:126:55: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:133:38: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:133:45: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:133:51: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:134:37: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:134:44: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:134:50: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:134:76: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:134:83: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:134:89: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:135:37: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:135:44: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:135:50: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:135:76: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:136:40: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:136:47: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:136:53: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/pull_build_artifacts.sh:174:17: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
./scripts/run-integration-tests.sh:19:16: warning: This { is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
./scripts/run-integration-tests.sh:19:17: warning: This { is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
./scripts/run-integration-tests.sh:19:22: warning: This } is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
./scripts/run-integration-tests.sh:19:23: warning: This } is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
./scripts/run-integration-tests.sh:27:15: warning: Prefer mapfile or read -a to split command output (or quote to avoid splitting). [SC2207]
./scripts/run-unit-tests.sh:40:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/run-unit-tests.sh:42:17: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
./scripts/run-unit-tests.sh:44:17: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
./scripts/run-unit-tests.sh:50:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/run-unit-tests.sh:52:30: warning: Quote this to prevent word splitting. [SC2046]
./scripts/run-unit-tests.sh:60:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/run-unit-tests.sh:82:10: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/run-unit-tests.sh:85:15: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/run-unit-tests.sh:87:21: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/run-unit-tests.sh:87:47: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
./scripts/run-unit-tests.sh:90:15: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/run-unit-tests.sh:92:21: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/run-unit-tests.sh:92:61: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
./scripts/run-unit-tests.sh:100:77: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
./scripts/run-unit-tests.sh:114:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/run-unit-tests.sh:114:16: note: Use $(...) notation instead of legacy backticked `...`. [SC2006]
./scripts/run-unit-tests.sh:115:11: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/run-unit-tests.sh:115:31: warning: Prefer [ p ] || [ q ] as [ p -o q ] is not well defined. [SC2166]
./scripts/run-unit-tests.sh:115:35: note: Double quote to prevent globbing and word splitting. [SC2086]
./scripts/run-unit-tests.sh:132:14: warning: Declare and assign separately to avoid masking return values. [SC2155]
./scripts/run-unit-tests.sh:132:41: note: Double quote to prevent globbing and word splitting. [SC2086]
{code}",,denyeart,jtonline,swetharepakula,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15437,,,,,,,,,,FAB-15607,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mcv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jtonline,swetharepakula,sykesm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/May/19 5:41 AM;swetharepakula;[https://gerrit.hyperledger.org/r/#/c/31240/];;;","07/May/19 6:52 AM;sykesm;While the task is specifically about shellcheck, a side-goal is to identify other improvements that should be made and create issues/tasks for those as well.;;;","07/May/19 6:59 AM;swetharepakula;Oh okay, some scripts do require larger changes. I was planning on making them separate commits on the same issue. But instead I will start creating separate tasks for those.;;;","13/May/19 10:38 PM;jtonline;Hi, it looks like the CR for this issue has cause the bootstrap.sh script to start failing. For example I get the following error when passing in ""1.4.1 -s"" arguments:

 

bash: line 182: [: too many arguments

 

Seems to be due to this change [https://github.com/hyperledger/fabric/commit/c322e835ec66ae35c0ee38731d897dc5293b5975#diff-d2fcc131c81c293118156830e0c17258L182]

 

Unfortunately since there is no release as such for the bootstrap file, this is broken now.;;;","14/May/19 12:42 AM;swetharepakula;[~jtonline] I have created another patch to address the error you found: https://gerrit.hyperledger.org/r/31343;;;","14/May/19 1:00 AM;jtonline;Thanks [~swetharepakula]! Would it be possible to add some tests for this script?;;;","14/May/19 4:24 AM;denyeart;[~swetharepakula]
 bootstrap.sh download script got broken by [https://gerrit.hyperledger.org/r/#/c/31240]

It has been fixed today by reverting the CR [https://gerrit.hyperledger.org/r/#/c/31342|https://gerrit.hyperledger.org/r/#/c/31342/]

Be very careful with bootstrap.sh updates since it is Fabric's live download script!  You can test it local before pushing by passing arguments, e.g.:
{code:java}
./scripts/bootstrap.sh 2.0.0-alpha 2.0.0-alpha 0.4.15{code}
should override the default of v1.4.1.;;;","21/May/19 8:59 AM;swetharepakula;Created a[ jira|https://jira.hyperledger.org/browse/FAB-15489] to remove `scripts/goListFiles.sh`. It is not being used by the Makefile anymore.  ;;;","04/Jun/19 2:07 AM;denyeart;[~swetharepakula] [~sykesm] bootstrap.sh has been broken again due to the merge yesterday.

I've opened FAB-15607.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Streamline how peers receive blocks from other peers,FAB-15317,39571,,Epic,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,01/May/19 6:06 AM,26/Jul/22 12:54 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In v1.x peers can receive blocks in three ways:
 # from orderer
 # from another peer via proactive gossip push
 # from another peer via 'state transfer' pull

There are some redundancies and inefficiencies in this approach:
 * Many networks configure peers to receive blocks from ordering service, rendering the gossiping of blocks and state transfer as unnecessary overhead and complication.
 * Peer may receive same block multiple times via gossip.
 * Even if peer has a block in memory already, it may request the same block again via state transfer.
 * Gossip state transfer can try multiple times concurrently, without waiting for prior requests to time out (this was a bug, which may have been fixed already in some releases).
 * The gossip buffers are per channel, causing memory issues when a peer has joined many channels.

We can consider various options in future releases to streamline how peers receive blocks:

1) Have peers only receive blocks from orderer

2) Streamline peer-to-peer block transmission capability

2a) Remove either gossiping of blocks or state transfer, and improve the other

2b) Remove both gossiping of blocks and state transfer, and utilize simpler peer-to-peer block deliver service instead to read a stream of blocks from another peer (consistent with how peers receive blocks from orderer).

 
 ",,davidkhala,denyeart,Senthil1,silliman,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15574,,,,FAB-16435,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-1,,Streamline how peers receive blocks,To Do,No,,Unset,No,,,"1|i00md3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,denyeart,Senthil1,silliman,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Oct/20 11:37 PM;davidkhala;[~denyeart] It looks already done and released, should we close it ?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky Raft UT: [When] two type B config are sent back-to-back [It] discards or rejects the second,FAB-15318,39574,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,01/May/19 1:03 PM,13/May/19 5:46 PM,28/Oct/23 3:08 AM,06/May/19 4:17 PM,v1.4.1,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,ci-flake,Raft,,,,https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11755/consoleFull,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mdj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/May/19 1:07 PM;guoger;https://gerrit.hyperledger.org/r/31179 release-1.4
https://gerrit.hyperledger.org/r/c/31178/ master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LSCC: Deploying a chaincode with the empty namespace allows arbitrary writes to the channel config,FAB-15319,39575,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,caod,ales,ales,01/May/19 3:40 PM,08/Aug/19 4:45 AM,28/Oct/23 3:08 AM,08/Aug/19 4:45 AM,v1.0.0,v1.0.1,v1.0.2,v1.0.3,v1.0.4,v1.0.5,v1.0.6,v1.1.0,v1.1.1,v1.2.0,v1.2.1,v1.3.0,v1.4.0,,,,,fabric-peer,,,,,,0,,,,,,"h1. Problem

The channel config is stored in the ledger alongside the other application chaincode namespaces. The namespace used for the channel config is the empty namespace.

However, it is entirely possible to deploy a chaincode with the empty namespace, which then gives the deployer the ability to make arbitrary writes to that namespace, including the ""{{resourcesconfigtx.CHANNEL_CONFIG_KEY}}"" key which stores the channel configuration.
h1. Proof of concept

The PoC shows an exploitation of the attack in the following steps
 # a 1.4. channel is created, a chaincode is deployed in it
 # the attacker crafts an LSCC transaction to deploy a chaincode with an empty namespace
 # the attacker now creates a transaction with a read-write set setting the ""{{resourcesconfigtx.CHANNEL_CONFIG_KEY}}"" key of the empty namespace to {{[]byte(""BARF"")}}.
 # At this point the network is restarted; this is required because peers keep an in-memory version of the channel config, which they read out of the ledger only at startup time
 # after restart, we try to invoke a chaincode on the channel and now we fail because the channel no longer exists since the peers can't read its configuration from the ledger. Note the error messages in the log

{code:java}
[e][org1.peer1] 2019-05-02 11:58:20.544 CEST [peer] Initialize -> ERRO 01b Failed to load chain testchannel(unexpected EOF)
{code}
This is because unmarshalling {{[]byte(""BARF"")}} to a channel configuration proto results in a failure.",,ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,FAB-15845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/May/19 7:00 PM;ales;channelconfigattack.2.patch;https://jira.hyperledger.org/secure/attachment/17200/channelconfigattack.2.patch","28/Jun/19 2:54 AM;caod;channelconfigattack.4.patch;https://jira.hyperledger.org/secure/attachment/17352/channelconfigattack.4.patch",,,,,,,,,,,,angelo.decaro,caod,elli-androulaki,jyellick,manish-sethi,sykesm,wenjian,wlahti,yacovm,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzwr6z:zzb",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/May/19 8:12 PM;yacovm;Thanks [~ales], nice find. ;;;","02/May/19 8:21 PM;yacovm;[~manish-sethi] [~mastersingh24] Since we have a pointer at each block to the last config sequence, what is the benefit of using the stateDB-persisted config over having the peer populate the config at starup by fetching the last config block according to the last block? ;;;","02/May/19 10:12 PM;yacovm;Also, the old lifecycle is the only thing that has gone substantial rewrite, but since the last security review (in 1.0 timeframe) lots of other code has been added to the fabric core.

I think this calls for the thorough (internal) security reviews of other components.

[~ales] what do you think? ;;;","02/May/19 10:19 PM;ales;Absolutely [~yacovm] - we have various priorities on various fronts (hygiene, testing, flakes) - we should make sure security is also one of them.;;;","03/May/19 9:07 AM;manish-sethi;[~yacovm] On the background of this - the change for persisting channel config was added in 1.1 when the support for something called resource config was being developed. Resource config support was finally not shipped and persistence of channel config stayed as is.

In terms of benefits, as far as loading at boot time is concerned, I agree with you that since we load full config in memory at boot time there is not much difference between pulling from statedb v/s last config block. However, I feel that having this in state will saves us from handling this as a special _state_ when we implement checkpointing. Since, then the block with last config may have been gone as a result of pruning.

Regardless, this additional entry in lscc transaction that gets unchecked is really scary.;;;","03/May/19 3:13 PM;ales;{quote}Regardless, this additional entry in lscc transaction that gets unchecked is really scary.
{quote}
Just to be clear, this attack does not use the additional read-write set in LSCC transactions, it simply deploys the empty namespace via a normal deploy tx.;;;","28/Jun/19 2:49 AM;caod;Logs for v1.4 fix:

```
[e][peer-channel-info] 2019-06-27 13:41:36.890 EDT [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
[e][org1.peer2] 2019-06-27 13:41:36.891 EDT [endorser] callChaincode -> INFO 050 [][bccf305b] Entry chaincode: name:""qscc""
[e][org1.peer2] 2019-06-27 13:41:36.892 EDT [endorser] callChaincode -> INFO 051 [][bccf305b] Exit chaincode: name:""qscc"" (1ms)
[e][org1.peer2] 2019-06-27 13:41:36.892 EDT [comm.grpc.server] 1 -> INFO 052 unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=127.0.0.1:53168 grpc.code=OK grpc.call_duration=1.26901ms
[o][peer-channel-info] Blockchain info: \{""height"":3,""currentBlockHash"":""4gCTOmQnmPePSXcRcnEVqwZmuYpvraGaxX6XAR8lXWo="",""previousBlockHash"":""Hha9Umnyf6UIU//thEovCIPUzinZljBg8/aETomys4E=""}
[e][orderer-org.orderer0] 2019-06-27 13:41:36.905 EDT [comm.grpc.server] 1 -> INFO 01d streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=127.0.0.1:53164 grpc.code=OK grpc.call_duration=543.152µs
[e][org2.peer1] 2019-06-27 13:41:36.920 EDT [gossip.privdata] StoreBlock -> INFO 045 [testchannel] Received block [3] from buffer
[e][org1.peer1] 2019-06-27 13:41:36.920 EDT [gossip.privdata] StoreBlock -> INFO 055 [testchannel] Received block [3] from buffer
[e][org2.peer2] 2019-06-27 13:41:36.920 EDT [gossip.privdata] StoreBlock -> INFO 04c [testchannel] Received block [3] from buffer
[e][org1.peer2] 2019-06-27 13:41:36.920 EDT [gossip.privdata] StoreBlock -> INFO 053 [testchannel] Received block [3] from buffer
[e][org2.peer1] 2019-06-27 13:41:36.921 EDT [vscc] Validate -> ERRO 046 VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org1.peer2] 2019-06-27 13:41:36.921 EDT [vscc] Validate -> ERRO 054 VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org2.peer1] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] validateTx -> ERRO 047 VSCCValidateTx for transaction txId = 0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a returned error: invalid chaincode name ''
[e][org1.peer1] 2019-06-27 13:41:36.921 EDT [vscc] Validate -> ERRO 056 VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org2.peer1] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] Validate -> INFO 048 [testchannel] Validated block [3] in 1ms
[e][org1.peer2] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] validateTx -> ERRO 055 VSCCValidateTx for transaction txId = 0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a returned error: invalid chaincode name ''
[e][org1.peer2] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] Validate -> INFO 056 [testchannel] Validated block [3] in 1ms
[e][org1.peer1] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] validateTx -> ERRO 057 VSCCValidateTx for transaction txId = 0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a returned error: invalid chaincode name ''
[e][org1.peer1] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] Validate -> INFO 058 [testchannel] Validated block [3] in 1ms
[e][org2.peer1] 2019-06-27 13:41:36.921 EDT [valimpl] preprocessProtoBlock -> WARN 049 Channel [testchannel]: Block [3] Transaction index [0] TxId [0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
[e][org1.peer2] 2019-06-27 13:41:36.921 EDT [valimpl] preprocessProtoBlock -> WARN 057 Channel [testchannel]: Block [3] Transaction index [0] TxId [0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
[e][org1.peer1] 2019-06-27 13:41:36.921 EDT [valimpl] preprocessProtoBlock -> WARN 059 Channel [testchannel]: Block [3] Transaction index [0] TxId [0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
[e][org2.peer2] 2019-06-27 13:41:36.921 EDT [vscc] Validate -> ERRO 04d VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org2.peer2] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] validateTx -> ERRO 04e VSCCValidateTx for transaction txId = 0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a returned error: invalid chaincode name ''
[e][org2.peer2] 2019-06-27 13:41:36.921 EDT [committer.txvalidator] Validate -> INFO 04f [testchannel] Validated block [3] in 1ms
[e][org2.peer2] 2019-06-27 13:41:36.921 EDT [valimpl] preprocessProtoBlock -> WARN 050 Channel [testchannel]: Block [3] Transaction index [0] TxId [0768d46632e4ccadcec6b7d60dd7a937166cbd6893fabf3281dd02ae2fc6680a] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]

```;;;","28/Jun/19 2:55 AM;caod;Attached `channelconfigattack.4.patch` file with 1.4 backported repro case;;;","28/Jun/19 4:07 AM;caod;Verified fix for 2.0 master branch:

```

[e][peer-channel-info] 2019-06-27 15:05:55.176 EDT [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
[e][org1.peer2] 2019-06-27 15:05:55.177 EDT [endorser] callChaincode -> INFO 04a [][74191515] Entry chaincode: name:""qscc""
[e][org1.peer2] 2019-06-27 15:05:55.178 EDT [endorser] callChaincode -> INFO 04b [][74191515] Exit chaincode: name:""qscc"" (1ms)
[e][org1.peer2] 2019-06-27 15:05:55.178 EDT [comm.grpc.server] 1 -> INFO 04c unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=127.0.0.1:49561 grpc.code=OK grpc.call_duration=1.797886ms
[o][peer-channel-info] Blockchain info: \{""height"":3,""currentBlockHash"":""kgIHrH6OsMFJXG/OlfH2RVh0He0utf8tnOyUxqCevs4="",""previousBlockHash"":""kQXdT6lMpnZu8EbiGoOUoOcw6ezOywUPIi42XCu4+7Y=""}
[e][orderer-org.orderer0] 2019-06-27 15:05:55.192 EDT [comm.grpc.server] 1 -> INFO 01d streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=127.0.0.1:49557 grpc.code=OK grpc.call_duration=736.127µs
[e][org2.peer2] 2019-06-27 15:05:55.202 EDT [gossip.privdata] StoreBlock -> INFO 046 [testchannel] Received block [3] from buffer
[e][org2.peer1] 2019-06-27 15:05:55.202 EDT [gossip.privdata] StoreBlock -> INFO 040 [testchannel] Received block [3] from buffer
[e][org1.peer1] 2019-06-27 15:05:55.202 EDT [gossip.privdata] StoreBlock -> INFO 04f [testchannel] Received block [3] from buffer
[e][org1.peer2] 2019-06-27 15:05:55.202 EDT [gossip.privdata] StoreBlock -> INFO 04d [testchannel] Received block [3] from buffer
[e][org1.peer1] 2019-06-27 15:05:55.203 EDT [vscc] Validate -> ERRO 050 VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org1.peer2] 2019-06-27 15:05:55.203 EDT [vscc] Validate -> ERRO 04e VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org1.peer1] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] validateTx -> ERRO 051 VSCCValidateTx for transaction txId = 7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353 returned error: invalid chaincode name ''
[e][org2.peer1] 2019-06-27 15:05:55.203 EDT [vscc] Validate -> ERRO 041 VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org1.peer2] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] validateTx -> ERRO 04f VSCCValidateTx for transaction txId = 7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353 returned error: invalid chaincode name ''
[e][org1.peer1] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] Validate -> INFO 052 [testchannel] Validated block [3] in 1ms
[e][org2.peer1] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] validateTx -> ERRO 042 VSCCValidateTx for transaction txId = 7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353 returned error: invalid chaincode name ''
[e][org2.peer1] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] Validate -> INFO 043 [testchannel] Validated block [3] in 1ms
[e][org1.peer2] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] Validate -> INFO 050 [testchannel] Validated block [3] in 1ms
[e][org1.peer1] 2019-06-27 15:05:55.203 EDT [valimpl] preprocessProtoBlock -> WARN 053 Channel [testchannel]: Block [3] Transaction index [0] TxId [7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
[e][org2.peer2] 2019-06-27 15:05:55.203 EDT [vscc] Validate -> ERRO 047 VSCC error: ValidateLSCCInvocation failed, err invalid chaincode name ''
[e][org1.peer2] 2019-06-27 15:05:55.203 EDT [valimpl] preprocessProtoBlock -> WARN 051 Channel [testchannel]: Block [3] Transaction index [0] TxId [7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
[e][org2.peer1] 2019-06-27 15:05:55.203 EDT [valimpl] preprocessProtoBlock -> WARN 044 Channel [testchannel]: Block [3] Transaction index [0] TxId [7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
[e][org2.peer2] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] validateTx -> ERRO 048 VSCCValidateTx for transaction txId = 7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353 returned error: invalid chaincode name ''
[e][org2.peer2] 2019-06-27 15:05:55.203 EDT [committer.txvalidator] Validate -> INFO 049 [testchannel] Validated block [3] in 1ms
[e][org2.peer2] 2019-06-27 15:05:55.203 EDT [valimpl] preprocessProtoBlock -> WARN 04a Channel [testchannel]: Block [3] Transaction index [0] TxId [7d6396cb0bbc12781d9e81f48e4b4cb1d016791c04e5d02ddacc4c15f58c3353] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]

```;;;","01/Jul/19 8:41 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/32116/;;;","08/Aug/19 4:45 AM;denyeart;Addressed via FAB-15845;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure: TestChangesInPeers - panic index out of range,FAB-15320,39579,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,sykesm,sykesm,02/May/19 2:39 AM,12/May/19 5:58 AM,28/Oct/23 3:08 AM,12/May/19 5:58 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{code}
11:07:56 panic: runtime error: index out of range [recovered]
11:07:56 	panic: runtime error: index out of range
11:07:56 
11:07:56 goroutine 183 [running]:
11:07:56 testing.tRunner.func1(0xc0002e8500)
11:07:56 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:792 +0x387
11:07:56 panic(0xde0500, 0x1642d60)
11:07:56 	/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
11:07:56 github.com/hyperledger/fabric/common/metrics/metricsfakes.(*Gauge).WithArgsForCall(0xc0001ec7e0, 0x0, 0x0, 0x0, 0x0)
11:07:56 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/metrics/metricsfakes/gauge.go:62 +0xce
11:07:56 github.com/hyperledger/fabric/gossip/gossip/channel.TestChangesInPeers.func10(0xc0002e8500)
11:07:56 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:2181 +0x4fd
11:07:56 testing.tRunner(0xc0002e8500, 0xc0000a5410)
11:07:56 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0xbf
11:07:56 created by testing.(*T).Run
11:07:56 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x35c
11:07:56 FAIL	github.com/hyperledger/fabric/gossip/gossip/channel	4.142s
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11831/console",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mef:",,,,Unset,Unset,,go test -race -count 10000 -failfast -run  TestChangesInPeers/noChanges,,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/May/19 3:34 AM;MHBauer;Code matches exactly. It looks like this should be in one of the subtests, and I think it is `newPeersAddedOldPeerStayed` case.;;;","10/May/19 9:55 AM;MHBauer;Appears to specifically be the noChanges case.

go test -race -count 10000 -failfast -run  TestChangesInPeers/noChanges 
;;;","10/May/19 10:21 AM;MHBauer;root cause is non-determinism in whether trackMembershipChanges runs by the time it reaches this section.

Can remove the panic by checking for length of args before checking for existence.;;;","11/May/19 6:56 AM;MHBauer;https://gerrit.hyperledger.org/r/#/c/31331/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LTE tests are failing consistently in all couchdb performance test cases with Assertion error,FAB-15321,39582,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,sambhavdutt,sambhavdutt,02/May/19 12:08 PM,13/May/19 9:50 PM,28/Oct/23 3:08 AM,13/May/19 9:31 PM,v1.4.2,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,fabric-quality,,,,,0,ci-failure,,,,,"Ledger tests are failing consistently in all CouchDB performance test cases with Assertion error, ""VaryNumParallelTxWithSingleChain performance test for CouchDB failed"" The tests take around two hours in the failed cases. 

*Branch:* release-1.4

*Error Snippet:*
{code:java}
[34m2019-05-06 02:37:27.088 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 001[0m Created state database _users
[34m2019-05-06 02:37:27.106 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 002[0m Created state database _replicator
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0xfa843e]

goroutine 37 [running]:
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CommonStorageDBProvider).RegisterHealthChecker(0xc00034e270, 0xc00034e270, 0xc00000c480)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go:67 +0x5e
github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.NewCommonStorageDBProvider(0x1332ce0, 0xc00000e160, 0x133cde0, 0x1cd10e8, 0x0, 0x0, 0x2, 0x4, 0x0, 0xc00011e680)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go:57 +0xec
github.com/hyperledger/fabric/core/ledger/kvledger.(*Provider).Initialize(0xc00011e680, 0xc0000bdd40, 0x0, 0x0)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:88 +0x25e
github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize(0xc0000c0370)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:73 +0x4b4
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:53 +0x2a
sync.(*Once).Do(0x1cd11b0, 0xc00006be30)
	/opt/go/go1.11.5.linux.amd64/src/sync/once.go:44 +0xb3
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize(0xc0000c0370)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:52 +0x55
github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.newChainsMgr(0xc00000c1a0, 0xc000037260, 0x10a9601, 0xc0000fa000)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/chains.go:56 +0x130
github.com/hyperledger/fabric/test/tools/LTE/chainmgmt.InitTestEnv(0xc00000c1a0, 0xc000037260, 0x8eb201, 0x5ccf9de6)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/chainmgmt/testenv.go:34 +0x77
github.com/hyperledger/fabric/test/tools/LTE/experiments.BenchmarkInsertTxs(0xc0000ca680)
	/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric/test/tools/LTE/experiments/insert_txs_test.go:44 +0x55
testing.(*B).runN(0xc0000ca680, 0x1)
	/opt/go/go1.11.5.linux.amd64/src/testing/benchmark.go:141 +0xb2
testing.(*B).run1.func1(0xc0000ca680)
	/opt/go/go1.11.5.linux.amd64/src/testing/benchmark.go:214 +0x5a
created by testing.(*B).run1
	/opt/go/go1.11.5.linux.amd64/src/testing/benchmark.go:207 +0x7d
exit status 2
FAIL	github.com/hyperledger/fabric/test/tools/LTE/experiments	0.236s
Failed to run the test.
Stopping couchdb container (id: aadcf52f3261)...
{code}

Failed Tests

{code:java}
ledger_lte.py::perf_couchdb::test_FAB_3870_VaryNumParallelTxPerChain FAILED
ledger_lte.py::perf_couchdb::test_FAB_3871_VaryNumChain FAILED
ledger_lte.py::perf_couchdb::test_FAB_3872_VaryNumParallelTxWithSingleChain FAILED
ledger_lte.py::perf_couchdb::test_FAB_3873_VaryNumChainWithNoParallelism FAILED
ledger_lte.py::perf_couchdb::test_FAB_3874_VaryKVSize FAILED
ledger_lte.py::perf_couchdb::test_FAB_3875_VaryBatchSize FAILED
ledger_lte.py::perf_couchdb::test_FAB_3876a_VaryNumWritesInEachTx FAILED
ledger_lte.py::perf_couchdb::test_FAB_3876b_VaryNumReadsInEachTx FAILED
23:04:44 ledger_lte.py::perf_couchdb::test_FAB_3877_VaryNumTxs FAILED
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-release-1.4-x86_64/127/",,denyeart,sambhavdutt,scottz,vijaypunugubati,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13753,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,e0ed8f8,Unset,No,,,"1|hzwr6z:zz",,,,Unset,Unset,Ledger v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sambhavdutt,scottz,vijaypunugubati,wenjian,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-1.4,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,true,"07/May/19 12:02 AM;scottz;All the LTE tests fail every day in release-1.4. They used to fail the same way in master branch, but started working in master branch on March 1st.;;;","08/May/19 2:26 AM;wenjian;Below is why the test failed in release-1.4
 # In [https://github.com/hyperledger/fabric-test/blob/release-1.4/tools/LTE/chainmgmt/chains.go#L56], it didn't set ""HealthCheckRegistry"" field for ledgermgmt.Initializer\{....}.
 # In [https://github.com/hyperledger/fabric/blob/release-1.4/core/ledger/kvledger/kv_ledger_provider.go#L88], the nil HealthCheckRegistry was passed to ""NewCommonStorageDBProvider"" and ""CommonStorageDBProvider""
 # As a result, it caused nil pointer error in [https://github.com/hyperledger/fabric/blob/release-1.4/core/ledger/kvledger/txmgmt/privacyenabledstate/common_storage_db.go#L67] 

To fix the problem, LTE chains.go should pass a HealthCheckRegistry object to ledgermgmt.Initializer.;;;","08/May/19 3:06 AM;wenjian;The same change should also be made for master branch. I cannot not explain why LTE passed in master branch. From the code, the same nil pointer error should happen on master too. ;;;","08/May/19 5:36 AM;wenjian;CRs:

[https://gerrit.hyperledger.org/r/#/c/31269/]  for release-1.4

[https://gerrit.hyperledger.org/r/#/c/31271/] for master;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix membership establishment in gossip/service package,FAB-15322,39583,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,02/May/19 5:10 PM,06/May/19 4:17 PM,28/Oct/23 3:08 AM,06/May/19 4:17 PM,,,,,,,,,,,,,,,,,,fabric-ci,fabric-gossip,,,,,0,ci-flake,,,,,"There are some tests that require full membership between peers as a prerequisite but don't assert on that.
So there are cases where the tests don't get full membership but still pass. This is unwanted behavior.
This task is about failing the tests when full membership isn't established.

In addition, the current ReconnectInterval for the tests is set to 25s which is way too high.
This task is also about reducing the ReconnectInterval to 1s",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mf3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/May/19 8:26 PM;ronenschafferibm;  https://gerrit.hyperledger.org/r/31192;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in TestSendByCriteria,FAB-15323,39586,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,sykesm,sykesm,02/May/19 8:57 PM,06/Jun/19 3:32 PM,28/Oct/23 3:08 AM,06/Jun/19 3:32 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{code}
20:40:53 --- FAIL: TestSendByCriteria (10.10s)
20:40:53     gossip_test.go:1428: 
20:40:53         	Error Trace:	gossip_test.go:1428
20:40:53         	Error:      	Not equal: 
20:40:53         	            	expected: 0x1
20:40:53         	            	actual  : 0x2
20:40:53         	Test:       	TestSendByCriteria
{code}

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11864/console",,MHBauer,ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mfr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/19 3:14 AM;MHBauer;Looking at this test, it is made up of multiple stages, and a failure at an earlier staged doesn't necessarily take effect until a later stage. This makes it difficult to debug.

I can split the single test up into more smaller tests or subtests that have table driven test cases, but it would end up starting and stopping more grpc servers and wouldn't get rid of the timeouts, just split them up into smaller chunks, that could maybe be run more in parallel?

There's maybe some tuning of the timeouts that could be done, but the tests are mixing timeout and non-timeout cases. 

There's a testing.Fatal being called off of main thread, which won't fail until the end of the test.;;;","06/Jun/19 3:32 PM;ronenschafferibm;This unit-test didn't fail for over a month (last failure on 02/May/19) - closing...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test flake in EndToEnd Crash Fault Tolerance when Leader cannot reach quorum [It] Steps down ,FAB-15324,39587,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Environment Issue,guoger,sykesm,sykesm,02/May/19 9:19 PM,18/Jun/19 11:00 PM,28/Oct/23 3:08 AM,18/Jun/19 11:00 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"{code}
02:39:05 [e][OrdererOrg.orderer2] 2019-05-02 06:39:05.014 UTC [orderer.common.server] handleSignals -> INFO 03d Received signal: 15 (terminated)
02:39:05 • Failure [1.781 seconds]
02:39:05 EndToEnd Crash Fault Tolerance when Leader cannot reach quorum [It] Steps down 
02:39:05 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:285
02:39:05 
02:39:05   Timed out after 1.000s.
02:39:05   Expected
02:39:05       <<-chan struct {} | len:0, cap:0>: 0xc000f24480
02:39:05   to be closed
02:39:05 
02:39:05   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:306
{code}

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8535/console",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mfz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/May/19 1:23 AM;guoger;Not sure this is something to be fixed in this test:
{code}
14:39:03 [e][OrdererOrg.orderer3] 2019-05-02 06:39:02.220 UTC [orderer.common.server] initializeGrpcServer -> FATA 011 Failed to listen: listen tcp 127.0.0.1:36006: bind: address already in use
{code}
(The other two test cases failed for the same reason);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failed to add a third user for Fabtoken,FAB-15325,39588,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,aspring,aspring,02/May/19 10:01 PM,10/May/19 1:38 AM,28/Oct/23 3:08 AM,10/May/19 1:38 AM,,,,,,,,,,,,,,,,,,,,,,,,1,,,,,,"I'm using node for Fabtoken under Fabric 2.0 alpha.
* have edited the fabtoken.js to change user1 to sam, user2 to don
* added a third user, jack, by using cryptogen tool, specifically, at the basic-network directory, executed ""cryptogen generate --config='./crypto-config3users.yaml' "", which created identity credentials for User3@org1.example.com under /crypto-config/peerOrganizations/org1.example.com/users 
* edited relevant code including createUsers function to reflect that
The two users of sam and don functions well for token ""issue"", ""transfer"" and ""list"".
However, Fabtoken failed on the third user, jack.
Please see details below.

Observation:
Fabtoken seems hard coded.

Questions:
Does Fabtoken support more than two users?
If so, how to add additional users?
If using cryptogen to add a new user is insufficient, what else needs to be done?
That is, what exact steps needs to be taken?

Let me know if you need an additional information.

Thanks.
   ",,aspring,gregnotso,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mg7:",,,,Unset,Unset,,"Background info:
a) this User3 and its credentials including private key were created with the cryptogen tool and I've edited the crypto-config.yaml file to increase Users count from 2 to 3.
""
Users:
      Count: 3
"",
thus,  the crypto-config repo now has User3@org1.example.com and all its associated crypto files as well.

b) then, I edited the fabtoken.js file to add one more user, the third user using User3's credentials.
Additionally, I've changed user1 to the effect of myuser1, user2 to myuser2 ... 

The edited fabtoken.js works fine for ""issue"", ""list"" and ""transfer"" functions for myuser1 and myuser2, however, when attempted to transfer to myuser3.
It complained about ""the supplied identity is not valid: x509: certificate signed by unknown authority""

See below.

All GOOD:

node fabtoken3 list sam


 --- fabtoken.js - start
Setting up client side network objects
 Created client side object to represent the channel
 Created client side object to represent the peer
 Created client side object to represent the orderer
Successfully setup client side


Start list token operation
End list token operation, returns
 [ { id:
     { tx_id: '696845939c5b88726659ba3cebd4c58c8c54437804240bf0bbc4b047c32326ed',
       index: 1 },
    type: 'SiiDcoin',
    quantity: '900' } ]


 --- fabtoken.js - end


node fabtoken3 list don


 --- fabtoken.js - start
Setting up client side network objects
 Created client side object to represent the channel
 Created client side object to represent the peer
 Created client side object to represent the orderer
Successfully setup client side


Start list token operation
End list token operation, returns
 [ { id:
     { tx_id: '696845939c5b88726659ba3cebd4c58c8c54437804240bf0bbc4b047c32326ed',
       index: 0 },
    type: 'SiiDcoin',
    quantity: '100' } ]


 --- fabtoken.js - end

Problem
-----------
node fabtoken3 transfer sam jack 50 696845939c5b88726659ba3cebd4c58c8c54437804240bf0bbc4b047c32326ed 1

Output:
 --- fabtoken.js - start
Setting up client side network objects
 Created client side object to represent the channel
 Created client side object to represent the peer
 Created client side object to represent the orderer
Successfully setup client side
 Token arg: jack
 Token arg: 50
 Token arg: 696845939c5b88726659ba3cebd4c58c8c54437804240bf0bbc4b047c32326ed
 Token arg: 1


Start transfer token operation
Start token transfer with args 50,696845939c5b88726659ba3cebd4c58c8c54437804240bf0bbc4b047c32326ed,1
2019-04-30T23:18:32.422Z - error: [token-utils.js]: command response has error: invalid recipient in transfer request 'identity [0x7261773a225c6e5c3030374f7267314d53505c3032325c3235365c3030362d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d5c6e4d4949434b7a4343416447674177494241674952414e7855696c3857764b4331537471315a46523652334177436759494b6f5a497a6a304541774977637a454c5c6e4d416b474131554542684d4356564d78457a415242674e5642416754436b4e6862476c6d62334a7561574578466a415542674e564241635444564e68626942475c6e636d467559326c7a593238784754415842674e5642416f54454739795a7a45755a586868625842735a53356a623230784844416142674e5642414d5445324e685c6e4c6d39795a7a45755a586868625842735a53356a623230774868634e4d546b774e444d774d6a4d774e6a41775768634e4d6a6b774e4449334d6a4d774e6a41775c6e576a42734d517377435159445651514745774a56557a45544d4245474131554543424d4b5132467361575a76636d3570595445574d4251474131554542784d4e5c6e5532467549455a795957356a61584e6a627a45504d4130474131554543784d47593278705a5735304d523877485159445651514444425a56633256794d3042765c6e636d63784c6d56345957317762475575593239744d466b77457759484b6f5a497a6a3043415159494b6f5a497a6a30444151634451674145414269542f574e575c6e6d745964656336476f4f3130396d7a555049643577614b4f7a683577585135524f64597a39755042417a7336575359333138735069656e4b495953683047786d5c6e6b624d3264666c6a7858672b434b4e4e4d45737744675944565230504151482f42415144416765414d41774741315564457745422f7751434d4141774b7759445c6e5652306a42435177496f41676f687536704c5335695844696466775a4f456f31576677724868644a7642436644392b376f75493576696777436759494b6f5a495c6e7a6a304541774944534141775251496841504d4162694c3966737257335a74634646774872485878556a616e7754657234623130327655326c39594f416942315c6e3248643856422b396449554b4c775657623438776f79332f4f79586967652f4648564c314362566d6d413d3d5c6e2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d5c6e2220] cannot be deserialised: the supplied identity is not valid: x509: certificate signed by unknown authority'
Problem with fabric token ::Error: command response has error: invalid recipient in transfer request 'identity [0x7261773a225c6e5c3030374f7267314d53505c3032325c3235365c3030362d2d2d2d2d424547494e2043455254494649434154452d2d2d2d2d5c6e4d4949434b7a4343416447674177494241674952414e7855696c3857764b4331537471315a46523652334177436759494b6f5a497a6a304541774977637a454c5c6e4d416b474131554542684d4356564d78457a415242674e5642416754436b4e6862476c6d62334a7561574578466a415542674e564241635444564e68626942475c6e636d467559326c7a593238784754415842674e5642416f54454739795a7a45755a586868625842735a53356a623230784844416142674e5642414d5445324e685c6e4c6d39795a7a45755a586868625842735a53356a623230774868634e4d546b774e444d774d6a4d774e6a41775768634e4d6a6b774e4449334d6a4d774e6a41775c6e576a42734d517377435159445651514745774a56557a45544d4245474131554543424d4b5132467361575a76636d3570595445574d4251474131554542784d4e5c6e5532467549455a795957356a61584e6a627a45504d4130474131554543784d47593278705a5735304d523877485159445651514444425a56633256794d3042765c6e636d63784c6d56345957317762475575593239744d466b77457759484b6f5a497a6a3043415159494b6f5a497a6a30444151634451674145414269542f574e575c6e6d745964656336476f4f3130396d7a555049643577614b4f7a683577585135524f64597a39755042417a7336575359333138735069656e4b495953683047786d5c6e6b624d3264666c6a7858672b434b4e4e4d45737744675944565230504151482f42415144416765414d41774741315564457745422f7751434d4141774b7759445c6e5652306a42435177496f41676f687536704c5335695844696466775a4f456f31576677724868644a7642436644392b376f75493576696777436759494b6f5a495c6e7a6a304541774944534141775251496841504d4162694c3966737257335a74634646774872485878556a616e7754657234623130327655326c39594f416942315c6e3248643856422b396449554b4c775657623438776f79332f4f79586967652f4648564c314362566d6d413d3d5c6e2d2d2d2d2d454e442043455254494649434154452d2d2d2d2d5c6e2220] cannot be deserialised: the supplied identity is not valid: x509: certificate signed by unknown authority'

In addition, node fabtoken3 list jack also fails.

So, it appears that fabtoken failed to accept the identity, User3 created with cryptogen.  If that's the case, how do we create/add additional users to fabtoken?
Please advise.

",,Unset,,,,,,Unset,,Unset,,(Please add usage information),aspring,gregnotso,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/19 7:48 AM;gregnotso;i will try to submit my modification for the code review, thx, greg;;;","03/May/19 8:27 AM;aspring;Looking forward to a fully functional Fabtoken and adequate documentation.    ;;;","10/May/19 1:38 AM;aspring;poor documentation;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration tests for _lifecycle ACL resources,FAB-15327,39594,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,wlahti,wlahti,wlahti,03/May/19 3:21 AM,23/May/19 2:57 AM,28/Oct/23 3:08 AM,23/May/19 2:57 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"For example, the resources in sampleconfig/configtx.yaml:
{code:java}
# ACL policy for _lifecycle's ""CommitChaincodeDefinition"" function
 _lifecycle/CommitChaincodeDefinition: /Channel/Application/Writers
# ACL policy for _lifecycle's ""QueryChaincodeDefinition"" function
 _lifecycle/QueryChaincodeDefinition: /Channel/Application/Readers{code}
 ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:j9",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
need the ability of tying an issue to the code,FAB-15328,39597,,Task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,gregnotso,gregnotso,gregnotso,03/May/19 8:10 AM,07/May/19 2:32 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,my jira/gerrit account settings seem to be missing authorizations to submit my change for the code review.,,denyeart,gregnotso,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mhz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,gregnotso,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/May/19 8:13 AM;gregnotso;This is to address this issue: https://jira.hyperledger.org/browse/FAB-15325;;;","03/May/19 8:56 PM;denyeart;If you have a linux foundation userid to post to Jira, then you also have privilege to submit CRs to gerrit.  See [https://hyperledger-fabric.readthedocs.io/en/latest/Gerrit/gerrit.html|https://hyperledger-fabric.readthedocs.io/en/latest/Gerrit/gerrit.html.]

For any questions please use rocket.chat.;;;","07/May/19 2:31 AM;gregnotso;I have posted the question about my privileges in the rocket.chat, but so far, no response: https://chat.hyperledger.org/channel/fabric-dev-env?msg=ek3ben42dq8CpGi69

;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Package creation fails with write error,FAB-15329,39600,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,lehors,lehors,03/May/19 11:02 PM,16/May/19 1:55 AM,28/Oct/23 3:08 AM,16/May/19 1:54 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,fabric-tools,,,,,0,,,,,,"While trying to launch fabcar running startFabric.sh I get the following error:
{code:java}
docker exec -e CORE_PEER_LOCALMSPID=Org1MSP -e CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp cli peer lifecycle chaincode package fabcar.tar.gz --path github.com/fabcar/go --lang golang --label fabcarv1
2019-05-03 13:34:28.870 UTC [cli.lifecycle.chaincode] Package -> ERRO 001 error writing chaincode package to fabcar.tar.gz: error renaming temp file '/tmp/.ccpackage.022813706': rename /tmp/.ccpackage.022813706 fabcar.tar.gz: invalid cross-device link
Error: error writing chaincode package to fabcar.tar.gz: error renaming temp file '/tmp/.ccpackage.022813706': rename /tmp/.ccpackage.022813706 fabcar.tar.gz: invalid cross-device link

$ peer version
peer:
 Version: 2.0.0
 Commit SHA: 531c9490a
 Go version: go1.11.5
 OS/Arch: linux/amd64
 Chaincode:
  Base Docker Namespace: hyperledger
  Base Docker Label: org.hyperledger.fabric
  Docker Namespace: hyperledger{code}",,denyeart,lehors,manish-sethi,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:ii",,,,Unset,Unset,v2.0,"cd fabcar
./startFabric.sh

$ uname -a
Darwin Arnauds-MBP.lan 18.2.0 Darwin Kernel Version 18.2.0: Thu Dec 20 20:46:53 PST 2018; root:xnu-4903.241.1~1/RELEASE_X86_64 x86_64

$ docker version
Client: Docker Engine - Community
 Version:           18.09.2
 API version:       1.39
 Go version:        go1.10.8
 Git commit:        6247962
 Built:             Sun Feb 10 04:12:39 2019
 OS/Arch:           darwin/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          18.09.2
  API version:      1.39 (minimum version 1.12)
  Go version:       go1.10.6
  Git commit:       6247962
  Built:            Sun Feb 10 04:13:06 2019
  OS/Arch:          linux/amd64
  Experimental:     false
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,lehors,manish-sethi,mastersingh24,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/May/19 1:20 AM;manish-sethi;Thanks [~lehors] for pointing this out. Submitted a CR with fix - https://gerrit.hyperledger.org/r/31207;;;","09/May/19 8:19 PM;mastersingh24;This is not a problem with the code.  This is an issue with Docker ... and caused by the fact that we set the working directory for the CLI container to a mounted filesystem.

If you run the this command directly on your host system, it works exactly as expected.;;;","09/May/19 8:35 PM;mastersingh24;The real fix for this is to stop using the CLI container, but given we are where we are, the fix would be to not set the working directory to a mounted volume.;;;","09/May/19 9:15 PM;lehors;I fail to see what we have to gain from taking such a hard line position. Let's be pragmatic, please, and fix this for the sake of all impacted users.;;;","09/May/19 10:03 PM;mastersingh24;The issue is not a code issue.  The code works perfectly well.  There's nothing to fix;;;","16/May/19 1:55 AM;denyeart;See CR for remaining discussion and agreed upon fix. Merged.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-tools image: cryptogen extend fails on extending amount of orderers,FAB-15331,39603,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,yod 15,yod 15,04/May/19 12:11 AM,04/May/19 12:11 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"After successful generating orderer certificates, cryptogen extend command fails with next message:
root@67c538b05f58:/etc/hyperledger/artifacts# cryptogen extend --config=cryptogen-example.com.yaml
Error generating local MSP for \{orderer3 orderer3.example.com [orderer3.example.com orderer3]}:
x509: certificate private key does not implement crypto.Signer

 

*Used image hash*: 432c24764fbb hyperledger/fabric-tools:amd64-1.4.1 

*Environment vars of image:*

HOSTNAME=67c538b05f58
TERM=xterm
CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/crypto/peer/tls/ca.crt
CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/crypto/peer/tls/server.key
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.Z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.jpg=01;35:*.jpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/crypto/peer/tls/server.crt
FABRIC_LOGGING_SPEC=INFO
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/go/bin:/opt/gopath/bin
PWD=/etc/hyperledger/artifacts
CORE_PEER_TLS_ENABLED=true
CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/crypto/peer/msp
SHLVL=1
HOME=/root
GOROOT=/opt/go
FABRIC_CFG_PATH=/etc/hyperledger/artifacts
affinity:container==86c61f615a699e08900a9f80756eaef1cfdba9480b1506a7d191cd67146081c5
GOCACHE=off
LESSOPEN=| /usr/bin/lesspipe %s
GOPATH=/opt/gopath
LESSCLOSE=/usr/bin/lesspipe %s %s
_=/usr/bin/env
OLDPWD=/etc/hyperledger/artifacts/crypto-config

 

cryptogen-example.com.yaml used for *cryptogen generate:*

---------------------------------------------------------------------------
# ""OrdererOrgs"" - Definition of organizations managing orderer nodes
# ---------------------------------------------------------------------------
OrdererOrgs:
 # ---------------------------------------------------------------------------
 # Orderer
 # ---------------------------------------------------------------------------
 - Name: Orderer
 Domain: example.com
 Template:
 Count: 3
 Specs:
 - Hostname: orderer

cryptogen-example.com.yaml used for *cryptogen extend:*

---------------------------------------------------------------------------
# ""OrdererOrgs"" - Definition of organizations managing orderer nodes
# ---------------------------------------------------------------------------
OrdererOrgs:
 # ---------------------------------------------------------------------------
 # Orderer
 # ---------------------------------------------------------------------------
 - Name: Orderer
 Domain: example.com
 Template:
 Count: *4*
 Specs:
 - Hostname: orderer

Maybe someone can reproduce such a behavior or i'm doing something wrong?",,yod 15,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mjb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yod 15,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add QueryApprovalStatus command to integration tests,FAB-15332,39604,39594,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,04/May/19 1:11 AM,07/May/19 11:54 PM,28/Oct/23 3:08 AM,07/May/19 11:54 PM,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mjj:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/May/19 5:20 AM;wlahti;[https://gerrit.hyperledger.org/r/c/31216];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove CouchDB Indexes disclaimer,FAB-15333,39606,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,04/May/19 2:00 AM,23/May/19 11:45 PM,28/Oct/23 3:08 AM,23/May/19 11:45 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzyd",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/May/19 2:22 AM;negupta;https://gerrit.hyperledger.org/r/31213;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Service discovery disclaimer,FAB-15334,39607,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,04/May/19 2:01 AM,06/May/19 4:18 PM,28/Oct/23 3:08 AM,06/May/19 4:18 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00mk7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/May/19 2:10 AM;negupta;https://gerrit.hyperledger.org/r/31211;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up integration tests,FAB-15335,39608,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,04/May/19 2:06 AM,09/May/19 7:38 PM,28/Oct/23 3:08 AM,09/May/19 5:44 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"TODO list:
- change pkg names in integration to align with corresponding dirnames
- define base ports at same place to make it easier to track them
- remove redundant RunQueryInvokeQuery func",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mkf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/May/19 2:29 AM;guoger;https://gerrit.hyperledger.org/r/c/31212/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update gomega to 1.5.0,FAB-15336,39609,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,04/May/19 5:18 AM,07/May/19 4:34 AM,28/Oct/23 3:08 AM,07/May/19 4:34 AM,,,,,,,,,,,,,,,,,,fabric-common,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mkn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/May/19 5:19 AM;wlahti;[https://gerrit.hyperledger.org/r/c/31215/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
List of features / functions / APIs to remove or change in v2.0,FAB-15337,39610,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Done,,mastersingh24,mastersingh24,04/May/19 5:46 AM,12/Mar/21 1:43 AM,28/Oct/23 3:08 AM,12/Mar/21 1:43 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"2.0 is a major release boundary.  We have the opportunity to remove features and/or break backwards compatibility on major release boundaries.  While we don't want to overdo this, there are a number of things in the codebase which we should consider removing and/or modifying in order to reduce future technical debt.

Items linked to this epic (FAB-15337) are planned for v2.0 release.
Items linked to FAB-15574 are planned for v3.0 release.",,adarshsaraf123,andrew-coleman,binhn,bur,dtomczyk,mastersingh24,msteiner,muralisr,sykesm,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16722,,,,FAB-15499,FABN-1240,FAB-15574,FAB-16754,FAB-16887,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Required,ghx-label-3,,List of features / functions / APIs to remove or change in v2.0,To Do,No,,Unset,No,,,"1|i00mkv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshsaraf123,andrew-coleman,binhn,bur,dtomczyk,mastersingh24,msteiner,muralisr,sykesm,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/19 7:59 AM;sykesm;What do we want to do about system chaincode plugins? bccsp surface area?;;;","08/May/19 6:05 PM;mastersingh24;[~sykesm] - I added a bunch of tasks related to plugins under FAB-15338;;;","16/May/19 11:18 PM;muralisr;My 2c. The deprecate-and-remove - with making sure viable alternatives are available (or new ones introduced) in the deprecating release is safest. Its hard to predict how many members will be affected (and by how much). From past experience it was painful when that happened.

So basically suggest in general we deprecate things in v2 with intent to remove in v3. This will also give opportunity to bake in new alternatives.

Having said that it may be ok to remove the most problematic things in v2 if it'll help addition of new features.;;;","17/May/19 5:52 PM;andrew-coleman;Candidate items for Node SDK are listed under https://jira.hyperledger.org/browse/FABN-1240;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove support for Go plugins,FAB-15338,39611,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,04/May/19 6:33 AM,15/Dec/21 6:19 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Go plugins seemed like a good idea for supporting additions to the peer without requiring the code to reside in the core repo and rebuilding the peer, but they have not been widely used and really are not a first-class citizen in Go.

To understand more about Go plugin restrictions, see various postings, e.g.:
https://www.reddit.com/r/golang/comments/5zaojs/a_practical_example_of_using_gos_18_plugin_system/dexa3yb?utm_source=share&utm_medium=web2x

https://github.com/golang/go/issues/20481
",,angelo.decaro,baohua,bur,davidkhala,denyeart,huxd,mastersingh24,MHBauer,msteiner,robmurgai,Senthil1,silliman,vramaiitkgp,yacovm,ymlbright,,,,,,,,,,,,,,FAB-14400,,,,,,,,,,,,,,,FAB-17564,,,,FAB-15068,FAB-15343,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00r7s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,baohua,bur,davidkhala,denyeart,huxd,mastersingh24,MHBauer,msteiner,robmurgai,Senthil1,silliman,vramaiitkgp,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/May/19 2:00 AM;msteiner;Go plugins definitely do have a number of traps and are not easy to work with. From above i'm a bit confused, though, whether the goal is to completely drop plugins or just replace the mechanism the plugins communicate to the peer (e.g., one could imagine replacing go-plugins as mechanism by RPC-based one like for chaincodes).  Can you clarify on this? 

Also, any timehorizon of this change, in particular if it is for removal of plugins completly rather replacement of the plugin mechanism?

thanks!;;;","19/Jun/19 4:47 AM;denyeart;There is no time horizon yet for the deprecation and removal of Go plugin support (besides BCCSP which is removed in v2.0). Proposals for a replacement to Go plugins are welcome.;;;","21/Jun/19 6:11 PM;vramaiitkgp;Is there a rationale for completely eliminating support for custom ESCC and VSCC logic rather than replacing them with mechanisms that are easier to use and maintain?

I'm asking this question because it's always struck me that having custom logic for endorsement at the peer level is a good idea, and necessary given the way Fabric works (the voting model.)

Also, my team's recently discovered a use for custom endorsement logic that cannot be placed anywhere else. Not in chaincode, as chaincode doesn't have visibility into the proposal response structure. Our only alternative, if support for ESCC plugins is removed, is to fork the Fabric code.

Is this topic still up for debate? I discovered this issue just a short while ago.;;;","15/Jun/20 11:39 PM;robmurgai;How does removing support for Go Plugins fit with our [recommendation to use Go Plugin|https://hyperledger-fabric.readthedocs.io/en/release-2.0/pluggable_endorsement_and_validation.html] for custom endorsement and validation?
{noformat}
Pluggable endorsement and validation logic
Fabric allows for the implementation and deployment of custom endorsement and validation logic into the peer to be associated with chaincode handling in a pluggable manner. This logic can be either compiled into the peer as built in selectable logic, or compiled and deployed alongside the peer as a Golang plugin.
{noformat}
 ;;;","02/Jul/20 4:30 AM;denyeart;[~robmurgai] That doc content has been updated to communicate the restrictions that make Go plugin usage challenging at best.

[https://hyperledger-fabric.readthedocs.io/en/release-2.2/pluggable_endorsement_and_validation.html#pluggable-endorsement-and-validation-logic]
{code:java}
Go plugins have a number of practical restrictions that require them to be compiled and linked in the same build environment as the peer. Differences in Go package versions, compiler versions, tags, and even GOPATH values will result in runtime failures when loading or executing the plugin logic.{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove external bccsp plugins,FAB-15340,39613,39611,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,04/May/19 6:43 AM,16/Oct/19 10:14 PM,28/Oct/23 3:08 AM,16/Oct/19 10:14 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,huxd,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mlb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),huxd,mastersingh24,silliman,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Oct/19 4:15 AM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric/+/33982;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove external endorsement plugins,FAB-15341,39614,39611,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,04/May/19 6:43 AM,04/May/19 6:43 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mlj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove external validation plugins,FAB-15342,39615,39611,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,04/May/19 6:43 AM,04/May/19 6:43 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mlr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove system chaincode plugins,FAB-15343,39616,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,mastersingh24,mastersingh24,04/May/19 6:45 AM,02/Mar/20 10:27 PM,28/Oct/23 3:08 AM,03/Dec/19 8:42 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,denyeart,jyellick,mastersingh24,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13176,,,,,,FAB-15338,FAB-17564,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00mlz:",,Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,mastersingh24,MHBauer,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Dec/19 7:56 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/32751/;;;","03/Dec/19 7:58 AM;denyeart;[~jyellick] Since this was done for v2.0, I've made it a story under the v2.0 changes epic and tagged as Release Note Required. Could you add a release note to v2.0.0.txt?;;;","03/Dec/19 1:37 PM;jyellick;https://github.com/hyperledger/fabric/pull/350;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove  external auth plugins,FAB-15344,39617,39611,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,04/May/19 6:48 AM,04/May/19 6:48 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mm7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove external decorator plugins,FAB-15345,39618,39611,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,04/May/19 6:49 AM,04/May/19 6:49 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mmf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Swap out orderer Blockcutter mocks,FAB-15346,39623,,Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,guoger,guoger,guoger,05/May/19 12:32 PM,11/May/21 11:11 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"Instead of using handcrafted mocks, use counterfeiter/mockery for blockcutter",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mnb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/21 11:11 PM;guoger;IMO, this is still worth doing, especially when adding another consensus implementation - author would go through the same pain writing UTs.

adjust priority though, this is not anything urgent.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Minor fixes in writing logs,FAB-15347,39624,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,05/May/19 4:58 PM,06/May/19 7:17 PM,28/Oct/23 3:08 AM,06/May/19 7:17 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The `PrintStackTrace()` utility method, prints to the standard output the whole buffer it allocates including the trailing zeros.
 Those extra chars can be seen in Jenkins' logs when viewed as plain text.
 This task is about trimming them.

Another issue is log lines that the verbs in their format don't match the given arguments.",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mnj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/May/19 9:19 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/#/c/31224/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Removed unused cscc functions,FAB-15348,39626,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/May/19 6:23 PM,08/Jul/20 4:54 AM,28/Oct/23 3:08 AM,04/Jun/19 7:29 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,It does not appear that *GetConfigTree* or *SimulateConfigTreeUpdate* are actually used anywhere.,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mnz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/May/19 6:24 PM;mastersingh24;As best I can tell, these functions are never called within Fabric or from any SDK.;;;","02/Jun/19 9:31 PM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric/+/31668;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove jsonledger,FAB-15349,39627,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/May/19 8:01 PM,06/May/19 4:09 PM,28/Oct/23 3:08 AM,06/May/19 4:09 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,not really used anywhere,,guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00mo7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,mastersingh24,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/May/19 10:39 AM;guoger;why don't we remove ram ledger as well?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Verifiable Random Functions(VRF) Into Ordering Service to Support Large-scale Consensus Network,FAB-15350,39628,,Epic,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,TopJohn,TopJohn,05/May/19 8:14 PM,09/May/19 9:36 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Add VRF(Verifiable Random Functions) Into Ordering Service to Support Large-scale COnsensus NetWork.

Now, Fabric has cft(crash fault tolerant) algorithm to do consensus, like Kafka based ordering service and etcd/raft based ordering service. In the feature, the bft algorithm will be used in the orderinng service. So If we have 100 ordering service ,maybe the network will become terrible. Using  VRF to  solve the network's scale problem maybe a good idea.",,baohua,crashmark93,mastersingh24,TopJohn,VipinB,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/May/19 6:44 AM;yacovm;Screenshot from 2019-05-06 00-40-44.png;https://jira.hyperledger.org/secure/attachment/17204/Screenshot+from+2019-05-06+00-40-44.png",,,,,,,,,,,,,,,,,,,,,,,,,,,https://docs.google.com/document/d/1n7UQzKrueMTgkJMoqdCu4gaqVOLZfOM6pZXGkp2Vhjs/edit,Unset,Unset,Unset,ghx-label-8,,VRF(Verifiable Random Functions) based ordering service,To Do,No,,Unset,No,,,"1|i00mof:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,crashmark93,mastersingh24,TopJohn,VipinB,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"06/May/19 6:50 AM;yacovm;I assume this was inspired by the Algorand paper.

I don't see any value of adding a VRF to the code base before we know that the Byzantine tolerant consensus algorithm actually chooses committees in a random manner.

Some Byzantine tolerant consensus algorithms don't choose committees, but instead they just either rotate leaders, or just do other stuff that doesn't use provable randomness.

If I recall correctly [from the paper|https://people.csail.mit.edu/nickolai/papers/gilad-algorand-eprint.pdf], committee selection when the number of nodes is low (a few hundreds) can tolerate a small ratio of byzantine nodes. Even with a committee of 500 nodes, the percentage of honest nodes is 90%, which in your example would lead to impractical assumptions.

 

!Screenshot from 2019-05-06 00-40-44.png!

 So, clearly - using committee selection is good for large networks with thousands of nodes, and I don't think we'll have a Byzantine ordering service oriented for large networks in the near future.

Last but not least - Using VRFs may sound cool, but I think that it's an overkill and we can just use plain old hashes. 
The reason VRF was picked in the Algorand paper is that they had an insanely strong adversary that can corrupt instantly, in any round - a specific percentage of nodes. With a VRF only the user can calculate its ranking at block *n*, and thus an attacker cannot predict the highest ranking node that can propose block *n+1* and corrupt that node before it gets the chance to propose the block. 

However - real life doesn't work that way, and in real life hackers don't take over computers in less than a minute (like in the paper), and if they do - they don't stop controlling the machines because the rules of the game say they can only control *f* at a time.

Therefore we shouldn't really care about the winner being predictable before it has the chance to propose the block, and we can just use a hash, instead of a VRF. 


CC [~marko.vukolic] 

 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop publishing 3rd party images,FAB-15351,39629,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,mastersingh24,mastersingh24,05/May/19 9:30 PM,18/Jan/20 12:53 PM,28/Oct/23 3:08 AM,18/Jan/20 12:53 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Now that Raft is the ordering service of choice, it's time to stop publishing the Zookeeper and Kafka images.  Supported versions should be documented and ideally tests will use images from Dockerhub (perhaps the Confluent community images).

CouchDB now publishes official library images as well and those should be used rather than publishing an image.",,denyeart,joaquimpedrooliveira,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00mon:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,joaquimpedrooliveira,mastersingh24,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Dec/19 11:17 PM;denyeart;[~btl5037] Anything remaining on this one? If not please close...;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use official CouchDB image for all tests,FAB-15352,39630,39629,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/May/19 9:31 PM,16/May/19 11:41 PM,28/Oct/23 3:08 AM,08/May/19 6:09 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15396,,,,FAB-15464,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mov:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use official CouchDB image for samples,FAB-15353,39631,39629,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,05/May/19 9:32 PM,01/Jun/19 7:47 AM,28/Oct/23 3:08 AM,21/May/19 5:14 PM,,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15601,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mp3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove all references to old FabCar sample from Fabric docs,FAB-15354,39636,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,pandrejko,pandrejko,06/May/19 8:56 PM,05/Feb/20 4:40 AM,28/Oct/23 3:08 AM,05/Feb/20 4:40 AM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,Do an analysis and make sure that every reference to Fabcar points to the new Fabcar sample to avoid support tickets for the old Fabcar and the patterns its includes.,,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17408,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:69",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jan/20 1:31 AM;pandrejko;Remove this topic entirely: https://hyperledger-fabric.readthedocs.io/en/latest/understand_fabcar_network.html
Nik is current updating https://hyperledger-fabric.readthedocs.io/en/latest/write_first_app.html via jira FAB-17408
There is a link here: https://hyperledger-fabric.readthedocs.io/en/latest/chaincode4noah.html#step-one-packaging-the-smart-contract that no longer works `{""Path"":""github.com/chaincode/fabcar/go"",""Type"":""golang"",""Label"":""fabcarv1""}`

All other references are currently being addressed.;;;","31/Jan/20 9:50 PM;pandrejko;First two bullets are being addressed here: https://github.com/hyperledger/fabric/pull/522/;;;","31/Jan/20 9:52 PM;pandrejko;[~negupta]Let me know if you want me to get that last one or if you have it?;;;","31/Jan/20 11:03 PM;negupta;[~pandrejko] That was removed as part of this PR: https://github.com/hyperledger/fabric/commit/140299ea50a0ebd0258024e0dd20415c4f45138a

If you want, we can close this issue and track with: https://jira.hyperledger.org/browse/FAB-17408;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
De-embed ClientConfig from dialers,FAB-15355,39637,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,06/May/19 9:01 PM,08/May/19 10:16 PM,28/Oct/23 3:08 AM,08/May/19 10:16 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mq7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-test OTE smoke test flake FAB6996_3000tx_1ch_solo,FAB-15356,39638,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,06/May/19 10:48 PM,31/Jul/19 4:46 AM,28/Oct/23 3:08 AM,31/Jul/19 4:46 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"Test passes on most runs, but occasionally fails 1/5 on desktop. However, in CI fabric-test verify job it usually fails.

orderer_ote.py::OTE_Orderer_Traffic_Engine::test_FAB6996_3000tx_1ch_solo FAILED

{quote} 21:16:18 Creating OTE ... 
Creating done
2019-05-03 01:16:16.211 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized

21:16:18 Error: got unexpected status: BAD_REQUEST -- error validating channel creation transaction for new channel 'testorgschannel1', could not succesfully apply update to template configuration: error authorizing update: error validating DeltaSet: policy for [Value]  /Channel/Capabilities not satisfied: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Admins' sub-policies to be satisfied{quote}

Both the single orderer test and the multiple orderers test have been ""skipped"" from the smoke test suite.",,sambhavdutt,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15113,FAB-15357,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mqf:",,,,Unset,Unset,,"Reenable the ote test FAB6996_3000tx_1ch_solo in fabric-test smoke test suite by removing the ""skip"" tag line in fabric-test/regression/smoke/orderer_ote.py, and pushing a patchset so it would be run by the CI fabric-test verify job.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/May/19 11:37 PM;scottz;When running the daily OTE target in sandbox (see below for target definition from fabric-test/Makefile)

{quote}svt-daily-ote-tests: pre-req fabric pull-images pull-binaries pull-thirdparty-images
	cd $(HYPERLEDGER_DIR)/fabric-test/regression/daily && ./runOteTestSuite.sh
{quote}
all OTE tests in master branch, including all fixes up through May 13, we see all daily OTE tests fail. The  fabric-test/scripts/pullBinaries.sh adds fabric-test/bin to the PATH after pulling them, just like in 1.4 (where the tests pass). The jenkins job environment already adds fabric/build/bin and fabric/.build/bin to the PATH. Confusing why this fails in master branch CI test runs.

{quote}23:59:16 Creating OTE ... 
23:59:16 [1A[2K
Creating done
[1Bdocker-compose OTE service waiting a bit for fabric containers to stabilize before calling script.sh to create channels and run the test...
23:59:16 #########################################
23:59:16 #                                       #
23:59:16 #            WELCOME TO OTE             #
23:59:16 #                                       #
23:59:16 #########################################
23:59:16 [fabric-test/tools/OTE/script.sh] Executing TESTCASE=Test_FAB7024_30ktx_1ch_solo_500batchsize
23:59:16 Creating Channels: 1
23:59:16 creating channel testorgschannel1
23:59:16 2019-05-14 02:56:22.957 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
23:59:16 2019-05-14 02:56:23.003 UTC [cli.common] readBlock -> INFO 002 Received block: 0
23:59:16 $ go build
23:59:16 # github.com/hyperledger/fabric/OTE
23:59:16 /usr/local/go/pkg/tool/linux_amd64/link: running gcc failed: exec: ""gcc"": executable file not found in $PATH
23:59:16 {quote};;;","31/Jul/19 4:46 AM;scottz;OTE is already disabled in master. 
v1.4 tests are stable and passing. THis flake is gone.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
all OTE tests with multiple orderers in smoke/daily test suites fail,FAB-15357,39639,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,06/May/19 10:58 PM,14/May/19 7:22 AM,28/Oct/23 3:08 AM,14/May/19 7:22 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"All the OTE tests with multiple orderers fail, such as this one in the smoke test suite: FAB7936_100tx_3ch_3ord_3kb. They have been skipped/disabled from the test suites.

{quote}Error: got unexpected status: BAD_REQUEST -- error validating channel creation transaction for new channel 'testorgschannel2', could not succesfully apply update to template configuration: error authorizing update: error validating DeltaSet: policy for [Value]  /Channel/Capabilities not satisfied: implicit policy evaluation failed - 0 sub-policies were satisfied, but this policy requires 1 of the 'Admins' sub-policies to be satisfied{quote}
",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15356,,,,FAB-15113,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mqn:",,,,Unset,Unset,,Reenable the skipped test in fabric-test/smoke/orderer_ote.py and push a patchset to execute it as part of the verify fob for fabric-test repo.,,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"07/May/19 6:41 AM;scottz;https://gerrit.hyperledger.org/r/#/c/31176/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Private data not working when required ""requiredPeerCount"": 1 [ does not work for any count except 0]",FAB-15358,39640,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,denyeart,nileshdeotale,nileshdeotale,06/May/19 11:24 PM,14/Aug/19 11:13 AM,28/Oct/23 3:08 AM,08/May/19 4:17 AM,v1.4.1,,,,,,,,,,,,,,,,,fabric-gossip,fabric-peer,,,,,0,,,,,,"*Chaincode*: [https://github.com/hyperledger/fabric-samples/blob/release-1.4/chaincode/marbles02_private/go/marbles_chaincode_private.go]
 
*Collections files:* Please see below
{code} 
Private data dissimenation is not working with ""requiredPeerCount"": 1 in collections file:
{code}

 Please see attached screen shot.

*Extract from peer command:*

{code}
peer chaincode invoke -o 169.46.208.135:31276 -C channel1 -n marbles_chaincode_private --tls --cafile /Users/chandra/Desktop/json/orderermsp/admin_msp/tlscacerts/tlscert.pem -c '{""Args"":[""initMarble""]}' --transient ""\{\""marble\"":\""${MARBLE1}\""}""

 Error: endorsement failure during invoke. response: status:500 message:""Failed disseminating 1 out of 2 private RWSets"" 
{code}

*peer container logs*
{code}
2019-04-29 16:56:36.123 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 329 Created state database channel1_marbles_chaincode_private$$pcollection$marbles
 2019-04-29 16:56:36.174 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 32a Created state database channel1_marbles_chaincode_private$$hcollection$marbles
 2019-04-29 16:56:36.183 UTC [peer.chaincode.dev-jdoe-marbles_chaincode_private-1] func2 -> INFO 32b - end init marble
 2019-04-29 16:56:36.184 UTC [endorser] callChaincode -> INFO 32c [channel1][8a321ffd] Exit chaincode: name:""marbles_chaincode_private"" (22647ms)
 2019-04-29 16:56:36.185 UTC [gossip.privdata] func1 -> ERRO 32d Failed disseminating private RWSet for TxID 8a321ffd21965ddac66c2f0a50a1bae1542bc48ad9c3cc0d406a6623d6d006e6 , namespace marbles_chaincode_private collection collectionMarblePrivateDetails : Requested to send to at least 1 peers, but know only of 0 suitable peers
 2019-04-29 16:56:36.187 UTC [gossip.service] DistributePrivateData -> ERRO 32e Failed to distributed private collection, txID 8a321ffd21965ddac66c2f0a50a1bae1542bc48ad9c3cc0d406a6623d6d006e6 channel channel1 due to Failed disseminating 1 out of 2 private RWSets
 2019-04-29 16:56:36.188 UTC [comm.grpc.server] 1 -> INFO 32f unary call completed

{""grpc.start_time"": ""2019-04-29T16:56:13.535Z"", ""grpc.service"": ""protos.Endorser"", ""grpc.method"": ""ProcessProposal"", ""grpc.peer_address"": ""10.121.12.190:10551"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""22.653100119s""}
{code}

If I change *requiredPeedCount* to *0* in collection file, I don't see errors above and transaction is successfully committed to the ledger.
",,denyeart,mastersingh24,nileshdeotale,,,,,,,,,,,,,,,,,,,,,FAB-15460,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/19 4:11 AM;nileshdeotale;Screen Shot 2019-05-06 at 3.10.48 PM.png;https://jira.hyperledger.org/secure/attachment/17208/Screen+Shot+2019-05-06+at+3.10.48+PM.png","07/May/19 4:31 AM;nileshdeotale;Screen Shot 2019-05-06 at 3.30.29 PM.png;https://jira.hyperledger.org/secure/attachment/17210/Screen+Shot+2019-05-06+at+3.30.29+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mqv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,nileshdeotale,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/May/19 2:54 AM;mastersingh24;Do you have gossip set up correctly?  If you don't have gossip set up properly within an organization, then there's no way the peer parameters of the collection definition can be properly enforced.   You also have to have the chaincode installed on the other peers in the org as well even with gossip enabled and properly set up.

[~denyeart]   - can you have a look?;;;","07/May/19 4:13 AM;nileshdeotale;IBP 2.0 SaaS
Gossip external end points are setup . (Please see attached screen shot from peer container)
Chaincode is installed on all peers . ( 2 orgs with 1 peer in each org. 
peers in each org have been setup as anchor peers.
;;;","07/May/19 4:18 AM;denyeart;[~nileshdeotale]

Error *""Requested to send to at least 1 peers, but know only of 0 suitable peers""* means that the peer can't find another member of the collection via gossip, however requiredPeerCount of 1 requires at least one dissemination for endorsement to succeed. Usually this means that gossip or the collection has been misconfigured.

I'm not understanding your collection ""policy"" field with ""Unknown macro"" in it. Here is a valid collection policy:

[https://github.com/hyperledger/fabric-samples/blob/release-1.4/chaincode/marbles02_private/collections_config.json#L4]

 ;;;","07/May/19 4:23 AM;nileshdeotale;[~denyeart] for some reason jira editor decoded it as unknown.. please see attached screen shot of collections file. I'd to use format as per IBP 2.0 opt tools.
""requiredPeerCount"": 1 in my collection file while in your sample collection above it's  0.;;;","07/May/19 6:10 AM;denyeart;[~nileshdeotale] Your collection collectionMarblePrivateDetails only has one member configured - ""org1msp"".  You mentioned you only have one peer per org.  If you endorse on the org1msp peer, there will be no other peers in the gossip network that the org1msp peer can forward private data to.  requiredPeerCount of '1' requires dissemination to at least one other peer before endorsement returns success (a configuration > 0 is used to ensure private data availability, even if the endorsing peer goes down).  Since the private data cannot be disseminated to any other peer, the endorsement has to fail with error *""Requested to send to at least 1 peers, but know only of 0 suitable peers""*.  If you add org2msp to the collectionMarblePrivateDetails collection, I expect it will be able to disseminate the private data to the org2msp peer and therefore return success.;;;","08/May/19 4:16 AM;nileshdeotale;Thanks [~denyeart]worked by updating collections. ""withdrawing"" this jira.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove dead functions from dockercontroller,FAB-15359,39642,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,07/May/19 12:52 AM,09/May/19 4:31 AM,28/Oct/23 3:08 AM,09/May/19 4:31 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,{RemoveImageExtended} is dead.,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ltw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/May/19 12:53 AM;sykesm;https://gerrit.hyperledger.org/r/31233 [FAB-15359] kill dead RemoveImageExtended;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Simplify TestChanicodeInvokeChaincode,FAB-15360,39643,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,07/May/19 12:54 AM,09/May/19 4:47 AM,28/Oct/23 3:08 AM,09/May/19 4:47 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mrb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/May/19 12:55 AM;sykesm;https://gerrit.hyperledger.org/r/31234 [FAB-15360] cleanup TestChaincodeInvokeChaincode;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove unnecessary package init functions,FAB-15361,39644,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,07/May/19 12:56 AM,09/May/19 4:47 AM,28/Oct/23 3:08 AM,09/May/19 4:47 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,"Gossip contains the following that is unnecessary.

{{code}}
-func init() {
       // This is just to satisfy the code coverage tool
       // miss any methods
       switch true {

       }
}
{{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mrj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/May/19 12:57 AM;sykesm;https://gerrit.hyperledger.org/r/31235 [FAB-15361] remove unnecessary pkg init
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move chaincode launcher to chaincode support,FAB-15362,39646,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,07/May/19 2:01 AM,17/May/19 10:42 PM,28/Oct/23 3:08 AM,17/May/19 10:42 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mrz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Missing collection config validation,FAB-15363,39648,38776,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,07/May/19 3:24 AM,30/May/19 10:09 PM,28/Oct/23 3:08 AM,30/May/19 10:09 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,Add Collection config validation to new lifecycle as it exits in lscc - https://github.com/hyperledger/fabric/blob/master/core/handlers/validation/builtin/v13/lscc_validation_logic.go#L217,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,FAB-15364,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:k",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/May/19 12:36 PM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/31351/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow system chaincode (at least _lifecycle) to have access to txsimulator/txcontext,FAB-15364,39649,38776,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,07/May/19 3:54 AM,30/May/19 10:09 PM,28/Oct/23 3:08 AM,30/May/19 10:09 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"System chaincodes are limited by the shim interface and do not have access to some of the resources that may be required in the downstream code.

FAB-15363 requires the _lifecycle system chaincode to query lscc system chaincode in order to fetch existing collection configs (if defined).

One possible way would be to use chaicode calling chaincode mechanism. However, that would be extending the uses of system chaincodes in the peer code even further. 

The other way (which would be preferred) is to use https://github.com/hyperledger/fabric/blob/master/core/scc/lscc/deployedcc_infoprovider.go to query directly lscc without going via lscc system chaincode interface (as is used at many places in peer code). However, this requires _lifecycle system chaincode to have access to query executor that can be used directly.

Discussed potential solution with [~sykesm] and he suggests that the _lifecycle system chaincode can be passed with the txcontext map during construction of the chaincode instance (https://github.com/hyperledger/fabric/blob/master/internal/peer/node/start.go#L327) and the chaincode can look this up by txid (which is accessible via shim). This appears a reasonable workaround to me till we have to manage a part of the peer code as system chaincodes.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15363,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:hi",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/May/19 12:35 PM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/31351/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Consistently use spaces at a standard indent in the fabric scripts,FAB-15365,39650,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,slinzhang007,sykesm,sykesm,07/May/19 7:08 AM,25/May/19 8:49 AM,28/Oct/23 3:08 AM,25/May/19 8:49 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"bootstrap.sh, check_license.sh, and pull_build_artifacts use a mixture of tabs and spaces for indenting. These scripts should uniformly use spaces with appropriate, consistent indenting.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00msv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/19 1:53 AM;sykesm;https://gerrit.hyperledger.org/r/c/31275/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a go chaincode developer, I want to free myself from the go-logging dependency in shim",FAB-15366,39651,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,07/May/19 7:46 AM,11/Jan/20 7:06 AM,28/Oct/23 3:08 AM,22/Jun/19 8:52 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"The chaincode shim includes a number of logging operations that do nothing more than write to stderr. The implementation of these logging interfaces is based on op/go-logging - the library we removed from the fabric core in 1.3.

Removing the logging interfaces from the shim would allow us to stop carrying the op-logging dependency and make clear our position that logging from chaincode is the responsibility of a chaincode developer and that there's no magic integration between chaincode and the peer.

This would also allow us to remove additional viper dependencies in the code base.

Chaincode developers that use the logging interfaces would need to adopt their own logging facade and direct output to stdout or stderr as appropriate.",,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00f5w:",See release note in child FAB-15637,Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/19 8:26 PM;denyeart;[~btl5037] Can you also update the logging doc:

[https://hyperledger-fabric.readthedocs.io/en/latest/logging-control.html#go-chaincodes]

[https://hyperledger-fabric.readthedocs.io/en/latest/logging-control.html#api]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move shim.MockStub to shimtest package and deprecate for removal,FAB-15367,39652,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,07/May/19 7:54 AM,22/Jun/19 2:35 AM,28/Oct/23 3:08 AM,22/Jun/19 2:35 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,1,ipm,,,,,"The {{MockStub}} implementation in chaincode/shim is incomplete, poorly documented, and incorrectly placed into a production package.

In particular, the following are unimplemented:

{code}
GetPrivateDataHash
DelPrivateData
GetPrivateDataByRange
GetPrivateDataByPartialCompositeKey
GetPrivateDataueryResult
GetQueryResult
GetHistoryForKey
GetTransient
GetBinding
GetArgsSlice
{code}

We should move it out of the chaincode/shim package to make it clear it is not part of the production code. We should further clearly document that we intend to remove it in the future. Developers can use their own mock/fake tools to generate mocks that are more appropriate for their needs.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00mtb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/19 11:13 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31577;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Behave chaincode.feature scenarios failure, due to incorrect chaincode path",FAB-15368,39653,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,07/May/19 11:09 AM,08/May/19 12:28 AM,28/Oct/23 3:08 AM,08/May/19 12:28 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"In fabric-test/chaincodes, the example03, example04, and example05 chaincodes folder structure is different from the path given in the test scenarios.",,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"07/May/19 12:59 PM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31243/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing test cases from behave feature files in fabric-test,FAB-15369,39654,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,vijaypunugubati,vijaypunugubati,07/May/19 11:19 AM,30/Jul/19 1:21 PM,28/Oct/23 3:08 AM,30/Jul/19 1:21 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,"There are many failing test cases in fabric-test/feature files used in daily behave test suite that fail due to various reasons; many appear as IO errors or TLS failures, but there are others too.

* Create specific bugs for each type of error.
* Disable the failing testcases; keep the jira bugs open.
* Later return to fix each one (if it is deemed necessary because the test coverage is not duplicated elsewhere).",,bharadwajambati,bharadwajambati1,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15241,FAB-15383,,,FAB-15370,FAB-15371,FAB-15372,FAB-15373,FAB-15374,FAB-15375,FAB-15380,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati,bharadwajambati1,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"17/May/19 12:34 AM;bharadwajambati1;Enabled tests related to chaincode path in chaincodes.feature(FAB-15380) and lifecycle.feature(FAB-15372). Not all the tests in those files.

[https://gerrit.hyperledger.org/r/#/c/31389/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing TLS tests in Behave CouchDB_index.feature,FAB-15370,39655,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,bharadwajambati1,bharadwajambati1,07/May/19 11:46 AM,30/Jul/19 12:18 PM,28/Oct/23 3:08 AM,30/Jul/19 12:18 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,,,,,"Disabling TLS for the test scenarios in CouchDB_index.feature from fabric-test repo due to IO error while running the svt-daily-behavesuite.

 

*Sample Scenario:*
{code:java}
13:34:22   @daily
13:34:22   Scenario Outline: FAB-7251: Test CouchDB indexing using marbles chaincode using GOLANG with 1 channels and 1 index with 1 selector -- @1.1                                                                                                              # CouchDB_index.feature:31
13:34:22     Given I have a bootstrapped fabric network of type kafka using state-database couchdb with tls                                                                                                                                                        # steps/basic_impl.py:300
13:34:22 org1.example.com
13:34:22 org2.example.com
13:34:22 2019-05-06 17:34:22.823 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
13:34:23 2019-05-06 17:34:23.091 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 orderer type: kafka
{code}
Assertion failed error at the end of the test scenario
{code:java}
13:34:52 2019-05-06 17:34:52.827 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 005 Generating new channel configtx
13:34:52 2019-05-06 17:34:52.838 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 006 Writing new channel tx
13:35:32     And an admin deploys chaincode at path ""github.com/hyperledger/fabric-samples/chaincode/marbles02/go"" with args [""""] with name ""mycc1"" with language ""GOLANG"" on channel ""mychannel1""                                                                 # steps/endorser_impl.py:119
13:36:09     When a user invokes on the channel ""mychannel1"" using chaincode named ""mycc1"" with args [""initMarble"",""marble100"",""red"",""5"",""cassey""] on ""peer0.org1.example.com""                                                                                     # steps/endorser_impl.py:634
13:36:15     When a user queries on the channel ""mychannel1"" using chaincode named ""mycc1"" with args [""queryMarbles"",""{\\""selector\\"":{\\""size\\"":5}, \\""use_index\\"":[\\""_design/indexdoc_behave_test\\"", \\""index_behave_test\\""]}""] on ""peer0.org1.example.com"" # steps/endorser_impl.py:466
13:36:20     Then a user receives a response containing ""owner"":""cassey""                                                                                                                                                                                           # steps/endorser_impl.py:1228
13:36:20       Assertion Failed: Expected response was ""owner"":""cassey""; received []
13:36:20       
13:36:20       Captured stdout:
13:36:20       test 2fa26732702511e9bfd6fa163e2133a3 already exists!!!
13:36:20       test 2fa26732702511e9bfd6fa163e2133a3 already exists!!!
13:36:20       reg testConfigs: configs/2fa26732702511e9bfd6fa163e2133a3
{code}
At the end of logs found the IOError: [Errno 11] Resource temporarily unavailable
{code:java}
[chaincode.platform.golang] func1 -> DEBU 04b\x1b[0m Discarding GOROOT package sException IOError: [Errno 11] Resource temporarily unavailable
13:36:20 Traceback (most recent call last):
13:36:20   File ""/usr/local/bin/behave"", line 11, in <module>
13:36:20     sys.exit(main())
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 183, in main
13:36:20     return run_behave(config)
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 127, in run_behave
13:36:20     failed = runner.run()
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 804, in run
13:36:20     return self.run_with_paths()
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 824, in run_with_paths
13:36:20     return self.run_model()
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 626, in run_model
13:36:20     failed = feature.run(self)
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 321, in run
13:36:20     failed = scenario.run(runner)
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1114, in run
13:36:20     failed = scenario.run(runner)
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 711, in run
13:36:20     if not step.run(runner):
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1379, in run
13:36:20     formatter.result(self)
13:36:20   File ""/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py"", line 151, in result
13:36:20     self.stream.write(indent(step.error_message.strip(), u""      ""))
13:36:20   File ""/usr/lib/python2.7/codecs.py"", line 370, in write
13:36:20     self.stream.write(data)
13:36:20 IOError: [Errno 11] Resource temporarily unavailable
{code}",,bharadwajambati1,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,FAB-15018,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,vijaypunugubati,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"07/May/19 12:58 PM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31244/];;;","30/Jul/19 12:18 PM;vijaypunugubati;Not reproduced in recent builds, and working as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Failing batchtimeout test cases, timing issue, in orderer.feature from fabric-test",FAB-15371,39656,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,vijaypunugubati,vijaypunugubati,vijaypunugubati,07/May/19 12:41 PM,30/Jul/19 12:03 PM,28/Oct/23 3:08 AM,30/Jul/19 12:03 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,"Disable test cases in orderer.feature from fabric-test repo due to IO error while running the svt-daily-behavesuite.

*Scenario Outline:* FAB-4808,FAB-3937,FAB-3938: Orderer_BatchTimeOut is honored, for kafka orderer

                                ` | kafka | 20 seconds | 1000 | 990 |`
{code:java}
/00:14:29.076     And an admin deploys chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc"" # steps/endorser_impl.py:155
00:14:58.949     When a user queries on the chaincode named ""mycc"" with args [""query"",""a""]                                                                                         # steps/endorser_impl.py:510
00:15:17.986     Then a user receives a success response of 1000                                                                                                                   # steps/endorser_impl.py:1183
00:15:17.987     When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""]                                                                               # steps/endorser_impl.py:702
00:15:40.277     And I wait ""5"" seconds                                                                                                                                            # steps/basic_impl.py:24
00:15:45.282     When a user queries on the chaincode named ""mycc"" with args [""query"",""a""]                                                                                         # steps/endorser_impl.py:510
00:15:49.511     Then a user receives a success response of 1000                                                                                                                   # steps/endorser_impl.py:1183
00:15:49.518       Assertion Failed: Expected response was 1000; received 990
00:15:49.518      / code placeholder
{code}
*Scenario Outline:* FAB-4808,FAB-3937,FAB-3938: Orderer_BatchTimeOut is honored, for solo orderer                                 ` | solo | 20 seconds | 1000 | 990 |`
{code:java}
/00:13:24.495 2019-05-06 19:19:46.430 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 006 Writing new channel tx
00:13:53.261     And an admin deploys chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd"" with args [""init"",""a"",""1000"",""b"",""2000""] with name ""mycc"" # steps/endorser_impl.py:155
00:14:22.865     When a user queries on the chaincode named ""mycc"" with args [""query"",""a""]                                                                                         # steps/endorser_impl.py:510
00:14:40.381     Then a user receives a success response of 1000                                                                                                                   # steps/endorser_impl.py:1183
00:14:40.381     When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""]                                                                               # steps/endorser_impl.py:702
00:15:02.236     And I wait ""5"" seconds                                                                                                                                            # steps/basic_impl.py:24
00:15:07.239     When a user queries on the chaincode named ""mycc"" with args [""query"",""a""]                                                                                         # steps/endorser_impl.py:510
00:15:10.925     Then a user receives a success response of 1000                                                                                                                   # steps/endorser_impl.py:1183
00:15:10.925       Assertion Failed: Expected response was 1000; received 990
00:15:10.925   / code placeholder{code}
IO Error observed after test cases are failed.

 
{code:java}
/00:15:10.935   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 127, in run_behave
00:15:10.935     failed = runner.run()
00:15:10.935   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 804, in run
00:15:10.935     return self.run_with_paths()
00:15:10.935   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 824, in run_with_paths
00:15:10.935     return self.run_model()
00:15:10.936   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 626, in run_model
00:15:10.936     failed = feature.run(self)
00:15:10.936   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 321, in run
00:15:10.936     failed = scenario.run(runner)
00:15:10.936   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1114, in run
00:15:10.936     failed = scenario.run(runner)
00:15:10.936   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 711, in run
00:15:10.937     if not step.run(runner):
00:15:10.937   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1379, in run
00:15:10.937     formatter.result(self)
00:15:10.937   File ""/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py"", line 151, in result
00:15:10.937     self.stream.write(indent(step.error_message.strip(), u""      ""))
00:15:10.937   File ""/usr/lib/python2.7/codecs.py"", line 370, in write
00:15:10.937     self.stream.write(data)
00:15:10.938 IOError: [Errno 11] Resource temporarily unavailable
00:15:10.962 Makefile:224: recipe for target 'svt-daily-behave-tests' failed/ code placeholder
{code}
 ",,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mu7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,vijaypunugubati,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"07/May/19 12:45 PM;vijaypunugubati;[https://gerrit.hyperledger.org/r/#/c/31245/];;;","30/Jul/19 12:03 PM;vijaypunugubati;*FAB-4808,FAB-3937,**FAB-3938* : covered in fabric/orderer/*/*_test.go. The raft tests look thorough.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Failing test in lifecycle.feature from fabric-test repo; dependent on unimplemented SDK",FAB-15372,39657,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,bharadwajambati1,bharadwajambati1,07/May/19 12:51 PM,31/Jul/19 4:44 AM,28/Oct/23 3:08 AM,31/Jul/19 4:44 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"Disable test case scenarios in lifecycle.feature from fabric-test repo; looks like unimplemented SDK code for the lifecycle feature is causing the failure while running the svt-daily-behavesuite. We can reenable these testcase scenarios after the Java SDK and Node SDK lifecycle feature code is finished.

 

*Scenario:*
{code:java}
15:40:54   @daily
15:40:54   Scenario Outline: FAB-13701: Test new chaincode lifecycle - Basic workflow using Java SDK with GOLANG chaincode -- @1.3              # lifecycle.feature:38
15:40:54     Given I changed the ""Application"" capability to version ""V2_0""                                                                     # steps/basic_impl.py:316
15:40:54     And I have a bootstrapped fabric network of type solo using state-database leveldb                                                 # steps/basic_impl.py:308
15:40:54 org1.example.com
15:40:54 org2.example.com
15:40:54 2019-05-06 19:40:54.345 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
15:40:54 2019-05-06 19:40:54.578 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 002 orderer type: solo
15:40:54 2019-05-06 19:40:54.578 UTC [common.tools.configtxgen.localconfig] Load -> INFO 003 Loaded configuration: /w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/configs/dc8d122e703611e9983dfa163e02b5dc/configtx.yaml
15:40:54 2019-05-06 19:40:54.822 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 004 orderer type: solo
15:40:54 2019-05-06 19:40:54.822 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 005 Loaded configuration: /w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/configs/dc8d122e703611e9983dfa163e02b5dc/configtx.yaml
15:40:54 2019-05-06 19:40:54.828 UTC [common.tools.configtxgen] doOutputBlock -> INFO 006 Generating genesis block
15:40:54 2019-05-06 19:40:54.829 UTC [common.tools.configtxgen] doOutputBlock -> INFO 007 Writing genesis block
15:40:54 2019-05-06 19:40:54.868 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
15:40:55 2019-05-06 19:40:55.095 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/configs/dc8d122e703611e9983dfa163e02b5dc/configtx.yaml

{code}
**Found the below error in the logs
{code:java}
15:41:55     When each organization admin approves the chaincode package with policy ""OR ('org1.example.com.member','org2.example.com.member')"" # steps/endorser_impl.py:1049
15:41:56       Traceback (most recent call last):
15:41:56         File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1329, in run
15:41:56           match.run(runner.context)
15:41:56         File ""/usr/local/lib/python2.7/dist-packages/behave/matchers.py"", line 98, in run
15:41:56           self.func(context, *args, **kwargs)
15:41:56         File ""steps/endorser_impl.py"", line 1052, in step_impl
15:41:56           context.result = context.interface.approve_chaincode(context, peers, user=""Admin"", policy=policy)
15:41:56         File ""/w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/steps/endorser_util.py"", line 383, in approve_chaincode
15:41:56           raise Exception(""The code for this has not been implemented for the SDKs yet. Please update in the fabric-test/feature/sdk directory."")
15:41:56       Exception: The code for this has not been implemented for the SDKs yet. Please update in the fabric-test/feature/sdk directory.
{code}

Side note: due to another known bug FAB-15241 in behave framework, we also see the ` IOError: [Errno 11] Resource temporarily unavailable` when trying to handle the failure at the end of the test: 

{code:java}
15:41:56 Traceback (most recent call last):
15:41:56   File ""/usr/local/bin/behave"", line 11, in <module>
15:41:56     sys.exit(main())
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 183, in main
15:41:56     return run_behave(config)
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 127, in run_behave
15:41:56     failed = runner.run()
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 804, in run
15:41:56     return self.run_with_paths()
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 824, in run_with_paths
15:41:56     return self.run_model()
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 626, in run_model
15:41:56     failed = feature.run(self)
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 321, in run
15:41:56     failed = scenario.run(runner)
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1114, in run
15:41:56     failed = scenario.run(runner)
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 711, in run
15:41:56     if not step.run(runner):
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1379, in run
15:41:56     formatter.result(self)
15:41:56   File ""/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py"", line 151, in result
15:41:56     self.stream.write(indent(step.error_message.strip(), u""      ""))
15:41:56   File ""/usr/lib/python2.7/codecs.py"", line 370, in write
15:41:56     self.stream.write(data)
15:41:56 IOError: [Errno 11] Resource temporarily unavailable
{code}",,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,FAB-13979,FAB-13980,,,,,,,,,,,,,,,,,,,FAB-15369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00muf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"07/May/19 1:05 PM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31246/];;;","13/May/19 11:44 PM;scottz;And another testcase in this file was backed out with a different changeset last week: FAB-13983. Problem appears to be an install problem, maybe with bad chaincode path for ex04 (although it looks correct in the feature file, so maybe it was a timing thing, or a container was not created as expected) `no Go files in /opt/gopath/src/github.com/hyperledger/fabric-test/chaincodes/example04`;;;","17/May/19 2:45 AM;bharadwajambati1;Enabled tests related to chaincode path. Its the fix for above comment.

[https://gerrit.hyperledger.org/r/#/c/31389/];;;","31/Jul/19 4:44 AM;scottz;covered in SDKs IT tests;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing IDEMix happy path test case in fabric-ca.feature from fabric-test repo,FAB-15373,39658,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,vijaypunugubati,vijaypunugubati,vijaypunugubati,07/May/19 1:08 PM,30/Jul/19 12:00 PM,28/Oct/23 3:08 AM,30/Jul/19 12:00 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,"Disable test cases in fabric-ca.feature from fabric-test repo due to IO error while running the svt-daily-behavesuite.

 *Test-case:* FAB-11728: Identity Mixer Test Happy Path
{code:java}
/ @daily
00:28:57.998   Scenario Outline: FAB-11728: Identity Mixer Test Happy Path -- @1.1                                                                                                                                                 # fabric-ca.feature:100
00:28:57.998     Given an admin creates an idemix MSP for organization ""org1.example.com""                                                                                                                                          # steps/endorser_impl.py:23
00:28:58.002       Traceback (most recent call last):
00:28:58.002         File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1329, in run
00:28:58.002           match.run(runner.context)
00:28:58.002         File ""/usr/local/lib/python2.7/dist-packages/behave/matchers.py"", line 98, in run
00:28:58.002           self.func(context, *args, **kwargs)
00:28:58.002         File ""steps/endorser_impl.py"", line 25, in step_impl
00:28:58.002           testConfigs, context = makeProjectConfigDir(context, returnContext=True)
00:28:58.002       NameError: global name 'makeProjectConfigDir' is not defined
00:28:58.002 / code placeholder
{code}
 ",,bharadwajambati1,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mun:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,scottz,vijaypunugubati,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"07/May/19 1:13 PM;vijaypunugubati;[https://gerrit.hyperledger.org/r/#/c/31258/];;;","30/Jul/19 11:58 AM;vijaypunugubati;This tets case is covered in task FAB-13231 (fabric IT)
 FAB-16022 (interop), so closing this issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing restarts testcases in gossip.feature from fabric-test repo,FAB-15374,39659,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,vijaypunugubati,vijaypunugubati,vijaypunugubati,07/May/19 1:55 PM,30/Jul/19 11:24 AM,28/Oct/23 3:08 AM,30/Jul/19 11:24 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,"Disable test cases in gossip.feature from fabric-test repo due to Assertion failed Error while running the svt-daily-behavesuite.

*Scenario Outline:* FAB-4663 FAB-4664 FAB-4665 A non-leader peer goes down by <type>, comes back up and catches up eventually. – @1.3

 
{code:java}
// Examples:    | takeDownType | bringUpType |   
 |  stop        | start       |  
 |  pause       | unpause     | 
 | disconnect   | connect     |
/ code placeholder

 / code placeholder
{code}
Same error observed for the above three scenarios,

 
{code:java}
/# steps/basic_impl.py:24
00:20:20.419     When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""] on the initial leader peer of ""org1""                                                                               # steps/endorser_impl.py:690
00:20:22.638     And I wait ""5"" seconds                                                                                                                                                                                 # steps/basic_impl.py:24
00:20:27.645     And a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on the initial leader peer of ""org1""                                                                                          # steps/endorser_impl.py:439
00:20:31.801     Then a user receives a success response of 980 from the initial leader peer of ""org1""                                                                                                                  # steps/endorser_impl.py:1162
00:20:31.806       Assertion Failed: Expected response was 980; received 990/ code placeholder
{code}
 *Scenario Outline:* FAB-4667 FAB-4671 FAB-4672 A leader peer goes down by stop, comes back up *after* another leader is elected, catches up. – @1.1
{code:java}
/00:10:26.703     When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""] on the initial non-leader peer of ""org1""                                                                               # steps/endorser_impl.py:694
00:10:29.444     And I wait ""5"" seconds                                                                                                                                                                                     # steps/basic_impl.py:24
00:10:34.446     And a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on the initial non-leader peer of ""org1""                                                                                          # steps/endorser_impl.py:443
00:10:39.400     Then a user receives a success response of 980 from the initial non-leader peer of ""org1""                                                                                                                  # steps/endorser_impl.py:1166
00:10:39.407       Assertion Failed: Expected response was 980; received 990
00:10:39.40/ code placeholder
{code}
*Scenario Outline:* FAB-4667 FAB-4671 FAB-4672 A leader peer goes down by pause, comes back up *after* another leader is elected, catches up. – @1.1
{code:java}
/00:13:11.657     When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""] on the initial non-leader peer of ""org1""                                                                               # steps/endorser_impl.py:694
00:13:18.618     And I wait ""5"" seconds                                                                                                                                                                                     # steps/basic_impl.py:24
00:13:23.622     And a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on the initial non-leader peer of ""org1""                                                                                          # steps/endorser_impl.py:443
00:13:31.213     Then a user receives a success response of 980 from the initial non-leader peer of ""org1""                                                                                                                  # steps/endorser_impl.py:1166
00:13:31.222       Assertion Failed: Expected response was 980; received 990
00:13:31.222       / code placeholder{code}
*Scenario Outline:* FAB-4673 FAB-4674 FAB-4675 on this test case or the three scenario's. 
{code:java}
/ Examples:    | takeDownType | bringUpType |   
 |  stop        | start       |  
 |  pause       | unpause     | 
 | disconnect   | connect     |
/ code placeholder
{code}
Here's the error observed for the three scenarios.

 
{code:java}
/# steps/basic_impl.py:24
00:16:04.047     When a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on the initial leader peer of ""org1""                                                                                             # steps/endorser_impl.py:439
00:16:09.256     Then a user receives a success response of 980 from the initial leader peer of ""org1""                                                                                                                      # steps/endorser_impl.py:1162
00:16:09.264       Assertion Failed: Expected response was 980; received 990/ code placeholder
{code}
 ",,bharadwajambati,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00muv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati,scottz,vijaypunugubati,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"07/May/19 4:49 PM;vijaypunugubati;[https://gerrit.hyperledger.org/r/#/c/31248/];;;","30/Jul/19 11:24 AM;vijaypunugubati;For the above test case failures, these tasks FAB-15980,  FAB-15981

cover the scenarios in gossip.feature;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing daily test cases in peer.feature from fabric-test repo,FAB-15375,39660,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,bharadwajambati1,bharadwajambati1,07/May/19 3:20 PM,30/Jul/19 10:02 AM,28/Oct/23 3:08 AM,30/Jul/19 10:02 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"Disable test scenarios and tls in peer.feature from fabric-test repo due to IO error while running the svt-daily-behavesuite.

 

*Scenario: FAB-8379: Test MSP Identity - Happy Path*

 
{code:java}
01:24:55     Then a user receives a success response of 1000                                                                                                # steps/endorser_impl.py:1183
01:24:55     When a user invokes on the chaincode named ""mycc"" with args [""invoke"",""a"",""b"",""10""]                                                            # steps/endorser_impl.py:702
01:25:00     And I wait ""5"" seconds                                                                                                                         # steps/basic_impl.py:24
01:25:05     When a user queries on the chaincode named ""mycc"" with args [""query"",""a""]                                                                      # steps/endorser_impl.py:510
01:25:10     Then a user receives a success response of 990                                                                                                 # steps/endorser_impl.py:1183
01:25:10       Assertion Failed: Expected response was 990; received 1000
{code}
 

 

*Scenario: FAB-8380: Test MSP Identity - Malicious Peer*

 
{code:java}
02:00:51     Then the logs on peer1.org2.example.com contains ""VSCCValidateTx for transaction txId "" within 10 seconds                                                                                      # steps/basic_impl.py:587
02:01:01       Traceback (most recent call last):
02:01:01         File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1329, in run
02:01:01           match.run(runner.context)
02:01:01         File ""/usr/local/lib/python2.7/dist-packages/behave/matchers.py"", line 98, in run
02:01:01           self.func(context, *args, **kwargs)
02:01:01         File ""steps/basic_impl.py"", line 590, in step_impl
02:01:01           common_util.wait_until_in_log([component], data)
02:01:01         File ""/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/common_util.py"", line 70, in wait_until_in_log
02:01:01           time.sleep(1)
02:01:01         File ""/home/jenkins/.local/lib/python2.7/site-packages/interruptingcow/__init__.py"", line 74, in handler
02:01:01           raise exception
02:01:01       RuntimeError
{code}
 

*Scenario: FAB-8381: Test MSP Identity - Malicious Peer (Clients set as writers in policy)*

 
{code:java}
02:45:04     When the admin changes the policy to ""OR ('org1.example.com.client','org2.example.com.client')""                                                                                                # steps/endorser_impl.py:910
02:45:15       Traceback (most recent call last):
02:45:15         File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1329, in run
02:45:15           match.run(runner.context)
02:45:15         File ""/usr/local/lib/python2.7/dist-packages/behave/matchers.py"", line 98, in run
02:45:15           self.func(context, *args, **kwargs)
02:45:15         File ""steps/endorser_impl.py"", line 912, in step_impl
02:45:15           policyChannelUpdate_impl(context, policy, context.interface.TEST_CHANNEL_ID)
02:45:15         File ""steps/endorser_impl.py"", line 903, in policyChannelUpdate_impl
02:45:15           context.interface.upgrade_chaincode(context, ""orderer0.example.com"", channel)
02:45:15         File ""/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/endorser_util.py"", line 898, in upgrade_chaincode
02:45:15           '{0}/peerOrganizations/{1}/users/{2}@{1}/tls/ca.crt'.format(configDir, org, user)]
02:45:15       UnboundLocalError: local variable 'org' referenced before assignment

{code}
*Scenario: FAB-8382: Test MSP Identity with inconsistencies*

 
{code:java}
03:06:00     Then the logs on peer0.org2.example.com contains ""VSCCValidateTx for transaction txId "" within 10 seconds                                                                                      # steps/basic_impl.py:587
03:06:10       Traceback (most recent call last):
03:06:10         File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1329, in run
03:06:10           match.run(runner.context)
03:06:10         File ""/usr/local/lib/python2.7/dist-packages/behave/matchers.py"", line 98, in run
03:06:10           self.func(context, *args, **kwargs)
03:06:10         File ""steps/basic_impl.py"", line 590, in step_impl
03:06:10           common_util.wait_until_in_log([component], data)
03:06:10         File ""/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/common_util.py"", line 70, in wait_until_in_log
03:06:10           time.sleep(1)
03:06:10         File ""/home/jenkins/.local/lib/python2.7/site-packages/interruptingcow/__init__.py"", line 74, in handler
03:06:10           raise exception
03:06:10       RuntimeError
{code}
*Scenario: FAB-8759: Test querying a peer with two different versions of chaincode - values change*
{code:java}
03:31:25     And an admin deploys chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example02/go/cmd"" with args [""init"", ""a"", ""1000"" , ""b"", ""2000""] with name ""vt"" on channel ""versioningtest"" # steps/endorser_impl.py:143
03:32:19     When a user queries on the channel ""versioningtest"" using chaincode named ""vt"" with args [""query"",""a""] on ""peer0.org1.example.com""                                                               # steps/endorser_impl.py:466
03:32:26     Then a user receives a success response of 1000                                                                                                                                                  # steps/endorser_impl.py:1183
03:32:26     When a user invokes on the channel ""versioningtest"" using chaincode named ""vt"" with args [""invoke"",""a"",""b"",""10""] on ""peer0.org2.example.com""                                                     # steps/endorser_impl.py:634
03:32:32     And I wait ""5"" seconds                                                                                                                                                                           # steps/basic_impl.py:24
03:32:37     When a user queries on the channel ""versioningtest"" using chaincode named ""vt"" with args [""query"",""a""] on ""peer0.org1.example.com""                                                               # steps/endorser_impl.py:466
03:32:44     Then a user receives a success response of 990                                                                                                                                                   # steps/endorser_impl.py:1183
03:32:44       Assertion Failed: Expected response was 990; received 1000
{code}
*Scenario: FAB-8759: Test querying a peer that has two different versions of chaincode - no change in data*
{code:java}
03:52:20     And an admin deploys chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/mapkeys/go"" with args [""init""] with name ""vt"" on channel ""versioningtest""   # steps/endorser_impl.py:143
03:52:49     When a user invokes on the channel ""versioningtest"" using chaincode named ""vt"" with args [""put"",""a"",""1000""] on ""peer0.org2.example.com""                           # steps/endorser_impl.py:634
03:52:54     When a user invokes on the channel ""versioningtest"" using chaincode named ""vt"" with args [""put"",""b"",""2000""] on ""peer0.org1.example.com""                           # steps/endorser_impl.py:634
03:52:59     When a user invokes on the channel ""versioningtest"" using chaincode named ""vt"" with args [""put"",""c"",""3000""] on ""peer1.org1.example.com""                           # steps/endorser_impl.py:634
03:53:04     And I wait ""5"" seconds                                                                                                                                            # steps/basic_impl.py:24
03:53:09     When a user queries on the channel ""versioningtest"" using chaincode named ""vt"" with args [""get"",""a""] on ""peer1.org2.example.com""                                  # steps/endorser_impl.py:466
03:53:23     Then a user receives a success response of ""1000"" from ""peer1.org2.example.com""                                                                                   # steps/endorser_impl.py:1170
03:53:23       Assertion Failed: Expected response was ""1000""; received """"{code}
*Scenario: FAB-7407: Update the channel policies - add an organization*
{code:java}
03:59:09 2019-05-07 07:59:09.700 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 006 Writing new channel tx
03:59:34     And an admin deploys chaincode with args [""init"",""a"",""1000"",""b"",""2000""]                                                                                                        # steps/endorser_impl.py:248
03:59:57     When a user invokes on the chaincode with args [""invoke"",""a"",""b"",""10""]                                                                                                         # steps/endorser_impl.py:678
04:00:01     And I wait ""5"" seconds                                                                                                                                                         # steps/basic_impl.py:24
04:00:06     When a user queries on the chaincode with args [""query"",""a""]                                                                                                                   # steps/endorser_impl.py:550
04:00:10     Then a user receives a success response of 990                                                                                                                                 # steps/endorser_impl.py:1183
04:00:10       Assertion Failed: Expected response was 990; received 1000
04:00:10       
{code}
**At the end of each test scenarios, found IOError: [Errno 11] Resource temporarily unavailable
{code:java}
04:00:10 Traceback (most recent call last):
04:00:10   File ""/usr/local/bin/behave"", line 11, in <module>
04:00:10     sys.exit(main())
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 183, in main
04:00:10     return run_behave(config)
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 127, in run_behave
04:00:10     failed = runner.run()
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 804, in run
04:00:10     return self.run_with_paths()
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 824, in run_with_paths
04:00:10     return self.run_model()
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 626, in run_model
04:00:10     failed = feature.run(self)
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 321, in run
04:00:10     failed = scenario.run(runner)
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 711, in run
04:00:10     if not step.run(runner):
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1379, in run
04:00:10     formatter.result(self)
04:00:10   File ""/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py"", line 151, in result
04:00:10     self.stream.write(indent(step.error_message.strip(), u""      ""))
04:00:10   File ""/usr/lib/python2.7/codecs.py"", line 370, in write
04:00:10     self.stream.write(data)
04:00:10 IOError: [Errno 11] Resource temporarily unavailable
{code}
 

 

 ",,bharadwajambati1,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,FAB-15018,FAB-15241,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mv3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,vijaypunugubati,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"07/May/19 11:02 PM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31254/];;;","30/Jul/19 10:02 AM;vijaypunugubati;*FAB-8379 :* EnableNodeOUs used iin fabric/integration/nwo/standard_networks.go and fabric/integration/e2e/lifecycle/lifecycle_test.go

*FAB-8380 :* This test is covered in future created task FAB-16118.

*FAB-8381:* This test is covered in future created task FAB-16119.

*FAB-8382 :* This test is covered in future created task FAB-16120.

*FAB-8759 :*  ** This test is covered in future created task FAB-16050.

 *FAB-7407 :* covered in test It(""deploys and executes chaincode using _lifecycle and upgrades it"") in fabric/integration/e2e/lifecycle/.

All the failures are addressed;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
msgprocessor sizefilter not taking configuration updates,FAB-15376,39661,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,07/May/19 4:13 PM,19/Jun/19 3:41 PM,28/Oct/23 3:08 AM,04/Jun/19 3:11 PM,v1.4.0,v1.4.1,v2.0.0,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"*The problem*
The orderer/common/msgprocessor package has an array of filters, one of which is sizefilter.go.

The filters are created when a channel is created. The expiration filter and the sigfiilter are given a reference to (filterSupport channelconfig.Resources), which allows them to get what they need via an intermediate call to the StableBundle. That is good. 

In contrast, the sizefilter is given a reference to a OrdereConfig at creation, which allows it to access BatchSize() when evaluating messages. 
When the configuration changes, the sizefilter will remain holding a reference to the configuration that was in effect when the respective channel was created. Subsequent calls will not go through StableBundle(), which means that the filter will not apply new values configured.

*Implications*
- A change to batch-size will not take effect until restart
- A restart to the orderer process will cause the filter to be recreated according to the newest configuration. This means that if the batch-size is updated, and only a subset of orderers are restarted, we end up with two sets of orderers with different batch-size limits. 

In rare conditions this may create a fork: 
- the batch-size is updated, e.g. from 1000 to 2000
- orderer A is restarted, orderer B remains
- A is running with batch-size=2000, B is running with batch-size=1000
- A receives a tx of size 1500 and passes it, after ordering it commits. 
- B receives the tx after ordering, and (*) if the sqn changes, will re-evaluate and reject it => fork
- (*) for the sqn to change the tx mast follow a config-tx that is not yet committed at the time tx is submitted to ordering.

*The fix*
Follow the pattern of sigfilter, OrdererConfig must be retrieved every time a message is evaluated. (~10 lines of code)
",,C0rWin,jyellick,sykesm,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mvb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,sykesm,tock,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
nwo.Components does not reuse binaries when executing parallel tests,FAB-15377,39686,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,sykesm,sykesm,sykesm,07/May/19 10:35 PM,12/Jul/19 7:47 PM,28/Oct/23 3:08 AM,12/Jul/19 7:47 PM,,,,,,,,,,,,,,,,,,,,,,,,0,hygiene,ipm,,,,"Changes made to nwo.Components to defer building binaries that are not needed had the side effect of building needed binaries multiple times across processes.

In particular, the sync.Once for each binary will run once per parallel node as tests execute. That means when begin to run tests in parallel, we will be likely wasting a lot of cycles in the link phase for the binary.

As we don't run most of these tests in parallel right now, this is a low priority item.

/cc [~btl5037]",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pkp:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jul/19 7:44 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32226;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change the PATH to pull java example02 chaincode from fabric-samples,FAB-15378,39692,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,vijaypunugubati,vijaypunugubati,vijaypunugubati,07/May/19 11:50 PM,08/May/19 12:43 AM,28/Oct/23 3:08 AM,08/May/19 12:43 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,"Change the PATH to pull java example02 chaincode from fabric-samples in fabric-ca.feature file and lifestyle.feature file in fabric-test repo. As the folder was changed to abstore in fabric-samples  master branch. The test case is failing to use chaincode.

 ",,bharadwajambati,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n1b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"08/May/19 12:16 AM;vijaypunugubati;[https://gerrit.hyperledger.org/r/#/c/31247/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change pull-binaries target in svt-daily-behave-tests.,FAB-15379,39694,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,vijaypunugubati,vijaypunugubati,vijaypunugubati,08/May/19 12:20 AM,08/May/19 1:01 AM,28/Oct/23 3:08 AM,08/May/19 1:01 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,svt-daily-behave-tests is expecting fabric-ca-client binary along with fabric binaries while running daily behave testsuite.,,bharadwajambati,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n1r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati,scottz,vijaypunugubati,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"08/May/19 12:24 AM;vijaypunugubati;[https://gerrit.hyperledger.org/r/#/c/31256/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing daily test cases in chaincode.feature from fabric-test repo,FAB-15380,39695,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,bharadwajambati1,bharadwajambati1,08/May/19 12:25 AM,30/Jul/19 9:55 AM,28/Oct/23 3:08 AM,30/Jul/19 9:55 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"There are three test scenarios in chaincode.feature from fabric-test repo that are failing a query while running the svt-daily-behave-tests, with the error: `Failed to get state for marble1`. These tests should be first disabled from the daily test suite ([https://gerrit.hyperledger.org/r/#/c/31263/]) and then reenabled later after they are fixed.

*Scenario: FAB-3888: State Transfer Test, bouncing a non-leader peer, using marbles02, for solo orderer*
{code:java}
01:51:26     Then a user receives a success response of {""docType"":""marble"",""name"":""marble1"",""color"":""red"",""size"":35,""owner"":""tom""}                                               # steps/endorser_impl.py:1183
01:51:26       Assertion Failed: Expected response was {""docType"":""marble"",""name"":""marble1"",""color"":""red"",""size"":35,""owner"":""tom""}; received Error occurred ['docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/fcd37b18708b11e9a81afa163eec12f5/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode query --name mycc --ctor \'{\\""Args\\"": [\\""readMarble\\"",\\""marble1\\""]}\' --channelID behavesystest ""']: Error: endorsement failure during query. response: status:500 message:""{\""Error\"":\""Failed to get state for marble1\""}"" {code}
*Scenario: FAB-6256: Test support of rich queries in SHIM API: queryMarbles and queryMarblesByOwner using marbles chaincode on couchdb*
{code:java}
02:57:41     When a user invokes on the chaincode with args [""initMarble"",""marble2"",""red"",""50"",""tom""]                                                              # steps/endorser_impl.py:678
02:57:42     And I wait ""3"" seconds                                                                                                                                # steps/basic_impl.py:24
02:57:45     When a user queries on the chaincode with args [""readMarble"",""marble1""]                                                                               # steps/endorser_impl.py:550
02:57:49     Then a user receives a response containing ""name"":""marble1""                                                                                           # steps/endorser_impl.py:1228
02:57:49       Assertion Failed: Expected response was ""name"":""marble1""; received Error occurred ['docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/3ab4ce88709511e9833cfa163e6920e2/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode query --name mycc --ctor \'{\\""Args\\"": [\\""readMarble\\"",\\""marble1\\""]}\' --channelID behavesystest ""']: Error: endorsement failure during query. response: status:500 message:""{\""Error\"":\""Failed to get state for marble1\""}"" 
02:57:49       {code}
*Scenario: FAB-5791: Test API in SHIM interface using marbles02 and shimApiDriver chaincodes for solo orderer leveldb db GOLANG lang*
{code:java}
03:19:57     When a user invokes on the chaincode named ""mycc"" with args [""initMarble"",""marble111"",""pink"",""55"",""jane""]                                                            # steps/endorser_impl.py:702
03:19:59     And I wait ""5"" seconds                                                                                                                                               # steps/basic_impl.py:24
03:20:04     When a user queries on the chaincode named ""mycc"" with args [""readMarble"",""marble1""]                                                                                 # steps/endorser_impl.py:510
03:20:07     Then a user receives a response containing ""docType"":""marble""                                                                                                        # steps/endorser_impl.py:1228
03:20:07       Assertion Failed: Expected response was ""docType"":""marble""; received Error occurred ['docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/44a630c8709811e9bc26fa163ee587e3/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode query --name mycc --ctor \'{\\""Args\\"": [\\""readMarble\\"",\\""marble1\\""]}\' --channelID behavesystest ""']: Error: endorsement failure during query. response: status:500 message:""{\""Error\"":\""Failed to get state for marble1\""}"" 
03:20:07       
03:20:07       Captured stdout:
03:20:07       test 44a630c8709811e9bc26fa163ee587e3 already exists!!!
{code}
At the end of each test scenarios, found IOError: [Errno 11] Resource temporarily unavailable
{code:java}
Skipping. [stat /var/hyperledger/configs/44a630c8709811e9bc26fa163ee587e3/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp/tlsintException IOError: [Errno 11] Resource temporarily unavailable
03:20:07 Traceback (most recent call last):
03:20:07   File ""/usr/local/bin/behave"", line 11, in <module>
03:20:07     sys.exit(main())
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 183, in main
03:20:07     return run_behave(config)
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/__main__.py"", line 127, in run_behave
03:20:07     failed = runner.run()
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 804, in run
03:20:07     return self.run_with_paths()
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 824, in run_with_paths
03:20:07     return self.run_model()
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/runner.py"", line 626, in run_model
03:20:07     failed = feature.run(self)
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 321, in run
03:20:07     failed = scenario.run(runner)
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1114, in run
03:20:07     failed = scenario.run(runner)
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 711, in run
03:20:07     if not step.run(runner):
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1379, in run
03:20:07     formatter.result(self)
03:20:07   File ""/usr/local/lib/python2.7/dist-packages/behave/formatter/pretty.py"", line 151, in result
03:20:07     self.stream.write(indent(step.error_message.strip(), u""      ""))
03:20:07   File ""/usr/lib/python2.7/codecs.py"", line 370, in write
03:20:07     self.stream.write(data)
03:20:07 IOError: [Errno 11] Resource temporarily unavailable
{code}
                                                                                    
*Scenario:* FAB-4703: FAB-5663, Test chaincode calling chaincode - fabric-test/chaincodes/example04/go/cmd
{code:java}
/00:09:20.890     When an admin sets up a channel                                                                                                                                                             # steps/endorser_impl.py:63
00:09:20.932 2019-05-07 19:48:03.958 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
00:09:21.170 2019-05-07 19:48:04.196 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/configs/f91b76a4710011e9af2dfa163ecb59a2/configtx.yaml
00:09:21.400 2019-05-07 19:48:04.425 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
00:09:21.400 2019-05-07 19:48:04.426 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 004 Loaded configuration: /w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/configs/f91b76a4710011e9af2dfa163ecb59a2/configtx.yaml
00:09:21.400 2019-05-07 19:48:04.426 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 005 Generating new channel configtx
00:09:21.406 2019-05-07 19:48:04.433 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 006 Writing new channel tx
00:09:55.057     And an admin deploys chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example04/go/cmd"" with args [""init"",""Event"",""1""] with name ""myex04""                                   # steps/endorser_impl.py:155
00:11:10.140       Assertion Failed: The expected chaincode container f91b76a4710011e9af2dfa163ecb59a2-peer0.org1.example.com-myex04-0 is not running
00:1/ code placeholder
{code}
*Scenario:* FAB-4717: FAB-5663, chaincode-to-chaincode testing passing in channel name as a third argument to chaincode_ex05 when cc_05 and cc_02 are on different channels 
{code:java}
/(kafka.coordinator.transaction.TransactionCoordinator)
00:09:56.478     When an admin sets up a channel                                                                                                                                                             # steps/endorser_impl.py:63
00:09:56.534 2019-05-07 22:20:58.944 UTC [common.tools.configtxgen] main -> INFO 001 Loading configuration
00:09:56.779 2019-05-07 22:20:59.190 UTC [common.tools.configtxgen.localconfig] Load -> INFO 002 Loaded configuration: /w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/configs/5453e096711611e987f9fa163e2a866c/configtx.yaml
00:09:57.029 2019-05-07 22:20:59.439 UTC [common.tools.configtxgen.localconfig] completeInitialization -> INFO 003 orderer type: solo
00:09:57.029 2019-05-07 22:20:59.440 UTC [common.tools.configtxgen.localconfig] LoadTopLevel -> INFO 004 Loaded configuration: /w/workspace/fabric-test-daily-behave-master-x86_64_1/gopath/src/github.com/hyperledger/fabric-test/feature/configs/5453e096711611e987f9fa163e2a866c/configtx.yaml
00:09:57.029 2019-05-07 22:20:59.440 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 005 Generating new channel configtx
00:09:57.036 2019-05-07 22:20:59.447 UTC [common.tools.configtxgen] doOutputChannelCreateTx -> INFO 006 Writing new channel tx
00:10:33.157     And an admin deploys chaincode at path ""github.com/hyperledger/fabric-test/chaincodes/example05/go/cmd"" with args [""init"",""sum"",""0""] with name ""myex05""                                     # steps/endorser_impl.py:155
00:11:49.991       Assertion Failed: The expected chaincode container 5453e096711611e987f9fa163e2a866c-peer0.org1.example.com-myex05-0 is not running/ code placeholder
{code}
 ",,bharadwajambati1,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,FAB-15018,FAB-15241,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n1z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,vijaypunugubati,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"08/May/19 1:45 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31263/];;;","08/May/19 7:28 AM;vijaypunugubati;This CR disable the chaincode-to-chaincode tests failing in Behave test while using chaincode example04 and chaincode_ex05 on different channels.

[https://gerrit.hyperledger.org/r/#/c/31273/] ;;;","17/May/19 2:46 AM;bharadwajambati1;Enabled tests related to chaincode path. It's the fix for the above comment

[https://gerrit.hyperledger.org/r/#/c/31389/];;;","30/Jul/19 9:55 AM;vijaypunugubati;*FAB-3888 :* Refer to Gossip tests and release system test, so this test case can be ignored.

*FAB-6256 :* Covered by new test-case FAB-15894 .

*FAB-5791 :* These behave tests are for older chaincode shim. The fabric/core/chaincode/shim/ contains tests for current shim.

*FAB-4703 :* This test is incorporated in integration/e2e/lifecycle/interop_test.go

*+FAB-5663 ,+ FAB-4717:* This test is referred to new task FAB-15903 which covers the test case.

*FAB-5663 :* This just tests the chaincode_ex05 function as it handles args (chan arg empty string / default to use value for current same chan), and so we can skip this.

 

All the errors on the above test scenarios are addressed. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use dynamic linking by default for golang chaincode,FAB-15381,39696,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,08/May/19 12:28 AM,09/May/19 4:23 AM,28/Oct/23 3:08 AM,09/May/19 4:23 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ipg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/May/19 12:34 AM;sykesm;https://gerrit.hyperledger.org/r/31257 [FAB-15381] dynamic linking by default in go cc;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename cclifecycle.Lifecycle to MetadataManager,FAB-15382,39698,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,08/May/19 1:14 AM,18/May/19 12:34 AM,28/Oct/23 3:08 AM,18/May/19 12:34 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Rename to reflect what the struct is used for. ,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2n:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Failing TLS tests in Behave orderer.feature,FAB-15383,39699,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,vijaypunugubati,vijaypunugubati,vijaypunugubati,08/May/19 1:22 AM,08/May/19 1:51 AM,28/Oct/23 3:08 AM,08/May/19 1:51 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,Disabling TLS for the test scenarios in orderer.feature from fabric-test repo while running the svt-daily-behavesuite.,,bharadwajambati,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15369,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/19 1:27 AM;vijaypunugubati;[https://gerrit.hyperledger.org/r/#/c/31262/];;;","08/May/19 1:51 AM;vijaypunugubati;Working as expected;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Incorrect path for enccc_example in chaincode.feature,FAB-15384,39700,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,bharadwajambati1,bharadwajambati1,08/May/19 1:48 AM,08/May/19 2:06 AM,28/Oct/23 3:08 AM,08/May/19 2:06 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"For the following scenarios, the enccc_example chaincode path is incorrect

*Scenario1:* FAB-6439: Test chaincode enccc_example.go which uses encshim library extensions for <type> orderer

*Scenario2:* FAB-6650: Test chaincode enccc_example.go negative scenario, passing in bad ENCRYPTION(ENC), IV, and SIGNATURE(SIG) KEYS",,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n33:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"08/May/19 1:59 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31265/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up Raft integration test,FAB-15385,39701,38844,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,guoger,guoger,08/May/19 1:50 AM,02/Dec/19 5:20 PM,28/Oct/23 3:08 AM,02/Dec/19 5:20 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"address [review comments|https://gerrit.hyperledger.org/r/c/31219/9#message-84f902aa_a17d3266]

https://gerrit.hyperledger.org/r/c/fabric/+/31523/1/integration/raft/cft_test.go#367",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n3b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Dec/19 5:20 PM;guoger;Raft tests have been moved to its own pkg;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add an ability to customize capabilities in the integration tests,FAB-15386,39702,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,yacovm,yacovm,08/May/19 5:20 AM,08/Jun/19 1:16 AM,28/Oct/23 3:08 AM,08/Jun/19 1:16 AM,,,,,,,,,,,,,,,,,,fabric-common,,,,,,0,,,,,,"Currently we can only have a single fabric version level (capability version) in all integration tests via controlling the configtx_template.go.

Ideally we will have an ability to spin a test instance, and toggle the capability level we want, and have the original configtx_template in some least common level, such as 1.4.1 or so. 

[~sykesm] ",,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15524,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n3j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jun/19 11:32 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31743 [FAB-15386] profile can specify chan capabilities;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TLS handshake failed with error,FAB-15387,39704,,Bug,Returned,FAB,Fabric,software,denyeart,,,Medium,,,hieu29791,hieu29791,08/May/19 3:54 PM,01/Jan/21 5:42 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ipm,,,,,"Hi,

When upgrade version from 1.3 to 1.4, orderer show some error log like this: *TLS handshake failed with error EOF server=Orderer remoteaddress=192.168.86.19:17801.* I tested some functions and it works normally.

Step to reproduce:
 # Update kafka, zookeeper to 0.4.15
 # Update orderer from to 1.4
 # Update peer,ca  from to 1.4 
!error.PNG!
Could you help me to figure out the problem? In the 1.3 version, everything working fine, ",,hieu29791,jyellick,samwood,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/May/19 3:53 PM;hieu29791;error.PNG;https://jira.hyperledger.org/secure/attachment/17215/error.PNG",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mth:4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hieu29791,jyellick,samwood,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jun/19 12:00 AM;jyellick;This seems like something is connecting on the port, then disconnecting before completing the handshake.  Are the log messages correlated with anything being performed on the network?;;;","30/Dec/20 5:22 AM;samwood;We see this as well although it doesn't disrupt any operations in the network. We suspect it's a misconfigured tcp health check that terminates the connection immediately, but we haven't pinpointed the source. ;;;","01/Jan/21 5:42 AM;samwood;Indeed, in our case we narrowed down these EOFs to a AWS NLB that defaults to TCP health checks against the peer serving TLS.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"OU support for admins: As a Fabric deployer or administrator, I want to specify an OU to identify adminstrators",FAB-15388,39710,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,angelo.decaro,mastersingh24,mastersingh24,08/May/19 8:52 PM,03/Dec/19 1:40 AM,28/Oct/23 3:08 AM,03/Dec/19 1:40 AM,,,,,,,,,,,,,,v1.4.3,v2.0.0,,,,,,,,,0,Usability,,,,,"Currently, admins are identified by explicit X509 certificates.
The X509 MSP already has the ability to set NodeOUs to identify client and peer roles.
We should also allow an OU to be used to identity admins as well.

For ""local"" MSPs, this should simply require the customer to upgrade the peer; I do not believe we need to hide this behind a capability.

For channel MSPs, we will need to hide this behind a capability.",,angelo.decaro,denyeart,joaquimpedrooliveira,mastersingh24,nnao,siddjain,sykesm,ymlbright,,,,,,,,,,,,,,,,,,,,,FAB-15639,,,,,,,,,FAB-7469,,,,,FABC-525,,,,,FABC-849,FAB-12620,FAB-5664,FAB-16344,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00n5b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,joaquimpedrooliveira,mastersingh24,nnao,siddjain,sykesm,ymlbright,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/May/19 1:49 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/31340/;;;","28/Jun/19 1:12 AM;sykesm;I understand, support, and desire the feature described by this story. That said, I don’t understand the “fork MSP implementation” sub-task.

I’d really like to understand why a complete clone of the MSP is the path forward and why we think it’s a good thing to duplicate n fabric subsystems as we try to evolve them.  I can understand that as a fallback when there there are fragile behaviors that we wish to abandon.;;;","02/Jul/19 6:41 AM;denyeart;[~ales] [~angelo.decaro] [~jyellick]
Could you help drive this one to completion in v1.4.2 this week?  If not complete this week we should consider deferring from v1.4.2.
We decided not to do the broader refactor/fork that was discussed in release-1.4 branch.

[~angelo.decaro] Also see the linked Jiras...
Could the node OU support for orderer also be added?
Could you work on cryptogen and CA support as well? Or do you think not essential for v1.4.2?;;;","17/Jul/19 1:49 AM;denyeart;Unfortunately this didn't get the required reviews/tests before the v1.4.2 freeze, deferred to v1.4.3.;;;","24/Oct/19 3:33 AM;siddjain;I am trying to understand rationale of this task. Doesn't Fabric currently identify administrators by checking if the cert of the caller matches one of the certs stored in the `admincerts` folder in the msp dir? If so, wouldn't there be a conflict and overlap in identifying administrators if the admins are now identified depending if the caller has `OU=admin` set in their X.509 cert (as this task suggests). Maybe I am missing something?;;;","24/Oct/19 5:53 AM;siddjain;I think I got the answer to my question here: https://jira.hyperledger.org/browse/FAB-16376;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Endorsing peer is not honoring maxPeerCount for private data dissemination,FAB-15389,39711,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,caod,denyeart,denyeart,08/May/19 9:17 PM,25/Feb/20 12:14 PM,28/Oct/23 3:08 AM,09/Nov/19 9:58 PM,v1.4.1,v1.4.2,v1.4.3,,,,,,,,,,,v1.4.4,v2.0.0,,,fabric-gossip,fabric-ledger,,,,,0,,,,,," Using the private data tutorial:

[https://hyperledger-fabric.readthedocs.io/en/release-1.4/private_data_tutorial.html#store-private-data]

With collection maxPeerCount of 3:

[https://github.com/hyperledger/fabric-samples/blob/release-1.4/chaincode/marbles02_private/collections_config.json#L6]

In v1.4.0 the org1 endorsing peer distributes the private data to the 3 other peers as expected.

In v1.4.1 the org1 endorsing peer distributes the private data only to 2 other peers (one to org1, one to org2). One of the org2 peers does not get the private data at endorsement time.  It has to pull the private data at commit time:
{code:java}
2019-05-07 21:28:01.994 UTC [gossip.privdata] StoreBlock -> INFO 0ba [mychannel] Fetched all missing collection private write sets from remote peers for block [4] (8ms){code}
Why is the endorsing peer not distributing to 3 other peers per the collection policy?

Note that the endorsing peer does have all 3 peers in its gossip network:
{code:java}
2019-05-07 21:27:18.480 UTC [gossip.channel] reportMembershipChanges -> INFO 085 Membership view has changed. peers went online: [[peer0.org2.example.com:9051 ] [peer1.org2.example.com:10051 ]] , current view: [[peer1.org1.example.com:8051] [peer0.org2.example.com:9051 ] [peer1.org2.example.com:10051 ]]{code}
I noticed there is no gossip debug around dissemination. That should be added as well to help troubleshoot these issues.",,caod,denyeart,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12982,,,,FAB-17523,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz6k",,Yes,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),caod,denyeart,jyellick,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,release-2.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Sep/19 11:13 PM;jyellick;[~C0rWin] any updates on this? [~yacovm] any insights?;;;","05/Nov/19 1:12 AM;denyeart;Since Artem is busy we'll have Danny work on this one now.

Looks like it was caused by FAB-12982 in v1.4.1 (and master).;;;","05/Nov/19 1:36 AM;caod;I attempted to reproduce the error with latest 1.4 but wasn't able to reproduce with the tutorial:

After storing private data as peer0.org1 I see the following logs on the other peers

peer1.org1:
{code:java}
2019-11-04 16:17:26.099 UTC [gossip.state] listen -> DEBU 3768c Dispatching a message GossipMessage: nonce:15248119270143486742 channel:""mychannel"" tag:CHAN_ONLY private_data:<payload:<collection_name:""collectionMarbles"" namespace:""marblesp"" tx_id:""df7788b87e9bfbd34f7689226c9dfed839199e583be6fe9e3677a806dcf2b37c"" private_rwset:""\032\036\n\031\000color~name\000blue\000marble1\000\032\001\000\032W\n\007marble1\032L{\""docType\"":\""marble\"",\""name\"":\""marble1\"",\""color\"":\""blue\"",\""size\"":35,\""owner\"":\""tom\""}"" private_sim_height:6 collection_configs:<config:<static_collection_config:<name:""collectionMarbles"" member_orgs_policy:<signature_policy:<rule:<n_out_of:<n:1 rules:<signed_by:0 > rules:<signed_by:1 > > > identities:<principal:""\n\007Org1MSP"" > identities:<principal:""\n\007Org2MSP"" > > > maximum_peer_count:3 block_to_live:1000000 member_only_read:true > > > > > , Envelope: 328 bytes, Signature: 0 bytes
2019-11-04 16:17:26.099 UTC [gossip.state] dispatch -> DEBU 3768d Handling private data collection message
2019-11-04 16:17:26.103 UTC [gossip.state] listen -> DEBU 376b9 Dispatching a message GossipMessage: nonce:10121211505448111222 channel:""mychannel"" tag:CHAN_ONLY private_data:<payload:<collection_name:""collectionMarblePrivateDetails"" namespace:""marblesp"" tx_id:""df7788b87e9bfbd34f7689226c9dfed839199e583be6fe9e3677a806dcf2b37c"" private_rwset:""\032I\n\007marble1\032>{\""docType\"":\""marblePrivateDetails\"",\""name\"":\""marble1\"",\""price\"":99}"" private_sim_height:6 collection_configs:<config:<static_collection_config:<name:""collectionMarblePrivateDetails"" member_orgs_policy:<signature_policy:<rule:<n_out_of:<n:1 rules:<signed_by:0 > > > identities:<principal:""\n\007Org1MSP"" > > > maximum_peer_count:3 block_to_live:3 member_only_read:true > > > > > , Envelope: 289 bytes, Signature: 0 bytes
2019-11-04 16:17:26.103 UTC [gossip.state] dispatch -> DEBU 376ba Handling private data collection message
2019-11-04 16:17:26.108 UTC [gossip.state] privateDataMessage -> DEBU 376bc Private data for collection collectionMarbles has been stored
2019-11-04 16:17:26.110 UTC [gossip.state] privateDataMessage -> DEBU 376bd Private data for collection collectionMarblePrivateDetails has been stored
2019-11-04 16:17:26.115 UTC [gossip.state] listen -> DEBU 376e8 Dispatching a message GossipMessage: nonce:15627431509882369548 channel:""mychannel"" tag:CHAN_ONLY private_data:<payload:<collection_name:""collectionMarblePrivateDetails"" namespace:""marblesp"" tx_id:""df7788b87e9bfbd34f7689226c9dfed839199e583be6fe9e3677a806dcf2b37c"" private_rwset:""\032I\n\007marble1\032>{\""docType\"":\""marblePrivateDetails\"",\""name\"":\""marble1\"",\""price\"":99}"" private_sim_height:6 collection_configs:<config:<static_collection_config:<name:""collectionMarblePrivateDetails"" member_orgs_policy:<signature_policy:<rule:<n_out_of:<n:1 rules:<signed_by:0 > > > identities:<principal:""\n\007Org1MSP"" > > > maximum_peer_count:3 block_to_live:3 member_only_read:true > > > > > , Envelope: 289 bytes, Signature: 0 bytes
2019-11-04 16:17:26.115 UTC [gossip.state] dispatch -> DEBU 376e9 Handling private data collection message
2019-11-04 16:17:26.122 UTC [gossip.state] privateDataMessage -> DEBU 376eb Private data for collection collectionMarblePrivateDetails has been stored
2019-11-04 16:17:28.144 UTC [peer.gossip.mcs] VerifyBlock -> DEBU 37811 Got policy manager for channel [mychannel] with flag [true]
2019-11-04 16:17:28.144 UTC [peer.gossip.mcs] VerifyBlock -> DEBU 37812 Got block validation policy for channel [mychannel] with flag [true]
2019-11-04 16:17:28.146 UTC [gossip.state] addPayload -> DEBU 37823 [mychannel] Adding payload to local buffer, blockNum = [6]
2019-11-04 16:17:28.146 UTC [gossip.state] addPayload -> DEBU 37824 Blocks payloads buffer size for channel [mychannel] is 1 blocks
2019-11-04 16:17:28.146 UTC [gossip.state] deliverPayloads -> DEBU 37825 [mychannel] Ready to transfer payloads (blocks) to the ledger, next block number is = [6]
2019-11-04 16:17:28.146 UTC [gossip.state] deliverPayloads -> DEBU 37826 [mychannel] Transferring block [6] with 1 transaction(s) to the ledger
2019-11-04 16:17:28.146 UTC [gossip.privdata] StoreBlock -> INFO 37827 [mychannel] Received block [6] from buffer
2019-11-04 16:17:28.146 UTC [gossip.privdata] StoreBlock -> DEBU 37828 [mychannel] Validating block [6]
2019-11-04 16:17:28.147 UTC [gossip.channel] AddToMsgStore -> DEBU 37833 Adding GossipMessage: Channel: mychannel, nonce: 0, tag: CHAN_AND_ORG Block message: {Data: 4369 bytes, seq: 6}, Envelope: 4393 bytes, Signature: 0 bytes to the block puller
2019-11-04 16:17:28.147 UTC [gossip.pull] Add -> DEBU 37834 Added 6, total items: 2
2019-11-04 16:17:28.176 UTC [gossip.privdata] listMissingPrivateData -> DEBU 378a3 Retrieving private write sets for 1 transactions from transient store
2019-11-04 16:17:28.191 UTC [gossip.privdata] StoreBlock -> DEBU 378ad [mychannel] No missing collection private write sets to fetch from remote peers
2019-11-04 16:17:28.191 UTC [gossip.privdata] StoreBlock -> DEBU 378ae [mychannel] Added 1 namespace private write sets for block [6], tran [0]
2019-11-04 16:17:28.238 UTC [gossip.state] commitBlock -> DEBU 37951 [mychannel] Committed block [6] with 1 transaction(s)
2019-11-04 16:22:59.133 UTC [gossip.channel] func3 -> DEBU 4463a Removing 5 from the message store
2019-11-04 16:22:59.133 UTC [gossip.pull] Remove -> DEBU 4463b Removed 5, total items: 1
2019-11-04 16:24:11.088 UTC [gossip.channel] func3 -> DEBU 472d2 Removing 6 from the message store
2019-11-04 16:24:11.089 UTC [gossip.pull] Remove -> DEBU 472d3 Removed 6, total items: 0
{code}
peer0.org2:
{code:java}
2019-11-04 16:17:26.113 UTC [gossip.state] listen -> DEBU 49702 Dispatching a message GossipMessage: nonce:5139539834814862229 channel:""mychannel"" tag:CHAN_ONLY private_data:<payload:<collection_name:""collectionMarbles"" namespace:""marblesp"" tx_id:""df7788b87e9bfbd34f7689226c9dfed839199e583be6fe9e3677a806dcf2b37c"" private_rwset:""\032\036\n\031\000color~name\000blue\000marble1\000\032\001\000\032W\n\007marble1\032L{\""docType\"":\""marble\"",\""name\"":\""marble1\"",\""color\"":\""blue\"",\""size\"":35,\""owner\"":\""tom\""}"" private_sim_height:6 collection_configs:<config:<static_collection_config:<name:""collectionMarbles"" member_orgs_policy:<signature_policy:<rule:<n_out_of:<n:1 rules:<signed_by:0 > rules:<signed_by:1 > > > identities:<principal:""\n\007Org1MSP"" > identities:<principal:""\n\007Org2MSP"" > > > maximum_peer_count:3 block_to_live:1000000 member_only_read:true > > > > > , Envelope: 327 bytes, Signature: 0 bytes
2019-11-04 16:17:26.113 UTC [gossip.state] dispatch -> DEBU 49703 Handling private data collection message
2019-11-04 16:17:26.121 UTC [gossip.state] privateDataMessage -> DEBU 49705 Private data for collection collectionMarbles has been stored
2019-11-04 16:17:28.144 UTC [peer.gossip.mcs] VerifyBlock -> DEBU 4976b Got policy manager for channel [mychannel] with flag [true]
2019-11-04 16:17:28.145 UTC [peer.gossip.mcs] VerifyBlock -> DEBU 4976c Got block validation policy for channel [mychannel] with flag [true]
2019-11-04 16:17:28.147 UTC [gossip.state] addPayload -> DEBU 4977d [mychannel] Adding payload to local buffer, blockNum = [6]
2019-11-04 16:17:28.147 UTC [gossip.state] addPayload -> DEBU 4977e Blocks payloads buffer size for channel [mychannel] is 1 blocks
2019-11-04 16:17:28.147 UTC [gossip.channel] AddToMsgStore -> DEBU 49780 Adding GossipMessage: Channel: mychannel, nonce: 0, tag: CHAN_AND_ORG Block message: {Data: 4369 bytes, seq: 6}, Envelope: 4393 bytes, Signature: 0 bytes to the block puller
2019-11-04 16:17:28.147 UTC [gossip.pull] Add -> DEBU 49781 Added 6, total items: 2
2019-11-04 16:17:28.147 UTC [gossip.state] deliverPayloads -> DEBU 49782 [mychannel] Ready to transfer payloads (blocks) to the ledger, next block number is = [6]
2019-11-04 16:17:28.147 UTC [gossip.state] deliverPayloads -> DEBU 49783 [mychannel] Transferring block [6] with 1 transaction(s) to the ledger
2019-11-04 16:17:28.147 UTC [gossip.privdata] StoreBlock -> INFO 49784 [mychannel] Received block [6] from buffer
2019-11-04 16:17:28.147 UTC [gossip.privdata] StoreBlock -> DEBU 49785 [mychannel] Validating block [6]
2019-11-04 16:17:28.180 UTC [gossip.privdata] isEligible -> DEBU 497dc Skipping namespace marblesp collection collectionMarblePrivateDetails because we're not eligible for the private data
2019-11-04 16:17:28.180 UTC [gossip.privdata] inspectTransaction -> DEBU 497dd Peer is not eligible for collection, channel [mychannel], chaincode [marblesp], collection name [collectionMarblePrivateDetails], txID [df7788b87e9bfbd34f7689226c9dfed839199e583be6fe9e3677a806dcf2b37c] the policy is [&privdata.SimpleCollection{name:""collectionMarblePrivateDetails"", accessPolicy:(*cauthdsl.policy)(0xc0042b0f20), memberOrgs:[]string{""Org1MSP""}, conf:common.StaticCollectionConfig{Name:""collectionMarblePrivateDetails"", MemberOrgsPolicy:(*common.CollectionPolicyConfig)(0xc00257c270), RequiredPeerCount:0, MaximumPeerCount:3, BlockToLive:0x3, MemberOnlyRead:true, XXX_NoUnkeyedLiteral:struct {}{}, XXX_unrecognized:[]uint8(nil), XXX_sizecache:0}}]. Skipping.
2019-11-04 16:17:28.185 UTC [gossip.privdata] listMissingPrivateData -> DEBU 497ee Retrieving private write sets for 1 transactions from transient store
2019-11-04 16:17:28.186 UTC [gossip.privdata] StoreBlock -> DEBU 497f1 [mychannel] No missing collection private write sets to fetch from remote peers
2019-11-04 16:17:28.186 UTC [gossip.privdata] StoreBlock -> DEBU 497f2 [mychannel] Added 1 namespace private write sets for block [6], tran [0]
2019-11-04 16:17:28.240 UTC [gossip.state] commitBlock -> DEBU 4986e [mychannel] Committed block [6] with 1 transaction(s)
2019-11-04 16:22:58.342 UTC [gossip.channel] func3 -> DEBU 5aef4 Removing 5 from the message store
2019-11-04 16:22:58.344 UTC [gossip.pull] Remove -> DEBU 5aef5 Removed 5, total items: 1
2019-11-04 16:24:10.266 UTC [gossip.channel] func3 -> DEBU 5ea9e Removing 6 from the message store
2019-11-04 16:24:10.266 UTC [gossip.pull] Remove -> DEBU 5ea9f Removed 6, total items: 0
{code}
peer1.org2:
{code:java}
2019-11-04 16:17:26.099 UTC [gossip.state] listen -> DEBU 42d51 Dispatching a message GossipMessage: nonce:4768890065711492980 channel:""mychannel"" tag:CHAN_ONLY private_data:<payload:<collection_name:""collectionMarbles"" namespace:""marblesp"" tx_id:""df7788b87e9bfbd34f7689226c9dfed839199e583be6fe9e3677a806dcf2b37c"" private_rwset:""\032\036\n\031\000color~name\000blue\000marble1\000\032\001\000\032W\n\007marble1\032L{\""docType\"":\""marble\"",\""name\"":\""marble1\"",\""color\"":\""blue\"",\""size\"":35,\""owner\"":\""tom\""}"" private_sim_height:6 collection_configs:<config:<static_collection_config:<name:""collectionMarbles"" member_orgs_policy:<signature_policy:<rule:<n_out_of:<n:1 rules:<signed_by:0 > rules:<signed_by:1 > > > identities:<principal:""\n\007Org1MSP"" > identities:<principal:""\n\007Org2MSP"" > > > maximum_peer_count:3 block_to_live:1000000 member_only_read:true > > > > > , Envelope: 327 bytes, Signature: 0 bytes 2019-11-04 16:17:26.099 UTC [gossip.state] dispatch -> DEBU 42d52 Handling private data collection message 2019-11-04 16:17:26.118 UTC [gossip.state] privateDataMessage -> DEBU 42d54 Private data for collection collectionMarbles has been stored 2019-11-04 16:17:28.154 UTC [peer.gossip.mcs] VerifyBlock -> DEBU 42e37 Got policy manager for channel [mychannel] with flag [true] 2019-11-04 16:17:28.154 UTC [peer.gossip.mcs] VerifyBlock -> DEBU 42e38 Got block validation policy for channel [mychannel] with flag [true] 2019-11-04 16:17:28.155 UTC [gossip.pull] Add -> DEBU 42e49 Added 6, total items: 2 2019-11-04 16:17:28.155 UTC [gossip.state] listen -> DEBU 42e4b Received new message via gossip channel 2019-11-04 16:17:28.155 UTC [gossip.state] addPayload -> DEBU 42e4c [mychannel] Adding payload to local buffer, blockNum = [6] 2019-11-04 16:17:28.155 UTC [gossip.state] addPayload -> DEBU 42e4d Blocks payloads buffer size for channel [mychannel] is 1 blocks 2019-11-04 16:17:28.155 UTC [gossip.state] deliverPayloads -> DEBU 42e4e [mychannel] Ready to transfer payloads (blocks) to the ledger, next block number is = [6] 2019-11-04 16:17:28.155 UTC [gossip.state] deliverPayloads -> DEBU 42e4f [mychannel] Transferring block [6] with 1 transaction(s) to the ledger 2019-11-04 16:17:28.155 UTC [gossip.privdata] StoreBlock -> INFO 42e50 [mychannel] Received block [6] from buffer 2019-11-04 16:17:28.155 UTC [gossip.privdata] StoreBlock -> DEBU 42e51 [mychannel] Validating block [6] 2019-11-04 16:17:28.189 UTC [gossip.privdata] isEligible -> DEBU 42ee5 Skipping namespace marblesp collection collectionMarblePrivateDetails because we're not eligible for the private data 2019-11-04 16:17:28.189 UTC [gossip.privdata] inspectTransaction -> DEBU 42ee6 Peer is not eligible for collection, channel [mychannel], chaincode [marblesp], collection name [collectionMarblePrivateDetails], txID [df7788b87e9bfbd34f7689226c9dfed839199e583be6fe9e3677a806dcf2b37c] the policy is [&privdata.SimpleCollection{name:""collectionMarblePrivateDetails"", accessPolicy:(*cauthdsl.policy)(0xc008fd8580), memberOrgs:[]string{""Org1MSP""}, conf:common.StaticCollectionConfig{Name:""collectionMarblePrivateDetails"", MemberOrgsPolicy:(*common.CollectionPolicyConfig)(0xc008fc1110), RequiredPeerCount:0, MaximumPeerCount:3, BlockToLive:0x3, MemberOnlyRead:true, XXX_NoUnkeyedLiteral:struct {}{}, XXX_unrecognized:[]uint8(nil), XXX_sizecache:0}}]. Skipping. 2019-11-04 16:17:28.199 UTC [gossip.privdata] listMissingPrivateData -> DEBU 42ef7 Retrieving private write sets for 1 transactions from transient store 2019-11-04 16:17:28.200 UTC [gossip.privdata] StoreBlock -> DEBU 42efa [mychannel] No missing collection private write sets to fetch from remote peers 2019-11-04 16:17:28.200 UTC [gossip.privdata] StoreBlock -> DEBU 42efb [mychannel] Added 1 namespace private write sets for block [6], tran [0] 2019-11-04 16:17:28.235 UTC [gossip.state] commitBlock -> DEBU 42f38 [mychannel] Committed block [6] with 1 transaction(s) 2019-11-04 16:22:57.428 UTC [gossip.channel] func3 -> DEBU 52dc4 Removing 5 from the message store 2019-11-04 16:22:57.430 UTC [gossip.pull] Remove -> DEBU 52dc5 Removed 5, total items: 1 2019-11-04 16:24:09.349 UTC [gossip.channel] func3 -> DEBU 56511 Removing 6 from the message store 2019-11-04 16:24:09.349 UTC [gossip.pull] Remove -> DEBU 56512 Removed 6, total items: 0
{code}
Looks like all 3 peers have the lines
{code:java}
2019-11-04 16:17:26.099 UTC [gossip.state] dispatch -> DEBU 42d52 Handling private data collection message
2019-11-04 16:17:26.118 UTC [gossip.state] privateDataMessage -> DEBU 42d54 Private data for collection collectionMarbles has been stored
{code}
with peer1.org1 having the collection name as `collectionMarblesPrivateDetails` seeming to indicate dissemination was successful to all 3 peers;;;","05/Nov/19 2:00 AM;denyeart;Strange, I'm still seeing that peer1.org2 doesn't get the private data at endorsement time:
{code:java}
2019-11-04 16:52:21.235 UTC [transientstore] GetTxPvtRWSetByTxid -> DEBU 0f3 Getting private data from transient store for transaction 8ab12dd04ef76de9aa738c64a91c74e9a45dbe4b5eaaf69b342e6233028f3ec2
2019-11-04 16:52:21.235 UTC [gossip.privdata] StoreBlock -> DEBU 0f4 [mychannel] Could not find all collection private write sets in local peer transient store for block [6].
2019-11-04 16:52:21.235 UTC [gossip.privdata] StoreBlock -> DEBU 0f5 [mychannel] Fetching 1 collection private write sets from remote peers for a maximum duration of 1m0s
2019-11-04 16:52:21.236 UTC [gossip.privdata] func1 -> DEBU 0f6 Fetching {8ab12dd04ef76de9aa738c64a91c74e9a45dbe4b5eaaf69b342e6233028f3ec2 0 marblesp collectionMarbles 6c6c363ba4824671dbb0f7ed703367a7c6d04733bb0e7b5c5ad4aa60bbbcac70} from peers
2019-11-04 16:52:21.236 UTC [gossip.privdata] fetchPrivateData -> DEBU 0f7 Total members in channel: [Endpoint: peer0.org2.example.com:9051, InternalEndpoint: peer0.org2.example.com:9051, PKI-ID: ddbd77574bb56224920028ba607cc3bdd15ebb8c767a47a66b55fcf725a01346, Metadata: Endpoint: peer0.org1.example.com:7051, InternalEndpoint: , PKI-ID: c2821cb13053978bae2c2676e3c98b08a28a026e1886ebfc7d41d3bcabdc3eb9, Metadata: Endpoint: peer1.org1.example.com:8051, InternalEndpoint: , PKI-ID: f9f0a631cbfe88e72d1ea59e78dd4925c8f9dc1716f42d867ee34c7c0368508c, Metadata: ]
2019-11-04 16:52:21.239 UTC [gossip.privdata] fetchPrivateData -> DEBU 0f8 Total members that fit some digest: [Endpoint: peer0.org2.example.com:9051, InternalEndpoint: peer0.org2.example.com:9051, PKI-ID: ddbd77574bb56224920028ba607cc3bdd15ebb8c767a47a66b55fcf725a01346, Metadata: Endpoint: peer0.org1.example.com:7051, InternalEndpoint: , PKI-ID: c2821cb13053978bae2c2676e3c98b08a28a026e1886ebfc7d41d3bcabdc3eb9, Metadata: Endpoint: peer1.org1.example.com:8051, InternalEndpoint: , PKI-ID: f9f0a631cbfe88e72d1ea59e78dd4925c8f9dc1716f42d867ee34c7c0368508c, Metadata: ]
2019-11-04 16:52:21.239 UTC [gossip.privdata] assignDigestsToPeers -> DEBU 0f9 Matching [Endpoint: peer1.org1.example.com:8051, InternalEndpoint: , PKI-ID: f9f0a631cbfe88e72d1ea59e78dd4925c8f9dc1716f42d867ee34c7c0368508c, Metadata: Endpoint: peer0.org1.example.com:7051, InternalEndpoint: , PKI-ID: c2821cb13053978bae2c2676e3c98b08a28a026e1886ebfc7d41d3bcabdc3eb9, Metadata: Endpoint: peer0.org2.example.com:9051, InternalEndpoint: peer0.org2.example.com:9051, PKI-ID: ddbd77574bb56224920028ba607cc3bdd15ebb8c767a47a66b55fcf725a01346, Metadata: ] to {collectionMarbles: [8ab12dd04ef76de9aa738c64a91c74e9a45dbe4b5eaaf69b342e6233028f3ec2]}
2019-11-04 16:52:21.240 UTC [gossip.privdata] fetchPrivateData -> DEBU 0fa Matched 1 digests to 1 peer(s)
2019-11-04 16:52:21.241 UTC [gossip.privdata] scatterRequests -> DEBU 0fb Sending peer0.org1.example.com:7051 request [tx_id:""8ab12dd04ef76de9aa738c64a91c74e9a45dbe4b5eaaf69b342e6233028f3ec2"" namespace:""marblesp"" collection:""collectionMarbles"" block_seq:6 ]
2019-11-04 16:52:21.255 UTC [gossip.privdata] handleResponse -> DEBU 0fc Got elements:<digest:<tx_id:""8ab12dd04ef76de9aa738c64a91c74e9a45dbe4b5eaaf69b342e6233028f3ec2"" namespace:""marblesp"" collection:""collectionMarbles"" block_seq:6 > payload:""\032\036\n\031\000color~name\000blue\000marble1\000\032\001\000\032W\n\007marble1\032L{\""docType\"":\""marble\"",\""name\"":\""marble1\"",\""color\"":\""blue\"",\""size\"":35,\""owner\"":\""tom\""}"" > from 172.18.0.4:55382
2019-11-04 16:52:21.255 UTC [transientstore] Persist -> DEBU 0fd Persisting private data to transient store for txid [8ab12dd04ef76de9aa738c64a91c74e9a45dbe4b5eaaf69b342e6233028f3ec2] at block height [6]
2019-11-04 16:52:21.257 UTC [gossip.privdata] fetchFromPeers -> DEBU 0fe Fetched {8ab12dd04ef76de9aa738c64a91c74e9a45dbe4b5eaaf69b342e6233028f3ec2 0 marblesp collectionMarbles 6c6c363ba4824671dbb0f7ed703367a7c6d04733bb0e7b5c5ad4aa60bbbcac70}
2019-11-04 16:52:21.257 UTC [gossip.privdata] StoreBlock -> INFO 0ff [mychannel] Fetched all missing collection private write sets from remote peers for block [6] (21ms){code};;;","05/Nov/19 4:55 AM;caod;Seems like this is happening because the SendCriteria isEligible filter for the remaining peers (after selecting preferably one from each org) ends up overlapping a remaining selected peer with one that had already been selected via the spray method introduced in the linked issue. We'll likely need to change the remaining peer send criteria to filter out already selected peers. There's a chance the SendByCriteria function chooses the correct remaining peer (in the example this is a 1/3 chance to choose the remaining peer in org2 that wasn't originally selected via the spray);;;","06/Nov/19 12:14 AM;caod;1.4 [https://gerrit.hyperledger.org/r/c/fabric/+/34233]

2.0 [https://gerrit.hyperledger.org/r/c/fabric/+/34270];;;","12/Nov/19 5:03 AM;caod;Updated 1.4.4 release note [https://gerrit.hyperledger.org/r/c/fabric/+/34329/7..8];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric maintainer, I want to remove unnecessary endpoints and APIs that overlap with the operations service",FAB-15390,39712,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,08/May/19 10:23 PM,27/May/19 8:43 PM,28/Oct/23 3:08 AM,27/May/19 8:43 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,"The following operations are provided on the peer admin service:

{code}
// Interface exported by the server.
service Admin {
    rpc GetStatus(common.Envelope) returns (ServerStatus) {}
    rpc StartServer(common.Envelope) returns (ServerStatus) {}
    rpc GetModuleLogLevel(common.Envelope) returns (LogLevelResponse) {}
    rpc SetModuleLogLevel(common.Envelope) returns (LogLevelResponse) {}
    rpc RevertLogLevels(common.Envelope) returns (google.protobuf.Empty) {}
    rpc GetLogSpec(common.Envelope) returns (LogSpecResponse) {}
    rpc SetLogSpec(common.Envelope) returns (LogSpecResponse) {}
}
{code}

Of those:
- {{GetStatus}} simply returns a constant value of ""STARTED"". This has minimal value.
- {{StartServer}} simply returns a constant value of ""STARTED"". This has no value.
- {{GetModuleLogLevel}} gets the current log level for a name. This functionality overlaps with the http operations service and does not match the concepts of named loggers.
- {{SetModuleLogLevel}} activates a new log spec by appending a module=level segment. This functionality overlaps with the http operations service.
- {{RevertLogLevels}} restores the log level to the value captured during process initialization. This overlaps with the http operations service and can be accomplished by operators querying the spec before modifying so they can restore it.
- {{GetLogSpec}} gets the current log spec and overlaps with the http operations service.
- {{SetLogSpec}} sets the current log spec and overlaps with the http operations service.

In summary, the only two operations that are consistent with where we are going are GetLogSpec and SetLogSpec. If having those available to an ""admin"" instead of an ""operator"" is desired, we can reduce the scope of the service to those two items. If, instead, we want to use the operations infrastructure, we can remove the service entirely.

Changes in this space will impact the peer cli. In particular, getting and setting the log spec will no longer be possible  signing an admin request with an admin cred, enveloping, and submitting to the grpc service.  Further, since operations was explicitly modeled as distinct from admin, a separate TLS client certificate would be required to support these operations.

So, in summary, if we remove this service entirely, we'll also be removing get/set logging from the peer CLI as the peer CLI should probably not grow to consume ops services.",,baohua,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00n5r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/19 5:35 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31287;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Commit/query chaincode definition ACL integration tests,FAB-15391,39714,39594,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,08/May/19 11:53 PM,23/May/19 2:55 AM,28/Oct/23 3:08 AM,23/May/19 2:55 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n67:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/19 12:34 AM;wlahti;https://gerrit.hyperledger.org/r/c/31348;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PTE - Update pte code to accept any parameters needed for custom chaincode invocations, and update tests to use newer version marbles02_private",FAB-15392,39717,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,dongming,nileshdeotale,nileshdeotale,09/May/19 12:16 AM,22/Jan/20 12:32 AM,28/Oct/23 3:08 AM,22/Jan/20 12:32 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Currently PTE uses a very old version of marbles private Chain code from fabric-test. PTE must be updated to use newer version of marbels02_private chaincode, which uses transient maps. Consider using the copy in fabric/integration/chaincode/marbles_private instead of using the one in fabric-samples repo. Or, consider copying the latest version into fabric-test/chaincodes/ for more stability.
 * Update pte to accept any parameters needed for custom chaincodes.
 * Update testInput file to accept the transient vars.
 * Update the operator to read them and pass to pte.
 * Update/create marbles02_private testcase to use the operator and use this new testInput file format with newer version marbles02_private (which uses the transient vars), and add to the systest test suite.",,dongming,nileshdeotale,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15874,FAB-16074,,,,,,,,,,,,,,FAB-16240,FAB-16719,,,FAB-15393,FAB-15739,FAB-16718,FAB-13006,FAB-17183,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|hzwqrk:5iwr6r",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,nileshdeotale,scottz,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"09/May/19 1:56 AM;scottz;I think we could also enhance the tests to do a better job of verifying the privatedata functionality. e.g. the test could execute a query (which requires the private data) on all peers, in same orgs AND different orgs in the collection, including those NOT used for endorsement, to ensure that the private data was pushed or pulled correctly everywhere.

Moreover, a public data query on the peers/orgs NOT in the collection should show that they received the delivered transactions/blocks, but a private data query on those non-collection peers should fail. We have some of this test coverage in a few different tests, but maybe a good sanity test for private data could do all these steps.;;;","14/Aug/19 2:39 AM;scottz;Estimate 5 days for an expert to fully implement.
And add a couple days for the test enhancements (per my comments earlier on May 8th).;;;","14/Aug/19 10:18 PM;scottz;We are in the midst of enhancing the PTE and tools framework to make it simpler for users to run traffic with their own chaincode on their own network by providing a way to read in the wallet pem files and connectionprofile and a simple test spec file. Most of this work is identified in epic FAB-16240 in addition to tasks FAB-15392 and FAB-15393. Target completion is 4th quarter this year.;;;","10/Sep/19 5:46 AM;scottz;I think that solving task 15739 could be one portion of solving this story.;;;","04/Dec/19 5:26 AM;dongming;operator and fabric test client tasks are handled in FAB-17183

PTE support is in review:  [https://gerrit.hyperledger.org/r/c/fabric-test/+/34481];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE - Add capability to register client user with CA in connection profile.,FAB-15393,39719,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,nileshdeotale,nileshdeotale,09/May/19 12:20 AM,11/Jan/21 2:35 AM,28/Oct/23 3:08 AM,11/Jan/21 2:35 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Given connection profile with org CA information endpoint url etc. Test client i.e. PTE should register a user with the org CA and use registered user to send transactions. Registered user will get identity (public and private key) from the CA and that can be used to send invoke transactions.,,btl5037,nileshdeotale,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16768,,,,,,,,,,,,,,,FAB-15392,FAB-16240,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 2:10 AM;nileshdeotale;connection.json;https://jira.hyperledger.org/secure/attachment/17216/connection.json","09/May/19 2:10 AM;nileshdeotale;identity.json;https://jira.hyperledger.org/secure/attachment/17217/identity.json",,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|hzwqrk:5iwr6i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,nileshdeotale,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 1:35 AM;scottz;[~nileshdeotale] please provide sample files we can use to test our solution.;;;","09/May/19 2:11 AM;nileshdeotale;[~scottz] Please find attached tar file of sample IBP 2.0 org connection profile and identity file. 
;;;","14/Aug/19 2:37 AM;scottz;Estimate 5 days for an expert to fully implement.;;;","14/Aug/19 10:18 PM;scottz;We are in the midst of enhancing the PTE and tools framework to make it simpler for users to run traffic with their own chaincode on their own network by providing a way to read in the wallet pem files and connectionprofile and a simple test spec file. Most of this work is identified in epic FAB-16240 in addition to tasks FAB-15392 and FAB-15393. Target completion is 4th quarter this year.;;;","11/Jan/21 2:10 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryApprovalStatus ACL integration test,FAB-15394,39720,39594,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,09/May/19 12:38 AM,23/May/19 2:56 AM,28/Oct/23 3:08 AM,23/May/19 2:56 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n73:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/19 12:41 AM;wlahti;[https://gerrit.hyperledger.org/r/c/31283/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
docs/source/dev-setup/build.rst references dead CORE_PEER_LOGGING_LEVEL,FAB-15395,39723,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,09/May/19 4:35 AM,22/May/19 9:22 PM,28/Oct/23 3:08 AM,22/May/19 9:22 PM,v1.4.0,v2.0.0,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,docs,ipm,ipm-planned,,,"Under the ""configuration"" heading, there's an example of how to map {{core.yaml}} configuration entries to environment variables. The example describes changing the peer logging level but the mechanism is no longer part of the configuration.

The doc needs to change to provide a different example.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mt0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/19 8:37 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31478 [FAB-15395] remove reference to CORE_PEER_LOGGING;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failures related to couchDB containers - increase couchdb startup timeout,FAB-15396,39724,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,dereckluo,wlahti,wlahti,09/May/19 4:52 AM,14/Nov/19 11:52 PM,28/Oct/23 3:08 AM,14/Nov/19 11:50 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,ci-flake,,,,,"Hit multiple times earlier today in a few of my CRs and I haven't seen this before. 

Full log: [^consoleText.txt]
{code:java}
15:29:27 --- FAIL: TestPrivateDataMetadataRetrievalByHash (37.10s)
15:29:27 panic: failed to start couchDB: database in container 99400b3a1227cda0b322bb4a7b29699bd60ba9d9a04549a16783a8c00397a063 did not start: context deadline exceeded [recovered]
15:29:27 	panic: failed to start couchDB: database in container 99400b3a1227cda0b322bb4a7b29699bd60ba9d9a04549a16783a8c00397a063 did not start: context deadline exceeded
15:29:27 
15:29:27 goroutine 87 [running]:
15:29:27 testing.tRunner.func1(0xc000156700)
15:29:27 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:792 +0x6a7
15:29:27 panic(0x159f0c0, 0xc001334a60)
15:29:27 	/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
15:29:27 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).setupCouch(0x22a80c0, 0x4, 0x16e0ab6)
15:29:27 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:110 +0x39c
15:29:27 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).Init(0x22a80c0, 0x1842f00, 0xc000156700)
15:29:27 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:122 +0x14a
15:29:27 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*lockBasedEnv).init(0x21b49c0, 0xc000156700, 0x17037b6, 0x2a, 0x1826f20, 0xc00195e060)
15:29:27 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/pkg_test.go:75 +0xc6
15:29:27 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.testPrivateDataMetadataRetrievalByHash(0xc000156700, 0x18399a0, 0x21b49c0)
15:29:27 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/helper_test.go:90 +0x147
15:29:27 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.TestPrivateDataMetadataRetrievalByHash(0xc000156700)
15:29:27 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/helper_test.go:79 +0xa3
15:29:27 testing.tRunner(0xc000156700, 0x171d7e0)
15:29:27 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
15:29:27 created by testing.(*T).Run
15:29:27 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x65a
15:29:27 FAIL	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	37.863s{code}
Also can be hit here:
{code:java}
12:23:33 	panic: failed to start couchDB: database in container e7a939555eb0d88e0cbcda577d3810bd6f7d0d212ceafed4c4cf1f214f1764b0 did not start: context deadline exceeded
12:23:33 
12:23:33 goroutine 76 [running]:
12:23:33 testing.tRunner.func1(0xc0000e2500)
12:23:33 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:792 +0x6a7
12:23:33 panic(0x1427f40, 0xc00037ace0)
12:23:33 	/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
12:23:33 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).setupCouch(0xc000218800, 0x4, 0x154d5f8)
12:23:33 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:110 +0x39c
12:23:33 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).Init(0xc000218800, 0x168afe0, 0xc0000e2500)
12:23:33 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:122 +0x14a
12:23:33 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*testHelper).init(0xc0000b1ef0, 0xc0000e2500, 0x1559763, 0x14, 0x1671ac0, 0xc000152c20, 0x1681580, 0xc000218800)
12:23:33 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr_test.go:287 +0x106
12:23:33 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.testPurgeMgr(0xc0000e2500, 0x1681580, 0xc000218800)
12:23:33 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr_test.go:51 +0x369
12:23:33 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.TestPurgeMgr.func1(0xc0000e2500)
12:23:33 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr_test.go:35 +0x6b
12:23:33 testing.tRunner(0xc0000e2500, 0xc000387a30)
12:23:33 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
12:23:33 created by testing.(*T).Run
12:23:33 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x65a
12:23:33 FAIL	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt	31.821s {code}
I've also seen this error: 
{code:java}
13:39:33 --- FAIL: TestNotCreateCouchGlobalChangesDB (1.10s)
13:39:33     <autogenerated>:1: 
13:39:33         	Error Trace:	couchdbutil_test.go:48
13:39:33         	Error:      	Expected value not to be nil.
13:39:33         	Test:       	TestNotCreateCouchGlobalChangesDB 
.
.
.
13:39:33 FAIL	github.com/hyperledger/fabric/core/ledger/util/couchdb	26.131s{code}",,denyeart,dereckluo,guoger,jyellick,MHBauer,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15453,,,,,,FAB-15454,,,,FAB-15352,FAB-15464,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/May/19 4:52 AM;wlahti;consoleText.txt;https://jira.hyperledger.org/secure/attachment/17218/consoleText.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n7j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dereckluo,guoger,jyellick,MHBauer,wlahti,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/19 4:56 AM;wlahti;Hit again already: [https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12023/console];;;","10/May/19 3:59 AM;wlahti;Hit numerous times today as well. This seems to have started after [https://gerrit.hyperledger.org/r/c/31225/] was merged. [~mastersingh24], any ideas? I'm trying to track it down as well.;;;","10/May/19 11:02 PM;wlahti;And already a couple times today. Raising this to High and diving fully into investigation mode.

First attempt at investigating, increasing the timeout (and making sure it's using the expected timeout): [https://gerrit.hyperledger.org/r/c/31325/];;;","16/May/19 12:46 AM;wlahti;https://gerrit.hyperledger.org/r/c/31325/;;;","16/May/19 3:12 AM;MHBauer;Why isn't this pre-pulled by CI? A lot of the workers should have the images pre-pulled and baked in ahead of time. Why not this one?

 

It's not even that big compared to the the fabric-couch. ~200MB vs 1.6GB.;;;","16/May/19 4:16 AM;wlahti;It is pre-pulled. No idea why it's taking longer to start the container compared to before though. ;;;","20/Jun/19 5:22 PM;guoger;hit on master: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13148/console

is timeout still not lenient enough??;;;","31/Jul/19 1:11 AM;jyellick;Just hit again: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14097/console;;;","22/Aug/19 11:54 PM;denyeart;Hit again in release-1.4: https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7484/consoleFull;;;","14/Nov/19 11:52 PM;dereckluo;I ran the test both locally and in Jenkins for 500 iterations, and I'm not able to reproduce the failure. 
let's close it for now, and reopen if we see this failure again.


{code:java}
Successfully built 8480362d4afc
Successfully tagged hyperledger/fabric-baseos:latest
docker tag hyperledger/fabric-baseos hyperledger/fabric-baseos:2.0.0
docker tag hyperledger/fabric-baseos hyperledger/fabric-baseos:amd64-2.0.0-snapshot-a667a59
./scripts/run-unit-tests.sh
run TestPrivateDataMetadataRetrievalByHash for 500 interations 
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.270s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.409s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.328s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.283s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.262s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.173s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.128s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.188s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.357s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.349s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.404s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.506s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.367s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.183s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.258s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.238s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.323s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.136s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	10.785s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	11.042s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	10.055s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.711s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	10.223s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.446s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.639s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.613s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.526s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.487s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.470s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	10.018s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.861s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	10.194s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.828s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.527s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.310s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.430s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.446s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.339s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.410s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.504s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.357s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.330s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.367s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.781s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.699s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	10.152s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	10.134s
ok  	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	9.689s
...

real	117m40.500s
user	37m23.932s
sys	6m16.740s
{code}
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
issue related how to instantiate java chain code,FAB-15397,39726,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,samshdn,samshdn,09/May/19 11:23 AM,09/May/19 11:23 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I have installed the java chain code to fabric network(through fabric-java-sdk). when I try to instantiate the chain code from my application, I got the exception:

2019-05-09 01:56:08.388 UTC [ledgermgmt] CreateLedger -> INFO 024 Creating ledger [mychannel] with genesis block
2019-05-09 01:56:08.391 UTC [fsblkstorage] newBlockfileMgr -> INFO 025 Getting block information from block storage
2019-05-09 01:56:08.412 UTC [kvledger] CommitWithPvtData -> INFO 026 [mychannel] Committed block [0] with 1 transaction(s) in 18ms (state_validation=2ms block_commit=5ms state_commit=9ms)
2019-05-09 01:56:08.417 UTC [ledgermgmt] CreateLedger -> INFO 027 Created ledger [mychannel] with genesis block
2019-05-09 01:56:08.428 UTC [gossip.gossip] JoinChan -> INFO 028 Joining gossip network of channel mychannel with 2 organizations
2019-05-09 01:56:08.428 UTC [gossip.gossip] learnAnchorPeers -> INFO 029 No configured anchor peers of Org2MSP for channel mychannel to learn about
2019-05-09 01:56:08.428 UTC [gossip.gossip] learnAnchorPeers -> INFO 02a No configured anchor peers of Org1MSP for channel mychannel to learn about
2019-05-09 01:56:08.441 UTC [gossip.state] NewGossipStateProvider -> INFO 02b Updating metadata information, current ledger sequence is at = 0, next expected block is = 1
2019-05-09 01:56:08.442 UTC [sccapi] deploySysCC -> INFO 02c system chaincode lscc/mychannel(github.com/hyperledger/fabric/core/scc/lscc) deployed
2019-05-09 01:56:08.442 UTC [cscc] Init -> INFO 02d Init CSCC
2019-05-09 01:56:08.442 UTC [sccapi] deploySysCC -> INFO 02e system chaincode cscc/mychannel(github.com/hyperledger/fabric/core/scc/cscc) deployed
2019-05-09 01:56:08.443 UTC [qscc] Init -> INFO 02f Init QSCC
2019-05-09 01:56:08.443 UTC [sccapi] deploySysCC -> INFO 030 system chaincode qscc/mychannel(github.com/hyperledger/fabric/core/scc/qscc) deployed
2019-05-09 01:56:08.443 UTC [sccapi] deploySysCC -> INFO 031 system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle) disabled
2019-05-09 01:56:08.443 UTC [endorser] callChaincode -> INFO 032 [][42e6c392] Exit chaincode: name:""cscc"" (57ms)
2019-05-09 01:56:08.443 UTC [comm.grpc.server] 1 -> INFO 033 unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=192.168.5.1:51432 grpc.code=OK grpc.call_duration=61.955775ms
2019-05-09 01:56:14.444 UTC [gossip.election] beLeader -> INFO 034 fcca1564dce0faafecf23ef9abb5959a509a1ad6fb27c9ef310a053721101606 : Becoming a leader
2019-05-09 01:56:14.444 UTC [gossip.service] func1 -> INFO 035 Elected as a leader, starting delivery service for channel mychannel
2019-05-09 01:56:22.795 UTC [endorser] callChaincode -> INFO 036 [][d3c8671f] Entry chaincode: name:""lscc""
2019-05-09 01:56:22.805 UTC [lscc] executeInstall -> INFO 037 Installed Chaincode [SimpleChaincode] Version [1] to peer
2019-05-09 01:56:22.805 UTC [endorser] callChaincode -> INFO 038 [][d3c8671f] Exit chaincode: name:""lscc"" (10ms)
2019-05-09 01:56:22.805 UTC [comm.grpc.server] 1 -> INFO 039 unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=192.168.5.1:51467 grpc.code=OK grpc.call_duration=12.759564ms
2019-05-09 01:56:22.837 UTC [endorser] callChaincode -> INFO 03a [mychannel][1594f433] Entry chaincode: name:""lscc""
2019-05-09 02:03:12.521 UTC [comm.grpc.server] 1 -> INFO 03b streaming call completed grpc.service=protos.Deliver grpc.method=Deliver grpc.peer_address=192.168.5.1:51463 error=""context finished before block retrieved: context canceled"" grpc.code=Unknown grpc.call_duration=6m50.175713284s
2019-05-09 02:04:00.534 UTC [endorser] callChaincode -> INFO 03c [mychannel][1594f433] Exit chaincode: name:""lscc"" (457697ms)
2019-05-09 02:04:00.605 UTC [endorser] SimulateProposal -> ERRO 03d [mychannel][1594f433] failed to invoke chaincode name:""lscc"" , error: timeout expired while starting chaincode SimpleChaincode:1 for transaction
github.com/hyperledger/fabric/core/chaincode.(*RuntimeLauncher).Launch
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/runtime_launcher.go:75
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).LaunchInit
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:130
github.com/hyperledger/fabric/core/chaincode.(*ChaincodeSupport).ExecuteLegacyInit
 /opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/chaincode_support.go:222
github.com/hyperledger/fabric/core/endorser.(*SupportImpl).ExecuteLegacyInit
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/support.go:131
github.com/hyperledger/fabric/core/endorser.(*Endorser).callChaincode
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:183
github.com/hyperledger/fabric/core/endorser.(*Endorser).SimulateProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:247
github.com/hyperledger/fabric/core/endorser.(*Endorser).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/endorser/endorser.go:500
github.com/hyperledger/fabric/core/handlers/auth/filter.(*expirationCheckFilter).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/expiration.go:61
github.com/hyperledger/fabric/core/handlers/auth/filter.(*filter).ProcessProposal
 /opt/gopath/src/github.com/hyperledger/fabric/core/handlers/auth/filter/filter.go:32
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler.func1
 /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:169
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:31
github.com/hyperledger/fabric/core/comm.(*Throttle).UnaryServerIntercptor
 /opt/gopath/src/github.com/hyperledger/fabric/core/comm/throttle.go:54
github.com/hyperledger/fabric/core/comm.(*Throttle).UnaryServerIntercptor-fm
 /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:224
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34
github.com/hyperledger/fabric/common/grpclogging.UnaryServerInterceptor.func1
 /opt/gopath/src/github.com/hyperledger/fabric/common/grpclogging/server.go:91
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1.1
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:34
github.com/hyperledger/fabric/common/grpcmetrics.UnaryServerInterceptor.func1
 /opt/gopath/src/github.com/hyperledger/fabric/common/grpcmetrics/interceptor.go:30
github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware.ChainUnaryServer.func1
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/grpc-ecosystem/go-grpc-middleware/chain.go:39
github.com/hyperledger/fabric/protos/peer._Endorser_ProcessProposal_Handler
 /opt/gopath/src/github.com/hyperledger/fabric/protos/peer/peer.pb.go:171
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processUnaryRPC
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:982
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1208
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:686
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:1333
2019-05-09 02:04:00.620 UTC [comm.grpc.server] 1 -> INFO 03e unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=192.168.5.1:51467 grpc.code=OK grpc.call_duration=7m37.785035653s

 ",,samshdn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n7z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),samshdn,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in the document,FAB-15399,39731,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,eujungkim,eujungkim,eujungkim,09/May/19 6:34 PM,11/May/19 5:18 AM,28/Oct/23 3:08 AM,11/May/19 5:18 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,,,eujungkim,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n9b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),eujungkim,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode cache improvements,FAB-15401,39734,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,09/May/19 9:18 PM,16/Jul/19 11:49 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,This story tracks the tasks required to improve the chaincode cache for the _lifecycle system chaincode.,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzzgzh:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode package hygiene,FAB-15402,39736,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,09/May/19 9:32 PM,09/May/19 9:33 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,This story tracks the work required to improve or harmonise the code that determines the way chaincode containers and chaincode runtimes are identified when a transaction proposal message is sent to an endorser.,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00na7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Avoid using Go key word for var name,FAB-15403,39739,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,09/May/19 10:39 PM,10/May/19 8:01 PM,28/Oct/23 3:08 AM,10/May/19 8:01 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-crypto,,,,,,0,,,,,,https://github.com/hyperledger/fabric/blob/150c135e7137d84f06592701a5f22887719e1c04/bccsp/factory/pluginfactory.go#L73,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nav:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/May/19 10:41 PM;guoger;https://gerrit.hyperledger.org/r/c/31298/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer Kafka Healthcheck TLS Issue,FAB-15404,39741,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,david_dornseifer,david_dornseifer,david_dornseifer,09/May/19 11:07 PM,17/Jul/19 11:35 PM,28/Oct/23 3:08 AM,10/May/19 6:50 PM,v1.4.1,v2.0.0,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,kafka,,,,,After an update from HLF 1.4.0 to HLF 1.4.1 the orderer is no longer able to communicate with the Kafka Broker. The orderer is not able to determine the health state (ISR) for the particular topic / channel due to missing Kafka broker config. ([https://github.com/hyperledger/fabric/commit/f7c5221d1bbae8e1ef0daa2efc8ff4b61cea2019]). ,,baohua,david_dornseifer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15825,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nbb:",,,,Unset,Unset,,"1. Start network with Kafka consensus protocol running HLF 1.4.0
2. Setup TLS in between kafka / orderer with client authentication on orderer 
3. Switch to HLF 1.4.1 ",,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,david_dornseifer,sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/May/19 4:53 AM;sykesm;https://gerrit.hyperledger.org/r/c/31300/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create network input yaml for NL,FAB-15405,39742,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,09/May/19 11:16 PM,03/Jul/19 4:09 AM,28/Oct/23 3:08 AM,03/Jul/19 4:09 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Create network input yaml file with all input arguments currently supported by NL.

Sample yaml (in construction) would be as shown below:
{code:java}
# Copyright IBM Corp. All Rights Reserved.
## SPDX-License-Identifier: Apache-2.0
---
db_type: couchdb
peer_logging_level: error
orderer_logging_level: error
metrics: enabled
consensus:  
  type: solo  
  options:
organizations:
  - name: orderer-org
    msp_id: OrdererOrgExampleCom
    num_of_orderers: 1
    num_of_kafka: 5
    num_of_zookeepers: 3
  - name: org1
    msp_id: Org1ExampleCom
    num_of_peers: 2
  - name: org2
    msp_id: Org2ExampleCom
    num_of_peers: 2
consortiums:
  - name: SampleConsortium  
    organizations:  
      - org1
      - org2
  - name: consortium1
    organizations:
      - org2
      - org3
system_channel:  
  name: systemchannel  
  profile: TwoOrgsOrdererGenesis
profiles:
  - name: TwoOrgsOrdererGenesis
    orderers:  
      - orderer0
  - name: TwoOrgsChannel
    consortium: SampleConsortium
    organizations:  
      - org1
      - org2
k8s:  
  persistence: enabled
  service: NodePort
  storage_class: default
chaos:  
  - mode: false
    options:
{code}",,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,FAB-15455,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/May/19 4:26 AM;scottz;in.yaml;https://jira.hyperledger.org/secure/attachment/17228/in.yaml",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00nbj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/May/19 10:44 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/31359/;;;","14/Jun/19 6:06 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop publishing tools image ,FAB-15406,39743,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,09/May/19 11:18 PM,29/May/19 9:13 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,we need to stop the (ab)use of the tools container,,mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00nbr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,silliman,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove or Improve bccsp interfaces,FAB-15407,39744,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,09/May/19 11:32 PM,29/May/19 9:12 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The bccsp package is overly complex and cumbersome for what we really need in Fabric.
We need to reduce the surface area to the specific crypto functions needed / supported,
create the proper consumption interfaces and leverage msp's as the core component for crypto activities.",,mastersingh24,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15422,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00nbz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add option to take and read kubeconfig file for k8s cluster, network input yaml in NL",FAB-15408,39745,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,09/May/19 11:58 PM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add option to take and read in the network input yaml in NL ,,bharadwajambati1,dongming,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00nc7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,dongming,suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"16/May/19 4:45 AM;dongming;https://gerrit.hyperledger.org/r/#/c/31368/;;;","14/Jun/19 6:03 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Cleanup fabric network, config files, channel-artifacts in NL",FAB-15409,39746,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,10/May/19 12:02 AM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Add an option to read kubeconfig file of a k8s cluster to NL and then deploy fabric network on respective k8s cluster. If kubeconfig file is not defined, NL should deploy fabric network to local",,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00ncf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/Jun/19 6:11 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Generate all config files needed to create PVCs, services and fabric deployment (k8s) file in NL ",FAB-15410,39747,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,10/May/19 12:05 AM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Generate all config files needed to create PVCs when persistence is enabled, services based on the type selected by user and fabric deployment (k8s) file based on the network input file in NL",,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00ncn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/Jun/19 6:02 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QSCC GetTransactionByID & GetBlockByTxID uncertain behaviour since config transactions are not indexed by txid correctly,FAB-15411,39749,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,Senthil1,sudeshrshetty,sudeshrshetty,10/May/19 12:12 AM,16/Jul/19 4:21 AM,28/Oct/23 3:08 AM,08/Jul/19 8:21 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,"QSCC `{color:#403294}_GetTransactionByID, GetBlockByTxID_{color}` sometimes works fine with empty TxID. It brings genesis block and transactions from genesis block if found any.

This is not an expected behaviour as per below unit test.
{code:java}
Test:       	TestQueryGetBlockByTxID (query_test.go:178)
Messages:   	GetBlockByTxID should have failed with blank txId.{code}
 [https://github.com/hyperledger/fabric/blob/eca1b14b7e3453a5d32296af79cc7bad10c7673b/core/scc/qscc/query_test.go#L179]

But, in integration test,  `{color:#403294}EndToEndAC{color}L` {color:#403294}qscc.GetBlockByTxID, qscc.GetTransactionByID{color}' always PASS  with empty TxID read from `{color:#403294}GetTxIDFromBlockFile{color}` function.
 (this function always reads empty txID from blockfile, but this test still passes)

[https://github.com/hyperledger/fabric/blob/master/integration/e2e/acl_test.go]

 

 

 ",,ales,angelo.decaro,baohua,denyeart,GuillaumeCisco,jyellick,Kelvin_Moutet,MichaelWang,Senthil1,sudeshrshetty,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15650,,,,,,,,,,FAB-15963,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz6","In release note, mention that peer owners can drop index directory and then start peer if they want their txid based indexes corrected for config transactions.",Yes,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,baohua,denyeart,GuillaumeCisco,jyellick,Kelvin_Moutet,MichaelWang,Senthil1,sudeshrshetty,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/May/19 1:58 AM;sykesm;-Looks like {{peer chaincode query}} doesn't exit with a non-zero return code even when the response status is >= 400.-;;;","10/May/19 2:00 AM;sudeshrshetty;[~mastersingh24] [~sykesm] Please let me know which one is right behaviour?



As I can see addBlock creates transaction index info with empty txID
[https://github.com/hyperledger/fabric/blob/eca1b14b7e3453a5d32296af79cc7bad10c7673b/common/ledger/blkstorage/fsblkstorage/block_serialization.go#L115] ;;;","10/May/19 2:24 AM;sudeshrshetty;[~sykesm] Sorry, I didn't understand your comment, please elaborate. ;;;","10/May/19 2:52 AM;sykesm;I expected the cli was quietly eating the issue but that is not the case. You can ignore the comment. Something is amiss.;;;","10/May/19 3:11 AM;sudeshrshetty;Thanks [~sykesm], Do you think is it right behaviour to save txns with txID empty in block store index?
And we should validate txID in qscc functions? we have a nil check there on txID bytes but there is no empty check.;;;","14/May/19 5:33 AM;denyeart;It looks like config transaction in genesis block has a blank txid.  Therefore the config transaction gets indexed in ledger with empty txid, and you can therefore query using empty txid.

This seems problematic as every config transaction would overwrite the txid index in ledger.  Config transactions should have a txid like any other transaction.

Since orderer creates config transaction, changing component to fabric-orderer.

[~jyellick] thoughts?;;;","21/May/19 2:19 AM;jyellick;To complicate this probably a little more than anyone actually wants, the idea that the txid field even exists is a questionable one.  It is convenient to be able to look simply at the fields of a message and determine its txid, but, txid is defined, and checked, to be the hash of the creator plus nonce.   So, the txid in a sense is encoding information into the message a second time which already exists in that message.  If the txid is not set to the hash of creator plus nonce (and not empty), then the transaction is considered to be invalid by the peer validation logic.  The orderer cares nothing about the txid, and only uses it for logging purposes.

So, yes, the orderer could be modified to set a txid equal to the hash of the creator plus nonce when generating the transaction.  This wouldn't be a huge change, and would bring these transactions inline with what most fabric clients do.

On the other hand, on the peer side, we could simply infer the txid if it is not set, as all the information is already present.  This has the benefit of working nicely for existing channels.

My gut reaction says we'd be better off deprecating the txid field, and not requiring that clients set it, but, I'm open to other thoughts.;;;","03/Jun/19 9:02 PM;denyeart;[~angelo.decaro] What are your thoughts on Jason's suggestion? I believe you were involved in the v1.0 design here...;;;","03/Jun/19 9:41 PM;angelo.decaro;I remember that back in the days the discussion was more about where the transaction id is generated: client-side vs server-side. We wanted to have a way for the client to be able to know immediately the transaction-id to check later if the transaction got committed. As long as the rule is clear on how to compute the transaction-id from the transaction content, then, I agree with not need that redundancy. [~ales], [~elli-androulaki], do you agree?;;;","04/Jun/19 7:09 PM;denyeart;[~jyellick] [~angelo.decaro] For 'regular' transactions I would prefer client to provide the txid to assist with end-to-end traceability. I am agreeable to having ledger infer the txid however, when creating the internal indexes that are based on txid. This has the added benefit of resolving the issue in existing environments, as the internal indexes can always be deleted and auto-created again upon next peer restart.

[~Senthil1] Could you help with this one?  Ensure that the txid indexes get created correctly even if the transaction does not have an explicit txid set. And that for existing environments that they can be re-indexed correctly.;;;","06/Jun/19 3:00 PM;Senthil1;[~denyeart] Summurizing the findings here
 # Endorser checks whether the txID present in the proposal is computed out of nonce and creator.
 # Validator does the same check for the endorsement tx and token tx but not for the config tx. Without a txID in both genesis block and config updates, these txs pass the validation.
 # As the genesis block and the subsequent channel config block do not have the txID, a collision would occur at the blockstore index -which means an index created for config update tx overwrites another config update tx or genesis block's index.- As we check for duplicate index before creating index for each tx, we skip it currently. We do need to rebuild the index of blockstore once to fix this.
 # Orderer needs to include the txID when constructing the configBlock.
 # Blockstore needs to compute the txID when it is empty
 # CSCC needs to verify whether the txID is computed correctly (if non-empty).

 ;;;","07/Jun/19 8:13 PM;denyeart;Ok, upon talking with Senthil, we agreed:

Primary fix (needed for existing blocks with config transactions) will be for peer to compute txid from creator and nonce when creating the txid indexes, if the txid is empty. Existing peer owners can manually drop indexes if they want their peer to regenerate the fixed indexes. Upon upgrade to v2.0 we expect to automatically regenerate indexes regardless.

While txid is not strictly required to get a valid config transaction, it is convenient to include in all transactions for traceability. Therefore orderer should provide txid on config transactions.;;;","11/Jun/19 1:27 AM;denyeart;Several people have objected to the statement ""orderer should provide txid on config transactions.""

I'm fine not adding txid to orderer-created config transactions.

I wouldn't go so far as to remove txid from regular user transactions however... many people use txid for end-to-end traceability (from submission time to validation events to log/debug analysis to post-processing blocks later). While txid COULD be derived from the creator and nonce at each of these steps, in my opinion removing it would be an unnecessary hit to consumability.;;;","11/Jun/19 6:06 PM;ales;Just to clarify my thoughts on the txid: currently, we have a field in the proposal/transaction to store the txid as a string. However, we can't take that field at face value, because we need to recompute it by hashing two other fields (nonce and creator), and then validate that the hash matches the txid. For this reason, the txid field is redundant. I think long term, we might want to remove this field, but that's not a must. What we *must* do imho is to code the peer (especially the validator/committing peer) in a way that it ignores the txid field and always recomputes the txid on the fly. Additionally, we could verify that if the txid field is non-empty, its value must match the one we compute. Validation/committer refactoring should ensure that we compute the txid only once.;;;","11/Jun/19 7:03 PM;denyeart;[~ales] I agree, and I thought that's how it currently works.  For user transactions validation phase computes the txid from nonce and creator and ensures it matches the txid string that is passed around in the transaction.  All other code locations can therefore have trust that the txid field is correct and can be used for end-to-end traceability without recalculating the hash at each location.;;;","12/Jun/19 3:00 PM;baohua;I agree, the user transaction works well now. The issue is the lacking of the tx_id value for the config transactions.

I guess the simplest way is to generate the tx_id too when creating the config transaction, similar as the user transactions.

Certainly there can be some enhancement like to do the re-generation on empty field when doing index.;;;","13/Jun/19 4:02 AM;denyeart;[~baohua] From the prior comments, the plan is:
 * Primary fix (needed for existing blocks with config transactions) will be for peer to compute txid from creator and nonce when creating the txid indexes, if the txid is empty.
 * No change to config transactions (they will continue to NOT have txid... not a compelling enough reason to justify a change in behavior)
 * No change to user transactions (they will continue to have txid... more important for end-to-end traceability);;;","13/Jun/19 11:08 AM;baohua;[~denyeart], I agree with the plan.

Besides, i think tx_id is very useful for those requirements:

1) Traceability (as mentioned)

2) Ordering (help order txs inside the same block)

3) Async requests from client (sent and query)

4) Auditing (based on traceability)

Agree with that tx_id is easy to be generated with creator/nonce, and generating once and use in other places will benefit the performance-critical scenarios.

Thanks!

 ;;;","20/Jun/19 6:52 PM;GuillaumeCisco;TxId would be great in orderer transactions on the system channel such as application channel creation/update.

We recently tried to add the raft orderer instead of solo to our project.
When using raft, we've seen we have to wait for block to be correctly commited after a channel creation/update. This was not he case with the solo orderer.
For example if we write a script which create a channel and immediately after, try to make some peers join the newly created channel, it will fail. As in the process of joining, we need to get the genesis block of the channel, and we won't get it, as it is too soon. We could put a sleep of 2 or 3 seconds, but this is ugly. We should instead use a channel based event hub on the channel creation/update method, and using the orderer delivery, as we will use our channel based event hub on a system channel.
I implemented with the fabric-sdk-py a way to connect channel based event hub with orderer delivery for knowing when the block of a channel creation/update is commited from the orderer delivery. I correctly get the block, but I was flabbergasted I had empty txId in these block. So I cannot register with a registerTxEvent on my systemchannel.

The channel update method give me a block with a CONFIG transaction with an empty txId in the block['data']['data']['payload']['header']['channel_header']['tx_id'], BUT I get a txId in the block['data']['data']['payload']['data']['last_update']['payload']['header']['channel_header']['tx_id'] which the txId I was looking for. So I can tweak the way channel event hub works for adding this txId, but is it right? Should I really test on the last_update payload?
Regarding the channel creation method which is a ORDERER_TRANSACTION, I obtain no txId. So I can absolutely never know when the block is committed.

We know that the txId is computed as hash_func(self._nonce + self._identity).hexdigest().
The identity can be computed:

serialized_identity = identities_pb2.SerializedIdentity()
serialized_identity.mspid = user.msp_id
serialized_identity.id_bytes = user.enrollment.cert
return serialized_identity.SerializeToString()


 In the block I receive I have data for computing the identity and I get the nonce. So you can tell me I could retrieve the txId in the channel event hub, even if it is empty.
Unfortunately the nonce generated before sending the transaction is NOT the same as the one I receive in the block. I think this is normal, can someone confirm me that?

So I'm in a dead end here, I have empty txId for CONFIG or ORDERER_TRANSACTION and I cannot retrieve with the nonce and identity data.

What should we do?
Am I missing something?

Thank you,;;;","25/Jun/19 6:43 AM;denyeart;[~ales] [~jyellick] We had decided not to add the txid to orderer-created config transactions. Does the prior comment change your opinion at all?;;;","28/Jun/19 11:34 PM;GuillaumeCisco;Is there any update on this topic?

Is there another way to know when a channel has been created/updated without using channel event hub?

Does what I wrote feels right?

Thank you,;;;","03/Jul/19 4:23 PM;Kelvin_Moutet;Any update or final decision on this question ?;;;","04/Jul/19 2:55 AM;jyellick;Generally speaking, we do not expect for peers to join the orderer system channel.  In fact, unless you declare a channel application section in your orderer system channel, I would expect very odd things to happen.  The behavior of Solo and Raft are actually the same, both wait to create the channel until after the block commits.  It so happens that the latency in a Solo env is necessarily much lower than in a Raft one.  You would observe the same behavior with a Kafka based orderer.

Traditionally, we've simply asked users to poll on the new channel until it becomes available, rather than to use an event driven approach.  An event driven approach would probably be superior, but, there a few problems here:

1) As mentioned above, peers are not usually joined to the orderer system channel
2) The orderer system channel should usually only be read/writable by the orderers themselves, which makes an application client listening problematic
3) Because the orderer generates the txid, there's no obvious way for the client to know which txid to listen for

Because channel creation is generally a one-off infrequent event, and not performance critical, the polling approach seemed like a 'good enough' solution.

I'll note, that we're aware of some of the shortfalls with the channel creation flow, and system channel in general, and we're working to clean this up.

Personally, I'm not vehemently opposed to having the orderer set a txid in these transactions.  But there are so many barriers to using these txids, it doesn't seem useful, so I'm not sure it's worth doing.;;;","04/Jul/19 10:19 AM;baohua;One interesting question might be: what's the shortfall if we let each transaction have a unique id with it?

Otherwise, this could simplify the design and implementation, as we do not need to use separate processes of enabling and disabling the tx id generation?;;;","04/Jul/19 3:19 PM;Kelvin_Moutet;[~jyellick]
Thank you for your answer
If we want to allow peers to create Application channels, we need to add them in the orderer system channel (at least in the consortium group)  ? Correct me if I'm wrong or if there is another possibility ?
What are the odd things that could happen ?

If a peer is in the the application, it could listen to channel events and because it can create channel, it will have the txid so, if a event exist, it could possibility listen to it, no ?

I would be very happy if you have some ressources on security/risks of peers in the system channel.
Moreover, I find it more logical that peers can create application channels and should not be limited to orderers;;;","08/Jul/19 8:58 PM;Kelvin_Moutet;[~denyeart] I see you closed the issue, could you share what the final conclusion of it ? :);;;","08/Jul/19 11:21 PM;jyellick;[~Kelvin_Moutet] 

{quote}If we want to allow peers to create Application channels, we need to add them in the orderer system channel (at least in the consortium group)  ? Correct me if I'm wrong or if there is another possibility ?{quote}

Generally speaking, we expect that channels are created by admins of the consortium members.  Deciding to create a channel, and with who, is typically thought of as a human decision, so the notion of an orderer, or peer initiating a channel creation is a bit unusual.  So, the consortium contains organization definitions, each of which defines their admins.  There is a configurable policy for channel creation, but by default, any admin of any consortium member may create a channel.

{quote}What are the odd things that could happen ?{quote}

This isn't exactly a supported path, if you are lucky, joining the channel would simply fail.  If you are unlucky, certain code paths could trigger a peer panic.

{quote}If a peer is in the the application, it could listen to channel events and because it can create channel, it will have the txid so, if a event exist, it could possibility listen to it, no ?{quote}

Peers do not create channels, consortium admins submit channel creation txes to the orderers, if the tx is valid, then the orderer generates the channel config based on the channel creation tx, and starts the channel.

{quote}I would be very happy if you have some ressources on security/risks of peers in the system channel.{quote}

The security implication is that if application members may read the orderer system channel they may see all of the channel creations occurring, what channels members are forming with whom.

{quote}Moreover, I find it more logical that peers can create application channels and should not be limited to orderers{quote}

This is simply not possible.  The orderers form consensus upon order.  And, channel creation events must have order relative to eachother.  You can imagine what if two different peers tried to create the same channel at the same time, but with different parameters.  Who's is correct? How do we inform the orderers that this is a valid channel? How do the orderers authorize that the channel was created validly?

In the future, we may allow out of band channel creation and registration with the orderers, but in this case, I see no reason that the peers would create the channel, I would simply expect the admins to use a tool like {{configtxgen}} to do so.

{quote}David Enyeart I see you closed the issue, could you share what the final conclusion of it ? ￼{quote}

I believe the conclusion was to continue to omit the txid on channel creation, as it does no one any good to generate it.;;;","09/Jul/19 12:01 AM;Kelvin_Moutet;Thank you [~jyellick] for your detailed answer :)

Maybe my first answer was a bit confusing. When I said `peer` is stand for organization with a peer and `orderer` it is organization with an orderer.

Sorry for this confusion that leads to this discussion !
{quote}Generally speaking, we expect that channels are created by admins of the consortium members. Deciding to create a channel, and with who, is typically thought of as a human decision, so the notion of an orderer, or peer initiating a channel creation is a bit unusual. So, the consortium contains organization definitions, each of which defines their admins. There is a configurable policy for channel creation, but by default, any admin of any consortium member may create a channel.?
{quote}
You're right, this confirm my idea was not well written ! When I said peers, I mean admin of organizations that have a peer node but no orderer node. If their admin are in the consortium they could create (if they are allowed) application channel. So it's not limited to orderer admin (admin of the organization with an orderer node) ? Or is it better that organizations in the consortium has an orderer node too ? And no peer node ?
{quote}This is simply not possible. The orderers form consensus upon order. And, channel creation events must have order relative to eachother. You can imagine what if two different peers tried to create the same channel at the same time, but with different parameters. Who's is correct? How do we inform the orderers that this is a valid channel? How do the orderers authorize that the channel was created validly? ?
{quote}
It could happen with consortium admin too no ?

 Thank you again for those information !

 

 ;;;","09/Jul/19 1:07 AM;jyellick;{quote} If their admin are in the consortium they could create (if they are allowed) application channel. So it's not limited to orderer admin (admin of the organization with an orderer node) ? Or is it better that organizations in the consortium has an orderer node too ? And no peer node ?{quote}

Actually, by default, orderer admins are not authorized to create channels (though they do control the consortium configuration, so they could modify this policy).  Instead, any consortium member's admin may create channels.  Typically, we recommend that the ordering service be run by a logically distinct entity which has no interest in the application channels (even if the same physical entity does).

{quote}It could happen with consortium admin too no ?{quote}

The orderers consent upon the order of transactions in the orderer system channel.  Whichever channel creation transaction is ordered first would be successful and create the channel, any subsequent transactions would be invalidated and discarded.;;;",,,,,,,,,,,,,
Generate certs for network configuration and create certs secrets,FAB-15412,39750,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,10/May/19 12:18 AM,03/Jul/19 3:59 AM,28/Oct/23 3:08 AM,03/Jul/19 3:59 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Create a pvc for certs to store and generate certs for the network configuration from input file in the pvc,,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00ndb:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/Jun/19 6:03 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Complete service discovery integration tests for the new lifecycle,FAB-15413,39751,37108,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,10/May/19 12:19 AM,24/May/19 4:55 PM,28/Oct/23 3:08 AM,24/May/19 4:55 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"There are 3 integration test scenarios for service discovery

 
{code:java}
        It(""discovers channel information"", func() {

        It(""discovers peer membership"", func() {

        It(""discovers network configuration information"", func() {
{code}
but [https://gerrit.hyperledger.org/r/#/c/30994/] only covers the first scenario in the new lifecycle. This sub-task tracks the work required to investigate whether the 2nd anr 3rd scenarios are relevant to the new lifecycle and whether we should code tests for them or not.

 ",,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15222,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ndj:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/May/19 11:14 PM;wlahti;FAB-15222 now incorporates _lifecycle in the first two tests(""channel information"" and ""peer membership""). The third test is for another aspect of service discovery that is unrelated to lifecycle and chaincodes, so I've left it as-is. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Launch fabric network on k8s cluster in NL ,FAB-15414,39752,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,10/May/19 12:20 AM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Launch fabric network on k8s cluster using kubeconfig file, network deployment file and kubectl from NL",,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00ndr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/Jun/19 6:05 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Query for health of fabric network components after launch in NL,FAB-15415,39753,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,10/May/19 12:22 AM,15/Aug/19 4:42 AM,28/Oct/23 3:08 AM,15/Aug/19 4:42 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Query for health of fabric network components after launch in NL. Wait for awhile to confirm all responses are successful, before informing the client caller that the launch is finished and network is ready.

Use healthcheck port on the nodes to confirm they are all running.

Such a tool could be useful executed from commandline as a standalone operator action, either for a specific node or for all nodes in the network spec file.

Also, we could (with a different separate testtask) create a testcase to do an install/instantiate/query/queryblock every peer which would be very useful to everyone.",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15191,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|hzwqrk:f",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"25/Jul/19 11:21 PM;scottz;Look in section `Serviceability and operations improvements` of https://hyperledger-fabric.readthedocs.io/en/release-1.4/whatsnew.html
;;;","08/Aug/19 2:39 AM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/32685;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate connection profile for the fabric network launched in NL ,FAB-15416,39754,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,10/May/19 12:22 AM,31/Jul/19 3:40 AM,28/Oct/23 3:08 AM,31/Jul/19 3:40 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Generate connection profile for the fabric network launched in NL in order for clients such as PTE to consume it.

In the NetworkLauncher input file tools/NL/k8s/templates/networkspec.yaml, we should consider adding a new path/location parameter (e.g. conn_profile_path) to specify where the connection profile will be output. (Maybe the default path provided in this file could be the NL/k8s/ directory itself.) And of course the tool code in tools/NL/k8s/go/networkLauncher.go should read and use it. ",,bharadwajambati1,dongming,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,FAB-15671,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00ne7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,dongming,scottz,suryalnvs,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"15/May/19 2:43 AM;dongming;First, use fabric-test/tools/NL/gen_PTEcfg.sh to create a connection profile for local host, see example in https://gerrit.hyperledger.org/r/#/c/31366/ for connection profile based on the network input yaml file, given in https://gerrit.hyperledger.org/r/#/c/31359/

Later, we need to to create connection profile for kube environment.;;;","21/May/19 7:58 PM;scottz;REVISED plans:
Write a new function inside networkLauncher.js, to perform the same duties as gen_PTEcfg.sh, to be called from main thread in networkLauncher.js (with an argument representing the network config information). It should generate a yaml version of connection profile, which could be used by PTE or any other admin or traffic tool to read in the network connection profile and run tests against the network.

That said, we are also considering an alternative to write a ""GO"" language version on networkLauncher instead of nodejs, so we should wait until decision is made.;;;","23/May/19 10:14 PM;dongming;[~rameshthoomu] an sample connection profile, fabric-test/tools/NL/sampleConnectionProfile.yaml, is for your reference.
Let me know if anything missing the sample connection profile.;;;","12/Jun/19 6:31 AM;scottz;Obviously, by now you all know we are proceeding with GO version of NL. Refer to https://gerrit.hyperledger.org/r/c/fabric-test/+/31479;;;","30/Jul/19 3:33 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32199/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Read dependencies on LSCC and _lifecycle must create a serialisable history of chaincode invocations and lifecycle operations,FAB-15417,39755,39554,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/May/19 12:23 AM,08/Jun/19 4:36 PM,28/Oct/23 3:08 AM,08/Jun/19 4:36 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nef:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 5:27 PM;ales;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31147/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
discovery/test/integration_test.go fails to generate crypto materials,FAB-15418,39756,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,10/May/19 12:31 AM,11/May/19 2:09 AM,28/Oct/23 3:08 AM,11/May/19 2:09 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"This test is currently a no-op as it fails during generation of the crypto materials in TestMain and simply returns upon an error. 
{code:java}
failed generating artifacts: +cryptogen: error: open ../../examples/e2e_cli/crypto-config.yaml: no such file or directory, try --help
: exit status 1ok  	github.com/hyperledger/fabric/discovery/test	4.758s {code}
cryptogen fails because it's looking for its yaml files in the long dead examples/e2e_cli directory. This task will simply add the necessary yaml files to discovery/test/testdata.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nen:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/May/19 1:32 AM;wlahti;[https://gerrit.hyperledger.org/r/c/31302/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Private data must function correctly during the transition between old and new lifecycle,FAB-15419,39757,39554,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,ales,ales,10/May/19 12:31 AM,08/Jun/19 4:48 PM,28/Oct/23 3:08 AM,08/Jun/19 4:48 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In particular, dissemination rules must be honored correctly when the channel still runs with the 1.4 capability with 2.0 peer binaries, when the channel is upgraded to 2.0 and when the chaincode definition is upgraded.",,ales,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nev:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,manish-sethi,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/May/19 5:05 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/31581/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode to chaincode invocations must work when one chaincode is defined in the legacy and the other in the new,FAB-15420,39758,39554,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,10/May/19 12:32 AM,22/Jul/19 11:13 PM,28/Oct/23 3:08 AM,22/Jul/19 11:13 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15903,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nf3:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jun/19 1:05 AM;ales;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31730/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Service discovery must function correctly during the transition between old and new lifecycle,FAB-15421,39759,39554,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,10/May/19 12:33 AM,21/Jun/19 4:34 AM,28/Oct/23 3:08 AM,21/Jun/19 4:34 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"In particular, service discovery must return correct results when the channel still runs with the 1.4 capability with 2.0 peer binaries, when the channel is upgraded to 2.0 and when the chaincode definition is upgraded.",,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nfb:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jun/19 5:42 AM;wlahti;https://gerrit.hyperledger.org/r/c/fabric/+/31843

-Need to step away and come back fresh to determine if more tests are needed under the ""discovers peer membership"" test, hence the Work In Progress tag on gerrit.- Good to go.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reduce mainline fabric dependency on bccsp to most basic interfaces,FAB-15422,39760,,Story,To Do,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,10/May/19 1:32 AM,28/Oct/19 11:45 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,Future,,,,,,,,,,0,ipm,,,,,"There are many places throughout fabric where the bccsp.BCCSP interface is referenced but it is only used for hashing and signing.  In these scenarios, we need to reduce the scope of the interfaces down to the minimal requirements.

Futher, in many cases, the golang crypto interfaces can be used yet we have placed a dependency on bccsp.Key. These should be evaluated and replaced as appropriate.",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15407,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00n2e:9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip comm conn.go hygiene,FAB-15424,39765,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,MHBauer,MHBauer,10/May/19 8:47 AM,22/Jun/19 3:33 PM,28/Oct/23 3:08 AM,11/May/19 1:34 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,hygiene,ipm,,,,"some dead-ish code and non-idiomatic go to refactor away.

I was looking at this file as a whole while looking at the stack-traces for a bug.",,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15787,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ngn:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
discovery test,FAB-15425,39766,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,MHBauer,MHBauer,10/May/19 9:40 AM,12/May/19 7:11 AM,28/Oct/23 3:08 AM,12/May/19 7:11 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"DATA RACE

=== RUN   TestUpdate
=== PAUSE TestUpdate
=== CONT  TestUpdate
==================
WARNING: DATA RACE
Write at 0x00c00011b690 by goroutine 160:
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).UpdateEndpoint()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:956 +0xb1
  github.com/hyperledger/fabric/gossip/discovery.TestUpdate()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:738 +0x74a
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163

Previous read at 0x00c00011b690 by goroutine 39:
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).isSentByMe()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:553 +0x298
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:354 +0x9c3
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:304 +0x162

Goroutine 160 (running) created at:
  testing.(*T).Run()
      /Users/mhb/.go/src/testing/testing.go:916 +0x65a
  testing.runTests.func1()
      /Users/mhb/.go/src/testing/testing.go:1157 +0xa8
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163
  testing.runTests()
      /Users/mhb/.go/src/testing/testing.go:1155 +0x523
  testing.(*M).Run()
      /Users/mhb/.go/src/testing/testing.go:1072 +0x2eb
  main.main()
      _testmain.go:86 +0x222

Goroutine 39 (running) created at:
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:120 +0x85d
  github.com/hyperledger/fabric/gossip/discovery.createDiscoveryInstanceThatGossipsWithInterceptors()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:388 +0x735
  github.com/hyperledger/fabric/gossip/discovery.createDiscoveryInstanceThatGossips()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:357 +0x9c
  github.com/hyperledger/fabric/gossip/discovery.TestUpdate()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_test.go:345 +0x4a6
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163
==================",,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ngv:",,,,Unset,Unset,,"go test -count 10000 -failfast -race -v -run TestUpdate

fails within 1-10 runs",,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky Raft UT: [Fail] Chain 3-node Raft cluster when reconfiguring raft cluster reconfiguration when Leader is disconnected after cert rotation [It] still configures communication after failed leader transfer attempt ,FAB-15426,39767,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,10/May/19 1:48 PM,23/Jul/19 1:57 AM,28/Oct/23 3:08 AM,23/Jul/19 1:57 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ci-flake,ipm,,,,"{code}
08:43:23 • Failure [11.163 seconds]
08:43:23 Chain
08:43:23 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:70
08:43:23   3-node Raft cluster
08:43:23   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1451
08:43:23     when reconfiguring raft cluster
08:43:23     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1585
08:43:23       reconfiguration
08:43:23       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1795
08:43:23         when Leader is disconnected after cert rotation
08:43:23         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1928
08:43:23           still configures communication after failed leader transfer attempt [It]
08:43:23           /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1929
08:43:23 
08:43:23           Timed out after 10.000s.
08:43:23           Expected
08:43:23               <int>: 1
08:43:23           to equal
08:43:23               <int>: 2
08:43:23 
08:43:23           /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1979
{code}
https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12054/consoleFull",,guoger,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nh3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jyellick,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jul/19 1:35 AM;guoger;A bit out-of-date, re-open if this surfaces again;;;","18/Jul/19 12:40 PM;jyellick;Just hit this again here: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13725/console;;;","18/Jul/19 4:39 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/32386;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert qscc functionality to proper gRPC API,FAB-15427,39771,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,10/May/19 7:28 PM,28/Oct/20 8:15 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"It really does not make sense that the functionality for retrieving chain information is implemented as system chaincode (qscc). It would be cleaner to expose a set of nice APIs for retrieving this information. We can still require the requests to be signed and can enforce ACLs.

In addition to switching the current qscc queries, we should switch GetHistoryForKey() from a chaincode api to a gRPC api, since it doesn't deal with current state like all the other chaincode apis. We can revisist the full set of historical queries at the same time (historical blocks, historical transactions, historical state).",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15481,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00nhr:",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Deactivate ""Edit on Github"" link in documentation",FAB-15428,39774,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,abitrolly,abitrolly,10/May/19 10:25 PM,24/Sep/19 11:58 PM,28/Oct/23 3:08 AM,24/Sep/19 11:58 PM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,help-wanted,,,,,"To save contributor's time, the following modifications could be made to docs and GitHub repository:
 # Disable ""Edit on GitHub"" link on readthedocs
 # Add contribution guidelines and PR template that mentions that current repo is read-only [https://github.com/hyperledger/fabric/pull/244]
 # Replace ""Edit on GitHub"" with ""Edit on Gerrit""",,abitrolly,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nif:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),abitrolly,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Sep/19 11:57 PM;jyellick;We're actually moving off gerrit to github in the coming weeks, so this issue should resolve itself.  If, after the move, things do not work correctly, please feel free to re-open.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB 2.3 image doesn't exist for s390x which fails docker-thirdparty in s390x builds,FAB-15429,39777,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,vijaypunugubati,sambhavdutt,sambhavdutt,10/May/19 11:50 PM,12/Jun/19 3:49 AM,28/Oct/23 3:08 AM,12/Jun/19 3:49 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-build,,,,,,0,ci-failure,,,,,"As there is no CouchDB 2.3 image for s390x, the 'docker-thirdparty' target fails in the s390x nodes. The fabric-end-2-end-daily and unit-test-coverage for s390x jobs are failing when the make docker-thirdparty is run.

*Branch:* master
*Platform:* s390x
*Error Snippet:*

{code:java}
20:46:42 docker pull couchdb:2.3
20:46:42 2.3: Pulling from library/couchdb
20:46:42 no matching manifest for unknown in the manifest list entries
20:46:42 Makefile:126: recipe for target 'docker-thirdparty' failed
20:46:42 make: *** [docker-thirdparty] Error 1
20:46:42 Build step 'Execute shell' marked build as failure
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-s390x/102/",,denyeart,sambhavdutt,scottz,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,86cda71fcc71bf77e234f046954bec18a47ac103,Unset,No,,,"1|i00nj3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sambhavdutt,scottz,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jun/19 3:44 AM;vijaypunugubati;As there is no CouchDB 2.3 image for s390x, the 'docker-thirdparty' target fails in the s390x nodes. The fabric-unit-test-coverage for s390x job is failing, and this job has been disabled.;;;","12/Jun/19 3:49 AM;vijaypunugubati;Please refer this CR [https://gerrit.hyperledger.org/r/#/c/ci-management/+/31462/] for the above change. 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
zap logger cpu high cost when high workload,FAB-15432,39784,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,grapebaba,grapebaba,13/May/19 4:27 PM,25/Jun/19 8:41 PM,28/Oct/23 3:08 AM,11/Jun/19 11:57 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-common,,,,,,0,ipm,ipm-planned,,,,"We test fabric 1.4.1 using caliper, we found time.Now cause high cost. It seems related a zap bug [https://github.com/uber-go/zap/pull/671].",,denyeart,grapebaba,guoger,inatatsu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15652,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/19 4:27 PM;grapebaba;image-2019-05-13-15-44-14-611.png;https://jira.hyperledger.org/secure/attachment/17227/image-2019-05-13-15-44-14-611.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,grapebaba,guoger,inatatsu,sykesm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/May/19 6:58 PM;guoger;Did some preliminary investigation and I think it's a problem with Fabric logging instead of Zap logger:

https://gerrit.hyperledger.org/r/c/27273 makes {{LevelEnabler}} *always* return {{true}}, which leads to {{time.Now}} in [check|https://github.com/uber-go/zap/blob/8a2ee5670ced5d94154bf385dc6a362722945daf/logger.go#L265] being invoked for disabled log levels as well, see [this|https://github.com/uber-go/zap/blob/8a2ee5670ced5d94154bf385dc6a362722945daf/sugar.go#L221].

thoughts? [~wlahti] [~sykesm];;;","13/May/19 8:03 PM;sykesm;It's an issue with both. Fabric logging is a veneer on zap, the zap core will always collect the time stamp, and the zap maintainers have said they're not fixing that.

The level enabler change impacts the sugared logger (which is one path through) but it won't change the behavior of the standard zap logger.

I'll look at the level enabler some time in the next couple of weeks.;;;","08/Jun/19 5:53 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31774;;;","10/Jun/19 8:40 PM;denyeart;and cherry picked to release-1.4: https://gerrit.hyperledger.org/r/#/c/fabric/+/31805/;;;","12/Jun/19 4:03 AM;sykesm;Discovered a side-effect of this change today but I'm not sure it's worth addressing.

We have a metrics that count the number of log events that are checked and emitted. Before this change, we would count all level checks. With this change, we will not count level checks that occur below the minimum logging threshold.

In concrete terms, we may have seen a gazillion debug level logs counted as checked before this change and now see 0.

I think we should wait and see if this is an issue or not.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ACP: Multi-organization network,FAB-15434,39786,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,odowdaibm,odowdaibm,odowdaibm,13/May/19 7:59 PM,13/May/19 7:59 PM,28/Oct/23 3:08 AM,,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,"* Create four organization network.
 * Directory structure reflects independent organization collaboration
 ** Includes four organization configuration transactions
 ** Includes four organization separate admin identities
 * Each organization has separate Docker Compose infrastructure
 ** CA, Orderer, Peer (incl. Couch), CLI in separate containers
 * Uses Cucumber for single or mult-step set-up (and test)

 ",,jmason900,odowdaibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,FAB-13844,,,No,,Unset,No,,,"1|i00nl3:",,,,Unset,Unset,,(Please add steps to reproduce),,No,,,,,,Unset,,Unset,,(Please add usage information),jmason900,odowdaibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Panic error observed in Idemix Bridge test due to invalid credentials(first instance),FAB-15436,39788,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,13/May/19 10:27 PM,06/Jun/19 6:23 AM,28/Oct/23 3:08 AM,06/Jun/19 6:23 AM,v1.4.2,,,,,,,,,,,,,,,,,fabric-build,,,,,,0,ci-first-failure,unit-test,,,,"Panic error observed in the Idemix Bridge test due to invalid credentials, this is the first instance of this error.

*Branch:* release-1.4
*Platform:* s390x
*Error Snippet:*

{code:java}
21:07:08 ------------------------------
21:07:08 ���! Panic [0.260 seconds]
21:07:08 Idemix Bridge
21:07:08 /w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:23
21:07:08   setting up the environment with one issuer and one user
21:07:08   /w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:596
21:07:08     producing an idemix signature
21:07:08     /w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:1083
21:07:08       fails when the credential is invalid [It]
21:07:08       /w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:1158
21:07:08 
21:07:08       Test Panicked
21:07:08       runtime error: invalid memory address or nil pointer dereference
21:07:08       /opt/go/go1.11.5.linux.s390x/src/runtime/panic.go:513
21:07:08 
21:07:08       Full Stack Trace
21:07:08       	/opt/go/go1.11.5.linux.s390x/src/runtime/panic.go:513 +0x1d4
21:07:08       github.com/hyperledger/fabric/bccsp/idemix/bridge_test.glob..func1.9.6.5()
21:07:08       	/w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_test.go:1187 +0x548
21:07:08       github.com/hyperledger/fabric/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync(0xc000576660, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
21:07:08       	/w/workspace/fabric-unit-test-coverage-daily-release-1.4-s390x/gopath/src/github.com/hyperledger/fabric/bccsp/idemix/bridge/bridge_suite_test.go:18 +0x9a
21:07:08       testing.tRunner(0xc0000ff200, 0x54d978)
21:07:08       	/opt/go/go1.11.5.linux.s390x/src/testing/testing.go:827 +0xcc
21:07:08       created by testing.(*T).Run
21:07:08       	/opt/go/go1.11.5.linux.s390x/src/testing/testing.go:878 +0x37a
21:07:08       
21:07:08 ------------------------------

21:07:08 Summarizing 1 Failure:
21:07:08 
21:07:08 [Panic!] Idemix Bridge setting up the environment with one issuer and one user producing an idemix signature [It] fails when the credential is invalid 
21:07:08 /opt/go/go1.11.5.linux.s390x/src/runtime/panic.go:513
21:07:08 
21:07:08 Ran 95 of 95 Specs in 5.516 seconds
21:07:08 FAIL! -- 94 Passed | 1 Failed | 0 Pending | 0 Skipped
21:07:08 --- FAIL: TestPlain (5.52s)
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-s390x/69/",,denyeart,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,d34754c0e5dff70d971ead998403aca4c3028913,Unset,No,,,"1|i00nlj:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/May/19 12:17 AM;sambhavdutt;This error has not been seen in the last build. 

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-release-1.4-s390x/70/;;;","06/Jun/19 6:23 AM;denyeart;If there was only one occurrence, let's close.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Broken V2.0 download,FAB-15437,39789,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,denyeart,negupta,negupta,14/May/19 12:21 AM,14/May/19 4:52 AM,28/Oct/23 3:08 AM,14/May/19 4:10 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"Current command to download the v2.0 alpha downloads the 1.4.1 binaries and samples instead.

 

Details:

I cleaned the images and samples from my machine: I ran the command curl -sSL http://bit.ly/2ysbOFE | bash -s -- 2.0.0-alpha 2.0.0-alpha 0.4.15

It downloaded the 1.4 images:

```

===> List out hyperledger docker images
hyperledger/fabric-ca 1.4.1 3a1799cda5d7 4 weeks ago 252MB
hyperledger/fabric-ca latest 3a1799cda5d7 4 weeks ago 252MB
hyperledger/fabric-tools 1.4.1 432c24764fbb 4 weeks ago 1.55GB
hyperledger/fabric-tools latest 432c24764fbb 4 weeks ago 1.55GB
hyperledger/fabric-ccenv 1.4.1 d7433c4b2a1c 4 weeks ago 1.43GB
hyperledger/fabric-ccenv latest d7433c4b2a1c 4 weeks ago 1.43GB
hyperledger/fabric-orderer 1.4.1 ec4ca236d3d4 4 weeks ago 173MB
hyperledger/fabric-orderer latest ec4ca236d3d4 4 weeks ago 173MB
hyperledger/fabric-peer 1.4.1 a1e3874f338b 4 weeks ago 178MB
hyperledger/fabric-peer latest a1e3874f338b 4 weeks ago 178MB
hyperledger/fabric-javaenv 1.4.1 b8c9d7ff6243 4 weeks ago 1.74GB
hyperledger/fabric-javaenv latest b8c9d7ff6243 4 weeks ago 1.74GB
hyperledger/fabric-zookeeper 0.4.15 20c6045930c8 7 weeks ago 1.43GB
hyperledger/fabric-zookeeper latest 20c6045930c8 7 weeks ago 1.43GB
hyperledger/fabric-kafka 0.4.15 b4ab82bbaf2f 7 weeks ago 1.44GB
hyperledger/fabric-kafka latest b4ab82bbaf2f 7 weeks ago 1.44GB
hyperledger/fabric-couchdb 0.4.15 8de128a55539 7 weeks ago 1.5GB
hyperledger/fabric-couchdb latest 8de128a55539 7 weeks ago 1.5GB
nikhils-air:~ nikhilgupta$

```

 

It also downloaded the wrong samples:

```
nikhils-air:first-network nikhilgupta$ git branch
* (HEAD detached at v1.4.1)
 master

```

 ",,denyeart,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15316,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nlr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"14/May/19 4:07 AM;denyeart;bootstrap.sh download script got broken by [https://gerrit.hyperledger.org/r/#/c/31240]

It has been fixed today with [https://gerrit.hyperledger.org/r/#/c/31342|https://gerrit.hyperledger.org/r/#/c/31342/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
V2_0 Capabilities flag integration tests,FAB-15438,39790,39594,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,14/May/19 12:35 AM,20/May/19 1:19 AM,28/Oct/23 3:08 AM,20/May/19 1:19 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,Check that package/install are allowed even before enabling the V2_0 capabilities flag but approve/commit chaincode definition are denied. ,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nlz:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/May/19 2:29 AM;wlahti;https://gerrit.hyperledger.org/r/c/31345/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NL creates ca per org,FAB-15439,39793,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,14/May/19 3:14 AM,24/Jul/19 6:09 AM,28/Oct/23 3:08 AM,24/Jul/19 6:08 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,NL creates ca per org,,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00nmf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jul/19 6:09 AM;scottz;already merged with earlier k8s NL code.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Approve chaincode definition for my org integration test,FAB-15440,39794,39594,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,14/May/19 3:23 AM,23/May/19 2:54 AM,28/Oct/23 3:08 AM,23/May/19 2:54 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nmn:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/May/19 3:42 AM;wlahti;https://gerrit.hyperledger.org/r/c/31347/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NL: eliminate unused NL options for deprecated fabric tuning vars,FAB-15441,39796,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,scottz,scottz,14/May/19 4:03 AM,25/Jul/19 3:30 AM,28/Oct/23 3:08 AM,25/Jul/19 3:30 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Delete some options from NL. 
We won't need to specify these in the new yaml input file.

    -h: hash type, default=SHA2
    -s: security type, default=256
    -G: src MSP base directory, default=/opt/hyperledger/fabric/msp/crypto-config
",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|hzwqrk:g",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jul/19 3:30 AM;scottz;Just for cleaning up old version of tool; no impact anyways, so skip and close this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
launcher tool support for . in the company name for kube cluster ,FAB-15442,39797,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,dongming,dongming,14/May/19 4:23 AM,22/Jan/20 7:08 AM,28/Oct/23 3:08 AM,22/Jan/20 7:08 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,NL uses - in the company name for kube cluster ,,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|i00whf:9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 7:08 AM;scottz;NL is being sunset soon. No need for this.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix typo,FAB-15443,39801,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,chang1219,chang1219,chang1219,14/May/19 2:23 PM,06/Jun/19 7:42 AM,28/Oct/23 3:08 AM,06/Jun/19 7:41 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,,,chang1219,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nnz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),chang1219,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Minor refactoring to connectionStore,FAB-15444,39802,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,14/May/19 3:55 PM,14/May/19 9:41 PM,28/Oct/23 3:08 AM,14/May/19 9:41 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"- Merge closeConn() and closeByPKIid() to one method
- Add a comment in registerConn() about the needless of acquiring a lock",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00no7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/May/19 4:13 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/#/c/31353/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
adjust discovery service in the peer to derive endpoints from the new location,FAB-15446,39806,26285,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,14/May/19 9:51 PM,08/Jun/19 2:01 AM,28/Oct/23 3:08 AM,18/May/19 9:25 PM,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00np3:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/May/19 4:49 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/31422/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky Raft UT: does not deadlock if leader steps down while config block is in-flight,FAB-15448,39814,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,15/May/19 12:57 AM,26/Feb/21 5:04 AM,28/Oct/23 3:08 AM,05/Jun/19 2:58 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"This happens when the leader change 1 -> 0 -> 1 happens too fast that node2 (follower) does not emit the 0 -> 1 trigger, which is expected by tests.

Although the probability of this failure should be very low

{code}
17:54:25 ------------------------------
17:54:25 • Failure [11.029 seconds]
17:54:25 Chain
17:54:25 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:70
17:54:25   3-node Raft cluster
17:54:25   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1451
17:54:25     when reconfiguring raft cluster
17:54:25     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1585
17:54:25       reconfiguration
17:54:25       /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1795
17:54:25         does not deadlock if leader steps down while config block is in-flight [It]
17:54:25         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:2550
17:54:25 
17:54:25         Timed out after 10.000s.
17:54:25         When passed a matcher, ReceiveMatcher's channel *must* receive something.
17:54:25 
17:54:25         /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:3941
17:54:25 ------------------------------
{code}",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/May/19 12:57 AM;guoger;UT.log;https://jira.hyperledger.org/secure/attachment/17233/UT.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nqv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/May/19 3:23 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31560;;;","26/Feb/21 5:04 AM;sykesm;It's been a while but this test is failing in a different way.


{code:java}
Send artificial MsgTimeoutNow to elect node 1
STEP: Submitting first tx to cut the block
STEP: Sending config transaction
STEP: Ticking leader till it steps down
STEP: Re-electing 1 as leader
Send artificial MsgTimeoutNow to elect node 1
STEP: Submitting tx to confirm network is still working------------------------------
• Failure [12.400 seconds]
Chain
/Users/sykesm/fabric/orderer/consensus/etcdraft/chain_test.go:101
  3-node Raft cluster
  /Users/sykesm/fabric/orderer/consensus/etcdraft/chain_test.go:1555
    when reconfiguring raft cluster
    /Users/sykesm/fabric/orderer/consensus/etcdraft/chain_test.go:1705
      reconfiguration
      /Users/sykesm/fabric/orderer/consensus/etcdraft/chain_test.go:1813
        does not deadlock if leader steps down while config block is in-flight [It]
        /Users/sykesm/fabric/orderer/consensus/etcdraft/chain_test.go:2415        Timed out after 10.003s.
        Expected
            <int>: 1
        to equal
            <int>: 2        /Users/sykesm/fabric/orderer/consensus/etcdraft/chain_test.go:2471
 {code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Sample byfn with -o etcdraft option orderers die,FAB-15449,39815,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,sambhavdutt,rickr,rickr,15/May/19 2:23 AM,16/May/19 2:42 AM,28/Oct/23 3:08 AM,15/May/19 11:07 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Seen this on both master (v2.0) and on 1.4 release ,,denyeart,rickr,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nr3:",,,,Unset,Unset,,"Built fabric/ca from master docker images
Also in fabric make cryptogen  configtxgen
Set PATH to include  .build/bin to pick up these tools 
in fabric-samples/first-network 
./byfn.sh generate
./byfn.sh up  -o etcdraft 

would expect see running network .... 

$docker ps -a
CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS                      PORTS                                NAMES
5d843b6f2d22        hyperledger/fabric-tools:latest     ""/bin/bash""         16 minutes ago      Up 16 minutes                                                    cli
2aa7598fd61f        hyperledger/fabric-peer:latest      ""peer node start""   16 minutes ago      Up 16 minutes               7051/tcp, 0.0.0.0:10051->10051/tcp   peer1.org2.example.com
10abca0cb6fd        hyperledger/fabric-orderer:latest   ""orderer""           16 minutes ago      Exited (2) 16 minutes ago                                        orderer3.example.com
1f7963a178df        hyperledger/fabric-orderer:latest   ""orderer""           16 minutes ago      Exited (2) 16 minutes ago                                        orderer2.example.com
49bc6298df5e        hyperledger/fabric-peer:latest      ""peer node start""   16 minutes ago      Up 16 minutes               0.0.0.0:7051->7051/tcp               peer0.org1.example.com
c9da18f190cd        hyperledger/fabric-orderer:latest   ""orderer""           16 minutes ago      Exited (2) 16 minutes ago                                        orderer5.example.com
addb0680b13a        hyperledger/fabric-peer:latest      ""peer node start""   16 minutes ago      Up 16 minutes               7051/tcp, 0.0.0.0:8051->8051/tcp     peer1.org1.example.com
3b16ffd055f8        hyperledger/fabric-orderer:latest   ""orderer""           16 minutes ago      Exited (2) 16 minutes ago                                        orderer4.example.com
c7e1673503b1        hyperledger/fabric-peer:latest      ""peer node start""   16 minutes ago      Up 16 minutes               7051/tcp, 0.0.0.0:9051->9051/tcp     peer0.org2.example.com
07a61aa50ebf        hyperledger/fabric-orderer:latest   ""orderer""           16 minutes ago      Exited (2) 16 minutes ago                                        orderer.example.com

orderers have exited 

orderer log->
https://ctrlv.it/id/179296/685877902
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,rickr,sambhavdutt,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/May/19 11:07 PM;denyeart;Could not reproduce. Rick also said he got it working.;;;","16/May/19 12:51 AM;sambhavdutt;I was able to run the *etcdraft* on 1.4 and 2.0 in CI. 
I have now included the Raft tests as a part of the daily BYFN in the end-to-end job https://gerrit.hyperledger.org/r/#/c/31384/

Sandbox test logs for successful Raft tests on 1.4 and master, these logs will remain until end of Friday this week

https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-daily-release-1.4-x86_64/lastSuccessfulBuild/artifact/Docker_Container_Logs/

https://jenkins.hyperledger.org/sandbox/view/All/job/fabric-end-2-end-daily-master-x86_64/lastSuccessfulBuild/artifact/Docker_Container_Logs/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"History database results exclude transactions from block 256, 512, 768, etc",FAB-15450,39817,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,denyeart,denyeart,15/May/19 5:10 AM,01/Aug/19 10:19 PM,28/Oct/23 3:08 AM,12/Jun/19 12:33 AM,v1.1.2,v1.2.1,v1.3.0,v1.4.0,v1.4.1,,,,,,,,,v1.1.2,v1.2.2,v1.4.2,v2.0.0,fabric-ledger,,,,,,5,,,,,,"[https://gerrit.hyperledger.org/r/#/c/26174/] added logic starting in released v1.3.0 and v1.2.1 (and unreleased v1.1.2) to skip keys with nil bytes from the history db results.

Unfortunately, at multiples of 256, the encoded block number in the history db key will contain nil bytes, and therefore these history keys will be filtered out from the history results.

Here is one example of a marble1 key from block 256 getting skipped:


{code:java}
2019-05-14 15:43:26.595 EDT [historyleveldb] Next -> DEBU 7b7 Some other key [[]byte{0x6d, 0x61, 0x72, 0x62, 0x6c, 0x65, 0x73, 0x0, 0x6d, 0x61, 0x72, 0x62, 0x6c, 0x65, 0x31, 0x0, 0x2, 0x1, 0x0, 0x0}] found in the range while scanning history for key [""marble1""]. Skipping...
{code}


Note the second to last byte 0x0 is part of the encoded block number 256 that causes the history key to get skipped. Same issue with block 512, 768, etc.",,baohua,biligunb,Chun 66,crashmark93,denyeart,GuillaumeTong,Hubertz,manish-sethi,wenjian,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15490,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zz4i","Prior to the fix, history database queries excluded transactions from
blocks that were multiples of 256 (block 256, 512, 768, etc).",Yes,,Unset,Unset,Ledger v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,biligunb,Chun 66,crashmark93,denyeart,GuillaumeTong,Hubertz,manish-sethi,wenjian,ymlbright,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.1,release-1.2,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/May/19 12:11 PM;manish-sethi;Ah, don't know how this fact slipped through my mind that the encoding scheme for block numbers is not varint and it could contain nil bytes :-(

However, considering this, we have even bigger problem i.e., clashes are possible in the keys if they keys were to contain empty bytes. I could construct one such example - the historydb key for both <ns, key, 16777473, 1> and <ns, key\x00\x04\x01, 1, 1> would be same (the tuple is in the format <namespace, key, blockNum, tranNum>).

Perhaps, we will have to go with the alternate approach that we did not go earlier since that required rebuilding historydb 
- https://gerrit.hyperledger.org/r/#/c/26155/;;;","15/May/19 8:01 PM;denyeart;In v1.x we can further extend the https://gerrit.hyperledger.org/r/#/c/26174/ fix.

If blockNumTranNumBytes contains nil character AND blockNumTranNumBytes decodes to a valid block and tran number (like 256), then it may be a valid entry and we should check the block/tran number in block storage (see next step).
If blockNumTranNumBytes contains nil character AND blockNumTranNumBytes does not decode to a valid block and tran number, then we know it was a false entry (user key with nils) and we can immediately remove it from the result set.

For the entries that passed the first check above, we already pull the associated block/tran from block storage to get the write set for the key.  If we don't find the block/tran or don't find the expected key in the block/tran write set, then we know it was a false entry in the result set and we can then exclude it from the ultimate result set that gets returned to the client.

This additional check will resolve the problem that https://gerrit.hyperledger.org/r/#/c/26174/ introduced.

In v2.0, we can rebuild history db to a new format that protects against these edge cases.;;;","15/May/19 11:26 PM;manish-sethi;We can certainly go for next level of hack to solve this problem partially. However, lets be clear that the final result set could still be missing of entries that may have possibly be overwritten because of key clashes - because the underlying key encoding scheme is not lossless.;;;","22/May/19 8:32 AM;baohua;Seems no perfect solution now.
I feel we can improve as david suggested, and mark this as known issue in 1.x.
The current situation is too easy to cause issues.;;;","24/May/19 10:04 PM;wenjian;CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31519/]

Fixed the problem that blocks with blockNum in multiple of 256 are skipped in history search - see Dave's comment above.
 * decode, pull transaction, and look for key for all blockNumTranNumBytes no matter if it contains a nil byte
 * skip an entry if its blockNumTranNumBytes contains nil byte and an error occurs in above process

 ;;;","12/Jun/19 12:13 AM;wenjian;CRs:

2.0: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31519/]

1.4: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31807/]

1.3: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31808/]

1.2: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31814/]

1.1: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31835/];;;","12/Jun/19 10:07 AM;baohua;Thanks for the fixing, [~wenjian].

Besides, wanna indicate that with the ""decode, pull transaction, and look for key for all blockNumTranNumBytes no matter if it contains a nil byte"", the performance penalty is not be negligible.

Let's consider this in next-gen ledger design.

 ;;;","12/Jun/19 12:18 PM;wenjian;[~baohua] Thank you for your comments. Agree that we should revisit key schema in a future release so that we can avoid key clashes and false keys returned in range query.

The performance penalty due to extra validation for false keys really depends on how many false keys fall in the range. For most false keys, we should be able to skip before loading the block from block storage.
 * Not every key with a nil byte is a false key. Only ""key\x00..."" are false keys when querying for ""key""
 * Most false keys will be skipped due to decoding error or not being able to consume all the (false) blockNumTranNumBytes in decoding. 
 * If a false key can be decoded to blockNum/tranNum, either the blockNum or tranNum will be a big number (because a false key has extra bytes in blockNumTranNumBytes), the chance that blockNum/tranNum maps to an existing block/tran is low. Therefore, no need to pull the block/transaction and look for the key in most cases.

 ;;;","13/Jun/19 3:53 AM;denyeart;The improved format for history database is planned for v2.0 and tracked by FAB-15490.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestMembershipConvergence races with TestIdentityExpiration,FAB-15451,39818,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,MHBauer,MHBauer,15/May/19 7:10 AM,26/Mar/20 6:13 AM,28/Oct/23 3:08 AM,26/Mar/20 6:13 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"on a239ae0ab290618597c0b4f33ae9c2e8ee5ff102

First race looks like because they share access to:
var expirationTimes = map[string]time.Time{}

The second race I've seen before all over. Is it is somehow a connection being shared?
Either way, it has to do with the conn.stopWG.Add() being called after conn.stopWG.Wait() has 0.

https://golang.org/pkg/sync/#WaitGroup.Add

The two races:
==================
WARNING: DATA RACE
Write at 0x00c00021ab40 by goroutine 8:
  runtime.mapassign_faststr()
      /home/mhb/.go/src/runtime/map_faststr.go:202 +0x0
  github.com/hyperledger/fabric/gossip/gossip.TestIdentityExpiration()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:1455 +0x511
  testing.tRunner()
      /home/mhb/.go/src/testing/testing.go:865 +0x163

Previous read at 0x00c00021ab40 by goroutine 266:
  runtime.mapaccess2_faststr()
      /home/mhb/.go/src/runtime/map_faststr.go:107 +0x0
  github.com/hyperledger/fabric/gossip/gossip.(*naiveCryptoService).Expiration()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_test.go:147 +0xe5
  github.com/hyperledger/fabric/gossip/identity.(*identityMapperImpl).Put()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/identity/identity.go:113 +0xcf
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).authenticateRemotePeer()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:449 +0x9c9
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).GossipStream()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:550 +0x18a
  github.com/hyperledger/fabric/protos/gossip._Gossip_GossipStream_Handler()
      /home/mhb/go/src/github.com/hyperledger/fabric/protos/gossip/message.pb.go:2758 +0xcd
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1176 +0x1669
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1256 +0x12e5
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:691 +0xac

Goroutine 8 (running) created at:
  testing.(*T).Run()
      /home/mhb/.go/src/testing/testing.go:916 +0x65a
  testing.runTests.func1()
      /home/mhb/.go/src/testing/testing.go:1157 +0xa8
  testing.tRunner()
      /home/mhb/.go/src/testing/testing.go:865 +0x163
  testing.runTests()
      /home/mhb/.go/src/testing/testing.go:1155 +0x523
  testing.(*M).Run()
      /home/mhb/.go/src/testing/testing.go:1072 +0x2eb
  main.main()
      _testmain.go:96 +0x222

Goroutine 266 (running) created at:
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:689 +0xb8
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).operateHeaders()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:421 +0x1622
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).HandleStreams()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:461 +0x37a
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:687 +0x170
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleRawConn.func1()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:649 +0x50
==================


==================
WARNING: DATA RACE
Write at 0x00c0002f75e0 by goroutine 1941:
  sync.(*WaitGroup).Wait()
      /home/mhb/.go/src/internal/race/race.go:41 +0xef
  github.com/hyperledger/fabric/gossip/comm.(*connection).close()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:247 +0x1c7
  github.com/hyperledger/fabric/gossip/comm.(*connectionStore).onConnected()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:163 +0x70c
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).GossipStream()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:557 +0x494
  github.com/hyperledger/fabric/protos/gossip._Gossip_GossipStream_Handler()
      /home/mhb/go/src/github.com/hyperledger/fabric/protos/gossip/message.pb.go:2758 +0xcd
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1176 +0x1669
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1256 +0x12e5
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:691 +0xac

Previous read at 0x00c0002f75e0 by goroutine 2075:
  sync.(*WaitGroup).Add()
      /home/mhb/.go/src/internal/race/race.go:37 +0x169
  github.com/hyperledger/fabric/gossip/comm.(*connection).serviceConnection()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:297 +0xf4

Goroutine 1941 (running) created at:
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:689 +0xb8
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).operateHeaders()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:421 +0x1622
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).HandleStreams()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:461 +0x37a
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:687 +0x170
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleRawConn.func1()
      /home/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:649 +0x50

Goroutine 2075 (finished) created at:
  github.com/hyperledger/fabric/gossip/comm.(*connectionStore).getConnection()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:124 +0x878
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).sendToEndpoint()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:231 +0x2ce
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).Send.func1()
      /home/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:218 +0x51
==================
",,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17608,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/May/19 7:10 AM;MHBauer;membership-identity-race.txt;https://jira.hyperledger.org/secure/attachment/17235/membership-identity-race.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nrj:",,,,Unset,Unset,," go test -race -v -run   'TestMembershipConvergence|TestIdentityExpiration'
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Mar/20 6:10 AM;MHBauer;maybe fixed by [https://github.com/hyperledger/fabric/pull/847] in [https://github.com/hyperledger/fabric/commits/124ae35ab54439150dd527031516e4fa25bfb92a]

dup of https://jira.hyperledger.org/browse/FAB-17608;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Merge registerConn() into onConnected() in connectionStore,FAB-15452,39819,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,15/May/19 3:42 PM,23/May/19 7:41 PM,28/Oct/23 3:08 AM,23/May/19 7:41 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"According to [~MHBauer]'s suggestion:
https://gerrit.hyperledger.org/r/#/c/31353/1/gossip/comm/conn.go@178",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nrr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/May/19 3:54 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/#/c/31375/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestValidatorBulkLoadingOfCache failure in CI,FAB-15453,39822,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ronenschafferibm,ronenschafferibm,15/May/19 9:21 PM,17/May/19 10:50 PM,28/Oct/23 3:08 AM,17/May/19 10:50 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,0,fabric-ci,,,,,"package: core/ledger/kvledger/txmgmt/validator/statebasedval

 [^consoleText.log]

[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12134/consoleText]

 
{code:java}
09:14:10 --- FAIL: TestValidatorBulkLoadingOfCache (33.06s)
09:14:10 panic: failed to start couchDB: database in container 1ce8468388450e8d13be092ebef4b6019212e670870107fc5b083e0024e93a78 did not start: context deadline exceeded [recovered]
09:14:10 panic: failed to start couchDB: database in container 1ce8468388450e8d13be092ebef4b6019212e670870107fc5b083e0024e93a78 did not start: context deadline exceeded{code}
[~denyeart]

[~manish-sethi]",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15396,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/May/19 9:43 PM;ronenschafferibm;consoleText.log;https://jira.hyperledger.org/secure/attachment/17237/consoleText.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ns7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
lockbasedtxmgr tests are failing intermittently in unit-test as Couchdb container did not start,FAB-15454,39823,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sambhavdutt,sambhavdutt,15/May/19 11:09 PM,06/Jun/19 10:12 PM,28/Oct/23 3:08 AM,06/Jun/19 10:12 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-build,,,,,,0,ci-flake,,,,,"lockbasedtxmgr tests are failing intermittently in unit-tests(merge job), panic error was observed as timeout exceeded, Couchdb container did not start

*Branch:* master

*Error Snippet:*

{code:java}
15:31:34     txmgr_test.go:538: Running test for TestEnv = couchDB_LockBasedTxMgr
15:31:34 panic: failed to start couchDB: database in container dd11bc466406585945f7e3082a317aa41b551aa1b46f971b03ffa6c79ead0901 did not start: context deadline exceeded [recovered]
15:31:34 	panic: failed to start couchDB: database in container dd11bc466406585945f7e3082a317aa41b551aa1b46f971b03ffa6c79ead0901 did not start: context deadline exceeded
15:31:34 
15:31:34 goroutine 11262 [running]:
15:31:34 testing.tRunner.func1(0xc001035000)
15:31:34 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:792 +0x6a7
15:31:34 panic(0x159f280, 0xc000333a30)
15:31:34 	/opt/go/go1.11.5.linux.amd64/src/runtime/panic.go:513 +0x1b9
15:31:34 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).setupCouch(0x22a60c0, 0x4, 0x16e0c76)
15:31:34 	/w/workspace/fabric-merge-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:110 +0x39c
15:31:34 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate.(*CouchDBCommonStorageTestEnv).Init(0x22a60c0, 0x18430c0, 0xc001035000)
15:31:34 	/w/workspace/fabric-merge-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go:122 +0x14a
15:31:34 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.(*lockBasedEnv).init(0x21b29c0, 0xc001035000, 0x16f080c, 0x17, 0x0, 0x0)
15:31:34 	/w/workspace/fabric-merge-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/pkg_test.go:75 +0xc6
15:31:34 github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr.TestTxValidationWithItr(0xc001035000)
15:31:34 	/w/workspace/fabric-merge-x86_64/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr/txmgr_test.go:540 +0x175
15:31:34 testing.tRunner(0xc001035000, 0x171da40)
15:31:34 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:827 +0x163
15:31:34 created by testing.(*T).Run
15:31:34 	/opt/go/go1.11.5.linux.amd64/src/testing/testing.go:878 +0x65a
15:31:34 FAIL	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	292.511s
{code}

*Build Log*
https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/6665/

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/6665/consoleFull",,btl5037,denyeart,sambhavdutt,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15476,,,,FAB-15396,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,d73c34427503406c53f99b75684271ecae1960d6,Unset,No,,,"1|i00nsf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,sambhavdutt,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/May/19 11:23 PM;sambhavdutt;It looks like a flake but I am not very certain about this.;;;","17/May/19 10:49 PM;wlahti;I created FAB-15396 for this and have a (temporary) CR fix for it to increase the start timeout for containers. [~denyeart] also opened FAB-15464 to investigate further. If there's anything you're aware of that can be done on the CI-side to address the slow startup of couchdb containers now that we're using the official CouchDB image (instead of fabric-couchdb), please add a comment to FAB-15464. Thanks!;;;","17/May/19 11:54 PM;btl5037;What about something like this as well

[https://gerrit.hyperledger.org/r/c/31417/]

I've added an update function which reuses the current CouchDB but initializes a new ledger. Reducing our exposure to the number of CouchDB containers we need to start. Also reduces the test runtime by 50 seconds;;;","18/May/19 12:14 AM;wlahti;Ah, good thinking all around!;;;","20/May/19 8:18 AM;btl5037;[https://gerrit.hyperledger.org/r/c/31417/]

Final refactor. Redid the entire lockbasedtxmgr package to reuse the same DB. One container vs. more than 30. Going to look at how much further I can reduce the number of couch instances we use by package. Increasing the timeout won't effect us as much anymore, as we only need to wait for one container now, instead of 30, so if we do have a timeout on the Couch startup, we will get it up front, rather than on the 30th startup.

Side effect unit tests go from 400 seconds to complete in the package, to 100 seconds total;;;","06/Jun/19 6:18 AM;denyeart;[~sambhavdutt] have you seen this problem since Brett improved the tests?;;;","06/Jun/19 10:12 PM;sambhavdutt;[~denyeart]

I have not observed this error happening in the unit-tests after the fix. Marking this as Done/Closed.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NL bring up network based on the yaml input,FAB-15455,39831,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,dongming,dongming,16/May/19 1:20 AM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The yaml input, see FAB-15405, contains information for each org etc.  NL will need to update based on these information including configtx, cryptogen, network etc.",,bharadwajambati1,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,FAB-15405,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00ntz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,dongming,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/Jun/19 6:06 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Typo of a parameter ""networkID"" in sampleconfig/core.yaml",FAB-15457,39840,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,16/May/19 7:08 AM,21/May/19 6:23 PM,28/Oct/23 3:08 AM,21/May/19 6:23 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"The names of the docker images and containers of Chaincodes do not have proper prefixes.
 After running BYFN with the peer images created from the master repository, Chanicode has the name below. They don’t have “dev” as their prefixes.
{noformat}
$ cd (fabric-samples)/first-network
$ ./byfn.sh up
$ ./byfn.sh down
$ docker images
peer1.org2.example.com-mycc_1-1a5cee241429a822f8b7282a9d196217e54efcc49e122d8675dfca2e20ef82ca-12a196777f4acf8a03f4749bc90dfa4a9598e7fc353a82b4c89978d8c4d320cc   latest   c930c00f4c16   4 minutes ago   20.4MB
peer0.org2.example.com-mycc_1-1a5cee241429a822f8b7282a9d196217e54efcc49e122d8675dfca2e20ef82ca-7038cf9e9049c1d40a90a30f52790122cc8f1a4a9ad36281194e80a5293c3bb4   latest   eeebf53cc971   4 minutes ago   20.4MB
peer0.org1.example.com-mycc_1-1a5cee241429a822f8b7282a9d196217e54efcc49e122d8675dfca2e20ef82ca-2a237cbfae71e4390a536e34e159e7d8e86f62cb40cabcc354477466fec4eef8   latest   320d0011c5ef   5 minutes ago   20.4MB
{noformat}
The root cause is a typo in fabric/sampleconfig/core.yaml, which is used for peer docker images.
 “networkI{color:#ff0000}*d*{color}” is the correct parameter name. However, core.yaml has a wrong parameter “networkI{color:#ff0000}*D*{color}”. The letter “{color:#ff0000}*D*{color}” must be a lower case.",,sykesm,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,fabric 964245c00f0ecc5a96f5d03bac7879842a8b2edd,Unset,No,,,"1|i00nvr:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yuki-kon,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/19 7:59 AM;yuki-kon;CR is posted here. [https://gerrit.hyperledger.org/r/#/c/31390/];;;","21/May/19 3:13 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31390;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
update fabric-chaincode-node release-1.4 grpc to 1.17.0,FAB-15458,39845,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,zhaochy,zhaochy,16/May/19 2:29 PM,10/Oct/19 3:44 PM,28/Oct/23 3:08 AM,10/Oct/19 3:44 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"current node shim use grpc version 1.17.0-pre1
should update to 1.17.0",,zhaochy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nwv:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),zhaochy,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/May/19 2:30 PM;zhaochy;https://gerrit.hyperledger.org/r/31396;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
requiredPeerCount only can be set to zero but private data is not shared,FAB-15460,39848,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,denyeart,mlucc,mlucc,16/May/19 7:14 PM,06/Jun/19 5:42 AM,28/Oct/23 3:08 AM,06/Jun/19 5:42 AM,v1.3.0,,,,,,,,,,,,,,,,,fabric-gossip,fabric-peer,,,,,0,gossip,,,,,"A very simple network was set up for Private Data testing purposes. In this case, the focus is not on privacy among peers inside a channel but the right to be forgotten (delete private data). In this scenario, there are two orgs (as example: honda and yamaha) with two peers each one.

 

peer0 of each organization has been configured to be the anchor peer and both organizations are included in the private collection in the motogpchannel.

 

A problem is observed when setting collections_config.json:
 * When the field *requiredPeerCount is different to zero* the following error is prompted when invoking (putPrivateData):

{quote}{{ESCC invoke result: response:<status:500 message:""Failed disseminating 1 out of 1 private RWSets"" > }}
{{Error: endorsement failure during invoke. response: status:500 message:""Failed disseminating 1 out of 1 private RWSets""}}
{quote} * Whereas *requiredPeerCount is zero* the invoke succeeds but we observe that private data is not shared among the peers. When querying (GetPrivateData) from a different peer who has invoked, the private data can't be retrieved and nothing is found in CouchDB.

 

The anchor peers seem to be correctly configured in configtx.yaml and the external end points configured and reachable (tested pinging peer0.honda to/from peer0.yamaha). All peers are running and joined to motogpchannel and the MSP names in the configurations match.

In theory, both cases should work correctly but none of them seems to work correctly.",,denyeart,mlucc,nileshdeotale,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,FAB-15358,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"16/May/19 7:12 PM;mlucc;hftemplatelist.zip;https://jira.hyperledger.org/secure/attachment/17240/hftemplatelist.zip",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nxj:",,,,Unset,Unset,,"The project folder is attached so as the configuration of the network and private data can be checked.

Please, use the directory provided to run up the network:
- ./fabricOps.sh start
- ./fabricOps.sh cli
- # ./scripts/01-createchannel.sh
- # ./scripts/02-joinchannel.sh
- # ./scripts/03-installDummyCC.sh
- # ./scripts/04-instantiateDummyCC.sh
- # ./scripts/example-invoke.sh
and in case requiredPeerCount=0 
- # ./scripts/example-query.sh

Test the network with requiredPeerCount different and equal to 0 to experience both cases.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mlucc,nileshdeotale,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/May/19 9:34 PM;mlucc;The problem could be solved by upgrading Hyperledger version to 1.4.1 and updating channels (peer channel update).

My doubts are now the following:
 # Why should I update the anchor peers if they were specified when starting the network?
 # Should I update the channel from both organizations (hondaMSPanchors.tx and yamahaMSPanchors.tx)? I tried with both and it works, but it does with only one as well. I certainly don't understand the difference.

 ;;;","21/May/19 12:26 AM;scottz;1. I never really understood this myself, but it seems to be a requirement to send anchor peer updates after bring up network and create a channel. I think it has something to do with what is known at channel creation time. Maybe we can get a simple answer from [~yacovm] or [~denyeart].

2. If you only set a peer of honda org to be an anchor peer, then send and endorsement proposal to a peer in the yamaha org, they can find peers in the honda org and push the private data to them. 

It also works if you send endorsement proposal to the honda peer - but only if you have enough peers inside honda org to satisfy the requiredPeerCount - because the yamaha peers would still be able to pull the private data upon validation time.

However, if you send endorsement to the honda peers, they could not push the private data to any peer in yamaha org, so if the required peer count is 2, and if you have exactly 2 peers in each org, then it would fail.

It seems you would have one-way communications if you set an anchor peer in only one of the orgs, but that would suffice for private data communications. 

If I misrepresented anything, Dave or Yacov please correct me.;;;","21/May/19 2:26 AM;nileshdeotale;[~scottz] [~yacovm][~denyeart]

Is it not sufficient to have anchor peers and have them figure out number of peers in their org?

otherwise, If peers are added or removed one would have to reload collections with the new required peer count depending on how many peers now exist in the org and how many of those are supposed to get private data disseminated for endorsement?

Example - If I had 4 peers in each org (total peers 8) and I had a collections file with requiredPeerCount = 7  then I removed 2 peers from each org to leave only 2 peers per org (total peers 4), one would need to re-load collections file  with requiredPeerCount =3 , as per current total peer count 4.

Can the requiredPeerCount be determined dynamically at run time by the anchor peers such that collections file update is not needed?
;;;","21/May/19 2:50 AM;scottz;It is definitely not recommended to use a requiredPeerCount equal to the maximum number of peers. That means a transaction would always fail if one peer were unreachable (even if only temporarily). Reconsider your logic to choose values for max and required peer counts. Consider also the number of endorsement requests sent for the same transaction; if you send it to two and expect two endorsement approvals and each could disseminate the private data to the number of required peers specified in the collections file.

That said, if your network were to evolve to the point where you add several orgs and peers, then it is realistic to expect you may wish to increase your max and required peer counts. But, also keep in mind the other peers would still pull the private data, even if you don't disseminate/push the data to more than a couple peers (which is all that is ever likely required, for robustness sake).;;;","21/May/19 4:54 PM;mlucc;[~scottz] and [~nileshdeotale] thanks for your insights.

Regarding topic 2:

What I wanted to know is why only running:

{{peer channel update -f hondaMSPanchors.tx -c motogpchannel -o orderer.motogp.com --tls $CORE_PEER_TLS_ENABLED --cafile $ORDERER_CA}}

the communication among organizations is established (bidirectional). It has been checked that is not necessary to run the same command but with yamahaMSPanchors.tx. Then, I'm wondering what this command really does.

Is only required to update the channel once? Having two different anchors.tx make me feel hesistant. Nonetheless, when testing, just running the command for hondaMSPanchors.tx is enough to make the system work in both ways (i.e. invoke/querying from honda and yamaha).;;;","22/May/19 2:17 AM;scottz;[~mlucc] Each anchor peer update transaction provides to all members of the channel the (list of) anchor peer(s) of the represented org, so the peers in other orgs can contact it. It makes sense that each org would submit an anchor peer update. There are private data scenarios where it seems necessary to do both, but there are also scenarios where only one is needed. If you are indeed trying a scenario which should require both, in a network with only one of the anchor peer updates, _such as one I suggested above with 2 peers per org and collection requiredPeerCount = 2 and an endorsement policy that requires (and sends) endorsement proposals to a peer in both orgs_, then I would have to reroute your question to a gossip expert such as [~yacovm]. Maybe once the yamaha peers learn about the honda peers via the honda anchor peer update, then the honda peers can communicate with all the yamaha peers via any yamaha peer booted with CORE_PEER_GOSSIP_EXTERNALENDPOINT=true.;;;","22/May/19 3:07 AM;yacovm;so, you need to update the anchor peers after the channel is created.

This is by design, see FAB-13096;;;","03/Jun/19 9:07 PM;mlucc;[~yacovm] is right. The issue is solved by updating the channel. However, the anchor peers where already declared in the config used to create the channel. Does it make sense? ;;;","03/Jun/19 9:13 PM;yacovm;That's just because we re-use the same config files to bootstrap the channel... that's just how it is ;;;","06/Jun/19 5:42 AM;denyeart;Sounds like the issue was resolved by configuring anchor peers. Please re-open if you believe there is still some issue, or open a new Story if you are requesting a future improvement.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make election adapter supplying the peers with the right membership type,FAB-15461,39851,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,16/May/19 9:36 PM,11/Apr/20 12:09 AM,28/Oct/23 3:08 AM,22/May/19 3:24 PM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"There are 2 kinds of membership in gossip:
 1. basic membership - peers that know each other
 2. channel membership - peers that are a member of a channel

In addition, the leadership of a peer is per channel

The problem is that adapter between the gossip layer and the leader election layer supplies the peers that have basic membership instead of channel membership.

The task is to make the adapter return the peers with channel membership",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15463,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nxz:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/May/19 10:11 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/#/c/31399/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Interoperability Docs to Fabric Docs,FAB-15462,39852,,Task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,david_dornseifer,cmgabriel,cmgabriel,16/May/19 10:53 PM,18/Sep/19 2:46 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Convert existing interop working group wiki site docs to markdown and add to the Fabric documentation.  Final review by the Fabric Docs working group and the Interoperability working group.

https://wiki.hyperledger.org/display/fabric/Interop+Documents 

 ",,cmgabriel,david_dornseifer,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ny7:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),cmgabriel,david_dornseifer,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/May/19 7:25 PM;david_dornseifer;[https://gerrit.hyperledger.org/r/c/fabric/+/31618];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add a function that waits for channel membership,FAB-15463,39853,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,16/May/19 11:31 PM,28/May/19 9:46 PM,28/Oct/23 3:08 AM,28/May/19 9:46 PM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"In order to save time on tests that elect a leader, we can make the election process more efficient in way that we'll wait for all peers to have channel membership (in addition to basic membership).
While the leader election process is running and not all peers have membership in the channel, the election process may take longer time due to cases that more than one peer is elected as leader.

 

This task is about adding a function that waits for full channel membership",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,FAB-15461,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00nyf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/May/19 3:56 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/c/fabric/+/31502;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Official couchdb image takes long time to startup - investigate root cause,FAB-15464,39854,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,wenjian,denyeart,denyeart,16/May/19 11:37 PM,19/Nov/20 3:39 AM,28/Oct/23 3:08 AM,19/Nov/20 3:39 AM,,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,1,ipm2,,,,,"Since moving to the official couchdb image, the couchdb container takes too long to startup. Need to investigate why.

Note that FAB-15396 has increased timeout in unit tests.",,crashmark93,denyeart,jyellick,manish-sethi,MHBauer,silliman,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15396,FAB-15352,,,FAB-15601,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxw",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),crashmark93,denyeart,jyellick,manish-sethi,MHBauer,silliman,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Sep/19 11:57 PM;jyellick;[~denyeart] any update? ;;;","17/Nov/20 3:07 AM;manish-sethi;[~wenjian] - can you take a look at this.;;;","19/Nov/20 3:39 AM;wenjian;Close it since we haven't seen test flakes related to couchDB containers for a while. Also couchdb version has been upgraded, so the problem may have been fixed. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Jinja versions < 2.10.1 are insecure,FAB-15465,39868,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ryjones,ryjones,ryjones,17/May/19 2:44 AM,23/May/19 11:07 AM,28/Oct/23 3:08 AM,17/May/19 6:52 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,,,,,,"h5. CVE-2019-10906
h5. CVE-2016-10745

This is a doc generation issue, but it is a security issue. I'm ambivalent if the two changes get merged.

[https://gerrit.hyperledger.org/r/#/c/31400/]

[https://gerrit.hyperledger.org/r/#/c/31401/]",,ryjones,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o1r:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ryjones,,,,,,,,,,,,,,,,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,main,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,release-1.4,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,mergify/bp/release-2.2/pr-4374,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,mergify/bp/release-2.5/pr-3782,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,mergify/bp/release-2.4/pr-3646,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert main NL/networkLauncher.sh to GO functions,FAB-15466,39869,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,bharadwajambati1,bharadwajambati1,17/May/19 2:58 AM,03/Jul/19 4:00 AM,28/Oct/23 3:08 AM,03/Jul/19 4:00 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,,,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00o1z:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,release-2.4,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"17/May/19 10:22 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/31403/;;;","07/Jun/19 2:49 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
convert NL/gen_configtx_cfg.sh to GO function,FAB-15467,39870,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,scottz,scottz,17/May/19 3:01 AM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,,,bharadwajambati1,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00nbo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"18/May/19 5:40 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/31425/];;;","14/Jun/19 6:01 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add crypto generation function to k8s version of NL in GO,FAB-15468,39871,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,scottz,scottz,17/May/19 3:02 AM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,,,bharadwajambati1,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00nbp:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,scottz,suryalnvs,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"17/May/19 10:24 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/31403/;;;","14/Jun/19 6:02 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generate config files from templates using ytt,FAB-15469,39872,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,bharadwajambati1,bharadwajambati1,17/May/19 3:03 AM,28/Jun/19 10:24 PM,28/Oct/23 3:08 AM,28/Jun/19 10:24 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,,,bharadwajambati1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00o27:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/Jun/19 6:06 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/31479/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Assertion Failed: Unable to find the genesis block file behavesystest.block in v1.4,FAB-15471,39879,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,17/May/19 8:49 AM,11/Oct/19 11:36 PM,28/Oct/23 3:08 AM,11/Oct/19 11:36 PM,v1.4.2,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"Most behave tests fail in v1.4 smoke and daily test suites, with this error:

Assertion Failed: Unable to find the genesis block file behavesystest.block

The channel creation transaction is created as behavesystest.tx, submitted, and then the block from the ledger is fetched and normally saved locally as behavesystest.block (where it can be used by next steps, but that is where the error occurs). The behavesystest.tx does appear to be created ok, but must determine where the failure occurred - channel creation problem, or problem with the behavesystest.tx transaction artifact generated by configtxgen, or in the channel transaction handling inside fabric.",,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqrk:5iwr7",,,,Unset,Unset,,https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-release-1.4-x86_64/,,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,vijaypunugubati,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jul/19 4:43 AM;vijaypunugubati;The error observed on the recent build, please check the below log file from recent build

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-release-1.4-x86_64/lastUnstableBuild/artifact/gopath/src/github.com/hyperledger/fabric-test/feature/behave_tests.log];;;","30/Aug/19 7:28 AM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/33171 
* Among other things documented in commit msg, this patchset changes Makefile base_version to 1.4.4
* reduces the capabilities to 1.4.2, so the orderers can come up and run
* some tests that require changing logspec will probably still fail
* later: plan to submit another patch to increase the capabilities and enable node OUs and fix the root cause
;;;","11/Oct/19 11:35 PM;scottz;The behave tests in 1.4 were patched up to achieve 116/136 pass rate. Rather than spending time on the fragile test framework to get the remaining tests to pass, since we are disabling the behave tests shortly, we will close this as completed (enough).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix Win10 Access is denied,FAB-15472,39882,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,kutenglaoshu,kutenglaoshu,17/May/19 12:49 PM,17/May/19 12:59 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"When chaincode install:

Error: error getting chaincode deployment spec for mycc: error getting chaincode package bytes: Error obtaining imports: command <go list -f \{{ join .Imports ""\n""}} github.com/example02>: failed with error: ""exit status 1""
go: creating work dir: mkdir C:\WINDOWS\go-build784821595: Access is denied.",,kutenglaoshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o3b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kutenglaoshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix integration test readme,FAB-15473,39883,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,17/May/19 1:06 PM,11/Jun/19 4:04 AM,28/Oct/23 3:08 AM,11/Jun/19 4:04 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,,,,,,"Makefile target is ""integration-test"" not ""integration-tests""",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o3j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/May/19 1:13 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/31412/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip accepts leadership messages from foreign orgs,FAB-15474,39897,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,17/May/19 10:46 PM,15/Jul/19 8:29 PM,28/Oct/23 3:08 AM,19/May/19 1:25 AM,,,,,,,,,,,,,,v1.1.2,v1.2.2,v1.4.2,v2.0.0,fabric-gossip,,,,,,0,,,,,,"Looking at the code - there isn't a call to *g.isInMyorg* on leadership messages. 

So, it means that a peer with a high PKI-ID can forcefully starve peers from remote organizations by overthrowing their leaders.

[~C0rWin] ; [~naaman]

Possible resolutions:

1) We can either filter them out at the [predicate that listens to messages|https://github.com/hyperledger/fabric/blob/release-1.4/gossip/election/adapter.go#L100-L105]  
2) In the [validateLeadershipMessage|https://github.com/hyperledger/fabric/blob/release-1.4/gossip/gossip/gossip_impl.go#L1207-L1219] function, we can add a call to [g.IsInMyOrg|https://github.com/hyperledger/fabric/blob/release-1.4/gossip/gossip/gossip_impl.go#L1188-L1196].
3) Since leadership messages are dispatched by the channel module, we can check the creator/sender in the channel module, and drop the message there.",,C0rWin,mastersingh24,naaman,yacovm,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o4n:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,mastersingh24,naaman,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.1,release-1.2,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/May/19 7:44 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/31431/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestTLSCA failed in daily unit-tests(first-instance) with panicerror:invalid memory address or nil pointer dereference,FAB-15475,39900,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sambhavdutt,sambhavdutt,18/May/19 12:41 AM,19/Mar/20 4:33 AM,28/Oct/23 3:08 AM,19/Mar/20 4:33 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-crypto,,,,,,0,ci-flake,,,,,"TestTLSCA failed in daily unit-tests(first-instance) in `ca_test` with panicerror:invalid memory address or nil pointer dereference

*Branch:* master
*Platform:* x86_64
*Error Snippet:*

{code:java}
20:10:33 --- FAIL: TestTLSCA (0.01s)
20:10:33     ca_test.go:52: 
20:10:33         	Error Trace:	ca_test.go:52
20:10:33         	Error:      	Received unexpected error:
20:10:33         	            	listen tcp 127.0.0.1:2375: bind: address already in use
20:10:33         	Test:       	TestTLSCA
20:10:33 panic: runtime error: invalid memory address or nil pointer dereference [recovered]
20:10:33 	panic: runtime error: invalid memory address or nil pointer dereference
20:10:33 [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x80d8b5]
{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/435/",,denyeart,jyellick,sambhavdutt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,4ab430228218a8b6b0afe24691bddf55a56ebd11,Unset,No,,,"1|i00o5b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,sambhavdutt,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 12:32 AM;denyeart;Seen again in https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14084/console

02:46:54 FAIL	github.com/hyperledger/fabric/common/crypto/tlsgen;;;","31/Jul/19 11:35 PM;jyellick;A similar (but maybe different) failure: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14099/console

{code}

10:57:32 panic: runtime error: invalid memory address or nil pointer dereference
10:57:32 	panic: runtime error: invalid memory address or nil pointer dereference
10:57:32 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xa6bb0b]
10:57:32 
10:57:32 goroutine 19 [running]:
10:57:32 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*listenSocket).Close(0xc0001ac000, 0xc000184480, 0xc000048558)
10:57:32 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:532 +0x4b
10:57:32 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).Serve.func2(0xc00012a480, 0xc0001ac000)
10:57:32 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:578 +0xa9
10:57:32 panic(0xb1e9a0, 0x1092740)
10:57:32 	/opt/go/go1.12.5.linux.amd64/src/runtime/panic.go:522 +0x1b5
10:57:32 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).Serve(0xc00012a480, 0x0, 0x0, 0x0, 0x0)
10:57:32 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:587 +0x2d3
10:57:32 created by github.com/hyperledger/fabric/common/crypto/tlsgen.TestTLSCA
10:57:32 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/crypto/tlsgen/ca_test.go:52 +0x3cd
10:57:32 FAIL	github.com/hyperledger/fabric/common/crypto/tlsgen	0.038s
{code};;;","19/Mar/20 4:33 AM;sykesm;Fixed by https://github.com/hyperledger/fabric/commit/f6732d1;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reduce CouchDB exposure via reuse ,FAB-15476,39904,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,18/May/19 3:13 AM,06/Jun/19 6:13 AM,28/Oct/23 3:08 AM,21/May/19 3:21 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"In the core/ledger package, lockbasedtxmgr current uses a new instance of CouchDB for every single test executed. Instead we should use one Couch container, and instead initialize new ledgers in the same DB.

This will provide two benefits:

The first is we reduce the likelyhood of a timeout occurring on CouchDB startup. Currently there are over 30 instances of Couch starting and any one can cause unit tests to fail. Using only one instance greatly reduces our exposure to failures.

The second benefit is a greatly reduced time period for conducting tests in this package. Each container takes 10 seconds to start. Reducing to a single container will save nearly 5 minutes off of unit test run time.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15454,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00eor:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/May/19 8:15 AM;btl5037;https://gerrit.hyperledger.org/r/c/31417/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor lockbasedtxmgr tests to use one DB ,FAB-15477,39905,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,18/May/19 3:13 AM,20/May/19 8:03 AM,28/Oct/23 3:08 AM,20/May/19 8:03 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o6f:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flake in github.com/hyperledger/fabric/orderer/common/cluster,FAB-15478,39910,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,19/May/19 4:50 PM,19/Mar/20 5:57 AM,28/Oct/23 3:08 AM,19/Mar/20 5:57 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12200/consoleFull]

 
{noformat}
22:29:20 2019-05-18 20:26:50.171 UTC [test] connectToSomeEndpoint -> WARN 0a1 Could not connect to any endpoint of [{127.0.0.1:44539 []}]22:29:20 panic: runtime error: invalid memory address or nil pointer dereference22:29:20 [signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x1302074]22:29:20 22:29:20 goroutine 495 [running]:22:29:20 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).addExpectPullAssert.func1(0xc0000bb600, 0xc0000b28f0, 0x9)22:29:20  /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:274 +0x17422:29:20 github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).Deliver(0xc0004bc980, 0x16bb9e0, 0xc0000a6a30, 0x16a7de0, 0xc0004bc980)22:29:20  /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:184 +0x19a22:29:20 github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Deliver_Handler(0x1536a60, 0xc0004bc980, 0x16b9dc0, 0xc000104180, 0x2a55de8, 0xc000200a50)22:29:20  /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:754 +0xce22:29:20 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc0002a5200, 0x16bd180, 0xc0004ef200, 0xc00031a200, 0xc0004e29c0, 0x1fc40e0, 0x0, 0x0, 0x0)22:29:20  /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1176 +0x160322:29:20 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc0002a5200, 0x16bd180, 0xc0004ef200, 0xc00031a200, 0x0)22:29:20  /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1256 +0x135b22:29:20 github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc0000b28e0, 0xc0002a5200, 0x16bd180, 0xc0004ef200, 0xc00031a200)22:29:20  /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:691 +0xad22:29:20 created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func122:29:20  /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:689 +0xb922:29:20 FAIL github.com/hyperledger/fabric/orderer/common/cluster 11.465s{noformat}",,ales,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 6:54 AM;denyeart;console.log;https://jira.hyperledger.org/secure/attachment/17633/console.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o7j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jun/19 2:40 AM;sykesm;The console that's linked is no longer available and there's no information about which test failed or how. Without logs or reproduce info, it's hard to address.;;;","31/Jul/19 6:53 AM;denyeart;Seen again at https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14133/console


{code:java}
[34m2019-07-30 19:52:54.163 UTC [test] pullBlocks -> INFO 09d[0m Got block [3] of size 0 KB from 127.0.0.1:37638
[31m2019-07-30 19:52:54.164 UTC [test] tryFetchBlock -> ERRO 09e[0m Failed verifying received blocks: bad signature
[31m2019-07-30 19:53:04.178 UTC [test] fetchLastBlockSeq -> ERRO 09f[0m Failed receiving the latest block from 127.0.0.1:37638: didn't receive a response within 10s
[33m2019-07-30 19:53:04.180 UTC [test] func1 -> WARN 0a0[0m Received error of type 'didn't receive a response within 10s' from {127.0.0.1:37638 []}
[33m2019-07-30 19:53:04.180 UTC [test] connectToSomeEndpoint -> WARN 0a1[0m Could not connect to any endpoint of [{127.0.0.1:37638 []}]
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x13edc9a]

goroutine 547 [running]:
github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).addExpectPullAssert.func1(0xc0004fadc0, 0xc000304330, 0x9)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:275 +0x14a
github.com/hyperledger/fabric/orderer/common/cluster_test.(*deliverServer).Deliver(0xc0001ebc40, 0x188e860, 0xc00030e580, 0x18720e0, 0xc0001ebc40)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/common/cluster/deliver_test.go:184 +0x19a
github.com/hyperledger/fabric/protos/orderer._AtomicBroadcast_Deliver_Handler(0x16b6e00, 0xc0001ebc40, 0x188b560, 0xc00027a240, 0x2cb5488, 0xc0002f0300)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/protos/orderer/ab.pb.go:660 +0xce
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC(0xc00042de00, 0x18902a0, 0xc000321500, 0xc0002f0300, 0xc0004fee40, 0x2222be0, 0x0, 0x0, 0x0)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1202 +0x166a
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream(0xc00042de00, 0x18902a0, 0xc000321500, 0xc0002f0300, 0x0)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1282 +0x12e6
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1(0xc000304250, 0xc00042de00, 0x18902a0, 0xc000321500, 0xc0002f0300)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:717 +0xad
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:715 +0xb9
FAIL	github.com/hyperledger/fabric/orderer/common/cluster	11.237s
{code}

It was seen in parallel with the flake fixed in https://gerrit.hyperledger.org/r/#/c/fabric/+/32595/ :

{code:java}

--- FAIL: TestQueryCmdEndorsementFailure (0.00s)
    query_test.go:87: 
            Error Trace:    query_test.go:87
            Error:          An error is expected but got nil.
            Test:           TestQueryCmdEndorsementFailure
{code}
;;;","19/Mar/20 5:57 AM;sykesm;The panic in this test was a result of the inconsistent iteration order of the mock endorser clients. As such, this was fixed with https://github.com/hyperledger/fabric/commit/8c673d7ecf567f22d9cb29bcf71b65083579d914#diff-4733fcfbe3673b6a2f2884be8b65ae7a.;;;","19/Mar/20 5:57 AM;sykesm;Already fixed back in July of 2019.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Java programming model documentation,FAB-15479,39916,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,mbwhite,mbwhite,20/May/19 6:40 PM,05/Dec/19 3:54 AM,28/Oct/23 3:08 AM,05/Dec/19 3:54 AM,,,,,,,,,,,,,,v1.4.3,v2.0.0,,,,,,,,,0,,,,,,"As a developer using the Java programming model, I need tutorials, api docs, reference material and examples. 

 
This tutorial specifically describes how to build an application in node:
[https://hyperledger-fabric.readthedocs.io/en/latest/tutorials.html] 

We should provide the same for java, which could include a drop down box, allowing the user to select which language they'd like to read the documentation in?
 
 

The following also need updating with Java info:

 

[https://hyperledger-fabric.readthedocs.io/en/release-1.4/whatsnew.html]
  
  
 [https://hyperledger-fabric.readthedocs.io/en/release-1.4/developapps/smartcontract.html]
  
  
 [https://hyperledger-fabric.readthedocs.io/en/release-1.4/developapps/application.html]
  
  
 [https://hyperledger-fabric.readthedocs.io/en/release-1.4/write_first_app.html]
  
  
 [https://hyperledger-fabric.readthedocs.io/en/release-1.4/tutorial/commercial_paper.html]",,denyeart,heatherp,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16019,,,,,,,,,,FABCJ-103,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCJ-4,,,No,,Unset,No,,,"1|i00o8v:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,heatherp,mbwhite,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Aug/19 11:10 PM;mbwhite;Starting CR with updates to the main documentation... 

https://gerrit.hyperledger.org/r/c/fabric/+/32640 (release-1.4) [FAB-15479] Docs updates for Java;;;","21/Aug/19 12:15 AM;denyeart;Looks good to me. Please cherry pick to master as well.;;;","30/Aug/19 1:28 AM;heatherp;[~jtonline] - I've asked Matthew to but to no avail ;) could you cherry pick to master when you're back next week please?;;;","12/Sep/19 10:20 PM;heatherp;Here's the cherry pick for master: https://gerrit.hyperledger.org/r/c/fabric/+/33482;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update the TUTORIAL.md,FAB-15480,39917,39916,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mbwhite,mbwhite,mbwhite,20/May/19 6:42 PM,28/Nov/19 6:21 PM,28/Oct/23 3:08 AM,28/Nov/19 6:21 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Update the TUTORIAL.md in the repo to include essential information about using the updated programming model. ,,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o93:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Oct/19 11:06 PM;mbwhite;https://gerrit.hyperledger.org/r/c/fabric-chaincode-java/+/34017 [FAB-15480] Tutorial.md updates;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Convert cscc functionality to proper gRPC API,FAB-15481,39918,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,denyeart,20/May/19 8:27 PM,22/Oct/19 5:23 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,It really does not make sense that peer config options be implemented as system chaincode (cscc).  It would be cleaner to expose a set of nice APIs.   We can still require the requests to be signed and can enforce ACLs.,,denyeart,guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15427,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00o9b:",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Oct/19 5:23 PM;guoger;so we will allow chaincode to invoke peer api directly, instead of via InvokeChaincode?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Pre v2.0 does not support orderers in multiple organizations when using service discovery,FAB-15482,39780,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,timpii,timpii,12/May/19 4:14 PM,17/Jul/19 4:19 AM,28/Oct/23 3:08 AM,17/Jul/19 4:19 AM,v1.4.1,,,,,,,,,,,,,v1.4.2,,,,fabric-orderer,,,,,,0,,,,,,"When using Service Discovery with TLS and Raft Orderers configured in separate Orderer organizations the Endpoint for each of the Orderers has multiple endpoints. The SDK randomly picks one of these endpoints which is frequently the wrong one. Thus the orderer's tls certificate is not the actual orderer organizations tls certificate. This creates TLS handshake errors trying to establish the connection for sending a transaction to the Orderers.

The console1.log was run with the -Djavax.net.debug=SSL and the BasicConfigurator set. Version of Fabric Components is 1.4.1",,denyeart,dongming,rickr,timpii,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7559,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/May/19 4:09 PM;timpii;configtx.yaml;https://jira.hyperledger.org/secure/attachment/17225/configtx.yaml","12/May/19 4:08 PM;timpii;console.log.txt;https://jira.hyperledger.org/secure/attachment/17226/console.log.txt","12/May/19 4:09 PM;timpii;crypto-config-dev.yaml;https://jira.hyperledger.org/secure/attachment/17224/crypto-config-dev.yaml",,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00njr:",,,,Unset,Unset,,See attached configtx.yaml and crypto-config-dev.yaml,,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,dongming,rickr,timpii,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/May/19 9:46 PM;rickr;Peer or Orderer TLS  client key  is controlled by the application either by properties added clientKeyFile or clientKeyBytes for the default SD orderer addition. Similarly for the tls certificate clientCertBytes, clientCertFile. You can specify a default, for mspid, or specific endpoint 

Example of this  for default :  https://github.com/hyperledger/fabric-sdk-java/blob/8044bac1bfe9baf9d6360b067e0d6b5445cc953d/src/test/java/org/hyperledger/fabric/sdkintegration/ServiceDiscoveryIT.java#L92 

Example of peer overrides are in unit tests here (orderer should be no different):

https://github.com/hyperledger/fabric-sdk-java/blob/433432f4fb7f04251f40af0b2e1af96678169804/src/test/java/org/hyperledger/fabric/sdk/ChannelTest.java#L472-L572

Ultimately, if neither of this work the application can write it's very own SSDOrdererAddition as shown here:

https://github.com/hyperledger/fabric-sdk-java/blob/433432f4fb7f04251f40af0b2e1af96678169804/src/test/java/org/hyperledger/fabric/sdkintegration/ServiceDiscoveryIT.java#L124

;;;","14/May/19 12:19 AM;rickr;My bad see the issue is with the CA certs. Still will need trace;;;","15/May/19 9:35 PM;rickr;I've been mostly working this with Tim on rocketchat so just want to give a quick update. 
I noticed in a trace enabled sdk log Tim provided the SDK is seeing from servicediscover  the same three  orderer endpoints listed with three different MSPids. This in the code will clobber that certs with the last MPSPID in the group,  cacerts being used.  CACerts are tied to the MSPID and orderer endponts with their mspids which is how they are associated. 

{noformat}
2019-05-13 05:38:07,130{GMT} grpc-default-worker-ELG-1-2 DEBUG NettyClientHandler:216 - [id: 0x390bb7c2, L:/172.17.0.15:34886 - R:peer0.green-airline.com/10.107.167.115:7051] INBOUND HEADERS: streamId=13 headers=GrpcHttp2ResponseHeaders[grpc-status: 0, grpc-message: ] padding=0 endStream=true
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer3, endpoint: orderer1:7050
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer3, endpoint: orderer2:7050
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer3, endpoint: orderer3:7050
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer1, endpoint: orderer1:7050
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer1, endpoint: orderer2:7050
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer1, endpoint: orderer3:7050
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer2, endpoint: orderer1:7050
 2019-05-13 05:38:07,130{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer2, endpoint: orderer2:7050
 2019-05-13 05:38:07,131{GMT} pool-2-thread-2 TRACE ServiceDiscovery:309 - Channel green discovered orderer MSPID: orderer2, endpoint: orderer3:7050
{noformat}

I have tried using BYFN etcDraft to see if that reproduce this.  JSDK servicediscovery does not show that behavior.  I think it's configured differently with respect to orderers to mspids.  It has all orderers in a single mspid group.

[~timpii]  Having an independent discoveryclient output would I think help isolate.  If it too see's this or if the SDK is interpreting it wrong.  Also having a SDK at trace level and matching full debug log of  Peer (the one doing service discovery) would help. 
Alternative would be a zipped up dockercompose network  that could reproduce.;;;","20/May/19 10:59 AM;timpii;I have been able to run the CLI discover config command. The output log is below. It clearly shows the information coming from the Peer has 3 endpoints for each of the 3 orderers.
{
	""msps"": {
		""further"": {
			""name"": ""further"",
			""root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNQVENDQWVPZ0F3SUJBZ0lRVSt4RFN2Z1FFQm5ZaDREY2o4bzNZakFLQmdncWhrak9QUVFEQWpCcE1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVVNQklHQTFVRUNoTUxablZ5ZEdobGNpNWpiMjB4RnpBVkJnTlZCQU1URG1OaExtWjFjblJvClpYSXVZMjl0TUI0WERURTVNRFV3T0RBNU1UTXdNRm9YRFRJNU1EVXdOVEE1TVRNd01Gb3dhVEVMTUFrR0ExVUUKQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaGJpQkdjbUZ1WTJsegpZMjh4RkRBU0JnTlZCQW9UQzJaMWNuUm9aWEl1WTI5dE1SY3dGUVlEVlFRREV3NWpZUzVtZFhKMGFHVnlMbU52CmJUQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJQVGZTK2R5ZUpVNUVINks3dG1pSThrMDV4Z0wKVkxnRkRhQzJ3RHJ3dGErcGg3NU1ZbEV1NE5GZTFRN0JkUzZMN3k3dUptTGsyWlJLWWNuYW9zZ2pWUHFqYlRCcgpNQTRHQTFVZER3RUIvd1FFQXdJQnBqQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBZ1lJS3dZQkJRVUhBd0V3CkR3WURWUjBUQVFIL0JBVXdBd0VCL3pBcEJnTlZIUTRFSWdRZ3Z6dldEWmxIdnM0RUFrUHBpZWRGZFFhdU5qUUQKdXJMU3NQbktQeVFnekxJd0NnWUlLb1pJemowRUF3SURTQUF3UlFJaEFNemZCbGFidVl4dVJYWmplRDNLdEZHNgpjK2NUQmdGMlhQZmpacFV2ckVKd0FpQkdpSExqQlhGa0RlTHB5Vk5ZeXFjRGtJTkw4akFEK0xnZ0JvQjYwUkRjCk1nPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""
			],
			""admins"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNHekNDQWNLZ0F3SUJBZ0lSQU1FRm1RMFhQT1d3b0haakpQR0YzQm93Q2dZSUtvWkl6ajBFQXdJd2FURUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhGREFTQmdOVkJBb1RDMloxY25Sb1pYSXVZMjl0TVJjd0ZRWURWUVFERXc1allTNW1kWEowCmFHVnlMbU52YlRBZUZ3MHhPVEExTURnd09URXpNREJhRncweU9UQTFNRFV3T1RFek1EQmFNR2N4Q3pBSkJnTlYKQkFZVEFsVlRNUk13RVFZRFZRUUlFd3BEWVd4cFptOXlibWxoTVJZd0ZBWURWUVFIRXcxVFlXNGdSbkpoYm1OcApjMk52TVE4d0RRWURWUVFMRXdaamJHbGxiblF4R2pBWUJnTlZCQU1NRVVGa2JXbHVRR1oxY25Sb1pYSXVZMjl0Ck1Ga3dFd1lIS29aSXpqMENBUVlJS29aSXpqMERBUWNEUWdBRW1xT3p2VE41bE5RVzRKVmtoZjlsZG9VYjBZb0IKeUZqa0hwQUZSWDV5ZVh6SEE3VGdwVUZpZW1mMkRjR2lqQVJOK1p5TFptc3hsOXVoMTVORG9EWTNBS05OTUVzdwpEZ1lEVlIwUEFRSC9CQVFEQWdlQU1Bd0dBMVVkRXdFQi93UUNNQUF3S3dZRFZSMGpCQ1F3SW9BZ3Z6dldEWmxICnZzNEVBa1BwaWVkRmRRYXVOalFEdXJMU3NQbktQeVFnekxJd0NnWUlLb1pJemowRUF3SURSd0F3UkFJZ0tUV0sKcE9MNFYrU3kvc2hNWElISEhITm44ZWFGeFhXK1ZvUDNGZ3hKWDFFQ0lHTTEwcVAyb1VEa3A1RUc4aGhiYW92SAp6T0s4cGlYRHdrSTMzVFB0dVZYbgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==""
			],
			""crypto_config"": {
				""signature_hash_family"": ""SHA2"",
				""identity_identifier_hash_function"": ""SHA256""
			},
			""tls_root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNRekNDQWVxZ0F3SUJBZ0lSQU1mZTR0LzlDL2xuWGxORG9KMjhQTU13Q2dZSUtvWkl6ajBFQXdJd2JERUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhGREFTQmdOVkJBb1RDMloxY25Sb1pYSXVZMjl0TVJvd0dBWURWUVFERXhGMGJITmpZUzVtCmRYSjBhR1Z5TG1OdmJUQWVGdzB4T1RBMU1EZ3dPVEV6TURCYUZ3MHlPVEExTURVd09URXpNREJhTUd3eEN6QUoKQmdOVkJBWVRBbFZUTVJNd0VRWURWUVFJRXdwRFlXeHBabTl5Ym1saE1SWXdGQVlEVlFRSEV3MVRZVzRnUm5KaApibU5wYzJOdk1SUXdFZ1lEVlFRS0V3dG1kWEowYUdWeUxtTnZiVEVhTUJnR0ExVUVBeE1SZEd4elkyRXVablZ5CmRHaGxjaTVqYjIwd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUJCd05DQUFTcENKcHVQRVhybm1NTWdUOGwKUGdpdkFHV2JIZWZPN0VyK2hEODNFSWtCU1lvTzZxeUZPa25TZWkySFVUUnNRUzZWbVdGVkEraS8vUUt2cS90NQpxM2I2bzIwd2F6QU9CZ05WSFE4QkFmOEVCQU1DQWFZd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSEF3SUdDQ3NHCkFRVUZCd01CTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3S1FZRFZSME9CQ0lFSUhMYU82UWRoczU0eVkxeWEwbksKTS9Cb0pGK1h1UnBuN2kwa0tQQkdITkNITUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDSUc2TUJGd3Zmb0k4em9wNgpyRUwrZzBsNnJmeUd1WWRoV0VGSUIvOHBUWTdOQWlCMkZJNXc4UnRiM1ZTalB3UFY3MW5lOTNaUUttcG1tdExSCmZCajVUU1c5NUE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==""
			],
			""fabric_node_ous"": {
				""enable"": true,
				""client_ou_identifier"": {
					""certificate"": ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNQVENDQWVPZ0F3SUJBZ0lRVSt4RFN2Z1FFQm5ZaDREY2o4bzNZakFLQmdncWhrak9QUVFEQWpCcE1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVVNQklHQTFVRUNoTUxablZ5ZEdobGNpNWpiMjB4RnpBVkJnTlZCQU1URG1OaExtWjFjblJvClpYSXVZMjl0TUI0WERURTVNRFV3T0RBNU1UTXdNRm9YRFRJNU1EVXdOVEE1TVRNd01Gb3dhVEVMTUFrR0ExVUUKQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaGJpQkdjbUZ1WTJsegpZMjh4RkRBU0JnTlZCQW9UQzJaMWNuUm9aWEl1WTI5dE1SY3dGUVlEVlFRREV3NWpZUzVtZFhKMGFHVnlMbU52CmJUQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJQVGZTK2R5ZUpVNUVINks3dG1pSThrMDV4Z0wKVkxnRkRhQzJ3RHJ3dGErcGg3NU1ZbEV1NE5GZTFRN0JkUzZMN3k3dUptTGsyWlJLWWNuYW9zZ2pWUHFqYlRCcgpNQTRHQTFVZER3RUIvd1FFQXdJQnBqQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBZ1lJS3dZQkJRVUhBd0V3CkR3WURWUjBUQVFIL0JBVXdBd0VCL3pBcEJnTlZIUTRFSWdRZ3Z6dldEWmxIdnM0RUFrUHBpZWRGZFFhdU5qUUQKdXJMU3NQbktQeVFnekxJd0NnWUlLb1pJemowRUF3SURTQUF3UlFJaEFNemZCbGFidVl4dVJYWmplRDNLdEZHNgpjK2NUQmdGMlhQZmpacFV2ckVKd0FpQkdpSExqQlhGa0RlTHB5Vk5ZeXFjRGtJTkw4akFEK0xnZ0JvQjYwUkRjCk1nPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="",
					""organizational_unit_identifier"": ""client""
				},
				""peer_ou_identifier"": {
					""certificate"": ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNQVENDQWVPZ0F3SUJBZ0lRVSt4RFN2Z1FFQm5ZaDREY2o4bzNZakFLQmdncWhrak9QUVFEQWpCcE1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVVNQklHQTFVRUNoTUxablZ5ZEdobGNpNWpiMjB4RnpBVkJnTlZCQU1URG1OaExtWjFjblJvClpYSXVZMjl0TUI0WERURTVNRFV3T0RBNU1UTXdNRm9YRFRJNU1EVXdOVEE1TVRNd01Gb3dhVEVMTUFrR0ExVUUKQmhNQ1ZWTXhFekFSQmdOVkJBZ1RDa05oYkdsbWIzSnVhV0V4RmpBVUJnTlZCQWNURFZOaGJpQkdjbUZ1WTJsegpZMjh4RkRBU0JnTlZCQW9UQzJaMWNuUm9aWEl1WTI5dE1SY3dGUVlEVlFRREV3NWpZUzVtZFhKMGFHVnlMbU52CmJUQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJQVGZTK2R5ZUpVNUVINks3dG1pSThrMDV4Z0wKVkxnRkRhQzJ3RHJ3dGErcGg3NU1ZbEV1NE5GZTFRN0JkUzZMN3k3dUptTGsyWlJLWWNuYW9zZ2pWUHFqYlRCcgpNQTRHQTFVZER3RUIvd1FFQXdJQnBqQWRCZ05WSFNVRUZqQVVCZ2dyQmdFRkJRY0RBZ1lJS3dZQkJRVUhBd0V3CkR3WURWUjBUQVFIL0JBVXdBd0VCL3pBcEJnTlZIUTRFSWdRZ3Z6dldEWmxIdnM0RUFrUHBpZWRGZFFhdU5qUUQKdXJMU3NQbktQeVFnekxJd0NnWUlLb1pJemowRUF3SURTQUF3UlFJaEFNemZCbGFidVl4dVJYWmplRDNLdEZHNgpjK2NUQmdGMlhQZmpacFV2ckVKd0FpQkdpSExqQlhGa0RlTHB5Vk5ZeXFjRGtJTkw4akFEK0xnZ0JvQjYwUkRjCk1nPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="",
					""organizational_unit_identifier"": ""peer""
				}
			}
		},
		""green-agencies"": {
			""name"": ""green-agencies"",
			""root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNXVENDQWdDZ0F3SUJBZ0lSQUxPVkdUdmt1ai9SQ2xjYlNPeDZZSEV3Q2dZSUtvWkl6ajBFQXdJd2R6RUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHekFaQmdOVkJBb1RFbWR5WldWdUxXRm5aVzVqYVdWekxtTnZiVEVlTUJ3R0ExVUVBeE1WClkyRXVaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNQjRYRFRFNU1EVXdPREE1TVRNd01Gb1hEVEk1TURVd05UQTUKTVRNd01Gb3dkekVMTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVgpCQWNURFZOaGJpQkdjbUZ1WTJselkyOHhHekFaQmdOVkJBb1RFbWR5WldWdUxXRm5aVzVqYVdWekxtTnZiVEVlCk1Cd0dBMVVFQXhNVlkyRXVaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkkKemowREFRY0RRZ0FFRWlBeDhycDRtTWJUT2NWaXh6S2QvQ2piclV5aTJRSmtBWXQwZWNweWJnWW1qbTBDalhHeQpwMEtaanJ4Vm9JYTNNZVdhbUhKeklxRUJLMi92MVlSL2U2TnRNR3N3RGdZRFZSMFBBUUgvQkFRREFnR21NQjBHCkExVWRKUVFXTUJRR0NDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjREFUQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01Da0cKQTFVZERnUWlCQ0N5bVlRQklJaVFSVVRYUEVsODFlc2dKY1BYakRIWGgyLzZVQTdONkhUU2ZEQUtCZ2dxaGtqTwpQUVFEQWdOSEFEQkVBaUFzWmRiL2g1bWZjM2RhSXBGOVVNUHdHNHpEdVNka0JSV2VrU3JML3pxaWVnSWdlSUlKCmovMkorY1EwTnRvbHFzaFloZ0lJZDVzL1hOeDdCdVF6Y3BoTURWaz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""
			],
			""admins"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNNVENDQWRlZ0F3SUJBZ0lSQU1mRHJ1S0ZxT0JsMForcTRiL3J5T1F3Q2dZSUtvWkl6ajBFQXdJd2R6RUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHekFaQmdOVkJBb1RFbWR5WldWdUxXRm5aVzVqYVdWekxtTnZiVEVlTUJ3R0ExVUVBeE1WClkyRXVaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNQjRYRFRFNU1EVXdPREE1TVRNd01Gb1hEVEk1TURVd05UQTUKTVRNd01Gb3diakVMTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVgpCQWNURFZOaGJpQkdjbUZ1WTJselkyOHhEekFOQmdOVkJBc1RCbU5zYVdWdWRERWhNQjhHQTFVRUF3d1lRV1J0CmFXNUFaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUUKSm85c1Z3M2hDdjI0RVpQbVkwb1gyeG01dUZZWEVnVlF1bVVwZEZMVDc2UDNoTXd1ZndUaDZQR0lxUGg5SXlhcQoxYWRPUEdUamc4UEFNTDl4UFRQclpxTk5NRXN3RGdZRFZSMFBBUUgvQkFRREFnZUFNQXdHQTFVZEV3RUIvd1FDCk1BQXdLd1lEVlIwakJDUXdJb0Fnc3BtRUFTQ0lrRVZFMXp4SmZOWHJJQ1hEMTR3eDE0ZHYrbEFPemVoMDBud3cKQ2dZSUtvWkl6ajBFQXdJRFNBQXdSUUloQU1sZ1dabG1adFlCb3lqbkJsNHQzQ24zeElsT1NhZERYYnBaQm1Tcwp4WlZMQWlCNGxQWThmMXJnT3J2ZUdWbmFmRWpFZFRTd2JkQzY3cGN5MHd0Ymk0TmZkUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K""
			],
			""crypto_config"": {
				""signature_hash_family"": ""SHA2"",
				""identity_identifier_hash_function"": ""SHA256""
			},
			""tls_root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNYakNDQWdXZ0F3SUJBZ0lRTzRUaG1oazFrUzQ3M01JcERZSUdZREFLQmdncWhrak9QUVFEQWpCNk1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RWJNQmtHQTFVRUNoTVNaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNU0V3SHdZRFZRUURFeGgwCmJITmpZUzVuY21WbGJpMWhaMlZ1WTJsbGN5NWpiMjB3SGhjTk1Ua3dOVEE0TURreE16QXdXaGNOTWprd05UQTEKTURreE16QXdXakI2TVFzd0NRWURWUVFHRXdKVlV6RVRNQkVHQTFVRUNCTUtRMkZzYVdadmNtNXBZVEVXTUJRRwpBMVVFQnhNTlUyRnVJRVp5WVc1amFYTmpiekViTUJrR0ExVUVDaE1TWjNKbFpXNHRZV2RsYm1OcFpYTXVZMjl0Ck1TRXdId1lEVlFRREV4aDBiSE5qWVM1bmNtVmxiaTFoWjJWdVkybGxjeTVqYjIwd1dUQVRCZ2NxaGtqT1BRSUIKQmdncWhrak9QUU1CQndOQ0FBVFFLK0FiUGpvc2FjUEhSVWRtYktPSGdkYUdCT1huZ2RNZndmblZHSWRqVVVjcApLTDdEMmpWQ01GS2FrNTVyZjBEWjJISGtQVitTL054b2JsbjRiS2hFbzIwd2F6QU9CZ05WSFE4QkFmOEVCQU1DCkFhWXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0lHQ0NzR0FRVUZCd01CTUE4R0ExVWRFd0VCL3dRRk1BTUIKQWY4d0tRWURWUjBPQkNJRUlJcmErVXE1TWk3Z2d1RXhhNXRBRTUvaGtRUU54cWJTRGFGVkdsbWpZWER2TUFvRwpDQ3FHU000OUJBTUNBMGNBTUVRQ0lIcnBVZ3VxWlUxTC9NSzduVWpSdXBwSnUxYldCUFd5NTgzMUpBQTB6Ylo2CkFpQURTQVB4L3lxd1diOUFSRzVpVVpLaHBhZUwzNzUwYUJuOFJwcTdWTHdxSVE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==""
			],
			""fabric_node_ous"": {
				""enable"": true,
				""client_ou_identifier"": {
					""certificate"": ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNXVENDQWdDZ0F3SUJBZ0lSQUxPVkdUdmt1ai9SQ2xjYlNPeDZZSEV3Q2dZSUtvWkl6ajBFQXdJd2R6RUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHekFaQmdOVkJBb1RFbWR5WldWdUxXRm5aVzVqYVdWekxtTnZiVEVlTUJ3R0ExVUVBeE1WClkyRXVaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNQjRYRFRFNU1EVXdPREE1TVRNd01Gb1hEVEk1TURVd05UQTUKTVRNd01Gb3dkekVMTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVgpCQWNURFZOaGJpQkdjbUZ1WTJselkyOHhHekFaQmdOVkJBb1RFbWR5WldWdUxXRm5aVzVqYVdWekxtTnZiVEVlCk1Cd0dBMVVFQXhNVlkyRXVaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkkKemowREFRY0RRZ0FFRWlBeDhycDRtTWJUT2NWaXh6S2QvQ2piclV5aTJRSmtBWXQwZWNweWJnWW1qbTBDalhHeQpwMEtaanJ4Vm9JYTNNZVdhbUhKeklxRUJLMi92MVlSL2U2TnRNR3N3RGdZRFZSMFBBUUgvQkFRREFnR21NQjBHCkExVWRKUVFXTUJRR0NDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjREFUQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01Da0cKQTFVZERnUWlCQ0N5bVlRQklJaVFSVVRYUEVsODFlc2dKY1BYakRIWGgyLzZVQTdONkhUU2ZEQUtCZ2dxaGtqTwpQUVFEQWdOSEFEQkVBaUFzWmRiL2g1bWZjM2RhSXBGOVVNUHdHNHpEdVNka0JSV2VrU3JML3pxaWVnSWdlSUlKCmovMkorY1EwTnRvbHFzaFloZ0lJZDVzL1hOeDdCdVF6Y3BoTURWaz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="",
					""organizational_unit_identifier"": ""client""
				},
				""peer_ou_identifier"": {
					""certificate"": ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNXVENDQWdDZ0F3SUJBZ0lSQUxPVkdUdmt1ai9SQ2xjYlNPeDZZSEV3Q2dZSUtvWkl6ajBFQXdJd2R6RUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHekFaQmdOVkJBb1RFbWR5WldWdUxXRm5aVzVqYVdWekxtTnZiVEVlTUJ3R0ExVUVBeE1WClkyRXVaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNQjRYRFRFNU1EVXdPREE1TVRNd01Gb1hEVEk1TURVd05UQTUKTVRNd01Gb3dkekVMTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVgpCQWNURFZOaGJpQkdjbUZ1WTJselkyOHhHekFaQmdOVkJBb1RFbWR5WldWdUxXRm5aVzVqYVdWekxtTnZiVEVlCk1Cd0dBMVVFQXhNVlkyRXVaM0psWlc0dFlXZGxibU5wWlhNdVkyOXRNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkkKemowREFRY0RRZ0FFRWlBeDhycDRtTWJUT2NWaXh6S2QvQ2piclV5aTJRSmtBWXQwZWNweWJnWW1qbTBDalhHeQpwMEtaanJ4Vm9JYTNNZVdhbUhKeklxRUJLMi92MVlSL2U2TnRNR3N3RGdZRFZSMFBBUUgvQkFRREFnR21NQjBHCkExVWRKUVFXTUJRR0NDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjREFUQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01Da0cKQTFVZERnUWlCQ0N5bVlRQklJaVFSVVRYUEVsODFlc2dKY1BYakRIWGgyLzZVQTdONkhUU2ZEQUtCZ2dxaGtqTwpQUVFEQWdOSEFEQkVBaUFzWmRiL2g1bWZjM2RhSXBGOVVNUHdHNHpEdVNka0JSV2VrU3JML3pxaWVnSWdlSUlKCmovMkorY1EwTnRvbHFzaFloZ0lJZDVzL1hOeDdCdVF6Y3BoTURWaz0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="",
					""organizational_unit_identifier"": ""peer""
				}
			}
		},
		""green-airline"": {
			""name"": ""green-airline"",
			""root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNWakNDQWZ5Z0F3SUJBZ0lSQU02YUpuNzR4QXJIckphZFlZRlZPUTh3Q2dZSUtvWkl6ajBFQXdJd2RURUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHakFZQmdOVkJBb1RFV2R5WldWdUxXRnBjbXhwYm1VdVkyOXRNUjB3R3dZRFZRUURFeFJqCllTNW5jbVZsYmkxaGFYSnNhVzVsTG1OdmJUQWVGdzB4T1RBMU1EZ3dPVEV6TURCYUZ3MHlPVEExTURVd09URXoKTURCYU1IVXhDekFKQmdOVkJBWVRBbFZUTVJNd0VRWURWUVFJRXdwRFlXeHBabTl5Ym1saE1SWXdGQVlEVlFRSApFdzFUWVc0Z1JuSmhibU5wYzJOdk1Sb3dHQVlEVlFRS0V4Rm5jbVZsYmkxaGFYSnNhVzVsTG1OdmJURWRNQnNHCkExVUVBeE1VWTJFdVozSmxaVzR0WVdseWJHbHVaUzVqYjIwd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUIKQndOQ0FBVE4vWStueFlGWkh3YkVIRStxdkd1dnZNelkxd3QwYnZOTWxWbVdybVJzc1NOejJQaEllMER0SmJ4cgpCZUJuT25TQjA1cVhpckZ2N1k3a05xeWZGekpRbzIwd2F6QU9CZ05WSFE4QkFmOEVCQU1DQWFZd0hRWURWUjBsCkJCWXdGQVlJS3dZQkJRVUhBd0lHQ0NzR0FRVUZCd01CTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3S1FZRFZSME8KQkNJRUlIZU1OWlhrbVYrWTNoVEtEbXZ2NnZobEtma2pra2w1eXBUdTluSVdWbGxwTUFvR0NDcUdTTTQ5QkFNQwpBMGdBTUVVQ0lRQ1hDTXBBSmhDWEVlMXhIc0lPV3dIZDh3K09OcHBpNVdZczdOdk1QSlNxTlFJZ0hWZVJTajNmClU3eXBCR3RCMmtJV0RJQnFpemVUR2lnMTRCRFZtNFZPZ1JFPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==""
			],
			""admins"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNMVENDQWRPZ0F3SUJBZ0lRRnJpTElQdDNxNzFrMlFCUlpHSW1QVEFLQmdncWhrak9QUVFEQWpCMU1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RWFNQmdHQTFVRUNoTVJaM0psWlc0dFlXbHliR2x1WlM1amIyMHhIVEFiQmdOVkJBTVRGR05oCkxtZHlaV1Z1TFdGcGNteHBibVV1WTI5dE1CNFhEVEU1TURVd09EQTVNVE13TUZvWERUSTVNRFV3TlRBNU1UTXcKTUZvd2JURUxNQWtHQTFVRUJoTUNWVk14RXpBUkJnTlZCQWdUQ2tOaGJHbG1iM0p1YVdFeEZqQVVCZ05WQkFjVApEVk5oYmlCR2NtRnVZMmx6WTI4eER6QU5CZ05WQkFzVEJtTnNhV1Z1ZERFZ01CNEdBMVVFQXd3WFFXUnRhVzVBClozSmxaVzR0WVdseWJHbHVaUzVqYjIwd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUJCd05DQUFROStBeS8KRmhIcHRMM2tYRHBrWGVqRkowVWE2Mm9qWW1GSFNOYTBrMDJGY0IvVWVxbE1HVVZIT09jRW52aVVObkl2VVNYcQorZGhHQU9DL1FIcGg2OHB5bzAwd1N6QU9CZ05WSFE4QkFmOEVCQU1DQjRBd0RBWURWUjBUQVFIL0JBSXdBREFyCkJnTlZIU01FSkRBaWdDQjNqRFdWNUpsZm1ONFV5ZzVyNytyNFpTbjVJNUpKZWNxVTd2WnlGbFpaYVRBS0JnZ3EKaGtqT1BRUURBZ05JQURCRkFpRUE1Qnc5a3dZdXl0ZHVTdFVkRTBha2ZVQ1h1dzQ2MXFEY3FtbVJJNDhGbFRzQwpJQVBta3FnWkFoN1lLMStJaEtxNmJ4dSt5WGZUK0I1ZGlHZUZwZ24xT3VwcAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==""
			],
			""crypto_config"": {
				""signature_hash_family"": ""SHA2"",
				""identity_identifier_hash_function"": ""SHA256""
			},
			""tls_root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNXekNDQWdLZ0F3SUJBZ0lSQU4zTUJvK0pXZnpma0RGSDN3UDM5Y3d3Q2dZSUtvWkl6ajBFQXdJd2VERUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHakFZQmdOVkJBb1RFV2R5WldWdUxXRnBjbXhwYm1VdVkyOXRNU0F3SGdZRFZRUURFeGQwCmJITmpZUzVuY21WbGJpMWhhWEpzYVc1bExtTnZiVEFlRncweE9UQTFNRGd3T1RFek1EQmFGdzB5T1RBMU1EVXcKT1RFek1EQmFNSGd4Q3pBSkJnTlZCQVlUQWxWVE1STXdFUVlEVlFRSUV3cERZV3hwWm05eWJtbGhNUll3RkFZRApWUVFIRXcxVFlXNGdSbkpoYm1OcGMyTnZNUm93R0FZRFZRUUtFeEZuY21WbGJpMWhhWEpzYVc1bExtTnZiVEVnCk1CNEdBMVVFQXhNWGRHeHpZMkV1WjNKbFpXNHRZV2x5YkdsdVpTNWpiMjB3V1RBVEJnY3Foa2pPUFFJQkJnZ3EKaGtqT1BRTUJCd05DQUFSbzBYcytkZnhrM1ZRbU5xUnVUSEJrSXJnQzJRT2FsMmpZMnN1Y04wTUNsZGQzcjF2egp6WVluNUhNOTdYYmVLcitIeXlXOVRRMDRrLzhrZ1RNbU5wV3FvMjB3YXpBT0JnTlZIUThCQWY4RUJBTUNBYVl3CkhRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSEF3SUdDQ3NHQVFVRkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHcKS1FZRFZSME9CQ0lFSUQ2MTBPQkFOVGt5bEJOVU1EdnJoTHo0dkVCdlJ5aU5ndjZHNVNrMVozYjZNQW9HQ0NxRwpTTTQ5QkFNQ0EwY0FNRVFDSUJMR0w3T0VOVTRTMTUyV2RRZU0xUERyVGNUVmV4bzA0R3ZUdEpzMUFnMDZBaUFTClFEdy9xVlpiZVNyZ3gyTXZtYk1ZUFl4dWNzTGNlRUhwTGVFNExZYkNYUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K""
			],
			""fabric_node_ous"": {
				""enable"": true,
				""client_ou_identifier"": {
					""certificate"": ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNWakNDQWZ5Z0F3SUJBZ0lSQU02YUpuNzR4QXJIckphZFlZRlZPUTh3Q2dZSUtvWkl6ajBFQXdJd2RURUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHakFZQmdOVkJBb1RFV2R5WldWdUxXRnBjbXhwYm1VdVkyOXRNUjB3R3dZRFZRUURFeFJqCllTNW5jbVZsYmkxaGFYSnNhVzVsTG1OdmJUQWVGdzB4T1RBMU1EZ3dPVEV6TURCYUZ3MHlPVEExTURVd09URXoKTURCYU1IVXhDekFKQmdOVkJBWVRBbFZUTVJNd0VRWURWUVFJRXdwRFlXeHBabTl5Ym1saE1SWXdGQVlEVlFRSApFdzFUWVc0Z1JuSmhibU5wYzJOdk1Sb3dHQVlEVlFRS0V4Rm5jbVZsYmkxaGFYSnNhVzVsTG1OdmJURWRNQnNHCkExVUVBeE1VWTJFdVozSmxaVzR0WVdseWJHbHVaUzVqYjIwd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUIKQndOQ0FBVE4vWStueFlGWkh3YkVIRStxdkd1dnZNelkxd3QwYnZOTWxWbVdybVJzc1NOejJQaEllMER0SmJ4cgpCZUJuT25TQjA1cVhpckZ2N1k3a05xeWZGekpRbzIwd2F6QU9CZ05WSFE4QkFmOEVCQU1DQWFZd0hRWURWUjBsCkJCWXdGQVlJS3dZQkJRVUhBd0lHQ0NzR0FRVUZCd01CTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3S1FZRFZSME8KQkNJRUlIZU1OWlhrbVYrWTNoVEtEbXZ2NnZobEtma2pra2w1eXBUdTluSVdWbGxwTUFvR0NDcUdTTTQ5QkFNQwpBMGdBTUVVQ0lRQ1hDTXBBSmhDWEVlMXhIc0lPV3dIZDh3K09OcHBpNVdZczdOdk1QSlNxTlFJZ0hWZVJTajNmClU3eXBCR3RCMmtJV0RJQnFpemVUR2lnMTRCRFZtNFZPZ1JFPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="",
					""organizational_unit_identifier"": ""client""
				},
				""peer_ou_identifier"": {
					""certificate"": ""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNWakNDQWZ5Z0F3SUJBZ0lSQU02YUpuNzR4QXJIckphZFlZRlZPUTh3Q2dZSUtvWkl6ajBFQXdJd2RURUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhHakFZQmdOVkJBb1RFV2R5WldWdUxXRnBjbXhwYm1VdVkyOXRNUjB3R3dZRFZRUURFeFJqCllTNW5jbVZsYmkxaGFYSnNhVzVsTG1OdmJUQWVGdzB4T1RBMU1EZ3dPVEV6TURCYUZ3MHlPVEExTURVd09URXoKTURCYU1IVXhDekFKQmdOVkJBWVRBbFZUTVJNd0VRWURWUVFJRXdwRFlXeHBabTl5Ym1saE1SWXdGQVlEVlFRSApFdzFUWVc0Z1JuSmhibU5wYzJOdk1Sb3dHQVlEVlFRS0V4Rm5jbVZsYmkxaGFYSnNhVzVsTG1OdmJURWRNQnNHCkExVUVBeE1VWTJFdVozSmxaVzR0WVdseWJHbHVaUzVqYjIwd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUIKQndOQ0FBVE4vWStueFlGWkh3YkVIRStxdkd1dnZNelkxd3QwYnZOTWxWbVdybVJzc1NOejJQaEllMER0SmJ4cgpCZUJuT25TQjA1cVhpckZ2N1k3a05xeWZGekpRbzIwd2F6QU9CZ05WSFE4QkFmOEVCQU1DQWFZd0hRWURWUjBsCkJCWXdGQVlJS3dZQkJRVUhBd0lHQ0NzR0FRVUZCd01CTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3S1FZRFZSME8KQkNJRUlIZU1OWlhrbVYrWTNoVEtEbXZ2NnZobEtma2pra2w1eXBUdTluSVdWbGxwTUFvR0NDcUdTTTQ5QkFNQwpBMGdBTUVVQ0lRQ1hDTXBBSmhDWEVlMXhIc0lPV3dIZDh3K09OcHBpNVdZczdOdk1QSlNxTlFJZ0hWZVJTajNmClU3eXBCR3RCMmtJV0RJQnFpemVUR2lnMTRCRFZtNFZPZ1JFPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="",
					""organizational_unit_identifier"": ""peer""
				}
			}
		},
		""orderer1"": {
			""name"": ""orderer1"",
			""root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNRRENDQWVlZ0F3SUJBZ0lRZHV1bmpJZTR4M2hPYWNVb0dUZ00wekFLQmdncWhrak9QUVFEQWpCck1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqRXVZMjl0TVJnd0ZnWURWUVFERXc5allTNXZjbVJsCmNtVnlNUzVqYjIwd0hoY05NVGt3TlRBNE1Ea3hNekF3V2hjTk1qa3dOVEExTURreE16QXdXakJyTVFzd0NRWUQKVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTlUyRnVJRVp5WVc1agphWE5qYnpFVk1CTUdBMVVFQ2hNTWIzSmtaWEpsY2pFdVkyOXRNUmd3RmdZRFZRUURFdzlqWVM1dmNtUmxjbVZ5Ck1TNWpiMjB3V1RBVEJnY3Foa2pPUFFJQkJnZ3Foa2pPUFFNQkJ3TkNBQVFWaStiVXJja3JoWWMxcnBCdlV0Q2oKOWNCbHRuL1VUeHRSa0lWZnNLTHRMdGJKR3dTSk5xcEgvZ0E4clBsY2FncXZITzJBeFlVajFDWTBvNG9zcnB1awpvMjB3YXpBT0JnTlZIUThCQWY4RUJBTUNBYVl3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdLUVlEVlIwT0JDSUVJR3hZbndWaXV5RWZMQjA4cFFtNEVDWkUKK0FHNUNZMi9XM0JLT2hiK053UnNNQW9HQ0NxR1NNNDlCQU1DQTBjQU1FUUNJQlAzN2JzdlF5NS9vbzVtREJnUQpsUVNwL25YcG5WaThvVE11VzUxQ0hHc2JBaUI0RlI2WW9wOElyUmJ1L0pHcnVhcW5vTmc4RW1XbU5yTkdCbUJ1CjNYVElrZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K""
			],
			""admins"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNERENDQWJPZ0F3SUJBZ0lRS1VQa2EzTzFXNUF4dklTQThGRlc1REFLQmdncWhrak9QUVFEQWpCck1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqRXVZMjl0TVJnd0ZnWURWUVFERXc5allTNXZjbVJsCmNtVnlNUzVqYjIwd0hoY05NVGt3TlRBNE1Ea3hNekF3V2hjTk1qa3dOVEExTURreE16QXdXakJYTVFzd0NRWUQKVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTlUyRnVJRVp5WVc1agphWE5qYnpFYk1Ca0dBMVVFQXd3U1FXUnRhVzVBYjNKa1pYSmxjakV1WTI5dE1Ga3dFd1lIS29aSXpqMENBUVlJCktvWkl6ajBEQVFjRFFnQUUyWUlkdW9oMFRsdnh0NStZaW5VYW1HcXJncTFjaHZRWWJhTUl5anNCbzhaSHExNTEKRHE5UDdCY2U0R3ZBMGtFdkdPaGQ4ekZIQzg4VzFTQnZPSlROMzZOTk1Fc3dEZ1lEVlIwUEFRSC9CQVFEQWdlQQpNQXdHQTFVZEV3RUIvd1FDTUFBd0t3WURWUjBqQkNRd0lvQWdiRmlmQldLN0lSOHNIVHlsQ2JnUUprVDRBYmtKCmpiOWJjRW82RnY0M0JHd3dDZ1lJS29aSXpqMEVBd0lEUndBd1JBSWdibyszZjJ3eGZ4QTFJdi9iMDE5WFZ4T1MKUWVNTGUvQUNsQytFbFFqbzRaMENJSGZ1QkpleFVPTjBXdXhtSFNGMjFIOEU3MC94UDZDeWFqWkdxa0FGVGFNagotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==""
			],
			""crypto_config"": {
				""signature_hash_family"": ""SHA2"",
				""identity_identifier_hash_function"": ""SHA256""
			},
			""tls_root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNTRENDQWU2Z0F3SUJBZ0lSQUp2anpvOUxwYkxwZng2K3c0TXN2WXN3Q2dZSUtvWkl6ajBFQXdJd2JqRUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhGVEFUQmdOVkJBb1RERzl5WkdWeVpYSXhMbU52YlRFYk1Ca0dBMVVFQXhNU2RHeHpZMkV1CmIzSmtaWEpsY2pFdVkyOXRNQjRYRFRFNU1EVXdPREE1TVRNd01Gb1hEVEk1TURVd05UQTVNVE13TUZvd2JqRUwKTUFrR0ExVUVCaE1DVlZNeEV6QVJCZ05WQkFnVENrTmhiR2xtYjNKdWFXRXhGakFVQmdOVkJBY1REVk5oYmlCRwpjbUZ1WTJselkyOHhGVEFUQmdOVkJBb1RERzl5WkdWeVpYSXhMbU52YlRFYk1Ca0dBMVVFQXhNU2RHeHpZMkV1CmIzSmtaWEpsY2pFdVkyOXRNRmt3RXdZSEtvWkl6ajBDQVFZSUtvWkl6ajBEQVFjRFFnQUVldkZYR3d1UFhxQjAKR0k5Z1UvRStRZk1SS3NpRUh0Q0RLaFlRdk05YmlHN1AvYW1PQXNVanJwNFRtQ1JFWGVMOEliY1FJdXYrNGVFVAozVS9SZGV6TGNhTnRNR3N3RGdZRFZSMFBBUUgvQkFRREFnR21NQjBHQTFVZEpRUVdNQlFHQ0NzR0FRVUZCd01DCkJnZ3JCZ0VGQlFjREFUQVBCZ05WSFJNQkFmOEVCVEFEQVFIL01Da0dBMVVkRGdRaUJDQS85WkxNQk5kK1l5MmsKME4wbU14VnRndjFjRm1oRVlYK1BkL1NKT3VRV0ZUQUtCZ2dxaGtqT1BRUURBZ05JQURCRkFpRUFrQ1hSYnA5UQpzRjJGclhOZlVQRkhBUWZpUXllYjV0M2V5VUlnWFZEa245TUNJR0JzellwQ1RueDhLVzVTVmxFenFHNlh0SlBFClIzNkRRaEJ4SDczK3pHME4KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""
			]
		},
		""orderer2"": {
			""name"": ""orderer2"",
			""root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNRVENDQWVlZ0F3SUJBZ0lRUnlyR3lkNEhvQ2FSeWM3eEVOZTl1ekFLQmdncWhrak9QUVFEQWpCck1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqSXVZMjl0TVJnd0ZnWURWUVFERXc5allTNXZjbVJsCmNtVnlNaTVqYjIwd0hoY05NVGt3TlRBNE1Ea3hNekF3V2hjTk1qa3dOVEExTURreE16QXdXakJyTVFzd0NRWUQKVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTlUyRnVJRVp5WVc1agphWE5qYnpFVk1CTUdBMVVFQ2hNTWIzSmtaWEpsY2pJdVkyOXRNUmd3RmdZRFZRUURFdzlqWVM1dmNtUmxjbVZ5Ck1pNWpiMjB3V1RBVEJnY3Foa2pPUFFJQkJnZ3Foa2pPUFFNQkJ3TkNBQVNmeCs3MlR5SkxJM3BmZ2RxZCtLRTgKRmFrL1dQMG0zMStGblRld0VqUHRZblNLZmxnMjdZK2lzTEVPV2dZVXBucTlTOHdxWGhWUGdDM2Nna0U0dFE4RApvMjB3YXpBT0JnTlZIUThCQWY4RUJBTUNBYVl3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdLUVlEVlIwT0JDSUVJSmthSlhoVElOQ1kvYzVGOXZsdlk0Q2MKblBIekpOZ0djajV4YXNTQS95dk9NQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJUUNmZDFDdjFiU25GclhodEh0VApaV0ZpWGtMS29WQmdUNEZpVGxtQnNCWUx0d0lnRW5EL2c0WUVrL2VGQ2kveVJhZU1JRDMvMEtBUElvRElRZWZFCjY4cUJlSVk9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K""
			],
			""admins"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNEVENDQWJPZ0F3SUJBZ0lRRUxVYitJV3JUbEZrYmVJc2w4bnlBakFLQmdncWhrak9QUVFEQWpCck1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqSXVZMjl0TVJnd0ZnWURWUVFERXc5allTNXZjbVJsCmNtVnlNaTVqYjIwd0hoY05NVGt3TlRBNE1Ea3hNekF3V2hjTk1qa3dOVEExTURreE16QXdXakJYTVFzd0NRWUQKVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTlUyRnVJRVp5WVc1agphWE5qYnpFYk1Ca0dBMVVFQXd3U1FXUnRhVzVBYjNKa1pYSmxjakl1WTI5dE1Ga3dFd1lIS29aSXpqMENBUVlJCktvWkl6ajBEQVFjRFFnQUVoWFlscGNmdlBvSEtObDB6eGNmOUo0MWV0L0FsV051cEIvUFlxdUtmMG5EK3ZFSzYKMXNyVFNmMFFTUitiV3hlNDBlQmtWdjVMSFBuWjMzOFlJOWFyZ3FOTk1Fc3dEZ1lEVlIwUEFRSC9CQVFEQWdlQQpNQXdHQTFVZEV3RUIvd1FDTUFBd0t3WURWUjBqQkNRd0lvQWdtUm9sZUZNZzBKajl6a1gyK1c5amdKeWM4Zk1rCjJBWnlQbkZxeElEL0s4NHdDZ1lJS29aSXpqMEVBd0lEU0FBd1JRSWhBSmZpSVgwNWlDaHhXUTJGcDhmS0pQRngKeEVNQmh0bVpqS0JSYTVYVHUzRzZBaUFsSTdQODQ3RlU0aC9GTjlSQmlIbSt3d0FxaEFUVU9xbXdZMzZZUGxHWAo2UT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K""
			],
			""crypto_config"": {
				""signature_hash_family"": ""SHA2"",
				""identity_identifier_hash_function"": ""SHA256""
			},
			""tls_root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNSakNDQWUyZ0F3SUJBZ0lRWHczdHJZWnVHU21Gek1OblVYZUpYakFLQmdncWhrak9QUVFEQWpCdU1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqSXVZMjl0TVJzd0dRWURWUVFERXhKMGJITmpZUzV2CmNtUmxjbVZ5TWk1amIyMHdIaGNOTVRrd05UQTRNRGt4TXpBd1doY05Namt3TlRBMU1Ea3hNekF3V2pCdU1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqSXVZMjl0TVJzd0dRWURWUVFERXhKMGJITmpZUzV2CmNtUmxjbVZ5TWk1amIyMHdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CQndOQ0FBVDlROGRReFhBUE1rU1gKVE1CVUFEOGx0MGJuL1BtbmJ4SEZQVEJXazF0bnFKd2pXZFNYKzR4ejBvb1g5WHdseVdnVTh2WFpwa3FNcisyeApQeVVQcFhvT28yMHdhekFPQmdOVkhROEJBZjhFQkFNQ0FhWXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0lHCkNDc0dBUVVGQndNQk1BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0tRWURWUjBPQkNJRUlJeDB2R21uRVQ3RG9BSE4KWW9WaUF3ZEZDM1dmcGhka2swUVVoWVlwaVpRZU1Bb0dDQ3FHU000OUJBTUNBMGNBTUVRQ0lDS2dGSWVOWlpPRgp4QjJCU2xoM2xJcDduUGJDc2NhTjRpYWh6NW5peVRUcEFpQmZLeHNERUV5djJjUkdyNFliVFE4bUhXaTAzUFVYClNMaCtjd1VEbEtOQzd3PT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""
			]
		},
		""orderer3"": {
			""name"": ""orderer3"",
			""root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNRVENDQWVlZ0F3SUJBZ0lRTWo2RGFPU2xwVzQ1TWdacVhLRTZZekFLQmdncWhrak9QUVFEQWpCck1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqTXVZMjl0TVJnd0ZnWURWUVFERXc5allTNXZjbVJsCmNtVnlNeTVqYjIwd0hoY05NVGt3TlRBNE1Ea3hNekF3V2hjTk1qa3dOVEExTURreE16QXdXakJyTVFzd0NRWUQKVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTlUyRnVJRVp5WVc1agphWE5qYnpFVk1CTUdBMVVFQ2hNTWIzSmtaWEpsY2pNdVkyOXRNUmd3RmdZRFZRUURFdzlqWVM1dmNtUmxjbVZ5Ck15NWpiMjB3V1RBVEJnY3Foa2pPUFFJQkJnZ3Foa2pPUFFNQkJ3TkNBQVRMaHdGQTk5eVg5QzFJSk91Ymw5OFoKbnhPQU1WcjZzVjVKVjZHbWRBVDRKVFZmam9NUUhrWlNCNjJreWhCSEdJaXhIdVJOdjBKQ0RaY1VGUlJoTWxKRApvMjB3YXpBT0JnTlZIUThCQWY4RUJBTUNBYVl3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGCkJ3TUJNQThHQTFVZEV3RUIvd1FGTUFNQkFmOHdLUVlEVlIwT0JDSUVJRjF2T1JVVGJrUGM1SlYwa3c1T0JTN1MKZ2QwZTVybmxRdjAxbEloV3kzS3RNQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJUUNNaFFubGVxUjBhN0JQZkMrLwpwUlhYUWdZQ3ZXZlgvNjQ0QlIwcWN3YVZKUUlnV05EVWpSSngySDJHNzBvZE44QzNmZ3ZLYUNTTk95cU5pTGZHClM4dG9hRE09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K""
			],
			""admins"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNERENDQWJPZ0F3SUJBZ0lRSU5YMXJ1bzBXclVQSXQ4ZWFsTUh0REFLQmdncWhrak9QUVFEQWpCck1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqTXVZMjl0TVJnd0ZnWURWUVFERXc5allTNXZjbVJsCmNtVnlNeTVqYjIwd0hoY05NVGt3TlRBNE1Ea3hNekF3V2hjTk1qa3dOVEExTURreE16QXdXakJYTVFzd0NRWUQKVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFV01CUUdBMVVFQnhNTlUyRnVJRVp5WVc1agphWE5qYnpFYk1Ca0dBMVVFQXd3U1FXUnRhVzVBYjNKa1pYSmxjak11WTI5dE1Ga3dFd1lIS29aSXpqMENBUVlJCktvWkl6ajBEQVFjRFFnQUVoTUtsaWQ5QlIzKzZTVi9NZDhCTEFjbWFDREVwUC9YUVBpWkVIRVNhRU85Y0JIQVkKNmVCVzRXUG5ja3QyRVZEV2VmTUowRG1DMzBSSldQcEhweGk4SWFOTk1Fc3dEZ1lEVlIwUEFRSC9CQVFEQWdlQQpNQXdHQTFVZEV3RUIvd1FDTUFBd0t3WURWUjBqQkNRd0lvQWdYVzg1RlJOdVE5emtsWFNURGs0Rkx0S0IzUjdtCnVlVkMvVFdVaUZiTGNxMHdDZ1lJS29aSXpqMEVBd0lEUndBd1JBSWdCSHBvZ3NlNUR1SmtpejltVEw5NVN0bzcKRUQzNnduVWVxalY3VEdGalNMY0NJR3cydDQyNkVmRHpJWG85YmM4K1BSa1BIVGF0dHo5emJUdXJCTFdTV21qdAotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==""
			],
			""crypto_config"": {
				""signature_hash_family"": ""SHA2"",
				""identity_identifier_hash_function"": ""SHA256""
			},
			""tls_root_certs"": [
				""LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUNSakNDQWUyZ0F3SUJBZ0lRWTdBUGN6NWNOV0hwZFNFS01NSG10REFLQmdncWhrak9QUVFEQWpCdU1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqTXVZMjl0TVJzd0dRWURWUVFERXhKMGJITmpZUzV2CmNtUmxjbVZ5TXk1amIyMHdIaGNOTVRrd05UQTRNRGt4TXpBd1doY05Namt3TlRBMU1Ea3hNekF3V2pCdU1Rc3cKQ1FZRFZRUUdFd0pWVXpFVE1CRUdBMVVFQ0JNS1EyRnNhV1p2Y201cFlURVdNQlFHQTFVRUJ4TU5VMkZ1SUVaeQpZVzVqYVhOamJ6RVZNQk1HQTFVRUNoTU1iM0prWlhKbGNqTXVZMjl0TVJzd0dRWURWUVFERXhKMGJITmpZUzV2CmNtUmxjbVZ5TXk1amIyMHdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CQndOQ0FBUlJWWS9xMko1R0tnbFUKaUJWZmZmT25rQ3BEYVhTL1NmN0l4Y3FFdHlvY0dFQklDY1NXaCtNTmNSblBZYXFlUm9KdEhxOWQ0R1dUMzcvRApjc2Y2d0VuaG8yMHdhekFPQmdOVkhROEJBZjhFQkFNQ0FhWXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0lHCkNDc0dBUVVGQndNQk1BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0tRWURWUjBPQkNJRUlLMEdjYWtGT2xPNndhQUwKcnRzYUFWLzRSSXlBYkVuNFlnbEhQY3A4ajFSdk1Bb0dDQ3FHU000OUJBTUNBMGNBTUVRQ0lESHoxemV1MTIyWAo5RE5wR1NGYXBDbDZJRTR0RnhrOVMwdm1uS1RtTzdKckFpQTBDemdaL01ySkVjeVdJSWJobXBhTWR6ZEVUd2Q1CldOcVkrZnprYXhNNHdnPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=""
			]
		}
	},
	""orderers"": {
		""orderer1"": {
			""endpoint"": [
				{
					""host"": ""orderer1"",
					""port"": 7050
				},
				{
					""host"": ""orderer2"",
					""port"": 7050
				},
				{
					""host"": ""orderer3"",
					""port"": 7050
				}
			]
		},
		""orderer2"": {
			""endpoint"": [
				{
					""host"": ""orderer1"",
					""port"": 7050
				},
				{
					""host"": ""orderer2"",
					""port"": 7050
				},
				{
					""host"": ""orderer3"",
					""port"": 7050
				}
			]
		},
		""orderer3"": {
			""endpoint"": [
				{
					""host"": ""orderer1"",
					""port"": 7050
				},
				{
					""host"": ""orderer2"",
					""port"": 7050
				},
				{
					""host"": ""orderer3"",
					""port"": 7050
				}
			]
		}
	}
};;;","20/May/19 8:57 PM;rickr;This is what the SDK is  also seeing: the same Orderer endpoints listed under 3 different mspids.  I don't think that's a valid case.
I'm thinking there are two possibilities: 
# The configuration is incorrect and endpoints are actually listed under three different mspids.
# The configuration is valid but service discovery is incorrectly mapping Orderer endpoints to the wrong mspids.

I think in the first case this is still a fabric bug as the SDK should not be the one that discovers this inconsistency.  In second case service discovery needs to be fixed. 

I have on the SDK side a todo that better detects this instead of clobbering TLS certificates by logging a warning.;;;","20/May/19 9:01 PM;rickr;[~timpii] Please also provide a set of logs at trace level of the SDK and full debug of the peer doing service discovery. 

FYI [~denyeart] [~yacovm]

 ;;;","21/May/19 7:02 AM;yacovm;So, before Fabric v2.0 you can only specify orderer endpoints globally and you cannot express an association of endpoints to a particular organization:
{code:java}
Orderer: &OrdererDefaults

    # Orderer Type: The orderer implementation to start
    # Available types are ""solo"" and ""kafka""
    OrdererType: etcdraft
    Capabilities:
        V1_1: true

    Addresses:
        - orderer1:7050
        - orderer2:7050
        - orderer3:7050
{code}
That's why the discovery service, returns to you *all endpoints* in *all* 3 orderer MSPs - because it just doesn't know which one belongs to who.

The sad truth, is that pre-v2.0 Fabric configuration, is just not suitable for deploying orderers in different organizations.

I raised an issue in FAB-7559 in the end of 2017 and lo and behold - a year and a half after - in Fabric v2.0 you can now specify the endpoints to be under the organization, and not globally.

The global endpoints config is now deprecated by default in our sample and says:
{code:java}
    # Addresses used to be the list of orderer addresses that clients and peers
    # could connect to.  However, this does not allow clients to associate orderer
    # addresses and orderer organizations which can be useful for things such
    # as TLS validation.  The preferred way to specify orderer addresses is now
    # to include the OrdererEndpoints item in your org definition
    Addresses:
# - 127.0.0.1:7050
# {code}
and instead we have a [per org endpoints config|https://github.com/hyperledger/fabric/blob/master/sampleconfig/configtx.yaml#L63-L66] now:
{code:java}
        # OrdererEndpoints is a list of all orderers this org runs which clients
        # and peers may to connect to to push transactions and receive blocks respectively.
        OrdererEndpoints:
- ""127.0.0.1:7050""
{code}
The discovery service in the peer, as well as the orderer (and soon enough, the peer!) all prefer to use the per-org endpoints over the global endpoints.

The reason the discovery returns to you a per-org mapping in the first place, is that discovery was built in the first place to fit the future (right way) config structure (which turned out to only manifest a year and a half later), and I assumed that if you can't connect to an orderer node - the SDK would try a different orderer node anyway, and will mask this connection error from the application. 

And - if it had returned a representation that doesn't map endpoints to *any* specific organization, then you'd had to load *all* your TLS CA certificates (as an application) when attempting to connect to *any* orderer endpoint, which you can do now anyway (in theory...)

 

A possible corrective action for v1.4.x in the SDKs that can be done, is to just figure out if we have the same orderer endpoints duplicated across all MSPs, and if so - load all TLS CAs regardless of the MSP mapping.

Another option would be to ensure that the SDK simply tries to connect with other combinations and actually masks this problem from the application layer.

 

 

 ;;;","21/May/19 7:11 AM;yacovm;/CC [~mastersingh24] [~jyellick] [~sykesm];;;","21/May/19 9:25 PM;rickr;Just curious, what is the use case for the need of a per Org Orderer?  I can see multiple Orderers can be needed for redundancy.   If this use case is not vital seems to me the answer is don't do that or move to 2.0.   It can't be too large of a need this is first I've seen someone trying this.

 ;;;","21/May/19 10:31 PM;yacovm;This is the standard use case of BFT (each organization that hosts an orderer, has its own org).

And for Raft - you don't want to have a single organization going bankrupt and as a result all parties can't transact.;;;","21/May/19 11:12 PM;timpii;Some history - I am setting up a local dev environment on minikube for a production application and a Dev/Test environment on the cloud in IKS. I have also been involved in several issues recently related to Active-Active-Active orderers across multiple DCs ( or the need for them). It just seemed natural when you have orderers spread across multiple DCs that there is a strong potential that they are going to belong to different organizations. So I tried configuring it that way not understanding it was an issue.

We do have the above working with a single Orderer Organization - using Service Discovery, TLS and Raft. I have client developers and garage developers starting in several weeks, so I could not wait. 

I agree with [~yacovm] comments. As we get out of the tire kicking / early adopter stages and start to build more complex networks with real consortium governance it is a base requirement to have distributed orderer orgs.;;;","23/May/19 4:22 AM;denyeart;[~yacovm] So that all options are on the table for consideration, can you enumerate what from master (v2.0) would have to be back-ported to release-1.4 to fix this in a v1.4.x release.  It's likely more than we'd like to backport, but do you see any blockers? I assume from a user perspective, this would require a capability update and a config transaction to (re)define the orderer endpoints per org. ;;;","23/May/19 4:29 AM;yacovm;All you need is to backport FAB-14158 (2 commits - v2.0 capability + the config addition) and FAB-15446 (1 commit - the discovery service addition) .

 

Also inviting [~jyellick] to give his opinion on this.;;;","23/May/19 5:42 AM;yacovm;By the way  - unless we backport all of the subtasks of FAB-7559, a Fabric administrator would have to define the endpoints twice - globally and per org, in order for the peer and orderers to be able to connect to one another.

If one would have separate orgs like Tim here has, on a Fabric network that is v1.4.2 with backported and enabled v2.0 capability + the discovery patch (but not the orderers and peers modifications that were made in v2.0) - the peers and orderers won't encounter errors because they would load all TLS CAs and use the global endpoints, and ignore the new per org endpoints. ;;;","23/May/19 5:35 PM;denyeart;If I understand Yacov's comment correctly, we have two options on a possible backport of FAB-7559 to release-1.4:

1) backport just the capability, config, and discovery subtasks. Users would have to define endpoints at both global level (for peers and orderers) and org level (for SDKs)

2) backport all the subtasks. Users would configure just the per org endpoints (for peers and orderers and SDKs) and not the global endpoints.

The config change would be done concurrent or after the capability enablement.
Note, up until now there is no precedent for enabling capabilities in a third digit fix.;;;","29/May/19 1:25 AM;denyeart;Node SDK will have same issue, which makes backport of FAB-7559 to v1.4.2 more attractive, to avoid workarounds in all SDKs.  I will mark both for v1.4.2.;;;","30/May/19 3:17 AM;dongming;I tested service discovery with fabric-1.4.1 on a network with two orderer org and observed the following error:

^[[32minfo^[[39m: [2019-05-28T20:44:03.907Z PTE 0 main]: stderr: E0528 16:44:03.907065998   22529 ssl_transport_security.cc:1229] Handshake failed with fatal error SSL_ERROR_SSL: error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed.

^[[32minfo^[[39m: [2019-05-28T20:44:04.901Z PTE 0 main]: stderr: E0528 16:44:04.901302243   22529 ssl_transport_security.cc:1229] Handshake failed with fatal error SSL_ERROR_SSL: error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed.

;;;","30/May/19 3:21 AM;yacovm;[~dongming] but you have several combinations of TLS CAs and endpoints , so the SDK should be able to pick a combination that eventually fits together well.

Can the SDK eventually manage to send a transaction or not?;;;","31/May/19 4:08 AM;dongming;[~yacovm] Yes, the transactions went thru eventually.;;;","17/Jul/19 4:19 AM;denyeart;Fixed in v1.4.2 via FAB-7559.;;;",,,,,,,,,,,,,,,,,,,,,,
Update to dep 0.5.3 in master,FAB-15483,39919,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,20/May/19 10:05 PM,22/May/19 9:22 PM,28/Oct/23 3:08 AM,22/May/19 9:22 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mt0:r",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/19 5:37 AM;sykesm;remote: New Changes:
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31475 [FAB-15483] update dep and vendored deps
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31476 [FAB-15483] updated vendored docker client
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31477 [FAB-15483] update vendored sarama version;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix Go 1.12.5 goimport errors due to bad naming conventions,FAB-15484,39920,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,20/May/19 10:31 PM,21/May/19 10:11 AM,28/Oct/23 3:08 AM,21/May/19 3:55 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,btl5037,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00o9j:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,MHBauer,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 9:45 AM;MHBauer;What was this issue? Where did it show up? Where was it discussed?

 

I see a bunch of patches that look like they should have been combined, none of which has any discussion.

 

Now that I'm here in the issue, I still don't see any discussion.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove UpdateOrdererConfigFail and CreateChannelFail from integration/nwo,FAB-15485,39930,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,21/May/19 1:08 AM,09/Jul/19 1:50 AM,28/Oct/23 3:08 AM,28/May/19 7:45 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,"Functions in the integration package should be executing command lines tools - not performing assertions against them.

UpdateOrdererConfig and CreateChannel should be modified to support success and failure cases by returning the session post-exit. The caller can then assert on the exit code and/or stdout/stderr.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mt2:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/May/19 1:42 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31483 [FAB-15485] remove utilities with fail assertions;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
intermittent test failure in gossip TestAccept - didn't receive all messages sent,FAB-15486,39932,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,sykesm,sykesm,21/May/19 3:20 AM,19/Mar/20 6:44 AM,28/Oct/23 3:08 AM,19/Mar/20 6:44 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{{code}}
17:39:06 --- FAIL: TestAccept (10.00s)
17:39:06     comm_test.go:965: 
17:39:06         	Error Trace:	comm_test.go:965
17:39:06         	            				comm_test.go:790
17:39:06         	Error:      	Not equal: 
17:39:06         	            	expected: 20
17:39:06         	            	actual  : 19
17:39:06         	Test:       	TestAccept
17:39:06         	Messages:   	Didn't receive all messages sent
{{code}}",,denyeart,MHBauer,ronenschafferibm,swetharepakula,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14936,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00obz:",,,,Unset,Unset,,go test -race -v -count 100 -failfast -run TestAccept,,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,ronenschafferibm,swetharepakula,sykesm,yoheiueda,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/May/19 3:20 AM;sykesm;/cc [~nirro];;;","21/May/19 3:20 AM;sykesm;https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12246/console;;;","21/May/19 8:17 AM;MHBauer;This is the same core issue as described in FAB-13539.;;;","22/May/19 8:04 AM;swetharepakula;This issue might be slightly different.  FAB-13539 has the situation of communication going both directions so there is a race in receiving the message before the connection is dropped for the other direction. Here all the messages are sent in one direction so don't think they are exactly the same.;;;","22/May/19 9:11 AM;MHBauer;Just when I thought I had a handle on it. Truly terrifying.;;;","25/May/19 4:02 AM;swetharepakula;The core issue here is that there is a race between the same client creating a connection (onConnected) and getting another message before the first connection has been serviced causing a race between the two and multiple messages being dropped. I think the first step should be differentiating between incoming and outgoing connections so we should not close a connection if the connection is going in the direction we want. /cc [~MHBauer];;;","25/May/19 8:18 AM;swetharepakula;https://gerrit.hyperledger.org/r/c/fabric/+/31552;;;","25/May/19 8:19 AM;swetharepakula;added some hygiene changes found in the process of investigating the flake;;;","29/May/19 4:23 AM;swetharepakula;split out hygiene changes into its own cr: https://gerrit.hyperledger.org/r/c/fabric/+/31580;;;","03/Jul/19 4:09 AM;MHBauer;test refactored into something that can't fail this way

[https://gerrit.hyperledger.org/r/#/c/fabric/+/31841/|https://gerrit.hyperledger.org/r/#/c/fabric/+/31841/10/gossip/comm/comm_test.go];;;","03/Jul/19 9:56 PM;swetharepakula;though the test is refactored the race that was found is still there.

 

this patch is still open to fix that race: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31552/];;;","19/Mar/20 6:44 AM;denyeart;State is unclear on this one:
https://gerrit.hyperledger.org/r/#/c/fabric/+/31841/ was merged.
https://gerrit.hyperledger.org/r/#/c/fabric/+/31552/ was abandoned.
Since no recurrence noted since July though, I'll go ahead and close, please re-open if there is evidence of recurrence.
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failures in raft reconfiguration and onboarding when the orderer certificates are all rotated [It] is still possible to onboard new orderers,FAB-15487,39933,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,jyellick,sykesm,sykesm,21/May/19 3:25 AM,09/Nov/19 3:00 AM,28/Oct/23 3:08 AM,09/Nov/19 3:00 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,ipm,,,,"{code}
			By(""Ensuring orderer4 doesn't have any errors in the logs"")
			Expect(orderer4Runner.Err()).NotTo(gbytes.Say(""ERRO""))
{code}

{code}
18:02:44 • Failure [79.345 seconds]
18:02:44 EndToEnd reconfiguration and onboarding when the orderer certificates are all rotated [It] is still possible to onboard new orderers 
18:02:44 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/raft/config_test.go:496
18:02:44 
18:02:44   Saw:
...
18:02:44       2019-05-20 18:02:37.618 UTC [comm.grpc.server] 1 -> INFO 163 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:43382 grpc.code=OK grpc.call_duration=552.066µs
18:02:44       2019-05-20 18:02:38.690 UTC [common.deliver] deliverBlocks -> WARN 164 [channel: testchannel2] Rejecting deliver request for 127.0.0.1:43384 because of consenter error
18:02:44       2019-05-20 18:02:38.690 UTC [comm.grpc.server] 1 -> INFO 165 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Deliver grpc.peer_address=127.0.0.1:43384 grpc.code=OK grpc.call_duration=499.409µs
18:02:44       2019-05-20 18:02:38.925 UTC [orderer.consensus.etcdraft] Save -> WARN 166 slow fdatasync channel=testchannel2 node=4 took=6.840828374s expected-duration=1s
18:02:44       2019-05-20 18:02:38.926 UTC [orderer.consensus.etcdraft] serveRequest -> INFO 167 Raft leader changed: 0 -> 2 channel=testchannel2 node=4
18:02:44       2019-05-20 18:02:38.926 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 168 Failed to send StepRequest to 2, because: send queue overflown channel=testchannel2 node=4
18:02:44       2019-05-20 18:02:38.926 UTC [orderer.consensus.etcdraft] send -> INFO 169 Successfully sent StepRequest to 2 after failed attempt(s) channel=testchannel2 node=4
18:02:44       2019-05-20 18:02:38.937 UTC [orderer.consensus.etcdraft] apply -> INFO 16a Applied config change to add node 1, current nodes in channel: [1] channel=testchannel2 node=4
...
{code}",,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8ry",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/May/19 3:25 AM;sykesm;/cc [~guoger];;;","09/Nov/19 2:59 AM;jyellick;I ran this with {{-untilItFails}} on my laptop with {{stress -c 6 -i 6 -m 6 -d 6}} running concurrently for 30 minutes, and observed no failures.

If we still find this occuring in CI, we can re-open, but closing for now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper usage in fabric/gossip,FAB-15488,39934,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,21/May/19 3:28 AM,28/Jun/19 3:52 AM,28/Oct/23 3:08 AM,22/Jun/19 5:04 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ocf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove scripts/goListFiles.sh,FAB-15489,39959,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,sykesm,swetharepakula,swetharepakula,21/May/19 8:57 AM,30/May/19 2:51 AM,28/Oct/23 3:08 AM,30/May/19 2:51 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,The file `scripts/goListFiles.sh` is no longer being used in the Makefile. The only reference was removed as part of https://jira.hyperledger.org/browse/FAB-14777. ,,swetharepakula,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00oev:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/May/19 11:47 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31569 [FAB-15489] remove goListFiles.sh;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance history db to V2 format,FAB-15490,39960,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,manish-sethi,manish-sethi,21/May/19 11:51 AM,09/Sep/19 10:14 PM,28/Oct/23 3:08 AM,09/Sep/19 10:14 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,1,,,,,,"Current format of historydb keys are not sufficient to handle user keys that contain empty bytes. Design a new format for historydb keys. This rebuilding historydb during binary upgrade.

related discussion - https://jira.hyperledger.org/browse/FAB-15450

Also, this has been asked a couple times - provide history query results iterator that starts from newest item to oldest (opposite of current behavior).",,baohua,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-11244,,,,,,,,,,,,,,,,,,,FAB-15450,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15499,,,No,,Unset,No,,,"1|i008rj:iwy4",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rebuild state db using v2 value encoding (and remove code for supporting old formatting),FAB-15491,39961,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,21/May/19 1:35 PM,21/Oct/19 6:37 PM,28/Oct/23 3:08 AM,21/Oct/19 6:37 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"Both leveldb and couchdb code supports the old formatting and new formatting for persisted values. The new format was added for the support of persisting metadata field. The old format had to be continued to support because we could not mandate a rebuild of the statedb.

https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/core/ledger/kvledger/txmgmt/statedb/stateleveldb/value_encoding.go

https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/core/ledger/kvledger/txmgmt/statedb/statecouchdb/version_field_encoding.go

However, this code can be cleaned by removing the support for the old format and just maintain the new format. This would require rebuild of statedb.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15499,,,No,,Unset,No,,,"1|i008rj:iwy3",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Sep/19 10:41 AM;manish-sethi;CR for state leveldb - [https://gerrit.hyperledger.org/r/#/c/fabric/+/33563/]

CR for state couchdb - [https://gerrit.hyperledger.org/r/#/c/fabric/+/33940/]

 CR for using unified version numbers and error across leveldb and couchdb - [https://gerrit.hyperledger.org/r/#/c/fabric/+/34009/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reformat private data transient store to v1.4 value encoding (and remove code for supporting old formatting),FAB-15492,39962,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,manish-sethi,manish-sethi,21/May/19 1:59 PM,28/Oct/19 10:39 PM,28/Oct/23 3:08 AM,28/Oct/19 10:39 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"While adding the support for update to private data collection configuration, we needed to persist additional information in the transient store. As a result, the code for transient store happen to maintain both old and new value format - https://github.com/hyperledger/fabric/blob/86f87ebcd8a1819e3832b289f2d94d4a88bb6e05/core/transientstore/store.go.

Unless no block commit has happened in a network for very long after an upgrade to (v1.2 ?) , most likely the old formatted data in transient store should already be purged. Still, for the safety of not hitting into an unmarshaling error, it would require dropping the transient store. 

However, this is going to be a bit tricky because we do not want to drop the entire transient store as this may cause the data loss for in flight transactions. So, it would require a special code that runs at startup of transient store and transforms the old formatted entries to new (if found).",,crashmark93,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15499,,,No,,Unset,No,,,"1|i008rj:iwy3i",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),crashmark93,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger v2.0 data upgrade,FAB-15499,39971,,Epic,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,manish-sethi,denyeart,denyeart,21/May/19 5:39 PM,03/Dec/19 2:26 AM,28/Oct/23 3:08 AM,02/Dec/19 11:12 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-release,,,,,0,,,,,,"Upgrading to the v2 major release of Fabric will require additional steps, including rebuilding ledger databases to v2 data format.",,davidkhala,denyeart,manish-sethi,mastersingh24,n-horiguchi,seyday,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15337,,,,FAB-16503,FAB-16754,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Sep/19 10:43 PM;wenjian;leger_v2_upgrade.pdf;https://jira.hyperledger.org/secure/attachment/17827/leger_v2_upgrade.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,"Done, being documented with upgrade docs",(Please add high level design or a link to the design),Not Required,Unset,Done,ghx-label-8,,Ledger v2.0 data upgrade,To Do,No,,Done,No,,,"1|i00ohj:",,,,No,Not Required,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,denyeart,manish-sethi,mastersingh24,n-horiguchi,seyday,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/May/19 8:41 PM;mastersingh24;I likely missed some conversation on this, but why exactly are we doing this?
What are the advantages of the v2 format and why are we forcing people to move?
And if we are going to do this, wouldn't this be more of a documentation issue (which would more or  less tell people we are deleting / dropping all of their databases and rebuilding them ... and oh yeah ... this is going to take a long time)?;;;","21/May/19 11:59 PM;manish-sethi;[~mastersingh24] - the primary motivation to clean up code at a few places that became complex for supporting new features under the assumption that asking for rebuilding of DBs in minor releases would not be preferable.

Yes, this will be more of a documentation issue and the time needed to rebuild.;;;","22/May/19 12:50 AM;denyeart;[~mastersingh24] [~manish-sethi] Some more details...each of the issues in this Epic have a different rationale, but it generally boils down to one of two things:

1) Between v1.0 and v1.4, new features were added that required changes to how the various ledger database keys/values were encoded. The current code therefore supports data in multiple formats, leaving the code complex and difficult to maintain. In order to get the code to a clean and maintainable state, and support future features, the various databases need to be rebuilt using extensible data encodings.

2) In some very rare cases, user key data may collide with internal data encodings, impacting for example history db queries. The new encodings would be guaranteed to be completely free from collisions with user data.

The only way the code can be cleaned up and ensure no collisions, is to require a complete cutover to the new data encodings. The sooner Fabric ledger stores can get to the new extensible encodings, the less impact there will be (chains will only get longer as time goes by). A major release boundary is the most feasible time to break data compatibility and require a rebuild.

It is expected that the ledger rebuild from chain would be automatic upon initial v2.0 peer start, so that the legacy code can be entirely removed in v2.0. The rebuild will take some time for large chains (e.g. hours). It can be done as an in-place upgrade when peer is upgraded (maintenance window required), or via side-by-side upgrade of peer (direct traffic from old v1.x peer to new v2.0 peer once the new peer has joined channels and initialized ledgers). Having a mix of v1.x and v2.0 peers (rolling upgrade) is still completely supported.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Additional Documentation on the type system,FAB-15500,40022,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,mbwhite,mbwhite,22/May/19 12:15 AM,17/Oct/19 9:55 PM,28/Oct/23 3:08 AM,17/Oct/19 9:55 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABCN-257,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00om4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Oct/19 9:55 PM;mbwhite;Not required any more;;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Chaincode is not installed(consistent) in lifecycle feature:(297, 573) in the daily Behave tests",FAB-15501,40023,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,scottz,sambhavdutt,sambhavdutt,22/May/19 12:15 AM,10/Jul/19 10:55 PM,28/Oct/23 3:08 AM,10/Jul/19 10:55 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"There has been a consistent error in lifecycle feature:(297,573) (FAB-13959, FAB-13974)When the user queries on chaincode from peer0.org2.example.com, there was an instantiation error observed as chaincode has been defined but not installed. The tests took around 7 hours every day which is the usual time for Behave tests to complete.

*Branch:* master
 *Error Snippet:*
{code:java}
Scenario: FAB-13959: An admin from an org does not install chaincode package                                                                                     # lifecycle.feature:297

  Then a user receives a response containing ""Error: endorsement failure during query. response: status:500"" from ""peer0.org2.example.com""                       # steps/endorser_impl.py:1219
    Then a user receives a response containing 'make sure the chaincode helloNurse has been successfully instantiated and try again' from ""peer0.org2.example.com"" # steps/endorser_impl.py:1219
      Assertion Failed: Expected response was make sure the chaincode helloNurse has been successfully instantiated and try again; received Error occurred ['docker exec peer0.org2.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/0522cce07b8811e9b4d6fa163e4d373d/peerOrganizations/org2.example.com/users/User1@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer chaincode query --name helloNurse --ctor \'{\\""Args\\"": [\\""query\\"",\\""a\\""]}\' --channelID behavesystest ""']: Error: endorsement failure during query. response: status:500 message:""make sure the chaincode helloNurse has been successfully defined on channel behavesystest and try again: chaincode definition for 'helloNurse' exists, but chaincode is not installed"" 
---------------------------------------------------------------------------
  Scenario: FAB-13974: An org admin should be able to recover after sending a wrong approval                                                                                                                                        # lifecycle.feature:573
:
    Then a user receives a response containing 'Error: endorsement failure during query. response: status:500 message:""make sure the chaincode mycc has been successfully instantiated and try again' from ""peer0.org1.example.com"" # steps/endorser_impl.py:1219
    When each organization admin approves the upgraded chaincode package with policy ""OutOf(1,'org1.example.com.member','org2.example.com.member','org3.example.com.member')""                                                       # steps/endorser_impl.py:1088
{code}
*Build Log*

[https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-behave-master-x86_64/256/Behave_Test_Logs/behave_tests.log.gz]",,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15503,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,1a454ec,Unset,No,,,"1|i00omc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"25/Jun/19 10:51 PM;scottz;Seems we should just change the testcase to look for the string that is now returned. It was changed by fabric code. Instead of ""make sure the chaincode helloNurse has been successfully instantiated and try again"", I think we could look for only the substring ""chaincode is not installed"";;;","03/Jul/19 4:00 AM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/32160;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
When is Fabric version 2.0 beta scheduled to be released?,FAB-15502,40026,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,aspring,aspring,22/May/19 12:35 AM,19/Apr/20 2:27 PM,28/Oct/23 3:08 AM,19/Apr/20 2:27 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Thanks in advance.,,aspring,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00oms:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),aspring,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Gossip Tests (feature 316, 361) have been failing consistently as chaincode 'mycc' is not found",FAB-15503,40028,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,scottz,sambhavdutt,sambhavdutt,22/May/19 1:13 AM,10/Jul/19 10:55 PM,28/Oct/23 3:08 AM,10/Jul/19 10:55 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,," Gossip feature 316 and 361 have been failing consistently, observed error 
{code:java}
status:500 message:""make sure the chaincode mycc has been successfully defined on channel behavesystest and try again: chaincode mycc not found""{code}
The tests took around 7 hours every day which is the usual time for Behave tests to complete.

*Branch:* master

*Error Snippet:*
{code:java}
@daily
 Scenario: [FAB-4666] A non-leader peer, that joins an already-active channel--is expected to have all the blocks eventually. # gossip.feature:316
.
.
 When a user queries on the chaincode named ""mycc"" with args [""query"",""a""] on ""peer1.org2.example.com"" # steps/endorser_impl.py:494
 Then a user receives a success response of 940 from ""peer1.org2.example.com"" # steps/endorser_impl.py:1170
 Assertion Failed: Expected response was 940; received Error occurred ['docker exec peer1.org2.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/6d20ba8c7b8311e9b4d6fa163e4d373d/peerOrganizations/org2.example.com/users/User1@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer1.org2.example.com CORE_PEER_ADDRESS=peer1.org2.example.com:7051 peer chaincode query --name mycc --
ctor \'{\\""Args\\"": [\\""query\\"",\\""a\\""]}\' --channelID behavesystest ""']: Error: endorsement failure during query. response: status:500 message:""make sure the chaincode mycc has been successfully defined on channel behavesystest and try again: chaincode mycc not found""
------------------------------------------------------------------------------------
 Scenario: [FAB-4682] In leader-selection, a non-leader peer, that joins an already-active channel--is expected to have all the blocks eventually. # gossip.feature:361
.
.
Then a user receives a success response of 940 from ""peer1.org2.example.com"" # steps/endorser_impl.py:1170
 Assertion Failed: Expected response was 940; received Error occurred ['docker exec peer1.org2.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/e6d7e5da7b8311e9b4d6fa163e4d373d/peerOrganizations/org2.example.com/users/User1@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer1.org2.example.com CORE_PEER_ADDRESS=peer1.org2.example.com:7051 peer chaincode query --name mycc --ctor \'{\\""Args\\"": [\\""query\\"",\\""a\\""]}\' --channelID behavesystest ""']: Error: endorsement failure during query. response: status:500 message:""make sure the chaincode mycc has been successfully defined on channel behavesystest and try again: chaincode mycc not found""

{code}
{code:java}
Failing scenarios:
 gossip.feature:316 [FAB-4666] A non-leader peer, that joins an already-active channel--is expected to have all the blocks eventually.
 gossip.feature:361 [FAB-4682] In leader-selection, a non-leader peer, that joins an already-active channel--is expected to have all the blocks eventually.{code}

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-behave-master-x86_64/256/Behave_Test_Logs/behave_tests.log.gz",,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15501,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,1a454ec,Unset,No,,,"1|i00on8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"03/Jul/19 4:01 AM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/32160;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove sentinel on channelconfig ApplicationConfig and OrdererConfig,FAB-15504,40030,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,jyellick,jyellick,22/May/19 1:51 AM,22/May/19 1:51 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-common,,,,,,0,hygiene,,,,,"The API for channelconfig to retrieve the application and orderer config returns a sentinel indicating whether the config is present or not.  However, any time these calls are being made, they are done so in a context where the config has already been validated to contain the correct components, so the result is almost always a panic if the sentinel returns false.  The API should simply be updated to remove the sentinel and assume that it is always populated.",,crashmark93,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ong:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),crashmark93,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename gossip/common#ChainID ChannelID,FAB-15505,40041,,Task,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,mrosen52,sykesm,sykesm,22/May/19 4:12 AM,12/Jun/19 6:44 AM,28/Oct/23 3:08 AM,12/Jun/19 6:44 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,hygiene,ipm,,,,We've landed on channels for our nomenclature,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:7",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
SIGSEGV: segmentation violation if CORE_PEER_TLS_ROOTCERT_FILE is not set in peer CLI,FAB-15506,40048,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mrosen52,siddjain,siddjain,22/May/19 6:24 AM,11/Jul/19 7:39 AM,28/Oct/23 3:08 AM,11/Jul/19 2:55 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-peer,,,,,,0,ipm,peer,,,,"There should be no need to set the 
CORE_PEER_TLS_ROOTCERT_FILE environment variable if it has been specified via the --tlsRootCertFiles flag. However, if one does not specify this environment variable there is an error
|panic: runtime error: invalid memory address or nil pointer dereference|
| |[signal SIGSEGV: segmentation violation code=0x1 addr=0x60 pc=0x110fddc]|
| | |
| |goroutine 1 [running]:|
| |github.com/hyperledger/fabric/peer/common.NewPeerClientForAddress(0x7ffef5eec7ef, 0xe, 0x7ffef5eec811, 0x10, 0x8fb52c, 0x9e8745, 0x1480413)|
| |/opt/gopath/src/github.com/hyperledger/fabric/peer/common/peerclient.go:44 +0x8c|
| |github.com/hyperledger/fabric/peer/common.GetEndorserClient(0x7ffef5eec7ef, 0xe, 0x7ffef5eec811, 0x10, 0x3, 0x1, 0xc4201d1988, 0x9e5bec)|
| |/opt/gopath/src/github.com/hyperledger/fabric/peer/common/peerclient.go:122 +0x56|
| |github.com/hyperledger/fabric/peer/chaincode.InitCmdFactory(0x148201f, 0x5, 0x1, 0x1a, 0x13b1dc0, 0xc420407fc0)|
| |/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:369 +0xb19|
| |github.com/hyperledger/fabric/peer/chaincode.chaincodeQuery(0xc4200dbb00, 0x0, 0x0, 0x0)|
| |/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/query.go:56 +0xa0|
| |github.com/hyperledger/fabric/peer/chaincode.queryCmd.func1(0xc4200dbb00, 0xc420499180, 0x0, 0x14, 0x0, 0x0)|
| |/opt/gopath/src/github.com/hyperledger/fabric/peer/chaincode/query.go:26 +0x34|
| |github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc4200dbb00, 0xc420499040, 0x14, 0x14, 0xc4200dbb00, 0xc420499040)|
| |/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:698 +0x46d|
| |github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x1c90320, 0x1d78c30, 0xf, 0x1)|
| |/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:783 +0x2e4|
| |github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x1c90320, 0x1, 0xffffffffffffffff)|
| |/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:736 +0x2b|
| |main.main()|
| |/opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:97 +0x5bf|",,btl5037,crashmark93,siddjain,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtg:u",,,,Unset,Unset,,"Repro Steps:

Use the peer chaincode invoke command and do not set CORE_PEER_TLS_ROOTCERT_FILE. Instead use the --tlsRootCertFiles flag to set the certificate. 

Below is complete log of two commands. One gives an error and one does not and the only difference between the two commands is absence of CORE_PEER_TLS_ROOTCERT_FILE

Here is the command which gives no error:
https://gist.github.com/siddjain/c22b9f2c37de1d7f01dd729634e0c9e7

Here is the command which gives error:
https://gist.github.com/siddjain/23635df20bde236d3ff59a877d0ce478

Observed:
=======
[signal SIGSEGV: segmentation violation code=0x1 addr=0x60 pc=0x110fddc] see full log at
https://gist.github.com/siddjain/23635df20bde236d3ff59a877d0ce478

Expected:
=======
no error",,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,crashmark93,siddjain,sykesm,wlahti,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"22/May/19 12:46 PM;btl5037;What version of the Fabric peer cli are you using? Based on the stack trace, the last time the peer's main.go file was that long was Fabric 1.2. It appears the version you have predates the --tlsRootCertFiles flag, so there is no mechanism for parsing it.;;;","23/May/19 1:43 AM;siddjain;we were using 1.2. Sorry I should have stated that in my bug report. But we tried with 1.4 today and the issue is still there. Here is stacktrace using 1.4

 

```

root@8d2e947cf506:/home# FABRIC_CFG_PATH=${PWD} CORE_PEER_TLS_CLIENTAUTHREQUIRED=true CORE_PEER_TLS_CLIENTCERT_FILE=admin-jnj-tls.pem CORE_PEER_TLS_CLIENTKEY_FILE=admin-jnj-tls.key CORE_PEER_TLS_ENABLED=true CORE_PEER_LOCALMSPID=jnjMSP CORE_LOGGING_LEVEL=DEBUG /etc/hyperledger/bin/peer chaincode query -C dscsa -n mycc -c '\{""Args"":[""verify"",""kp"",""00000""]}' -o orderer1-ord:7050 --tls --cafile ord-ca-chain.pem --clientauth --peerAddresses peer3-jnj:7051 --tlsRootCertFiles jnj-ca-chain.pem --certfile admin-jnj-tls.pem --keyfile admin-jnj-tls.key

2019-05-22 16:39:36.011 UTC [main] InitCmd -> WARN 001 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable

2019-05-22 16:39:36.031 UTC [main] SetOrdererEnv -> WARN 002 CORE_LOGGING_LEVEL is no longer supported, please use the FABRIC_LOGGING_SPEC environment variable

panic: runtime error: invalid memory address or nil pointer dereference

[signal SIGSEGV: segmentation violation code=0x1 addr=0x0 pc=0x12df01e]

 

goroutine 1 [running]:

github.com/hyperledger/fabric/peer/common.NewPeerClientForAddress(0x7ffc97efd7e3, 0xe, 0x7ffc97efd805, 0x10, 0x171f483, 0xb, 0x171e515)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/peer/common/peerclient.go:44 +0x5e

github.com/hyperledger/fabric/peer/common.GetEndorserClient(0x7ffc97efd7e3, 0xe, 0x7ffc97efd805, 0x10, 0x13, 0xad0c3d, 0x1717228, 0x4)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/peer/common/peerclient.go:122 +0x56

github.com/hyperledger/fabric/peer/chaincode.InitCmdFactory(0x1718645, 0x5, 0x1, 0xc000455288, 0x14f47a0, 0x186a700)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/peer/chaincode/common.go:357 +0xaeb

github.com/hyperledger/fabric/peer/chaincode.chaincodeQuery(0xc000393180, 0x0, 0x0, 0x0)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/peer/chaincode/query.go:56 +0x9e

github.com/hyperledger/fabric/peer/chaincode.queryCmd.func1(0xc000393180, 0xc000188000, 0x0, 0x14, 0x0, 0x0)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/peer/chaincode/query.go:26 +0x34

github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0xc000393180, 0xc00003be00, 0x14, 0x14, 0xc000393180, 0xc00003be00)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473

github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x232c300, 0x8, 0x0, 0x232b4c0)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd

github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x232c300, 0xc0000e3f40, 0x1)

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b

main.main()

 /w/workspace/fabric-release-jobs-x86_64/gopath/src/github.com/hyperledger/fabric/peer/main.go:53 +0x2f7

```

 

and to confirm that we are using 1.4

 

```

root@8d2e947cf506:/home# FABRIC_CFG_PATH=$PWD /etc/hyperledger/bin/peer version

peer:

 Version: 1.4.0

 Commit SHA: d700b43

 Go version: go1.11.1

 OS/Arch: linux/amd64

 Chaincode:

  Base Image Version: 0.4.14

  Base Docker Namespace: hyperledger

  Base Docker Label: org.hyperledger.fabric

  Docker Namespace: hyperledger

```;;;","23/May/19 1:49 AM;siddjain;That's just a warning. and the stacktrace is also similar to original.;;;","19/Jun/19 4:17 AM;sykesm;SEGFAULT is due to missing error check at https://github.com/hyperledger/fabric/blob/0e94f86c9327ac3a8e89ad4729d6a66df8fa837d/peer/common/peerclient.go#L43-L44

The call to {{configFromEnv}} done at that line doesn't make sense as it tries to load the tls files from what is setup in viper for a fully functional TLS environment but, when the tls flags are set on the command line, the tls information is not part of environment.

When viper is not fully setup, the {{configFromEnv}} function bails with an error and returns with a partially populated client config with nil security options field.

Basically, it's a comedy of errors.

/cc [~wlahti];;;","19/Jun/19 5:02 AM;wlahti;My bad. Not sure how I overlooked that. ;;;","11/Jul/19 3:55 AM;wlahti;There's a build break in master since this was merged and hadn't been rebased and then reverified in CI. Fixed via: [https://gerrit.hyperledger.org/r/c/fabric/+/32250];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean-up #5 - multichannel registrar_test.go dead code,FAB-15511,40057,35195,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,22/May/19 9:33 PM,08/Jun/19 1:33 AM,28/Oct/23 3:08 AM,27/May/19 11:18 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,clean dead code from multichannel/registrar_test.go,,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00or0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cache Library,FAB-15512,40059,12402,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,22/May/19 10:01 PM,14/Nov/19 1:53 AM,28/Oct/23 3:08 AM,14/Nov/19 1:53 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"Design Doc: [https://docs.google.com/document/d/1Rxczkwni5oG6MBif1s0KN6_PR29tM4WP9IEOvbLMTu8/edit#|https://docs.google.com/document/d/1Rxczkwni5oG6MBif1s0KN6_PR29tM4WP9IEOvbLMTu8/edit?usp=sharing]

 ",,Senthil1,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00org:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper usage in fabric/orderer,FAB-15513,40063,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,dereckluo,dereckluo,22/May/19 11:05 PM,09/Jul/19 11:10 PM,28/Oct/23 3:08 AM,09/Jul/19 11:10 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00osc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE gen_cfgInputs supports TLS setting,FAB-15514,40074,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,23/May/19 3:12 AM,17/Oct/19 2:51 AM,28/Oct/23 3:08 AM,01/Jun/19 1:55 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"PTE gen_cfgInputs.sh supports TLS setting so that it can support mutual TLS.
The supported setting includes: disabled, serverauth, clientauth
default: serverauth",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00oto:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,true,"23/May/19 3:24 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31491;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
CouchDB container is left running after unit test execution,FAB-15515,40080,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,23/May/19 5:05 AM,30/May/19 2:53 AM,28/Oct/23 3:08 AM,28/May/19 7:06 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"I'm noticing that some couch db instances are getting left behind when running unit tests. This seems to be a recurring issue.

In order to help us debug who is leaving them behind, we need to update the launcher to somehow ""tag"" the container with information about the code that created it.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00msw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/May/19 6:58 AM;sykesm;The integration runner for couch db is used in the tests.

 $ ag -l runner.Couch
core/ledger/util/couchdb/couchdb_test.go
core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go
core/ledger/kvledger/txmgmt/statedb/statecouchdb/statecouchdb_test.go
integration/nwo/components.go
integration/e2e/health_test.go
;;;","25/May/19 5:08 AM;sykesm;This appears to have been introduced in a recent refactor as part of #817cd1651d

{code}
 func TestMain(m *testing.M) {
-	os.Exit(testMain(m))
-}
-
-func testMain(m *testing.M) int {
-	// Read the core.yaml file for default config.
-	ledgertestutil.SetupCoreYAMLConfig()
-	viper.Set(""peer.fileSystemPath"", ""/tmp/fabric/ledgertests/kvledger/txmgmt/statedb/statecouchdb"")
 	viper.Set(""ledger.state.couchDBConfig.autoWarmIndexes"", false)
 
 	// Switch to CouchDB
@@ -44,7 +36,7 @@ func testMain(m *testing.M) int {
 
 	flogging.ActivateSpec(""statecouchdb=debug"")
 	//run the actual test
-	return m.Run()
+	os.Exit(m.Run())
 }
{code};;;","25/May/19 5:13 AM;sykesm;remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31547 [FAB-15515] stop leaking couchdb container [WIP]
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31548 [FAB-15515] add creator footprint to couch runner [WIP];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in TestHaltChainProcessing,FAB-15516,40081,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,sykesm,sykesm,23/May/19 5:16 AM,14/Jan/20 3:14 AM,28/Oct/23 3:08 AM,05/Jun/19 6:46 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{{code}}
17:07:30 panic: Log in goroutine after TestHaltChainProcessing has completed
17:07:30 
17:07:30 goroutine 10305 [running]:
17:07:30 testing.(*common).logDepth(0xc000196600, 0xc006417c80, 0x54, 0x3)
17:07:30 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:634 +0x3a6
17:07:30 testing.(*common).log(...)
17:07:30 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:614
17:07:30 testing.(*common).Logf(0xc000196600, 0x1204fce, 0x2, 0xc0034df3c0, 0x1, 0x1)
17:07:30 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:649 +0x7f
17:07:30 github.com/hyperledger/fabric/common/flogging/floggingtest.(*TestingWriter).Write(0xc0003142c0, 0xc005234400, 0x55, 0x400, 0x1bc0e20, 0x0, 0x0)
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/floggingtest/logger.go:195 +0xf7
17:07:30 github.com/hyperledger/fabric/common/flogging/floggingtest.(*RecordingCore).Write(0xc000304280, 0xff, 0xbf317e54abf7a724, 0x7255f1e37, 0x1bc0e20, 0x0, 0x0, 0xc00549bf00, 0x38, 0x1, ...)
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/floggingtest/logger.go:155 +0x123
17:07:30 github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc001cc2000, 0x0, 0x0, 0x0)
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:215 +0x119
17:07:30 github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc000190008, 0xff, 0xc00549bf00, 0x38, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0x101
17:07:30 github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Debugf(...)
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:133
17:07:30 github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Debug(0xc000190010, 0xc00517e6d0, 0x1, 0x1)
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:61 +0x9a
17:07:30 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).antiEntropy(0xc0058f54a0)
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:675 +0x458
17:07:30 created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider
17:07:30 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:340 +0x934
17:07:30 FAIL	github.com/hyperledger/fabric/gossip/state	30.709s
{{code}}

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12283

/cc [~nirro]",,ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/May/19 5:18 AM;sykesm;console.log;https://jira.hyperledger.org/secure/attachment/17249/console.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ov0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 6:45 PM;ronenschafferibm;This bug is solved by

https://jira.hyperledger.org/browse/FAB-15626

 

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move fixtures to where they're used,FAB-15517,40082,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,23/May/19 5:28 AM,09/Jun/19 5:18 PM,28/Oct/23 3:08 AM,09/Jun/19 5:18 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ov8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/May/19 5:30 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31494 [FAB-15517] move fixtures to where they are used
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Fabcar tests are failing consistently in BYFN tests, peer0.org1 failed to join channel as connection was refused",FAB-15518,40083,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,,sambhavdutt,sambhavdutt,23/May/19 5:35 AM,06/Jun/19 5:22 AM,28/Oct/23 3:08 AM,06/Jun/19 5:22 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,ci-blocker,,,,,"The fabcar-go test are failing consistently to join peer0.org1.example.com to the channel, endorser client failed as the connection was refused. 

*Branch:* master
 *Platform:* x86_64
 *Error Snippet:*
{code:java}
*04:29:40*  # Create the channel*04:29:40*  docker exec -e ""CORE_PEER_LOCALMSPID=Org1MSP"" -e ""CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com/msp"" peer0.org1.example.com peer channel create -o orderer.example.com:7050 -c mychannel -f /etc/hyperledger/configtx/channel.tx*04:29:40*  2019-05-21 08:29:40.918 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized*04:29:41*  2019-05-21 08:29:40.961 UTC [cli.common] readBlock -> INFO 002 Received block: 0*04:29:41*  # Join peer0.org1.example.com to the channel.*04:29:41*  docker exec -e ""CORE_PEER_LOCALMSPID=Org1MSP"" -e ""CORE_PEER_MSPCONFIGPATH=/etc/hyperledger/msp/users/Admin@org1.example.com/msp"" peer0.org1.example.com peer channel join -b mychannel.block*04:29:41*  Error: error getting endorser client for channel: endorser client failed to connect to peer0.org1.example.com:7051: failed to create new connection: connection error: desc = ""transport: error while dialing: dial tcp 172.21.0.5:7051: connect: connection refused""*04:29:41* *04:29:41* *04:29:41* *04:29:41*   

fabcar-go test case is FAILED
{code}
*Build Log*
 [https://jenkins.hyperledger.org/view/fabric-samples/job/fabric-samples-merge-x86_64/59/consoleFull]",,btl5037,denyeart,sambhavdutt,sstone1,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,3fe014a8c258926440291be2f5c20b28845821ae,Unset,No,,,"1|i00ovg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,sambhavdutt,sstone1,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/May/19 10:43 PM;sambhavdutt;The fabrcar-go test is failing consistently in the verify jobs with the same error mentioned in the description.

*Error Snippet*

{code:java}
Error: error getting endorser client for channel: endorser client failed to connect to peer0.org1.example.com:7051: failed to create new connection: connection error: desc = ""transport: error while dialing: dial tcp 172.21.0.5:7051: connect: connection refused""*04:29:41* *04:29:41* *04:29:41* *04:29:41*   

fabcar-go test case is FAILED
{code}

*Build Log*

https://jenkins.hyperledger.org/view/fabric-samples/job/fabric-samples-verify-x86_64/269/consoleFull
;;;","04/Jun/19 2:53 AM;sambhavdutt;The fabcar-go test passed in a verify job when the max retries were increased to 20 in +/first-network/scripts/script.sh+, the CR for this has not been merged yet. [https://gerrit.hyperledger.org/r/#/c/fabric-samples/+/31674/]

*Build Log*
 [https://jenkins.hyperledger.org/view/fabric-samples/job/fabric-samples-verify-x86_64/278/consoleFull];;;","06/Jun/19 5:22 AM;denyeart;[https://gerrit.hyperledger.org/r/#/c/fabric-samples/+/31674/] is merged now. I'll close this item, please re-open if the problem recurs.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reduce usage of viperutil.EnhancedExactUnmarshalKey,FAB-15519,40087,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,sykesm,sykesm,23/May/19 6:59 AM,26/Jun/19 7:29 PM,28/Oct/23 3:08 AM,26/Jun/19 7:29 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ow4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jun/19 5:03 PM;guoger;-Not sure i understand this task... is it to replace {{EnhancedExactUnmarshalKey}} with manual decoding, similar to {{load()}} in {{peer/config.go}}? Why?-

Misread this as {{EnhancedExactUnmarshal}}...;;;","25/Jun/19 12:30 AM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31799
https://gerrit.hyperledger.org/r/c/fabric/+/31800;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Speeding up TestLeaderYield() by waiting for the first leader,FAB-15520,40094,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,23/May/19 4:30 PM,30/May/19 1:40 AM,28/Oct/23 3:08 AM,30/May/19 1:40 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"TestLeaderYield() starts 2 peers: p0 and p1, and waits for p0 to be 
elected as leader. The problem is that there is a 50% chance that p1 will
be elected. It depends on who has the lower gossip service port. The lower
is the first leader. When p1 is elected first, the test waits longer 
because it needs p1 to renounce its leadership and p0 to take it.

This task is about setting p0 to be the peer with the lower port in order 
to speed up the test.",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00oxo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/May/19 7:33 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/c/fabric/+/31507;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
shim MockStub logs disable for performance metrics,FAB-15521,40095,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,Tecnalia,Tecnalia,23/May/19 4:52 PM,23/May/19 4:53 PM,28/Oct/23 3:08 AM,,v1.4.0,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"As developer when wiriting chaincodes, I would like to have the ability to disable logging features on Hyperledger Fabric Go based chaincodes. The main purpose of this request is to benchmark the code and my chaincode methods but with logs enabled, this is not feasible and benchmark results are not valid.
h1. Expected

To have the ability to disable logging features of fabric chaincode when development and testing.

 ",,Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00oxw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Tecnalia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
chaincode discovery not working with new lifecycle 2.0 model,FAB-15522,40097,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,muralisr,muralisr,23/May/19 8:05 PM,24/May/19 3:38 AM,28/Oct/23 3:08 AM,24/May/19 3:38 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"This could be a work in progress or user error ... still opening a bug to faciliate discussion

Went through the package-install-approve-commit-instantiate process of the new cycle successfully. *Note: this was done through CLI.*

Using the go SDK to query the chaincode I see discovery of the chaincode prior to doing the query. This results in an error from Fabric which is unable to find the deployed chaincode. 

Peer log:
{code:java}
2019-05-22 11:28:54.513 UTC [lockbasedtxmgr] newQueryExecutor -> DEBU 15c1^[[0m constructing new query executor txid = [857911fe-e45a-47b3-a4d2-4395e9640dca]
2019-05-22 11:28:54.513 UTC [stateleveldb] GetState -> DEBU 15c2^[[0m GetState(). ns=lscc, key=mycc
2019-05-22 11:28:54.513 UTC [discovery.lifecycle] DeployedChaincodes -> INFO 15c3^[[0m Chaincode mycc isn't instantiated
2019-05-22 11:28:54.514 UTC [discovery.lifecycle] DeployedChaincodes -> DEBU 15c4^[[0m Returning []
2019-05-22 11:28:54.514 UTC [lockbasedtxmgr] Done -> DEBU 15c5^[[0m Done with transaction simulation / query execution [857911fe-e45a-47b3-a4d2-4395e9640dca]
2019-05-22 11:28:54.514 UTC [discovery.lifecycle] Metadata -> INFO 15c6^[[0m Chaincode mycc isn't defined in channel myc
2019-05-22 11:28:54.514 UTC [discovery] chaincodeQuery -> ERRO 15c7^[[0m Failed constructing descriptor for chaincode chaincodes:<name:""mycc"" > ,: No metadata was found for chaincode mycc in channel myc
2019-05-22 11:28:54.514 UTC [discovery] Discover -> DEBU 15c8^[[0m Returning to 172.17.0.10:40588 a response containing: [error:<content:""failed constructing descriptor for chaincodes:<name:\""mycc\"" > "" > ]{code}
This comes from [https://github.com/hyperledger/fabric/blob/master/core/cclifecycle/util.go#L33] querying the lscc for the chaincode (which I think is no longer the keeper of 2.0 lifecycle based CCs ?)

If this a work in progress, do we have an ETA for fix ? 

If user error, could do with some hints on what I'm running into.

 

[~ales] [~yacovm] [~denyeart]",,ales,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13869,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00oyc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,muralisr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/May/19 8:17 PM;yacovm;It's still not merged... this [https://gerrit.hyperledger.org/r/#/c/fabric/+/31027/] is the stack of CRs. We are reviewing it, sorry for the delay :);;;","23/May/19 9:17 PM;ales;yeah, [~muralisr], it's still WIP. May I kindly ask you to check out [https://gerrit.hyperledger.org/r/#/c/fabric/+/30994/] and see if everything works as expected? Thx in advance;;;","23/May/19 9:37 PM;muralisr;Absolutely, no worries [~yacovm] [~ales]... will checkout the CRs.;;;","23/May/19 10:27 PM;muralisr;Just so we are on the same page... is this set the complete fix or is there more to come ? Reason I ask is the CRs do not touch [https://github.com/hyperledger/fabric/blob/master/core/cclifecycle/util.go#L33] so presumably I'll continue to see the problem after applying the current set ?

 

[~ales] [~yacovm];;;","23/May/19 11:03 PM;ales;I believe that's it - nothing more needed (barring defects). To handle components that require lifecycle data, we have followed an aggregator approach, where now the aggregator delivers lifecycle data directly to the component that needs it, and is in turn fed data by both legacy and new lifecycle. This approach should make it easier to remove the legacy lifecycle in the future.;;;","23/May/19 11:05 PM;muralisr;Right ... I just saw some glimmerings of it in the change to peer/node/start.go. Will checkout the fix and update here.;;;","24/May/19 12:13 AM;muralisr;[~ales] [~yacovm] [~denyeart] those CRs took care of it.. thanks!;;;","24/May/19 3:37 AM;ales;phew! Thanks for double checking [~muralisr]! I'm closing the issue then.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"CouchDB tests(VaryKVSize,VaryNumReadsInEachTx,VaryNumTxs) are failing in the daily LTE tests with panic error.",FAB-15523,40098,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,23/May/19 9:38 PM,29/Jul/19 3:09 AM,28/Oct/23 3:08 AM,29/Jul/19 3:09 AM,v1.4.2,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,ci-flake,,,,"CouchDB tests(VaryKVSize,VaryNumReadsInEachTx,VaryNumTxs) are failing in the daily LTE tests with panic error. This is the first instance in the recent builds that the 4 couchdb tests have failed. There have been flaky failures in _test_FAB_3874_VaryKVSize_ and _test_FAB_3875_VaryBatchSize_ each failing in separate builds.

*Branch:* release-1.4
*Error Snippet:*

*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-daily-lte-release-1.4-x86_64/147/LTE_Test_Logs/",,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,97dac67,Unset,No,,,"1|i00oyk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jul/19 3:08 AM;vijaypunugubati;Working as expected in recent builds [https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-lte-release-1.4-x86_64/189/consoleFull]
{code:java}
/02:51:42.468 ledger_lte.py::perf_couchdb::test_FAB_3874_VaryKVSize PASSED
02:56:29.980 ledger_lte.py::perf_couchdb::test_FAB_3875_VaryBatchSize PASSED
03:01:53.870 ledger_lte.py::perf_couchdb::test_FAB_3876a_VaryNumWritesInEachTx PASSED
03:07:21.758 ledger_lte.py::perf_couchdb::test_FAB_3876b_VaryNumReadsInEachTx PASSED
03:25:28.198 ledger_lte.py::perf_couchdb::test_FAB_3877_VaryNumTxs PASSED/ code placeholder
{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Generalize EnableVxx_Capabilities,FAB-15524,40100,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,23/May/19 11:01 PM,07/Jun/19 5:01 AM,28/Oct/23 3:08 AM,05/Jun/19 12:24 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,"FAB-14017 introduced the {{EnableV2_0Capabilities}} method in nwo. As defined, the method is not generalized enough to warrant its placement in that package.

The method needs to be modified to accept the instance of *common.Capabilities to set for the channel or a variadic list of capability strings. If this is not done, we'll have an Enable V14,V21,v22, etc method at some point.

I'd expect it to preserve the existing ModPolicy as well.",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15386,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00oz0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/May/19 12:39 AM;wlahti;Note to self: The default capabilities flag was recently changed to V2_0 from V1_4 in the configtx template via https://gerrit.hyperledger.org/r/c/fabric/+/31231/15/integration/nwo/configtx_template.go . There should probably be a separate task to undo this in favor of explicitly updating the config before any tests that only expect V2_0 enabled. 

edit: Ah, Yacov opened FAB-15386.;;;","30/May/19 4:39 AM;wlahti;Should be able to easily resolve FAB-15386 using this generalized function. ;;;","30/May/19 4:59 AM;wlahti;https://gerrit.hyperledger.org/r/c/fabric/+/31595;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Business Network concept,FAB-15525,40104,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,23/May/19 11:44 PM,26/Sep/19 10:23 PM,28/Oct/23 3:08 AM,26/Sep/19 10:23 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,Remove disclaimer and update business network concept for new lifecycle,,denyeart,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:iwrs",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,negupta,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 8:27 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/31512/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add disclaimer to update doc,FAB-15526,40105,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,negupta,negupta,23/May/19 11:47 PM,25/Jun/19 8:29 AM,28/Oct/23 3:08 AM,25/Jun/19 8:29 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,Add disclaimer that migration is not supported from the 1.4.x to the 2.0 Alpha.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rq:zzyg",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Regenerate protos on master,FAB-15527,40107,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,24/May/19 1:46 AM,30/May/19 3:09 AM,28/Oct/23 3:08 AM,30/May/19 2:30 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-common,,,,,,0,,,,,,A recent change to master resulted in minor changes to all generated .pb.go files.,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p0k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/May/19 1:48 AM;wlahti;https://gerrit.hyperledger.org/r/c/fabric/+/31514;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Configure Raft OSNs in different orderer organizations and create channels and run traffic with service discovery,FAB-15528,40109,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,24/May/19 2:57 AM,17/Oct/19 2:51 AM,28/Oct/23 3:08 AM,05/Jun/19 10:14 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Same as FAB-14227 but run traffic with service discovery
network configuration:
2 orderer org, 2 orderers per orderer org
2 org, 1 peer per org
Mutual TLS enabled

Transactions:
target peers: discovery
2 threads X 10,000 tx

client:
PTE with NODE SDK
",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-13538,,,Manual,,Unset,No,,,"1|i00p10:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,true,"30/May/19 4:28 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31593;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Move _lifecycle tests out of integration/nwo package,FAB-15529,40111,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,24/May/19 7:22 AM,08/Jun/19 1:39 AM,28/Oct/23 3:08 AM,08/Jun/19 1:39 AM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The {{integration/nwo}} package contains the code necessary to bring up and manage a fabric network by integration tests. This package should not contain actual integration tests.

What should be included here are tests that demonstrate how to bring up a network.

With this in mind, the lifecycle tests need to move out. They belong in their own suite or in e2e.

/cc [~wlahti] [~denyeart] [~ales]",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:ix",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/19 5:53 AM;wlahti;https://gerrit.hyperledger.org/r/c/fabric/+/31748;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Make sure container names for chaincode across lscc and _lifecycle are unique,FAB-15530,40114,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Won't Do,,manish-sethi,manish-sethi,24/May/19 8:57 AM,01/Aug/19 12:28 AM,28/Oct/23 3:08 AM,31/Jul/19 11:10 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Though, it would be a very corner case but a simple approach to cover this is to prefix with a unique char as within lscc and _lifecycle, there is no clash in container names.",,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:in",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 12:28 AM;denyeart;Abandoned due to the extreme remote chance of a collision.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create in-proc Orderer clients,FAB-15532,40116,38844,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,24/May/19 1:11 PM,09/Aug/19 4:32 PM,28/Oct/23 3:08 AM,05/Jun/19 3:39 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ci,fabric-orderer,,,,,0,,,,,,"In orderer IT, we often need to broadcast *normal* transactions to Orderer. This is currently done by performing a full Fabric tx flow, which requires heavy dependencies, esp. building/starting chiancode, and it significantly slows down the overall runtime.

Instead, we should create in-proc Orderer clients to broadcast mock TXs and remove peers from Orderer-specific tests.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p2k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/May/19 6:42 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31523/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add `sign` command to `peer`,FAB-15533,40117,38844,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,guoger,guoger,guoger,24/May/19 1:15 PM,26/May/19 12:11 PM,28/Oct/23 3:08 AM,26/May/19 12:11 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ci,fabric-orderer,,,,,0,,,,,,"In order to create in-proc Orderer clients, as required by FAB-15532, we need properly signed envelopes. However, if we load msp within test proc, we are constraint by that specific msp throughout the whole test, due to the singleton nature of MSP, see FAB-6559.

We could add a command {{sign}} to {{peer}}, which simply signs a given tx file in place, similar to {{signconfigtx}}. So that in-proc clients would create tx file, invoke {{peer sign}} in a separate proc to sign it.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p2s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/19 5:58 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31522;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Switch Orderer IT to use in-proc broadcast clients,FAB-15534,40118,38844,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,24/May/19 1:16 PM,05/Jun/19 3:43 AM,28/Oct/23 3:08 AM,05/Jun/19 3:43 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p30:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/May/19 6:47 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31524
https://gerrit.hyperledger.org/r/c/fabric/+/31525;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Modify document,FAB-15535,40119,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,Yerin,Yerin,Yerin,24/May/19 3:27 PM,06/Jun/19 7:22 AM,28/Oct/23 3:08 AM,06/Jun/19 7:22 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,,,Yerin,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p38:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Yerin,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
[GDPR Support] Private data logs should be erased when deleting ,FAB-15536,40120,,Story,Backlog,FAB,Fabric,software,denyeart,,,High,,,mlucc,mlucc,24/May/19 4:18 PM,28/Jun/21 6:27 PM,28/Oct/23 3:08 AM,,v1.4.1,,,,,,,,,,,,,,,,,,,,,,,2,privatedata,,,,,"My concern is regarding having a *GPDR compliant scenario* where private information can be delated. After testing deletePrivateData function in my chaincode, I could observe how the private data is successfully deleted. Nevertheless, I realised there are logs with sensitive information that remain stored in the peers. 
  
 I've read these logs are used for data recovery in the case is needed at some point. Anyhow, if the private data is erased shouldn't these information be deleted from the logs too? 
 Once the private information is deleted from private data, the information in this logs is still visible (not even encrypted). Please, check what can be seen in the logs:
  
{code:java}
root@2a3221773e19:/var/hyperledger/production/ledgersData/pvtdataStore# cat 000001.log 
S�d\examplechannel���examplechannel���2examplechannelexamplechannel����examplechannel��F�2examplechannelexamplechannel0��ŭ3examplechannelSimpleChaincodecollectionWorkerX
collectionWorkerDB
worker_16{""id"":""worker_1"",""name"":""Bob Smith"",""dni"":""12312312B""}examplechannelΧ�2
examplechannelexamplechannel��fw
                                         3examplechannelSimpleChaincodecollectionWorker""
collectionWorkerworker_1examplechannel�6��2examplechannelexamplechannelr
{code}
 
 As you can see, the information is readable although the details of this worker have been erased from private data. Creepy. Of course, these logs are in the peers who are part of organizations included in the collection. Specifically, these logs can be found in: 
  
 {{/var/hyperledger/production/ledgersData/pvtdataStore/000001.log}}

{{/var/hyperledger/production/transientStore/000001.log}}
  
 and in the case couchdb is not used but stateLeveldb (by default), here as well:
 {{ }}{{/var/hyperledger/production/ledgersData/stateLeveldb/000001.log}}
  
 I wonder if Hyperledger Fabric should fix this in future versions coming.",,denyeart,mlucc,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-5097,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-12038,,,No,,Unset,No,,,"1|i00p3g:",,,,Unset,Unset,,"Through your chaincode, save private data information and delete it. Then check the logs in the path indicated in the description.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mlucc,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/May/19 4:29 AM;denyeart;""Hard delete"" of private data is a requirement for Epic FAB-12038. Converting this to a future Story under FAB-12038.;;;","31/May/19 5:32 PM;mlucc;For the sake of clarity, after the discussion with [~scottz], I want to add:

_I'm requesting that this personal information that is stored in the logs should be removed as long as the proper information is deleted. There's no problem this info is stored in the logs as long as the information is available but, as soon as this information is requested to be deleted, the system should make sure to clean this info from the logs._;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
initialize ledger cache,FAB-15537,40124,12402,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,24/May/19 8:08 PM,12/Nov/19 4:50 AM,28/Oct/23 3:08 AM,12/Nov/19 4:50 AM,,,,,,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p44:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure in cft_raft: when an orderer is behind the latest snapshot on leader,FAB-15539,40129,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,sykesm,sykesm,24/May/19 11:12 PM,14/Jan/20 3:14 AM,28/Oct/23 3:08 AM,10/Jun/19 8:22 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8927/console

{code:java}
13:50:26 • Failure [63.051 seconds]
13:50:26 EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
13:50:26 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/raft/cft_test.go:133
13:50:26 
13:50:26   Timed out after 60.000s.
13:50:26   Expected
13:50:26       <int>: 4
13:50:26   to equal
13:50:26       <int>: 5
13:50:26 
13:50:26   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/raft/cft_test.go:173
{code}

",,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/19 11:12 PM;sykesm;console.log;https://jira.hyperledger.org/secure/attachment/17258/console.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p5o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/May/19 11:14 PM;sykesm; When searching, I see several hits - mosts closed as ""invalid"" or ""won't do"". Makes me think something is truly amiss.;;;","25/May/19 1:08 AM;guoger;fixed as part of https://gerrit.hyperledger.org/r/c/fabric/+/31524/4

and quote commit msg here:

{quote}It also fixes a flake, which is contributed by several
factors:
1) if data accumulates too fast, while previous snapshotting is
   still in progress, there is mechanism to prevent excessive
   snapshotting, then the final number of snapshot files is not
   deterministic
2) size of block is not big enough to trigger snapshotting for
   each of them

It is fixed by:
1) assert new snapshot file being created before submitting next tx
2) increase tx size

This flake was hit rarely before, because:
1) full Fabric tx flow was performed, which is slow
2) the tx size was big enough{quote};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop linting generated files,FAB-15540,40130,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,wlahti,wlahti,24/May/19 11:20 PM,30/May/19 4:07 AM,28/Oct/23 3:08 AM,30/May/19 4:07 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,Regenerating protos with the latest versions of the proto dependencies results in generated code that fails goimports. The solution is that we shouldn't run golinter against generated files. ,,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p5w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/19 4:23 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31546 [FAB-15540] stop linting generated files;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kafka Orderer should be able to handle a fresh Kafka cluster,FAB-15541,40133,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,raft 3,raft 3,25/May/19 12:02 AM,17/Apr/21 12:28 AM,28/Oct/23 3:08 AM,17/Apr/21 12:28 AM,v1.4.0,v1.4.1,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"I'm working on backup/restore of Fabric network for disaster recovery scenarios.

We are backing up/restoring data in peers and orderers but not in Kafka cluster itself.

It turned out to be Kafka Orderer with some data (not fresh one) cannot handle a fresh Kafka cluster with below error:

{color:#FF0000}{{The requested offset is outside the range of offsets maintained by the server for the given topic/partition.}}{color}

IMHO, Kafka Orderer should be able to handle a fresh Kafka cluster since it already has the all required past data in place.

Kafka Orderer should handle this, either:
 * Automatically (preferred solution)
 * Or with a command line switch when launching Orderer",,denyeart,hakan.eryargi,raft 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p6k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,hakan.eryargi,raft 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Apr/21 12:28 AM;denyeart;Closing since the recommendation has been to move to Raft as of v1.4.1.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a mechanism to pause the peer/orderer to take backup,FAB-15542,40134,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,raft 3,raft 3,25/May/19 12:13 AM,25/May/19 12:13 AM,28/Oct/23 3:08 AM,,v1.4.0,v1.4.1,,,,,,,,,,,,,,,,fabric-orderer,fabric-peer,,,,,0,,,,,,"ATM, peer and orderer do not provide any mechanism to pause. 

As mentioned in [FAB-3364|https://jira.hyperledger.org/browse/FAB-3364], suggested way to take the backup of peer is, stopping the peer, taking the backup and re-starting the peer.

This is not much convenient especially in Kubernetes since it doesnt provide a mechanism similar to Docker stop.

Ideally, there should be a mechanism to pause the peer and orderer, after synching the buffers, stopping the IO, so a clean backup can be taken without stopping the peer and orderer. ",,hakan.eryargi,raft 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p6s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hakan.eryargi,raft 3,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Instantiating chaincode with incorrect collections config causes peers to crash,FAB-15543,40137,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wenjian,mistogans,mistogans,25/May/19 12:50 AM,31/Jul/19 10:21 PM,28/Oct/23 3:08 AM,31/Jul/19 10:21 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-gossip,fabric-ledger,,,,,0,,,,,,"Instantiating chaincode with collections config that has a policy that includes an index out of bounds of the identities field will cause commiting peer to panick and crash.

Logs from the peer before it dies have been attached. 

Reproduction steps:
 # I built a collections config file with 22 identities by in the policy section I specified a ""signed-by"" of index 22 (Maximum should be 21).
 # I tried to instantiate the chaincode with the fabric SDK and it sent the proposal response to the orderer. The block was disseminated to the peers.
 # When the peers tried to commit the block, it failed and panicked. The peers are then unable to recover as they will try to commit the block.

Expected behaviour:

I'm not too sure what should the correct behaviour be, but it should be able to recover from trying to commit that block, or the endorsing peers on the proposal should reject the proposal.",,ales,denyeart,manish-sethi,mastersingh24,mistogans,Senthil1,sykesm,wenjian,yacovm,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/19 5:18 PM;yacovm;Screenshot from 2019-05-25 11-13-51.png;https://jira.hyperledger.org/secure/attachment/17262/Screenshot+from+2019-05-25+11-13-51.png","25/May/19 12:51 AM;mistogans;errorLogs.txt;https://jira.hyperledger.org/secure/attachment/17259/errorLogs.txt","24/Jun/19 11:58 PM;wenjian;jira15593_15594_tests.pdf;https://jira.hyperledger.org/secure/attachment/17337/jira15593_15594_tests.pdf",,,,,,,,,,,ales,manish-sethi,mastersingh24,Senthil1,sykesm,wenjian,yacovm,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzwr6z:zz5i",,,,Unset,Unset,v1.4.x,,,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,manish-sethi,mastersingh24,mistogans,Senthil1,sykesm,wenjian,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/19 1:26 AM;yacovm;[~ales] - seems to me somehow somewhere we have a missing conversion to a policyError.... is is this v1.1 by chance?

 

actually - scratch that, i think it comes from the ledger;;;","25/May/19 1:32 AM;mastersingh24;Looks like 1.4.x (based on the . separator in the named loggers);;;","25/May/19 2:58 AM;yacovm;I think I reproduced the problem by making the peer CLI remove the first identity from the signature policy collection policy and instantiate a chaincode in the integration tests and after lots of *fmt.Printlns* I think it comes from the npp.NewPolicy(polBytes) [returning an error|https://github.com/hyperledger/fabric/blob/eca1b14b7e3453a5d32296af79cc7bad10c7673b/core/common/privdata/util.go#L32], while being invoked by [AmMemberOf|https://github.com/hyperledger/fabric/blob/eca1b14b7e3453a5d32296af79cc7bad10c7673b/core/common/privdata/membershipinfo.go#L28] which is done as part of the post commit process where the ledger tries to figure out which organizations it wasn't eligible, and now is eligible.

I recommend:
# Validate the collection config correctness at validation for v2.0 channels
# Treat the bespoken error as the peer not being eligible of the collection and ""move on"".

{code}
		membershipEnabled, err := n.elgEnabled(ledgerID, existingConf.MemberOrgsPolicy, postCommitConf.MemberOrgsPolicy)
		if err != nil {
			return nil, err <---- change this to ""continue"" and log the error
		}
		if !membershipEnabled {
			continue
		}
{code}

[~manish-sethi] [~denyeart] ;;;","25/May/19 3:03 AM;denyeart;[~yacovm] I don't think we even need to check for v2.0 channel capability. We can immediately invalidate the transaction (instead of panic) in all v1.x releases.

This may be a good one for [~wenjian].;;;","25/May/19 3:08 AM;yacovm;This passes VSCC, so if you don't check capability then when Matt W upgrades his peers and brings new peers that are upgraded, he will have a fork. ;;;","25/May/19 3:10 AM;manish-sethi;[~yacovm] - I think that (2) can cause problems later when gossip tries to disseminate the private data to peers using this collection config - can you confirm?

So, a fix would be to add this additional check to the list of lscc validation and invalidate the transaction and add the same check during simulation for lscc and new lifecycle as well.;;;","25/May/19 3:18 AM;manish-sethi;About the fork - if this kind of configuration has ever been submitted to a 1.3/1.4 channel, the panic would have happened since this reconciliation code was added in 1.3 (if I recall correctly). The issue of fork could happen if this kind of configuration exists in some of the 1.2 channel but then won't it panic during regular dissemination of private data?;;;","25/May/19 3:20 AM;yacovm;[~manish-sethi] actually you have a point - it will either just refuse to disseminate it, or if it will have the private data missing at time of commit, then it will halt the chain processing but not panic. 

Another possible solution can perhaps be to make the *getPolicy* function to return a reject all policy - that one is invoked both by gossip and ledger, no?;;;","25/May/19 3:23 AM;yacovm;{quote} The issue of fork could happen if this kind of configuration exists in some of the 1.2 channel but then won't it panic during regular dissemination of private data?{quote}

If you always endorse on all the peers, or the private data is sent to all peers during endorsement then they will never have missing private data, hence will never check if they are eligible of the policy.;;;","25/May/19 4:58 AM;manish-sethi;[~yacovm] - Just to understand this further when you say - 
""_if it will have the private data missing at time of commit, then it will halt the chain processing but not panic_""
 Does this mean that coordinator first checks in the transient store and if not found then checks the eligibility (instead of other way around?)

On your suggestion, yes, treating a faulty config as equal to everyone removed from the collection could be a possible choice. Because, even if such a config exists this is almost certain (assuming the answer to above question is yes) that this was never used for dissemination. 

On a side note, this problem can surface not only because of the proposed config being faulty but also if the existing policy is faulty - because function ""AmMemberOf"" is invoked on both to determine the eligibility change.;;;","25/May/19 5:44 AM;yacovm;{quote}Does this mean that coordinator first checks in the transient store and if not found then checks the eligibility (instead of other way around?){quote}

It means that, but I double checked the code and it seems like we first check eligibility. This code was changed by so many people (Artem, Nir, Senthil) since I wrote the first version of the coordinator... (though that's not an excuse because we always checked for our eligibility first, since v1.1, and I wrote it back then :O )



;;;","25/May/19 6:14 AM;manish-sethi;OK, so if this code is like this since 1.2 (since we officially started supported private data), we can safely mark the trans invalid. Your suggestion is also applicable irrespective.;;;","25/May/19 6:18 AM;manish-sethi;If three people means so many what will you call this - one of the most critical files - https://github.com/hyperledger/fabric/blob/release-1.2/core/committer/txvalidator/validator.go :-);;;","25/May/19 6:23 AM;yacovm;what do you mean by:
{quote}we can safely mark the trans invalid. {quote}
?
This wasn't caught by the coordinator at the commit of the block. 
I guess this is because instantiate doesn't have private data writes in it, so the block gets through and it fails at your post commit listeners. 

The next transaction of private data for that collection would probably raise a *VSCCExecutionFailureError* upon error, so by making *getPolicy* return a reject all policy we will simply skip that collection. 

What do you mean by marking this invalid? I am hesitant to mark transactions invalid outside of VSCC...  [~ales] what is your opinion of all this?


;;;","25/May/19 6:54 AM;manish-sethi;On ""_it fails at your post commit listeners._"" listeners are not post commit. They execute before block commit. That's why you see the message in the logs ""commit failed"".

What I meant was that not about _this_ transaction that updates the collection config rather a later user transaction would have cause panic/chain processing halt. Yes, there is a possibility that user trans did not contain any private data at all to start with in which case, fork would happen. BTW, I never suggested marking a transaction invalid outside VSCC. The discussion is only to determine whether to go for marking invalid in retrospection (which is only safe if we can conclude that no such transaction could have happened in the past, for instance its true for 1.4 but not for 1.2).

As I said before, I tend to agree with your suggestion of treating the faulty config in a RejectAll way.;;;","25/May/19 5:22 PM;yacovm;I think that something like the below should work... perhaps as Dave said - Wenjian can take on this.

But I also think that [~ales] should take a look as well.

Regardless, we should make sure to reproduce the problem first, and only after that - apply the fix, in order to mimic what happens to [~mistogans] 's environment since I think he is kind of stuck in fabric limbo the moment.

!Screenshot from 2019-05-25 11-13-51.png|thumbnail!;;;","26/May/19 5:07 PM;ales;# If we add a new validation check in 1.X nodes, we must gate it behind a capability, otherwise we will fork right?
 # If we change the post-commit dissemination code, will all nodes in the network either
 ** a) panic (if they run with the old peer code); or
 ** b) end up with the exact same set of preimage data as other nodes that didn't panic?

If 2a) is true, then I think it's safe to go with Yacov's proposal; but someone should be sure of this. Otherwise we'll end up with a different type of fork, where 2 nodes which on paper should have the same sets of preimages don't.;;;","26/May/19 5:42 PM;yacovm;So [~manish-sethi] raised an argument (that I think is correct, but we need to verify it) that if any peer at version of v1.1 or v1.2 would have been effected by that - then at the time of parsing of a transaction of private data with such a corrupt policy - gossip would have not passed the block to commit in the ledger because it cannot verify whether it is eligible of a collection or not. The code handling we do makes the chain processing halt, and not panic.

Else, the peer is at versions v1.3 or v1.4 and it would have panicked before committing the block.

So in any case - the block isn't committed so it will pass VSCC again once the upgrade is done.

 ;;;","27/May/19 6:28 PM;ales;So re. my point above
{quote} * If we change the post-commit dissemination code, will all nodes in the network either
 ** a) panic (if they run with the old peer code); or
 ** b) end up with the exact same set of preimage data as other nodes that didn't panic?{quote}
It seems that the answer is no, some 1.X nodes might commit the transaction and panic later, others might halt before committing (and get a second chance to process the transaction later after the peer is upgraded). This really sounds like we need a capability for post-commit changes as well. So, do we agree on the following:
 # lifecycle changes; namely
 ** Collection validation at LSCC invoke time
 ** Collection validation at _lifecycle invoke time
 ** Collection validation at LSCC custom validation time
 # post-commit processing changes; namely ([~yacovm] would be able to better articulate these)

Both 1) and 2) must be gated behind capabilities in order to be fork-safe.;;;","27/May/19 6:55 PM;ales;After talking to [~yacovm], it sounds like for point 2) we might not need a capability, iff we are able to guarantee that all versions, no matter the committed or proposed collection configuration, will not change the ledger or stateDB in any permanent way before either panicking or halting processing. If we're able to get hard evidence of this fact, we might not need a capability for the change at point 2. FWIW, sounds like the creation of the capability is just less of a hassle compared to the code review to determine whether we might not needed :);;;","29/May/19 1:06 PM;manish-sethi;[~ales] - As an additional thought - In addition to treating a faulty configuration as 'RejectAll', if we add another validation in vscc in 1.2, 1.3 and 1.4 which checks if a user transaction (not the collection config transaction) that includes private data and the corresponding committed collection config is faulty (i.e., 'RejectAll'), the user transaction be marked invalid. This additional check may not need any capability and will prevent loss of private data. 

Again, this is based on the fact that has been mentioned above a few times - i.e., no such block would have anyway been committed in either of the versions. In nutshell, the treatment of 'RejectAll' will help proceed the processing and marking the user transactions invalid would help prevent loss of private data (and give users a hint that they need to fix the broken config).

[~yacovm] - Can you confirm this assertion that the possibility of loss of private data is a corner case where configuration sets the ""requiredPeerCount"" to zero, otherwise the problem may have happened during simulation as well and no such user transaction would get in a block at the first place. If this is true, we can discuss if we can leave this corner case and just go with 'RejectAll' behavior.;;;","29/May/19 3:49 PM;yacovm;[~manish-sethi] I don't follow... and we should assign someone to *thoroughly* test any fix we make, on all versions we decide to backport.;;;","30/May/19 3:45 AM;wenjian;[~mistogans] Can you attach the collections_config.json file that caused peer panic?;;;","31/May/19 8:05 AM;denyeart;The above comments are fairly confusing. Let me summarize where I think we are...

We want to avoid adding new capabilities if at all possible, and it does in fact seem possible.

In v1.2 a bad collection config will result in the instantiation transaction getting validated, but subsequent user transactions that reference the private data collection will cause channel processing to terminate. In order to fix channels in this state, a code fix will be made (on all releases) such that getPolicy() will return a RejectAllPolicy if the policy cannot be parsed, plus an error will be logged. This will cause AmMemberOf() to always return false. User transactions that reference the bad collection config will get validated, but no private data will be persisted. Between private data not getting persisted, and the log message, users will become aware of the bad collection config and will update their collection configs.

In v1.4 (and perhaps v1.3) a bad collection config will cause instantiation transaction to panic peer. A code fix will be made (in release-1.4, and potentially in release-1.3 if it demonstrates the same problem) in lscc validation logic so that the bad collection config will cause the instantiation transaction to be invalidated. User will fix collection config and try instantiation again.

In both cases, no forks are possible. We are not changing any prior validation status (no capability update is required). The fixes simply allow channel processing that was previously blocked to proceed.

A similar check for bad collection config will also be made at endorsement time, both for lscc and for v2.0 new lifecycle.;;;","31/May/19 11:07 AM;manish-sethi;{quote}
   We want to avoid adding new capabilities if at all possible, and it does in fact seem possible.
{quote}
We need to fix the problem without capability anyways else the channel that are stuck simply cannot proceed. Capability is an orthogonal discussion for the channels that may not have struck this in the current deployed versions and the capability will help avoid this situation in the upgraded versions.

For fixing the problem in the current versions (i.e., with no capability), the proposal from [~yacovm] is to make getPolicy() return a RejectAllPolicy. In addition my, suggestion was to mark a user transaction invalid if the user transaction contains any private data corresponding to such collection (the block processing would have halted at a block with any such transaction). The problem with not marking such user transactions invalid is that the private data would not be committed anywhere (because of RejectAllPolicy) whereas the hashed versions will be committed. i.e., no further transactions on such private data will be possible (endorsement for any mutation on such private data will receive error - private data version does not match with hashed version - which I referred to as loss of private data in my previous comment)

So, if you would look at the transactions in a chain, ideally a transaction with faulty collection config should have been marked invalid (which can improve in the future versions by tacking at the simulation side and optionally at validation side with new capability). However, since we are fixing this in retrospection with current capabilities under the assumptions some channel is stuck, the chain would have already marked a transaction with faulty collection config as valid (however, its collection config part would never be used) and the user transaction that referred to such config would appear as invalid.
;;;","31/May/19 8:37 PM;denyeart;[~manish-sethi] Thanks for the additional clarifications. Are you suggesting changes to any of the fixes I proposed in the summary above?
For example are you suggesting to change
""User transactions that reference the bad collection config will get validated""
to
""User transactions that reference the bad collection config will get invalidated""
;;;","31/May/19 10:49 PM;manish-sethi;Yes [~denyeart] - that is one change I suggested apart from stressing the fact that we need a solution without a new capability (just to bring focus to the discussion) - thanks;;;","31/May/19 11:34 PM;ales;[~manish-sethi]: I don't follow why we want to code in this extra fix. Why would we want to mark the transaction as invalid, only because the dissemination policy would ultimately be converted into a reject all policy? I would keep the fix as minimal and simply convert on the fly the policy to a reject all... We could print appropriate warnings perhaps. What do you think?;;;","03/Jun/19 11:43 PM;ales;Btw, I've doubled checked and if the same bogus policy is supplied as endorsement policy, we won't panic but ""simply"" fail validation.
{noformat}
[e][org1.peer1] 2019-06-03 16:35:18.455 CEST [vscc] Validate -> ERRO 070 VSCC error: stateBasedValidator.Validate failed, err validation of endorsement policy for chaincode mycc in tx 4:0 failed: identity index out of range, requested 0, but identies length is 0{noformat}
Should we catch these at LSCC/_lifecycle endorsement time?;;;","04/Jun/19 12:00 AM;yacovm;what about the pre 1.3 where we didn't have SBE [~ales] ? ;;;","04/Jun/19 4:57 AM;manish-sethi;Discussed with [~ales] offline and summarizing here again on the choices of user transactions with private data that reference a collection config that cannot be parsed that therefore returns RejectAllPolicy.

Option-1 - invalidate transactions
 As explained in my earlier message, if we do not mark the transactions with private data invalid, a channel may suffer loss of private data. For including this in the _minimum_ fix, we need to verify that - If a faulty config has been committed in version 1.2, a block with private data transaction (that includes a collection of faulty config) would halt the block commit. If this is true, then we have an opportunity to save ourselves from loss of private data by invalidating user transactions. Otherwise, users may keep submitting private data transactions after applying this fix that would just keep widening the loss of private data.

Option-2 - validate transactions

On a second thought, a block containing a transaction with private data for faulty collection may not at all be possible based on how this configuration is used during endorsement phase. If this faulty config is guaranteed to cause failure during endorsement in the previous versions here - ([https://github.com/hyperledger/fabric/blob/dafa10882ed2e675023ec9f465ca2e6a98275546/core/endorser/endorser.go#L297]) ([~yacovm] - this is what I wanted to confirm with you) then the alternate fix could be to change the above code for returning error on having found ""RejectAll"" policy. The benefit of this approach is that this reduces the changes we have to make in the validation code in retrospection. However, the down side is that we would rely on the endorsement side code for this behavior which could be changed to fix some other bug and hence we would need to specify in comments clearly about this.;;;","04/Jun/19 6:16 AM;yacovm;Indeed if we fix the getPolicy to return a reject all policy in case of a malformed collection config, then all peers (regardless of branch version) would *not panic* and also *not halt the chain processing*, and would happily endorse the transaction, *however* all peers would skip that collection (because of the reject all policy conversion) at time of private data analysis at the private data part of gossip and (as you correctly say) - private data would be lost because the hashes are in the block but the pre-images are not in the private data DB.

Also you are right that changing the endorser code to explicitly check (I guess via a reference comparison) whether the policy we have is the reject all policy or not prior to dissemination, and aborting the endorsements in such a case - would make sure peers (after the fix) won't endorse private data for collections with malformed config. 

However, this is simply because we didn't fix the core issue - there is no collection policy sanity check at LSCC validation.
If we assume we put a validation check (without a capability) of the collection config in LSCC:
* All 1.4 peers that receive a block with a malformed collection config die from the instantiate, so after fixing them and restarting them - they will skip the instantiate transaction. 
* All pre 1.4 peers that receive a block with a malformed collection config don't die, but halt the chain and never commit the block, so after fixing them and restarting them - they will skip the instantiate transaction.
* All pre and post 1.4 peers that never received a block with a malformed collection config and are upgraded and *later* receive a block with malformed collection config, don't validate the transaction either. 

So I agree on the facts but I am not sure I agree with the resolution. It's true that a validation check is riskier than a check in the endorsement path, but doing a specific check to see if it's a ""reject all"" policy seems to me a bit hacky.
[~manish-sethi] [~ales] what do you think? ;;;","04/Jun/19 10:07 AM;wenjian;I tested with node.js SDK in v1.4 (I ran the e2e tests using old API, install chaincode, instantiate chaincode, upgrade chaincode)
 * Instantiating a chaincode with a malformed collection config (sign-by is out of index) was successful, no panic.
 * Invoke such a chaincode failed - chaincode container stopped with :""identity index out of range, requested 2, but identies length is 2"" error.

 * Upgrading such a chaincode caused peer panic.

deliverPayloads -> PANI 69f9^[[0m Cannot commit block to the ledger due to identity index out of range, requested 2, but identies length is 2

commit failed

github.com/hyperledger/fabric/gossip/privdata.(*coordinator).StoreBlock

        /go/src/github.com/hyperledger/fabric/gossip/privdata/coordinator.go:257

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).commitBlock

        /go/src/github.com/hyperledger/fabric/gossip/state/state.go:863

github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads

 

.......

 ;;;","04/Jun/19 11:42 AM;manish-sethi;Thanks [~wenjian] for reproducing this. Can you please confirm the following  with version 1.2 and 1.3 (1.3 should be similar to 1.2, I guess) - 
1) The instantiation transaction with wrong collection config gets committed
2) The user transaction for faulty collection gets rejected at the endorsement phase
3) The user transaction that contains only public data or private data for non faulty collections gets committed

[~yacovm] - I agree that ""reject all"" policy seems a hacky fix and as an alternative, I had considered the solution that you listed above in three bullets. If the problem would have been limited to version 1.4, first and third bullet would work best. The problem is with the second bullet...
{quote}
All pre 1.4 peers that receive a block with a malformed collection config don't die, but halt the chain and never commit the block, so after fixing them and restarting them - they will skip the instantiate transaction.
{quote}
Pending verification from above tests, Pre 1.4, peer don't halt at the block that contains the instantiate transaction, rather , they don't even halt on a further user transactions. Because, any user transaction that contains private data for the faulty collection is rejected in the endorsement phase and does not ever make it to a block. So, if we go for second bullet, we would need to also supply a tool that detects if such a faulty transaction has been committed. If the answer is positive, a reset of peer to that block (i.e., rebuild that block onward) would be required which would cascade-invalidate the user transactions (that contains only public data or private data for other collections). So, we need to make a call to take a chance with this approach which - has a low probability at the first place however, this solution could be catastrophic if it has happened. 

May be the answer is that in the larger interest, it should be OK to take a chance if some users get affected. Still, it is a point that asks for opinions. So, better to confirm the outcome of above tests and then take a call.

BTW, as observed by [~wenjian] test above, the first time instantiate transaction with faulty config would get committed even in version 1.4;;;","04/Jun/19 4:14 PM;yacovm;yeah [~manish-sethi] you're right - The network is going to end up with a collection that you can't use, and if we don't gate it behind a capability then a new peer with the fix will invalidate the collection and we're going to reach a state where you can have peers with the collection and peers without that collection.
This is actually not that bad if it's a collection config that was corrupted by an upgrade, because we could always fix the upgrade for both types of peers since upgrade overwrites the collection config.

However the problematic part is that you can have an instantiate transaction that gets invalidated (due to us not gating it behind a capability and marking that invalid) in the new peers, and is valid in the old peers - and then you reach a state where you have peers with chaincode definition in the old peers and peers without that chaincode definition in the new peers and then it's bad  - because the organizations might have detected this and ""fixed"" the collection config by an upgrade and then continued using it.

So your proposal sounds much more appealing now :) 
[~ales] what do you think?;;;","08/Jun/19 2:39 AM;manish-sethi;A summary of fixes:
 1) Without capability (backport to -1.2, 1.3-, and 1.4.2)
 a) Treating faulty config in user transactions as RejectAllPolicy (fix in function getPolicy suggested by [~yacovm])
 b) Need to make a choice from the two options (option-1=add new invalidation logic; option-2=let transactions validate but don't disseminate private data)  https://jira.hyperledger.org/browse/FAB-15543?focusedCommentId=60617&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-60617.

2) Fix for not allowing faulty-policy in lscc chaincode instantiate/upgrade for all releases (endorsement side fix) and validation side with capability starting in 1.4.2 (unfortunately, that's how lscc is - i.e., checks at both endorsement side and validation side).

3) Fix for not allowing faulty-policy in new lifecycle (endorsement side fix)

[~ales], [~yacovm] - Does this sound good to you?;;;","08/Jun/19 6:06 AM;wenjian;I have attached the test results. Also associate Jira tickets to the summary above.

1a) Treating faulty config as RejectAllPolicy (fix in function getPolicy suggested by [~yacovm]): FAB-15594

2) Fix for not allowing faulty-policy in lscc chaincode instantiate/upgrade for 1.4.2 (endorsement side fix) and validation side with capability 1.4.2: FAB-15593

3) Fix for not allowing faulty-policy in new lifecycle (endorsement side fix): FAB-15567

 ;;;","12/Jun/19 2:04 AM;ales;[~manish-sethi], agreed on 1a), 2) and 3). Re 1b), the endorser route seems more attractive to me because it gets the job done and guarantees resistance to forks. Not sure I would do it in the endorser proper, we could do it in the peer-side of the shim. Wdyt?;;;","12/Jun/19 11:19 PM;denyeart;Discussed with [~manish-sethi] and [~ales] , for 1b) we decided on option-2, that is, don't add code to invalidate these transactions with bad collection configs. For existing chains with transactions that reference bad collection configs, the new RejectAllPolicy fix will essentially cause private data not to be persisted but the transaction will still get validated and be committed. With the new endorser side fixes we don't expect a transaction with bad collection config to get all the way to validation phase though.;;;","21/Jun/19 12:08 AM;wenjian;[~manish-sethi]

For fix #1 ([https://gerrit.hyperledger.org/r/#/c/fabric/+/31904/]), the panic was caused by how AsMemberOf handles the getPolicy error. Don't think it is applicable to v1.2 and v1.3.
 * v1.2: no AsMemberOf method
 * v1.3: the method is there, but not called anywhere. Can we delete the method to avoid confusion?;;;","21/Jun/19 5:43 AM;manish-sethi;Yes,[~wenjian] - in 1.3 this function can be removed to look it more like 1.2.;;;","25/Jun/19 12:00 AM;wenjian;Added manual test results jira15593_15594_tests.pdf and deleted the earlier test result snapshot.

 ;;;"
Nil factory is not necessary in peer command,FAB-15544,40138,,Task,To Do,FAB,Fabric,software,denyeart,,,Low,,guoger,guoger,guoger,25/May/19 1:00 AM,10/Jun/19 6:44 PM,28/Oct/23 3:08 AM,,v2.0.0,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,help-wanted,hygiene,,,,for example: https://github.com/hyperledger/fabric/blob/3532077093c718f132046b0e177c67563ac18c24/internal/peer/chaincode/invoke.go#L53-L58,,denyeart,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p7o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/19 1:11 AM;sykesm;/cc [~denyeart] [~wlahti];;;","27/May/19 4:07 PM;guoger;As I look deeper into current cli implementation, a more substantial clean up seems viable, at least in several aspects:
 * {{CmdFactory}} is more of a collection of clients, instead of factory. It is created for dependency injection, which is not necessary at the top of invocation hierarchy
 * Too many pkg level vars
 * More comprehensive UT is needed. Most of UTs only do a sanity check on flags/args, instead of actual behavior of cmd

However, I recall an ongoing effort to redesign cli, at least from fabric playback. So I wonder if this is still worth tackling now?

wdyt? [~sykesm] [~denyeart] [~wlahti];;;","10/Jun/19 6:44 PM;denyeart;Agreed that this is valid but low priority. We would indeed like a redesigned CLI, but that is not prioritized into any release plan at this time.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor InitGossipService in gossip_service.go,FAB-15545,40140,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,dereckluo,dereckluo,dereckluo,25/May/19 1:21 AM,25/May/19 1:23 AM,28/Oct/23 3:08 AM,25/May/19 1:23 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Refactoring InitGossipService function in gossip_service.go 

!image-2019-05-24-12-20-35-215.png|width=833,height=113!

 

This should be removed now, and InitGossipService function can be removed as well. 

 ",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/19 1:20 AM;dereckluo;image-2019-05-24-12-20-35-215.png;https://jira.hyperledger.org/secure/attachment/17260/image-2019-05-24-12-20-35-215.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c0b:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor InitGossipService in gossip_service.go,FAB-15546,40141,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,dereckluo,dereckluo,dereckluo,25/May/19 1:26 AM,05/Jun/19 12:29 AM,28/Oct/23 3:08 AM,05/Jun/19 12:29 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Refactoring InitGossipService function in gossip_service.go 

!image-2019-05-24-12-26-28-117.png|width=882,height=119!

 

This should be removed now, and InitGossipService function can be removed as well. 

 ",,dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14324,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/May/19 1:26 AM;dereckluo;image-2019-05-24-12-26-28-117.png;https://jira.hyperledger.org/secure/attachment/17261/image-2019-05-24-12-26-28-117.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c0a:i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 12:29 AM;sykesm;This is being addressed in one of the CRs supporting FAB-14324.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to golang 1.12 in docs for setup,FAB-15547,40143,37993,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,yuki-kon,yuki-kon,yuki-kon,25/May/19 3:00 AM,31/May/19 1:25 AM,28/Oct/23 3:08 AM,31/May/19 1:25 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"The following documents also need to be updated to golang 1.12.
- docs/source/dev-setup/devenv.rst 
- docs/source/prereqs.rst
",,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p84:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yuki-kon,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/19 3:57 AM;yuki-kon;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31545/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace multiple instances of CouchDB with a single instance in privacyenabledstate,FAB-15548,40144,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,25/May/19 3:14 AM,30/May/19 2:55 AM,28/Oct/23 3:08 AM,30/May/19 2:55 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p8c:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
restrict discovery endorsement computation,FAB-15549,40146,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,25/May/19 5:09 AM,15/Jul/19 8:29 PM,28/Oct/23 3:08 AM,03/Jun/19 8:45 PM,,,,,,,,,,,,,,v1.2.2,v1.4.2,v2.0.0,,fabric-peer,,,,,,0,,,,,,"If the network has too many orgs and the endorsement policy requires too much of the orgs, discovery will try to compute too many combinations and the peer might OOM. ",,denyeart,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p8s:","If the endorsement policy contains an NoutOf that yields too many combinations (such as - 13 out of 25), the application won't get all the possible combinations (as that number can be huge) but instead will get a random subset of these).
",Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yacovm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.2,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/May/19 6:39 AM;yacovm;[~mistogans] this will probably fix your issue... ;;;","03/Jun/19 8:47 PM;denyeart;[~yacovm] Could you propose some release note text for the change in behavior. Ideally a doc update as well.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove dependency on Fabric Base Image,FAB-15550,40147,,Task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,,btl5037,btl5037,25/May/19 5:20 AM,25/May/19 5:20 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,There are very few projects still using the Fabric Base Image. Fabric itself has replaced it already. We are looking to replace the remaining dependencies in current projects with equivalent builds.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p90:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Fabric Base Image from Fabric CA,FAB-15551,40148,40147,Sub-task,In Progress,FAB,Fabric,software,denyeart,,,Medium,,,btl5037,btl5037,25/May/19 5:20 AM,29/May/19 11:20 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ca,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p98:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Fabric Base Image from Python SDK,FAB-15552,40149,40147,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,btl5037,btl5037,btl5037,25/May/19 5:21 AM,18/Jan/20 12:57 PM,28/Oct/23 3:08 AM,18/Jan/20 12:57 PM,,,,,,,,,,,,,,,,,,fabric-sdk-py,,,,,,0,,,,,,,,baohua,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p9g:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/May/19 10:42 AM;baohua;[https://gerrit.hyperledger.org/r/c/fabric-sdk-py/+/31518];;;","27/May/19 10:43 AM;baohua;[~btl5037], can i know why we do this?

Those images are required in chaincode executions.;;;","29/May/19 2:18 AM;btl5037;[~baohua]

What are the implications of removing this. I removed the base-os because it had no reference in the code base, however, it doesn't need to be removed if there is a reason it is there.

Fabric Base Image however needs to be removed. It is no longer a dependency of Fabric itself, we have moved to custom images within Fabric itself. We are preparing a deprecation notice for Base Image, and we walked through the repos in Hyperledger and identified those repos still using it. We've already converted Fabric CA to using custom Ubuntu images by copying code from the Fabric Base Image directly into the repo.

What is the chaincode dependency that prevents this from happening? If there is code in this repo that depends on it, then we need to build custom images contained in the repo to support the execution.;;;","30/May/19 2:16 PM;baohua;[~btl5037], can you help point out the change in Fabric itself (e.g., Jira issue), then we will consider the appropriate way to change existing integration process.

Currently we are using fabric v1.4, and use those images to finish the integration testing.;;;","31/May/19 4:41 AM;btl5037;https://jira.hyperledger.org/browse/FAB-11096

This is the Jira where Gari removed Fabric's dependency on Base Image. The unfortunate fact is, the Fabric team no longer has any intent on maintaining the Base Image repo, as of right now it has diverged from Fabric itself on Go Versions. We've upgraded all of Fabric's dependencies to Go 1.12.5 but not done the work in Base Image.

On a related note, I'm not sure how integration tests depend on Base Image, I just ran the Python test suite in the SDK after removing the pull for Base Image and the suite passed. Which is the same result we saw in CI with the Gerrit change I submitted. I also dont see anything in CI-Management for the verify or merge job that depends on it either. Can you guide me to how it is used to finish integration testing?;;;","31/May/19 5:11 PM;baohua;[~btl5037], if i'm correct, that change is for HLF v2.0.0.

However, in v1.4.x (which the python-sdk supports now), it still requires the fabric-base images, which will pull during the docker containers start up if not pulling down before hand.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Fabric Base Image from Go SDK,FAB-15553,40150,40147,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,25/May/19 5:21 AM,02/Jun/19 6:40 AM,28/Oct/23 3:08 AM,02/Jun/19 6:40 AM,,,,,,,,,,,,,,,,,,fabric-sdk-go,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p9o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,dependabot/go_modules/golang.org/x/crypto-0.1.0,dependabot/go_modules/test/performance/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/net-0.7.0,main,dependabot/go_modules/github.com/prometheus/client_golang-1.11.1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Fabric Base Image from Cello,FAB-15554,40151,40147,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,btl5037,btl5037,25/May/19 5:21 AM,25/May/19 5:23 AM,28/Oct/23 3:08 AM,25/May/19 5:23 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00p9w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Behave - CouchDB Indexing tests(features 72,364) have failed due to chaincode in the NODE tests.",FAB-15555,40158,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,25/May/19 11:25 PM,30/Jul/19 1:09 PM,28/Oct/23 3:08 AM,30/Jul/19 1:09 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-first-failure,ci-flake,,,,"The CouchDB indexing tests in using marbles chaincode have failed in NODE in the following scenarios. The tests took around 10 hours which is 3 hours more than the usual build time for the Behave feature tests to complete all scenarios.

CouchDB_index.feature:72  FAB-7255: Test CouchDB indexing using marbles chaincode using NODE with 3 channels and 1 index with 3 selectors -- @1.2 

CouchDB_index.feature:364  FAB-7260, FAB-7261: Test CouchDB indexing using install-after-instantiate with marbles chaincode using NODE with 3 channels and 1 index -- @1.2 

*Branch:* master
*Platform:* x86_64
Error Snippet:
*FAB-7255*
{code:java}
Error: could not assemble transaction, err proposal response was not successful, error code 500, msg error starting container: error starting container: docker build failed: Error returned from build: 1 ""npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed.
npm ERR! Unexpected end of JSON input while parsing near '...0Mxa3H5DC+03sI/QLLSJJ'
{code}

*FAB-7260*
{code:java}
Error occurred [u'docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/c7899c3c7dc211e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc2 --version 0 --lang NODE --channelID mychannel2 --ctor \'{\\""Args\\"": [\\""\\""]}\' --orderer orderer0.example.com:7050 ""']: 2019-05-24 01:31:40.737 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc
2019-05-24 01:31:40.738 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc
Error: could not assemble transaction, err proposal response was not successful, error code 500, msg error starting container: error starting container: docker build failed: Error returned from build: 1 ""npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed.
npm ERR! Unexpected end of JSON input while parsing near '...0Mxa3H5DC+03sI/QLLSJJ'

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2019-05-24T01_31_52_601Z-debug.log
""

[sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/c7899c3c7dc211e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc2 --version 0 --lang NODE --channelID mychannel2 --ctor '{\""Args\"": [\""\""]}' --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': 'Error occurred [u\'docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/c7899c3c7dc211e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc2 --version 0 --lang NODE --channelID mychannel2 --ctor \\\'{\\\\""Args\\\\"": [\\\\""\\\\""]}\\\' --orderer orderer0.example.com:7050 ""\']: \x1b[34m2019-05-24 01:31:40.737 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001\x1b[0m Using default escc\n\x1b[34m2019-05-24 01:31:40.738 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002\x1b[0m Using default vscc\nError: could not assemble transaction, err proposal response was not successful, error code 500, msg error starting container: error starting container: docker build failed: Error returned from build: 1 ""npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed.\nnpm ERR! Unexpected end of JSON input while parsing near \'...0Mxa3H5DC+03sI/QLLSJJ\'\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2019-05-24T01_31_52_601Z-debug.log\n""\n'}
{code}

*FAB-7261*

{code:java}
     Assertion Failed: Expected response was ""owner"":""jose""; received Error occurred [u'docker exec peer1.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/d675cd367dce11e9a253fa163e6336f2/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer1.org1.example.com CORE_PEER_ADDRESS=peer1.org1.example.com:7051 peer chaincode query --name mycc3 --ctor \'{\\""Args\\"": [\\""queryMarbles\\"", \\""{\\\\\\""selector\\\\\\"":{\\\\\\""docType\\\\\\"":\\\\\\""marble\\\\\\"",\\\\\\""owner\\\\\\"":\\\\\\""jose\\\\\\"", \\\\\\""color\\\\\\"":\\\\\\""red\\\\\\""}, \\\\\\""use_index\\\\\\"":[\\\\\\""_design/indexdoc_behave_test\\\\\\"", \\\\\\""index_behave_test\\\\\\""]}\\""]}\' --channelID mychannel3 ""']: Error: endorsement failure during query. response: status:500 message:""failed to execute transaction 1b47678c5c25a7d49dedb71ddc1cefe84dff6b15ec7f6d463087f029ba9ddee4: [channel mychannel3] could not launch chaincode mycc3:0: error starting container: error starting container: docker build failed: Error returned from build: 1 \""npm WARN deprecated @types/winston@2.4.4: This is a stub types definition. winston provides its own type definitions, so you do not need this installed.\nnpm ERR! Unexpected end of JSON input while parsing near '...ity\"":\""sha512-WXvAXakn'\n\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /root/.npm/_logs/2019-05-24T03_03_03_210Z-debug.log\n\"""" 
{code}

*Build Logs*

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/259/testReport/junit/CouchDB_index/Testing%20Fabric%20CouchDB%20indexing/FAB_7255__Test_CouchDB_indexing_using_marbles_chaincode_using_NODE_with_3_channels_and_1_index_with_3_selectors_____1_2_/

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/259/testReport/junit/CouchDB_index/Testing%20Fabric%20CouchDB%20indexing/FAB_7260__FAB_7261__Test_CouchDB_indexing_using_install_after_instantiate_with_marbles_chaincode_using_NODE_with_3_channels_and_1_index_____1_2_/",,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,9ae65f8,Unset,No,,,"1|i00pb8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jul/19 1:09 PM;vijaypunugubati;Working as expected refer these logs for the recent tests success.[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/309/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Behave - JavaSDK interoperability Tests using NODE,JAVA failed query on chaincode in fabric-ca(feature 71, 72)",FAB-15556,40159,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,25/May/19 11:59 PM,30/Jul/19 1:00 PM,28/Oct/23 3:08 AM,30/Jul/19 1:00 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-first-failure,ci-flake,,,,"The fabric-ca JavaSDK interoperability Tests using NODE,JAVA chaincode failed to query in peer0.org1.example.com and peer1.org1.example.com. The tests took around 10 hours which is 3 hours more than the usual build time for the Behave feature tests to complete all scenarios.

*Branch:* master
*Platform:* x86_64
*Error Snippet:*
 
{code:java}
Failing step: When a user ""adnan"" queries on the chaincode with args [""query"",""a""] ... failed in 39.728s
Location: fabric-ca.feature:57


File ""/usr/lib/python2.7/subprocess.py"", line 574, in check_output raise CalledProcessError(retcode, cmd, output=output)
subprocess.CalledProcessError: Command 'java -jar /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/sdk/java/peer-javasdk.jar -o query -n peer0.org1.example.com -i 127.0.0.1 -p 7051 -r org1.example.com -c /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/e15081007de311e9a253fa163e6336f2 -a /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/e15081007de311e9a253fa163e6336f2/ordererOrganizations/example.com/ca/tls-cert.pem -s /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/e15081007de311e9a253fa163e6336f2/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.crt -d orderer0.example.com -h behavesystest -m mycc -f query -g ['a'] -u adnan -w wh@tsup' returned non-zero exit status 1
{code}


{code:java}
Failing step: When a user ""scott"" queries on the chaincode with args [""query"",""a""] from ""peer0.org2.example.com"" ... failed in 40.181s
Location: fabric-ca.feature:62
Traceback (most recent call last):
  File ""/usr/local/lib/python2.7/dist-packages/behave/model.py"", line 1329, in run
    match.run(runner.context)
  File ""/usr/local/lib/python2.7/dist-packages/behave/matchers.py"", line 98, in run
    self.func(context, *args, **kwargs)
  File ""steps/endorser_impl.py"", line 548, in step_impl
    query_impl(context, context.interface.TEST_CHANNEL_ID, context.chaincode[""name""], args, str(peer), user=user)
  File ""steps/endorser_impl.py"", line 464, in query_impl
    context.result = context.interface.query_chaincode(context, chaincode, peer, channel, targs, user=user, opts=opts)
  File ""/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/endorser_util.py"", line 362, in query_chaincode
    result = self.query_func(chaincode, channelId, user, org, [peer], opts)
  File ""/w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/steps/endorser_util.py"", line 487, in query_func
    answer = subprocess.check_output(query_call, shell=True)
  File ""/usr/lib/python2.7/subprocess.py"", line 574, in check_output
    raise CalledProcessError(retcode, cmd, output=output)
subprocess.CalledProcessError: Command 'java -jar /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/sdk/java/peer-javasdk.jar -o query -n peer0.org2.example.com -i 127.0.0.1 -p 7051 -r org2.example.com -c /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/650ae1ca7de411e9a253fa163e6336f2 -a /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/650ae1ca7de411e9a253fa163e6336f2/ordererOrganizations/example.com/ca/tls-cert.pem -s /w/workspace/fabric-test-daily-behave-master-x86_64/gopath/src/github.com/hyperledger/fabric-test/feature/configs/650ae1ca7de411e9a253fa163e6336f2/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/server.crt -d orderer0.example.com -h behavesystest -m mycc -f query -g ['a'] -u scott -w th3r3' returned non-zero exit status 1

{code}

*Build Log*

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/259/testReport/junit/fabric-ca/Fabric-CA%20Service/FAB_11621__JavaSDK_interoperability_Test_using_NODE_chaincode_shim_____1_2_/

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/259/testReport/junit/fabric-ca/Fabric-CA%20Service/FAB_11621__JavaSDK_interoperability_Test_using_JAVA_chaincode_shim_____1_3_/",,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,9ae65f8,Unset,No,,,"1|i00pbg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jul/19 1:00 PM;vijaypunugubati;Not observed in the recent builds, working as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer gossip status keep going online/offline although those peers are online,FAB-15557,40164,,Bug,Returned,FAB,Fabric,software,denyeart,,,High,,,jooskim1,jooskim1,27/May/19 1:42 AM,23/Nov/20 11:47 PM,28/Oct/23 3:08 AM,,v1.4.1,,,,,,,,,,,,,,,,,fabric-gossip,fabric-peer,,,,,2,gossip,privatedata,v1.4.1,,,"we have two organizations in a channel, let's call it OrgA, OrgB, and ChannelA.
 OrgA has 4 peers and OrgB has 2 peers.
 After those OrgB's 2 peers joined the channel, everything seemed working fine.
 However, once we do ""docker stop"" and then ""docker start"" on both OrgB's peers, then it started to produce these errors on OrgA's Peer1,2,3,4 as shown below (the reason that we tried to stop the docker container is to reproduce the case where the network on OrgB is disconnected --somehow):

-------- log starts:
 2019-05-26T15:01:51.051024427Z 2019-05-26 15:01:51.050 UTC [gossip.comm] func1 -> WARN 36e OrgB.PEER1.IP:7051 , PKIid:ba3542dce022011a600b6867ce22750dae2f4c5d2fcb9ed62cc8d31a3047eca8 isn't responsive: EOF
 2019-05-26T15:01:51.051241455Z 2019-05-26 15:01:51.051 UTC [gossip.discovery] expireDeadMembers -> WARN 36f Entering [ba3542dce022011a600b6867ce22750dae2f4c5d2fcb9ed62cc8d31a3047eca8]
 2019-05-26T15:01:51.051253492Z 2019-05-26 15:01:51.051 UTC [gossip.discovery] expireDeadMembers -> WARN 370 Closing connection to Endpoint: OrgB.PEER1.IP:7051 , InternalEndpoint: , PKI-ID: ba3542dce022011a600b6867ce22750dae2f4c5d2fcb9ed62cc8d31a3047eca8, Metadata:
 2019-05-26T15:01:51.051258827Z 2019-05-26 15:01:51.051 UTC [gossip.discovery] expireDeadMembers -> WARN 371 Exiting

2019-05-26T15:05:41.170617434Z 2019-05-26 15:05:41.170 UTC [gossip.channel] reportMembershipChanges -> INFO 2bd Membership view has changed. peers went offline: [[OrgB.PEER1.IP:7051 ]] , current view: [[OrgB.PEER2.IP:7051 ] [OrgA.PEER1.IP:7051] [OrgA.PEER2.IP:7051] [OrgA.PEER3.IP:7051]]
 2019-05-26T15:05:41.399609880Z 2019-05-26 15:05:41.399 UTC [comm.grpc.server] 1 -> INFO 2be unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-05-26T15:05:43.399Z grpc.peer_address=52.79.240.46:45326 grpc.code=OK grpc.call_duration=105.988µs
 2019-05-26T15:05:46.170562199Z 2019-05-26 15:05:46.170 UTC [gossip.channel] reportMembershipChanges -> INFO 2bf Membership view has changed. peers went online: [[OrgB.PEER1.IP:7051 ]] , current view: [[OrgB.PEER1.IP:7051] [OrgB.PEER2.IP:7051] [OrgA.PEER1.IP:7051] [OrgA.PEER2.IP:7051] [OrgA.PEER3.IP:7051]]

------- log ended.

It keep says OrgB's Peer 1,2 are going Online and Offline infinitely like every minutes. It never stops producing this error, but it looks like those OrgB peers are working fine. We confirmed OrgB's peer1 and 2 are still has joined the channel and ledger sync / private dissemination works just fine.

we tried to completely remove the OrgB's Peer1 and 2, and recreate peer/join the channel, and still we are seeing those warnings although those peers joined just fine.

As long as OrgB's Peers are working fine in despite of those warning/error messages, we can say we can deal with it. However the most critical part is here:

After we started to see this OrgB's peer1 and peer2 online/offline issue, around after 5 hours(not exact time. some times it happens randomly), we can observe the issue that in OrgA, a random peer gets isolated from the other peers - it means the random peer's current view is empty and it cannot get the private data anymore from gossip protocol. Since every peers in OrgA are leaders, ledger height is fine, but since the peer can't see other peers after isolation, the private data is not disemissioned.  If we restart the isolated peer docker container, then it works fine at that time, but after another several hours, another random peer(s) gets isolated again and this happens again and again.

This is our configurations on both OrgA and OrgB.
 - we set the anchor peers on both OrgA and OrgB.
 - we are on Kafka Orderer mode
 - The bootstrap set up is configured on both Orgs.
 - Every peer in OrgA is the leader peer(static leader setup) and OrgB is dynamic leader election.
 - We confirmed they both joined the channel successfully, and both ledger height the private data are synced just fine until the isolation happens.
 - Peer docker image version - 1.4.1
 - CouchDB docker image version - 0.4.15
 - Peers in OrgA are registered/enrolled from fabric CA1
 - Peers in OrgB are registered/enrolled from fabric CA2

This guy is under similar issue : [https://lists.hyperledger.org/g/fabric/message/6003]

I strongly think this is related to multi-organization situation. On a single organization setting, this error can never be observed.

If we stop/restart one of peers on OrgA, nothing happens wrong. Everything is good.

It only happens if we stop/restart one of peers on OrgB, then OrgA peers start to produce the error messages and the isolation on OrgA peers happens.",,C0rWin,Gaurang,jooskim1,jyellick,lmars,mplisov,naaman,ronenschafferibm,seokm0,vampire203,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16699,FAB-16651,,,FAB-15564,FAB-15840,FAB-16699,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jul/19 12:32 PM;jooskim1;gossip_on_off_debug.log;https://jira.hyperledger.org/secure/attachment/17621/gossip_on_off_debug.log","03/Sep/19 4:55 PM;jooskim1;logs.zip;https://jira.hyperledger.org/secure/attachment/17754/logs.zip","06/Aug/19 4:23 PM;jooskim1;org1.peer1.log;https://jira.hyperledger.org/secure/attachment/17643/org1.peer1.log","06/Aug/19 4:23 PM;jooskim1;org1.peer2.log;https://jira.hyperledger.org/secure/attachment/17646/org1.peer2.log","06/Aug/19 4:24 PM;jooskim1;org2.peer1.log;https://jira.hyperledger.org/secure/attachment/17648/org2.peer1.log","06/Aug/19 4:24 PM;jooskim1;org2.peer2.log;https://jira.hyperledger.org/secure/attachment/17650/org2.peer2.log",,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0lk",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,Gaurang,jooskim1,jyellick,lmars,mplisov,naaman,ronenschafferibm,seokm0,vampire203,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/19 9:58 PM;yacovm;[~C0rWin] [~naaman] ;;;","03/Jun/19 10:26 PM;C0rWin;[~jooskim1] can you provide logs of isolated peer for example? ;;;","04/Jun/19 10:26 AM;jooskim1;[~C0rWin] 
Below is logs that can be found in one of the isolated peer, OrgA.PEER4.
Detail is that 
1. 2019-05-22 08:22:38.948 : OrgA.PEER4 starts losing its peers in the same channel,  ChannelA. On this time, it loses OrgA.PEER3.
2. 2019-05-22 08:22:43.947 : OrgA.PEER4 loses OrgA.PEER1 and OrgB.PEER1 at the same time.
3. 2019-05-22 08:22:48.947 : OrgA.PEER4 loses OrgA.PEER2 and finally OrgA.PEER4's current membership view is empty.
4. After losing all members on the same channel, OrgA.PEER4 dose not recover its membership view and from this moment this isolated peer is not able to fetch private data via gossip protocol.

-------- log starts:
.
.
.
[34m2019-05-22 08:22:34.966 UTC [comm.grpc.server] 1 -> INFO 2ffb[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.18.0.1:44246 grpc.code=OK grpc.call_duration=1.682729ms
[34m2019-05-22 08:22:38.948 UTC [gossip.channel] reportMembershipChanges -> INFO 2ffc[0m Membership view has changed. peers went offline:  [[OrgA.PEER3.IP:7051]] , current view:  [[OrgA.PEER2.IP:7051] [OrgA.PEER1.IP:7051] [OrgB.PEER1.IP7051 ]]
[34m2019-05-22 08:22:39.016 UTC [comm.grpc.server] 1 -> INFO 2ffd[0m unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-05-22T08:22:41.016Z grpc.peer_address=54.178.153.239:1420 grpc.code=OK grpc.call_duration=117.72µs
[34m2019-05-22 08:22:40.040 UTC [endorser] callChaincode -> INFO 2ffe[0m [][9f9d4ead] Entry chaincode: name:""qscc"" 
[34m2019-05-22 08:22:40.041 UTC [endorser] callChaincode -> INFO 2fff[0m [][9f9d4ead] Exit chaincode: name:""qscc""  (1ms)
[34m2019-05-22 08:22:40.041 UTC [comm.grpc.server] 1 -> INFO 3000[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.18.0.1:44260 grpc.code=OK grpc.call_duration=1.671653ms
[34m2019-05-22 08:22:40.049 UTC [endorser] callChaincode -> INFO 3001[0m [][080e648d] Entry chaincode: name:""qscc"" 
[34m2019-05-22 08:22:40.049 UTC [endorser] callChaincode -> INFO 3002[0m [][080e648d] Exit chaincode: name:""qscc""  (1ms)
[34m2019-05-22 08:22:40.050 UTC [comm.grpc.server] 1 -> INFO 3003[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.18.0.1:44264 grpc.code=OK grpc.call_duration=1.725098ms
[34m2019-05-22 08:22:43.947 UTC [gossip.channel] reportMembershipChanges -> INFO 3004[0m Membership view has changed. peers went offline:  [[OrgA.PEER1.IP:7051] [OrgB.PEER1.IP:7051 ]] , current view:  [[OrgA.PEER2.IP:7051]]
[34m2019-05-22 08:22:45.122 UTC [endorser] callChaincode -> INFO 3005[0m [][96bb57db] Entry chaincode: name:""qscc"" 
[34m2019-05-22 08:22:45.123 UTC [endorser] callChaincode -> INFO 3006[0m [][96bb57db] Exit chaincode: name:""qscc""  (1ms)
[34m2019-05-22 08:22:45.123 UTC [comm.grpc.server] 1 -> INFO 3007[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.18.0.1:44268 grpc.code=OK grpc.call_duration=1.814307ms
[34m2019-05-22 08:22:45.126 UTC [endorser] callChaincode -> INFO 3008[0m [][3f3e0be4] Entry chaincode: name:""qscc"" 
[34m2019-05-22 08:22:45.127 UTC [endorser] callChaincode -> INFO 3009[0m [][3f3e0be4] Exit chaincode: name:""qscc""  (1ms)
[34m2019-05-22 08:22:45.127 UTC [comm.grpc.server] 1 -> INFO 300a[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.18.0.1:44272 grpc.code=OK grpc.call_duration=1.713582ms
[34m2019-05-22 08:22:46.148 UTC [comm.grpc.server] 1 -> INFO 300b[0m unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-05-22T08:22:48.147Z grpc.peer_address=OrgB.PEER1.IP:16116 grpc.code=OK grpc.call_duration=114.67µs
[34m2019-05-22 08:22:46.631 UTC [comm.grpc.server] 1 -> INFO 300c[0m unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-05-22T08:22:48.631Z grpc.peer_address=OrgA.PEER1.IP:34024 grpc.code=OK grpc.call_duration=114.277µs
[34m2019-05-22 08:22:48.947 UTC [gossip.channel] reportMembershipChanges -> INFO 300d[0m Membership view has changed. peers went offline:  [[OrgA.PEER2.IP:7051]] , current view:  []
[34m2019-05-22 08:22:50.197 UTC [endorser] callChaincode -> INFO 300e[0m [][1ee56d80] Entry chaincode: name:""qscc"" 
[34m2019-05-22 08:22:50.198 UTC [endorser] callChaincode -> INFO 300f[0m [][1ee56d80] Exit chaincode: name:""qscc""  (1ms)
[34m2019-05-22 08:22:50.199 UTC [comm.grpc.server] 1 -> INFO 3010[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.18.0.1:44276 grpc.code=OK grpc.call_duration=1.851186ms
[34m2019-05-22 08:22:50.201 UTC [endorser] callChaincode -> INFO 3011[0m [][fe475aa6] Entry chaincode: name:""qscc"" 
[34m2019-05-22 08:22:50.202 UTC [endorser] callChaincode -> INFO 3012[0m [][fe475aa6] Exit chaincode: name:""qscc""  (1ms)
[34m2019-05-22 08:22:50.202 UTC [comm.grpc.server] 1 -> INFO 3013[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=172.18.0.1:44280 grpc.code=OK grpc.call_duration=1.736121ms
[34m2019-05-22 08:22:51.417 UTC [endorser] callChaincode -> INFO 3015[0m [payprotocol][43b72e44] Entry chaincode: name:""cscc"" 
[34m2019-05-22 08:22:51.417 UTC [endorser] callChaincode -> INFO 3014[0m [payprotocol][6351eef6] Entry chaincode: name:""cscc"" 
[34m2019-05-22 08:22:51.418 UTC [endorser] callChaincode -> INFO 3016[0m [payprotocol][43b72e44] Exit chaincode: name:""cscc""  (1ms)
[34m2019-05-22 08:22:51.418 UTC [endorser] callChaincode -> INFO 3017[0m [payprotocol][6351eef6] Exit chaincode: name:""cscc""  (1ms)
[34m2019-05-22 08:22:51.419 UTC [comm.grpc.server] 1 -> INFO 3018[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.request_deadline=2019-05-22T08:25:51.409Z grpc.peer_address=OrgB.PEER1.IP:54538 grpc.code=OK grpc.call_duration=2.756749ms
[34m2019-05-22 08:22:51.419 UTC [comm.grpc.server] 1 -> INFO 3019[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.request_deadline=2019-05-22T08:25:51.334Z grpc.peer_address=OrgB.PEER1.IP:54538 grpc.code=OK grpc.call_duration=2.761568ms
[34m2019-05-22 08:22:51.419 UTC [endorser] callChaincode -> INFO 301a[0m [payprotocol][c10956a2] Entry chaincode: name:""cscc"" 
[34m2019-05-22 08:22:51.420 UTC [endorser] callChaincode -> INFO 301b[0m [payprotocol][c10956a2] Exit chaincode: name:""cscc""  (1ms)
[34m2019-05-22 08:22:51.421 UTC [comm.grpc.server] 1 -> INFO 301c[0m unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.request_deadline=2019-05-22T08:25:51.376Z grpc.peer_address=OrgB.PEER1.IP:54538 grpc.code=OK grpc.call_duration=2.500416ms
[34m2019-05-22 08:22:51.682 UTC [comm.grpc.server] 1 -> INFO 301d[0m unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-05-22T08:22:53.682Z grpc.peer_address=OrgA.PEER3.IP:47778 grpc.code=OK grpc.call_duration=133.361µs
[34m2019-05-22 08:22:55.275 UTC [endorser] callChaincode -> INFO 301e[0m [][61f421ef] Entry chaincode: name:""qscc"" 
[34m2019-05-22 08:22:55.276 UTC [endorser] callChaincode -> INFO 301f[0m [][61f421ef] Exit chaincode: name:""qscc""  (1ms)
.
.
.
-------- log ends:;;;","11/Jun/19 12:24 PM;jooskim1;[~C0rWin] [~ronenschafferibm]

 

Hello, 

I have one more thing that I should tell you guys to solve this serious problem.

We replicated the exact same fabric network environment on AWS, and for this one, we didn't install any chaincodes because we doubted the chaincode(which is using private data) was doing something weird.

We have monitored this replicated test network, and even after 5 days, the network has no problem and no peer is being isolated anymore. Thus we kinda concluded that this chaincode with private data is doing something wrong.

On the production environment, we are still having this isolated peer problem almost every 24 hours. In detail, in OrgA, a peer which has a chaincode using private data has *no more private data* to spread out to other peers on a channel, peers are still isolated-losing membership views and not recovering the membership view even if other peers on the same channel still alive. 

 

Thanks

 

P.S. 

I just monitored that replicated fabric network on AWS which has no installed chaincodes also occurs isolated peer problem. Peer A in OrgA is isolated.

 

below is the logs on Peer A in OrgA 

------logs start 

.
.
.
2019-06-11T05:17:42.442589801Z 2019-06-11 05:17:42.442 UTC [gossip.discovery] getDeadMembers -> WARN 63e Haven't heard from [183 175 99 112 64 35 226 232 249 63 241 33 171 245 61 142 219 12 72 2 135 213 176 175 27 37 179 107 163 7 23 160] for 25.866546422s
2019-06-11T05:17:42.442661527Z 2019-06-11 05:17:42.442 UTC [gossip.discovery] expireDeadMembers -> WARN 63f Entering [b7af63704023e2e8f93ff121abf53d8edb0c480287d5b0af1b25b36ba30717a0]
2019-06-11T05:17:42.442670397Z 2019-06-11 05:17:42.442 UTC [gossip.discovery] expireDeadMembers -> WARN 640 Closing connection to Endpoint: OrgA.PEER3.IP:7051, InternalEndpoint: OrgA.PEER3.IP:7051, PKI-ID: b7af63704023e2e8f93ff121abf53d8edb0c480287d5b0af1b25b36ba30717a0, Metadata:
2019-06-11T05:17:46.307183798Z 2019-06-11 05:17:46.306 UTC [comm.grpc.server] 1 -> INFO 641 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:17:48.306Z grpc.peer_address=OrgA.PEER3.IP:42816 grpc.code=OK grpc.call_duration=108.151µs
2019-06-11T05:17:46.886130757Z 2019-06-11 05:17:46.885 UTC [gossip.channel] reportMembershipChanges -> INFO 642 Membership view has changed. peers went offline: [[OrgA.PEER3.IP:7051]] , current view: [[OrgA.PEER4.IP:7051] [OrgB.PEER1.IP:7051 ] [OrgB.PEER2.IP:7051 ] [OrgA.PEER2.IP:7051]]
.
.
.
2019-06-11T05:24:15.094256937Z 2019-06-11 05:24:15.094 UTC [comm.grpc.server] 1 -> INFO 68f unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:17.093Z grpc.peer_address=OrgB.PEER2.IP:49350 grpc.code=OK grpc.call_duration=146.546µs
2019-06-11T05:24:21.230229172Z 2019-06-11 05:24:21.229 UTC [comm.grpc.server] 1 -> INFO 690 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:23.229Z grpc.peer_address=OrgB.PEER1.IP:55944 grpc.code=OK grpc.call_duration=105.335µs
2019-06-11T05:24:22.114872751Z 2019-06-11 05:24:22.114 UTC [comm.grpc.server] 1 -> INFO 691 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:24.114Z grpc.peer_address=OrgA.PEER2.IP:41660 grpc.code=OK grpc.call_duration=103.522µs
2019-06-11T05:24:26.384157957Z 2019-06-11 05:24:26.383 UTC [comm.grpc.server] 1 -> INFO 692 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:28.383Z grpc.peer_address=OrgA.PEER3.IP:42982 grpc.code=OK grpc.call_duration=109.119µs
2019-06-11T05:24:29.042570595Z 2019-06-11 05:24:29.042 UTC [comm.grpc.server] 1 -> INFO 693 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:31.042Z grpc.peer_address=OrgA.PEER4.IP:48248 grpc.code=OK grpc.call_duration=108.177µs
2019-06-11T05:24:40.099220355Z 2019-06-11 05:24:40.098 UTC [comm.grpc.server] 1 -> INFO 694 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:42.098Z grpc.peer_address=OrgB.PEER2.IP:49364 grpc.code=OK grpc.call_duration=116.193µs
2019-06-11T05:24:46.234846386Z 2019-06-11 05:24:46.234 UTC [comm.grpc.server] 1 -> INFO 695 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:48.234Z grpc.peer_address=OrgB.PEER1.IP:55956 grpc.code=OK grpc.call_duration=108.18µs
2019-06-11T05:24:47.119590315Z 2019-06-11 05:24:47.119 UTC [comm.grpc.server] 1 -> INFO 696 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:49.118Z grpc.peer_address=OrgA.PEER2.IP:41672 grpc.code=OK grpc.call_duration=108.734µs
2019-06-11T05:24:51.388774695Z 2019-06-11 05:24:51.388 UTC [comm.grpc.server] 1 -> INFO 697 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:53.388Z grpc.peer_address=OrgA.PEER3.IP:42992 grpc.code=OK grpc.call_duration=103.616µs
2019-06-11T05:24:54.047398027Z 2019-06-11 05:24:54.047 UTC [comm.grpc.server] 1 -> INFO 698 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:24:56.046Z grpc.peer_address=OrgA.PEER4.IP:48258 grpc.code=OK grpc.call_duration=127.284µs
2019-06-11T05:25:05.104696892Z 2019-06-11 05:25:05.104 UTC [comm.grpc.server] 1 -> INFO 699 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:25:07.103Z grpc.peer_address=OrgB.PEER2.IP:49378 grpc.code=OK grpc.call_duration=103.686µs
2019-06-11T05:25:41.886164452Z 2019-06-11 05:25:41.885 UTC [gossip.channel] reportMembershipChanges -> INFO 69a Membership view has changed. peers went offline: [[OrgB.PEER1.IP:7051 ]] , current view: [[OrgA.PEER4.IP:7051] [OrgB.PEER2.IP:7051 ] [OrgA.PEER2.IP:7051]]
2019-06-11T05:25:46.886065707Z 2019-06-11 05:25:46.885 UTC [gossip.channel] reportMembershipChanges -> INFO 69b Membership view has changed. peers went offline: [[OrgA.PEER4.IP:7051] [OrgB.PEER2.IP:7051 ] [OrgA.PEER2.IP:7051]] , current view: []
2019-06-11T05:39:42.689927913Z 2019-06-11 05:39:42.687 UTC [comm.grpc.server] 1 -> INFO 69c unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:39:44.687Z grpc.peer_address=OrgB.PEER2.IP:49914 grpc.code=OK grpc.call_duration=121.113µs
2019-06-11T05:39:42.824577254Z 2019-06-11 05:39:42.824 UTC [comm.grpc.server] 1 -> INFO 69d unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-06-11T05:39:44.824Z grpc.peer_address=OrgB.PEER2.IP:49922 grpc.code=OK grpc.call_duration=106.693µs

----- logs end

 ;;;","12/Jun/19 8:58 PM;ronenschafferibm;[~jooskim1]

Thanks for the detailed explanation.
 What is the simplest way to recreate the problem on my local machine?;;;","13/Jun/19 10:50 AM;jooskim1;[~ronenschafferibm]

 In summary, one channel, 2 organizations and all peers should be hosted on *separate machines*. Thus, I doubt if you can replicate the issue on the local environment.(in order to reproduce the issue on my end, I had to use AWS EC2 instances to host each peers on separate instances. *we used AWS EC2 only to replicate the issue, but the actual production environment is not using AWS. We are hosting each peers on the external data center so it shouldn't be the specific network platform issue). After you have the channel and peers set up, then one of peers in Org B has to be ""docker stop"" and ""docker restart"" and leave it for like 24 hours. then you will notice one or multiple peers in Org A being isolated(left out from current membership view) within 24 hours.

To explain more detailed setting we've got :

 

As I explained above, your network needs 2 Organizations, A and B(call each  OrgA and OrgB).

In OrgA, the number of peers are 4 and each peers docker container is located in *physically separate  machines*. The all host machines are Centos 7 and we already checkout every firewall and ports  reuse settings. For communication with OrgB, all peers in OrgA set to anchor peers. 

In OrgB, the number of peers is 2 and like OrgA, peers are in *physically separated  machines*. 

 
 # After setup 4 peers in OrgA and 2 peers in OrgB, also each peers should be in *physically separated  machines*. It means, each peers knows each other only by public IP address. 
 # Create a channel(we can call it channelA), and all peers join the channelA.
 # After setup all peers in OrgA and OrgB, check logs about membership view and all addresses of other peers are in the membership view of each peers except a peer's own self.
 # In OrgB, stop and start the peer container. Not remove container, just stop and start or restart command also fine.
 ## Peers in OrgA, You can see each peers' membership view changed. 
 # Leave the network for few hours, maybe more than 24 hours, a random peer in OrgA would start losing peers its membership view and finally, it cannot recover it and isolated on the network.

Additionally, below is my team's all testing settings.
 # We've tried both static gossip leader and also dynamic gossip leader. But it didn't affect anything.
 # All peers in OrgA are set to anchor peers.
 # we have tired both CORE_PEER_AUTOADDRESSDETECT=true and also  CORE_PEER_AUTOADDRESSDETECT=false. But it didn't affect anything.

Before the isolating issue occurs on the network, from peers in OrgA start changing its membership view to online and offline for peers in OrgB *repeatably,* even peers in OrgB are online (I also do ping test and telnet test).

 ;;;","28/Jun/19 1:48 PM;jooskim1;@[~ronenschafferibm] 

My team found out another information for you to solve this issue.

When a peer is getting isolated, the peer container has tons of 'ESTABLISHED' status tcp connections with other peers in the other organization - in this case, peers in OrgB.

My team uses following command, which gives the peer container's netstat.

*sudo nsenter -t \{docker container pid} -n netstat*

My team guesses the reason that the peer is getting isolated is the lack of usable sockets. From netstat in the container, because of repeated on and off membership changes as I reported on the above log, there is no socket in the container to connect with the other peers.

----- nsenter -t \{OrgA.PEER4.IP} -n netstat start

.

.

.

tcp 0 0 peer4:36452 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:47710 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:39592 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:38330 OrgB.PEER2.IP:7051 ESTABLISHED
tcp 0 0 peer4:34190 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:59208 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:42690 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:43232 OrgB.PEER2.IP:7051 ESTABLISHED
tcp 0 0 peer4:41352 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 1 peer4:42572 OrgB.PEER1.IP:7051 SYN_SENT
tcp 0 0 peer4:44140 OrgB.PEER2.IP:7051 ESTABLISHED
tcp 0 0 peer4:41916 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:34304 172.18.0.2:couchdb TIME_WAIT
tcp 0 0 peer4:38200 OrgB.PEER2.IP:7051 ESTABLISHED
tcp 0 0 peer4:35602 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:34925 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:39412 OrgB.PEER2.IP:7051 ESTABLISHED
tcp 0 0 peer4:41018 OrgB.PEER1.IP:7051 ESTABLISHED
tcp 0 0 peer4:38912 OrgB.PEER2.IP:7051 ESTABLISHED

.

.

.

----- nsenter -t \{docker.container.pid} -n netstat end-

 

 ;;;","02/Jul/19 5:44 PM;ronenschafferibm;[~jooskim1]
 That's a very interesting finding. I'd like to ask for more details the may help us:
 1. How many connections are established to each peer?
 2. Does the number of connections to each peer change over time?
 3. How do things look at the destination peers (i.e. OrgB.PEER1 and OrgB.PEER2)? Do they also show the same connections?

Anyway, I found a bug (FAB-15840) that might be related to the issue;;;","05/Jul/19 6:14 PM;vampire203;[~ronenschafferibm], I work with Jason. Here are the answers to your question:

1. Sometimes, the number of connection is greater on one peer or distributed equally on each peers. The thing is that when the peer is restarted, the number of connection resets and then increases gradually and the peer which got restarted oldest has the most number of connection. 

On our production environment here are the # connections currently:
 OrgA Peer1 : 7811 (docker container has been up for 5 days)
 OrgA Peer2 : 3250 (has been up for 2 days)
 OrgA Peer3 : 3390 (has been up for 2 days)
 OrgA Peer4 : 1458 (has been up for 26 hours)

2. The number of connection keep changes(increases/decreases) in short term, but in long term, it gradually increases.

3. Same thing happens on the destination peers as well. The connection gradually increases on the both peers.;;;","10/Jul/19 5:37 PM;ronenschafferibm;[~vampire203], Thanks for the additional info.
 I didn't manage to recreate this problem in my environments. Can you please supply a full log file of a peer with multiple connections issue?
 Also, please set the logging level of the gossip module to debug. That can be done by setting the following environment variable in the peer's container:

{code}
 FABRIC_LOGGING_SPEC=""gossip=DEBUG""
{code}

 [https://hyperledger-fabric.readthedocs.io/en/release-1.4/logging-control.html#logging-specification];;;","23/Jul/19 12:33 PM;jooskim1;[~ronenschafferibm]

Hi, I work with Sam, and I hope this additional information helps you to solve this issue.

The attachment is a gossip debug log you requested before.

[^gossip_on_off_debug.log];;;","04/Aug/19 2:19 AM;yacovm;Let's take a look at the log and see what's going on:

{code}
2019-07-22 10:02:34.945 UTC [gossip.comm] authenticateRemotePeer -> DEBU 5ad Authenticated 192.168.80.1:55336
2019-07-22 10:02:34.945 UTC [gossip.comm] GossipStream -> DEBU 5ae Servicing 192.168.80.1:55336
{code}

192.168.80.1 opened a gRPC stream to us and we can now receive point to point messages from it.
As a side note, the certificate of 192.168.0.1, (his friends call it ""exchange-peer-1""), says it belongs to a client OU: Subject: OU=client, CN=exchange-peer-1
It should belong to a peer OU... but let's put it aside.

{code}
2019-07-22 10:02:34.958 UTC [gossip.gossip] handleMessage -> DEBU 5af Entering, 192.168.80.1:55336 a35a23a18b31107e7041b3109673cca5d92fde68a2c3ce1968166f34d0a3c297 sent us GossipMessage: tag:EMPTY mem_req:<self_information:<payload:""\030\001*G\n6\n\022192.168.0.165:7053\032 \243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227\022\r\010\300\363\274\327\364\231\354\331\025\020\247\007"" signature:""0E\002!\000\243\020\235\307*\342,[\227\3115\260'=\360d\322\363\2632\234\310\337.h;,\242\333\2652\247\002 \032\330`\262\232\2368o\315T\030\007m\242\035\014\276\276\244\252\225Jm5\237+ ER<,\367"" > > , Envelope: 158 bytes, Signature: 0 bytes
2019-07-22 10:02:34.958 UTC [gossip.gossip] handleMessage -> DEBU 5b0 Exiting
2019-07-22 10:02:34.958 UTC [gossip.discovery] handleMsgFromComm -> DEBU 5b1 Got message: GossipMessage: tag:EMPTY mem_req:<self_information:<payload:""\030\001*G\n6\n\022192.168.0.165:7053\032 \243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227\022\r\010\300\363\274\327\364\231\354\331\025\020\247\007"" signature:""0E\002!\000\243\020\235\307*\342,[\227\3115\260'=\360d\322\363\2632\234\310\337.h;,\242\333\2652\247\002 \032\330`\262\232\2368o\315T\030\007m\242\035\014\276\276\244\252\225Jm5\237+ ER<,\367"" > > , Envelope: 158 bytes, Signature: 0 bytes
2019-07-22 10:02:34.958 UTC [gossip.gossip] ValidateAliveMsg -> DEBU 5b2 Fetched identity of [163 90 35 161 139 49 16 126 112 65 179 16 150 115 204 165 217 47 222 104 162 195 206 25 104 22 111 52 208 163 194 151] from identity store
{code}

The peer exchange-peer-1 sent us a membership request, and in the message it says about its own IP address: 
mem_req:<self_information:<payload:""\030\001*G\n6\n\022192.168.0.165:7053\032

This means that exchange-peer-1 tells us that its hostname is 192.168.0.165, but we got it from 192.168.80.1. 
Is it behind a NAT or some proxy? 

Another question would be - are you using TLS? If yes, then can you please show me the TLS server certificate of exchange-peer-1 ?

Moving on:

{code}
2019-07-22 10:02:34.959 UTC [gossip.discovery] handleAliveMessage -> DEBU 5b3 Entering GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:""192.168.0.165:7053"" pki_id:""\243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227"" > timestamp:<inc_num:1563787899989604800 seq_num:935 > > , Envelope: 75 bytes, Signature: 71 bytes
2019-07-22 10:02:34.959 UTC [gossip.discovery] resurrectMember -> DEBU 5b4 Entering, AliveMessage: GossipMessage: tag:EMPTY alive_msg:<membership:<endpoint:""192.168.0.165:7053"" pki_id:""\243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227"" > timestamp:<inc_num:1563787899989604800 seq_num:935 > > , Envelope: 75 bytes, Signature: 71 bytes t: {1563787899989604800 935 {} [] 0}
2019-07-22 10:02:34.959 UTC [gossip.discovery] resurrectMember -> DEBU 5b5 Exiting
2019-07-22 10:02:34.959 UTC [gossip.discovery] handleAliveMessage -> DEBU 5b6 Exiting
{code}

Our membership module (gossip.discovery) decided that it saw a new message with the highest timestamp it has seen so far, so it means that peer came back alive, so it resurrected it and moved it from the dead peer list to the alive peer list.

{code}
2019-07-22 10:02:34.960 UTC [gossip.discovery] sendMemResponse -> DEBU 5b7 Entering endpoint:""192.168.0.165:7053"" pki_id:""\243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227""
2019-07-22 10:02:34.960 UTC [gossip.comm] Send -> DEBU 5b8 Entering, sending GossipMessage: Channel: , nonce: 0, tag: EMPTY MembershipResponse with Alive: 3, Dead: 0, Envelope: 465 bytes, Signature: 0 bytes to  1 peers
2019-07-22 10:02:34.961 UTC [gossip.discovery] sendMemResponse -> DEBU 5b9 Exiting, replying with alive:<payload:""\030\001*H\n7\n\023kiesnet-peer-2:7051\032 \353\366\246QC\001_\376\330Y\361\261\276\003\0219\270\302\306\005\216\334)\232\260\007\304\035W\256\251*\022\r\010\340\311\220\215\247\231\354\331\025\020\323\006"" signature:""0E\002!\000\223\213\327\310C \335\331\365n\345\274c{\307\221\341\017/6~\020\033i0\255Q\340\034@\005\337\002 !V\273E\006T\260\340\333\003\201\027\236\316Z\211Z\363\227\324\306g\326\025\003\200\022\000~C\016\030"" > alive:<payload:""\030\001*G\n6\n\022192.168.0.165:7053\032 \243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227\022\r\010\300\363\274\327\364\231\354\331\025\020\247\007"" signature:""0E\002!\000\243\020\235\307*\342,[\227\3115\260'=\360d\322\363\2632\234\310\337.h;,\242\333\2652\247\002 \032\330`\262\232\2368o\315T\030\007m\242\035\014\276\276\244\252\225Jm5\237+ ER<,\367"" > alive:<payload:""\030\001*H\n7\n\023kiesnet-peer-1:7051\032 \313\005\206\255\026\""F\n\203F\275R\350\211:\202\213\n\232^\222\331zQ\372\t\r\361\366\260\342-\022\r\010\314\334\323\263\352\230\354\331\025\020\327\006"" signature:""0D\002 s\257\312\0315\017\020\t\310\032\000\3474\235\341\320\273\356\362\214\245\323w\300\233\250\212\224\254\371\212\026\002 -W~(\230-\3212'\001\177\320\r\250A\375\326k8t`\344\322\020qz\300\342\202\327\336\260"" >
2019-07-22 10:02:34.961 UTC [gossip.comm] sendToEndpoint -> DEBU 5ba Entering, Sending to 192.168.0.165:7053 , msg: GossipMessage: Channel: , nonce: 0, tag: EMPTY MembershipResponse with Alive: 3, Dead: 0, Envelope: 465 bytes, Signature: 0 bytes
2019-07-22 10:02:34.962 UTC [gossip.comm] sendToEndpoint -> DEBU 5bb Exiting
2019-07-22 10:02:34.962 UTC [gossip.discovery] handleMsgFromComm -> DEBU 5bc Exiting
{code}

After receiving the membership request, it sends back a membership response to the remote peer.

{code}
2019-07-22 10:02:35.813 UTC [gossip.channel] reportMembershipChanges -> INFO 5bd Membership view has changed. peers went online:  [[192.168.0.165:7053 ]] , current view:  [[192.168.0.165:7053 ] [kiesnet-peer-2:7051]]
{code}

After a second, the membership tracker wakes up and reports it noticed a membership change. The peer we're looking at its logs is kiesnet-peer-1, and it says: ""Hey, I know about kiesnet-peer-2 and also about 192.168.0.165:7053"".

{code}
2019-07-22 10:02:36.281 UTC [comm.grpc.server] 1 -> INFO 5c5 unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-07-22T10:02:38.28Z grpc.peer_address=192.168.80.1:55338 grpc.code=OK grpc.call_duration=125.3µs
{code}
exchange-peer-1 sent us a ping. I'd like to know why it did it... can you please give me logs of both exchange-peer-1 and this peer so I can cross reference? 

{code}
2019-07-22 10:02:36.293 UTC [gossip.comm] authenticateRemotePeer -> DEBU 5c6 Sending GossipMessage: tag:EMPTY conn:<pki_id:""\313\005\206\255\026\""F\n\203F\275R\350\211:\202\213\n\232^\222\331zQ\372\t\r\361\366\260\342-"" identity:""\n\007KIESNET\022\313\006-----BEGIN CERTIFICATE-----\nMIICQjCCAeigAwIBAgIUeFZ/JsDUhfmfL3PGq6Ad8FbnXuIwCgYIKoZIzj0EAwIw\nNDELMAkGA1UEBhMCS1IxEDAOBgNVBAoTB0tpZXNuZXQxEzARBgNVBAMTCmtpZXNu\nZXQtY2EwIBcNMTkwNzE3MDIwNTAwWhgPMjEwOTA2MjMwODMxMDBaMCoxDzANBgNV\nBAsTBmNsaWVudDEXMBUGA1UEAxMOa2llc25ldC1wZWVyLTEwWTATBgcqhkjOPQIB\nBggqhkjOPQMBBwNCAAQH+2mYIXRsl6bCkx6fSFe0sETR6JLLTm/FHnjhX/b8aa4J\nJUuvz0YoEcMf/Knf9AK+1LdPi6rOxOHO73xDSfAjo4HfMIHcMA4GA1UdDwEB/wQE\nAwIHgDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRUxk8iKION/jtEFVWssFw9t7Bk\nMDAfBgNVHSMEGDAWgBRyRkl7ClHuj0ByMS5xNV7kGsOe+jAZBgNVHREEEjAQgg5r\naWVzbmV0LXBlZXItMTBhBggqAwQFBgcIAQRVeyJhdHRycyI6eyJoZi5BZmZpbGlh\ndGlvbiI6IiIsImhmLkVucm9sbG1lbnRJRCI6ImtpZXNuZXQtcGVlci0xIiwiaGYu\nVHlwZSI6ImNsaWVudCJ9fTAKBggqhkjOPQQDAgNIADBFAiEA0M2Nwu/IaqiEFmuw\nzxQIu8G4MhIzt5MELJmLPa/aUxUCICDgZ3aBbVLXxo2EYkb4MtHjilcZpFPxelPP\nI0yaXM1R\n-----END CERTIFICATE-----\n"" > , Envelope: 897 bytes, Signature: 71 bytes to 192.168.80.1:55338
2019-07-22 10:02:36.295 UTC [gossip.comm] authenticateRemotePeer -> DEBU 5c7 Received pki_id:""\243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227"" identity:""\n\010EXCHANGE\022\317\006-----BEGIN CERTIFICATE-----\nMIICRTCCAeugAwIBAgIUfWAKZuKwPJ+marrkQlKY2eKmXHIwCgYIKoZIzj0EAwIw\nNDELMAkGA1UEBhMCS1IxEDAOBgNVBAoTB0tpZXNuZXQxEzARBgNVBAMTCmtpZXNu\nZXQtY2EwIBcNMTkwNzIyMDYzMjAwWhgPMjEwOTA2MjMwODMxMDBaMCsxDzANBgNV\nBAsTBmNsaWVudDEYMBYGA1UEAxMPZXhjaGFuZ2UtcGVlci0xMFkwEwYHKoZIzj0C\nAQYIKoZIzj0DAQcDQgAEgMljLTq4FV8jTDjhvDHOFFVa22AaztyPJYlso2BaUstg\n/KEiD3Ge8DSpCVK00zS9iEhtUzsyRupF3TvtdffVFaOB4TCB3jAOBgNVHQ8BAf8E\nBAMCB4AwDAYDVR0TAQH/BAIwADAdBgNVHQ4EFgQU2W2uujfsWn1cg4IyTDZsBsHQ\n7IMwHwYDVR0jBBgwFoAUckZJewpR7o9AcjEucTVe5BrDnvowGgYDVR0RBBMwEYIP\nZXhjaGFuZ2UtcGVlci0xMGIGCCoDBAUGBwgBBFZ7ImF0dHJzIjp7ImhmLkFmZmls\naWF0aW9uIjoiIiwiaGYuRW5yb2xsbWVudElEIjoiZXhjaGFuZ2UtcGVlci0xIiwi\naGYuVHlwZSI6ImNsaWVudCJ9fTAKBggqhkjOPQQDAgNIADBFAiEA+THz11pCuELy\nyk3SORnwB7MsERCstBQtj19HVgzJ8JYCIGDgyRTVCbzXBbQjIg43B40HuUV+0EIE\n7BCxKxveGzSX\n-----END CERTIFICATE-----\n""  from 192.168.80.1:55338
2019-07-22 10:02:36.297 UTC [gossip.comm] authenticateRemotePeer -> DEBU 5c8 Authenticated 192.168.80.1:55338
2019-07-22 10:02:36.297 UTC [gossip.comm] GossipStream -> DEBU 5c9 Servicing 192.168.80.1:55338
2019-07-22 10:02:36.297 UTC [gossip.comm] serviceConnection -> DEBU 5ca Closing reading from stream
2019-07-22 10:02:36.297 UTC [gossip.comm] func2 -> DEBU 5cb Client 192.168.80.1:55336  disconnected
2019-07-22 10:02:36.298 UTC [gossip.comm] writeToStream -> DEBU 5cc Closing writing to stream
2019-07-22 10:02:36.298 UTC [comm.grpc.server] 1 -> INFO 5cd streaming call completed grpc.service=gossip.Gossip grpc.method=GossipStream grpc.peer_address=192.168.80.1:55336 grpc.code=OK grpc.call_duration=1.3582301s
2019-07-22 10:02:36.299 UTC [gossip.comm] readFromStream -> DEBU 5ce a35a23a18b31107e7041b3109673cca5d92fde68a2c3ce1968166f34d0a3c297 canceling read because closing
2019-07-22 10:02:36.301 UTC [gossip.comm] func2 -> DEBU 5cf Client 192.168.80.1:55338  disconnected
2019-07-22 10:02:36.301 UTC [comm.grpc.server] 1 -> INFO 5d0 streaming call completed grpc.service=gossip.Gossip grpc.method=GossipStream grpc.peer_address=192.168.80.1:55338 grpc.code=OK grpc.call_duration=7.8589ms
2019-07-22 10:02:36.772 UTC [gossip.discovery] periodicalReconnectToDead -> DEBU 5d1 Sleeping 25s
{code}

The peer connected to us again, and we probably closed the already existing connection we had. I'm not sure though - why it happened. Seeing the logs on the other peer will help.

Next is a very strange scenario:

{code}
2019-07-22 10:02:36.814 UTC [gossip.comm] createConnection -> DEBU 5d4 Entering 192.168.0.165:7053 a35a23a18b31107e7041b3109673cca5d92fde68a2c3ce1968166f34d0a3c297
{code}

We're creating a connection to that peer, however:
{code}
2019-07-22 10:02:37.900 UTC [gossip.comm] authenticateRemotePeer -> DEBU 625 Sending GossipMessage: tag:EMPTY conn:<pki_id:""\313\005\206\255\026\""F\n\203F\275R\350\211:\202\213\n\232^\222\331zQ\372\t\r\361\366\260\342-"" identity:""\n\007KIESNET\022\313\006-----BEGIN CERTIFICATE-----\nMIICQjCCAeigAwIBAgIUeFZ/JsDUhfmfL3PGq6Ad8FbnXuIwCgYIKoZIzj0EAwIw\nNDELMAkGA1UEBhMCS1IxEDAOBgNVBAoTB0tpZXNuZXQxEzARBgNVBAMTCmtpZXNu\nZXQtY2EwIBcNMTkwNzE3MDIwNTAwWhgPMjEwOTA2MjMwODMxMDBaMCoxDzANBgNV\nBAsTBmNsaWVudDEXMBUGA1UEAxMOa2llc25ldC1wZWVyLTEwWTATBgcqhkjOPQIB\nBggqhkjOPQMBBwNCAAQH+2mYIXRsl6bCkx6fSFe0sETR6JLLTm/FHnjhX/b8aa4J\nJUuvz0YoEcMf/Knf9AK+1LdPi6rOxOHO73xDSfAjo4HfMIHcMA4GA1UdDwEB/wQE\nAwIHgDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRUxk8iKION/jtEFVWssFw9t7Bk\nMDAfBgNVHSMEGDAWgBRyRkl7ClHuj0ByMS5xNV7kGsOe+jAZBgNVHREEEjAQgg5r\naWVzbmV0LXBlZXItMTBhBggqAwQFBgcIAQRVeyJhdHRycyI6eyJoZi5BZmZpbGlh\ndGlvbiI6IiIsImhmLkVucm9sbG1lbnRJRCI6ImtpZXNuZXQtcGVlci0xIiwiaGYu\nVHlwZSI6ImNsaWVudCJ9fTAKBggqhkjOPQQDAgNIADBFAiEA0M2Nwu/IaqiEFmuw\nzxQIu8G4MhIzt5MELJmLPa/aUxUCICDgZ3aBbVLXxo2EYkb4MtHjilcZpFPxelPP\nI0yaXM1R\n-----END CERTIFICATE-----\n"" > , Envelope: 897 bytes, Signature: 71 bytes to 192.168.80.1:55342
2019-07-22 10:02:37.901 UTC [gossip.comm] authenticateRemotePeer -> DEBU 626 Received pki_id:""\243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227"" identity:""\n\010EXCHANGE\022\317\006-----BEGIN CERTIFICATE-----\nMIICRTCCAeugAwIBAgIUfWAKZuKwPJ+marrkQlKY2eKmXHIwCgYIKoZIzj0EAwIw\nNDELMAkGA1UEBhMCS1IxEDAOBgNVBAoTB0tpZXNuZXQxEzARBgNVBAMTCmtpZXNu\nZXQtY2EwIBcNMTkwNzIyMDYzMjAwWhgPMjEwOTA2MjMwODMxMDBaMCsxDzANBgNV\nBAsTBmNsaWVudDEYMBYGA1UEAxMPZXhjaGFuZ2UtcGVlci0xMFkwEwYHKoZIzj0C\nAQYIKoZIzj0DAQcDQgAEgMljLTq4FV8jTDjhvDHOFFVa22AaztyPJYlso2BaUstg\n/KEiD3Ge8DSpCVK00zS9iEhtUzsyRupF3TvtdffVFaOB4TCB3jAOBgNVHQ8BAf8E\nBAMCB4AwDAYDVR0TAQH/BAIwADAdBgNVHQ4EFgQU2W2uujfsWn1cg4IyTDZsBsHQ\n7IMwHwYDVR0jBBgwFoAUckZJewpR7o9AcjEucTVe5BrDnvowGgYDVR0RBBMwEYIP\nZXhjaGFuZ2UtcGVlci0xMGIGCCoDBAUGBwgBBFZ7ImF0dHJzIjp7ImhmLkFmZmls\naWF0aW9uIjoiIiwiaGYuRW5yb2xsbWVudElEIjoiZXhjaGFuZ2UtcGVlci0xIiwi\naGYuVHlwZSI6ImNsaWVudCJ9fTAKBggqhkjOPQQDAgNIADBFAiEA+THz11pCuELy\nyk3SORnwB7MsERCstBQtj19HVgzJ8JYCIGDgyRTVCbzXBbQjIg43B40HuUV+0EIE\n7BCxKxveGzSX\n-----END CERTIFICATE-----\n""  from 192.168.80.1:55342
2019-07-22 10:02:37.903 UTC [gossip.comm] authenticateRemotePeer -> DEBU 627 Authenticated 192.168.80.1:55342
{code}

The authentication begins only an entire second after. This implies that it took an entire second to issue a Ping RPC to the peer...

The next thing that happens, is that the remote peer also connects to us:

{code}
2019-07-22 10:02:38.326 UTC [comm.grpc.server] 1 -> INFO 62b unary call completed grpc.service=gossip.Gossip grpc.method=Ping grpc.request_deadline=2019-07-22T10:02:40.326Z grpc.peer_address=192.168.80.1:55344 grpc.code=OK grpc.call_duration=124.1µs
2019-07-22 10:02:38.333 UTC [gossip.comm] authenticateRemotePeer -> DEBU 62c Sending GossipMessage: tag:EMPTY conn:<pki_id:""\313\005\206\255\026\""F\n\203F\275R\350\211:\202\213\n\232^\222\331zQ\372\t\r\361\366\260\342-"" identity:""\n\007KIESNET\022\313\006-----BEGIN CERTIFICATE-----\nMIICQjCCAeigAwIBAgIUeFZ/JsDUhfmfL3PGq6Ad8FbnXuIwCgYIKoZIzj0EAwIw\nNDELMAkGA1UEBhMCS1IxEDAOBgNVBAoTB0tpZXNuZXQxEzARBgNVBAMTCmtpZXNu\nZXQtY2EwIBcNMTkwNzE3MDIwNTAwWhgPMjEwOTA2MjMwODMxMDBaMCoxDzANBgNV\nBAsTBmNsaWVudDEXMBUGA1UEAxMOa2llc25ldC1wZWVyLTEwWTATBgcqhkjOPQIB\nBggqhkjOPQMBBwNCAAQH+2mYIXRsl6bCkx6fSFe0sETR6JLLTm/FHnjhX/b8aa4J\nJUuvz0YoEcMf/Knf9AK+1LdPi6rOxOHO73xDSfAjo4HfMIHcMA4GA1UdDwEB/wQE\nAwIHgDAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRUxk8iKION/jtEFVWssFw9t7Bk\nMDAfBgNVHSMEGDAWgBRyRkl7ClHuj0ByMS5xNV7kGsOe+jAZBgNVHREEEjAQgg5r\naWVzbmV0LXBlZXItMTBhBggqAwQFBgcIAQRVeyJhdHRycyI6eyJoZi5BZmZpbGlh\ndGlvbiI6IiIsImhmLkVucm9sbG1lbnRJRCI6ImtpZXNuZXQtcGVlci0xIiwiaGYu\nVHlwZSI6ImNsaWVudCJ9fTAKBggqhkjOPQQDAgNIADBFAiEA0M2Nwu/IaqiEFmuw\nzxQIu8G4MhIzt5MELJmLPa/aUxUCICDgZ3aBbVLXxo2EYkb4MtHjilcZpFPxelPP\nI0yaXM1R\n-----END CERTIFICATE-----\n"" > , Envelope: 897 bytes, Signature: 70 bytes to 192.168.80.1:55344
2019-07-22 10:02:38.333 UTC [gossip.comm] authenticateRemotePeer -> DEBU 62d Received pki_id:""\243Z#\241\2131\020~pA\263\020\226s\314\245\331/\336h\242\303\316\031h\026o4\320\243\302\227"" identity:""\n\010EXCHANGE\022\317\006-----BEGIN CERTIFICATE-----\nMIICRTCCAeugAwIBAgIUfWAKZuKwPJ+marrkQlKY2eKmXHIwCgYIKoZIzj0EAwIw\nNDELMAkGA1UEBhMCS1IxEDAOBgNVBAoTB0tpZXNuZXQxEzARBgNVBAMTCmtpZXNu\nZXQtY2EwIBcNMTkwNzIyMDYzMjAwWhgPMjEwOTA2MjMwODMxMDBaMCsxDzANBgNV\nBAsTBmNsaWVudDEYMBYGA1UEAxMPZXhjaGFuZ2UtcGVlci0xMFkwEwYHKoZIzj0C\nAQYIKoZIzj0DAQcDQgAEgMljLTq4FV8jTDjhvDHOFFVa22AaztyPJYlso2BaUstg\n/KEiD3Ge8DSpCVK00zS9iEhtUzsyRupF3TvtdffVFaOB4TCB3jAOBgNVHQ8BAf8E\nBAMCB4AwDAYDVR0TAQH/BAIwADAdBgNVHQ4EFgQU2W2uujfsWn1cg4IyTDZsBsHQ\n7IMwHwYDVR0jBBgwFoAUckZJewpR7o9AcjEucTVe5BrDnvowGgYDVR0RBBMwEYIP\nZXhjaGFuZ2UtcGVlci0xMGIGCCoDBAUGBwgBBFZ7ImF0dHJzIjp7ImhmLkFmZmls\naWF0aW9uIjoiIiwiaGYuRW5yb2xsbWVudElEIjoiZXhjaGFuZ2UtcGVlci0xIiwi\naGYuVHlwZSI6ImNsaWVudCJ9fTAKBggqhkjOPQQDAgNIADBFAiEA+THz11pCuELy\nyk3SORnwB7MsERCstBQtj19HVgzJ8JYCIGDgyRTVCbzXBbQjIg43B40HuUV+0EIE\n7BCxKxveGzSX\n-----END CERTIFICATE-----\n""  from 192.168.80.1:55344
2019-07-22 10:02:38.334 UTC [gossip.comm] authenticateRemotePeer -> DEBU 62e Authenticated 192.168.80.1:55344
2019-07-22 10:02:38.334 UTC [gossip.comm] GossipStream -> DEBU 62f Servicing 192.168.80.1:55344
2019-07-22 10:02:38.334 UTC [gossip.comm] serviceConnection -> DEBU 630 Closing reading from stream
2019-07-22 10:02:38.334 UTC [gossip.comm] func2 -> DEBU 631 Client 192.168.80.1:55342  disconnected
2019-07-22 10:02:38.334 UTC [gossip.comm] writeToStream -> DEBU 632 Closing writing to stream
2019-07-22 10:02:38.334 UTC [comm.grpc.server] 1 -> INFO 633 streaming call completed grpc.service=gossip.Gossip grpc.method=GossipStream grpc.peer_address=192.168.80.1:55342 grpc.code=OK grpc.call_duration=434.2311ms
2019-07-22 10:02:38.334 UTC [gossip.comm] serviceConnection -> DEBU 634 Closing reading from stream
2019-07-22 10:02:38.334 UTC [gossip.comm] func2 -> DEBU 635 Client 192.168.80.1:55344  disconnected
{code}

Since we already had a connection to it, we close our current connection, and the current goroutines that service that connection, pick up the closing:
{code}
2019-07-22 10:02:38.334 UTC [gossip.comm] readFromStream -> DEBU 636 a35a23a18b31107e7041b3109673cca5d92fde68a2c3ce1968166f34d0a3c297 canceling read because closing
2019-07-22 10:02:38.334 UTC [comm.grpc.server] 1 -> INFO 637 streaming call completed grpc.service=gossip.Gossip grpc.method=GossipStream grpc.peer_address=192.168.80.1:55344 grpc.code=OK grpc.call_duration=1.8578ms
2019-07-22 10:02:38.335 UTC [gossip.comm] writeToStream -> DEBU 638 Closing writing to stream
2019-07-22 10:02:38.335 UTC [gossip.comm] readFromStream -> DEBU 639 a35a23a18b31107e7041b3109673cca5d92fde68a2c3ce1968166f34d0a3c297 canceling read because closing
{code}

It seemed we couldn't obtain a connection because the deadline has exceeded:

{code}
2019-07-22 10:02:39.816 UTC [gossip.comm] createConnection -> DEBU 63a Exiting
2019-07-22 10:02:39.817 UTC [gossip.comm] sendToEndpoint -> WARN 63b Failed obtaining connection for 192.168.0.165:7053, PKIid:a35a23a18b31107e7041b3109673cca5d92fde68a2c3ce1968166f34d0a3c297 reason: context deadline exceeded
2019-07-22 10:02:39.817 UTC [gossip.comm] sendToEndpoint -> DEBU 63c Exiting
{code}

If such a thing happens, we immediately mark the peer as offline and move it to the dead peer list:

{code}
2019-07-22 10:02:39.818 UTC [gossip.discovery] expireDeadMembers -> WARN 63d Entering [a35a23a18b31107e7041b3109673cca5d92fde68a2c3ce1968166f34d0a3c297]
{code}

Next, the membership tracker wakes up again and reports this:

{code}
2019-07-22 10:02:40.813 UTC [gossip.channel] reportMembershipChanges -> INFO 642 Membership view has changed. peers went offline:  [[192.168.0.165:7053 ]] , current view:  [[kiesnet-peer-2:7051]]
{code}

Is it possible to see logs of the 2 peers (this peer and the exachange peer) to see what's going on?
;;;","04/Aug/19 2:26 AM;yacovm;Another question would be - you said you have 2 peers in org B... where is the second peer of orgB ? Is it running? Is it possible that both peers have the same certificate or something? (pardon the question, I highly doubt that and only asking to make sure);;;","06/Aug/19 4:25 PM;jooskim1;Below is answers for your questions.
1. Is it behind a NAT or some proxy?
--> My test environment is not under NAT or proxy. 
2. Another question would be - are you using TLS? If yes, then can you please show me the TLS server certificate of exchange-peer-1 ?
--> All blockchain network is not using TLS certifications.

I give you logs as attachments.

[^org1.peer1.log] 

[^org1.peer2.log]

[^org2.peer1.log] 

[^org2.peer2.log]

 

 ;;;","06/Aug/19 5:04 PM;yacovm;{quote}--> All blockchain network is not using TLS certifications.
{quote}
 

If you're not using TLS then how do we see TLS certificates in the log?;;;","06/Aug/19 5:12 PM;jooskim1;Hi Yacov, thanks for the quick response. Where do you see the ""TLS certificates"" in the log? As i already mentioned earlier, i am reconfirming that we are not using any TLS on both the first and second orgs.;;;","06/Aug/19 5:31 PM;yacovm;Oh, my bad - I thought that we also had these certificates prints in the gRPC logs.

 

I'll look over your logs and analyze them when i have the time :);;;","25/Aug/19 2:09 AM;yacovm;[~jooskim1] - there are more than 4 peers in this story... we have the kiesnet peers (1,2) and *192.168.0.169:7051* and *192.168.0.169:8051*. At the same time we have some *192.168.0.169:7053* which none of the 4 logs show. 

 

the logs of *org1.peer2* end at *05:31:45* and those of *org2.peer2* start at *05:28:38* and end at *05:33:00* 

Those of *17642_org1.peer1.log* start at *04:46:36* and end at *05:31:50* ... 

 

Also, seems like only the 2nd organization has debug logs enabled.

 

Is it possible to get all the logs of all peers, in debug level, and when they are started at the same time?

 

 ;;;","03/Sep/19 4:56 PM;jooskim1;when we tried to reproduce the issue to provide you the log files again, we realize that the steps to reproduce the issue was totally wrong.
 Here's the new steps to reproduce the issue:

Below is my environment on AWS (centos7)
 1. Prepare a network with org1 and org2
 * org1 - 2 peer instances 1 solo orderer instances. 2 peers are anchor of org1. bootstrapped each other.
 * org2 - 1 peer instance. no anchor.
 2. Create a channel and join peers on org1 to the channel.
 * Also update the channel for anchor peers information.
 3. Create peer container on org2 and join the channel.
 4. Down the peer container on org2(completely remove the peer, not just stopping the container). 
 5. Enroll the peer msp again in org2. (that means peer on org2 is using different MSP this time)
 6. Create peer container on org2 and join the channel again.

so, org2-peer1 has joined the channel twice with different MSPs each time.
 And it seems peers on org1 are looking for all the pkids even though the first pkid on org2 must expire at some point.
 as a result, org2-peer1 keep goes online/offline(from org1 peers) and peers in org1 gets isolated after certain period of time.

I attached logs from my environment with DEBUG and INFO log level. [^logs.zip]

I also clean up duplicated log files I uploaded before.;;;","03/Sep/19 5:19 PM;yacovm;what do you mean by: "" Enroll the peer msp again in org2. (that means peer on org2 is using different MSP this time)"" ?

You create a peer in org2 and join it to the channel, then bring it down, and you then bring it up again but with a different certificate but the MSP is still the org2 MSP, no?;;;","03/Sep/19 7:08 PM;jooskim1;You are exactly right. sorry for the confusion. I meant “MSP directory” or certificate.

Until today, we thought only the disconnection / reconnection on org2 peer caused the issue, but we were wrong. It was the different certificate on the same IP address.

So, if a peer in org2 is up again on the same IP address with different certificate, there are more than one PKIid on the same IP address, and that is the moment where the membership view online/offline of the org2 peer happening repeatedly on peers of org1. For all the PKIids, the anchor peers repeatedly/infinitely try to reconnect the grpc to the membership members, and it keep consumes the local ports which causes the peer isolation problem.


Thus, we think it may resolve the issue if the old PKIids are not being searched if the new PKIid(new certificate) is up on the same IP address.

Here's the log files again : [^logs.zip]

 ;;;","03/Sep/19 7:23 PM;yacovm;Why are you enrolling the peer again, and not re-using the same certificate ? Because the certificate is on the peer itself and you have no access to it?

and why are you using solo orderer? you should use Raft instead, even for a single node;;;","03/Sep/19 7:35 PM;jooskim1;[~yacovm], 

Because we didn’t make the backup of the original certificate when we were brining down the peer on org2, so we had to re-enroll from fabric-ca and get the new certificate to bring the peer up again. Solo or Raft do not matter. We tried both and it causes the same issue.;;;","24/Sep/19 11:10 PM;jyellick;Is this still an issue? Or has this been resolved?;;;","23/Dec/19 9:38 PM;Gaurang;We too got the same issue while joining new org to the existing network. 

 ;;;","14/Feb/20 11:23 PM;mplisov;Can we have problems with gossip or discovery when two peers share the same IP address but different external endpoint fqdn (peer1.org1.example.com:7051 and peer1.org2.example.com:7061 both same IP)?

 ;;;","14/Feb/20 11:31 PM;yacovm;If they are different organizations then if they have the same internal IP address it's fine because they can never reach each other with the internal IP address.

 

Additionally, every other peer is either in one of these 2 orgs, or in some third org, so it can only see and know about at most one of the internal IP addresses (or neither);;;",,,,,,,,,,,,,,,
Consenter for channel exiting,FAB-15558,40165,,Bug,Returned,FAB,Fabric,software,denyeart,,,High,,,Rajatsharma,Rajatsharma,27/May/19 4:42 AM,12/Jun/19 9:19 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,1,,,,,,"We have a Fabric v1.2 network with 4 Kafka and 3 Zookeepers. We were performing automated bulk testing on one channel. There was some issue of space so we had upgraded the servers, and had restarted the servers. After some time the whole fabric network was working fine but that channel was not working. 

With the onset of this issue we started encountering these logs in orderer: 
{code:java}
2019-05-16 21:55:02.537 UTC [orderer/consensus/kafka] processMessagesToBlocks -> WARN 0f1 [channel: mychannel] got right time-to-cut message (for block 25641), no pending requests though; this might indicate a bug
2019-05-16 21:55:02.537 UTC [orderer/consensus/kafka] processMessagesToBlocks -> CRIT 0f2 [channel: mychannel] Consenter for channel exiting
{code}
 After which these logs started repeating in orderer: 
{code:java}
2019-05-16 21:03:42.737 UTC [common/deliver] Handle -> WARN 49e Error reading from 10.0.0.9:36274: rpc error: code = Canceled desc = context canceled
2019-05-16 21:03:52.746 UTC [common/deliver] deliverBlocks -> WARN 49f [channel: mychannel] Rejecting deliver request for <IP_ADRESS> because of consenter error
{code}
 And in the peer: 
{code:java}
2019-05-16 21:04:52.779 UTC [blocksProvider] DeliverBlocks -> WARN 453 [mychannel] Got error &{SERVICE_UNAVAILABLE}{code}
 On inspecting this issue a bit more in the Kafka we found that Kafka has moved it’s offset from 0 and even cleared some logs: 
{code:java}
INFO Incrementing log start offset of partition mychannel-0 to 30457 in dir /tmp/kafka-logs (kafka.log.Log)
INFO Cleared earliest 0 entries from epoch cache based on passed offset 30457 leaving 6 in EpochFile for partition mychannel-0 (kafka.server.epoch.LeaderEpochFileCache)
INFO Updated PartitionLeaderEpoch. New: {epoch:13, offset:8621}, Current: {epoch:12, offset8618} for Partition: mychannel1-0. Cache now contains 5 entries. (kafka.server.epoch.LeaderEpochFileCache)
INFO [GroupMetadataManager brokerId=1] Removed 0 expired offsets in 0 milliseconds. (kafka.coordinator.group.GroupMetadataManager)
INFO Found deletable segments with base offsets [0,4883,7464,22368,25071,26892] due to log start offset 30457 breach (kafka.log.Log)
INFO Scheduling log segment 0 for log mychannel-0 for deletion. (kafka.log.Log)
INFO Scheduling log segment 4883 for log mychannel-0 for deletion. (kafka.log.Log)
INFO Scheduling log segment 7464 for log mychannel-0 for deletion. (kafka.log.Log)
INFO Scheduling log segment 22368 for log mychannel-0 for deletion. (kafka.log.Log)
INFO Scheduling log segment 25071 for log mychannel-0 for deletion. (kafka.log.Log)
INFO Scheduling log segment 26892 for log mychannel-0 for deletion. (kafka.log.Log)
INFO Deleting segment 0 from log mychannel-0. (kafka.log.Log)
INFO Deleting segment 4883 from log mychannel-0. (kafka.log.Log)
INFO Deleting segment 7464 from log mychannel-0. (kafka.log.Log)
INFO Deleting segment 22368 from log mychannel-0. (kafka.log.Log)
INFO Deleting segment 25071 from log mychannel-0. (kafka.log.Log)
INFO Deleting segment 26892 from log mychannel-0. (kafka.log.Log)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000026892.index.deleted (kafka.log.OffsetIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000022368.index.deleted (kafka.log.OffsetIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000026892.timeindex.deleted (kafka.log.TimeIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000022368.timeindex.deleted (kafka.log.TimeIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000025071.index.deleted (kafka.log.OffsetIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000000000.index.deleted (kafka.log.OffsetIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000007464.index.deleted (kafka.log.OffsetIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000004883.index.deleted (kafka.log.OffsetIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000025071.timeindex.deleted (kafka.log.TimeIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000000000.timeindex.deleted (kafka.log.TimeIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000007464.timeindex.deleted (kafka.log.TimeIndex)
INFO Deleting index /tmp/kafka-logs/mychannel-0/00000000000000004883.timeindex.deleted (kafka.log.TimeIndex)
{code}
 We’ve still not figured out why did Kafka clear it’s log when we had set KAFKA_LOG_RETENTION_MS=-1, This was the docker-compose for kafka: 
{code:java}
kafka0:
       image: hyperledger/fabric-kafka:amd64-0.4.13
       container_name: kafka0
       environment:
           - KAFKA_LOG_RETENTION_MS=-1
           - KAFKA_MESSAGE_MAX_BYTES=103809024
           - KAFKA_REPLICA_FETCH_MAX_BYTES=103809024
           - KAFKA_BROKER_ID=0
           - KAFKA_ZOOKEEPER_CONNECT=zookeeper0:2181,zookeeper1:2181,zookeeper2:2181
           - KAFKA_UNCLEAN_LEADER_ELECTION_ENABLE=false
           - KAFKA_DEFAULT_REPLICATION_FACTOR=3
           - KAFKA_MIN_INSYNC_REPLICAS=2
       ports:
           - 9000:9092
       networks:
         - byfn
{code}
 The thing is now in this condition if we spawn a new orderer then it looks for blocks from 0 but it is getting stuck at 5231, while old orderer is looking for 25641 which is also causing an error. And moreover when we had mentioned KAFKA_LOG_RETENTION_MS=-1, still Kafka has cleared the logs.

 We had checked block information on peer then we encountered these:
{code:java}
{""height"":25641,""currentBlockHash"":""BaUHJKTuPH2ND8MYadbnumj0yxjQe8jkjnhxIW/n5Rk="",""previousBlockHash"":""1RDhRtlcXkdadHu7GDg/lJWzTeh4oOtUipGzHaemCos=""}`{code}
 We’re not able to find a way to use that channel again.",,guoger,HoneyShah,Rajatsharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/May/19 4:44 PM;Rajatsharma;Kafka-Send.log;https://jira.hyperledger.org/secure/attachment/17268/Kafka-Send.log","27/May/19 4:44 PM;Rajatsharma;kafka-config.txt;https://jira.hyperledger.org/secure/attachment/17269/kafka-config.txt",,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pcs:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,HoneyShah,Rajatsharma,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jun/19 11:11 AM;guoger;[~Rajatsharma] thanks for reporting this. As we chatted in RC, I believe this might be a problem in Kafka. Can you pls provide steps to reproduce this error?;;;","12/Jun/19 9:19 PM;Rajatsharma;I've elaborated the whole issue, here this issue is not getting replicated but we suspect this has occurred as for more than 60 seconds our in-sync Kafka's were down. Still forwarding this issue to Kafka community, might help. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Dead link in documentation about reporting bugs,FAB-15559,40167,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yukkyhira,dakshshah,dakshshah,27/May/19 5:44 PM,07/Jun/19 10:06 PM,28/Oct/23 3:08 AM,06/Jun/19 12:17 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-docs,,,,,,0,,,,,,"There is a link in [https://hyperledger-fabric.readthedocs.io/en/latest/CONTRIBUTING.html#reporting-bugs], to [https://wiki.hyperledger.org/security] but the page does not exist ",,dakshshah,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pd8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dakshshah,yukkyhira,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/May/19 11:50 AM;yukkyhira;I think ""https://wiki.hyperledger.org/display/HYP/Security"" is the correct URL.

Could anybody confirm this?;;;","30/May/19 12:30 PM;yukkyhira;[https://chat.hyperledger.org/channel/fabric?msg=W6faYrCqJWzjCfaDP]

I have feedback of the correct URL as follow

https://wiki.hyperledger.org/display/HYP/Defect+Response;;;","31/May/19 4:24 PM;yukkyhira;[https://gerrit.hyperledger.org/r/c/fabric/+/31655];;;","06/Jun/19 5:58 PM;dakshshah;I am not able to see the changes on the website yet, will they be published later?;;;","07/Jun/19 10:06 PM;yukkyhira;Dead link was fixed on the website as of today.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unused docker compose file in `orderer/common/server`,FAB-15560,40168,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,27/May/19 10:09 PM,28/May/19 9:44 PM,28/Oct/23 3:08 AM,28/May/19 9:44 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"the docker compose file was used for orderer benchmark test, which was removed.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pdg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/May/19 10:12 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31558;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove lscc cache,FAB-15561,40170,12402,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,28/May/19 1:30 AM,12/Nov/19 4:50 AM,28/Oct/23 3:08 AM,12/Nov/19 4:50 AM,,,,,,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pdw:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
convert state db cache statistics to metrics,FAB-15562,40171,,Story,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,28/May/19 3:04 AM,17/Mar/20 1:22 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-103,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-14513,,,No,,Unset,No,,,"1|i00wur:0if",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Stop using real timer for eviction suspector in Raft chain,FAB-15563,40172,,Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,,guoger,guoger,28/May/19 4:13 PM,28/May/19 4:16 PM,28/Oct/23 3:08 AM,,v1.4.1,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"Eviction Suspector currently uses real timer to schedule suspicion check, see [this|https://github.com/hyperledger/fabric/blob/98f61f76c1e23054736fa0ef71f7fac4cea02043/orderer/consensus/etcdraft/util.go#L560]

It is hard to write deterministic UT for chain and suspector together, since chain is using fake clock.

Also, when an UT is slow (typically due to slow disk write), an suspicion may be unexpectedly triggered, which calls block puller. If the chain UT happens to assert on the number of block puller call counts, then it's flaky. For [example|https://github.com/hyperledger/fabric/blob/98f61f76c1e23054736fa0ef71f7fac4cea02043/orderer/consensus/etcdraft/chain_test.go#L3171]

opinions? [~yacovm] [~jyellick]",,guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pec:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/May/19 4:16 PM;yacovm;yeah... i agree, we can inject the time channel from outside.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peers randomly go offline permanently.,FAB-15564,40173,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,naaman,NN77,NN77,28/May/19 5:38 PM,17/Jul/19 8:43 PM,28/Oct/23 3:08 AM,17/Jul/19 8:28 PM,v1.4.0,,,,,,,,,,,,,,,,,fabric-gossip,fabric-peer,,,,,6,gossip,,,,,"Hello.

I have HLF network with 14 peers on openshift cluster. I noticed that some peers go offline and do not recover from this state. Howewer they are available on cluster network (I can telnet on their port and launch chaincode). But when I ask all peers with discover tool - it cannot connect to offline peers.

 

discover messages:
{code:java}
2019-05-27 15:32:42.248 UTC [bccsp] initBCCSP -> DEBU 001 Initialize BCCSP [SW]
2019-05-27 15:32:42.258 UTC [grpc] DialContext -> DEBU 002 parsed scheme: """"
2019-05-27 15:32:42.258 UTC [grpc] DialContext -> DEBU 003 scheme """" not registered, fallback to default scheme
2019-05-27 15:32:42.258 UTC [grpc] watcher -> DEBU 004 ccResolverWrapper: sending new addresses to cc: [{peer0-bch-org1:7051 0  <nil>}]
2019-05-27 15:32:42.258 UTC [grpc] switchBalancer -> DEBU 005 ClientConn switching balancer to ""pick_first""
2019-05-27 15:32:42.258 UTC [grpc] HandleSubConnStateChange -> DEBU 006 pickfirstBalancer: HandleSubConnStateChange: 0xc00020e470, CONNECTING
2019-05-27 15:32:42.260 UTC [grpc] HandleSubConnStateChange -> DEBU 007 pickfirstBalancer: HandleSubConnStateChange: 0xc00020e470, READY
failed connecting to peer0-bch-org1:7051: discovery service refused our Request: rpc error: code = DeadlineExceeded desc = context deadline exceeded
{code}
offline peer log:
{code:java}
2019-05-27 12:56:59.317 UTC [comm.grpc.server] 1 -> INFO d3aaf unary call completed {""grpc.start_time"": ""2019-05-27T12:56:59.317Z"", ""grpc.service"": ""gossip.Gossip"", ""grpc.method"": ""Ping"", ""grpc.request_deadline"": ""2019-05-27T12:57:01.317Z"", ""grpc.peer_address"": ""10.130.2.97:33488"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""49.388µs""}
2019-05-27 12:56:59.328 UTC [comm.grpc.server] 1 -> INFO d3ab0 unary call completed {""grpc.start_time"": ""2019-05-27T12:56:59.328Z"", ""grpc.service"": ""gossip.Gossip"", ""grpc.method"": ""Ping"", ""grpc.request_deadline"": ""2019-05-27T12:57:01.328Z"", ""grpc.peer_address"": ""10.130.1.246:54236"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""54.053µs""}
2019-05-27 12:57:16.429 UTC [gossip.channel] reportMembershipChanges -> INFO d3ab1 Membership view has changed. peers went offline:  [[peer0-bch-org2:7051 ] [peer0-bch-org3:7051 ]] , current view:  [[peer0-bch-org4:7051 ] [peer0-bch-org14:7051 ] [peer0-bch-org5:7051 ] [peer0-bch-org6:7051 ] [peer0-bch-org7:7051 ] [peer0-bch-org8:7051 ] [peer0-bch-org9:7051 ] [peer0-bch-org10:7051 ] [peer0-bch-org11:7051 ] [peer0-bch-org12:7051 ] [peer0-bch-org13:7051 ]]
2019-05-27 12:57:20.523 UTC [comm.grpc.server] 1 -> INFO d3ab2 unary call completed {""grpc.start_time"": ""2019-05-27T12:57:20.523Z"", ""grpc.service"": ""gossip.Gossip"", ""grpc.method"": ""Ping"", ""grpc.request_deadline"": ""2019-05-27T12:57:22.523Z"", ""grpc.peer_address"": ""10.129.3.88:49544"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""51.024µs""}
2019-05-27 12:57:21.429 UTC [gossip.channel] reportMembershipChanges -> INFO d3ab3 Membership view has changed. peers went offline:  [[peer0-bch-org8:7051 ]] , current view:  [[peer0-bch-org5:7051 ] [peer0-bch-org4:7051 ] [peer0-bch-org14:7051 ] [peer0-bch-org6:7051 ] [peer0-bch-org7:7051 ] [peer0-bch-org12:7051 ] [peer0-bch-org9:7051 ] [peer0-bch-org10:7051 ] [peer0-bch-org11:7051 ] [peer0-bch-org13:7051 ]]
2019-05-27 12:57:24.265 UTC [comm.grpc.server] 1 -> INFO d3ab4 unary call completed {""grpc.start_time"": ""2019-05-27T12:57:24.265Z"", ""grpc.service"": ""gossip.Gossip"", ""grpc.method"": ""Ping"", ""grpc.request_deadline"": ""2019-05-27T12:57:26.265Z"", ""grpc.peer_address"": ""10.129.3.73:45932"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""73.435µs""}
2019-05-27 12:57:24.291 UTC [comm.grpc.server] 1 -> INFO d3ab5 unary call completed {""grpc.start_time"": ""2019-05-27T12:57:24.291Z"", ""grpc.service"": ""gossip.Gossip"", ""grpc.method"": ""Ping"", ""grpc.request_deadline"": ""2019-05-27T12:57:26.291Z"", ""grpc.peer_address"": ""10.130.2.98:41798"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""61.923µs""}
2019-05-27 12:57:26.429 UTC [gossip.channel] reportMembershipChanges -> INFO d3ab6 Membership view has changed. peers went offline:  [[peer0-bch-org4:7051 ] [peer0-bch-org11:7051 ] [peer0-bch-org13:7051 ]] , current view:  [[peer0-bch-org5:7051 ] [peer0-bch-org14:7051 ] [peer0-bch-org6:7051 ] [peer0-bch-org7:7051 ] [peer0-bch-org10:7051 ] [peer0-bch-org12:7051 ] [peer0-bch-org9:7051 ]]
2019-05-27 12:57:31.429 UTC [gossip.channel] reportMembershipChanges -> INFO d3ab7 Membership view has changed. peers went offline:  [[peer0-bch-org14:7051 ] [peer0-bch-org7:7051 ]] , current view:  [[peer0-bch-org5:7051 ] [peer0-bch-org6:7051 ] [peer0-bch-org12:7051 ] [peer0-bch-org9:7051 ] [peer0-bch-org10:7051 ]]
2019-05-27 12:57:41.429 UTC [gossip.channel] reportMembershipChanges -> INFO d3ab8 Membership view has changed. peers went offline:  [[peer0-bch-org12:7051 ] [peer0-bch-org10:7051 ]] , current view:  [[peer0-bch-org9:7051 ] [peer0-bch-org5:7051 ] [peer0-bch-org6:7051 ]]
2019-05-27 12:57:51.429 UTC [gossip.channel] reportMembershipChanges -> INFO d3ab9 Membership view has changed. peers went offline:  [[peer0-bch-org5:7051 ] [peer0-bch-org6:7051 ] [peer0-bch-org9:7051 ]] , current view:  []
2019-05-27 13:00:03.314 UTC [comm.grpc.server] 1 -> INFO d3aba unary call completed {""grpc.start_time"": ""2019-05-27T13:00:03.314Z"", ""grpc.service"": ""discovery.Discovery"", ""grpc.method"": ""Discover"", ""grpc.request_deadline"": ""2019-05-27T13:00:13.311Z"", ""grpc.peer_address"": ""10.128.2.45:44750"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""777.351µs""}
2019-05-27 13:15:02.993 UTC [comm.grpc.server] 1 -> INFO d3abb unary call completed {""grpc.start_time"": ""2019-05-27T13:15:02.992Z"", ""grpc.service"": ""discovery.Discovery"", ""grpc.method"": ""Discover"", ""grpc.request_deadline"": ""2019-05-27T13:15:12.988Z"", ""grpc.peer_address"": ""10.128.2.45:45004"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""701.159µs""}
2019-05-27 13:30:02.610 UTC [comm.grpc.server] 1 -> INFO d3abc unary call completed {""grpc.start_time"": ""2019-05-27T13:30:02.609Z"", ""grpc.service"": ""discovery.Discovery"", ""grpc.method"": ""Discover"", ""grpc.request_deadline"": ""2019-05-27T13:30:12.606Z"", ""grpc.peer_address"": ""10.128.2.45:45394"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""702.133µs""}
2019-05-27 13:45:03.262 UTC [comm.grpc.server] 1 -> INFO d3abd unary call completed {""grpc.start_time"": ""2019-05-27T13:45:03.261Z"", ""grpc.service"": ""discovery.Discovery"", ""grpc.method"": ""Discover"", ""grpc.request_deadline"": ""2019-05-27T13:45:13.258Z"", ""grpc.peer_address"": ""10.128.2.45:45678"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""640.234µs""}
{code}
This happens when peers are idle without any writes to blockchain.  Is there any opportunity to debug gossip, discovery? What causes this?

 

After restarting pod it works okay for some time.",,jooskim1,kit,naaman,NN77,nyet,seokm0,vampire203,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15840,,,,,,FAB-15557,,,,FAB-15840,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pek:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jooskim1,kit,naaman,NN77,nyet,seokm0,vampire203,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/May/19 8:46 PM;vampire203;hey Nikolay, we also have the similar issue and reported on FAB-15557 It may be different to your case, but see if you can find any similarities on the problem;;;","31/May/19 5:40 PM;NN77;Hello, Sam! I will look through your case!

{color:#FF0000}Some additional information!{color}

I have mentioned that restart of offline peer pod helps. But there is one case - this pod starts working after THREE restarts. 

Working peer starts working immediately after restart.

 

I will collect logs when problem repeats.

 ;;;","03/Jun/19 4:51 PM;NN77;{noformat}
*no* further _formatting_ is done here{noformat}
So. When I delete failed peer pod:

It tries to start two times with following error:

 
{code:java}
2019-06-03 07:29:48.367 UTC [nodeCmd] serve -> INFO 001 Starting peer:
 Version: 1.4.0
 Commit SHA: d700b43
 Go version: go1.11.1
 OS/Arch: linux/amd64
 Chaincode:
  Base Image Version: 0.4.14
  Base Docker Namespace: hyperledger
  Base Docker Label: org.hyperledger.fabric
  Docker Namespace: hyperledger
2019-06-03 07:29:48.368 UTC [ledgermgmt] initialize -> INFO 002 Initializing ledger mgmt
2019-06-03 07:29:48.368 UTC [kvledger] NewProvider -> INFO 003 Initializing ledger provider
panic: Error opening leveldb: resource temporarily unavailable
goroutine 1 [running]:
github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).Open(0xc00005a980)
        /opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:79 +0x271
github.com/hyperledger/fabric/core/ledger/kvledger.openIDStore(0xc000196f40, 0x36, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:267 +0x10e
github.com/hyperledger/fabric/core/ledger/kvledger.NewProvider(0x10b0200, 0x1f51e20, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:60 +0x77
github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize(0xc00005a840)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:68 +0x304
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:52 +0x2a
sync.(*Once).Do(0x1f51ef8, 0xc0002b7520)
        /opt/go/src/sync/once.go:44 +0xb3
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize(0xc00005a840)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:51 +0x55
github.com/hyperledger/fabric/peer/node.serve(0x1f51e20, 0x0, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:172 +0x56f
github.com/hyperledger/fabric/peer/node.glob..func1(0x1e3fbe0, 0x1f51e20, 0x0, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:119 +0x9c
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x1e3fbe0, 0x1f51e20, 0x0, 0x0, 0x1e3fbe0, 0x1f51e20)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x1e40300, 0x8, 0x0, 0x1e3f4c0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x1e40300, 0xc0004d9f40, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b
main.main()
        /opt/gopath/src/github.com/hyperledger/fabric/peer/main.go:53 +0x2f7
{code}
Third time it starts with following logs:

 

 

 
{code:java}
2019-06-03 07:30:17.376 UTC [nodeCmd] serve -> INFO 001 Starting peer:
 Version: 1.4.0
 Commit SHA: d700b43
 Go version: go1.11.1
 OS/Arch: linux/amd64
 Chaincode:
 Base Image Version: 0.4.14
 Base Docker Namespace: hyperledger
 Base Docker Label: org.hyperledger.fabric
 Docker Namespace: hyperledger
2019-06-03 07:30:17.378 UTC [ledgermgmt] initialize -> INFO 002 Initializing ledger mgmt
2019-06-03 07:30:17.378 UTC [kvledger] NewProvider -> INFO 003 Initializing ledger provider
2019-06-03 07:30:17.574 UTC [kvledger] NewProvider -> INFO 004 ledger provider Initialized
2019-06-03 07:30:17.735 UTC [ledgermgmt] initialize -> INFO 005 ledger mgmt initialized
2019-06-03 07:30:17.735 UTC [peer] func1 -> INFO 006 Auto-detected peer address: 10.129.1.67:7051
2019-06-03 07:30:17.735 UTC [peer] func1 -> INFO 007 Auto-detect flag is set, returning 10.129.1.67:7051
2019-06-03 07:30:17.735 UTC [peer] func1 -> INFO 008 Auto-detected peer address: 10.129.1.67:7051
2019-06-03 07:30:17.735 UTC [peer] func1 -> INFO 009 Auto-detect flag is set, returning 10.129.1.67:7051
2019-06-03 07:30:17.737 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 00a Entering computeChaincodeEndpoint with peerHostname: 10.129.1.67
2019-06-03 07:30:17.737 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 00b Exit with ccEndpoint: 10.129.1.67:7052
2019-06-03 07:30:17.737 UTC [nodeCmd] createChaincodeServer -> WARN 00c peer.chaincodeListenAddress is not set, using 10.129.1.67:7052
2019-06-03 07:30:17.738 UTC [sccapi] registerSysCC -> INFO 00d system chaincode lscc(github.com/hyperledger/fabric/core/scc/lscc) registered
2019-06-03 07:30:17.738 UTC [sccapi] registerSysCC -> INFO 00e system chaincode cscc(github.com/hyperledger/fabric/core/scc/cscc) registered
2019-06-03 07:30:17.738 UTC [sccapi] registerSysCC -> INFO 00f system chaincode qscc(github.com/hyperledger/fabric/core/scc/qscc) registered
2019-06-03 07:30:17.738 UTC [sccapi] registerSysCC -> INFO 010 system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle,true) disabled
2019-06-03 07:30:17.740 UTC [gossip.service] func1 -> INFO 011 Initialize gossip with endpoint peer0-bch-org1:7051 and bootstrap set [peer0-bch-org1:7051]
2019-06-03 07:30:17.743 UTC [gossip.gossip] NewGossipService -> INFO 012 Creating gossip service with self membership of Endpoint: peer0-bch-org1:7051, InternalEndpoint: peer0-bch-org1:7051, PKI-ID: 52e1b00e2a43eadcb583ae4fa0a79f79b5ad597ecfe5b5a507d728bc89a619b0, Metadata:
2019-06-03 07:30:17.744 UTC [gossip.gossip] start -> INFO 013 Gossip instance peer0-bch-org1:7051 started
2019-06-03 07:30:17.745 UTC [sccapi] deploySysCC -> INFO 014 system chaincode lscc/(github.com/hyperledger/fabric/core/scc/lscc) deployed
2019-06-03 07:30:17.745 UTC [cscc] Init -> INFO 015 Init CSCC
2019-06-03 07:30:17.745 UTC [sccapi] deploySysCC -> INFO 016 system chaincode cscc/(github.com/hyperledger/fabric/core/scc/cscc) deployed
2019-06-03 07:30:17.745 UTC [qscc] Init -> INFO 017 Init QSCC
2019-06-03 07:30:17.745 UTC [sccapi] deploySysCC -> INFO 018 system chaincode qscc/(github.com/hyperledger/fabric/core/scc/qscc) deployed
2019-06-03 07:30:17.745 UTC [sccapi] deploySysCC -> INFO 019 system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle) disabled
2019-06-03 07:30:17.746 UTC [nodeCmd] serve -> INFO 01a Deployed system chaincodes
2019-06-03 07:30:17.752 UTC [peer] Initialize -> INFO 01b Loading chain my_channel
2019-06-03 07:30:17.752 UTC [ledgermgmt] OpenLedger -> INFO 01c Opening ledger with id = my_channel
2019-06-03 07:30:17.796 UTC [ledgermgmt] OpenLedger -> INFO 01d Opened ledger with id = my_channel
2019-06-03 07:30:17.858 UTC [gossip.gossip] JoinChan -> INFO 01e Joining gossip network of channel my_channel with 16 organizations
2019-06-03 07:30:17.858 UTC [gossip.gossip] learnAnchorPeers -> INFO 01f Learning about the configured anchor peers of bch2MSP for channel my_channel : [{peer0-bch-org2 7051}]
 .........
2019-06-03 07:30:17.859 UTC [gossip.gossip] learnAnchorPeers -> INFO 02a Learning about the configured anchor peers of bch1MSP for channel my_channel : [{peer0-bch-org1 7051}]
 ...........
2019-06-03 07:30:17.885 UTC [gossip.comm] authenticateRemotePeer -> ERRO 030 Failed verifying signature from 172.30.247.38:7051 : Could not acquire policy manager for channel my_channel
2019-06-03 07:30:17.885 UTC [gossip.comm] Handshake -> WARN 032 Authentication failed: Could not acquire policy manager for channel my_channel
2019-06-03 07:30:17.885 UTC [gossip.gossip] func1 -> WARN 033 Deep probe of peer0-bch-org2:7051 failed: Could not acquire policy manager for channel my_channel
github.com/hyperledger/fabric/gossip/gossip.(*gossipServiceImpl).learnAnchorPeers.func1
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:249
github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).Connect.func1
 /opt/gopath/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:160
runtime.goexit
 /opt/go/src/runtime/asm_amd64.s:1333
2019-06-03 07:30:17.885 UTC [gossip.discovery] func1 -> WARN 034 Could not connect to Endpoint: peer0-bch-org2:7051, InternalEndpoint: peer0-bch-org2:7051, PKI-ID: <nil>, Metadata: : Could not acquire policy manager for channel my_channel
 
...............
 
2019-06-03 07:30:17.931 UTC [gossip.state] NewGossipStateProvider -> INFO 06c Updating metadata information, current ledger sequence is at = 198, next expected block is = 199
2019-06-03 07:30:17.931 UTC [sccapi] deploySysCC -> INFO 06d system chaincode lscc/my_channel(github.com/hyperledger/fabric/core/scc/lscc) deployed
2019-06-03 07:30:17.931 UTC [cscc] Init -> INFO 06e Init CSCC
2019-06-03 07:30:17.931 UTC [sccapi] deploySysCC -> INFO 06f system chaincode cscc/my_channel(github.com/hyperledger/fabric/core/scc/cscc) deployed
2019-06-03 07:30:17.932 UTC [qscc] Init -> INFO 070 Init QSCC
2019-06-03 07:30:17.932 UTC [sccapi] deploySysCC -> INFO 071 system chaincode qscc/my_channel(github.com/hyperledger/fabric/core/scc/qscc) deployed
2019-06-03 07:30:17.932 UTC [sccapi] deploySysCC -> INFO 072 system chaincode (+lifecycle,github.com/hyperledger/fabric/core/chaincode/lifecycle) disabled
2019-06-03 07:30:17.956 UTC [discovery] NewService -> INFO 073 Created with config TLS: false, authCacheMaxSize: 1000, authCachePurgeRatio: 0.750000
2019-06-03 07:30:17.956 UTC [nodeCmd] registerDiscoveryService -> INFO 074 Discovery service activated
2019-06-03 07:30:17.957 UTC [nodeCmd] serve -> INFO 075 Starting peer with ID=[name:""peer0-bch-org1"" ], network ID=[dev], address=[10.129.1.67:7051]
2019-06-03 07:30:17.957 UTC [nodeCmd] serve -> INFO 076 Started peer with ID=[name:""peer0-bch-org1"" ], network ID=[dev], address=[10.129.1.67:7051]
2019-06-03 07:30:17.957 UTC [nodeCmd] func8 -> INFO 077 Starting profiling server with listenAddress = 0.0.0.0:6060
2019-06-03 07:30:21.803 UTC [comm.grpc.server] 1 -> INFO 078 unary call completed {""grpc.start_time"": ""2019-06-03T07:30:21.803Z"", ""grpc.service"": ""gossip.Gossip"", ""grpc.method"": ""Ping"", ""grpc.request_deadline"": ""2019-06-03T07:30:23.803Z"", ""grpc.peer_address"": ""10.129.3.91:39768"", ""grpc.code"": ""OK"", ""grpc.call_duration"": ""74.164µs""}
2019-06-03 07:30:22.858 UTC [gossip.channel] reportMembershipChanges -> INFO 079 Membership view has changed. peers went online: [[peer0-bch-org3:7051 ]] , current view: [[peer0-bch-org3:7051 ]]
2019-06-03 07:30:23.932 UTC [gossip.election] beLeader -> INFO 07a 52e1b00e2a43eadcb583ae4fa0a79f79b5ad597ecfe5b5a507d728bc89a619b0 : Becoming a leader
2019-06-03 07:30:23.932 UTC [gossip.service] func1 -> INFO 07b Elected as a leader, starting delivery service for channel my_channel
................

and all peers are online
{code}
 

 ;;;","03/Jun/19 9:58 PM;yacovm;[~C0rWin] [~naaman] ;;;","04/Jun/19 1:00 AM;nyet;{code:go}
        if dbInst.db, err = leveldb.OpenFile(dbPath, dbOpts); err != nil {
                panic(fmt.Sprintf(""Error opening leveldb: %s"", err))
        }
{code}

If OpenFile() is returning EAGAIN, it likely means dbPath is a non-socket that can't be used, possibly due to open file limits or resource starvation. It could be

1) your instance is too small
2) your file descriptor limits have to be increased
3) fabric has a file descriptor leak;;;","04/Jun/19 4:20 PM;NN77;Hello!

1) There is plenty of resources in cluster, so I can exclude starvation of resources.

2) I will try to check this(when problem repeats), because persistent data remains of NFS. And limit can be set on nfs server.

 

But these two suggestions do not explain why peers start working on third start. And why other services which have persistent data on same NFS work flawlessly...;;;","06/Jun/19 11:45 PM;NN77;update!

checked ulimits on failed pod:

cat /proc/80190/limts | grep ""open files""

Max open files 1048576 1048576

ls -1 /proc/80190/fd | wc -l
3

 

So I guess fd limits are okay..

 ;;;","13/Jun/19 11:42 PM;naaman;{color:#242729}An identical issue has been resolved by [~mastersingh24] see
{color}

{color:#242729}[https://stackoverflow.com/questions/54479043/why-do-i-get-a-resource-unavailable-error-on-db-while-launching-peer-pod]{color}

 

{color:#242729}That error typically occurs when the peer cannot get a lock on DB files. Make sure that the peers are not mounting the same shared volume.{color}

{color:#242729}Please check the volumes you mount and indicate if that solved the issue.{color};;;","13/Jun/19 11:51 PM;NN77;I have separate volume for each peer.

And if I had same volumes for two peers - then one peer could not start permanently because of second peer's lock.

But problem  peers start on third time always;;;","14/Jun/19 11:21 AM;naaman;The reason for this is the NFS lease time (lease-time in the nfs config) which is 30 seconds by default. The lock is not released by the NFS server until the lease time expires. The logs show that the failed attempt was at 07:29:48 and the successful attempt at 07:30:17 which confirms this. It is possible to reduce the lease-time (10 sec is the minimum) but I would NOT recommend this.

We can modify the code to wait keep attempting to lock the leveldb file for 30+ seconds and only then panic. This will help when the problem is the lease time but means that in cases where there is real contention on the lock the failure will be delayed (by 30 sec or so). [~mastersingh24] wdyt?;;;","14/Jun/19 2:28 PM;NN77;Well, maybe. Still hlf network consists of 14 peers. And just one or two go offline and other continue working. And they are on same NFS (every peer has own directory). Why does just one peer stop? If there is lock in levelDB why there is no error when peer was running?

Beginning of working on third start is a second part of the problem.. I think so.;;;","15/Jun/19 3:43 AM;nyet;Why would NFS locking (or lease time) matter if no peer shares any files with any other peer?

Unless a peer is dying while holding a lock on an NFS located file, and a subsequent newly launched replacement peer can't access the same NFS located file due the lock being stale.

Am I missing something?

BTW another reason to distrust containers. Don't just kill them. The underlying processes might not exit cleanly.;;;","17/Jun/19 4:35 PM;naaman;The lease time explains why the peer was only able to restart on the third attempt (the lock was not yet released in the first two attempts). It doesn't explain why the peer lost the ability to connect to all other peers and thus ""went offline"".

[~NN77] can you provide more detailed logs (higher log level) from an offline peer and an online peer. I want to verify that the peer is attempting to connect to the correct endpoints (DNS names are resolved to the correct address) and if so try to figure out what prevents the connection from being established.;;;","17/Jun/19 4:47 PM;NN77;Hello!

I have following environment variables set:
{code:java}
- name: CORE_LOGGING_PEER
 value: debug
 - name: CORE_CHAINCODE_LOGGING_LEVEL
 value: debug
 - name: CORE_CHAINCODE_LOGGING_SHIM
 value: debug
 - name: SHIM_LOGGING_LEVEL
 value: debug
 - name: CC_LOGGING_LEVEL
 value: debug{code}
 

and this 
{code:java}
- name: FABRIC_LOGGING_SPEC
 value: INFO{code}
So I change last one to debug and 
{code:java}
- name: FABRIC_LOGGING_LEVEL
 value: DEBUG{code}
right? Or shall I add anything more?

 
----
I checked DNS when peer went offline, it did work as it should....

 

And one more: In saturday one of peers went offline, same symptoms, same logs. But it had been working for 71 days!;;;","18/Jun/19 9:21 PM;naaman;Yes, setting FABRIC_LOGGING_SPEC to DEBUG should be fine

If the log produced is too large then we may want to restrict debug only to the gossip component with FABRIC_LOGGING_SPEC=""gossip=DEBUG""

 

Use FABRIC_LOGGING_SPEC not FABRIC_LOGGING_LEVEL;;;","27/Jun/19 10:45 PM;NN77;Hello. It happened again, with new peer that has uptime of 83 days. It has new behaviour - *It is unable to start completely*

here are logs:
{code:java}
2019-06-27 13:36:34.108 UTC [viperutil] getKeysRecursively -> DEBU 001 Found map[string]interface{} value for peer.BCCSP
2019-06-27 13:36:34.108 UTC [viperutil] unmarshalJSON -> DEBU 002 Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2019-06-27 13:36:34.108 UTC [viperutil] getKeysRecursively -> DEBU 003 Found real value for peer.BCCSP.Default setting to string SW
2019-06-27 13:36:34.108 UTC [viperutil] getKeysRecursively -> DEBU 004 Found map[string]interface{} value for peer.BCCSP.SW
2019-06-27 13:36:34.108 UTC [viperutil] unmarshalJSON -> DEBU 005 Unmarshal JSON: value cannot be unmarshalled: invalid character 'S' looking for beginning of value
2019-06-27 13:36:34.108 UTC [viperutil] getKeysRecursively -> DEBU 006 Found real value for peer.BCCSP.SW.Hash setting to string SHA2
2019-06-27 13:36:34.109 UTC [viperutil] unmarshalJSON -> DEBU 007 Unmarshal JSON: value is not a string: 256
2019-06-27 13:36:34.109 UTC [viperutil] getKeysRecursively -> DEBU 008 Found real value for peer.BCCSP.SW.Security setting to int 256
2019-06-27 13:36:34.109 UTC [viperutil] getKeysRecursively -> DEBU 009 Found map[string]interface{} value for peer.BCCSP.SW.FileKeyStore
2019-06-27 13:36:34.109 UTC [viperutil] unmarshalJSON -> DEBU 00a Unmarshal JSON: value cannot be unmarshalled: unexpected end of JSON input
2019-06-27 13:36:34.109 UTC [viperutil] getKeysRecursively -> DEBU 00b Found real value for peer.BCCSP.SW.FileKeyStore.KeyStore setting to string
2019-06-27 13:36:34.109 UTC [viperutil] getKeysRecursively -> DEBU 00c Found map[string]interface{} value for peer.BCCSP.PKCS11
2019-06-27 13:36:34.109 UTC [viperutil] unmarshalJSON -> DEBU 00d Unmarshal JSON: value is not a string: <nil>
2019-06-27 13:36:34.109 UTC [viperutil] getKeysRecursively -> DEBU 00e Found real value for peer.BCCSP.PKCS11.Pin setting to <nil> <nil>
2019-06-27 13:36:34.109 UTC [viperutil] unmarshalJSON -> DEBU 00f Unmarshal JSON: value is not a string: <nil>
2019-06-27 13:36:34.109 UTC [viperutil] getKeysRecursively -> DEBU 010 Found real value for peer.BCCSP.PKCS11.Hash setting to <nil> <nil>
2019-06-27 13:36:34.109 UTC [viperutil] unmarshalJSON -> DEBU 011 Unmarshal JSON: value is not a string: <nil>
2019-06-27 13:36:34.110 UTC [viperutil] getKeysRecursively -> DEBU 012 Found real value for peer.BCCSP.PKCS11.Security setting to <nil> <nil>
2019-06-27 13:36:34.110 UTC [viperutil] getKeysRecursively -> DEBU 013 Found map[string]interface{} value for peer.BCCSP.PKCS11.FileKeyStore
2019-06-27 13:36:34.110 UTC [viperutil] unmarshalJSON -> DEBU 014 Unmarshal JSON: value is not a string: <nil>
2019-06-27 13:36:34.110 UTC [viperutil] getKeysRecursively -> DEBU 015 Found real value for peer.BCCSP.PKCS11.FileKeyStore.KeyStore setting to <nil> <nil>
2019-06-27 13:36:34.110 UTC [viperutil] unmarshalJSON -> DEBU 016 Unmarshal JSON: value is not a string: <nil>
2019-06-27 13:36:34.110 UTC [viperutil] getKeysRecursively -> DEBU 017 Found real value for peer.BCCSP.PKCS11.Library setting to <nil> <nil>
2019-06-27 13:36:34.110 UTC [viperutil] unmarshalJSON -> DEBU 018 Unmarshal JSON: value is not a string: <nil>
2019-06-27 13:36:34.110 UTC [viperutil] getKeysRecursively -> DEBU 019 Found real value for peer.BCCSP.PKCS11.Label setting to <nil> <nil>
2019-06-27 13:36:34.110 UTC [viperutil] EnhancedExactUnmarshalKey -> DEBU 01a map[peer.BCCSP:map[Default:SW SW:map[Security:256 FileKeyStore:map[KeyStore:] Hash:SHA2] PKCS11:map[FileKeyStore:map[KeyStore:<nil>] Library:<nil> Label:<nil> Pin:<nil> Hash:<nil> Security:<nil>]]]
2019-06-27 13:36:34.111 UTC [bccsp_sw] openKeyStore -> DEBU 01b KeyStore opened at [/etc/hyperledger/msp/keystore]...done
2019-06-27 13:36:34.111 UTC [bccsp] initBCCSP -> DEBU 01c Initialize BCCSP [SW]
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 01d Reading directory /etc/hyperledger/msp/signcerts
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 01e Inspecting file /etc/hyperledger/msp/signcerts/peer0-bch-org4-cert.pem
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 01f Reading directory /etc/hyperledger/msp/cacerts
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 020 Inspecting file /etc/hyperledger/msp/cacerts/ca.bch-org4-cert.pem
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 021 Reading directory /etc/hyperledger/msp/admincerts
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 022 Inspecting file /etc/hyperledger/msp/admincerts/admin-bch-org4-cert.pem
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 023 Reading directory /etc/hyperledger/msp/intermediatecerts
2019-06-27 13:36:34.111 UTC [msp] getMspConfig -> DEBU 024 Intermediate certs folder not found at [/etc/hyperledger/msp/intermediatecerts]. Skipping. [stat /etc/hyperledger/msp/intermediatecerts: no such file or directory]
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 025 Reading directory /etc/hyperledger/msp/tlscacerts
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 026 Inspecting file /etc/hyperledger/msp/tlscacerts/tlsca-bch-org4-cert.pem
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 027 Reading directory /etc/hyperledger/msp/tlsintermediatecerts
2019-06-27 13:36:34.111 UTC [msp] getMspConfig -> DEBU 028 TLS intermediate certs folder not found at [/etc/hyperledger/msp/tlsintermediatecerts]. Skipping. [stat /etc/hyperledger/msp/tlsintermediatecerts: no such file or directory]
2019-06-27 13:36:34.111 UTC [msp] getPemMaterialFromDir -> DEBU 029 Reading directory /etc/hyperledger/msp/crls
2019-06-27 13:36:34.111 UTC [msp] getMspConfig -> DEBU 02a crls folder not found at [/etc/hyperledger/msp/crls]. Skipping. [stat /etc/hyperledger/msp/crls: no such file or directory]
2019-06-27 13:36:34.111 UTC [msp] getMspConfig -> DEBU 02b Loading NodeOUs
2019-06-27 13:36:34.112 UTC [msp] newBccspMsp -> DEBU 02c Creating BCCSP-based MSP instance
2019-06-27 13:36:34.112 UTC [msp] New -> DEBU 02d Creating Cache-MSP instance
2019-06-27 13:36:34.112 UTC [msp] loadLocaMSP -> DEBU 02e Created new local MSP
2019-06-27 13:36:34.113 UTC [msp] Setup -> DEBU 02f Setting up MSP instance horizonMSP
2019-06-27 13:36:34.113 UTC [msp.identity] newIdentity -> DEBU 030 Creating identity instance for cert -----BEGIN CERTIFICATE----------END CERTIFICATE-----
2019-06-27 13:36:34.113 UTC [msp.identity] newIdentity -> DEBU 031 Creating identity instance for cert -----BEGIN CERTIFICATE----------END CERTIFICATE-----
2019-06-27 13:36:34.124 UTC [msp.identity] newIdentity -> DEBU 032 Creating identity instance for cert -----BEGIN CERTIFICATE----------END CERTIFICATE-----
2019-06-27 13:36:34.124 UTC [bccsp_sw] loadPrivateKey -> DEBU 033 Loading private key [54e9b5ea656322a0b326f4dec4e2912489a755ef80c5d39cf7bf48c43bf373bd] at [/etc/hyperledger/msp/keystore/54e9b5ea656322a0b326f4dec4e2912489a755ef80c5d39cf7bf48c43bf373bd_sk]...
2019-06-27 13:36:34.125 UTC [msp.identity] newIdentity -> DEBU 034 Creating identity instance for cert -----BEGIN CERTIFICATE----------END CERTIFICATE-----
2019-06-27 13:36:34.125 UTC [msp] setupSigningIdentity -> DEBU 035 Signing identity expires at 2029-03-26 12:02:00 +0000 UTC
2019-06-27 13:36:34.125 UTC [msp] Validate -> DEBU 036 MSP horizonMSP validating identity
2019-06-27 13:36:34.125 UTC [nodeCmd] serve -> INFO 037 Starting peer:
Version: 1.4.0
Commit SHA: d700b43
Go version: go1.11.1
OS/Arch: linux/amd64
Chaincode:
  Base Image Version: 0.4.14
  Base Docker Namespace: hyperledger
  Base Docker Label: org.hyperledger.fabric
  Docker Namespace: hyperledger
2019-06-27 13:36:34.125 UTC [msp] GetDefaultSigningIdentity -> DEBU 038 Obtaining default signing identity
2019-06-27 13:36:34.125 UTC [msp.identity] Sign -> DEBU 039 Sign: plaintext: 00000000000000000000000000000000...00000000000000000000000000000000
2019-06-27 13:36:34.125 UTC [msp.identity] Sign -> DEBU 03a Sign: digest: 66687AADF862BD776C8FC18B8E9F8E20089714856EE233B3902A591D0D5F2925
2019-06-27 13:36:34.126 UTC [ledgermgmt] initialize -> INFO 03b Initializing ledger mgmt
2019-06-27 13:36:34.126 UTC [kvledger] NewProvider -> INFO 03c Initializing ledger provider
2019-06-27 13:36:34.126 UTC [kvledger.util] CreateDirIfMissing -> DEBU 03d CreateDirIfMissing [/var/hyperledger/production/ledgersData/ledgerProvider/]
2019-06-27 13:36:34.126 UTC [kvledger.util] logDirStatus -> DEBU 03e Before creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] exists
2019-06-27 13:36:34.126 UTC [kvledger.util] logDirStatus -> DEBU 03f After creating dir - [/var/hyperledger/production/ledgersData/ledgerProvider/] exists
panic: Error opening leveldb: resource temporarily unavailable
goroutine 1 [running]:
github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).Open(0xc000178a80)
        /opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:79 +0x271
github.com/hyperledger/fabric/core/ledger/kvledger.openIDStore(0xc00024d500, 0x36, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:267 +0x10e
github.com/hyperledger/fabric/core/ledger/kvledger.NewProvider(0x10b0200, 0x1f51e20, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/kv_ledger_provider.go:60 +0x77
github.com/hyperledger/fabric/core/ledger/ledgermgmt.initialize(0xc0001789c0)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:68 +0x304
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize.func1()
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:52 +0x2a
sync.(*Once).Do(0x1f51ef8, 0xc000347520)
        /opt/go/src/sync/once.go:44 +0xb3
github.com/hyperledger/fabric/core/ledger/ledgermgmt.Initialize(0xc0001789c0)
        /opt/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:51 +0x55
github.com/hyperledger/fabric/peer/node.serve(0x1f51e20, 0x0, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:172 +0x56f
github.com/hyperledger/fabric/peer/node.glob..func1(0x1e3fbe0, 0x1f51e20, 0x0, 0x0, 0x0, 0x0)
        /opt/gopath/src/github.com/hyperledger/fabric/peer/node/start.go:119 +0x9c
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x1e3fbe0, 0x1f51e20, 0x0, 0x0, 0x1e3fbe0, 0x1f51e20)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x473
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x1e40300, 0x8, 0x0, 0x1e3f4c0)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:852 +0x2fd
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(0x1e40300, 0xc000027f40, 0x1)
        /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800 +0x2b
main.main()

{code}
 I looked into this folder:

/var/hyperledger/production/ledgersData/ledgerProvider/

It did not have .ldb file.

 

 update2:

I checked some other peers and most of peers have file with name like 00002.ldb.

and 5 or so do not have it. However only one peer does not work.

 

update3: 

I renamed folder /var/hyperledger/production/ledgersData/ledgerProvider/

for peer to recreate it. It creates new folder with some items, but it has NO .ldb file

 

 

ledgerProvider/LOG:
{code:java}
=============== Jun 27, 2019 (UTC) ===============
14:01:16.020104 log@legend F·NumFile S·FileSize N·Entry C·BadEntry B·BadBlock Ke·KeyError D·DroppedEntry L·Level Q·SeqNum T·TimeElapsed
14:01:16.023972 version@stat F·[] S·0B[] Sc·[]
14:01:16.025087 db@open opening
14:01:16.025405 journal@recovery F·1
14:01:16.025909 journal@recovery recovering @2
14:01:16.029692 version@stat F·[] S·0B[] Sc·[]
14:01:16.045803 db@janitor F·2 G·0
14:01:16.045839 db@open done T·20.737572ms
=============== Jun 27, 2019 (UTC) ===============
14:01:46.014905 log@legend F·NumFile S·FileSize N·Entry C·BadEntry B·BadBlock Ke·KeyError D·DroppedEntry L·Level Q·SeqNum T·TimeElapsed
14:01:46.018781 version@stat F·[] S·0B[] Sc·[]
14:01:46.019670 db@open opening
14:01:46.019942 journal@recovery F·1
14:01:46.022388 journal@recovery recovering @4
14:01:46.030217 version@stat F·[] S·0B[] Sc·[]
14:01:46.046632 db@janitor F·2 G·0
14:01:46.046681 db@open done T·26.998966ms
=============== Jun 27, 2019 (UTC) ===============
14:02:27.015976 log@legend F·NumFile S·FileSize N·Entry C·BadEntry B·BadBlock Ke·KeyError D·DroppedEntry L·Level Q·SeqNum T·TimeElapsed
14:02:27.019711 version@stat F·[] S·0B[] Sc·[]
14:02:27.020597 db@open opening
14:02:27.020921 journal@recovery F·1
14:02:27.021469 journal@recovery recovering @6
14:02:27.025633 version@stat F·[] S·0B[] Sc·[]
14:02:27.051927 db@janitor F·2 G·0
14:02:27.051982 db@open done T·31.367147ms

{code}
 by the way, I forgot to mention - *I have OKD as cluster environment*;;;","28/Jun/19 12:33 AM;NN77;more updates:

I moved peer to volume on HostPath - It started working.

Any clues how can I debug problem with nfs and why it is so random?;;;","28/Jun/19 1:17 AM;naaman;[~NN77] I suggest you open a new Jira for the issues related to leveldb and the associated NFS locking. I would like to keep this issue focused on the gossip related issues. As we discussed, it's likely that the NFS issues only affect startup but are not related to the reason of why the peers go ""offline"".

As I mentioned in our earlier discussion there could be several issues with NFS locking including lock lease time, unsuccessful cleanup that prevents relock, permissions related issues, and possibly resources related issues. In the previous logs you provided it was clearly the lease time and that's WAD. I could not tell if that was the case this time around.   ;;;","16/Jul/19 4:58 PM;NN77;Hello [~naaman] !

Some more updates - peer which resides on node's hostpath became unavailable.

Restarted it - same symptoms, it did start on THIRD attempt.;;;","16/Jul/19 5:29 PM;NN77;And some interesting logs here:

 
{code:java}
2019-07-16 03:45:09.289 UTC [gossip.channel] reportMembershipChanges -> INFO 6cdcc Membership view has changed. peers went offline:  [[peer0-bchorg2:7051 ] [peer0-bchorg3:7051 ]] , current view:  []
2019-07-16 06:17:49.348 UTC [gossip.privdata] StoreBlock -> INFO 6cdcd [mychan] Received block [409] from buffer
2019-07-16 06:17:49.350 UTC [committer.txvalidator] Validate -> INFO 6cdce [mychan] Validated block [409] in 1ms
2019-07-16 06:17:49.427 UTC [kvledger] CommitWithPvtData -> INFO 6cdcf [xmychan] Committed block [409] with 1 transaction(s) in 76ms (state_validation=23ms block_commit=11ms state_commit=37ms)

{code}
we stopped talking with peers, but received some blocks. How so?

 ;;;","17/Jul/19 8:28 PM;naaman;The problem was resolved by FAB-15840, see more details there. What happens is that after a peer gets disconnected (for whatever reason) from the other peers for a few minutes it may not attempt to reconnect to the other peers again and thus remain isolated. At that time the peer is still functional it's just that it's gossip view will never be restored. ;;;","17/Jul/19 8:33 PM;NN77;No, peer is not fully functional. Last log which I sent yesterday (with empty gossip view and received block is just coincidence).

Usually when this situation occurs peer is unable to launch chaincodes, to be discovered by discovery and DOES NOT receive any blocks.;;;","17/Jul/19 8:43 PM;naaman;Right, ""still functional"" is probably not the right term. What I meant was that the peer continues to run as if it was the only peer (i.e., isolated) and will not report any errors.  ;;;",,,,,,,,,,,,,,,,,,,
Support addtional pprof parameters,FAB-15566,40176,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,yoheiueda,yoheiueda,yoheiueda,28/May/19 7:02 PM,29/May/19 3:51 PM,28/Oct/23 3:08 AM,29/May/19 3:51 PM,,,,,,,,,,,,,,,,,,fabric-orderer,fabric-peer,,,,,0,,,,,,"We can enable golang's pprof profiling mechanism by setting environment variables  CORE_PEER_PROFILE_ENABLED and ORDERER_GENERAL_PROFILE_ENABLED

[https://golang.org/pkg/runtime/pprof/#Profile]

However, we can't adjust pprof's parameters for block and mutex profiles for now. To enable and control profiling frequencies, we need to call runtime functions runtime.SetBlockProfileRate and runtime.SetMutexProfileFraction.
 * https://golang.org/pkg/runtime/#SetBlockProfileRate
 * https://golang.org/pkg/runtime/#SetMutexProfileFraction

Block and mutex profiles are very convenient tools to analyze performance issues related to locks and I/O waits.  I'd like to have configuration options in core.yaml and orderer.yaml to adjust those parameters.

Corresponding environment variable names will be:
 * ORDERER_GENERAL_PROFILE_BLOCKPROFILERATE
 * ORDERER_GENERAL_PROFILE_MUTEXPROFILEFRACTION
 * CORE_PEER_PROFILE_BLOCKPROFILERATE
 * CORE_PEER_PROFILE_MUTEXPROFILEFRACTION

The default values of these parameters are set to 0.  It means block/mutex profiles are turned off.

 ",,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pf8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/May/19 7:06 PM;yoheiueda;My CR is: https://gerrit.hyperledger.org/r/c/fabric/+/31564;;;","29/May/19 3:46 PM;yoheiueda;I noticed that there is an accepted proposal for dynamic reconfiguration of block/mutex profiles in the golang pprof support. When this proposal is implemented, we don't need modification in the Fabric side.  I close this issue for now.

 

https://github.com/golang/go/issues/23401;;;","29/May/19 3:51 PM;yoheiueda;This feature will be implemented in golang.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extra validation of collection dissemination policies at _lifecycle endorsement time,FAB-15567,40177,40137,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,28/May/19 8:59 PM,31/Jul/19 10:19 PM,28/Oct/23 3:08 AM,31/Jul/19 10:19 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"When a collection configuration is supplied to an approve/commit invocation, the _lifecycle logic should attempt to instantiate the policy. Instantiating it will perform extra semantic validation and will - for instance - ensure that no SignedBy node references the ordinal of a principal out of the range of the supplied ones.",,ales,,,,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pfg:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 3:56 AM;ales;https://gerrit.hyperledger.org/r/c/fabric/+/31698;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update versions (go, compose) in vagrant dev environmnent",FAB-15568,40179,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,28/May/19 9:51 PM,30/May/19 2:51 AM,28/Oct/23 3:08 AM,30/May/19 2:51 AM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Vagrant is still referencing go 1.11.5.

/cc [~btl5037]",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pfw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/May/19 10:15 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31568 [FAB-15568] update versions in vagrant environment;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Persist the logging settings by the operational services,FAB-15569,40180,,Task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,baohua,baohua,28/May/19 9:53 PM,28/May/19 9:56 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Currently, the operational service allow setting logging specs.

However, after the node restarts, the setting will lose and restore to the default level.

There are several ways to achieve the persistence of the setting:

a. Store as local configurations, i.e., core.yaml;

b. Store as separate config for the operational service, which will be used by other operational settings, too;

c. Store into environment variables.",,baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pg4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestWithStaticDeliverClientLeader times out in unit tests,FAB-15570,40186,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,btl5037,btl5037,btl5037,29/May/19 2:51 AM,16/Jun/20 11:16 AM,28/Oct/23 3:08 AM,16/Jun/20 11:16 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12410/console,,btl5037,MHBauer,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ph8:",,,,Unset,Unset,,go test -race -v -run TestWithStaticDeliverClientLeader,,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,MHBauer,yoheiueda,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/May/19 3:34 AM;MHBauer;This looks like the same both sides of the connection issue. I'm going to start collecting these on a wiki page https://wiki.hyperledger.org/x/EoXT

Very easy repro
go test -race -v -run TestWithStaticDeliverClientLeader
=== RUN   TestWithStaticDeliverClientLeader
2019-05-28 11:31:38.946 PDT [gossip.comm] func1 -> WARN 001 127.0.0.1:44915, PKIid:3132372e302e302e313a3434393135 isn't responsive: rpc error: code = Unavailable desc = transport is closing
2019-05-28 11:31:50.929 PDT [gossip.comm] func1 -> WARN 002 127.0.0.1:44915, PKIid:3132372e302e302e313a3434393135 isn't responsive: rpc error: code = Unavailable desc = transport is closing
--- FAIL: TestWithStaticDeliverClientLeader (30.01s)
    gossip_service_test.go:592: Failed to establish full channel membership. Only 0 out of 2 peers have full membership
FAIL
exit status 1
FAIL	github.com/hyperledger/fabric/gossip/service	30.204s
;;;","10/Jul/19 9:33 PM;MHBauer;another, looking a little different
=== RUN   TestWithStaticDeliverClientLeader
2019-07-10 05:12:02.152 PDT [gossip.comm] func1 -> WARN 08a 127.0.0.1:40677, PKIid:3132372e302e302e313a3430363737 isn't responsive: EOF
2019-07-10 05:12:02.152 PDT [gossip.comm] func1 -> WARN 08b 127.0.0.1:35617, PKIid:3132372e302e302e313a3335363137 isn't responsive: rpc error: code = Unavailable desc = transport is closing
2019-07-10 05:12:08.152 PDT [gossip.comm] func1 -> WARN 08c 127.0.0.1:35617, PKIid:3132372e302e302e313a3335363137 isn't responsive: EOF
2019-07-10 05:12:08.152 PDT [gossip.comm] func1 -> WARN 08d 127.0.0.1:40677, PKIid:3132372e302e302e313a3430363737 isn't responsive: rpc error: code = Unavailable desc = transport is closing
2019-07-10 05:12:20.154 PDT [gossip.comm] func1 -> WARN 08e 127.0.0.1:40677, PKIid:3132372e302e302e313a3430363737 isn't responsive: EOF
2019-07-10 05:12:26.156 PDT [gossip.comm] func1 -> WARN 08f 127.0.0.1:35617, PKIid:3132372e302e302e313a3335363137 isn't responsive: EOF
2019-07-10 05:12:26.156 PDT [gossip.comm] func1 -> WARN 090 127.0.0.1:40677, PKIid:3132372e302e302e313a3430363737 isn't responsive: rpc error: code = Unavailable desc = transport is closing
--- FAIL: TestWithStaticDeliverClientLeader (30.04s)
    gossip_service_test.go:591: Failed to establish full channel membership. Only 0 out of 2 peers have full membership
FAIL
;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
integrate cache with stateleveldb,FAB-15571,40187,12402,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,29/May/19 3:06 AM,19/Feb/20 3:07 AM,28/Oct/23 3:08 AM,19/Feb/20 3:07 AM,,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,0,,,,,,,,denyeart,Senthil1,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00phg:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Feb/20 3:07 AM;denyeart;We don't expect state db cache would help much with embedded databases like leveldb, hence I will close as Won't Do.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper usage in fabric/internal,FAB-15572,40193,38656,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,dereckluo,dereckluo,29/May/19 5:46 AM,05/Jun/19 11:19 PM,28/Oct/23 3:08 AM,05/Jun/19 11:19 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pik:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 11:19 PM;dereckluo;Closing this sub-task. A separate issue is opened to track this task. FAB-15635;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix typo in fabric-samples-ci.md,FAB-15573,40194,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,tatsu-sato,tatsu-sato,tatsu-sato,29/May/19 6:05 AM,05/Jun/19 6:13 PM,28/Oct/23 3:08 AM,05/Jun/19 6:13 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,"Fix typo in fabric-samples/docs/fabric-samples-ci.md:
 - ""infarstructure"" to ""infrastructure""
 - ""artifiacts"" to ""artifacts""
 - ""chanincode"" to ""chaincode""
 - ""Piepline"" to ""Pipeline""
 - ""undestand"" to ""understand""
 - ""notications"" to ""notifications""
 - ""parametrzed"" to ""parameterized""
 - ""appropirate"" to ""appropriate""
 - ""requried"" to ""required""",,lehors,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pis:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,tatsu-sato,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 6:13 PM;lehors;https://gerrit.hyperledger.org/r/c/fabric-samples/+/31585;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
List of features / functions / APIs to remove or change in v3.0,FAB-15574,40199,,Epic,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,denyeart,29/May/19 9:09 PM,12/Mar/21 10:19 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v3.0.0,,,,,,,,,,0,,,,,,"3.0 is a major release boundary.  We have the opportunity to remove features and/or break backwards compatibility on major release boundaries.  While we don't want to overdo this, there are a number of things in the codebase which we should consider removing and/or modifying in order to reduce future technical debt.

Items linked to this epic (FAB-15574) are planned for v3.0 release.
See items from v2.0 release at Epic FAB-15337.
",,adarshsaraf123,andrew-coleman,binhn,crashmark93,denyeart,dtomczyk,mastersingh24,muralisr,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15337,,,,FAB-15317,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Unset,Unset,Required,ghx-label-3,,List of features / functions / APIs to remove or change in v3.0,To Do,No,,Unset,No,,,"1|i00pjw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshsaraf123,andrew-coleman,binhn,crashmark93,denyeart,dtomczyk,mastersingh24,muralisr,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PTE, OTE, CA daily tests are failing as javaenv-1.4 is not available",FAB-15575,40200,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sambhavdutt,sambhavdutt,29/May/19 10:11 PM,04/Jun/19 10:47 AM,28/Oct/23 3:08 AM,04/Jun/19 10:47 AM,v1.4.2,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ci-failure,,,,,"The daily tests PTE, OTE, CA are failing to start as javaenv-1.4 is not available in Nexus, and it has not been published to Nexus from some time. These jobs will execute once the javaenv is available on Nexus for 1.4

*Branch:*  release-1.4
*Error Snippet:*

{code:java}
20:34:38 Image: javaenv
20:34:38 
20:34:40 Error response from daemon: manifest for nexus3.hyperledger.org:10001/hyperledger/fabric-javaenv:amd64-1.4.1-stable not found
20:34:40 Makefile:152: recipe for target 'pull-images' failed
20:34:40 make: *** [pull-images] Error 1
20:34:40 Build step 'Execute shell' marked build as failure
{code}

*Build Log*
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-ca-release-1.4-x86_64/152/console

https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-ote-release-1.4-x86_64/151/console",,btl5037,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pk4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sambhavdutt,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jun/19 9:03 AM;scottz;what fixed this issue? these tests in 1.4 are passing for the last 3 days.;;;","04/Jun/19 10:47 AM;sambhavdutt;[~scottz]
The jobs started failing after javaenv-1.4 was removed from Nexus and the tests couldn't find this image. I was able to trigger chaincode-java merge from the release-1.4 branch that published the javaenv-1.4 to Nexus and the tests could fetch the image.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace gossipSupport and inline function with an adapter,FAB-15576,40202,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,29/May/19 10:44 PM,09/Mar/21 3:37 AM,28/Oct/23 3:08 AM,09/Mar/21 3:37 AM,,,,,,,,,,,,,,Future,,,,fabric-peer,,,,,,0,help-wanted,hygiene,ipm,,,"Within the peer package, {{createChain}} sets up a number of config bundle listeners. One of these supports gossip.

The current implementation for gossip involves a {{gossipSupport}} struct in the peer that embeds 	{{channelconfig.Application}}, {{configtx.Validator}}, and {{channelconfig.Channel}}. 

{code}
type gossipSupport struct {
	channelconfig.Application
	configtx.Validator
	channelconfig.Channel
}
{code}

This is rendered as a {{Config}} interface:

{code}
// Config enumerates the configuration methods required by gossip
type Config interface {
	// ChainID returns the chainID for this channel
	ChainID() string
	// Organizations returns a map of org ID to ApplicationOrgConfig
	Organizations() map[string]channelconfig.ApplicationOrg
	// Sequence should return the sequence number of the current configuration
	Sequence() uint64
	// OrdererAddresses returns the list of valid orderer addresses to connect to to invoke Broadcast/Deliver
	OrdererAddresses() []string
}
{code}

In addition to employing the ""support"" anti-pattern, it violates the tell-don't-ask principle as the object presented to gossip is used to repeatedly _get_ the information from the config bundle.

This needs to be refactored to create a single-responsibility object that acts as an adapter between gossip and the BundleActor. This object should be created with the necessary dependencies and attach a method that satisfies the {{channelconfig.BundleActor}} interface. When the {{BundleActor}} callback is driven, the adapter should create a value object that contains the necessary data for gossip and calls the gossip handler with the value object.

This approach tells gossip the information it needs, allows the adapter layer to be explicitly tested, and it removes the {{gossipSupport}} struct from the peer.
",,srinivaskumarr,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14324,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:b",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),srinivaskumarr,sykesm,,,,,,,,,,,,,,,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/May/19 11:07 PM;sykesm;{{ProcessConfigUpdate}} is referenced here:

{code}
core/peer/peer.go
core/peer/peer_impl.go
gossip/service/eventer.go
gossip/service/eventer_test.go
{code};;;","03/Jun/19 5:43 PM;srinivaskumarr; would like to take up this task.;;;","06/Jun/19 5:22 PM;srinivaskumarr;Can you give me some more context ad details on this [~sykesm]

Like which file and function in it that must be changed or added? I can  start some work on it then. Since i don't the context behind this ticket i am having a tough time what exactly it means.;;;","25/Feb/21 7:49 AM;sykesm;https://github.com/hyperledger/fabric/pull/2442;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Gossip service individual test failing - TestInvalidInitialization. ,FAB-15577,40203,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,dereckluo,dereckluo,29/May/19 11:17 PM,08/Jun/19 8:03 AM,28/Oct/23 3:08 AM,08/Jun/19 6:22 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"Running focus test  on `TestInvalidInitialization` in /fabric/gossip/service/gossip_service_test.go is failing. However, same test passes while running the entire test suite. 

This may caused by tests pollutions while using global variables. 

!image-2019-05-29-10-16-41-643.png|width=1527,height=868!",,dereckluo,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/May/19 11:16 PM;dereckluo;image-2019-05-29-10-16-41-643.png;https://jira.hyperledger.org/secure/attachment/17275/image-2019-05-29-10-16-41-643.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00d50:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,MHBauer,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/19 5:11 AM;MHBauer;TestChannelConfig fails for the same reason as this test.

 

The underlying issue to me is the global 'once'.

 

$ go test -v -race -run TestChannelConfig
=== RUN TestChannelConfig
2019-06-07 13:10:45.727 PDT [gossip.service] loadGossipConfig -> WARN 001 Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
2019-06-07 13:10:45.727 PDT [peer.gossip.sa] OrgByPeerIdentity -> ERRO 002 Invalid Peer Identity. It must be different from nil.
--- FAIL: TestChannelConfig (0.00s)
panic: Failed putting our own identity into the identity mapper: PKIID is nil [recovered]
 panic: Failed putting our own identity into the identity mapper: PKIID is nil

goroutine 6 [running]:
testing.tRunner.func1(0xc000196a00)
 /Users/mhb/.go/src/testing/testing.go:830 +0x69d
panic(0x4ca3ea0, 0xc0000c0940)
 /Users/mhb/.go/src/runtime/panic.go:522 +0x1b5
github.com/hyperledger/fabric/gossip/identity.NewIdentityMapper(0x4f00160, 0x6026340, 0x0, 0x0, 0x0, 0xc000202010, 0x4eda040, 0xc0003adef0, 0x4d789f3, 0x6)
 /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/identity/identity.go:83 +0x486
github.com/hyperledger/fabric/gossip/gossip.NewGossipService(0xc0001c4000, 0xc000089080, 0x4eda040, 0xc0003adef0, 0x4f00160, 0x6026340, 0x0, 0x0, 0x0, 0x0, ...)
 /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:96 +0x839
github.com/hyperledger/fabric/gossip/service.InitGossipService.func1()
 /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:164 +0x5bb
sync.(*Once).Do(0x6026428, 0xc000062d28)
 /Users/mhb/.go/src/sync/once.go:44 +0xdf
github.com/hyperledger/fabric/gossip/service.InitGossipService(0x4ee43e0, 0xc0001580f0, 0x4eef860, 0x6026340, 0xc0000ade50, 0xf, 0xc000089080, 0x0, 0x4f00160, 0x6026340, ...)
 /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:152 +0x21e
github.com/hyperledger/fabric/gossip/service.TestChannelConfig(0xc000196a00)
 /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/service/gossip_service_test.go:896 +0x247
testing.tRunner(0xc000196a00, 0x4db0538)
 /Users/mhb/.go/src/testing/testing.go:865 +0x164
created by testing.(*T).Run
 /Users/mhb/.go/src/testing/testing.go:916 +0x65b
exit status 2
FAIL github.com/hyperledger/fabric/gossip/service 0.264s;;;","08/Jun/19 8:03 AM;MHBauer;Where is the follow up?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix typo on the endorser metric name,FAB-15578,40206,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,30/May/19 3:03 AM,29/Jan/20 3:42 AM,28/Oct/23 3:08 AM,07/Jun/19 12:20 AM,v1.4.2,v2.0.0,,,,,,,,,,,,v1.4.5,v2.0.0,,,fabric-peer,,,,,,0,help-wanted,ipm,,,,"It seems that the endorser metric name ""endorser_propsal_duration"" has a typo.
It should be ""endorser_proposal_duration"".

The following lines have this problem:
- core/endorser/metrics.go

{code:go}
// Some comments here
                proposalDurationHistogramOpts = metrics.HistogramOpts{
                                Namespace:    ""endorser"",
                                Name:         ""propsal_duration"",
                                Help:         ""The time to complete a proposal."",
                                LabelNames:   []string{""channel"", ""chaincode"", ""success""},
                                StatsdFormat: ""%{#fqname}.%{channel}.%{chaincode}.%{success}"",
                }
{code}

- docs/source/metrics_reference.rst

{noformat}
+-----------------------------------------------------+-----------+------------------------------------------------------------+--------------------+
| endorser_propsal_duration                           | histogram | The time to complete a proposal.                           | channel            |
|                                                     |           |                                                            | chaincode          |
|                                                     |           |                                                            | success            |
+-----------------------------------------------------+-----------+------------------------------------------------------------+--------------------+
{noformat}",,denyeart,sykesm,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mt0:k",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,tatsu-sato,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/19 12:20 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31639;;;","29/Jan/20 3:42 AM;denyeart;also merged in release-1.4 for v1.4.5.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip stop hygiene,FAB-15581,40211,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,MHBauer,MHBauer,30/May/19 9:39 AM,10/Oct/19 7:40 AM,28/Oct/23 3:08 AM,03/Jun/19 12:13 PM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"Lots of gossip has multiple ways to stop.
Both atomic stopping flags and channels to receive.

Additionally, the stopping channels tend to rethrow messages instead of calling close(channel) on the channel.

",,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pm4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PANI 003 Error reading configuration:  Unsupported Config Type """"",FAB-15582,40213,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,yun_chen,yun_chen,30/May/19 11:42 AM,16/Jul/19 11:07 AM,28/Oct/23 3:08 AM,16/Jul/19 11:07 AM,v1.4.0,,,,,,,,,,,,,Not a Bug,,,,fabric-tools,,,,,,0,common.tools.configtxgen,,,,,"Hi, all

I'm trying to set up multiple orgs in configtx.yaml. I followed the step in here:

[Link to the post|https://www.skcript.com/svr/setting-hyperledger-fabric-network-multiple-chaincodes-channels/]

But when I ran this command in cli container: 

configtxgen -profile OrdererGenesis -outputBlock ./channel-artifacts/genesis.block

It showed errors msg below:

2019-05-30 02:03:49.905 UTC [common.tools.configtxgen.localconfig] Load ->PANI 003 Error reading configuration: Unsupported Config Type """"
2019-05-30 02:03:49.905 UTC [common.tools.configtxgen] func1 -> PANI 004 Error reading configuration: Unsupported Config Type """"

 

Does anyone know what this error is? How to fix it?

-------------------------------------------------------------------------------------------------------------

Here's the full log:

2019-05-30 02:03:49.905 UTC [common.tools.configtxgen] main -> WARN 001 Omitting the channel ID for configtxgen for output operations is deprecated.Explicitly passing the channel ID will be required in the future, defaulting to 'testchainid'.
2019-05-30 02:03:49.905 UTC [common.tools.configtxgen] main -> INFO 002 Loading configuration
2019-05-30 02:03:49.905 UTC [common.tools.configtxgen.localconfig] Load ->PANI 003 Error reading configuration: Unsupported Config Type """"
2019-05-30 02:03:49.905 UTC [common.tools.configtxgen] func1 -> PANI 004 Error reading configuration: Unsupported Config Type """"
panic: Error reading configuration: Unsupported Config Type """" [recovered]
 panic: Error reading configuration: Unsupported Config Type """"

goroutine 1 [running]:
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0000f7a20, 0x0, 0x0, 0x0)
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc00000e248, 0xc000299804, 0xc00003af80, 0x38, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc00000e248, 0xc00003af80, 0x38, 0x0, 0x0, 0x0)
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panic(0xc00000e250, 0xc000299938, 0x1, 0x1)
 /opt/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:73 +0x75
main.main.func1()
 /opt/gopath/src/github.com/hyperledger/fabric/common/tools/configtxgen/main.go:250 +0x1a9
panic(0xd4fc40, 0xc000200710)
 /opt/go/src/runtime/panic.go:513 +0x1b9
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0000f7a20, 0x0, 0x0, 0x0)
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x515
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc00000e228, 0xc000299c04, 0xc00003ae80, 0x38, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0xf6
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(0xc00000e228, 0xc00003ae80, 0x38, 0x0, 0x0, 0x0)
 /opt/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159 +0x79
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panic(0xc00000e230, 0xc000299db8, 0x2, 0x2)
 /opt/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:73 +0x75
github.com/hyperledger/fabric/common/tools/configtxgen/localconfig.Load(0x7ffe996f3704, 0xe, 0xc000299f48, 0x1, 0x1, 0x1)
 /opt/gopath/src/github.com/hyperledger/fabric/common/tools/configtxgen/localconfig/config.go:275 +0x41f
main.main()
 /opt/gopath/src/github.com/hyperledger/fabric/common/tools/configtxgen/main.go:259 +0x616",,angelo.decaro,crashmark93,mastersingh24,yun_chen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,ec9eb7fa7308e7bac9182c7ca0bf0a77bcc16bf1,Unset,No,,,"1|i00pmk:",,,,Unset,Unset,,"I started from ./startFabric.sh javascript in fabcar folder.

Then modified crypto-config.yaml (followed the post).

Ran 'cryptogen generate --config=./crypto-config.yaml' in cli container's crypto folder. 

It successfully created certificates in crypto-config folder. 

Then, I modified configtx.yaml and ran 'configtxgen -profile OrdererGenesis -outputBlock ./channel-artifacts/genesis.block'

But got err: ERRO 004 Could not find profile

So, I added -configPath in command like this: 'configtxgen -configPath ./configtx.yaml -profile OrdererGenesis -outputBlock ./channel-artifacts/genesis.block'

Then got this err: PANI 003 Error reading configuration:  Unsupported Config Type """"",,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,crashmark93,mastersingh24,yun_chen,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jun/19 5:37 PM;angelo.decaro;from fabric's documentation (build_network):


{code:java}
-  If you see the below error:

   .. code:: bash

     [configtx/tool/localconfig] Load -> CRIT 002 Error reading configuration: Unsupported Config Type """"
     panic: Error reading configuration: Unsupported Config Type """"

   Then you did not set the ``FABRIC_CFG_PATH`` environment variable properly.  The
   configtxgen tool needs this variable in order to locate the configtx.yaml.  Go
   back and execute an ``export FABRIC_CFG_PATH=$PWD``, then recreate your
   channel artifacts.
{code}

[~yun_chen], did you check that?;;;","16/Jun/19 5:41 PM;mastersingh24;[~yun_chen]   -  

 The  -configPath flag for configtxgen expects the value to be a directory containing a file named configtx.yaml rather than the actual path to the file itself.   So in your case, looks like you have configtx.yaml in the same directory you are running the command, so you'd run
{code:java}
 configtxgen -configPath . -profile OrdererGenesis -outputBlock ./channel-artifacts/genesis.block
{code};;;","16/Jul/19 10:59 AM;yun_chen;Thanks for all of your helps! I finally found it's due to bin folder missing in my project.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft consensus: incorrect statement about TLS settings,FAB-15583,40215,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Done,yacovm,klenik,klenik,30/May/19 7:25 PM,06/Jun/19 12:23 PM,28/Oct/23 3:08 AM,06/Jun/19 12:23 PM,v1.4.1,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-docs,,,,,,0,,,,,,"The Raft documentation [states|https://hyperledger-fabric.readthedocs.io/en/latest/raft_configuration.html#local-configuration] that the general TLS settings are inherited if the cluster {{ClientCertificate}} and {{ClientPrivateKey}} are omitted.

Based on [this mailing list thread|https://lists.hyperledger.org/g/fabric/topic/error_tls_handshake_failed/31696729?p=,,,20,0,0,0::recentpostdate%2Fsticky,,,20,2,0,31696729], the settings aren't inherited and must be set explicitly.

Can you confirm this issue and update the docs?


 To reproduce the issue, remove the cluster TLS settings from the orderer nodes in this self-contained [Caliper example|https://github.com/hyperledger/caliper/blob/29c8f10d99bac00667266fddd60866e2a9195305/packages/caliper-application/network/fabric-v1.4.1/raft/docker-compose-tls.yaml#L66].",,klenik,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00pms:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),klenik,yacovm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/May/19 5:15 AM;yacovm;oh... oops. I meant to say that the ServerPrivateKey and ServerCertificate are inherited from the general section if unset;;;","31/May/19 5:24 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/fabric/+/31637/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Adding timestamp field to block header,FAB-15584,40216,16357,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,gennadyl,gennadyl,gennadyl,30/May/19 7:58 PM,24/Jun/19 5:47 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ledger,fabric-orderer,,,,,0,,,,,,"To make any time based smart contracts Fabric right now missing notation of network time, like Close Time in Stellar, and Network-adjusted time in Bitcoin (and Ethereum?).

Easiest way to do it is to add timestamp of block creation time to block header.
In addition, latest known block timestamp should be available both to client side and to chaincode using ChaincodeStub 

This timestamp can be used to implement time based smart contracts, certificate expiration (FAB-3678) and implementing Atomic Swap as first class citizen in Fabric (FAB-13437)

For current orderers types implementation is straight forward - during block header creation, block_time set as max of previous_block_time + 1 millisecond and current_creator_time. Once BFT style consensus introduced, this timestamp field will became part of block consensus.

The situation that no blocks generated in network for significant period of time can be handled quite easy - if network time important in given channel, simple chaincode with one method that only change single value, installed to the channel. Each time client suspect that network stalled - no new blocks and client want to make time based step, it just call this chaincode and it will cause new block creation.

",,denyeart,gennadyl,MHBauer,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-3678,FAB-13437,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00pn0:",,,,Unset,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),denyeart,gennadyl,MHBauer,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"24/Jun/19 5:47 PM;denyeart;Converted to sub-task of the story that intends to add real world time to blockchain. This is non-trivial given the decentralized nature of the blockchain.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove unnecessary argument from integration/raft/RunQuery,FAB-15585,40218,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,tock,tock,tock,30/May/19 8:36 PM,13/Sep/20 4:33 PM,28/Oct/23 3:08 AM,13/Sep/20 4:33 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"func RunQuery(n *nwo.Network, orderer *nwo.Orderer, peer *nwo.Peer, channel string) int

does not use parameter `orderer`",,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00png:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Sep/20 4:33 PM;tock;Irrelevant;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Kill ledger/customtx package,FAB-15586,40221,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,30/May/19 11:41 PM,24/Jun/19 5:38 PM,28/Oct/23 3:08 AM,24/Jun/19 5:38 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,hygiene,ipm,,,,"This package is the definition of the ""package as object"" anti-pattern. It consists of the following:

{code}
package customtx

import (
	""sync""

	""github.com/hyperledger/fabric/protos/common""
)

var processors Processors
var once sync.Once

// Processors maintains the association between a custom transaction type to its corresponding tx processor
type Processors map[common.HeaderType]Processor

// Initialize sets the custom processors. This function is expected to be invoked only during ledgermgmt.Initialize() function.
func Initialize(customTxProcessors Processors) {
	once.Do(func() {
		initialize(customTxProcessors)
	})
}

func initialize(customTxProcessors Processors) {
	processors = customTxProcessors
}

// GetProcessor returns a Processor associated with the txType
func GetProcessor(txType common.HeaderType) Processor {
	return processors[txType]
}
{code}

Translating code to words, we have a global singleton that can be read or set by anyone yet there's a public method to help ensure it's initialized exactly once (by someone, no guarantees who or when) and we export accessors into the global namespace so that anyone can get something.

The code that needs these processors should be explicitly provided a reference to the processors they need. Tell - don't ask.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15766,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:bi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Environment setup for the System Test Suite Automation,FAB-15587,40226,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,suryalnvs,rameshthoomu,rameshthoomu,31/May/19 3:18 AM,11/Jan/21 2:35 AM,28/Oct/23 3:08 AM,11/Jan/21 2:35 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"* Setup CI environment for System Tests
 * Create Cluster in IKS environment
 * Setup Azure Pipeline yaml
 * Setup Kubeconfig information in the azure pipline.
 * Create CI Jobs for System tests, Smoke tests.

Split above task into three below phases.
 *Phase 1*

*Before we start working on CI environment, setup Azure pipeline yaml files with GitHub account. (As a workaround you can try this with fork of fabric-test GitHub account)*

Setup Azure pipeline yaml files for verify and merge jobs.
 Create IKS cluster/k8s cluster provided by community (assuming that is the chosen option)
 *Phase 2*

Create Azure pipeline yaml files for system test suite.

Explore on adding kubeconfig file in Azure pipeline environment.

*Phase 3*

Run System test suite as a daily job in Azure pipeline.",,btl5037,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16761,,,,,,,,,,,,,,,FAB-15189,,,,FAB-15841,FAB-16061,FAB-16161,FAB-16760,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,Environment setup for the System Test Suite Automation,,No,,Unset,No,,,"1|hzx30f:9k",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 10:33 AM;scottz;Status: We have started some scripts and POC work, but cannot implement until informed which CI tooling should be used.;;;","15/Aug/19 11:36 PM;rameshthoomu;As fabric is moving towards Azure pipeline CI tooling, once it is confirmed, I will work on or request CI team to create azure pipeline for fabric-test repo and system tests. 

Also, we have to decide on which environment we have to run these tests. If it is k8s, which cloud and who will provide the k8s environment. Is it IBM or Community?

We can also think of using AWS k8s as fabric CI is planning to run on AWS pool of nodes..;;;","04/Oct/19 12:33 AM;scottz;First try out a job in Azure environment to run the k8s cluster tests in IKS. Check if we can establish the security arrangements so we do not publicize to the world our internal network details for the cluster needed in the CI job unless it is secure and viewable only by certain users. If good, then move jobs there for k8ssystest, k8slongrun (using FAB-16760). Finally ensure we can display daily job results for community (which is a bit trickier if we end up having to run the job privately in order to keep private our cluster information).;;;","29/Jan/20 4:43 AM;rameshthoomu;Surya is working on setting up the System Test Suite in IKS k8s environment with Azure Pipelines. Assigning this to Surya.;;;","11/Jan/21 2:10 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE supports mutual TLS query block,FAB-15588,40228,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,31/May/19 3:53 AM,17/Oct/19 2:51 AM,28/Oct/23 3:08 AM,04/Jun/19 2:05 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,PTE supports query blockwfith mutual TLS,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00pp8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,true,"31/May/19 4:01 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31628;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flatten comm.ServerConfig struct,FAB-15589,40230,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,31/May/19 6:59 AM,01/Jul/19 7:29 PM,28/Oct/23 3:08 AM,01/Jul/19 7:29 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,SecureOptions and KeepAliveOptions should be by value and not by reference,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ppo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Jun/19 6:26 PM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric/+/32131;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"If chaincode(Java) is installed in HLF v2.0alpha, stop->start peer will fail",FAB-15591,40235,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,IgorSim,IgorSim,31/May/19 7:02 PM,04/Jun/19 2:17 AM,28/Oct/23 3:08 AM,04/Jun/19 2:17 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,fabric-chaincode,fabric-peer,,,,"Create HLF network, images are v2.0.0-stable, with 3 ORGs. Network is created successfully and chaincode is installed according new chaincode lifecyle process and it works. So far so good.

If one peer is stopped and then started again( from any org that have chaincode installed on it),  peer doesn't start , errors seen:

2019-05-30 13:19:44.217 UTC [ccprovider] ListInstalledChaincodes -> WARN 004 Failed obtaining chaincode information about <xxx>:3b1fb1d95db9c38586c5f6d14812535a1edd2dded75ebda16527bf56e43317a8 bin : failed to unmarshal envelope from bytes
2019-05-30 13:19:44.220 UTC [nodeCmd] serve -> PANI 005 Failed creating LegacyMetadataManager: +failed listing installed chaincodes: failed obtaining information about <xxx>:3b1fb1d95db9c38586c5f6d14812535a1edd2dded75ebda16527bf56e43317a8, version bin: failed to unmarshal envelope from bytes
panic: Failed creating LegacyMetadataManager: +failed listing installed chaincodes: failed obtaining information about <xxx>:3b1fb1d95db9c38586c5f6d14812535a1edd2dded75ebda16527bf56e43317a8, version bin: failed to unmarshal envelope from bytes",,ales,crashmark93,IgorSim,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15604,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/May/19 7:00 PM;IgorSim;cc-bug.txt;https://jira.hyperledger.org/secure/attachment/17283/cc-bug.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i008rj:io",,,,Unset,Unset,v2.0,"1. Create HLF network (v2.0alpha) - i think number of ORG-s is irrelevant
2. Install chaincode (i reproduce it with Java chaincode, not sure if it occurs with golang chaincode)
3. Query/Invoke some chaincode, verify it works
4. Stop peer and then start peer
5. Peer won't start
",,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,crashmark93,IgorSim,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jun/19 4:29 PM;ales;Igor could you please verify whether it's a java-only problem? What happens if you deploy a go chaincode?;;;","04/Jun/19 12:39 AM;wlahti;I'm fairly certain this and FAB-15604 are the same issue. I've pushed a CR to gerrit that should resolve this. ;;;","04/Jun/19 2:17 AM;ales;Closing as it should be fixed with [https://gerrit.hyperledger.org/r/#/c/fabric/+/31676/] - pls reopen if it's not the case.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Extra validation of collection dissemination policies at LSCC endorsement time,FAB-15593,40244,40137,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,ales,ales,31/May/19 11:21 PM,25/Jul/19 6:31 PM,28/Oct/23 3:08 AM,25/Jul/19 6:31 PM,,,,,,,,,,,,,,v1.2.2,v1.4.2,v2.0.0,,,,,,,,0,,,,,,"When a collection configuration is supplied to a deploy/upgrade invocation, the LSCC logic should attempt to instantiate the policy. Instantiating it will perform extra semantic validation and will - for instance - ensure that no SignedBy node references the ordinal of a principal out of the range of the supplied ones.

The extra validation will be added to endorsement phase, so it is unnecessary to use a new capability.

 

 ",,ales,denyeart,wenjian,,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ps4:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.3,release-1.4,release-2.5,release-2.4,main,release-1.2,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 5:08 AM;wenjian;CRs:

v2.0: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32209/]

v1.4: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32066/]

v1.3: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32214/]

v1.2: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32216/]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
AmMemberOf should return a RejectAllPolicy if the underlying policy cannot be successfully instantiated,FAB-15594,40245,40137,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,ales,ales,31/May/19 11:29 PM,25/Jun/19 7:39 AM,28/Oct/23 3:08 AM,25/Jun/19 7:11 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,,,,,,"See  

https://jira.hyperledger.org/browse/FAB-15543?focusedCommentId=60368&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-60368

and responses for more information.

Now that RejectAllPolicy will be used when an invalid collection config is encountered, the private data won't be persisted but user transaction will be validated. We expect that since private data won't be persisted that users will see this issue prior to moving the bad collection config to production environments. And with the new endorser fixes we don't expect a transaction with bad collection config to get all the way to validation phase in the first place.",,ales,denyeart,wenjian,yacovm,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00psc:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,wenjian,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/May/19 11:55 PM;yacovm;I don't see a reason why I need to pick it up, [~ales] .

I already went the extra mile and provided with code that fixes it:
{code:java}

var (
	logger = flogging.MustGetLogger(""common.privdata"")
)

func getPolicy(collectionPolicyConfig *common.CollectionPolicyConfig, deserializer msp.IdentityDeserializer) policies.Policy {
	npp := cauthdsl.NewPolicyProvider(deserializer)
	if collectionPolicyConfig == nil {
		return &echoPolicy{err: errors.New(""collection policy config is nil"")}
	}
	accessPolicyEnvelope := collectionPolicyConfig.GetSignaturePolicy()
	if accessPolicyEnvelope == nil {
		return &echoPolicy{err: errors.New(""collection config access policy is nil"")}
	}

	polBytes, err := proto.Marshal(accessPolicyEnvelope)
	if err != nil {
		return &echoPolicy{err: errors.Wrap(err, ""failed marshaling access policy envelope"")}
	}
	accessPolicy, _, err := npp.NewPolicy(polBytes)
	if err != nil {
		logger.Errorf(""Failed constructing new policy out of raw policy bytes: %v, ""+
			""falling back to reject all policy"", err)
		return &echoPolicy{err: errors.Wrap(err, ""failed constructing policy object out of raw policy bytes"")}
	}
	return accessPolicy
}

type echoPolicy struct {
	err error
}

func (pol *echoPolicy) Evaluate(signatureSet []*protoutil.SignedData) error {
	if pol.err == nil {
		return nil
	}
	logger.Errorf(""Policy construction failed due to %v, rejecting all signature sets"", pol.err)
	return pol.err
}


 {code}

This is ledger territory .... [~denyeart]   can you find someone to take care of this? ;;;","12/Jun/19 3:55 AM;wenjian;v1.4 CR: https://gerrit.hyperledger.org/r/#/c/fabric/+/31904/

v2.0 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32009/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhance lifecycle queries to return aggregate information from legacy and new chaincode lifecycle,FAB-15595,40246,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ales,ales,31/May/19 11:38 PM,12/Jun/20 12:31 AM,28/Oct/23 3:08 AM,16/Jul/19 11:50 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Legacy and new lifecycle will have to co-exist for at least one release till the legacy one is removed. During this time, it may be desirable for SDKs to be able to query the new lifecycle and receive aggregate information from both legacy and new implementations. This FAB tracks the necessary work to enhance queries.",,ales,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzwqfn:h",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jun/19 12:22 AM;denyeart;Let's hold off on the aggregate queries spanning old and new lifecycle, until there are some more specific requests from consumers.;;;","16/Jul/19 11:50 PM;denyeart;Decision to not implement unless a specific need arises.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryInstalledChaincodes should return aggregate info from old and new lifecycle,FAB-15596,40250,40246,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,31/May/19 11:44 PM,12/Jun/20 12:31 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The new version of the query should basically aggregate the results from the current version of the query and LSCC.GETINSTALLEDCHAINCODES. One issue with this is that the current results of the query contain
{code:java}
type QueryInstalledChaincodesResult_InstalledChaincode struct {
	PackageId            string   `protobuf:""bytes,1,opt,name=package_id,json=packageId,proto3"" json:""package_id,omitempty""`
	Label                string   `protobuf:""bytes,2,opt,name=label,proto3"" json:""label,omitempty""`
	XXX_NoUnkeyedLiteral struct{} `json:""-""`
	XXX_unrecognized     []byte   `json:""-""`
	XXX_sizecache        int32    `json:""-""`
}
{code}
 but the legacy chaincode returns 
{code:java}
type ChaincodeInfo struct {
	Name    string `protobuf:""bytes,1,opt,name=name,proto3"" json:""name,omitempty""`
	Version string `protobuf:""bytes,2,opt,name=version,proto3"" json:""version,omitempty""`
	// the path as specified by the install/instantiate transaction
	Path string `protobuf:""bytes,3,opt,name=path,proto3"" json:""path,omitempty""`
	// the chaincode function upon instantiation and its arguments. This will be
	// blank if the query is returning information about installed chaincodes.
	Input string `protobuf:""bytes,4,opt,name=input,proto3"" json:""input,omitempty""`
	// the name of the ESCC for this chaincode. This will be
	// blank if the query is returning information about installed chaincodes.
	Escc string `protobuf:""bytes,5,opt,name=escc,proto3"" json:""escc,omitempty""`
	// the name of the VSCC for this chaincode. This will be
	// blank if the query is returning information about installed chaincodes.
	Vscc string `protobuf:""bytes,6,opt,name=vscc,proto3"" json:""vscc,omitempty""`
	// the chaincode unique id.
	// computed as: H(
	//                H(name || version) ||
	//                H(CodePackage)
	//              )
	Id                   []byte   `protobuf:""bytes,7,opt,name=id,proto3"" json:""id,omitempty""`
	XXX_NoUnkeyedLiteral struct{} `json:""-""`
	XXX_unrecognized     []byte   `json:""-""`
	XXX_sizecache        int32    `json:""-""`
}
{code}
where Input, Escc and Vscc are not filled.

We might have to change protobufs, but we shouldn't add fields from the legacy lifecycle to the new protobufs returns. We might solve it with an array of oneofs (which isn't allowed actually, so we might need an intermediate type).

We need to apply appropriate shadowing rules so that if a chaincode is present on both lifecycles, information from the new lifecycle shadows that from the legacy.

We also need a flag to tell which of the chaincode is currently defined in the new or the legacy lifecycle.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfn:i",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 1:11 AM;wlahti;An initial WIP CR: https://gerrit.hyperledger.org/r/c/fabric/+/31694;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryInstalledChaincode should return aggregate info from old and new lifecycle	,FAB-15597,40251,40246,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,31/May/19 11:54 PM,12/Jun/20 12:31 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The new version of the query should basically attempt to satisfy the query from the new lifecycle; failing that it should return results from the legacy lifecycle. Note that LSCC doesn't have that particular query, so we could just get the info from the results of LSCC.GETINSTALLEDCHAINCODES. This query in the new lifecycle currently returns
{code:java}
type QueryInstalledChaincodeResult struct {
	PackageId            string   `protobuf:""bytes,1,opt,name=package_id,json=packageId,proto3"" json:""package_id,omitempty""`
	Label                string   `protobuf:""bytes,2,opt,name=label,proto3"" json:""label,omitempty""`
	XXX_NoUnkeyedLiteral struct{} `json:""-""`
	XXX_unrecognized     []byte   `json:""-""`
	XXX_sizecache        int32    `json:""-""`
}
{code}
but the legacy chaincode doesn't have packageid/label, so we might have to create a new proto and return a oneof.

We also need a flag to tell whether the chaincode is currently defined in the new or the legacy lifecycle.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfn:j",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryNamespaceDefinitions should return aggregate info from old and new lifecycle,FAB-15599,40255,40246,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,01/Jun/19 2:04 AM,12/Jun/20 12:31 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The new version of the query should return info from both the legacy and the new lifecycle. The new lifecycle returns this
{code:java}
type QueryNamespaceDefinitionsResult struct {
	Namespaces           map[string]*QueryNamespaceDefinitionsResult_Namespace `protobuf:""bytes,1,rep,name=namespaces,proto3"" json:""namespaces,omitempty"" protobuf_key:""bytes,1,opt,name=key,proto3"" protobuf_val:""bytes,2,opt,name=value,proto3""`
	XXX_NoUnkeyedLiteral struct{}                                              `json:""-""`
	XXX_unrecognized     []byte                                                `json:""-""`
	XXX_sizecache        int32                                                 `json:""-""`
}
type QueryNamespaceDefinitionsResult_Namespace struct {
	Type                 string   `protobuf:""bytes,1,opt,name=type,proto3"" json:""type,omitempty""`
	XXX_NoUnkeyedLiteral struct{} `json:""-""`
	XXX_unrecognized     []byte   `json:""-""`
	XXX_sizecache        int32    `json:""-""`
}
{code}
but the corresponding LSCC query (LSCC.GETCHAINCODES) returns
{code:java}
type ChaincodeQueryResponse struct {
	Chaincodes           []*ChaincodeInfo `protobuf:""bytes,1,rep,name=chaincodes,proto3"" json:""chaincodes,omitempty""`
	XXX_NoUnkeyedLiteral struct{}         `json:""-""`
	XXX_unrecognized     []byte           `json:""-""`
	XXX_sizecache        int32            `json:""-""`
}

type ChaincodeInfo struct {
	Name    string `protobuf:""bytes,1,opt,name=name,proto3"" json:""name,omitempty""`
	Version string `protobuf:""bytes,2,opt,name=version,proto3"" json:""version,omitempty""`
	// the path as specified by the install/instantiate transaction
	Path string `protobuf:""bytes,3,opt,name=path,proto3"" json:""path,omitempty""`
	// the chaincode function upon instantiation and its arguments. This will be
	// blank if the query is returning information about installed chaincodes.
	Input string `protobuf:""bytes,4,opt,name=input,proto3"" json:""input,omitempty""`
	// the name of the ESCC for this chaincode. This will be
	// blank if the query is returning information about installed chaincodes.
	Escc string `protobuf:""bytes,5,opt,name=escc,proto3"" json:""escc,omitempty""`
	// the name of the VSCC for this chaincode. This will be
	// blank if the query is returning information about installed chaincodes.
	Vscc string `protobuf:""bytes,6,opt,name=vscc,proto3"" json:""vscc,omitempty""`
	// the chaincode unique id.
	// computed as: H(
	//                H(name || version) ||
	//                H(CodePackage)
	//              )
	Id                   []byte   `protobuf:""bytes,7,opt,name=id,proto3"" json:""id,omitempty""`
	XXX_NoUnkeyedLiteral struct{} `json:""-""`
	XXX_unrecognized     []byte   `json:""-""`
	XXX_sizecache        int32    `json:""-""`
}
{code}
We have 2 options:
 # change the query results of the new lifecycle to make them compatible (in terms of returned information) to the old ones, and then simply use the results of LSCC.GETCHAINCODES to fill info for the legacy lifecycle
 # keep the current semantics of the query, and return similar info for the legacy lifecycle.

We need to apply appropriate shadowing rules so that if a chaincode is present on both lifecycles, information from the new lifecycle shadows that from the legacy.

We also need a flag to tell which of the chaincodes is currently defined in the new or the legacy lifecycle.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfn:k",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryChaincodeDefinition should return aggregate info from old and new lifecycle,FAB-15600,40257,40246,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ales,ales,01/Jun/19 2:09 AM,12/Jun/20 12:31 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The new version of the query should basically attempt to satisfy the query from the new lifecycle; failing that it should return results from the legacy lifecycle. Note that the query currently returns
{code:java}
type QueryChaincodeDefinitionResult struct {
	Sequence             int64                           `protobuf:""varint,1,opt,name=sequence,proto3"" json:""sequence,omitempty""`
	Version              string                          `protobuf:""bytes,2,opt,name=version,proto3"" json:""version,omitempty""`
	EndorsementPlugin    string                          `protobuf:""bytes,3,opt,name=endorsement_plugin,json=endorsementPlugin,proto3"" json:""endorsement_plugin,omitempty""`
	ValidationPlugin     string                          `protobuf:""bytes,4,opt,name=validation_plugin,json=validationPlugin,proto3"" json:""validation_plugin,omitempty""`
	ValidationParameter  []byte                          `protobuf:""bytes,5,opt,name=validation_parameter,json=validationParameter,proto3"" json:""validation_parameter,omitempty""`
	Collections          *common.CollectionConfigPackage `protobuf:""bytes,6,opt,name=collections,proto3"" json:""collections,omitempty""`
	InitRequired         bool                            `protobuf:""varint,7,opt,name=init_required,json=initRequired,proto3"" json:""init_required,omitempty""`
	XXX_NoUnkeyedLiteral struct{}                        `json:""-""`
	XXX_unrecognized     []byte                          `json:""-""`
	XXX_sizecache        int32                           `json:""-""`
}

{code}
but there currently isn't any query from the legacy lifecycle that returns both, so we might have to aggregate query results.

We also need a flag to tell whether the chaincode is currently defined in the new or the legacy lifecycle.",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfn:l",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
BYFN and Fabcar fail intermittently with the official couchdb,FAB-15601,40261,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yuki-kon,yuki-kon,yuki-kon,01/Jun/19 7:47 AM,05/Jun/19 8:05 PM,28/Oct/23 3:08 AM,05/Jun/19 8:05 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,"BYFN and Fabcar with couchdb are failing intermittently because CLI sends a request for joining a Channel before a Peer connects to the couchdb.
FAB-15464 pointed out that the couchdb container takes too long to startup after moving to the official couchdb image.
CI jobs for fabric-samples are failing due to the same reason.
To run BYFN and Fabcar successfully, we need a workaround to change the value of MAX_RETRY to wait the couchdb.",,lehors,yuki-kon,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15353,FAB-15464,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,0b12e687fb4c04095cde8901133ca80b783670ee,Unset,No,,,"1|i00pv0:",,,,Unset,Unset,,"$ cd fabric-samples/first-network
$ ./byfn.sh up -s couchdb",,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,yuki-kon,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jun/19 9:01 AM;yuki-kon;https://gerrit.hyperledger.org/r/#/c/fabric-samples/+/31665/;;;","03/Jun/19 11:28 PM;lehors;Unfortunately this only seems to have improved the situation a bit without solving it. The test goes further but still fails. We should try bumping it to an even higher number. Like 20.

So, I will submit that change.;;;","04/Jun/19 1:33 AM;yuki-kon;[~lehors] Thank you for investigating the problem and submitting the new CR. It sounds good to me to increase the MAX_RETRY to 20.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Wrong port number in build your first network,FAB-15602,40262,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,harsh-98,harsh-98,01/Jun/19 8:17 PM,13/Jul/19 12:27 AM,28/Oct/23 3:08 AM,13/Jul/19 12:27 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-docs,fabric-samples,,,,,0,,,,,,"In [https://github.com/hyperledger/fabric/edit/release-1.4/docs/source/build_network.rst], on line number 836, the port number of first peer peer0.org1.example.com is given 9051 instead of 7051",,denyeart,harsh-98,joe-alewine,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pv8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,harsh-98,joe-alewine,mastersingh24,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jun/19 8:38 PM;denyeart;[~sstone1] didn't we update the ports on purpose? did we miss something?;;;","07/Jul/19 8:27 PM;mastersingh24;Yeah ... looks like the wrong port slipped in;;;","08/Jul/19 7:08 AM;denyeart;Found it... wrong port slipped in https://gerrit.hyperledger.org/r/#/c/fabric/+/30483/ [~joe-alewine] , this was after the (correct) port changes were made in FAB-14509;;;","10/Jul/19 4:07 AM;joe-alewine;Yup, this was on me. The port changes happened in a PR I wasn't aware of that was merged quickly while I had a PR in the works about BYFN at the same time. I tried to find and fix all of the port changes but must have missed this one.;;;","10/Jul/19 4:18 AM;joe-alewine;This error does not appear in the master branch, so the change only needs to be pushed against release-1.4.;;;","10/Jul/19 4:24 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/fabric/+/32228;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update doc README, requirement.txt for supporting multi-languages",FAB-15603,40263,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,zRich,zRich,zRich,01/Jun/19 10:21 PM,26/Jul/19 9:51 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"To support multiple languages, we need to use python 3.6+ and upgrade corresponding packages to compatible versions. ",,zRich,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pvg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),zRich,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jul/19 9:51 AM;zRich;This change is to update the required package versions for supporting multi-language documentation. 
Sphinx update to 2.0.1 as 1.x has bugs. Python version upgraded to 3.6. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
crash on peer restart after installing CC using lifecycle 2.0 operations,FAB-15604,40264,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,muralisr,muralisr,02/Jun/19 2:45 AM,04/Jun/19 3:24 AM,28/Oct/23 3:08 AM,04/Jun/19 2:09 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"Deploy a chaincode using lifecycle 2.0 operations. Kill and restart the peer. You should see this crash (using latest commit level 36f783c4b94f58d1619d8bdae8546f35bfc5d8d1).

 
{code:java}
^[[34m2019-06-01 13:42:37.389 EDT [nodeCmd] serve -> INFO 001^[[0m Starting peer:
 Version: 2.0.0
 Commit SHA: 36f783c4b
 Go version: go1.12.5
 OS/Arch: darwin/amd64
 Chaincode:
 Base Docker Namespace: hyperledger
 Base Docker Label: org.hyperledger.fabric
 Docker Namespace: hyperledger
^[[34m2019-06-01 13:42:37.390 EDT [peer] getLocalAddress -> INFO 002^[[0m Auto-detected peer address: 192.168.1.96:7051
^[[34m2019-06-01 13:42:37.390 EDT [peer] getLocalAddress -> INFO 003^[[0m Host is 0.0.0.0 , falling back to auto-detected address: 192.168.1.96:7051
^[[33m2019-06-01 13:42:37.393 EDT [ccprovider] ListInstalledChaincodes -> WARN 004^[[0m Failed obtaining chaincode information about mycc:663998cb12e30285a155831ab40fe2357d89ff81a59dd29bf9c3554e30491568 bin : failed to unmarshal envelope from bytes
^[[35m2019-06-01 13:42:37.393 EDT [nodeCmd] serve -> PANI 005^[[0m Failed creating LegacyMetadataManager: +failed listing installed chaincodes: failed obtaining information about mycc:663998cb12e30285a155831ab40fe2357d89ff81a59dd29bf9c3554e30491568, version bin: failed to unmarshal envelope from bytes
panic: Failed creating LegacyMetadataManager: +failed listing installed chaincodes: failed obtaining information about mycc:663998cb12e30285a155831ab40fe2357d89ff81a59dd29bf9c3554e30491568, version bin: failed to unmarshal envelope from bytes
goroutine 1 [running]:
github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc00017c580, 0x0, 0x0, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:229 +0x546
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc000010cb8, 0xc00041d704, 0x4ff8eb0, 0x2a, 0xc00046f828, 0x1, 0x1, 0x0, 0x0, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0x101
github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Panicf(...)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:159
github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Panicf(...)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/common/flogging/zap.go:74
github.com/hyperledger/fabric/internal/peer/node.serve(0x5c8c9a0, 0x0, 0x0, 0x0, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/internal/peer/node/start.go:220 +0x8c0
github.com/hyperledger/fabric/internal/peer/node.glob..func1(0x5c46b20, 0x5c8c9a0, 0x0, 0x0, 0x0, 0x0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/internal/peer/node/start.go:122 +0xf1
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x5c46b20, 0x5c8c9a0, 0x0, 0x0, 0x5c46b20, 0x5c8c9a0)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:762 +0x465
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x5c46fe0, 0xc00046ff60, 0x1, 0x1)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:850 +0x2fc
github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(...)
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:800
main.main()
 /Users/muralisr/hyperledger/src/github.com/hyperledger/fabric/cmd/peer/main.go:51 +0x416
{code}",,muralisr,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15591,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00pvo:",,,,Unset,Unset,,"1.  Download latest fabric. Start peer and orderer locally. Use the standard package/install/approve/commit/invoke operations to create a chaincode and make sure its up and invoke/query ops work

export FABRIC_CFG_PATH=<path to your sampleconfig>
peer channel create -f myc.tx -c myc -o 127.0.0.1:7050
peer channel join -b myc.block -o 127.0.0.1:7050
peer lifecycle chaincode package ccpak.legacy.tar.gz --path ex02/cmd --label mycc
peer lifecycle chaincode install ccpak.legacy.tar.gz
export CC_PACKAGE_ID=<package id from above op>
peer lifecycle chaincode approveformyorg --channelID myc --name mycc --version 1.0 --init-required --package-id $CC_PACKAGE_ID --sequence 1 --waitForEvent
peer lifecycle chaincode commit -o 127.0.0.1:7050 --channelID myc --name mycc --version 1.0 --sequence 1 --init-required --waitForEvent
peer chaincode invoke -I -C myc -n mycc -c '{""Args"":[""invoke"",""a"", ""100"", ""b"", ""200""]}' -o 127.0.0.1:7050
peer chaincode query -C myc -n mycc -c '{""Args"":[""query"", ""a""]}'

2. Kill the peer and restart. You should see the stack mentioned in description",,Unset,,,,,,Unset,,Unset,,(Please add usage information),muralisr,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jun/19 2:54 AM;muralisr;This appears to have started from https://jira.hyperledger.org/browse/FAB-15234. Haven't dug in enough but seems that this assumes all installed chaincodes are legacy formatted ? 

If the ""*Steps to Reproduce:""* is incorrect in some way and needs to be adjusted for new lifecycle, lets make sure its fixed and stops the user from issuing wrong commands.

 

[~ales] [~denyeart] [~wlahti];;;","02/Jun/19 9:23 AM;muralisr;NOT-A-FIX but the following works and gives a hint as to direction of a fix

 
{code:java}
git diff
diff --git a/core/common/ccprovider/ccprovider.go b/core/common/ccprovider/ccprovider.go
index 85be078ad..c8b13f5e1 100644
--- a/core/common/ccprovider/ccprovider.go
+++ b/core/common/ccprovider/ccprovider.go
@@ -206,7 +206,7 @@ func (cifs *CCInfoFSImpl) ListInstalledChaincodes(dir string, ls DirEnumerator,
                ccPackage, err := ccFromPath(ccName, ccVersion, dir)
                if err != nil {
                        ccproviderLogger.Warning(""Failed obtaining chaincode information about"", ccName, ccVersion, "":"", err)
-                       return nil, errors.Wrapf(err, ""failed obtaining information about %s, version %s"", ccName, ccVersion)
+                       continue
                }

                chaincodes = append(chaincodes, chaincode.InstalledChaincode{
{code}
Perhaps we need a way of introspecting packages and pick only truly legacy (ie, marshalled ChaincodeDeploymentSpec)
  ;;;","03/Jun/19 11:48 PM;wlahti;This is an accidental side effect of our switch to separate install directories for _lifecycle and lscc chaincodes. ListInstalledChaincodesLegacy() in the PackageProvider wasn't updated to account for this, causing this panic at peer start when an _lifecycle chaincode has already been installed.  ;;;","04/Jun/19 12:29 AM;wlahti;https://gerrit.hyperledger.org/r/c/fabric/+/31676 . FYI, Ale already had an integration test CR that restarted a peer which also hit this issue after I rebased it on master. I've stacked Ale's test on top of the fix here. ;;;","04/Jun/19 1:12 AM;muralisr;OK. I was not aware of the `separate install directories for _lifecycle and lscc chaincodes. ` work. .. even better.;;;","04/Jun/19 2:08 AM;muralisr;[~wlahti] The CR fixed the issue in my env.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cscc tests should use local mocks,FAB-15605,40265,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,02/Jun/19 7:19 PM,06/Jun/19 2:46 AM,28/Oct/23 3:08 AM,06/Jun/19 2:46 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pvw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Java chaincode is failing intermittently initializing.,FAB-15606,40182,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,28/May/19 11:49 PM,03/Jun/19 10:19 PM,28/Oct/23 3:08 AM,03/Jun/19 10:19 PM,v2.0.0,,,,,,,,,,,,,,,,,,,,,,,0,ci-flake,,,,,"the HFCA CLient is failing intermittently with authentication error in the java end-2-end tests, this is currently marked as a flake but the same error has been observed several times, the authentication fail with the HFCA Client.

*Branch:* master
*Error Snippet:*

{code:java}
09:27:51 2019-05-28 13:27:51,326 main TRACE HFCAClient:1451 - responseBody: {""result"":"""",""errors"":[{""code"":20,""message"":""Authentication failure""}
09:27:51 ],""messages"":[],""success"":false} 
09:27:51 2019-05-28 13:27:51,326 main ERROR HFCAClient:1458 - POST request to https://localhost:7054 failed request body {""caname"":""ca0"",""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIHVMH4CAQAwHDEaMBgGA1UEAwwRdXNlcjE1NTkwNTAwMjhfMTUwWTATBgcqhkjO\nPQIBBggqhkjOPQMBBwNCAAS+/C0Y5dv9HDXsHwfhzGB5XKy6bDPv1zzR2WFW0/m3\n/ZCh8WZ32LCyDT+yd4j1I4Ah49yO4qWjevCBJuZT62s0oAAwCgYIKoZIzj0EAwID\nRwAwRAIgWpfkdfL3EVRwdnIpK7uHFPG5bx4BnxSv5KEB8Q9pccoCIGw3phEWZCtH\n6Z0GTQEadnUPMXVCYVkdJZC5/DqM1k8z\n-----END CERTIFICATE REQUEST-----\n""}. Response: {""result"":"""",""errors"":[{""code"":20,""message"":""Authentication failure""}
09:27:51 ],""messages"":[],""success"":false}
09:27:51 2019-05-28 13:27:51,327 main ERROR HFCAClient:677 - POST request to https://localhost:7054 failed request body {""caname"":""ca0"",""certificate_request"":""-----BEGIN CERTIFICATE REQUEST-----\nMIHVMH4CAQAwHDEaMBgGA1UEAwwRdXNlcjE1NTkwNTAwMjhfMTUwWTATBgcqhkjO\nPQIBBggqhkjOPQMBBwNCAAS+/C0Y5dv9HDXsHwfhzGB5XKy6bDPv1zzR2WFW0/m3\n/ZCh8WZ32LCyDT+yd4j1I4Ah49yO4qWjevCBJuZT62s0oAAwCgYIKoZIzj0EAwID\nRwAwRAIgWpfkdfL3EVRwdnIpK7uHFPG5bx4BnxSv5KEB8Q9pccoCIGw3phEWZCtH\n6Z0GTQEadnUPMXVCYVkdJZC5/DqM1k8z\n-----END CERTIFICATE REQUEST-----\n""}. Response: {""result"":"""",""errors"":[{""code"":20,""message"":""Authentication failure""}
09:27:51 ],""messages"":[],""success"":false}
{code}

*Build Log*

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/5419/console",,btl5037,rickr,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,a8ef7cebe188c2682aa84703a433d0df69c9dcf0,Unset,No,,,"1|i00pgk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,rickr,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jun/19 10:04 PM;rickr;That's not the error for the test failure.  That stacktrace I beleive is actuall expected.  The  error for failure is  below. 
This is a failure for the Java Chaincode initializing. So this must solved on the Fabric side of the fence. 


*09:27:51* [ERROR] Tests run: 49, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 656.852 s <<< FAILURE! - in org.hyperledger.fabric.sdkintegration.IntegrationSuite*09:27:51* [ERROR] setup(org.hyperledger.fabric.sdkintegration.End2endLifecycleIT)  Time elapsed: 117.427 s  <<< FAILURE!*09:27:51* java.lang.AssertionError: *09:27:51* Not enough endorsers for executeChaincode(move a,b,100):4 endorser error: failed to execute transaction b40ce26afceabcd874160518ba99d10fff498f671c379f1f5d7e7fbd55273b17: [channel v2channel] could not launch chaincode JavaLABEL:18f6da7f3855ef130378007567e72c48b0800ccfe6fb2534d10e22aea3e22aa8: error starting container: error starting container: Failed to generate platform-specific docker build: Error returned from build: 1 ""Gradle build*09:27:51* Starting a Gradle Daemon (subsequent builds will be faster)*09:27:51* Download 
[https://plugins.gradle.org/m2/com/github/johnrengelman/shadow/com.github.johnrengelman.shadow.gradle.plugin/2.0.3/com.github.johnrengelman.shadow.gradle.plugin-2.0.3.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/com/github/jengelman/gradle/plugins/shadow/2.0.3/shadow-2.0.3.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/org/ow2/asm/asm-commons/6.1/asm-commons-6.1.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/org/jdom/jdom2/2.0.6/jdom2-2.0.6.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/org/ow2/asm/asm/6.1/asm-6.1.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/org/apache/ant/ant/1.9.7/ant-1.9.7.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/org/apache/ant/ant-parent/1.9.7/ant-parent-1.9.7.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/org/ow2/asm/asm-analysis/6.1/asm-analysis-6.1.pom]
*09:27:51* Download 
[https://plugins.gradle.org/m2/org/ow2/asm/asm-tree/6.1/asm-tree-6.1.pom];;;","03/Jun/19 10:19 PM;sambhavdutt;The failure during the instantiation has not been observed and the java integration tests have been passing from the last two builds. 


*Build Log*

https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-end-2-end-x86_64/5439/consoleFull;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
bootstrap.sh does not tag docker images correctly,FAB-15607,40300,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,swetharepakula,denyeart,denyeart,04/Jun/19 2:05 AM,04/Jun/19 4:13 AM,28/Oct/23 3:08 AM,04/Jun/19 4:13 AM,,,,,,,,,,,,,,,,,,fabric-release,,,,,,0,,,,,,"FAB-15316 broke the bootstrap.sh, it no longer tags the pulled docker images, receive error:

""docker tag"" requires exactly 2 arguments.

The two arguments have been merged into a single argument due to the double quotes around both arguments that was merged on June 2nd:

[https://github.com/hyperledger/fabric/commit/c1685c7faa9d8631b54916b75de0c9613ab0e6aa#diff-d2fcc131c81c293118156830e0c17258R49]

 ",,denyeart,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15316,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pzw:",,,,Unset,Unset,,"./scripts/bootstrap.sh 2.0.0-alpha 2.0.0-alpha 0.4.15
demonstrates the issue.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,swetharepakula,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jun/19 2:13 AM;swetharepakula;https://gerrit.hyperledger.org/r/c/fabric/+/31681;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade your network components - V1.3.0 -> V1.4.1 - ./byfn.sh generate step fails ,FAB-15608,40320,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,pvrbharg,pvrbharg,04/Jun/19 4:16 AM,08/Oct/19 5:03 AM,28/Oct/23 3:08 AM,,v1.1.0,v1.2.1,v1.3.0,v1.4.0,,,,,,,,,,,,,,fabric-docs,,,,,,0,Documentation,,,,,"When I tried to upgrade my network from V1.3.0 to V1.4.1 release per instructions published at:
https://hyperledger-fabric.readthedocs.io/en/release-1.3/upgrading_your_network_tutorial.html#

I am seeing the following issue when the script tried to run:
../bin/configtxgen
step.

See the console output shown here:

hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric-samples/first-network$ git fetch origin
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric-samples/first-network$ git status
HEAD detached at v1.3.0
nothing to commit, working tree clean
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric-samples/first-network$ git checkout v1.3.0
HEAD is now at 94c21eb [FAB-12395] Pin samples and release for v1.3.0
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric-samples/first-network$ git status
HEAD detached at v1.3.0
nothing to commit, working tree clean
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric-samples/first-network$ ./byfn.sh generate
Generating certs and genesis block for channel 'mychannel' with CLI timeout of '10' seconds and CLI delay of '3' seconds
Continue? [Y/n] Y
proceeding ...
/home/hlbcadmin/go/src/github.com/hyperledger/fabric-samples/first-network/../bin/cryptogen

##########################################################
##### Generate certificates using cryptogen tool #########
##########################################################
+ cryptogen generate --config=./crypto-config.yaml
org1.example.com
org2.example.com
+ res=0
+ set +x

/home/hlbcadmin/go/src/github.com/hyperledger/fabric-samples/first-network/../bin/configtxgen
##########################################################
#########  Generating Orderer Genesis block ##############
##########################################################
+ configtxgen -profile TwoOrgsOrdererGenesis -outputBlock ./channel-artifacts/genesis.block
2019-06-03 18:45:01.303 UTC [common/tools/configtxgen] main -> INFO 001 Loading configuration
2019-06-03 18:45:01.315 UTC [common/tools/configtxgen/localconfig] Load -> CRIT 002 Error unmarshaling config into struct:  14 error(s) decoding:

* '' has invalid keys: channel
* 'Application' has invalid keys: Policies
* 'Orderer' has invalid keys: Policies
* 'Organizations[0]' has invalid keys: Policies
* 'Organizations[1]' has invalid keys: Policies
* 'Organizations[2]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer.Organizations[0]' has invalid keys: Policies
2019-06-03 18:45:01.315 UTC [common/tools/configtxgen] func1 -> CRIT 003 Error unmarshaling config into struct: 14 error(s) decoding:

* '' has invalid keys: channel
* 'Application' has invalid keys: Policies
* 'Orderer' has invalid keys: Policies
* 'Organizations[0]' has invalid keys: Policies
* 'Organizations[1]' has invalid keys: Policies
* 'Organizations[2]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer.Organizations[0]' has invalid keys: Policies
panic: Error unmarshaling config into struct: 14 error(s) decoding:

* '' has invalid keys: channel
* 'Application' has invalid keys: Policies
* 'Orderer' has invalid keys: Policies
* 'Organizations[0]' has invalid keys: Policies
* 'Organizations[1]' has invalid keys: Policies
* 'Organizations[2]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer.Organizations[0]' has invalid keys: Policies [recovered]
        panic: Error unmarshaling config into struct: 14 error(s) decoding:

* '' has invalid keys: channel
* 'Application' has invalid keys: Policies
* 'Orderer' has invalid keys: Policies
* 'Organizations[0]' has invalid keys: Policies
* 'Organizations[1]' has invalid keys: Policies
* 'Organizations[2]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsChannel].Application.Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[0]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Consortiums[SampleConsortium].Organizations[1]' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer' has invalid keys: Policies
* 'Profiles[TwoOrgsOrdererGenesis].Orderer.Organizations[0]' has invalid keys: Policies

goroutine 1 [running]:
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panic(0xc420232900, 0xc4204448d0, 0x1, 0x1)
        /w/workspace/fabric-binaries-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:188 +0xc7
main.main.func1()
        /w/workspace/fabric-binaries-x86_64/gopath/src/github.com/hyperledger/fabric/common/tools/configtxgen/main.go:242 +0x125
panic(0xc91b20, 0xc4204448c0)
        /opt/go/go1.9.2.linux.amd64/src/runtime/panic.go:491 +0x283
github.com/hyperledger/fabric/vendor/github.com/op/go-logging.(*Logger).Panic(0xc420232750, 0xc420431e60, 0x2, 0x2)
        /w/workspace/fabric-binaries-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/op/go-logging/logger.go:188 +0xc7
github.com/hyperledger/fabric/common/tools/configtxgen/localconfig.Load(0x7fff8cbfc9e1, 0x15, 0x0)
        /w/workspace/fabric-binaries-x86_64/gopath/src/github.com/hyperledger/fabric/common/tools/configtxgen/localconfig/config.go:243 +0x6c0
main.main()
        /w/workspace/fabric-binaries-x86_64/gopath/src/github.com/hyperledger/fabric/common/tools/configtxgen/main.go:250 +0x527
+ res=2
+ set +x
Failed to generate orderer genesis block...





",,denyeart,jyellick,pvrbharg,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00q3w:",,,,Unset,Unset,,"
Upgrade to 1.4.1

Verify 1.3.0 beginning state 
cd fabric-samples/first-network
./byfn.sh down 
git fetch origin 
git checkout v1.3.0 

./byfn.sh generate 
./byfn.sh up -t 3000 -i 1.3.0.  

Upgrade  
git fetch origin 
git checkout v1.4.1 
./byfn.sh upgrade -i 1.4.1 
Verify upgrade  
Docker ps
-peers and order show 1.4.1

docker exec -it cli bash  
export CHANNEL_NAME=mychannel
peer chaincode query -C $CHANNEL_NAME -n mycc -c '{""Args"":[""query"",""a""]}'
peer chaincode query -C $CHANNEL_NAME -n mycc -c '{""Args"":[""query”,""b""]}'
exit
 
Verify 1.4.1 beginning state 
cd fabric-samples/first-network
./byfn.sh down 
git fetch origin 
git status
git checkout v1.4.1 
./byfn.sh generate 
./byfn.sh up -t 3000 -i 1.4.1

",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,pvrbharg,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jun/19 4:21 AM;pvrbharg;The following work-around proved useful, successful and if the upgrade script works correctly - we would not need this tested work-around:

...
...
git checkout v1.3.0 

Do the following work-around to get past the ""Local fabric binaries and docker images are out of  sync. This may cause problems."" error or if you see the above error for which this issue has been opened.

cd fabric-samples/scripts  
./bootstrap.sh

./byfn.sh generate 
./byfn.sh up -t 3000 -i 1.3.0.  
...
...


CREDIT FOR THIS WORK-AROUND CREATION -  ""Rick Christianson - rick@ibm.com"" <rick@ibm.com> 

Thanks
;;;","10/Jun/19 8:19 PM;denyeart;[~wlahti] Can you take a look?;;;","10/Jun/19 11:36 PM;pvrbharg;Dear David and Will,

Thank you to both and please let me know if you need anything else. The issue is pretty easy to replicate - per script provided in this thread. Please let me know if we could have an expected fix for this issue - if you can provide [this issue showed up in a current billable engagement and I want to get this surfaced prior to issue becoming visible to wider population. Regards.;;;","24/Sep/19 11:54 PM;jyellick;[~wlahti] were you going to investigate this?;;;","08/Oct/19 5:03 AM;suryalnvs;[~pvrbharg] can you also share the version of binaries you have used?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Back-port to 1.4.2,FAB-15610,40356,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,04/Jun/19 3:14 PM,10/Jul/19 11:09 AM,28/Oct/23 3:08 AM,10/Jul/19 11:09 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The last commit that was cherry picked from master to release-1.4 was:

commit 8cefb8365a9109f85dfdb54eccf4336c473347b9 //on master
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14327 Race in BlockWriter corrupts config sequence

Which corresponds to:

commit 3affc910eecc10ac4641365de1187ee6e52a5b27 //on v1.4
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14327 Race in BlockWriter corrupts config sequence

------------------------------------------------------------------------------------------------------------------
 The commits that need to be cherry-picked to v1.4 are (from new to old):

commit ff991ac8380a7f658f3e89a5bb426eaafa310614
Author: Yoav Tock <tock@il.ibm.com>
Date: Sun Jun 16 14:22:29 2019 +0300

FAB-15725 Consensus migration: Raft start revised

commit 9c7e8e514ffd12a01599bda2f053c239a88c733e
Author: Yoav Tock <tock@il.ibm.com>
Date: Wed Jun 12 15:31:11 2019 +0300

FAB-15703 Consensus migration: solo to raft

commit 80eeb2019ad8207c89c733d75ea041078cc7f0a6
 Author: Yoav Tock <tock@il.ibm.com>
 Date: Wed Jun 12 13:58:05 2019 +0300

FAB-15697 streamline main_test.go 

commit 08074ef590fc982b3f21c5d010f22acf9ba72457  <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>
 Date: Wed Jun 12 13:51:01 2019 +0300

FAB-15686 Rename Chain to Channel

commit cb6ac1dd8d0d6f64bb0f36dcf1962adc2eb16c53  <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15642 Consensus mig.: permissive maintenance filter

commit 963a9cc3a646dfb9953800c4a1017c79c6dfff85  <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15300 Consensus migration: integ. test extended

commit 5033e2fdd8166c2f6c171bc86d77a28a9a2d3721  <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15173 Consensus migration: maintenance filter

commit 89160df9dd944c9b9296ec9186ffa073432af54b <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15376 fix sizefilter: take dynamic resources

commit 9af50a5ea1a6f4e154f5cb787c470fda87231b45 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15313 Consensus migration: polish main_test

commit f2f31b8f6c37f69d99dbaad2accfe67b585a6234 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15175 Consensus migration: integration test

commit aa8d1e6cf0acc51055a42b7256bb3f195357adc9 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15172 Consensus migration: msgprocessor

commit 504304590cbe1df73c75ff39899839b0fc90a734 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15299 Consensus migration: Raft start sequence

commit 04dd57f1b0656fb62ef8b269c4e383ad45bfa91c <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15174 Consensus migration: server boot sequence

commit 8a0f72590b77d7a9a55501f6d33efca6829a8a1b <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15176 Consensus migration: blockwriter nil metadata

commit 0ccf7c3df7482cfb5a7ffdd69558f08580d4161d <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15102 Consensus migration: protos

commit 1746fbd20b38d43eaa5d175de76dfea8ec98be11 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15101 Consensus migration: capabilities

commit 416b144fe03fc064e40ac863383f29e354d55b77 <<< *Do this right after V1-cleanup #4*, even though in master it is later. <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15511 Kafka2Raft-V1 cleanup #5

commit 0794b780210b3e203034e07272922bd98c568677 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15045 Mig-v1 cleanup #4

commit 925db23950fb4045f854e95420a8cde21b4b68e8 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15044 Mig-v1 cleanup #3

commit 22ac9e683df4fbeace62506ced34991f83a46faa <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15043 Mig-v1 cleanup #2

commit 15bf213aa5724696b70cc2b358ab083fff9dc74a *<<< squashed to 2d92 * <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14700 Kafka2Raft validate broadcast fix

commit 2d924d0d8a7e6da24b873a121fe13e360afcce9f <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14700 Kafka2Raft validate broadcast

commit a0a91895d6abfc200bbf9ed3cb696e4c9c51353a <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14699 Kafka2Raft renames & skeletons

commit 5d98705ed37e42c54c2aa50cacbd2a304fcde820 *<<< skip this one*
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14415 Multi-node kafka2raft e2e test

commit 702c5bd03c5617de4332a749d92a16ce5c8ca7f7 <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14248 gate migration with Channel V1_4_2

commit 63c4056d8bdb81dbf6f689982fb85d2b75306b27 <<< *This one is pulled in, remove the integration test early* <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-15042 Mig-v1 cleanup #1

commit 61b445cc2907da2355660827170f05fda8b21c2f <<< Merged to 1.4, Done
 Author: Yoav Tock <tock@il.ibm.com>

FAB-14180 Chan. Cap. V1_4_2 Consensus type migration",,tock,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jun/19 5:11 PM;tock;tockCRs-master-short.log;https://jira.hyperledger.org/secure/attachment/17295/tockCRs-master-short.log","04/Jun/19 5:09 PM;tock;tockCRs-v14-short.log;https://jira.hyperledger.org/secure/attachment/17294/tockCRs-v14-short.log",,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qbg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
FabToken repeats in the Glossary,FAB-15612,40359,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid,randyshu,randyshu,randyshu,04/Jun/19 5:23 PM,11/Jan/20 1:11 AM,28/Oct/23 3:08 AM,11/Jan/20 1:11 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"[https://hyperledger-fabric.readthedocs.io/en/latest/glossary.html#fabtoken]

!image-2019-06-04-16-22-32-715.png!",,negupta,randyshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jun/19 5:22 PM;randyshu;image-2019-06-04-16-22-32-715.png;https://jira.hyperledger.org/secure/attachment/17296/image-2019-06-04-16-22-32-715.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qc4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,randyshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/20 1:11 AM;negupta;Has been removed/resolved. closing;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Single bi-directional connection management in gossip/comm,FAB-15613,40360,,Task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,ronenschafferibm,ronenschafferibm,04/Jun/19 5:34 PM,15/Apr/21 7:27 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,Future,,,,fabric-gossip,,,,,,0,,,,,,"The design of gossip communication is to manage a single bi-directional connection between a pair of peers.

When 2 connections are created simultaneously between a pair of peers where both peers initiate a connection to each other there might be a race condition. Currently there are no tests in gossip/comm that reveal this. Although, there are tests in higher layers that reveal the problem, TestLeaderYield() for example. TestBasic() in gossip/comm can be used to reveal the race condition after removing the [sleep |https://github.com/hyperledger/fabric/blob/0a9520e9f3bfb8a1246637df14fd770b8f4698f0/gossip/comm/comm_test.go#L444]between the sendings.

The following sequence of events happen on failures (the following diagram might help understand). Comm1 and comm2 open connections to each other simultaneously. Comm1 calls getConnection(). There, it [creates|https://github.com/hyperledger/fabric/blob/0a9520e9f3bfb8a1246637df14fd770b8f4698f0/gossip/comm/conn.go#L90] a connection to comm2 (1st connection), and because there are [no existing|https://github.com/hyperledger/fabric/blob/0a9520e9f3bfb8a1246637df14fd770b8f4698f0/gossip/comm/conn.go#L105-L113] connections (comm1 receives the connection from comm2 later), it keeps it. Then, when comm1 receives the connection from comm2, comm1 enters onConnected(), [closes |https://github.com/hyperledger/fabric/blob/0a9520e9f3bfb8a1246637df14fd770b8f4698f0/gossip/comm/conn.go#L164-L166]1st connection (the connection it opened) and keeps the connection from comm2 (2nd connection).
From comm2 perspective, it enters getConnection(). There, between the [first check |https://github.com/hyperledger/fabric/blob/0a9520e9f3bfb8a1246637df14fd770b8f4698f0/gossip/comm/conn.go#L82]and the [second check|https://github.com/hyperledger/fabric/blob/0a9520e9f3bfb8a1246637df14fd770b8f4698f0/gossip/comm/conn.go#L106], it receives the connection from comm1 (1st connection). Since it passed the first check, it creates a connection to comm1 (2nd connection). But, because it received the connection from comm1, it doesn’t pass the second check and [closes |https://github.com/hyperledger/fabric/blob/0a9520e9f3bfb8a1246637df14fd770b8f4698f0/gossip/comm/conn.go#L110]the connection it just opened (2nd connection).
In conclusion, comm1 closes the connection it opened (1st connection) and comm2 closes the connection it opened (2nd connection) and we end up with no opened connection, so any message sent will fail.
 
Alternatively, comm1 may fail earlier (before it reaches onConnected()), the same way as comm2. Namely, comm1 enters getConnection() and receives the connection from comm2 (2nd connection) between the two checks for an existing connection. It passes the first check and because of the receiving connection it closes the connection it created (1st connection).
The bottom line is the same.

 

!image-2019-06-04-11-31-14-241.png!",,denyeart,MHBauer,naaman,ronenschafferibm,swetharepakula,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12065,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jun/19 5:31 PM;ronenschafferibm;image-2019-06-04-11-31-14-241.png;https://jira.hyperledger.org/secure/attachment/17297/image-2019-06-04-11-31-14-241.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:96",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,naaman,ronenschafferibm,swetharepakula,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jun/19 1:02 AM;yacovm;I think what we can do is:
* When you initiate a connection to a remote peer- record the time it happens. 
* If you get a connection from the same remote peer within a short time window (say, a second) :
** W.L.O.G if your ID is lower than the remote peer, close the incoming new connection and ignore it.
** Else, your ID is the higher than the remote peer, so close your own old connection and use the new connection.
This way, when 2 peers open connections in parallel then the one with the lower ID gets to be the client, and the one with the higher ID gets to be the server.

* If you get a connection from (the same) remote peer not within a short time window, meaning - your connection to it was created too far in the past, then always close your connection and replace it with the new client side connection from the remote peer.

[~C0rWin] [~naaman] wdyt? ;;;","13/Jun/19 2:13 AM;naaman;[~yacovm] Ronen prepared a proposal for a solution that is similar to what you described but a bit more elaborate (e.g., one of the peers may run the original version of the code). [~ronenschafferibm] I assume you'll add your proposed solution here shortly.;;;","13/Jun/19 8:14 PM;ronenschafferibm;I wrote a short document that describes the current implementation and its problems.
Additionally, I wrote 2 proposals to address them.

[~yacovm] the 2nd proposal is similar to yours.

[https://docs.google.com/document/d/13MMvR_UNigHLqc1rgEj9KYa-AY4RP6kP91gYagKbblA/edit?usp=sharing];;;","14/Jun/19 2:05 AM;MHBauer;I still don't understand why we're tracking connections at all.;;;","14/Jun/19 11:39 AM;naaman;We are tracking connections because we want to maintain a single bi-directional connection between a pair of peers. Having just a single connection makes failure detection and maintaining membership view more reliable. Both are fundamental to gossip (and group communication is general). You have to track connection to at least be able to say if the remote node is communicating with you or not. If there are multiple connections then some may not be active which complicates things. ;;;","28/Oct/19 11:47 PM;sykesm;[~yacovm] This has been ""assigned"" to you. Are you working it or should we unassign it?

Thanks.;;;","28/Oct/19 11:56 PM;yacovm;I did it, I picked his CR, but no one reviewed it :( 

https://gerrit.hyperledger.org/r/#/c/fabric/+/32003/;;;","28/Oct/19 11:57 PM;yacovm;well, you did... and I addressed your comments but no one reviewed it after that ;;;","29/Oct/19 6:19 AM;sykesm;I'll try to fix the merge conflict and put it back out there for review.;;;","29/Oct/19 6:54 AM;yacovm;I would really prefer we just bump the fix version to 2.1 and I'll start from scratch. 
Always better to start from scratch. 

This is really not something that effects production;;;","29/Oct/19 7:02 AM;sykesm;I had assumed that an open CR meant that this was desired. Marking for future and removing from the board.;;;","09/Apr/20 12:05 AM;denyeart;Hit again:

--- FAIL: TestLeaderYield (30.05s)
    gossip_service_test.go:629: Failed to establish full channel membership. Only 0 out of 2 peers have full membership

https://dev.azure.com/Hyperledger/Fabric/_build/results?buildId=11638&view=logs&jobId=a11cdf60-0d11-5130-c801-1b4953009464&j=a11cdf60-0d11-5130-c801-1b4953009464&t=849b73ad-cbaa-5065-7214-c0ac3d42920d;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove mgmt dependency from orderer,FAB-15614,40361,28781,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,04/Jun/19 6:05 PM,05/Jun/19 10:26 AM,28/Oct/23 3:08 AM,05/Jun/19 10:26 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qck:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jun/19 6:08 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31690;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
intergrate cache with statecouchdb,FAB-15616,40366,12402,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,04/Jun/19 9:03 PM,21/Nov/19 3:05 AM,28/Oct/23 3:08 AM,21/Nov/19 3:05 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qdg:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestNewGossipStateProvider_BatchingOfStateRequest failed in gossip as foobar validation failed and peer was not accessible,FAB-15617,40367,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sambhavdutt,sambhavdutt,04/Jun/19 10:30 PM,26/Jul/19 4:35 AM,28/Oct/23 3:08 AM,26/Jul/19 4:35 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"unit-test-coverage-daily, TestNewGossipStateProvider_BatchingOfStateRequest failed in gossip as foobar validation failed and peer was not accessible. 
 *Branch:* master
 *Platform:* x86_64
 *Error Snippet:*
{code:java}
20:31:01 2019-06-04 00:30:14.533 UTC [gossip.privdata] StoreBlock -> ERRO 008 Validation failed: foobar
20:31:01 2019-06-04 00:30:15.535 UTC [gossip.gossip#p0] NewGossipService -> WARN 01b External endpoint is empty, peer will not be accessible outside of its organization
.
20:31:02 2019-06-04 00:30:47.201 UTC [gossip.comm] sendToEndpoint -> WARN 1e19 Failed obtaining connection for 127.0.0.1:43431, PKIid:3132372e302e302e313a3433343331 reason: ConnStore is closing
20:31:02 --- FAIL: TestNewGossipStateProvider_BatchingOfStateRequest (31.31s)
20:31:02     state_test.go:1656: Started to spin off, until predicate will be satisfied.
{code}
*Build Log*

https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-unit-test-coverage-daily-master-x86_64/449/",,denyeart,MHBauer,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,e5bbf1173c08152796f9cf9299e8653c1cc81c41,Unset,No,,,"1|i00qdo:",,,,Unset,Unset,,"maybe with:
go test -v -race -count 1000 -failfast -run TestNewGossipStateProvider",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,sambhavdutt,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 9:11 AM;MHBauer;Massive set of races at the same time while attempting to repro:
==================
WARNING: DATA RACE
Write at 0x00c002d7b9e0 by goroutine 1205:
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).learnExistingMembers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:821 +0x6c2
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:533 +0xcf1
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:373 +0xe6a
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:297 +0x162

Previous read at 0x00c002d7b9e0 by goroutine 1895:
  github.com/hyperledger/fabric/gossip/discovery.(*NetworkMember).String()
      <autogenerated>:1 +0x77
  fmt.(*pp).handleMethods()
      /Users/mhb/.go/src/fmt/print.go:616 +0x433
  fmt.(*pp).printArg()
      /Users/mhb/.go/src/fmt/print.go:699 +0x24f
  fmt.(*pp).doPrintln()
      /Users/mhb/.go/src/fmt/print.go:1159 +0xb2
  fmt.Sprintln()
      /Users/mhb/.go/src/fmt/print.go:282 +0x5f
  github.com/hyperledger/fabric/common/flogging.formatArgs()
      /Users/mhb/go/src/github.com/hyperledger/fabric/common/flogging/zap.go:105 +0x50
  github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Warning()
      /Users/mhb/go/src/github.com/hyperledger/fabric/common/flogging/zap.go:79 +0x70
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).expireDeadMembers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:712 +0x430
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handlePresumedDeadPeers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:275 +0x2f1

Goroutine 1205 (running) created at:
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:117 +0x838
  github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:129 +0x1557
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:389 +0x10b1
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:441 +0xf1
  github.com/hyperledger/fabric/gossip/state.TestNewGossipStateProvider_SendingManyMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:344 +0x70a
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163

Goroutine 1895 (running) created at:
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:119 +0x87c
  github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:129 +0x1557
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:389 +0x10b1
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:441 +0xf1
  github.com/hyperledger/fabric/gossip/state.TestNewGossipStateProvider_SendingManyMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:344 +0x70a
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163
==================
2019-06-04 17:10:24.808 PDT [gossip.discovery#127.0.0.1:60533] expireDeadMembers -> WARN 221 Exiting
==================
WARNING: DATA RACE
Write at 0x00c002d7b9f0 by goroutine 1205:
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).learnExistingMembers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:822 +0x761
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:533 +0xcf1
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:373 +0xe6a
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:297 +0x162

Previous read at 0x00c002d7b9f0 by goroutine 1895:
  github.com/hyperledger/fabric/gossip/discovery.(*NetworkMember).String()
      <autogenerated>:1 +0x77
  fmt.(*pp).handleMethods()
      /Users/mhb/.go/src/fmt/print.go:616 +0x433
  fmt.(*pp).printArg()
      /Users/mhb/.go/src/fmt/print.go:699 +0x24f
  fmt.(*pp).doPrintln()
      /Users/mhb/.go/src/fmt/print.go:1159 +0xb2
  fmt.Sprintln()
      /Users/mhb/.go/src/fmt/print.go:282 +0x5f
  github.com/hyperledger/fabric/common/flogging.formatArgs()
      /Users/mhb/go/src/github.com/hyperledger/fabric/common/flogging/zap.go:105 +0x50
  github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Warning()
      /Users/mhb/go/src/github.com/hyperledger/fabric/common/flogging/zap.go:79 +0x70
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).expireDeadMembers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:712 +0x430
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handlePresumedDeadPeers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:275 +0x2f1

Goroutine 1205 (running) created at:
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:117 +0x838
  github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:129 +0x1557
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:389 +0x10b1
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:441 +0xf1
  github.com/hyperledger/fabric/gossip/state.TestNewGossipStateProvider_SendingManyMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:344 +0x70a
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163

Goroutine 1895 (running) created at:
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:119 +0x87c
  github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:129 +0x1557
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:389 +0x10b1
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:441 +0xf1
  github.com/hyperledger/fabric/gossip/state.TestNewGossipStateProvider_SendingManyMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:344 +0x70a
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163
==================
==================
WARNING: DATA RACE
Write at 0x00c002d7ba20 by goroutine 1205:
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).learnExistingMembers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:823 +0x7a9
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleAliveMessage()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:533 +0xcf1
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMsgFromComm()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:373 +0xe6a
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handleMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:297 +0x162

Previous read at 0x00c002d7ba20 by goroutine 1895:
  github.com/hyperledger/fabric/gossip/discovery.(*NetworkMember).String()
      <autogenerated>:1 +0x77
  fmt.(*pp).handleMethods()
      /Users/mhb/.go/src/fmt/print.go:616 +0x433
  fmt.(*pp).printArg()
      /Users/mhb/.go/src/fmt/print.go:699 +0x24f
  fmt.(*pp).doPrintln()
      /Users/mhb/.go/src/fmt/print.go:1159 +0xb2
  fmt.Sprintln()
      /Users/mhb/.go/src/fmt/print.go:282 +0x5f
  github.com/hyperledger/fabric/common/flogging.formatArgs()
      /Users/mhb/go/src/github.com/hyperledger/fabric/common/flogging/zap.go:105 +0x50
  github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Warning()
      /Users/mhb/go/src/github.com/hyperledger/fabric/common/flogging/zap.go:79 +0x70
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).expireDeadMembers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:712 +0x430
  github.com/hyperledger/fabric/gossip/discovery.(*gossipDiscoveryImpl).handlePresumedDeadPeers()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:275 +0x2f1

Goroutine 1205 (running) created at:
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:117 +0x838
  github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:129 +0x1557
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:389 +0x10b1
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:441 +0xf1
  github.com/hyperledger/fabric/gossip/state.TestNewGossipStateProvider_SendingManyMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:344 +0x70a
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163

Goroutine 1895 (running) created at:
  github.com/hyperledger/fabric/gossip/discovery.NewDiscoveryService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/discovery/discovery_impl.go:119 +0x87c
  github.com/hyperledger/fabric/gossip/gossip.NewGossipService()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/gossip/gossip_impl.go:129 +0x1557
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidatorWithMetrics()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:389 +0x10b1
  github.com/hyperledger/fabric/gossip/state.newPeerNodeWithGossipWithValidator()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:441 +0xf1
  github.com/hyperledger/fabric/gossip/state.TestNewGossipStateProvider_SendingManyMessages()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state_test.go:344 +0x70a
  testing.tRunner()
      /Users/mhb/.go/src/testing/testing.go:865 +0x163
==================
2019-06-04 17:10:24.859 PDT [gossip.discovery#127.0.0.1:60533] learnExistingMembers -> WARN 222 pki_id:""127.0.0.1:60501""  has already expired
--- FAIL: TestNewGossipStateProvider_SendingManyMessages (48.99s)
    state_test.go:1656: Started to spin off, until predicate will be satisfied.
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1111: Peer discovery has not finished yet
    state_test.go:1115: All peer discovered each other!!!
    state_test.go:1661: Done.
    state_test.go:1671: Stop waiting until timeout or true
    state_test.go:1119: Waiting for all blocks to arrive.
    state_test.go:1656: Started to spin off, until predicate will be satisfied.
    state_test.go:1121: Trying to see all peers get all blocks
    state_test.go:1128: All peers have same ledger height!!!
    state_test.go:1661: Done.
    state_test.go:1671: Stop waiting until timeout or true
    testing.go:809: race detected during execution of test
FAIL
exit status 1
FAIL	github.com/hyperledger/fabric/gossip/state	470.182s;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix broken link on smart contract page,FAB-15620,40401,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,odowdaibm,pandrejko,pandrejko,05/Jun/19 1:10 AM,06/Jun/19 12:21 PM,28/Oct/23 3:08 AM,06/Jun/19 12:21 PM,v1.4.0,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-docs,,,,,,0,,,,,,"The link to smart contract on this page [+{color:#0000ff}https://hyperledger-fabric.readthedocs.io/en/latest/peers/peers.html{color}+|https://urldefense.proofpoint.com/v2/url?u=https-3A__hyperledger-2Dfabric.readthedocs.io_en_latest_peers_peers.html&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=FWiwMUSIAq7Ii1KJX8rdZWEsrplZzcrGwWreBa-fmbA&m=tGWcamCqxbmYGNXuElNED91bOvoKiSnCrdQQtupwDtM&s=8MGRHUDGc_--GB5OTAk058lsH4W7iqyMOgdb_zioX1U&e=] leads to a page that does not exist. 

It redirects to page [+{color:#0000ff}https://hyperledger-fabric.readthedocs.io/en/latest/peers/smartcontract/smartcontract.html{color}+|https://urldefense.proofpoint.com/v2/url?u=https-3A__hyperledger-2Dfabric.readthedocs.io_en_latest_peers_smartcontract_smartcontract.html&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=FWiwMUSIAq7Ii1KJX8rdZWEsrplZzcrGwWreBa-fmbA&m=tGWcamCqxbmYGNXuElNED91bOvoKiSnCrdQQtupwDtM&s=A1jJP0eNvUCw0vhgHP6Nw_Mox4h3BVFoTuzqLxD8XeQ&e=]. I think the correct page after 1.4 release is [+{color:#0000ff}https://hyperledger-fabric.readthedocs.io/en/release-1.4/smartcontract/smartcontract.html{color}+|https://urldefense.proofpoint.com/v2/url?u=https-3A__hyperledger-2Dfabric.readthedocs.io_en_release-2D1.4_smartcontract_smartcontract.html&d=DwMFaQ&c=jf_iaSHvJObTbx-siA1ZOg&r=FWiwMUSIAq7Ii1KJX8rdZWEsrplZzcrGwWreBa-fmbA&m=tGWcamCqxbmYGNXuElNED91bOvoKiSnCrdQQtupwDtM&s=-BV2EqeyAXwEhWhxUxmTPo3y2tXGIhXtTMyd9qdsi8I&e=]",,denyeart,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:64",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,pandrejko,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jun/19 7:01 AM;denyeart;master: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31729/]

release-1.4: https://gerrit.hyperledger.org/r/#/c/fabric/+/31736/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Race in conn.go for wait group,FAB-15621,40404,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,swetharepakula,swetharepakula,swetharepakula,05/Jun/19 3:24 AM,15/Jun/19 7:34 PM,28/Oct/23 3:08 AM,15/Jun/19 7:34 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,,,,,,"There is a race between calling wait on the connection wait group and adding to it.

[https://github.com/hyperledger/fabric/blob/master/gossip/comm/conn.go#L293]

[https://github.com/hyperledger/fabric/blob/master/gossip/comm/conn.go#L243]",,MHBauer,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qj8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,swetharepakula,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 6:04 AM;MHBauer;looks like

==================
WARNING: DATA RACE
Write at 0x00c0029349b0 by goroutine 1299:
  sync.(*WaitGroup).Wait()
      /Users/mhb/.go/src/internal/race/race.go:41 +0xef
  github.com/hyperledger/fabric/gossip/comm.(*connection).close()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:243 +0x1c7
  github.com/hyperledger/fabric/gossip/comm.(*connectionStore).onConnected()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:165 +0x70b
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).GossipStream()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:557 +0x494
  github.com/hyperledger/fabric/protos/gossip._Gossip_GossipStream_Handler()
      /Users/mhb/go/src/github.com/hyperledger/fabric/protos/gossip/message.pb.go:2466 +0xcd
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1176 +0x1669
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1256 +0x12e5
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:691 +0xac

Previous read at 0x00c0029349b0 by goroutine 1936:
  sync.(*WaitGroup).Add()
      /Users/mhb/.go/src/internal/race/race.go:37 +0x169
  github.com/hyperledger/fabric/gossip/comm.(*connection).serviceConnection()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:293 +0xf4

Goroutine 1299 (running) created at:
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:689 +0xb8
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).operateHeaders()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:421 +0x1622
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).HandleStreams()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:461 +0x37a
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:687 +0x170
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleRawConn.func1()
      /Users/mhb/go/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:649 +0x50

Goroutine 1936 (running) created at:
  github.com/hyperledger/fabric/gossip/comm.(*connectionStore).getConnection()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/conn.go:124 +0x878
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).sendToEndpoint()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:231 +0x2ce
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).Send.func1()
      /Users/mhb/go/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:218 +0x51
==================;;;","05/Jun/19 8:06 AM;swetharepakula;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31710/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Hygiene Changes in comm,FAB-15622,40405,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,swetharepakula,swetharepakula,swetharepakula,05/Jun/19 3:29 AM,03/Jul/19 10:52 PM,28/Oct/23 3:08 AM,03/Jul/19 10:52 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,,,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qjg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 8:07 AM;swetharepakula;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31580/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Docker info from common.Metadata,FAB-15623,40408,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,05/Jun/19 4:06 AM,05/Jun/19 4:06 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"var BaseDockerLabel string = ""org.hyperledger.fabric""
var DockerNamespace string = ""hyperledger""
var BaseDockerNamespace string = ""hyperledger""

should be removed and config should explicitly specify the fully image names",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qk4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
ReAdd RunQuery/RunInvoke functions,FAB-15624,40409,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,05/Jun/19 4:33 AM,10/Jun/19 8:16 PM,28/Oct/23 3:08 AM,10/Jun/19 8:16 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"See failure here

[https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14257/console]",,ales,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qkc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 4:36 AM;ales;https://gerrit.hyperledger.org/r/c/fabric/+/31699;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add UT for Simple Asset Chaincode,FAB-15625,40410,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,05/Jun/19 5:24 AM,03/Dec/19 8:32 AM,28/Oct/23 3:08 AM,03/Dec/19 8:32 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,Add unit test for chaincode/sacc,,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qkk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip/state_test.go calls t off of main goroutine,FAB-15626,40413,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,sykesm,MHBauer,MHBauer,05/Jun/19 7:16 AM,12/Jun/19 6:50 AM,28/Oct/23 3:08 AM,12/Jun/19 6:50 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"This leads to panics

 

[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12626/console]

{code} 
*14:54:41* goroutine 12306 [running]:*14:54:41* testing.(*common).logDepth(0xc0001dc600, 0xc00289f500, 0x36, 0x3)*14:54:41* 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:634 +0x3a6*14:54:41* testing.(*common).log(...)*14:54:41* 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:614*14:54:41* testing.(*common).Logf(0xc0001dc600, 0x11f086e, 0x2, 0xc001731df0, 0x1, 0x1)*14:54:41* 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:649 +0x7f*14:54:41* github.com/hyperledger/fabric/common/flogging/floggingtest.(*TestingWriter).Write(0xc0001881e0, 0xc000a2bc00, 0x37, 0x400, 0x1b9fe20, 0x0, 0x0)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/floggingtest/logger.go:195 +0xf7*14:54:41* github.com/hyperledger/fabric/common/flogging/floggingtest.(*RecordingCore).Write(0xc0001ce280, 0xff, 0xbf35d80846c54a83, 0x6fbf6b746, 0x1b9fe20, 0x0, 0x0, 0xc0011e90e0, 0x1f, 0x1, ...)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/floggingtest/logger.go:155 +0x123*14:54:41* github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc0031ba420, 0x0, 0x0, 0x0)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:215 +0x119*14:54:41* github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0002e6028, 0xff, 0xc0011e90e0, 0x1f, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0x101*14:54:41* github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Debugf(...)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:133*14:54:41* github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Debug(0xc0002e6030, 0xc001731d60, 0x1, 0x1)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:61 +0x9a*14:54:41* github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen(0xc006841220)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:361 +0x31c*14:54:41* created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:335 +0x886*14:54:41* panic: Log in goroutine after TestHaltChainProcessing has completed*14:54:41* *14:54:41* goroutine 12307 [running]:*14:54:41* testing.(*common).logDepth(0xc0001dc600, 0xc0014eb5c0, 0x5e, 0x3)*14:54:41* 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:634 +0x3a6*14:54:41* testing.(*common).log(...)*14:54:41* 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:614*14:54:41* testing.(*common).Logf(0xc0001dc600, 0x11f086e, 0x2, 0xc0012b9770, 0x1, 0x1)*14:54:41* 	/opt/go/go1.12.5.linux.amd64/src/testing/testing.go:649 +0x7f*14:54:41* github.com/hyperledger/fabric/common/flogging/floggingtest.(*TestingWriter).Write(0xc0001881e0, 0xc004c0e000, 0x5f, 0x400, 0x1b9fe20, 0x0, 0x0)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/floggingtest/logger.go:195 +0xf7*14:54:41* github.com/hyperledger/fabric/common/flogging/floggingtest.(*RecordingCore).Write(0xc0001ce280, 0xff, 0xbf35d80846c73647, 0x6fbf8a311, 0x1b9fe20, 0x0, 0x0, 0xc00847fec0, 0x3e, 0x1, ...)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/floggingtest/logger.go:155 +0x123*14:54:41* github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore.(*CheckedEntry).Write(0xc007398840, 0x0, 0x0, 0x0)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/zapcore/entry.go:215 +0x119*14:54:41* github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).log(0xc0002e6028, 0xff, 0xc00847fec0, 0x3e, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:234 +0x101*14:54:41* github.com/hyperledger/fabric/vendor/go.uber.org/zap.(*SugaredLogger).Debugf(...)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/go.uber.org/zap/sugar.go:133*14:54:41* github.com/hyperledger/fabric/common/flogging.(*FabricLogger).Debug(0xc0002e6030, 0xc0012b96e0, 0x1, 0x1)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/common/flogging/zap.go:61 +0x9a*14:54:41* github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).deliverPayloads(0xc006841220)*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:661 +0xd2c*14:54:41* created by github.com/hyperledger/fabric/gossip/state.NewGossipStateProvider*14:54:41* 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:337 +0x8a8*14:54:41* FAIL	github.com/hyperledger/fabric/gossip/state	30.020s*14:54:43* ok  	github.com/hyperledger/fabric/gossip/state/mocks	0.018s	coverage: 55.6% of statements*14:54:49* ok  	github.com/hyperledger/fabric/gossip/util	4.051s	coverage: 78.5% of statements*14:54:49* Makefile:199: recipe for target 'unit-test' failed
{code}",,denyeart,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ql0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,MHBauer,sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 7:36 AM;MHBauer;hit in [https://gerrit.hyperledger.org/r/#/c/fabric/+/31709/]

 

attempted CR in https://gerrit.hyperledger.org/r/#/c/fabric/+/31711/;;;","06/Jun/19 10:40 AM;MHBauer;It's even worse than I thought, we replace the zap logger endpoint with calls to t.Logf, which we then read during the test. This is a bad test. We shouldn't be sneaking state out through a logger.

I'm not sure this is fixable:
https://github.com/hyperledger/fabric/blame/9dee2f21a3798ce4069aea1128aefd7159e5ff63/common/flogging/floggingtest/logger.go#L237;;;","06/Jun/19 10:42 AM;MHBauer;Actually reading the stack trace this time:
https://github.com/hyperledger/fabric/blame/9dee2f21a3798ce4069aea1128aefd7159e5ff63/common/flogging/floggingtest/logger.go#L195
it's very clear where the call after the test ends is happening.;;;","08/Jun/19 9:01 PM;denyeart;Seen again:
*05:01:54* panic: Log in goroutine after TestHaltChainProcessing has completed
https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12785/consoleFull

 ;;;","10/Jun/19 8:11 PM;denyeart;And again:

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12821/console;;;","12/Jun/19 3:52 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31839 [FAB-15626] avoid use of testing.T in async logs;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove toDie in conn.go,FAB-15627,40415,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,swetharepakula,swetharepakula,swetharepakula,05/Jun/19 9:43 AM,03/Jul/19 10:53 PM,28/Oct/23 3:08 AM,03/Jul/19 10:53 PM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"There are two ways to deal with a closed connection a channel and atomic. Prefer the channel over the atomic, remove conn.toDie().",,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qlg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 9:47 AM;swetharepakula;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31714/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EndToEnd reconfiguration and onboarding when an orderer node is joined [It] isn't influenced by outdated orderers,FAB-15628,40416,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,guoger,guoger,guoger,05/Jun/19 12:31 PM,13/Jun/19 1:14 PM,28/Oct/23 3:08 AM,13/Jun/19 1:14 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9231/consoleFull

This is what happened from orderer5's point of view when flake occurs:
1. start
2*. consume its log to observe {{0 -> 1}} leader change
3. orderer1 is killed
4. consume its log to observe {{0/1 -> X}} leader change
5. submit tx to orderer5

2 is not currently performed, so that chunk of log is never consumed, which causes 4 to instantly pass. subsequently, 5 is executed too quickly and fails test.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qlo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Jun/19 12:54 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31715;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
typo fix,FAB-15629,40417,,Task,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,guoger,guoger,guoger,05/Jun/19 3:26 PM,31/Jan/20 4:00 PM,28/Oct/23 3:08 AM,31/Jan/20 4:00 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qlw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"In the CC2CC scenario, provide a method for the callee CC to obtain the caller CC's name, similar to Eth's msg.sender",FAB-15630,40418,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mazyblue,mazyblue,05/Jun/19 4:07 PM,05/Jun/19 4:07 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In many CC2CC scenarios, the callee needs to know and verify the caller's information. For example, in the implementation scenario of an oracle, the oracle CC accepts calls from the business CC and writes the URL access results back to the business contract in a callback. In the callback function, the business CC only trusts callbacks from the oracle CC.
At the moment, due to the lack of the ability to obtain the caller's information, the oracle logic can only be placed in the same CC as a function library . Such an implementation brings troubles in the monitoring and processing of business events and oracle events.",,mazyblue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qm4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mazyblue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LSCC: Malicious LSCC transaction results into LSCC still being writeable after the 2.0 upgrade,FAB-15631,40419,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Duplicate,,ales,ales,05/Jun/19 5:05 PM,08/Aug/19 4:46 AM,28/Oct/23 3:08 AM,08/Aug/19 4:44 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"h1. Background

The new lifecycle no longer relies on the system chaincode provider to determine which chaincodes are user chaincodes and which are system chaincodes. At validation time, the determination of validation artefacts for any given chaincode is performed in the same way, by querying the lifecycle support interface. This interface currently behaves as follows:
 * if the chaincode is defined in the new lifecycle, return that definition;
 * else, if it is defined in the legacy lifecycle, return that definition,
 * else return an error (and mark the tx as invalid).

This way, legacy system chaincodes which used to be writeable because of the definition returned by the system chaincode provider are in theory no longer writeable, since the new lifecycle will have no definition for them (names of reserved system chaincodes cannot be deployed through the new lifecycle), nor will (in theory) the legacy lifecycle.
h1. Issue

It is possible to circumvent this restriction by using the legacy lifecycle (when the channel is still at <2.0 capability) to create a definition for the {{lscc}} namespace. This definition will have no meaning when the channel is still at <2.0 capability because the system chaincode provider will override it. However, as soon as the channel is upgraded to 2.0, LSCC will still be writeable, because the namespace will have a definition in the legacy lifecycle and it will be used. Since the namespace of the legacy lifecycle system chaincode is still writeable, the legacy lifecycle is still ""active"", despite the fact that by design it shouldn't.
h1. PoC

The attached proof of concept shows the following:
 # While the channel is operating with the 1.4 capability, a malicious org member creates an LSCC transaction that deploys a chaincode called ""lscc""
 # later the channel is upgraded to 2.0
 # at this point, the malicious org member is still able to deploy chaincodes using LSCC

h1. Fixes

We need to ensure that the lscc custom validation forbids the deployment of a chaincode with the name ""lscc"".",,ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,FAB-15845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jun/19 4:27 AM;wenjian;15631_v142.patch;https://jira.hyperledger.org/secure/attachment/17372/15631_v142.patch","05/Jun/19 5:18 PM;ales;deployLSCC.2.patch;https://jira.hyperledger.org/secure/attachment/17304/deployLSCC.2.patch","28/Jun/19 5:15 AM;wenjian;test_v1_2capability.log;https://jira.hyperledger.org/secure/attachment/17356/test_v1_2capability.log","28/Jun/19 5:15 AM;wenjian;test_v1_3capability.log;https://jira.hyperledger.org/secure/attachment/17357/test_v1_3capability.log","29/Jun/19 4:28 AM;wenjian;test_v20_v1_2capability.log;https://jira.hyperledger.org/secure/attachment/17373/test_v20_v1_2capability.log","29/Jun/19 4:29 AM;wenjian;test_v20_v1_3capability.log;https://jira.hyperledger.org/secure/attachment/17374/test_v20_v1_3capability.log",,,,,,,,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzwr6z:zz9",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/19 2:17 AM;wenjian;Logs with v1.4 fix:

 

^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[34m2019-06-26 13:04:50.769 EDT [gossip.privdata] StoreBlock -> INFO 034^[[0m [testchannel] Received block [1] from buffer
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[31m2019-06-26 13:04:50.770 EDT [vscc] Validate -> ERRO 035^[[0m VSCC error: ValidateLSCCInvocation failed, err chaincode name 'lscc' is reserved for system chaincodes
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[31m2019-06-26 13:04:50.770 EDT [committer.txvalidator] validateTx -> ERRO 036^[[0m VSCCValidateTx for transaction txId = 6726a7998d9766c33cf534bc6e1c91302b5a0da2fc38a9099a155b9b0f3d1bf3 returned error: chaincode name 'lscc' is reserved for system chaincodes
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[34m2019-06-26 13:04:50.770 EDT [committer.txvalidator] Validate -> INFO 037^[[0m [testchannel] Validated block [1] in 1ms
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[33m2019-06-26 13:04:50.770 EDT [valimpl] preprocessProtoBlock -> WARN 038^[[0m Channel [testchannel]: Block [1] Transaction index [0] TxId [6726a7998d9766c33cf534bc6e1c91302b5a0da2fc38a9099a155b9b0f3d1bf3] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[34m2019-06-26 13:04:50.805 EDT [kvledger] CommitWithPvtData -> INFO 039^[[0m [testchannel] Committed block [1] with 1 transaction(s) in 34ms (state_validation=0ms block_and_pvtdata_commit=23ms state_commit=5ms);;;","28/Jun/19 2:19 AM;wenjian;v1.4 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32107/];;;","29/Jun/19 4:26 AM;wenjian;2.0 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32129/];;;","08/Aug/19 4:44 AM;denyeart;Addressed via FAB-15845;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide ability to mark a transaction function with 'expose as name',FAB-15632,40420,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jtonline,mbwhite,mbwhite,05/Jun/19 8:02 PM,14/Jun/19 10:19 PM,28/Oct/23 3:08 AM,14/Jun/19 10:19 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In that sometimes the actual function name follows a convention for the programming langauge, but it is not what should be exposed.

 

eg  GetValue isn't very Java but is maybe what is preferred for exposing in metadata",,jtonline,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCJ-4,,,No,,Unset,No,,,"1|i00qmc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jtonline,mbwhite,,,,,,,,,,,,,,,release-2.4,main-emeritius,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jun/19 12:31 AM;jtonline;[https://gerrit.hyperledger.org/r/c/fabric-chaincode-java/+/31898];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabcar javascript spews error about channel not found.,FAB-15633,40421,,Story,Backlog,FAB,Fabric,software,denyeart,,,Low,,,lehors,lehors,05/Jun/19 8:10 PM,19/Dec/19 8:10 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-samples,fabric-sdk-node,,,,,0,external,sdk-triaged,,,," 
{code:java}
$ cd fabcar

$ ./startFabric.sh
...
$ cd javascript

$ npm install...
...
$ node enrollAdmin
Wallet path: /Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/fabcar/javascript/wallet
Successfully enrolled admin user ""admin"" and imported it into the wallet
$ node registerUser
Wallet path: /Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/fabcar/javascript/wallet
Successfully registered and enrolled admin user ""user1"" and imported it into the wallet
$ node query.js
Wallet path: /Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/fabcar/javascript/wallet
2019-06-05T10:13:40.465Z - error: [Client.js]: Channel not found for name mychannel
Transaction has been evaluated, result is: [{""Key"":""CAR0"", ""Record"":{""colour"":""blue"",""make"":""Toyota"",""model"":""Prius"",""owner"":""Tomoko""}},{""Key"":""CAR1"", ""Record"":{""colour"":""red"",""make"":""Ford"",""model"":""Mustang"",""owner"":""Brad""}},{""Key"":""CAR2"", ""Record"":{""colour"":""green"",""make"":""Hyundai"",""model"":""Tucson"",""owner"":""Jin Soo""}},{""Key"":""CAR3"", ""Record"":{""colour"":""yellow"",""make"":""Volkswagen"",""model"":""Passat"",""owner"":""Max""}},{""Key"":""CAR4"", ""Record"":{""colour"":""black"",""make"":""Tesla"",""model"":""S"",""owner"":""Adriana""}},{""Key"":""CAR5"", ""Record"":{""colour"":""purple"",""make"":""Peugeot"",""model"":""205"",""owner"":""Michel""}},{""Key"":""CAR6"", ""Record"":{""colour"":""white"",""make"":""Chery"",""model"":""S22L"",""owner"":""Aarav""}},{""Key"":""CAR7"", ""Record"":{""colour"":""violet"",""make"":""Fiat"",""model"":""Punto"",""owner"":""Pari""}},{""Key"":""CAR8"", ""Record"":{""colour"":""indigo"",""make"":""Tata"",""model"":""Nano"",""owner"":""Valeria""}},{""Key"":""CAR9"", ""Record"":{""colour"":""brown"",""make"":""Holden"",""model"":""Barina"",""owner"":""Shotaro""}}]
$ node invoke.js
Wallet path: /Users/lehors/Projects/Go/src/github.com/hyperledger/fabric-samples/fabcar/javascript/wallet
2019-06-05T10:13:44.830Z - error: [Client.js]: Channel not found for name mychannel
Transaction has been evaluated, result is: ""[{\""Key\"":\""CAR0\"",\""Record\"":{\""color\"":\""blue\"",\""docType\"":\""car\"",\""make\"":\""Toyota\"",\""model\"":\""Prius\"",\""owner\"":\""Tomoko\""}},{\""Key\"":\""CAR1\"",\""Record\"":{\""color\"":\""red\"",\""docType\"":\""car\"",\""make\"":\""Ford\"",\""model\"":\""Mustang\"",\""owner\"":\""Brad\""}},{\""Key\"":\""CAR2\"",\""Record\"":{\""color\"":\""green\"",\""docType\"":\""car\"",\""make\"":\""Hyundai\"",\""model\"":\""Tucson\"",\""owner\"":\""Jin Soo\""}},{\""Key\"":\""CAR3\"",\""Record\"":{\""color\"":\""yellow\"",\""docType\"":\""car\"",\""make\"":\""Volkswagen\"",\""model\"":\""Passat\"",\""owner\"":\""Max\""}},{\""Key\"":\""CAR4\"",\""Record\"":{\""color\"":\""black\"",\""docType\"":\""car\"",\""make\"":\""Tesla\"",\""model\"":\""S\"",\""owner\"":\""Adriana\""}},{\""Key\"":\""CAR5\"",\""Record\"":{\""color\"":\""purple\"",\""docType\"":\""car\"",\""make\"":\""Peugeot\"",\""model\"":\""205\"",\""owner\"":\""Michel\""}},{\""Key\"":\""CAR6\"",\""Record\"":{\""color\"":\""white\"",\""docType\"":\""car\"",\""make\"":\""Chery\"",\""model\"":\""S22L\"",\""owner\"":\""Aarav\""}},{\""Key\"":\""CAR7\"",\""Record\"":{\""color\"":\""violet\"",\""docType\"":\""car\"",\""make\"":\""Fiat\"",\""model\"":\""Punto\"",\""owner\"":\""Pari\""}},{\""Key\"":\""CAR8\"",\""Record\"":{\""color\"":\""indigo\"",\""docType\"":\""car\"",\""make\"":\""Tata\"",\""model\"":\""Nano\"",\""owner\"":\""Valeria\""}},{\""Key\"":\""CAR9\"",\""Record\"":{\""color\"":\""brown\"",\""docType\"":\""car\"",\""make\"":\""Holden\"",\""model\"":\""Barina\"",\""owner\"":\""Shotaro\""}}]""

$ npm version
{ fabcar: '1.0.0',
  npm: '6.9.0',
  ares: '1.10.1-DEV',
  cldr: '31.0.1',
  http_parser: '2.7.0',
  icu: '59.1',
  modules: '57',
  nghttp2: '1.25.0',
  node: '8.9.0',
  openssl: '1.0.2l',
  tz: '2017b',
  unicode: '9.0',
  uv: '1.15.0',
  v8: '6.1.534.46',
  zlib: '1.2.11' }

$ node --version
v8.9.0

{code}
 ",,lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qmk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),lehors,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Jun/19 9:04 PM;lehors;I thought this was what caused the CI builds to fail but it seems to actually be a different problem so I'm not sure what's going on...

[https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/283/console]
{code:java}
13:51:42  Wallet path: /w/workspace/fabric-samples-verify-x86_64/gopath/src/github.com/hyperledger/fabric-samples/fabcar/javascript/wallet
13:51:43  2019-06-05T11:51:42.867Z - warn: [Query]: evaluate: Query ID ""[object Object]"" of peer ""peer1.org1.example.com:8051"" failed: message=make sure the chaincode fabcar has been successfully defined on channel mychannel and try again: chaincode definition for 'fabcar' exists, but chaincode is not installed, stack=Error: make sure the chaincode fabcar has been successfully defined on channel mychannel and try again: chaincode definition for 'fabcar' exists, but chaincode is not installed
13:51:43      at self._endorserClient.processProposal (/w/workspace/fabric-samples-verify-x86_64/gopath/src/github.com/hyperledger/fabric-samples/fabcar/javascript/node_modules/fabric-client/lib/Peer.js:147:36)
13:51:43      at Object.onReceiveStatus (/w/workspace/fabric-samples-verify-x86_64/gopath/src/github.com/hyperledger/fabric-samples/fabcar/javascript/node_modules/grpc/src/client_interceptors.js:1207:9)
13:51:43      at InterceptingListener._callNext (/w/workspace/fabric-samples-verify-x86_64/gopath/src/github.com/hyperledger/fabric-samples/fabcar/javascript/node_modules/grpc/src/client_interceptors.js:568:42)
13:51:43      at InterceptingListener.onReceiveStatus (/w/workspace/fabric-samples-verify-x86_64/gopath/src/github.com/hyperledger/fabric-samples/fabcar/javascript/node_modules/grpc/src/client_interceptors.js:618:8)
13:51:43      at callback (/w/workspace/fabric-samples-verify-x86_64/gopath/src/github.com/hyperledger/fabric-samples/fabcar/javascript/node_modules/grpc/src/client_interceptors.js:845:24), status=500, , url=grpcs://localhost:8051, name=peer1.org1.example.com:8051, grpc.max_receive_message_length=-1, grpc.max_send_message_length=-1, grpc.keepalive_time_ms=120000, grpc.http2.min_time_between_pings_ms=120000, grpc.keepalive_timeout_ms=20000, grpc.http2.max_pings_without_data=0, grpc.keepalive_permit_without_calls=1, name=peer1.org1.example.com:8051, grpc.ssl_target_name_override=peer1.org1.example.com, grpc.default_authority=peer1.org1.example.com, isProposalResponse=true
13:51:43  Failed to evaluate transaction: Error: make sure the chaincode fabcar has been successfully defined on channel mychannel and try again: chaincode definition for 'fabcar' exists, but chaincode is not installed
13:51:43  
13:51:43  
13:51:43  
13:51:43   fabcar-javascript-query test case is FAILED 

{code};;;","13/Jun/19 3:12 AM;lehors;Having updated my env to the latest fabric docker images I was able to execute this succesfully.

I still get a ""error: [Client.js]: Channel not found for name mychannel"" on every transaction but that doesn't seem to actually prevent the right thing from happening so I will change the title of this defect.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Implement Interface/annotation for the serializer,FAB-15634,40422,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mbwhite,mbwhite,mbwhite,05/Jun/19 8:24 PM,28/Nov/19 6:20 PM,28/Oct/23 3:08 AM,28/Nov/19 6:20 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,As per Node.js permit the swap out of the serializer class if people really want to use something else. ,,mbwhite,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FABCJ-4,,,No,,Unset,No,,,"1|i00qms:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mbwhite,,,,,,,,,,,,,,,,release-2.4,main-emeritius,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jun/19 9:40 PM;mbwhite;No longer in gerrit - now in github

 

https://github.com/hyperledger/fabric-chaincode-java/pull/41

 

 

was:

[https://gerrit.hyperledger.org/r/c/fabric-chaincode-java/+/31855] FAB-15634 Serializer annotation;;;","19/Nov/19 11:15 PM;mbwhite;Notes on how this works:
 
`org.hyperledger.fabric.contract.execution.SerializerInterface` should be implemented; this can has 3 methods that are required
setTypeRegistry() will let the serializer query information about the classes that have been marked with `@DataType` and also the properties.
 
Details of the type that is being serialized will be passed to the other methods.
 
`toBuffer` and `fromBuffer` are fairly simple to describe - to and from a byte buffer format of the object... the TypeSchema is also passed that gives information on what needs to be handled. 
 
The serializer also needs to be marked with `@Serlializer` that identifies a unique name (within the running container), you can also scope this as to when it is used.
 
For examples in how to write your own, best to view the JSONTransactionSerializer in the codebase. 
 
The Contract annotation has an additional couple of properties to say what serializer should be used. This defaults to JSON as per the current codebase.
 
 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor Viper usage in CLI,FAB-15635,40424,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,dereckluo,dereckluo,05/Jun/19 11:16 PM,28/Oct/19 11:41 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Refactoring the configuration structure in CLI, which moving away from the usage of viper.",,dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00slc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
↓↓↓ ------- FUTURE --------- ↓↓↓,FAB-15636,40426,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,05/Jun/19 11:29 PM,11/Jan/21 3:14 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,This is a marker.,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0idqxqo",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jan/20 11:01 PM;sykesm;This is simply a marker issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create release note for the removal of logging support from the shim package,FAB-15637,40428,39651,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,06/Jun/19 3:33 AM,18/Jul/19 12:31 AM,28/Oct/23 3:08 AM,22/Jun/19 8:51 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,denyeart,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qn0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jul/19 12:31 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/31961/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Minor refactoring to readWithTimeout() in gossip/comm,FAB-15638,40433,39561,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,06/Jun/19 2:58 PM,07/Jun/19 12:48 AM,28/Oct/23 3:08 AM,07/Jun/19 12:48 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"The logic of server stream and client stream in readWithTimeout() is exactly the same.

We can make use of the `stream` interface to adhere the DRY rule",,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qo4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ronenschafferibm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Jun/19 3:13 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/c/fabric/+/31739;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Admin OU support: cryptogen should add admin OU to admin cert when node OUs is enabled,FAB-15639,40440,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,mastersingh24,mastersingh24,mastersingh24,06/Jun/19 8:06 PM,17/Jul/19 2:02 AM,28/Oct/23 3:08 AM,17/Jul/19 2:02 AM,,,,,,,,,,,,,,v1.4.3,v2.0.0,,,fabric-tools,,,,,,0,,,,,,There is currently no code path where the generate admin cert for each org/peer will contain the AdminOU,,denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,,,FAB-15388,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qpo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jul/19 2:02 AM;denyeart;Addressed in FAB-15933 and FAB-15388.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reduce gossip.Gossip interface to a minimum,FAB-15640,40442,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,yacovm,yacovm,06/Jun/19 10:26 PM,23/Nov/20 11:39 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ipm2,,,,,"The said [interface|https://github.com/hyperledger/fabric/blob/release-1.4/gossip/gossip/gossip.go] has some methods used by the component itself, but not by all the component, such as [methods used by private data|https://github.com/hyperledger/fabric/blob/db088625774d47aceb499eb0301c67be0e5a45c6/gossip/privdata/distributor.go#L35-L49], and other methods used by external components to gossip such as [discovery.|https://github.com/hyperledger/fabric/blob/eca1b14b7e3453a5d32296af79cc7bad10c7673b/discovery/endorsement/endorsement.go#L47-L57].

There is no reason to have an interface in the first place, and we can just have the [gossip constructor|https://github.com/hyperledger/fabric/blob/release-1.4/gossip/gossip/gossip_impl.go#L71] return an exported struct instead of the gossip.Gossip interface, and then we can perhaps remove the interface altogether. ",,sykesm,yacovm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i01h82:9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yacovm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace handwritten mutableResourcesMock with a generated one,FAB-15641,40444,,Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,adarshsaraf123,adarshsaraf123,adarshsaraf123,06/Jun/19 11:37 PM,06/Jun/19 11:37 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,The handwritten mock appears in orderer/common/multichannel/chainsupport_test.go.,,adarshsaraf123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qqk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),adarshsaraf123,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Permissive maintenance filter,FAB-15642,40451,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,07/Jun/19 4:21 AM,20/Jun/19 1:01 PM,28/Oct/23 3:08 AM,10/Jun/19 2:53 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Currently the maintenance filter is not allowing config changes other than consensus type changes in maintenance mode. It seems generally useful that the network operator might want to for instance to modify batch parameters before switching over consensus type, to add new certificate authorities, etc.

We therefore lift the restriction and let the admin do any kind of config change he is authorized to in maintenance mode. 

Two restrictions remain: 
# Entry to- and exit from- maintenance mode should not be accompanied by any config change; 
# ConsensusType.Type can change only in maintenance-mode. ",,jyellick,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qs4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,tock,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix broken link on Use Cases page,FAB-15643,40453,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,anand.fast,urvashikishnani,urvashikishnani,07/Jun/19 6:37 AM,17/Jun/19 9:41 AM,28/Oct/23 3:08 AM,14/Jun/19 7:20 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-docs,,,,,,0,,,,,,"The Use Cases page [https://hyperledger-fabric.readthedocs.io/en/latest/usecases.html|https://hyperledger-fabric.readthedocs.io/en/latest/usecases.html] in the documentation presents a link to [https://wiki.hyperledger.org/groups/requirements/use-case-inventory] which shows a Page Not Found error.

The same link is presented in all previous versions of the documentation.",,anand.fast,denyeart,urvashikishnani,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qsk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),anand.fast,denyeart,urvashikishnani,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/19 10:18 AM;anand.fast;Hi Urvashi, I found a link for use-case-inventory under wiki-archive ([https://wiki-archive.hyperledger.org/groups/requirements/use-case-inventory]);;;","12/Jun/19 10:32 AM;anand.fast;Based on the response by [~rjones-lf] in ""general"" chat message on real life use cases ([https://chat.hyperledger.org/channel/general?msg=njCuaRosutbi4Bkab),|https://chat.hyperledger.org/channel/general?msg=njCuaRosutbi4Bkab]

I believe [https://wiki.hyperledger.org/display/LMDWG/Use+Cases] is the correct URL.;;;","14/Jun/19 5:15 AM;denyeart;cherry picked to master: [https://gerrit.hyperledger.org/r/#/c/fabric/+/31906/]

(we usually push to master and then cherry pick to release branches as needed);;;","17/Jun/19 9:41 AM;anand.fast;Thanks David.

Hereafter, I shall make sure to push to master.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
hygiene gossip/util,FAB-15644,40454,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,MHBauer,MHBauer,07/Jun/19 7:38 AM,26/Mar/20 5:02 AM,28/Oct/23 3:08 AM,26/Mar/20 5:02 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"misc.go code review

",,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qss:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix comment error,FAB-15645,40456,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,kutenglaoshu,kutenglaoshu,07/Jun/19 11:46 AM,19/Apr/20 2:25 PM,28/Oct/23 3:08 AM,19/Apr/20 2:25 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"// ECDSAGoPublicKeyImportOpts contains options for RSA key importation from rsa.PublicKey
type RSAGoPublicKeyImportOpts struct {
	Temporary bool
}",,kutenglaoshu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qt8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kutenglaoshu,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
staticcheck - core/peer,FAB-15646,40459,39221,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ynamiki,ynamiki,ynamiki,07/Jun/19 1:54 PM,10/Jun/19 5:34 AM,28/Oct/23 3:08 AM,10/Jun/19 5:34 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Fix the following issues reported by staticcheck for {{core/peer}} package.
{code:java}
core/peer/configtx_processor.go:55:20: error strings should not be capitalized (ST1005)
core/peer/configtx_test.go:101:2: this value of lgr is never used (SA4006)
core/peer/configtx_test.go:149:22: func (*testHelper).constructConfigTx is unused (U1000)
core/peer/configtx_test.go:202:22: func (*testHelper).initLocalMSP is unused (U1000)
core/peer/configtx_util.go:17:6: func computeFullConfig is unused (U1000)
core/peer/deliverevents.go:127:25: func (*DeliverServer).sendProducer is unused (U1000)
core/peer/peer.go:419:6: type extendedOperations is unused (U1000)
core/peer/peer.go:783:19: error strings should not be capitalized (ST1005)
{code}",,ynamiki,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qtw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ynamiki,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/19 3:51 PM;ynamiki;https://gerrit.hyperledger.org/r/c/fabric/+/31757;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Provide a mechanism to enable TLS only for cluster facing port on Raft orderers,FAB-15648,40462,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,raft 3,raft 3,07/Jun/19 8:28 PM,22/Jan/21 11:12 PM,28/Oct/23 3:08 AM,07/Aug/19 12:07 AM,,,,,,,,,,,,,,v1.4.5,v2.0.0,,,fabric-orderer,,,,,,2,ipm,,,,,"Raft orderers need TLS for internal Raft communication. And they can make Raft communication on a different port than client facing port. 

However it is not possible to enable TLS only for Raft port but not for client facing port. It would be nice to have this feature.

In our case we are running everything in a Kubernetes cluster so internal TLS is not requirement for us. Even later when some nodes are exposed to outer world, since we use a central Ingress for TLS termination, internal TLS wont be still a requirement.

*Edit:* As mentioned in the email list, in our case, enabling TLS globally has also another huge impact, we lost transparent load balancing for peer and orderer nodes. Please see TLS section in our [GitHub repo|https://github.com/APGGroeiFabriek/PIVT#limitations].

 

 ",,davidkhala,denyeart,guoger,hakan.eryargi,Huijian,jyellick,lmars,lskor 1,psanket,raft 3,SebCasanova,siddjain,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00quk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,denyeart,guoger,hakan.eryargi,Huijian,jyellick,lmars,lskor 1,psanket,raft 3,SebCasanova,siddjain,yacovm,,,,mergify/bp/release-2.2/pr-4374,release-2.3,release-2.2,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"07/Jun/19 9:03 PM;yacovm;[~jyellick] [~mastersingh24] it should be fairy easy to support this since we can configure to use a separate TLS listener for the intra-cluster comm.

What do you say? ;;;","08/Jun/19 3:32 AM;jyellick;If it's easy to support, and we have a use case, I'm not opposed.;;;","27/Jun/19 8:36 PM;guoger;Followed mailing list here and I think this request makes sense. [~raft 3] would you like to contribute?;;;","27/Jun/19 8:40 PM;raft 3;[~guoger] I would love to, but unfortunately neither I have time nor I know a bit about Go lang and internals of Fabric..;;;","22/Jul/19 6:35 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/32428;;;","18/Sep/19 9:20 PM;psanket;[~guoger] what version of the fabric is this available in and is it an environment variable in the compose fie that we need to set?;;;","19/Sep/19 11:10 AM;guoger;[~psanket] this is not backported to 1.4.x but maybe it should... you could try the tip of master

as for configs, you'll need to specify different addr/port in {{cluster}} section along with cert/key, and the orderer will recognize this as using seperate gRPC listener that has TLS enabled.;;;","19/Sep/19 6:37 PM;psanket;So my guess is that I cannot use  the 1.4.x versioned docker images for orderer with the environment variable changes that you have mentioned? And these are the variables that will need to be updated.

ORDERER_OPERATIONS_TLS_ENABLED

ORDERER_GENERAL_CLUSTER_SERVERCERTIFICATE

ORDERER_GENERAL_CLUSTER_SERVERPRIVATEKEY

ORDERER_GENERAL_CLUSTER_LISTENPORT;;;","19/Nov/19 7:55 PM;lmars;Hi [~guoger]. Are you going to backport this to 1.4.x ?;;;","14/Feb/20 6:43 AM;denyeart;Merged in master and release-1.4 for v1.4.5.;;;","17/Apr/20 5:27 AM;siddjain;Could someone explain how to use this feature? what env variables need to be set and how?;;;","17/Apr/20 7:09 PM;psanket;[~siddjain] See this link 

[https://github.com/hyperledger/fabric/releases/tag/v1.4.5]

 

Basically, with this fix, you can enable TLS for intra-RAFT communication (That is needed for leader election) and disable mTLS for client communication so you can add service mesh for your services (like Istio). Earlier versions, it was either enabled for both or disabled for both.

The env variables to update are

ORDERER_GENERAL_CLUSTER_SERVERCERTIFICATE

ORDERER_GENERAL_CLUSTER_SERVERPRIVATEKEY

ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE

ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY

 ;;;","19/Apr/20 10:39 PM;denyeart;[~guoger] [~joe-alewine] Did this one ever get formally documented?;;;","21/Apr/20 5:12 AM;siddjain;one question i have is that if we are using tls we also need to provide the ca certs and i don't see any place to provide those in

 
{{# Cluster settings for ordering service nodes that communicate with other ordering service nodes}}
{{# such as Raft based ordering service.}}
{{Cluster:}}
{{# SendBufferSize is the maximum number of messages in the egress buffer.}}
{{# Consensus messages are dropped if the buffer is full, and transaction}}
{{# messages are waiting for space to be freed.}}
{{     SendBufferSize: 10}}
{{# ClientCertificate governs the file location of the client TLS certificate}}
{{# used to establish mutual TLS connections with other ordering service nodes.}}
{{     ClientCertificate:}}
{{# ClientPrivateKey governs the file location of the private key of the client TLS certificate.}}
{{     ClientPrivateKey:}}
{{# The below 4 properties should be either set together, or be unset together.}}
{{# If they are set, then the orderer node uses a separate listener for intra-cluster}}
{{# communication. If they are unset, then the general orderer listener is used.}}
{{# This is useful if you want to use a different TLS server certificates on the}}
{{# client-facing and the intra-cluster listeners.}}

{{# ListenPort defines the port on which the cluster listens to connections.}}
{{    ListenPort:}}
{{# ListenAddress defines the IP on which to listen to intra-cluster communication.}}
{{    ListenAddress:}}
{{# ServerCertificate defines the file location of the server TLS certificate used for intra-cluster}}
{{# communication.}}
{{    ServerCertificate:}}
{{# ServerPrivateKey defines the file location of the private key of the TLS certificate.}}
{{    ServerPrivateKey:}}
 
So against what CA are the certs being validated? ;;;","21/Apr/20 5:33 AM;siddjain;i have read about ORDERER_GENERAL_CLUSTER_ROOTCAS ** but 2 things:
 * this variable is not even defined in orderer.yaml
 * i am able to start a network of raft orderers without setting ORDERER_GENERAL_CLUSTER_ROOTCAS;;;","21/Apr/20 6:53 AM;yacovm;The TLS root CAs that are used are the union of all TLS root CAs of all channels (derived from the channel config) and also these root CAs that are statically defined in the orderer.yaml.;;;","04/Aug/20 1:21 PM;davidkhala;[~yacovm] Adding to the list, tlsCA root cert files under each orderer msp config path are also added to search scope . ;;;","08/Dec/20 6:02 PM;lmars;[~yacovm]
{quote}also these root CAs that are statically defined in the orderer.yaml{quote}
What properties should I use for this? There is nothing similar in the ""Cluster"" section :(

We checked this issue in version 1.4.9 and we got a problem. We don't use TLS for the client facing port and we have not configured anything about TLS inside the configuration block. Raft cluster doesn't work in this case, because:
{code}
[core.comm] ServerHandshake -> ERRO 03e TLS handshake failed with error tls: failed to verify client's certificate: x509: certificate signed by unknown authority server=Orderer remoteaddress=172.22.0.1:57934
{code};;;","08/Dec/20 6:06 PM;yacovm;https://github.com/hyperledger/fabric/blob/master/sampleconfig/orderer.yaml#L41;;;","08/Dec/20 6:07 PM;yacovm;{code}
If mutual TLS is enabled, ClientRootCAs contains a list of additional root certificates

used for verifying certificates of client connections.

It is not required to be set, but can be used to augment the set of TLS CA certificates

available from the MSPs of each channel’s configuration.
{code};;;","08/Dec/20 6:19 PM;lmars;Are you sure this property works for the cluster facing port?

Its name/section is strange :) and it doesn't work for us.;;;","08/Dec/20 6:27 PM;yacovm;No, this property works for the client facing port (i thought that's what you wanted).

 

There is an equivalent property (I think hidden) [for the cluster|https://github.com/hyperledger/fabric/blob/d620ab33e9009c5e9f1ad03edab4bc9129f486ce/orderer/common/server/main.go#L482] too:
{code}
type Cluster struct {
	ListenAddress                        string
	ListenPort                           uint16
	ServerCertificate                    string
	ServerPrivateKey                     string
	ClientCertificate                    string
	ClientPrivateKey                     string
	RootCAs                              []string // <---------
	DialTimeout                          time.Duration
	RPCTimeout                           time.Duration
	ReplicationBufferSize                int
	ReplicationPullTimeout               time.Duration
	ReplicationRetryTimeout              time.Duration
	ReplicationBackgroundRefreshInterval time.Duration
	ReplicationMaxRetries                int
	SendBufferSize                       int
	CertExpirationWarningThreshold       time.Duration
	TLSHandshakeTimeShift                time.Duration
}
{code};;;","08/Dec/20 7:06 PM;lmars;{quote}There is an equivalent property (I think hidden) for the cluster too{quote}
I suppose, this is the property described in FAB-14780 :). We checked it too, but without success :( (error is the same). ;;;","08/Dec/20 7:21 PM;yacovm;If you suspect a bug, please open a Jira issue and hopefully someone will look at it;;;","09/Dec/20 12:19 AM;lmars;Here you are: FAB-18370;;;",,,,,,,,,,,,,,,,,
Fix Missing TxID in Transaction Envelope,FAB-15650,40467,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,Senthil1,Senthil1,Senthil1,07/Jun/19 11:03 PM,08/Jun/19 12:02 PM,28/Oct/23 3:08 AM,08/Jun/19 12:02 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-orderer,fabric-peer,,,,0,,,,,,"Currently, config transaction (both genesis and config update) might have an empty txID. As the genesis block and the subsequent config update block do not have the txID, a collision would occur at the blockstore index. As we check for duplicate index before creating index for each tx, we skip it currently. We do need to rebuild the index of blockstore once to fix this.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15411,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qv8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
blockstore computes txID when it is empty,FAB-15651,40468,39749,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,07/Jun/19 11:04 PM,08/Jul/19 8:10 PM,28/Oct/23 3:08 AM,08/Jul/19 8:10 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,,,baohua,denyeart,GuillaumeCisco,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qvg:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,denyeart,GuillaumeCisco,Senthil1,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 9:23 PM;GuillaumeCisco;Is there a gerrit review?;;;","25/Jun/19 6:11 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/31763/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Suppress unnecessary log message formatting for better performance,FAB-15652,40469,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,yoheiueda,yoheiueda,yoheiueda,07/Jun/19 11:31 PM,11/Jun/19 3:59 AM,28/Oct/23 3:08 AM,11/Jun/19 3:59 AM,,,,,,,,,,,,,,,,,,fabric-common,,,,,,0,performance,,,,,"Even when logging level is set to a level other than DEBUG (such as FABRIC_LOGGING_SPEC=WARNING), log message formatting (e.g. Sprintf things) for debug logs is always executed.

Due to this behavior, peer's logging mechanism consumes 10.5% of peer's CPU usage in my experiment. I implemented a patch to suppress unnecessary log message formatting, and achieved 21% TPS improvement. Please see attached files for details.

 The function in {{vendor/go.uber.org/zap/sugar.go}} prepares a log message from a given format. The {{Enabled(lvl)}} checks the log level to decide whether this message is written or not.
{code:java}
func (s *SugaredLogger) log(lvl zapcore.Level, template string, fmtArgs []interface{}, context []interface{}) {
	// If logging at this level is completely disabled, skip the overhead of
	// string formatting.
	if lvl < DPanicLevel && !s.base.Core().Enabled(lvl) {
		return
	}

	// Format with Sprint, Sprintf, or neither.
	msg := template
	if msg == """" && len(fmtArgs) > 0 {
		msg = fmt.Sprint(fmtArgs...)
	} else if msg != """" && len(fmtArgs) > 0 {
		msg = fmt.Sprintf(template, fmtArgs...)
	}

	if ce := s.base.Check(lvl, msg); ce != nil {
		ce.Write(s.sweetenFields(context)...)
	}
}
{code}
However, {{Enabled(lvl)}} in Fabric always returns true, and log message formatting is always executed. This change was introduced to implement logging based on logger's names.

[https://gerrit.hyperledger.org/r/c/fabric/+/27273]

To work around the performance issue of this change, I implemented a patch that enables logging decision based on logger's names at {{Enabled(lvl)}}. My patch introduces some complication, but I think 20%+ TPS improvement justifies it.",,inatatsu,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15432,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jun/19 11:32 PM;yoheiueda;Suppress unnecessary log message formatting.pdf;https://jira.hyperledger.org/secure/attachment/17307/Suppress+unnecessary+log+message+formatting.pdf","07/Jun/19 11:33 PM;yoheiueda;flamegraph-peer-after.svg;https://jira.hyperledger.org/secure/attachment/17309/flamegraph-peer-after.svg","07/Jun/19 11:33 PM;yoheiueda;flamegraph-peer-before.svg;https://jira.hyperledger.org/secure/attachment/17308/flamegraph-peer-before.svg",,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qvo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),inatatsu,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Jun/19 11:35 PM;yoheiueda;My CR is: https://gerrit.hyperledger.org/r/c/fabric/+/31760;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I want Peer and Channel objects instead of package level state",FAB-15653,40470,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,08/Jun/19 12:15 AM,09/Jul/19 5:55 AM,28/Oct/23 3:08 AM,09/Jul/19 5:55 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,ipm,,,,,"The peer package contains a number of package level variables that act as an object. We have started to merge this into a peer.Peer in support of FAB-14324. As the goal of that item is to remove CredentialSupport, the remainder of the work will be tracked here.
",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtg:ui",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jun/19 2:59 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32088;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
V2_0 orderer capabilities accidentally backported to release-1.4,FAB-15654,40471,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,08/Jun/19 1:45 AM,09/Jun/19 3:51 AM,28/Oct/23 3:08 AM,09/Jun/19 3:51 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-orderer,,,,,,0,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qw4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
orderer computes txID for configTx,FAB-15655,40472,39749,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,08/Jun/19 2:11 AM,11/Jun/19 10:57 PM,28/Oct/23 3:08 AM,11/Jun/19 10:57 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"For the configBlock, orderer needs to include the txID computed out of nonce and creator.",,baohua,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qwc:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clean up Members Function in gossip_service.go,FAB-15656,40473,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,swetharepakula,swetharepakula,swetharepakula,08/Jun/19 2:23 AM,08/Jun/19 6:31 AM,28/Oct/23 3:08 AM,08/Jun/19 6:31 AM,v2.0.0,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,hygiene,,,,,Simplify the members function in gossip_service.go,,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qwk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"08/Jun/19 2:26 AM;swetharepakula;https://gerrit.hyperledger.org/r/c/fabric/+/31762;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
cscc validates txID,FAB-15657,40475,39749,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Senthil1,Senthil1,08/Jun/19 2:38 AM,11/Jun/19 10:57 PM,28/Oct/23 3:08 AM,11/Jun/19 10:57 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qws:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update Doc for Gologging,FAB-15658,40476,39651,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,08/Jun/19 3:27 AM,17/Jun/19 11:14 AM,28/Oct/23 3:08 AM,17/Jun/19 11:14 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,btl5037,kchristidis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qx0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,kchristidis,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jun/19 11:14 AM;kchristidis;[https://gerrit.hyperledger.org/r/c/fabric/+/31769];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove Service Discovery from general disclaimers,FAB-15659,40477,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,negupta,negupta,negupta,08/Jun/19 4:07 AM,02/Aug/19 5:42 AM,28/Oct/23 3:08 AM,02/Aug/19 5:42 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,Update due to the fact that service discovery with lifecycle was merged.,,negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00qx8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),negupta,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Aug/19 5:42 AM;negupta;Dup: FAB-16157;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor proto utils,FAB-15660,40481,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,Senthil1,Senthil1,08/Jun/19 3:13 PM,08/Jun/19 3:16 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Naming convention used in protoutil package is confusing. For e.g., to get a payload from the payloadBytes, there are two functions:
 # GetPayload(payloadBytes)
 # UnmarshalPayload(payloadBytes)

This introduces a lot of code duplication in protoutil package. Further, GetPayload() does not seem to be the correct name. We can use GetXXXFromYYY() but not GetXXX(XXXBytes). All GetXXX(XXXBytes) need to be converted to UnmarshalXXX(XXXBytes). ",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qxw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document and release note the shift to org specific orderer endpoint configuration,FAB-15661,40482,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,denyeart,denyeart,08/Jun/19 10:19 PM,10/Apr/20 5:04 AM,28/Oct/23 3:08 AM,10/Apr/20 5:04 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,See release note text in original Jira FAB-7559.,,anhngo,denyeart,joaquimpedrooliveira,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i008rj:iwyw",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),anhngo,denyeart,joaquimpedrooliveira,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Dec/19 6:52 AM;pandrejko;[~denyeart]Should this one still be on the radar for 2.0?;;;","03/Dec/19 8:53 AM;denyeart;[~pandrejko] There is release note text in v1.4.4 release notes that I'll copy into v2.0.0 release notes.
Additionally I believe [~joe-alewine] and [~jyellick] have discussed adding some text to the upgrade doc and channel config doc to highlight the change.;;;","07/Apr/20 2:25 AM;pandrejko;[~denyeart] Was this added to v2.0.0? Can it be closed now?;;;","10/Apr/20 5:04 AM;denyeart;Yes, this was done and can be closed:

[https://hyperledger-fabric.readthedocs.io/en/latest/upgrade_to_newest_version.html#define-ordering-node-endpoint-per-org-recommend]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove support for Orderer global Addresses in favor of org specific OrdererEndpoints,FAB-15662,40483,,Story,To Do,FAB,Fabric,software,denyeart,,,Medium,,,denyeart,denyeart,08/Jun/19 10:22 PM,08/Jul/20 11:17 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In v1.4.2 org specific OrdererEndpoints was added to channel configuration. Either the global Addresses or the org specific OrdererEndpoints can be used starting in v1.4.2.

In v2.0 the intent is to remove support for the Orderer global addresses with this work item. Upon enablement of V2_0 capability, channels must be configured to use the org specific OrdererEndpoints. The orderer endpoint config change can be made in the same configuration transaction as the V2_0 capability enablement.",,denyeart,jyellick,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18056,FAB-18054,FAB-18055,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15574,,,No,,Unset,No,,,"1|i00qyc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jun/19 10:28 PM;denyeart;[~yacovm] [~sykesm] [~mastersingh24] [~jyellick] Do you agree with the removal of support of the global orderer endpoint Addresses starting with v2.0 capability?;;;","08/Jun/19 10:43 PM;yacovm;I suggest the following:

# With a v2.0 peer that is at channel version of 1.4.2, if you try to upgrade to 2.0 without per org endpoints, you'll get a failure at validating the config transaction.
# Drop the possibility of specifying the global endpoints in the v2.0 configtx.yaml sample, but still keep it in the code base for backwards compatibility for channels that are v1.4.2 and haven't upgraded to v2.0 yet.
# In later versions such as v2.1 or so, remove it from the code base entirely. ;;;","10/Jun/19 11:04 AM;jyellick;I'm fine with disallowing the global orderer endpoints along with the V2_0 capability.

However, we all know that dropping support from the codebase is a tricky thing.  We will not be able to drop support for processing config with old endpoints until we have checkpoint and pruning support, to allow peers to join at a later configuration block and not be forced to process the blockchain from block 0.

We still need to handle the case where a peer is late joined to the genesis block of a long running channel and must connect to the initial set of globally defined orderers to catch up, so I don't think we can entirely remove the support.  [~yacovm] am I missing something?;;;","10/Jun/19 2:35 PM;yacovm;I was hoping by 2.1 the peer won't need to process the endpoints of the pre v2.0 config blocks and can join from the latest config block, like orderers can.
;;;","19/Apr/20 2:24 PM;denyeart;Linked to Epic for removals in v3.0.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document peer rollback CLI command,FAB-15663,40484,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,denyeart,denyeart,08/Jun/19 11:32 PM,27/Jul/19 11:40 AM,28/Oct/23 3:08 AM,01/Jul/19 1:04 PM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,,,,,,Add CLI command help and generate corresponding documentation.,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qyk:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
LSCC: nil ChaincodeSpec in LSCC DEPLOY/UPGRADE args causes peers to crash,FAB-15664,40485,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,ales,ales,09/Jun/19 4:47 PM,08/Aug/19 4:46 AM,28/Oct/23 3:08 AM,08/Aug/19 4:43 AM,v1.0.0,v1.0.1,v1.0.2,v1.0.3,v1.0.4,v1.0.5,v1.0.6,v1.1.0,v1.1.1,v1.2.0,v1.2.1,v1.3.0,v1.4.0,,,,,fabric-peer,,,,,,0,,,,,,"h1. Problem

An LSCC DEPLOY/UPGRADE transaction contains marshalled ChaincodeDeploymentSpec as part of the chaincode arguments. If the ChaincodeSpec field is nil, committing peers will crash because of the nil pointer dererference. They will enter a crash/restart loop after that.

This has security implications because it amounts to a DoS",,ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,FAB-15845,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/19 9:50 PM;wenjian;15664.patch;https://jira.hyperledger.org/secure/attachment/17365/15664.patch","28/Jun/19 9:40 PM;wenjian;test_v12capability.log;https://jira.hyperledger.org/secure/attachment/17363/test_v12capability.log","28/Jun/19 9:50 PM;wenjian;test_v13capability.log;https://jira.hyperledger.org/secure/attachment/17364/test_v13capability.log",,,,,,,,,,,angelo.decaro,caod,elli-androulaki,jyellick,manish-sethi,sykesm,wenjian,wlahti,yacovm,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzwr6z:zz7",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,angelo.decaro,caod,denyeart,elli-androulaki,jyellick,manish-sethi,mastersingh24,sykesm,wenjian,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jun/19 6:58 PM;yacovm;I guess the good news is that the fix is trivial since it crashes at validation so the block is never committed? ;;;","10/Jun/19 1:11 AM;ales;Pretty much - peers would be stuck in a crash/restart loop and wouldn't do anything else..;;;","27/Jun/19 6:00 AM;wenjian;[~ales] Below is a summary for how different releases handle nil ChaincodeSpec during lscc deployment.

v1.0, 1.1, and 1.2 will cause peer panic due to missing nil pointer check in GetChaincodeDeploymentSpec (e.g, [https://github.com/hyperledger/fabric/blob/release-1.0/protos/utils/proputils.go#L169)]

v1.3 and 1.4 (including 1.4.0 and 1.4.1) fixed the bug and correctly caught the error.

v2.0 introduced a new nil pointer bug due to code refactoring. Will be be fixed. 

 

 ;;;","28/Jun/19 9:41 PM;wenjian;Error messages in test log. Full log files are attached.

 

^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [vscc] Validate -> ERRO 050^[[0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[37m[org2.peer1]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [vscc] Validate -> ERRO 041^[[0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [committer.txvalidator] validateTx -> ERRO 051^[[0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[91m[org2.peer2]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [vscc] Validate -> ERRO 047^[[0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[34m2019-06-27 22:19:13.071 EDT [committer.txvalidator] Validate -> INFO 052^[[0m [testchannel] Validated block [3] in 1ms
^[[91m[e]^[[35m[org1.peer1]^[[0m ^[[33m2019-06-27 22:19:13.071 EDT [valimpl] preprocessProtoBlock -> WARN 053^[[0m Channel [testchannel]: Block [3] Transaction index [0] TxId [2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE]
^[[91m[e]^[[36m[org1.peer2]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [vscc] Validate -> ERRO 04e^[[0m VSCC error: ValidateLSCCInvocation failed, err VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[37m[org2.peer1]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [committer.txvalidator] validateTx -> ERRO 042^[[0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[91m[org2.peer2]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [committer.txvalidator] validateTx -> ERRO 048^[[0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[91m[org2.peer2]^[[0m ^[[34m2019-06-27 22:19:13.071 EDT [committer.txvalidator] Validate -> INFO 049^[[0m [testchannel] Validated block [3] in 1ms
^[[91m[e]^[[36m[org1.peer2]^[[0m ^[[31m2019-06-27 22:19:13.071 EDT [committer.txvalidator] validateTx -> ERRO 04f^[[0m VSCCValidateTx for transaction txId = 2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107 returned error: VSCC error: invocation of lscc(deploy) does not have appropriate arguments
^[[91m[e]^[[36m[org1.peer2]^[[0m ^[[34m2019-06-27 22:19:13.071 EDT [committer.txvalidator] Validate -> INFO 050^[[0m [testchannel] Validated block [3] in 1ms
^[[91m[e]^[[37m[org2.peer1]^[[0m ^[[34m2019-06-27 22:19:13.071 EDT [committer.txvalidator] Validate -> INFO 043^[[0m [testchannel] Validated block [3] in 1ms
^[[91m[e]^[[37m[org2.peer1]^[[0m ^[[33m2019-06-27 22:19:13.071 EDT [valimpl] preprocessProtoBlock -> WARN 044^[[0m Channel [testchannel]: Block [3] Transaction index [0] TxId [2edcb082f22cf21d3fd8b9eeb7a27a7eaec98eded4cea9a4862787a8d372f107] marked as invalid by committer. Reason code [ENDORSEMENT_POLICY_FAILURE];;;","29/Jun/19 12:13 AM;wenjian;2.0 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32118/];;;","08/Aug/19 4:43 AM;denyeart;Addressed via FAB-15845;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bug about release-1.4 branch: `make docker` will fail,FAB-15665,40487,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,Hengming-Zhang,Hengming-Zhang,09/Jun/19 10:31 PM,05/Feb/21 4:53 AM,28/Oct/23 3:08 AM,10/Sep/19 3:08 AM,v1.4.0,v1.4.1,,,,,,,,,,,,,,,,fabric-build,,,,,,0,fabric,,,,,"The log is:

Step 5/7 : ADD  payload/sampleconfig.tar.bz2 $FABRIC_CFG_PATH

failed to copy files: Error processing tar file(bzip2 data invalid: bad magic value in continuation file): 

make: *** [.build/image/peer/.dummy-amd64-1.4.2-snapshot-28217fe51] Error 1

 

My tar is:

$ which tar

/usr/local/opt/gnu-tar/libexec/gnubin/tar

 

PS: `make docker` in fabric-ca release-1.4 branch will success. Supposing this is a bug. ",,denyeart,Hengming-Zhang,mastersingh24,Mereep,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-1185,,,No,,Unset,No,,,"1|i00qz8:",,,,Unset,Unset,,"1. clone the repo.
2. cd fabric.
3. make docker.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Hengming-Zhang,mastersingh24,Mereep,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"09/Jun/19 10:47 PM;Hengming-Zhang;My OS version:

macOS 10.14.5 (18F132).;;;","10/Jun/19 1:47 AM;Hengming-Zhang;Golang version: 1.11.5.;;;","10/Jun/19 8:06 PM;denyeart;Works on my mac with
{code:java}
make docker-clean docker{code};;;","10/Jun/19 8:50 PM;Hengming-Zhang;What is your environment? (Golang, macOS version, and the tar) [~denyeart]

I tried to run this command, but it still doesn't work for me...;;;","16/Jun/19 2:52 AM;mastersingh24;You need to install GNU Tar as the version of tar that comes with macOS is incompatible with Linux/Docker.

See [https://hyperledger-fabric.readthedocs.io/en/release-1.4/dev-setup/devenv.html?highlight=tar]

I believe the {{--with-default-names}} might have been deprecated in which you add GNU Tar to your path:
 {{export PATH=/usr/local/opt/gnu-tar/bin:$PATH}}

should work;;;","16/Jun/19 5:24 PM;Hengming-Zhang;[~mastersingh24] Now my tar has switched to:

{{$ which tar}}

{{/usr/bin/tar}}

And I followed your suggestion to make the PATH variable: 

{{$ echo $PATH}}

{{/usr/local/opt/gnu-tar/bin:/...}}

But I have still encountered the build error which you can see in the debug.log file:

 

debug.log:
{noformat}
$ cat debug.log
Building docker peer-image
docker build  -t hyperledger/fabric-peer .build/image/peer
Sending build context to Docker daemon   33.5MB
Step 1/7 : FROM hyperledger/fabric-baseos:amd64-0.4.15
 ---> 9d6ec11c60ff
Step 2/7 : ENV FABRIC_CFG_PATH /etc/hyperledger/fabric
 ---> Running in 0b788a026e98
Removing intermediate container 0b788a026e98
 ---> d6a59fbe4f2c
Step 3/7 : RUN mkdir -p /var/hyperledger/production $FABRIC_CFG_PATH
 ---> Running in e676a2f93296
Removing intermediate container e676a2f93296
 ---> a1857b724e80
Step 4/7 : COPY payload/peer /usr/local/bin
 ---> 990e0e9e27f1
Step 5/7 : ADD  payload/sampleconfig.tar.bz2 $FABRIC_CFG_PATH
failed to copy files: Error processing tar file(bzip2 data invalid: bad magic value in continuation file): 
make: *** [.build/image/peer/.dummy-amd64-1.4.2-snapshot-28217fe51] Error 1
{noformat}
 ;;;","23/Jun/19 3:46 PM;Hengming-Zhang;After removing the .build directory, I can build by the `make docker` command successfully.
Suggest that `make docker-clean` also removes .build directory.;;;","30/Aug/19 11:30 AM;MHBauer;I think it's debatable whether bsdtar or gnutar is doing the wrong thing here.

Either way, with the use of the -f flag, they both work the same way. There's some leading `./` added, but I'm not 100% sure if that breaks anything.

Check if https://gerrit.hyperledger.org/r/c/fabric/+/33289 helps.;;;","30/Aug/19 11:53 AM;Hengming-Zhang;[~MHBauer] When there is a build error in .build or ./build directory in the first build `make docker` command, caused by the user is not switched to the gnutar on macOS. Then if the user switched to gnutar and rerun `make docker-clean docker` commands doesn't solve the build error problem. I think the `make docker-clean` command doesn't clean the previous build failed .tar.bz2 file(s) in .build or ./build directory.;;;","10/Sep/19 3:08 AM;sykesm;While I don't doubt you encountered issues, this seems to be working for most of the people doing development.

If you want to clean the .build tree, you can use {{make clean}}.;;;","05/Feb/21 4:53 AM;Mereep;I *can* confirm to [~Hengming-Zhang]. Deleting the `fabric-ca` directory altogether and redoing everything fixed it for me. The `docker-clean` command was *not* sufficient.

Also note, that just `export PATH=""/usr/local/opt/gnu-tar/libexec/gnubin/tar:$PATH""` did *not* make my shell actually refer to the gnu-version of `tar`. I actually had to *still restart* the terminal.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Image build options does not use network config passed in peer's config,FAB-15666,40488,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,dereckluo,mrshah-ibm,mrshah-ibm,09/Jun/19 11:26 PM,05/Oct/19 2:35 AM,28/Oct/23 3:08 AM,22/Jun/19 2:28 AM,v1.4.1,,,,,,,,,,,,,v1.4.4,v2.0.0,,,fabric-peer,,,,,,0,ipm,ipm-planned,,,,"We use custom network bridge or host network option for our docker daemon as the default bridge network has some issue installing npm packages.

 

When we set the `networkmode` to `host` in peer's config, the Image build still uses the default bridge network to build the image. Thus, it fails.

 

Solution:

`NetworkMode` should be passed to the BuildImageOptions at [https://github.com/hyperledger/fabric/blob/a68166c2bb70a7f70693e727bf36a3f692b6fe78/core/container/dockercontroller/dockercontroller.go#L204]

similar to

[https://github.com/hyperledger/fabric/blob/a68166c2bb70a7f70693e727bf36a3f692b6fe78/core/container/dockercontroller/dockercontroller.go#L138-L142]",,denyeart,mastersingh24,mrshah-ibm,scottz,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtg:i",,Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mastersingh24,mrshah-ibm,scottz,yacovm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/19 12:56 AM;yacovm;[~sykesm];;;","10/Jun/19 12:56 AM;denyeart;[~sykesm] Could you help with this one?;;;","22/Jun/19 2:28 AM;mastersingh24;[~sykesm]  - I don't think we need to backport this?  I'm going to close for now ... please reopen if we decide to backport to 1.4.2 (which may be more trouble than it is worth);;;","21/Sep/19 1:22 AM;mastersingh24;Might need to port this back to 1.4.x;;;","25/Sep/19 6:19 AM;denyeart;[~mastersingh24] Does this one require a release note in v1.4.4?;;;","28/Sep/19 2:35 AM;scottz;Looks like this was used to merge the code in release-1.4   [https://gerrit.hyperledger.org/r/c/fabric/+/33650];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix naming error,FAB-15667,40490,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tyanj,tyanj,tyanj,10/Jun/19 6:29 PM,10/Jun/19 10:28 PM,28/Oct/23 3:08 AM,10/Jun/19 9:13 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-crypto,,,,,,0,hygiene,,,,,"ecdsaPK, ok := pk.(*rsaPublicKey)
 assert.True(t, ok)
 assert.Equal(t, &lowLevelKey.PublicKey, {color:#172b4d}ecdsa{color}PK.pubKey)",,kchristidis,tyanj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00qzw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kchristidis,tyanj,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/19 6:42 PM;kchristidis;[https://gerrit.hyperledger.org/r/c/fabric/+/31803];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Enhancing Private Data Collections by adding salt to the value part of Key Value Store,FAB-15668,40491,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,sejalpawar,nishantrupani,nishantrupani,10/Jun/19 8:00 PM,11/Jun/19 1:39 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-crypto,fabric-peer,,,,,0,,,,,,"Current Scenario:

For every <K, V> pair stored in a PDC, <Hash(key), Hash(value)> is stored in ledger.

Disadvantage of using Direct Hashing to store <K,V> pair in a PDC:

Hashing is a one way function which maps data of any length to a fixed length unique string.

However, since resultant hashes are unique, it is possible for an attacker to construct a comprehensive rainbow table and guess the input string given to the hash function.

As an example, suppose that asset holdings are stored in a PDC where key is the owner's id and value is the amount of asset being held.  An attacker can simply, generate hashes of all numbers from 1 to 100000 and hashes of user names to see which owner has what amount of holding.

Using Salting:

Currently, for every <key, value> pair added to PDC, <Hash(key), Hash(value)> is added to the ledger.

Instead, we can:

Case A: Fixed Length Salt

Step 1: Randomly generate salt of fixed length.

Step 2: Append salt to the value. Here, append can be simply string append. Assume after salting, the value becomes valueSalt.

Step 4: Write <key, valueSalt> to PDC.

Step 5: Write <Hash(key), Hash(valueSalt)> to ledger.

For retrieval:
 # Fetch valueSalt using key.
 # Delete last x characters from valueSalt where x is the length of salt.

Case B: Variable length salt

Step 1: Randomly generate salt of any length between certain limits.

Step 2: Append salt to the value.

Step 3: Bind valueSalt and salt into a json blob. The resultant json blob can be represented as \{valueSalt, salt}. Alternatively, we can also store \{valueSalt, length(salt)}.

Step 4: Write <key, \{valueSalt, salt}> to PDC.

Step 5: Write <Hash(key), Hash(\{valueSalt, salt})> to ledger.

For retrieval:
 # Fetch \{valueSalt, salt} using key.
 # Delete salt from valueSalt.

 ",,nishantrupani,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00r04:",,,,No,Unset,,(Please add steps to reproduce),,Yes,,,,,,Unset,,Unset,,(Please add usage information),nishantrupani,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add error handling,FAB-15669,40492,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,tyanj,tyanj,10/Jun/19 8:21 PM,10/Jun/19 10:28 PM,28/Oct/23 3:08 AM,10/Jun/19 10:28 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-crypto,,,,,,0,hygiene,,,,,"{color:#000000}func (msp *bccspmsp) getIdentityFromConf(idBytes []byte) (Identity, bccsp.Key, error) {{color}

{color:#000000}     // get a cert{color}

{color:#000000}    cert, err := msp.getCertFromPem(idBytes){color}

{color:#000000}    if err != nil{{color}

{color:#000000}         return nil, nil, err{color}

{color:#000000}    }{color}

{color:#000000}    // get the public key in the right format{color}

{color:#000000}    certPubK, err := msp.bccsp.KeyImport(cert, &bccsp.X509PublicKeyImportOpts\{Temporary: true}){color}

{color:#000000} {color}

{color:#000000}    mspId, err := newIdentity(cert, certPubK, msp){color}

{color:#000000}    if err != nil {{color}

{color:#000000}         return nil, nil, err{color}

{color:#000000}    }{color}

{color:#000000}    return mspId, certPubK, nil{color}

{color:#000000}}{color}",,tyanj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r0c:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tyanj,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update and lock version of miekg/pkcs11 package,FAB-15670,40493,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,10/Jun/19 8:54 PM,13/Jul/19 2:10 AM,28/Oct/23 3:08 AM,10/Jun/19 10:49 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,,,,,,"Currently we vendor from the ""master"" branch and are locked to a downstream revision.
Given 1.4.2 is LTS, we should update to latest tagged version.

Also note that updating to later version also removes the dependency on libtool.",,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-852,,,,,,,,,,,,,,,FAB-15715,,,,FAB-15723,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r0k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-1.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jun/19 9:07 PM;mastersingh24;release-1.4:   https://gerrit.hyperledger.org/r/c/fabric/+/31806
master:  https://gerrit.hyperledger.org/r/31809;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE supports multiple connection profiles,FAB-15671,40495,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,scottz,scottz,11/Jun/19 12:22 AM,31/Jul/19 10:24 PM,28/Oct/23 3:08 AM,31/Jul/19 10:24 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,,,,,,"PTE must read in separate connection profiles yaml files, potentially one for each org, in the same fabric network, from the ConnProfilePath directory. It must treat them together as one network, as if all the pieces were part of one network, when generating traffic based on the traffic config parameters.

As part of this, the hardcoded 'test-network' should be made a variable. Refer also to comments in a previous code review: https://gerrit.hyperledger.org/r/c/fabric-test/+/31727/6..8/tools/PTE/pte-execRequest.js#b232

Also, address this comment too: https://gerrit.hyperledger.org/r/c/fabric-test/+/31727/6..8/tools/PTE/pte-util.js#174
",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7138,FAB-15416,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|hzwqrg:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"25/Jul/19 12:17 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/32474;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
optimization: drop whole index DB when more than half of blocks need to be rollbacked,FAB-15672,40496,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Senthil1,Senthil1,Senthil1,11/Jun/19 12:48 AM,21/Nov/19 11:35 PM,28/Oct/23 3:08 AM,21/Nov/19 11:35 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"when more than half of the blocks' indicies to be deleted, it might be efficient to drop the whole index database rather than deleting entries.",,denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r18:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/19 11:35 PM;denyeart;Since this is a rare admin task, I don't think we need to add more code paths for edge case optimizations.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Shellcheck errors in test running scripts,FAB-15673,40497,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,swetharepakula,swetharepakula,11/Jun/19 3:19 AM,02/Aug/19 7:43 PM,28/Oct/23 3:08 AM,02/Aug/19 7:43 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"The shellcheck linter flagged issues in the run-integration-test.sh and run-unit-tests.sh.
{code:java}
shellcheck -f gcc scripts/run-unit-tests.sh
scripts/run-unit-tests.sh:40:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/run-unit-tests.sh:42:17: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
scripts/run-unit-tests.sh:44:17: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
scripts/run-unit-tests.sh:50:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/run-unit-tests.sh:52:30: warning: Quote this to prevent word splitting. [SC2046]
scripts/run-unit-tests.sh:60:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/run-unit-tests.sh:82:10: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/run-unit-tests.sh:85:15: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/run-unit-tests.sh:87:21: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/run-unit-tests.sh:87:47: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
scripts/run-unit-tests.sh:90:15: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/run-unit-tests.sh:92:21: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/run-unit-tests.sh:92:61: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
scripts/run-unit-tests.sh:100:77: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
scripts/run-unit-tests.sh:114:11: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/run-unit-tests.sh:114:16: note: Use $(..) instead of legacy `..`. [SC2006]
scripts/run-unit-tests.sh:115:11: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/run-unit-tests.sh:115:31: warning: Prefer [ p ] || [ q ] as [ p -o q ] is not well defined. [SC2166]
scripts/run-unit-tests.sh:115:35: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/run-unit-tests.sh:132:14: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/run-unit-tests.sh:132:41: note: Double quote to prevent globbing and word splitting. [SC2086]
{code}
{code:java}
shellcheck -f gcc scripts/run-integration-tests.sh
scripts/run-integration-tests.sh:19:16: warning: This { is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
scripts/run-integration-tests.sh:19:17: warning: This { is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
scripts/run-integration-tests.sh:19:22: warning: This } is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
scripts/run-integration-tests.sh:19:23: warning: This } is literal. Check expression (missing ;/\n?) or quote it. [SC1083]
scripts/run-integration-tests.sh:27:15: warning: Prefer mapfile or read -a to split command output (or quote to avoid splitting). [SC2207]
{code}",,swetharepakula,sykesm,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jun/19 9:21 AM;yukkyhira;run-integration-test-org.log.log;https://jira.hyperledger.org/secure/attachment/17332/run-integration-test-org.log.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:r4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,sykesm,yukkyhira,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jun/19 5:08 PM;yukkyhira;I have 2 questions.

1. Can I change the Status BACKLOG to TO DO?
Originally the status was BACKLOG. I changed it already, but I'm not sure that was a correct procedure.

2. To fix the [SC2207|https://github.com/koalaman/shellcheck/wiki/SC2207] warning of run-integration-test.sh, we have to write codes for bash 4.x and 3.x+;
Because Fabric works on both 4.x and 3.x (for example, bash version of Ubuntu Linux 14.04 is 4.3, bash version of Mac OS X is 3.x.)
I think this is verbose. Do you have any idea what should I fix this warning?;;;","20/Jun/19 11:05 AM;yukkyhira;{quote}2. To fix the [SC2207|https://github.com/koalaman/shellcheck/wiki/SC2207] warning of run-integration-test.sh, we have to write codes for bash 4.x and 3.x+;
Because Fabric works on both 4.x and 3.x (for example, bash version of Ubuntu Linux 14.04 is 4.3, bash version of Mac OS X is 3.x.)


{quote}
I confirmed code for bash 3.x+ works fine on bash 4.x too. So I will go that route.;;;","20/Jun/19 5:02 PM;yukkyhira;How can I run run-integration-tests.sh?
I need to check run-integration-tests.sh works properly. I ran it without any modifications following [Running the unit tests|https://hyperledger-fabric.readthedocs.io/en/latest/dev-setup/build.html?highlight=Unit%20test#running-the-unit-tests]. But error was occured when Discovery Service Suite 3/3.
I did as below;
~/go/src/github.com/hyperledger/fabric$ make integration-test;;;","21/Jun/19 6:33 AM;swetharepakula;In regards to your questions:
 # Yes you can change the status from Backlog to To DO. If you are currently working on it you can also change to In Progress.
 # I think the approach you have the works for bash 3.x and 4.x is the best option.
 # Running integration tests is done as you mention `make integration-test`. What is the error message you are seeing?;;;","21/Jun/19 9:24 AM;yukkyhira;Thanks for the reply.
 # I understand.
 # I confirmed code for bash 3.x+ works fine on bash 4.x too. So I will go that route.
 # I attached the log of make integration-test. [^run-integration-test-org.log.log]
 I ran this test as below;
 export PKCS11_LIB=""/usr/lib/x86_64-linux-gnu/softhsm/libsofthsm2.so""
 export PKCS11_PIN=98765432
 export PKCS11_LABEL=""ForFabric""
 softhsm2-util --init-token --slot 0 --label ""ForFabric"" --so-pin 1234 --pin 98765432
 make integration-test

[~swetharepakula];;;","02/Aug/19 2:52 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32642 [FAB-15673] address shellcheck issues in scripts

After that change, {{shellcheck}} doesn't complain about anything in scripts.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address shellcheck issues with pull_build_artifacts.sh,FAB-15674,40498,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,yukkyhira,swetharepakula,swetharepakula,11/Jun/19 3:21 AM,19/Jun/19 12:07 PM,28/Oct/23 3:08 AM,19/Jun/19 1:49 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"The shellcheck linter flagged a number of issues with scripts/pull_build_artifacts.sh. 
{code:java}
shellcheck -f gcc scripts/pull_build_artifacts.sh
scripts/pull_build_artifacts.sh:71:42: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:71:49: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:71:55: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:72:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:72:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:72:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:72:80: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:72:87: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:72:93: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:73:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:73:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:73:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:73:80: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:74:44: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:74:51: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:74:57: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:80:12: warning: Declare and assign separately to avoid masking return values. [SC2155]
scripts/pull_build_artifacts.sh:81:28: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:83:18: note: Useless echo? Instead of 'cmd $(echo foo)', just use 'cmd foo'. [SC2116]
scripts/pull_build_artifacts.sh:85:23: note: Useless cat. Consider 'cmd < file | ..' or 'cmd file | ..' instead. [SC2002]
scripts/pull_build_artifacts.sh:86:19: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:87:29: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:112: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:128: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:135: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:151: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:178: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:194: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:201: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:88:217: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:89:10: note: Check exit code directly with e.g. 'if mycmd;', not indirectly with $?. [SC2181]
scripts/pull_build_artifacts.sh:101:46: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:101:59: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:102:45: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:102:58: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:102:84: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:102:97: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:103:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:103:61: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:113:42: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:113:49: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:113:55: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:114:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:114:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:114:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:114:83: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:115:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:115:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:115:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:115:83: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:115:90: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:115:96: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:116:44: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:116:51: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:116:57: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:123:42: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:123:49: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:123:55: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:124:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:124:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:124:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:124:80: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:124:87: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:124:93: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:125:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:125:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:125:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:125:80: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:126:44: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:126:51: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:126:57: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:133:42: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:133:49: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:133:55: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:134:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:134:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:134:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:134:80: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:134:87: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:134:93: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:135:41: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:135:48: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:135:54: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:135:80: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:136:44: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:136:51: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:136:57: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/pull_build_artifacts.sh:174:17: error: Double quote array expansions to avoid re-splitting elements. [SC2068]
{code}",,btl5037,swetharepakula,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r1o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,swetharepakula,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/19 1:55 PM;yukkyhira;I got a response on the fabric chat.

https://chat.hyperledger.org/channel/fabric?msg=kN96qrpH6aBtngza9;;;","19/Jun/19 12:05 AM;btl5037;[~swetharepakula] [~yukkyhira]

We are going to delete this script. It has been broken since we dropped the `stable` from our Docker image tags. I spoke with Dave Enyeart, this is a convenience script for users, and has no practical purpose in fabric and we have historically had trouble keeping up with the maintenance on it. Given that no one has raised an issue with parts of it being broken for months now, we are just going to delete it. I will open a separate Jira to do that, we can close this one.;;;","19/Jun/19 1:49 AM;swetharepakula;Script is going to be removed in a separate Jira;;;","19/Jun/19 9:43 AM;yukkyhira;Thank you for your help.

[~btl5037];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address issues flagged by shellcheck in check_license.sh & metrics_doc.sh,FAB-15675,40499,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,nekia,swetharepakula,swetharepakula,11/Jun/19 3:24 AM,25/Jul/19 10:17 PM,28/Oct/23 3:08 AM,25/Jul/19 10:17 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"shellcheck linter flags a number of issues in scripts/check_license.sh
{code:java}
 shellcheck -f gcc scripts/check_license.sh
scripts/check_license.sh:8:8: warning: Can't follow non-constant source. Use a directive to specify location. [SC1090]
scripts/check_license.sh:8:14: warning: Quote this to prevent word splitting. [SC2046]
{code}
shellcheck linter flags a number of issues in scripts/metrics_docs.sh
{code:java}
 shellcheck -f gcc scripts/metrics_doc.sh
scripts/metrics_doc.sh:17:33: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/metrics_doc.sh:17:69: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/metrics_doc.sh:26:53: note: Double quote to prevent globbing and word splitting. [SC2086]
{code}",,guoger,nekia,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jun/19 9:42 PM;nekia;Screenshot from 2019-06-13 22-41-14.png;https://jira.hyperledger.org/secure/attachment/17318/Screenshot+from+2019-06-13+22-41-14.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r1w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,nekia,swetharepakula,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jun/19 11:39 AM;nekia;I could recreat it except 1 warning of 'scripts/check_license.sh:8:8'.

{noformat}
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ sudo apt-get install shellcheck

vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ shellcheck -f gcc scripts/check_license.sh
scripts/check_license.sh:8:14: warning: Quote this to prevent word splitting. [SC2046]

vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ shellcheck -f gcc scripts/metrics_doc.sh
scripts/metrics_doc.sh:17:33: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/metrics_doc.sh:17:69: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/metrics_doc.sh:26:53: note: Double quote to prevent globbing and word splitting. [SC2086]

vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ shellcheck -V
ShellCheck - shell script analysis tool
version: 0.3.7
license: GNU Affero General Public License, version 3
website: http://www.shellcheck.net

vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ git log -1 --oneline 
f2cc88c Merge ""[FAB-15031] Collect common ledger stats in blockstorage""
{noformat}

https://github.com/koalaman/shellcheck/wiki/SC2046
https://github.com/koalaman/shellcheck/wiki/SC2086;;;","13/Jun/19 12:17 PM;nekia;Fixed. The re-generated docs/source/metrics_reference.rst is identical with the latest on the repository.

{noformat}
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ go version
go version go1.12.6 linux/amd64
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ scripts/metrics_doc.sh generate
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ scripts/metrics_doc.sh check
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ shellcheck -f gcc scripts/metrics_doc.sh
{noformat}
;;;","13/Jun/19 12:22 PM;nekia;
{noformat}
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ echo 'test' > common/test.go
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ git add common/test.go 
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ scripts/check_license.sh 
The following files are missing SPDX-License-Identifier headers:
common/test.go

Please replace the Apache license header comment text with:
SPDX-License-Identifier: Apache-2.0

Checking committed files for traditional Apache License headers ...
The following files are missing traditional Apache 2.0 headers:
common/test.go
Fatal Error - All files must have a license header
vagrant@ubuntu:~/go_hl/src/github.com/hyperledger/fabric$ shellcheck -f gcc scripts/check_license.sh
{noformat}
;;;","13/Jun/19 3:15 PM;guoger;warning of 'scripts/check_license.sh:8:8' can be recreated by upgrading to shellcheck 0.6.0;;;","13/Jun/19 3:18 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31882;;;","13/Jun/19 9:58 PM;nekia;[~guoger] Thanks! I've checked these scripts on the shellcheck web application. I could see the mentioned warning.

!Screenshot from 2019-06-13 22-41-14.png|width=640!

And I agree with ignoring sourced file scripts/function.sh because we've already done checking each script file seperately. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address issues flagged by shellcheck in scripts/golinter.sh,FAB-15676,40500,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yukkyhira,swetharepakula,swetharepakula,11/Jun/19 3:33 AM,02/Aug/19 1:44 AM,28/Oct/23 3:08 AM,02/Aug/19 1:44 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"shellcheck flagged some issues in the scripts/golinter.sh
{code:java}
shellcheck -f gcc scripts/golinter.sh
scripts/golinter.sh:9:8: warning: Can't follow non-constant source. Use a directive to specify location. [SC1090]
scripts/golinter.sh:9:14: warning: Quote this to prevent word splitting. [SC2046]
scripts/golinter.sh:55:10: note: Expressions don't expand in single quotes, use double quotes for that. [SC2016]
{code}",,swetharepakula,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r24:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,yukkyhira,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jun/19 2:41 PM;yukkyhira;I reproduced this issue.

This shell script is referred from Makefile, so I think it's still inuse. I have checked to run this shell script without any errors.

 ;;;","19/Jun/19 12:00 PM;yukkyhira;[https://gerrit.hyperledger.org/r/c/fabric/+/31973];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address shellcheck issues with scripts/compile_protos.sh,FAB-15677,40501,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,crashmark93,swetharepakula,swetharepakula,11/Jun/19 3:35 AM,02/Jul/19 4:45 PM,28/Oct/23 3:08 AM,02/Jul/19 4:45 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,help-wanted,hygiene,ipm,,,"{code:java}
shellcheck -f gcc scripts/compile_protos.sh
scripts/compile_protos.sh:14:20: warning: Use -print0/-0 or -exec + to allow for non-alphanumeric filenames. [SC2038]
scripts/compile_protos.sh:17:23: warning: Use -print0/-0 or -exec + to allow for non-alphanumeric filenames. [SC2038]
scripts/compile_protos.sh:17:28: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/compile_protos.sh:18:5: warning: Quote this to prevent word splitting. [SC2046]
scripts/compile_protos.sh:19:11: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/compile_protos.sh:20:11: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/compile_protos.sh:24:25: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/compile_protos.sh:27:58: note: Double quote to prevent globbing and word splitting. [SC2086]
{code}",,crashmark93,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r2c:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),crashmark93,swetharepakula,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/19 7:41 PM;swetharepakula;[https://gerrit.hyperledger.org/r/#/c/fabric/+/32033/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address shellcheck issues with scripts/multiarch.sh,FAB-15678,40502,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,swetharepakula,swetharepakula,11/Jun/19 3:37 AM,11/Jun/19 3:37 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"{code:java}
shellcheck -f gcc scripts/multiarch.sh
scripts/multiarch.sh:56:1: note: which is non-standard. Use builtin 'command -v' instead. [SC2230]
scripts/multiarch.sh:57:6: note: Check exit code directly with e.g. 'if mycmd;', not indirectly with $?. [SC2181]
scripts/multiarch.sh:66:17: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:66:28: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:66:43: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:67:17: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:67:28: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:67:43: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:72:30: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:72:49: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:75:30: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:75:49: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:82:17: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:82:28: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:82:37: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:83:17: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:83:28: note: Double quote to prevent globbing and word splitting. [SC2086]
scripts/multiarch.sh:83:37: note: Double quote to prevent globbing and word splitting. [SC2086]
{code}",,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r2k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
duplicate: doc,FAB-15679,40504,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,sykesm,sykesm,11/Jun/19 5:24 AM,26/Jun/19 9:40 PM,28/Oct/23 3:08 AM,11/Jun/19 5:27 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"The process around migrating from Kafka to raft needs to be documented. This documentation should cover planning, risk mitigation, and the actual process.

/cc [~jyellick]
/cc [~nirro]",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r2s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove flogging/legacy and update users,FAB-15680,40506,39651,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,11/Jun/19 6:43 AM,17/Jun/19 11:15 AM,28/Oct/23 3:08 AM,17/Jun/19 11:15 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r38:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jun/19 6:51 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31815 [FAB-15680] remove references to go-logging;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove go-logging from vendor,FAB-15681,40507,39651,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,11/Jun/19 6:43 AM,17/Jun/19 11:15 AM,28/Oct/23 3:08 AM,17/Jun/19 11:15 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r3g:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jun/19 6:50 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/31816 [FAB-15681] remove go-logging from vendor;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
End to end test for block commit hash,FAB-15682,40508,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,manish-sethi,manish-sethi,11/Jun/19 7:00 AM,21/Aug/19 4:55 AM,28/Oct/23 3:08 AM,05/Aug/19 7:56 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Though ledger test suit is added after 1.4 in master - https://github.com/hyperledger/fabric/tree/master/integration/ledger. For this test, the ledger suit can be introduced in 1.4 and then only specific test can be ported to master",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r3o:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
End to end test for ledger reset/rollback,FAB-15683,40509,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,manish-sethi,manish-sethi,11/Jun/19 7:00 AM,27/Jul/19 11:49 AM,28/Oct/23 3:08 AM,13/Jul/19 12:47 AM,,,,,,,,,,,,,,v1.4.2,,,,,,,,,,0,,,,,,"Though ledger test suit is added after 1.4 in master - https://github.com/hyperledger/fabric/tree/master/integration/ledger. For this test, the ledger suit can be introduced in 1.4 and then only specific test can be ported to master",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r3w:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"nwo.EnableCapabilities() does not work for Channel, & system-channel",FAB-15684,40512,,Bug,Unverified,FAB,Fabric,software,denyeart,,,Medium,,,tock,tock,11/Jun/19 4:53 PM,01/Oct/19 2:11 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,Future,,,,fabric-common,,,,,,0,ipm,,,,,"func EnableCapabilities() in deploy.go 

# does not work for Channel group capabilities (only Application and Orderer)
# does not work for the system channel (as it needs an Orderer Admin Session).

see also the temporary fix in:  https://gerrit.hyperledger.org/r/c/fabric/+/31820

related to https://jira.hyperledger.org/browse/FAB-15524
",,jyellick,scottz,sykesm,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00pko:r",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,scottz,sykesm,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Sep/19 5:44 AM;scottz;[~wlahti], it looks like you touched the code being referenced. Can you please determine if this old bug can be closed now, or else identify what needs to be done?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
pkcs11 bccsp does not need filekeystore,FAB-15685,40514,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,sykesm,mastersingh24,mastersingh24,11/Jun/19 7:15 PM,29/Oct/19 1:55 AM,28/Oct/23 3:08 AM,29/Oct/19 1:55 AM,v1.4.1,,,,,,,,,,,,,v2.0.0,,,,fabric-crypto,,,,,,0,ipm,,,,,The PKCS11 bccsp does not use a file-based keystore so there is no reason to actually require it to be set in the config,,joaquimpedrooliveira,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16609,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:6rqy",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joaquimpedrooliveira,mastersingh24,sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Oct/19 2:21 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/34094 Remove keystore configuration for pkcs11 bccsp;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Review comments on orderer/common/... ,FAB-15686,40515,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,11/Jun/19 9:32 PM,20/Jun/19 1:01 PM,28/Oct/23 3:08 AM,14/Jun/19 3:05 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"address review comments:

https://gerrit.hyperledger.org/r/c/fabric/+/31817/1/orderer/common/server/main.go#189

and this:

https://gerrit.hyperledger.org/r/c/fabric/+/31818/2/orderer/common/multichannel/chainsupport.go#102

of renaming chain to channel in log messages.

this will be addressed in FAB-15697:

https://gerrit.hyperledger.org/r/c/fabric/+/31817/1/orderer/common/server/main_test.go#297
",,jyellick,sykesm,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r58:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,tock,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE CITest change to connection profile,FAB-15687,40518,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,11/Jun/19 10:19 PM,13/Jun/19 10:28 PM,28/Oct/23 3:08 AM,13/Jun/19 10:28 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,PTE will support connection profile (FAB-7138). Need to change CITest cases to use connection profile,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00r5w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"12/Jun/19 4:54 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31842;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip/comm tests doesn't end after 20 min,FAB-15688,40522,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,11/Jun/19 10:52 PM,14/Jan/20 3:13 AM,28/Oct/23 3:08 AM,19/Jun/19 3:16 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-gossip,,,,,,0,ci-flake,,,,,"It seems like there is some sort of deadlock involving
gossip/comm.TestMetrics
and
gossip/comm.TestReConnections

 ",,denyeart,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15309,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jun/19 10:55 PM;ronenschafferibm;2019_06_10-12856.log;https://jira.hyperledger.org/secure/attachment/17315/2019_06_10-12856.log","11/Jun/19 10:55 PM;ronenschafferibm;2019_06_10-12861.log;https://jira.hyperledger.org/secure/attachment/17314/2019_06_10-12861.log","11/Jun/19 10:54 PM;ronenschafferibm;2019_06_10-12862.log;https://jira.hyperledger.org/secure/attachment/17313/2019_06_10-12862.log","11/Jun/19 10:54 PM;ronenschafferibm;2019_06_11-12886.log;https://jira.hyperledger.org/secure/attachment/17312/2019_06_11-12886.log",,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r64:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,ronenschafferibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jun/19 2:02 AM;denyeart;Occurs repeatedly in release-1.4.;;;","16/Jun/19 11:46 PM;ronenschafferibm;It seems that there is a bug in
[https://github.com/hyperledger/fabric/blob/867606007eac090f3a5f422aa272c4be63690f02/gossip/comm/conn.go#L282-L285]
The Add() should be outside of the ""IsEnabledFor if"".
The test that fails is:
gossip/comm/metrics_test.go:TestMetrics()
[https://github.com/hyperledger/fabric/blob/9eb509344c51e7360104e44854cfc8ace51fd809/gossip/comm/metrics_test.go#L26]
It sends messages until it acknowledges a buffer overflow flag (which isn't set due to the bug)


This was solved and merged to master by the following CR:
[https://gerrit.hyperledger.org/r/c/fabric/+/31241]
commit: 47407935fbf9d1547373c98ad69b78f67bd26e17

It can be easily merged to release-1.4
[~denyeart] [~sykesm] what do you think?;;;","18/Jun/19 11:28 PM;ronenschafferibm;Created a CR that is a cherry pick from master to release-1.4

https://gerrit.hyperledger.org/r/c/fabric/+/31958;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Handle newly introduced DecodeOrderPreservingVarUint64() error,FAB-15689,40525,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,manish-sethi,manish-sethi,12/Jun/19 12:56 AM,21/Aug/19 4:56 AM,28/Oct/23 3:08 AM,21/Aug/19 4:56 AM,v1.1.2,v1.2.2,v1.4.2,v2.0.0,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,"A new error is introduced while fixing FAB-15450. A couple of places, this was ignored because these places are never expected to get this error (as it was working without this before). However, for code consistency, it is better to handle the error.

A couple references where this needs to be fixed - 
https://gerrit.hyperledger.org/r/#/c/fabric/+/31519/13/core/ledger/kvledger/txmgmt/version/version.go@38

https://gerrit.hyperledger.org/r/#/c/fabric/+/31519/13/core/transientstore/store_helper.go@93",,denyeart,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwzwl:",,,,Unset,Unset,Next Items- Ledger,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,wenjian,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/19 2:40 AM;wenjian;v1.4 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32163/];;;","12/Jul/19 11:50 PM;denyeart;[~wenjian] Need to cherry pick to master, right?;;;","13/Jul/19 12:53 AM;wenjian;[~denyeart] yes

v2.0 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32291/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE gen_cfgInputs supports connection profile,FAB-15690,40526,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,12/Jun/19 2:06 AM,19/Jun/19 10:08 PM,28/Oct/23 3:08 AM,19/Jun/19 10:08 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"PTE supports connection profile (FAB-7138), gen_cfgInputs needs to change accordingly to support connection profile.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00r6s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"13/Jun/19 5:19 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31864;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Data race detected in TestWithStaticDeliverClientLeader,FAB-15691,40527,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Duplicate,mrosen52,sykesm,sykesm,12/Jun/19 2:21 AM,12/Jun/19 2:30 AM,28/Oct/23 3:08 AM,12/Jun/19 2:30 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,ipm,ipm-planned,race,,,"Running locally

{code}
go test -race -v -run TestWithStaticDeliverClientLeader
{code}

results in the following race on current master.

{code}
==================
WARNING: DATA RACE
Write at 0x00c0000c4740 by goroutine 153:
  sync.(*WaitGroup).Wait()
      /usr/local/Cellar/go/1.12.5/libexec/src/internal/race/race.go:41 +0xef
  github.com/hyperledger/fabric/gossip/comm.(*connection).close()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:243 +0x1c7
  github.com/hyperledger/fabric/gossip/comm.(*connectionStore).onConnected()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:165 +0x70b
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).GossipStream()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:557 +0x494
  github.com/hyperledger/fabric/protos/gossip._Gossip_GossipStream_Handler()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/protos/gossip/message.pb.go:2466 +0xcd
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).processStreamingRPC()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1176 +0x1669
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleStream()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:1256 +0x12e5
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1.1()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:691 +0xac

Previous read at 0x00c0000c4740 by goroutine 95:
  sync.(*WaitGroup).Add()
      /usr/local/Cellar/go/1.12.5/libexec/src/internal/race/race.go:37 +0x169
  github.com/hyperledger/fabric/gossip/comm.(*connection).serviceConnection()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:293 +0xf4

Goroutine 153 (running) created at:
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams.func1()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:689 +0xb8
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).operateHeaders()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:421 +0x1622
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.(*http2Server).HandleStreams()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_server.go:461 +0x37a
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).serveStreams()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:687 +0x170
  github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).handleRawConn.func1()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:649 +0x50

Goroutine 95 (finished) created at:
  github.com/hyperledger/fabric/gossip/comm.(*connectionStore).getConnection()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/conn.go:124 +0x878
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).sendToEndpoint()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:231 +0x2ce
  github.com/hyperledger/fabric/gossip/comm.(*commImpl).Send.func1()
      /Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/comm/comm_impl.go:218 +0x51
==================
{code}",,sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r70:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Prepare initial test script for PTE system test suite on IKS k8s cluster.,FAB-15692,40530,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,12/Jun/19 2:55 AM,19/Aug/19 11:19 PM,28/Oct/23 3:08 AM,17/Aug/19 6:31 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,ipm,,,,,"Prepare initial PTE test script to run PTE test cases on k8s cluster.

- Prepare networkspec configuration file for the network to be used for PTE test cases
- Spin up the N/W on K8s cluster using Golang launcher and operator tools
- execute test steps, deploying cc, running invokes and queries for multiple tests, and tear down network


(Later date: we plan to convert pte test json files into PTE test spec yaml file and run the tests)",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16077,,,,FAB-16336,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15587,,,No,,Unset,No,,,"1|i00uuw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"14/Jun/19 3:44 AM;rameshthoomu;Prepared new networkspec file for FAB-3833-2i testcase and tried to create network using NL in go. While running below command 

go run networkLauncher.go -i /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/tools/NL/go/templates/networkspec.yaml -k /var/lib/jenkins/kubeconfig/kube-config-wdc07-community-quality.yml

observed below error

go run networkLauncher.go -i /home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/tools/NL/go/templates/FAB-3833-2i-NS.yaml -k /var/lib/jenkins/kubeconfig/kube-config-wdc07-community-quality.yml
mode is set to up
exit status 1
2019/06/13 10:57:00 exit status 1
exit status 1
;;;","19/Jul/19 12:40 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32393/;;;","15/Aug/19 11:30 PM;rameshthoomu;fabric-test master branch is broken to run this patch. Will wait for the fix.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Reduce references to flogging.Global outside of the flogging package,FAB-15693,40532,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mrosen52,sykesm,sykesm,12/Jun/19 3:35 AM,19/Jun/19 5:54 AM,28/Oct/23 3:08 AM,19/Jun/19 5:54 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-common,,,,,,0,hygiene,ipm,,,,"Of the current references to global:

- SetWriter should be implemented as a package function.
- Global.Level references should be replaced with flogging.GetLoggerLevel
- SetObserver should be implemented as a package function.

Additionally, SetWriter and SetObserver should return the current values that are being displaced. This will require changes to the implementations on flogging.Logger and the tests.",,mrosen52,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00c0a:6",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mrosen52,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jun/19 6:13 AM;mrosen52;https://gerrit.hyperledger.org/r/c/fabric/+/31923;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Streamline orderer/.../main_test.go,FAB-15697,40538,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,12/Jun/19 7:44 PM,26/Jun/19 4:40 PM,28/Oct/23 3:08 AM,20/Jun/19 3:20 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Address this review comment:

https://gerrit.hyperledger.org/r/c/fabric/+/31817/1/orderer/common/server/main_test.go#297

get rid of:
func mockCrypto() and func makeConfigTx()",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r8s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
TestChannelConfig fails when focused,FAB-15698,40539,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,btl5037,btl5037,12/Jun/19 11:38 PM,14/Aug/19 10:52 PM,28/Oct/23 3:08 AM,14/Aug/19 10:52 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,,,,,,The TestChannelConfig test in gossip/service/gossip_service_test.go fails when it is focused. This is a symptom of a larger problem which is the handling of the global config in the package. The only reason this test was ever able to pass was due to the byproduct of the global config being initialized in another test.,,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r90:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE_Functions:test_FAB7929_8i failed in fabric-test merge job.,FAB-15699,40541,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,vijaypunugubati,vijaypunugubati,13/Jun/19 12:37 AM,29/Jul/19 3:05 AM,28/Oct/23 3:08 AM,29/Jul/19 3:03 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,"*Summary:* systest_pte.py::PTE_Functions::test_FAB7929_8i FAILED

*Branch:* Master**

*Platform:* ** x86_64

*Error* Snippet: 
{code:java}
/systest_pte.py::PTE_Functions::test_FAB7929_8i FAILED
00:24:50.860 
00:24:50.860  generated xml file: /w/workspace/fabric-test-merge-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/smoke/results_systest_pte.xml 
00:24:50.860 =================================== FAILURES ===================================
00:24:50.860 ________________________ PTE_Functions.test_FAB7929_8i _________________________
00:24:50.860 
00:24:50.860 self = <systest_pte.PTE_Functions testMethod=test_FAB7929_8i>
00:24:50.860 
00:24:50.860     def test_FAB7929_8i(self):
00:24:50.860         '''
00:24:50.860             Description:
00:24:50.860     
00:24:50.860             Functional and TPS performance measurement test.
00:24:50.860             - This scenario launches a network, as defined below,
00:24:50.860               and runs two tests - for invokes, and for queries -
00:24:50.860               on single host using networkLauncher (after removing
00:24:50.860               any existing network and artifacts).
00:24:50.860     
00:24:50.860             Network Topology: 3 Ord, 4 KB, 3 ZK, 2 Org, 2 Peers/Org, TLS enabled
00:24:50.860               LevelDB, 4 Channels, 1 chaincode (sample_cc), 8 threads total
00:24:50.860     
00:24:50.861             Part 1:
00:24:50.861             - Use PTE in Constant Stress Mode to continuously send INVOKE
00:24:50.861               transactions concurrently to 1 peer in both orgs,
00:24:50.861               for each of the 4 channels (8 threads total, each
00:24:50.861               send 100 transaction proposals)
00:24:50.861             - Register a listener to receive an event for each
00:24:50.861               Block (not per transaction) per
00:24:50.861               Channel (full block events - not filtered blocks)
00:24:50.861             - Count TXs and ensure events are received for each one (indicating
00:24:50.861               each was written to ledger successfully) and calculate TPS results
00:24:50.861     
00:24:50.861             Part 2:
00:24:50.861             - QUERY all the invoked transactions
00:24:50.861             - Count successes and calculate TPS results
00:24:50.861     
00:24:50.861             Logs Artifacts Locations, PTE Testcase Logs:
00:24:50.861                 fabric-test/tools/PTE/CITest/Logs/FAB-7929-8i-pteReport.log
00:24:50.861                 fabric-test/tools/PTE/CITest/Logs/FAB-7929-8i-<MMDDHHMMSS>.log
00:24:50.861                 fabric-test/tools/PTE/CITest/Logs/FAB-7929-8q-<MMDDHHMMSS>.log
00:24:50.861             '''
00:24:50.861     
00:24:50.861         # Run the test scenario: launch network and run the invokes and query tests.
00:24:50.861         # We do these two testcases together in this one test scenario, with
00:24:50.861         # one network, because the query test needs to query all those same
00:24:50.861         # transactions that were done with the invokes.
00:24:50.861         returncode = subprocess.call(""./FAB-7929-8i.sh"", cwd=scenarios_directory, shell=True)
00:24:50.861         self.assertEqual(returncode, 0, msg=""Test Failed with non-zero exit code; check for errors in fabric-test/tools/PTE/CITest/Logs/"")
00:24:50.861         # tear down the network, including all the nodes docker containers
00:24:50.861         returncode = subprocess.call(""./networkLauncher.sh -a down"", cwd=nl_directory, shell=True)
00:24:50.861     
00:24:50.861         # Check log file for the expected output lines.
00:24:50.861         #
00:24:50.861         # Output Summary should include lines like these for the Invokes portion of the test:
00:24:50.861         #    CONSTANT INVOKE Overall number of PTE: 4
00:24:50.861         #    CONSTANT INVOKE Overall processes: 8
00:24:50.861         #    CONSTANT INVOKE Overall transactions: sent 800 received 800
00:24:50.861         #    CONSTANT INVOKE Overall failures: proposal 0 transactions 0
00:24:50.861         #    CONSTANT INVOKE Overall event: received 800 timeout 0 unreceived 0
00:24:50.861         #    CONSTANT INVOKE Overall time: start 1536676220165 end 1536676228702 duration 8537
00:24:50.862         #    CONSTANT INVOKE Overall CONSTANT INVOKE TPS 93.71
00:24:50.862         #    CONSTANT INVOKE Overall latency summary
00:24:50.862         #        CONSTANT INVOKE Overall proposals latency 800 min 4 ms max 178ms avg 19.35 ms
00:24:50.862         #        CONSTANT INVOKE Overall transactions latency 800 min 5 ms max 158 ms avg 44.10 ms
00:24:50.862         #        CONSTANT INVOKE Overall events latency 800 min 468 ms max 3097 ms avg 1652.28 ms
00:24:50.862         #
00:24:50.862         # Output Summary should include lines like these for the Query portion of the test:
00:24:50.862         #    CONSTANT QUERY Overall number of PTE: 4
00:24:50.862         #    CONSTANT QUERY Overall processes: 8
00:24:50.862         #    CONSTANT QUERY Overall transactions: sent 800 received 800 failures 0
00:24:50.862         #    CONSTANT QUERY Overall time: start 1536676374892 end 1536676376872 duration 1980
00:24:50.862         #    CONSTANT QUERY Overall CONSTANT QUERY TPS 404.04
00:24:50.862     
00:24:50.862         # First check if the test finished and created the report file; then check it for accurate counts
00:24:50.862         logfilelist = subprocess.check_output(""ls"", cwd=logs_directory, shell=True)
00:24:50.862         self.assertIn(""FAB-7929-8i-pteReport.log"", logfilelist)
00:24:50.862     
00:24:50.862         count = subprocess.check_output(
00:24:50.862                 ""grep \""CONSTANT INVOKE Overall transactions: sent 800 received 800\"" FAB-7929-8i-pteReport.log | wc -l"",
00:24:50.862                 cwd=logs_directory, shell=True)
00:24:50.862 >       self.assertEqual(int(count.strip()), 1)
00:24:50.862 E       AssertionError: 0 != 1
00:24:50.862 
00:24:50.862 systest_pte.py:90: AssertionError/ code placeholder
{code}
*Build Logs:* [https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/687/consoleFull]",,dongming,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00r9g:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"29/Jul/19 3:05 AM;vijaypunugubati;Working as expected on recent builds [https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-merge-x86_64/708/console]
{code:java}
/00:13:42.173 Successfully installed npm.
00:13:42.420 ============================= test session starts ==============================
00:13:42.420 platform linux2 -- Python 2.7.12, pytest-2.8.7, py-1.4.31, pluggy-0.3.1 -- /usr/bin/python
00:13:42.420 cachedir: .cache
00:13:42.420 rootdir: /w/workspace/fabric-test-merge-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/smoke, inifile: 
00:13:42.428 collecting ... collected 1 items
00:13:42.429 
00:29:54.047 systest_pte.py::PTE_Functions::test_FAB7929_8i PASSED/ code placeholder
{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Recover Raft cluster with expired certs,FAB-15700,40544,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,13/Jun/19 5:21 AM,19/Dec/20 9:38 PM,28/Oct/23 3:08 AM,06/Aug/19 3:18 AM,,,,,,,,,,,,,,v1.4.3,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"*Background*: Raft clusters use *TLS* pinning to authenticate nodes. *TLS* uses standard *x509* validation for certificates which dictates a certificate is only valid between its *NotBefore* and *NotAfter* attributes.

Thus, the operators need to periodically change *TLS* certificates by:
 * Issuing config updates to all channels that change the *TLS* certificates of the nodes.
 * Restarting the nodes with the new *TLS* certificates.

*Disclaimer*: to be clear, this is done one at a time, and this JIRA shouldn't be used as a guide to administer a Raft cluster.

*Problem*: When half or more of the *TLS* certificates of the Raft cluster members expire, it is no longer possible to do config updates due to loss of quorum, so the Blockchain is then stuck forever.

*Observation*: The Golang *TLS* config has a pluggable *time.Time* function that if set (not nil) it overrides the real time used when verifying *TLS* certificates at time of *TLS* handshake.
{code:java}
	// Time returns the current time as the number of seconds since the epoch.
	// If Time is nil, *TLS* uses time.Now.
	Time func() time.Time
{code}
Relevant snippet from the code:
{code:java}
			opts := x509.VerifyOptions{
				Roots:         c.config.RootCAs, 
// ------------------------------------------------------------------------                      
				CurrentTime:   c.config.time()  
// ------------------------------------------------------------------------
				DNSName:       c.config.ServerName,
				Intermediates: x509.NewCertPool(),
			}

			for i, cert := range certs {
				if i == 0 {
					continue
				}
				opts.Intermediates.AddCert(cert)
			}
			c.verifiedChains, err = certs[0].Verify(opts)
{code}
 

*Proposal*: To add a config option in the orderer config (it will be hidden but documented) that essentially ""brings back time"" *T* hours to the past.
 With this config option, if a network has a failed Raft cluster with expired certs, the administrators can then agree to manually override the time of the *TLS* handshakes (just for the consensus listeners) and this would buy them a configurable amount of time to recover the cluster by doing config updates and rotate *TLS* certificates.

 So, the config option to bring back the cluster 1 day would be something like ""General.Cluster.TLSHandshakeTimeShift"", e.g. in orderer config override:

ORDERER_GENERAL_CLUSTER_TLSHANDSHAKETIMESHIFT=""24H""

 

[~jyellick] [~sykesm] [~mastersingh24] [~C0rWin] [~denyeart] [~guoger] what do you think?",,gatakka,guoger,jyellick,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18384,,,,FAB-16953,FAB-18163,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ra4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),gatakka,guoger,jyellick,yacovm,ymlbright,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jun/19 10:33 AM;guoger;Would changing host time temporarily help?;;;","13/Jun/19 10:44 PM;yacovm;It may help but it may also harm because other subsystems might be installed on the servers, and sometimes the environment doesn't give control over the system clock of the server.;;;","13/Jun/19 10:51 PM;guoger;[~yacovm] i think one could still intercept system calls for only orderer process to fake time...;;;","13/Jun/19 10:58 PM;yacovm;Well, but system calls are linux specific aren't they? I am trying to provide a Fabric solution that is portable and independent of the platform or the runtime.;;;","13/Jun/19 11:10 PM;guoger;[~yacovm] i feel this is a rare situation, and as long as we have a way out, i'd avoid adding it to Fabric. Practically people would likely run orderer on unix-like system, and if it's not, they could copy the data out, start orderer in a container or another linux box, rotate the cert, and resume the service. (in theory they could also assemble an artificial config block and append to file ledger i guess?);;;","13/Jun/19 11:49 PM;yacovm;[~ptippett] [~mrshah-at-ibm] what do you guys think?;;;","13/Jun/19 11:51 PM;jyellick;This seems like a nice recovery option to have to me.  Changing the host time, or intercepting system calls may not be an option in many environments, especially in cloud deployments.  If this can be done in a non-invasive way and without a lot of effort, it could be a very useful field utility.;;;","02/Aug/19 4:58 PM;gatakka;I really needed this option before couple of days. We ""lock"" our production installation because admin certificates expired, and we understood for the problem after this happened. We were unable to update the chaincode or to do config updates. 

We were able to recover, but it take us a lot of downtime, a bit of luck, and most importantly, we have total control over the servers. Otherwise, it may be impossible. 

Because Fabric usage is growing, I expect more users to hit the same ""edge case"". The proposed option is a clear recovery mechanism with minimal downtime, and even can be automated. 

Many people, even big companies, have troubles managing so many certificates.

Please, implement it. It will not introduce any complexity in the processes, it will not open possible vectors for attack, but can save some one a lot of time, reputation and money.;;;","03/Aug/19 6:15 AM;yacovm;https://gerrit.hyperledger.org/r/#/c/fabric/+/32693/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE runPTE to use connection profile,FAB-15701,40545,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,13/Jun/19 5:22 AM,18/Jun/19 3:34 AM,28/Oct/23 3:08 AM,18/Jun/19 3:34 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"PTE supports connection profile (FAB-7138), then need to change runPTE to read connection profile without conversion.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-7138,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00rac:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"14/Jun/19 5:33 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31910;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Specify different set of consenters for a channel,FAB-15702,40555,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,shubham.kumar.genesis,shubham.kumar.genesis,13/Jun/19 7:24 PM,19/Apr/20 2:21 PM,28/Oct/23 3:08 AM,19/Apr/20 2:21 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"At the time of generating the genesis.block let's say I have 5 consenters present. Now default channel is created on this set of consenters.
Let's say I want to create a new channel, with only 4 or 3 consenters out of 5 then how can I achieve that?



Since it says in the documentation (https://hyperledger-fabric.readthedocs.io/en/release-1.4/build_network.html) we have to use TwoOrgsChannel for creating the channel.tx and that profile doesn't have any option to specify the consenters.",,denyeart,shubham.kumar.genesis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rbg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,shubham.kumar.genesis,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 2:21 PM;denyeart;I believe this is documented now. Please re-open if something is still missing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Support solo to raft,FAB-15703,40556,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,13/Jun/19 7:48 PM,05/Nov/19 11:00 PM,28/Oct/23 3:08 AM,25/Jun/19 12:06 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,,,,,,"Support solo to etcdraft consensus-type migration.

Allow all combinations of
X->Y, where X,Y in {solo,kafka,etcdraft}, X!=Y
as permitted transitions in maintenance-filter.

Add a solo to etcdraft test-case to the integration test suite.

Note that currently only kafka->etcdraft & solo->etcdraft
are tested in the integration test suite.
",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rbo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
extend kvledger test package with BTL support for pvtData,FAB-15704,40560,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,Senthil1,Senthil1,13/Jun/19 9:42 PM,18/Jun/19 1:04 AM,28/Oct/23 3:08 AM,18/Jun/19 1:04 AM,,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,0,,,,,,,,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rck:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jun/19 11:44 AM;manish-sethi;[~Senthil1] - This already exists  - https://github.com/hyperledger/fabric/blob/release-1.4/core/ledger/kvledger/tests/pvtdata_test.go

Particularly, this is how one can mix BTL scenario test in some other tests if need be - https://github.com/hyperledger/fabric/blob/7729388046c4776f58366f023bd4126aea517566/core/ledger/kvledger/tests/pvtdata_test.go#L109.

If you meant something else when you open this Jira - please add some detail.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Return Reference Map for QueryInstalledChaincode,FAB-15705,40562,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,ales,ales,ales,13/Jun/19 11:33 PM,13/Aug/19 2:12 AM,28/Oct/23 3:08 AM,13/Aug/19 2:12 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,QueryInstalledChaincode returns label and package ID for the package with the supplied package id. QueryInstalledChaincodes returns package id and label for all locally installed chaincodes. QueryInstalledChaincode is therefore redundant and can be removed,,ales,crashmark93,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rd0:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,crashmark93,denyeart,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"31/Jul/19 11:15 PM;denyeart;Instead of remove, we will keep the query and add the channel references.;;;","01/Aug/19 1:30 AM;ales;[~denyeart]: done in https://gerrit.hyperledger.org/r/#/c/fabric/+/32612/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryChaincodeDefinition should also return a map of org approvals,FAB-15706,40563,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,13/Jun/19 11:45 PM,23/Jul/19 9:32 AM,28/Oct/23 3:08 AM,23/Jul/19 9:32 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,ales,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rd8:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jun/19 5:34 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric/+/31926] 

Follow-up CR will include CLI implementation as well as integration test coverage.;;;","19/Jun/19 5:05 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric/+/31965] - integration test usage of approved orgs in QueryChaincodeDefinitionResult;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
QueryInstalledChaincodes should return a list of channel name/chaincode name pairs to signal where the package is used,FAB-15707,40564,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,ales,ales,13/Jun/19 11:50 PM,25/Jul/19 1:23 AM,28/Oct/23 3:08 AM,25/Jul/19 1:23 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,ales,wlahti,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rdg:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,wlahti,ymlbright,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 6:40 AM;wlahti;Laying some groundwork: 

[https://gerrit.hyperledger.org/r/c/fabric/+/32056] - reuse chaincode package if it exists instead of creating a new one

[https://gerrit.hyperledger.org/r/c/fabric/+/32057] - QueryInstalledChaincodes should use the lifecycle cache

And the actual CR: [https://gerrit.hyperledger.org/r/c/fabric/+/32102];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add 'None' genesis method for orderer configuration,FAB-15708,40566,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,jyellick,jyellick,14/Jun/19 12:37 AM,11/Mar/20 4:00 AM,28/Oct/23 3:08 AM,08/Nov/19 12:23 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ipm,,,,,"Today, the orderer may be given one of two genesis methods 'Provisional' or 'File'.  In the 'Provisional' case (useful only for testing) the orderer generates a genesis block based on a configtx.yaml file, while in the 'File' case, the orderer loads a file from the filesystem.

In order to ultimately allow the orderer to start without chains defined, we need to allow a genesis method which does not attempt to do anything.  This genesis method should be called 'None', and should not trigger loading of the genesis file, nor generation of a genesis block.

----

If you supply None as the genesis method for an orderer that has not been bootstrapped, the orderer should panic.
If you supply None as the genesis method for an orderer that has already been bootstrapped and the genesis file is not available, it should start normally.
",,jyellick,kopaygorodsky,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8rv",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,kopaygorodsky,sykesm,yacovm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Nov/19 1:19 AM;sykesm;Note the genesis file has been overloaded to enable late join - a config block from futher in the chain that is used to then begin pulling from another orderer at the start of the chain.;;;","06/Nov/19 6:17 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/34251 Add ""none"" as a valid orderer genesis method;;;","05/Mar/20 7:46 AM;kopaygorodsky;[~sykesm] is None option allowing to receive config block of a system channel from other ordering nodes? Your note says it overloads genesis file, is it what I'm thinking? 
Case:  
#1 org wants to add another one to an existing network.
#2 org shares MSP config to #1 + ordering url with certs (GenesisMethod: None) 
#1 adds #2 to the system channel
#2 orderer will receive chains from #1 using comm.delivery and start working. 
-----
I tried to use none on #2 orderer and running #1 haven't sent anything to #2. 
`Failed to send StepRequest to 2, because: aborted channel=testchainid node=1`

Documentation says you need to provide latest config block to a new ordering node, but how could #2 receive chains if it hasn't joined the network yet? ;;;","11/Mar/20 4:00 AM;kopaygorodsky;Response: 
""it's a placeholder for future work that adds support to bootstrap an orderer without a system channel
In the future you should be able to create a genesis block of an application channel and then give it to an orderer node and it will start servicing this channel
Currently, channel creation is done by sending a transaction to the system channel and then it creates a new application channel
stay tuned for more updates"";;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow orderer startup with no channels defined,FAB-15709,40567,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,jyellick,jyellick,14/Jun/19 12:39 AM,05/Apr/20 5:55 PM,28/Oct/23 3:08 AM,14/Nov/19 11:24 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ipm,,,,,"Today, if the orderer does not have any channels defined, it panics because it cannot find the system channel.  This story is to remove those startup checks to allow the orderer to start successfully, even though it will not be in a position to accomplish anything.  This should also block channel creation requests if no system channel is defined to route them to.",,denyeart,hakan.eryargi,jyellick,kchristidis,sykesm,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17420,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8rvk",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,hakan.eryargi,jyellick,kchristidis,sykesm,yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Nov/19 2:16 PM;kchristidis;What does the ipm label mean?;;;","14/Nov/19 12:01 AM;jyellick;IPM stands for ""Iteration Planning Meeting"", so the label basically adds it to the list of stuff for our squad to talk about in our weekly planning meeting.

You can see the board that contains all the IPM items (in prioritized order) https://jira.hyperledger.org/secure/RapidBoard.jspa?rapidView=219;;;","14/Nov/19 3:58 AM;kchristidis;(y);;;","17/Jan/20 2:59 AM;denyeart;[~jyellick] [~wlahti] [~sykesm] There is a request from [~dbshah] to backport this to v1.4.5. What are your thoughts on backporting this to v1.4.5? 

While the discussion is underway, I'll tag for FixVersion v1.4.5. Please remove the FixVersion if it turns out to not be feasible to backport.;;;","22/Jan/20 1:02 AM;sykesm;> There is a request from Dhyey Shah to backport this to v1.4.5. What are your thoughts on backporting this to v1.4.5?

> While the discussion is underway, I'll tag for FixVersion v1.4.5. Please remove the FixVersion if it turns out to not be feasible to backport.

In general, it does not make sense to target a closed issue for future work. I'm going to clone this as an open issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Design & implement channel participation REST API - Join, Remove, and List channels",FAB-15710,40568,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,jyellick,jyellick,14/Jun/19 12:42 AM,20/Jul/20 8:49 PM,28/Oct/23 3:08 AM,20/Jul/20 8:49 PM,,,,,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,0,,,,,,"With FAB-15708 and FAB-15709 implemented, an orderer can start without any genesis method, or any channels defined, but does nothing.  

We need an API to be able to:

* Join this OSN to a new or an existing channel,
* Remove this OSN from an existing channel,
* List the channels this OSN is a member of.

This story is dedicated to the detailed design and implementation of the REST API of this feature, with the underlying behavior described in epic FAB-17712 and associated RFC. The REST API implementation will accept the queries defined and will transfer them to an abstract interface of the underlying implementation.

The first product of this task is a design document.

The REST API design is [HERE|https://docs.google.com/document/d/1kYoicS_Z59gNvmuuB7VFZ6WsOL31C34dWMeOFQiIygA/edit?usp=sharing].",,denyeart,hakan.eryargi,jyellick,sykesm,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/May/20 2:47 PM;tock;Fabric-Channel-Participation-REST-API_05052020.pdf;https://jira.hyperledger.org/secure/attachment/18318/Fabric-Channel-Participation-REST-API_05052020.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzu",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,hakan.eryargi,jyellick,sykesm,tock,yacovm,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Apr/20 11:40 PM;tock;[~sykesm] [~jyellick] Could you please review the design document?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow the orderer to Join channels,FAB-15711,40570,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,jyellick,jyellick,14/Jun/19 12:51 AM,17/Sep/20 4:44 PM,28/Oct/23 3:08 AM,17/Sep/20 4:44 PM,,,,,,,,,,,,,,v2.x,,,,fabric-orderer,,,,,,0,ipm,,,,,"This story is dedicated to the functionality of joining channels using the channel participation API.

If the orderer does not have a system channel defined, it should be able to join application channels.  
If the orderer does have a system channel defined, it should not be able to join any other channels.  
If the orderer does not have any channels defined, it should be able to join any channel, including the system channel.

The orderer should be able to join as a cluster member (included in the consenters set) or as a follower (not included in the consenters set).
The orderer should allow a transition from a cluster follower to a cluster member and vise-versa.",,C0rWin,jyellick,kchristidis,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfprc",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),C0rWin,jyellick,kchristidis,tock,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow the orderer to Leave a channel,FAB-15712,40571,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,jyellick,jyellick,14/Jun/19 12:52 AM,09/Nov/20 9:40 PM,28/Oct/23 3:08 AM,09/Nov/20 9:40 PM,,,,,,,,,,,,,,v2.3.0,,,,fabric-orderer,,,,,,0,,,,,,"Just as FAB-15710 allows orderer to join channels, they should be able to leave them. Leaving a channel should cause broadcast/deliver requests to fail, and any current deliver sessions to exit. It should also stop the consenter, and delete the ledger resources.

This API should reject all requests if a system channel is defined, unless the deletion is for the system channel.

-This API has a boolean parameter ""removeStorage"":-
 -If it is true, the ledger storage is deleted.-
 -If it is false, the ledger storage is moved to an archival location, to be permanently deleted by the system admin.-

The removeStorage flag is to be removed. We always delete the ledger storage.",,bryangross,jyellick,kchristidis,mplisov,tock,yacovm,ymlbright,,,,,,,,,,,,,,,,,FAB-17992,FAB-18125,FAB-17965,FAB-18082,FAB-18132,,,,,,,,,,,,,,,,,,,,FAB-16035,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzohfqi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bryangross,jyellick,kchristidis,mplisov,tock,yacovm,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add system tests for channel participation API,FAB-15713,40572,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,jyellick,jyellick,14/Jun/19 1:00 AM,17/Nov/20 11:17 PM,28/Oct/23 3:08 AM,17/Nov/20 11:17 PM,,,,,,,,,,,,,,v2.3.0,,,,fabric-orderer,,,,,,0,,,,,,"Once FAB-15709, FAB-15710, FAB-15711, FAB-15712 are defined, it should be possible to bootstrap a conventional orderer with system channel, create channels, and then leave the system channel, and join additional channels.  This test will exercise the features implemented in the above stories.",,hakan.eryargi,jyellick,kchristidis,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-17712,,,No,,Unset,No,,,"1|i00n2e:8znqzzzzzvr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hakan.eryargi,jyellick,kchristidis,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Nov/20 11:17 PM;wlahti;This has been handled by [~btl5037] and [~suryalnvs]. Closing this item. I believe Brett plans to add details in the near future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Import path for fileledger and blockledger should live in fileledger and blockledger paths,FAB-15714,40577,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,14/Jun/19 4:58 AM,02/Dec/19 11:22 PM,28/Oct/23 3:08 AM,02/Dec/19 11:22 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:aw",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"14/Jun/19 5:21 AM;sykesm;remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31908 [FAB-15714] move fileledger package [WIP]
remote:   https://gerrit.hyperledger.org/r/c/fabric/+/31909 [FAB-15714] move ramledger package [WIP];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix and clean up documents for instructions to use dev-mode,FAB-15715,40578,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,14/Jun/19 5:36 AM,01/Oct/19 4:06 AM,28/Oct/23 3:08 AM,01/Oct/19 4:06 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"h2. Fix and clean up documents for instructions to use dev-mode

h3. Fix instructions

We need to fix the instruction for the dev-mode described in {{fabric/docs/source/chaincode4ade.rst}}.


Currently, The instructions say to execute the following command to start the chaincode.

{code:bash}
CORE_PEER_ADDRESS=peer:7052 CORE_CHAINCODE_ID_NAME=mycc:0 ./sacc
{code}

However, this command fails with the following error messages.

{code}
Error starting SimpleAsset chaincode: flag 'peer.address' must be set
{code}

To fix this problem, the command should be set the flag {{peer.address}}.
However, this command fails with the following error messages.

{code}
Error starting SimpleAsset chaincode: error trying to connect to local peer: 'CORE_PEER_TLS_ENABLED' must be set to 'true' or 'false'
{code}


To fix this problem, the command should be set {{CORE_PEER_TLS_ENABLED=false}} as follows.

{code:bash}
CORE_PEER_ADDRESS=peer:7052 CORE_CHAINCODE_ID_NAME=mycc:0 CORE_PEER_TLS_ENABLED=false ./sacc -peer.address peer:7052
{code}

The above command works normally.


We also need to modify the instruction to build and start chaincode to use {{/bin/sh}} instead of {{/bin/bash}}.
This is because {{bash}} is not installed on {{ccenv}} container because {{libtool}} that depends on bash is removed from {{ccenv}} by FAB-15670 updates.


h3. Clean up instructions

We can find another document for instructions to use dev-mode in {{fabric/docs/source/peer-chaincode-devmode.rst}}.  

However, it seems that this page should be removed as the following reasons.

- It seems a dead page as it has no links from the other documents.
- The contents duplicate {{fabric/docs/source/chaincode4ade.rst}}
- It is not enough maintained (e.g., need to fix as the same above).
",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15716,FAB-15723,FAB-15670,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rfo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix document for instructions to use dev-mode,FAB-15716,40579,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,14/Jun/19 5:43 AM,05/Jul/19 6:40 PM,28/Oct/23 3:08 AM,05/Jul/19 6:40 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,"We need to fix the instructions for dev-mode described in {{fabric-samples/chaincode-docker-devmode/README.rst}}.

 

Currently, The instructions say to execute the following command to start the chaincode.
{code:bash}
CORE_PEER_ADDRESS=peer:7052 CORE_CHAINCODE_ID_NAME=mycc:0 ./abstore
{code}
 

However, this command fails with the following error messages.
{code}
Error starting Abstore chaincode: flag 'peer.address' must be set
{code}
 

To fix this problem, the command should be set the flag {{peer.address}}.
 However, this command fails with the following error messages.
{code}
Error starting Abstore chaincode: error trying to connect to local peer: 'CORE_PEER_TLS_ENABLED' must be set to 'true' or 'false'
{code}
 

To fix this problem, the command should be set {{CORE_PEER_TLS_ENABLED=false}} as follows.

{code:bash}
CORE_PEER_ADDRESS=peer:7052 CORE_CHAINCODE_ID_NAME=mycc:0 CORE_PEER_TLS_ENABLED=false ./abstore -peer.address peer:7052
{code}


The above command works normally.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15715,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rfw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Commercial Paper contract- SyntaxError: Unexpected end of JSON input,FAB-15717,40580,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Cefold,Cefold,Cefold,14/Jun/19 6:16 AM,09/Aug/19 11:57 PM,28/Oct/23 3:08 AM,09/Aug/19 11:57 PM,v1.4.0,v1.4.1,v1.4.2,,,,,,,,,,,,,,,fabric-samples,,,,,,0,,,,,,"When get key that does not exist, the {{getState}} will not handle it.

I got 
{code:java}
SyntaxError: Unexpected end of JSON input{code}
 

The use of `{{if (data)}}` is not enough, since data is a Buffer. Instead, we could use

  
{code:java}
if (data && data.toString('utf8'))
{code}
 
  ",,Cefold,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-13823,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rg4:",,,,Unset,Unset,,"When get key that does not exist, the getState will not handle it.",,Unset,,,,,,Unset,,Unset,,(Please add usage information),Cefold,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typing error in document,FAB-15718,40581,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,urvashikishnani,urvashikishnani,urvashikishnani,14/Jun/19 7:43 AM,14/Jun/19 7:22 PM,28/Oct/23 3:08 AM,14/Jun/19 7:22 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"Change *out* to *our* in [Analysis|https://hyperledger-fabric.readthedocs.io/en/latest/developapps/analysis.html] topic (under Developing Applications)

Change 

{quote}See how the paper owners changes, and how in out example, the price changes. Can you think of a reason why the price of MagnetoCorp commercial paper might be falling?{quote}

To

{quote}See how the paper owners changes, and how in our example, the price changes. Can you think of a reason why the price of MagnetoCorp commercial paper might be falling?{quote}",,urvashikishnani,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rgc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),urvashikishnani,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bring chaincode container into Kubernetes Cluster,FAB-15719,40582,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Highest,,,arman19940326,arman19940326,14/Jun/19 9:14 AM,13/Dec/20 10:01 PM,28/Oct/23 3:08 AM,,v1.4.0,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I deployed Balance transfer example on Kubernetes but there is one problem. When I instantiate the chaincode a new docker image is created (chaincode container with a name like [dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9] ) but since it's not created by Kubernetes, it's not part of the Kubernetes cluster and it can't enjoy features like high availability and scaling. What can I do to bring this container into Kubernetes cluster? I thought maybe changing the CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE environment variable to the network that Kubernetes pods reside in would help but apparently the docker network must be of type bridge and the docker network that Kubernetes pods reside in is of type null!  What can I do?",,arman19940326,idiota101,kopaygorodsky,mastersingh24,mirioeggmann,Udossohn,xuqiang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rgk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),arman19940326,idiota101,kopaygorodsky,mastersingh24,mirioeggmann,Udossohn,xuqiang,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"05/Mar/20 8:12 AM;kopaygorodsky;use dind (docker in docker). pod has 2 containers: peer + dind. you can share docker endpoint from dind to peer using emptydir volume. ;;;","17/Nov/20 5:22 PM;arman19940326;Thanks [~kopaygorodsky]! I was able to do what you suggested. There is just one minor issue though. The dind container for each pod needs to download fabric-ccenv image. This image is kind of big and this causes the instantiation process to take a bit longer than usual. I hope I'll find a solution to solve this minor issue.

Anyway, thanks again for your help.;;;","13/Dec/20 9:33 PM;mastersingh24;If you move to Fabric 2.x or later, you can create a custom [launcher|https://hyperledger-fabric.readthedocs.io/en/release-2.2/cc_launcher.html]  to launch chaincode as a Kube pod rather than requiring access to a Docker daemon.;;;","13/Dec/20 10:01 PM;arman19940326;Thanks. I know about external launchers.  I've been meaning to give it a try but haven't had time to do so. I'm in the process of moving my fabric environment from v1.4 to v2.2. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Create certs parser script, attach it to orderer, ca, peer pods to create msp directory",FAB-15721,40591,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,15/Jun/19 4:09 AM,03/Jul/19 3:59 AM,28/Oct/23 3:08 AM,03/Jul/19 3:59 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Create certs parser script, attach it to orderer, ca, peer pods to create msp directory from secrets for each.",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00ri4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add kafka and zookeepers launching to NL when kafka is selected as consensus type,FAB-15722,40592,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,15/Jun/19 4:15 AM,03/Jul/19 3:59 AM,28/Oct/23 3:08 AM,03/Jul/19 3:59 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Create certs parser script, attach it to orderer, ca, peer pods to create msp directory",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ric:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix script and instruction with the ccenv container,FAB-15723,40594,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tatsu-sato,tatsu-sato,tatsu-sato,15/Jun/19 6:12 AM,13/Jul/19 6:21 AM,28/Oct/23 3:08 AM,10/Jul/19 7:05 PM,v1.4.2,v2.0.0,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-samples,,,,,,0,,,,,,"We need to fix the script and instruction with the {{ccenv}} container in {{fabric-samples/chaincode-docker-devmode}}.

Currently, the command to start the network fails with the following error messages.
{code:java}
$ docker-compose -f docker-compose-simple.yaml up
... 
Creating chaincode ... error
... 
ERROR: for chaincode  Cannot start service chaincode: OCI runtime create failed: container_linux.go:345: starting container process caused ""exec: \""/bin/bash\"": stat /bin/bash: no such file or directory"": unknown
... 
ERROR: Encountered errors while bringing up the project.
{code}
It seems that {{bash}} is not installed on {{ccenv}} container because {{libtool}} that depends on bash is removed from {{ccenv}} by FAB-15670 updates.


 So, we need to modify the command for {{ccenv}} in {{docker-compose-simple.yaml}} to use {{/bin/sh}} instead of {{/bin/bash}}.

 

Also, we need to modify the instruction to build and start chaincode for the same reason.",,tatsu-sato,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15670,FAB-15715,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,"fabric-samples, 7c5f5d39c9ff138123aa94c1ad4d10a4a63fd454, fabric, ef6e144e0aa94e41cf9146c73143e5befeeac384",Unset,No,,,"1|i00ris:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tatsu-sato,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improve migration integration test,FAB-15724,40595,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tsharris,tock,tock,16/Jun/19 3:25 PM,04/Dec/19 10:20 PM,28/Oct/23 3:08 AM,04/Dec/19 10:20 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,hygiene,ipm,,,,"see comments:

https://gerrit.hyperledger.org/r/c/fabric/+/31856

- remove chaincode/peer from exiting kafka->raft & solo->raft IT,  use in-proc client instead of chaincode/peer.

- expand the network from single node to 2-node kafka->raftafter solo->etcdraft transition",,tock,tsharris,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zfzzzr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,tsharris,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Dec/19 5:45 AM;tsharris;[https://github.com/hyperledger/fabric/pull/344];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft start sequence revised,FAB-15725,40598,39050,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,tock,tock,tock,16/Jun/19 8:37 PM,26/Jun/19 7:53 PM,28/Oct/23 3:08 AM,25/Jun/19 12:07 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Revised the raft start sequence after consensus-type migration, such that:
 * Remove the redundant checks and tests. Simply check to see if the consensus metadata field is nil in the block (as the block writer nils this field on migration), indicating that the chain must have been migrated.
 * Eliminate the DetectConsensusMigration method that was added to the consenter API.",,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rjo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
In hyperledger project ./wallet: No such file or directory,FAB-15726,40600,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Invalid: Not Supported,,Amy17ee88,Amy17ee88,17/Jun/19 7:01 AM,19/Jun/19 12:19 AM,28/Oct/23 3:08 AM,17/Jun/19 11:37 PM,,,,,,,,,,,,,,,,,,fabric-ca,fabric-ledger,fabric-orderer,fabric-peer,fabric-token,,0,chaincode,coin,wallet,,,"I am a beginner with hyperledger fabric  and I started using an open source code to work with [UTXO] . Here is the source code of [UTXO] [https://github.com/pcluchet/UTXO]

I'm able to add the Peer to the network and I could successfully create a Money supply using this command

  {quote}docker exec -t alice peer chaincode invoke -o orderer.example.com:7050  --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem  -C ptwist -n ptwist -c '{""Args"":[""mint"", ""sign"", ""[{\""amount\"":42.42,\""owner\"":\""Alice\"",\""label\"":\""USD\""}]""]}'{quote}

but when I tried to check the balance using the command below
{quote}docker exec -t alice balance{quote}
This error appears to me :(

{quote}/opt/gopath/src/github.com/hyperledger/fabric/peer/bin/balance: line 20: ./wallet: No such file or directory{quote}


",,Amy17ee88,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rk4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Amy17ee88,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jun/19 11:37 PM;jyellick;This is a question about the project https://github.com/pcluchet/UTXO please use the issues tracker for that project.;;;","18/Jun/19 5:36 AM;Amy17ee88;I've already posted the issue there but there no answer ! :(;;;","19/Jun/19 12:19 AM;jyellick;Unfortunately there is no way for us to support 3rd party consumers of Fabric like this directly.  If you are trying to begin learning Fabric, I would suggest that you begin with the documentation and samples found https://hyperledger-fabric.readthedocs.io/en/release-1.4/getting_started.html .;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Allow more symbols in the package label,FAB-15727,40603,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,baohua,baohua,baohua,17/Jun/19 3:19 PM,22/Jun/19 1:58 AM,28/Oct/23 3:08 AM,22/Jun/19 1:58 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"In FAB-14597, it restricts the package label to ""-_"", alphabet and numbers.

 

While we should also allow dot or plus symbols in some case, e.g., including version number or other information.",,ales,baohua,jyellick,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|i00dt1:i",,,,Unset,Unset,v2.0 (should do),(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,baohua,jyellick,mastersingh24,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jun/19 11:18 PM;jyellick;[~ales] It seems likely that users will want to use {{<name>:<version>}} as the label in many cases, so allowing dots seems quite natural, what was the rationale for excluding them?;;;","19/Jun/19 12:45 PM;baohua;Thanks for the comments, i will provide a fix if we think should include those symbols including dot ( . ) and colon ( : ).;;;","20/Jun/19 11:05 PM;mastersingh24;This seems reasonable to me but we should make sure that there's no unknown side effects here;;;","20/Jun/19 11:50 PM;ales;Thanks [~baohua], I picked a relatively restrictive regex in the spirit of ""restrictive at first, possibly relax later"". We could use a regex similar to the one we use for the cc version field

{code:go}
chaincodeVersionRegExp = regexp.MustCompile(""^[A-Za-z0-9_.+-]+$"")
{code}

I'll double check that there are no unwanted side-effects with the container naming.;;;","21/Jun/19 11:47 AM;baohua;Based on the discussions with maintainers including Jason, Gari and Alessandro, make the patchset at [https://gerrit.hyperledger.org/r/#/c/fabric/+/32015].;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix comment error,FAB-15728,40604,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,tyanj,tyanj,17/Jun/19 4:21 PM,20/Jun/19 11:05 PM,28/Oct/23 3:08 AM,20/Jun/19 11:05 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"// Set the key generators
 swbccsp.AddWrapper(reflect.TypeOf(&ecdsaPrivateKey{}), &ecdsaPrivateKeyKeyDeriver{})
 swbccsp.AddWrapper(reflect.TypeOf(&ecdsaPublicKey{}), &ecdsaPublicKeyKeyDeriver{})
 swbccsp.AddWrapper(reflect.TypeOf(&aesPrivateKey{}), &aesPrivateKeyKeyDeriver\{conf: conf})",,denyeart,tyanj,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rl0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,tyanj,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 2:44 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/31935/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Increase the timeout of waiting for leader transfer to be greater than ElectionTimeout,FAB-15729,40606,38299,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,guoger,guoger,guoger,17/Jun/19 6:16 PM,20/Jun/19 8:24 PM,28/Oct/23 3:08 AM,20/Jun/19 8:24 PM,v1.4.1,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,"current node [abdicateLeader func|https://github.com/hyperledger/fabric/blob/7729388046c4776f58366f023bd4126aea517566/orderer/consensus/etcdraft/node.go#L194] attempts to transfer leadership to a qualified follower. It waits {{ElectionTimeout}} for this to complete.

once leadership transfer is initiated, etcdraft sets {{leadTranferee}} to mark the progress, and *drops subsequent config change*. It waits {{ElectionTimeout}} for transition to complete, otherwise it resets {{leadTransferee}}.

As part of parent story, after {{abdicateLeader}}, we intend to call {{ProposeConfChange}}, and there's a chance for proposed conf change to be dropped due to the reason above.

The change is straightforward, we should increase the timeout in abdicateLeader to be several ticks greater than {{ElectionTimeout}}, to eliminate the race.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rl8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use fake clock in abdicateLeader,FAB-15730,40607,38299,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,17/Jun/19 6:17 PM,09/Jul/19 11:05 PM,28/Oct/23 3:08 AM,09/Jul/19 11:05 PM,v1.4.1,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,"we need to create a custom context to wrap fake clock, so that tests can deterministically manipulate time.",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rlg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 8:24 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31974;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"attempt leader transfer before halt, if leader is being removed",FAB-15731,40608,38299,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,guoger,guoger,17/Jun/19 6:19 PM,09/Jul/19 11:05 PM,28/Oct/23 3:08 AM,09/Jul/19 11:05 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rlo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jun/19 8:25 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31981;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a chaincode developer, I want {{chaincode package}} to honor *all* of my dependencies",FAB-15732,40625,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,dereckluo,dereckluo,18/Jun/19 12:23 AM,23/May/20 12:47 AM,28/Oct/23 3:08 AM,09/Sep/19 11:12 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,ipm,ipm-planned,,,,"The {{chaincode package}} command includes some logic to filter packages that the ccenv includes. This means that older or newer versions of these packages (used during development) will not be included in the package that's installed to the peer.

As a developer, when the ""auto-vendoring"" process is performed, I would like my code to be included at all times.",,dereckluo,MHBauer,,,,,,,,,,,,,,,,,,,,,,FAB-15782,FAB-16310,,,,FAB-5177,,,,,,,,,,,,,,,,,,,FAB-17924,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00n2c:r3u",,,,Yes,Unset,,(Please add steps to reproduce),2.0,Yes,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,MHBauer,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add verifyHistoryDB function in kvledger e2e test package,FAB-15733,40627,,Test Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,18/Jun/19 1:07 AM,02/Dec/19 9:13 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,0,,,,,,"Currently, we have the following four functions in the verifyLedgerContent() function
 * verifyState(h)
 * verifyConfigHistory(h)
 * verifyBlockAndPvtdata(h)
 * verifyGetTransactionByID(h)

As we also need to check whether the historyDB is built or rebuilt correctly, we need to add verifyHistoryDB().",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00roc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename flogging.GetLoggerLevel to LoggerLevel,FAB-15734,40628,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mrosen52,sykesm,sykesm,18/Jun/19 1:16 AM,19/Jun/19 5:54 AM,28/Oct/23 3:08 AM,19/Jun/19 5:54 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-common,,,,,,0,ipm,,,,,,,mrosen52,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mtg:s",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mrosen52,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"18/Jun/19 6:13 AM;mrosen52;https://gerrit.hyperledger.org/r/c/fabric/+/31949;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Improving EventHub scalability,FAB-15735,40629,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,yoheiueda,yoheiueda,yoheiueda,18/Jun/19 1:24 AM,18/Jun/19 6:09 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ledger,fabric-peer,,,,,0,performance,,,,,"When we use many EventHub connection to a peer, TPS performance is degraded due to excessive object allocations. Our experiments show that TPS decreases by *13%* when we use 8 EventHub connections, and decreases by *55%* when we use 64 EventHub connections.

This is a serious problem, when Node SDK is used to archive thousands of TPS. A Node.js process is single-threaded, so we need to use a lot of Node.js processes to achieve high TPS. If each of such Node SDK processes establishes a EventHub connection, total TPS performance is degraded significantly.

 

We identified the following two causes of this scalability issue.
 * FAB-15736 Redundant deserialization of blocks
 * FAB-15737 Redundant generation of FilteredBlock objects

We implemented patches that alleviate these problems, and measured the performance improvement. With these patches, we obtained 2.2x TPS improvement when 64 EventHub connections are established, and TPS decrease becomes less than 2%.

Please see attached PDF file for details.",,Senthil1,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/19 1:25 AM;yoheiueda;EventHub scalability.pdf;https://jira.hyperledger.org/secure/attachment/17324/EventHub+scalability.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ros:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/19 1:09 PM;Senthil1;[~manish-sethi] [~denyeart] [~wlahti] [~ChristopherFerris]

We have also faced a similar problem. When the number event hub connections was higher, the throughput dropped more than 70%. [~tparth] can add more details if needed.

 ;;;","18/Jun/19 6:09 PM;yoheiueda;As [~Senthil1] pointed out, the caching approach leads to memory bloat when there exist a lot of channels.

[https://gerrit.hyperledger.org/r/c/fabric/+/31944#message-ff6b4fe3_10f0d90f]

 

Instead, we need to broadcast a deserialized block to waiters when it becomes ready.

Waiters wait at this cond variable, so I think we can implement such broadcast.

[https://github.com/hyperledger/fabric/blob/7135b516461415c471a19851c371e94300a6269d/common/ledger/blkstorage/fsblkstorage/blocks_itr.go#L47]

 

I think the performance improvement will be similar for caching and broadcast approaches, when a single channel is used.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Avoid duplication of deserialized blocks for better EventHub scalability,FAB-15736,40630,40629,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,yoheiueda,yoheiueda,yoheiueda,18/Jun/19 1:28 AM,25/Jun/19 11:41 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ledger,fabric-peer,,,,,0,,,,,,"We can improve EventHub scalability by broadcasting a deserialized block directly to waiters.

Please see the attached file in FAB-15735 for details",,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rp0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/19 1:34 AM;yoheiueda;My CR is: https://gerrit.hyperledger.org/r/c/fabric/+/31944;;;","18/Jun/19 6:11 PM;yoheiueda;[https://gerrit.hyperledger.org/r/c/fabric/+/31944#message-ff6b4fe3_10f0d90f]

According to this comment, we need to use broadcasting, instead of caching.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Avoid dupulication of Filtered blocks for better EventHub scalability,FAB-15737,40631,40629,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,yoheiueda,yoheiueda,yoheiueda,18/Jun/19 1:29 AM,25/Jun/19 11:46 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-ledger,fabric-peer,,,,,0,,,,,,"We can improve EventHub scalability by caching filtered blocks.

Please see the attached file in FAB-15735 for details",,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rp8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/19 1:42 AM;yoheiueda;My CR is: https://gerrit.hyperledger.org/r/c/fabric/+/31945;;;","18/Jun/19 6:12 PM;yoheiueda;[https://gerrit.hyperledger.org/r/c/fabric/+/31944#message-ff6b4fe3_10f0d90f]

According to this comment, we need to use broadcasting, instead of caching.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE supports pem or path for orderer admin,FAB-15738,40641,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,18/Jun/19 3:41 AM,19/Jun/19 5:46 AM,28/Oct/23 3:08 AM,19/Jun/19 5:46 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"To be consistent with support of org admin, PTE shall support both path or epm for orderer admin.",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00rqk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"18/Jun/19 5:24 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31947;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE gen_cfgInputs support any chaincode installation/instantiation,FAB-15739,40646,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,dongming,dongming,dongming,18/Jun/19 5:36 AM,22/Jan/20 6:16 AM,28/Oct/23 3:08 AM,22/Jan/20 6:16 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"PTE to support any chaincode installation/instantiation if providing
chaincode path
metadata path
language",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15392,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00whf:x",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 6:16 AM;scottz;gen_cfgInputs.sh and other scripts, as well as all the test input files in PTE/, are being sunset soon, replaced by operator. No more enhancements.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
modify error message,FAB-15740,40651,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,smlinux7,smlinux7,smlinux7,18/Jun/19 10:53 AM,25/Jun/19 5:46 AM,28/Oct/23 3:08 AM,25/Jun/19 5:46 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,modify error message in systemchannel,,denyeart,jyellick,smlinux7,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rss:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,smlinux7,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/19 11:52 PM;jyellick;Is there some more detail here?;;;","25/Jun/19 5:46 AM;denyeart;simple typo fix: https://gerrit.hyperledger.org/r/#/c/fabric/+/31950/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Migration from kafka to raft, when network has 1 application channel and 1000 blocks",FAB-15741,40652,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,bharadwajambati1,suryalnvs,suryalnvs,18/Jun/19 12:11 PM,31/Jul/19 5:00 AM,28/Oct/23 3:08 AM,31/Jul/19 5:00 AM,v1.4.2,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"*Test setup:* 

Create a network with 3 orderers, 5 kafka brokers, 3 zookeepers and 1 org with 1 peer

Create 1 channel, join peer to channel, install and instantiate samplecc and send transactions to generate 1000 blocks

Once 1000 blocks are created, then migrate kafka to raft by following on orderer system channel and application channel:
 * Config update to change state from NORMAL to MAINTENANCE with kafka consensus type and leaving metadata to null
 * Config update with etcdraft as consensus type and raft metadata
 * Restart Ordering nodes and verify orderer logs for leader election
 * Config update to change state back to NORMAL from MAINTENANCE

*Once completed, verify the following:*
 * Send new transactions to verify invokes and send queries on channel 1
 * Upgrade the chaincode and send transactions on channel 1
 * Create new channel, join peer to channel, install and instantiate new chaincode
 * Remove an existing orderer from application channel and add a new orderer

 ",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15760,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i00rt0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,"1. Followed the steps mentioned in the test description
2. After migrating from kafka to raft, upgraded the chaincode and started sending the transactions.
3. Created a new channel, add peers to the channel and then installed and instantiated the chaincode for the peers on the new application channel(testorgschannel1)
4. Added a new orderer to the application channel(testorgschannel0).
5. It didn't pulled the blocks from the existing system. Once it is restarted, the orderer started pulling the blocks.

LogDNA url: https://app.us-south.logging.cloud.ibm.com/a52748c56a/logs/view",System Test,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate from kafka to raft while traffic is running on 1st application channel and having 1000 blocks on 2nd application channel,FAB-15742,40653,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,suryalnvs,suryalnvs,suryalnvs,18/Jun/19 12:20 PM,31/Jul/19 4:19 AM,28/Oct/23 3:08 AM,31/Jul/19 4:19 AM,v1.4.2,,,,,,,,,,,,,v1.4.3,,,,fabric-quality,,,,,,0,,,,,,"*Test setup:*

Create a network with 3 orderers, 5 kafka brokers, 3 zookeepers and 1 org with 1 peer

Create 2 channels, join peer to both channels, install and instantiate samplecc and send transactions continuously on first channel and traffic to create 1000 blocks on second channel

While traffic is running on 1st channel and after 1000 blocks accumulated on 2nd channel, then migrate kafka to raft by following on orderer system channel and application channels:
 * Config update to change state from NORMAL to MAINTENANCE with kafka consensus type and leaving metadata to null
 * Config update with etcdraft as consensus type and raft metadata
 * Restart Ordering nodes and verify orderer logs for leader election
 * Config update to change state back to NORMAL from MAINTENANCE

*Once completed, verify the following:*
 * Send new transactions to verify invokes and send queries on channel 1
 * Upgrade the chaincode and send transactions on channel 1
 * Create new channel, join peer to channel, install and instantiate new chaincode",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15760,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i00rt8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate from kafka to raft after a long run with traffic for 24 hours with kafka ,FAB-15744,40655,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,bharadwajambati1,suryalnvs,suryalnvs,18/Jun/19 9:58 PM,19/Jul/19 3:04 AM,28/Oct/23 3:08 AM,19/Jul/19 3:04 AM,v1.4.2,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Create a network with 3 orderers, 5 kafka brokers, 3 zookeepers and 1 org with 1 peer

Create 1 channel, join peer to channel, install and instantiate samplecc and start sending transactions for a day

Once traffic run is completed after 24 hours, then migrate kafka to raft by following on orderer system channel and application channel:
 * Config update to change state from NORMAL to MAINTENANCE with kafka consensus type and leaving metadata to null
 * Config update with etcdraft as consensus type and raft metadata
 * Restart Ordering nodes and verify orderer logs for leader election
 * Config update to change state back to NORMAL from MAINTENANCE

*Once completed, verify the following:*
 * Send new transactions to verify invokes and send queries on channel 1
 * Create new channel, join peer to channel, install and instantiate new chaincode
 * Remove an existing orderer from application channel and add a new orderer
 * Verify the raft metrics
 * Verify by changing orderer logging spec to see raft related logs",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15760,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i00rto:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test improvements - Replace Behave Tests,FAB-15745,40657,,Epic,Closed,FAB,Fabric,software,denyeart,,,High,Done,scottz,scottz,scottz,18/Jun/19 11:37 PM,26/Feb/20 10:49 PM,28/Oct/23 3:08 AM,28/Jan/20 1:28 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,,,,,,"Deprecate Behave test tool framework after providing equivalent IT coverage with other test tools and test suites.

Behave framework, in fabric-test repository, is used for numerous tests to test the innerworkings of fabric-test (smoke test suite) and the functionality and interworking of other repositories (interop and daily test suites). With minimal resources available that have the python knowledge and experience to maintain the tests, which are simple to read but difficult to quickly understand and fix, the intent is to eliminate the use of the Behave framework for any Fabric projects.

Work items herein are to evaluate the red and yellow highlighted testcases in the attached spreadsheet, which lists all the active (and some inactive) Behave testcases in the fabric-test/feature/*.feature files.  We can eliminate those which are duplicates of other tests being executed by PTE or other tools inside fabric-test repository or in other IT tests in other repositories such as fabric or fabric-sdk-java or fabric-sdk-node or others. Where there are gaps, and where the test coverage is deemed still necessary, new workitems should be created to implement them elsewhere.

The attached xls spreadsheet is a snapshot after first pass performed by Matt and Scott. Follow the ongoing design analysis work at the link provided in the ""Design"" section. For each testcase, confirm whether it is covered elsewhere or if it is a gap. If a gap, indicate if it is needed and if so then which test suite - i.e. when it should be executed in the pipeline, and the location where a replacement test will be developed - and create a jira issue for writing each single or group of tests.

A good goal is to replace these tests and deprecate the Behave test framework before the end of 2019, when python v2.7 will become unsupported (which means we would need to invest some effort to upgrade our tooling just to keep it going).

Procedural recommendations:

For end-to-end behavior testing, use fabric integration tests.
We don't want to proliferate too many integration tests, so for negative testing on a specific component, use unit tests.
Note - it is acceptable for a unit test to span more than one package of code to test a couple implementation layers at a time (you don't have to mock out every single layer).
For tests that use SDK, work with Bret/Rick to extend SDK integration tests.
Note - we do not expect full coverage of Fabric logic from the SDK integration tests. We expect full coverage of SDK code and integration with the important Fabric functions only.

Additional test efficiency suggestions:: Streamline existing lifecycle integration tests so that they run faster - For example, instead of having one network that you bring up and down per test, try to do more testing using fewer networks. e.g. start one network and then create a channel per unique test sequence. Or combine multiple test scenarios on a single network channel.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"18/Jun/19 11:32 PM;scottz;Behave - Test Coverage.xlsx;https://jira.hyperledger.org/secure/attachment/17325/Behave+-+Test+Coverage.xlsx",,,,,,,,,,,,,,,,,,,,,,,,,,Behave test coverage transitioning into unit/integration function tests.,"https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741, on tab ""Behave testcases"", tracks the analysis and plans for alternative test coverage.",Unset,Unset,Unset,ghx-label-8,,Test improvements - Replace Behave Tests,Done,No,,Unset,No,,,"1|hzx30f:9",,,,Unset,Not Required,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Delete pull_build_artifacts.sh,FAB-15746,40660,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,19/Jun/19 12:06 AM,19/Jun/19 5:46 AM,28/Oct/23 3:08 AM,19/Jun/19 5:46 AM,,,,,,,,,,,,,,,,,,,,,,,,0,ipm,,,,,"This script hasn't worked in months, given the maintenance required to keep it functional, we will delete it.",,btl5037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ruk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identify Alternatives for Behave Tests for CouchDB Indexing,FAB-15747,40669,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,19/Jun/19 12:31 AM,28/Jul/19 3:29 AM,28/Oct/23 3:08 AM,28/Jul/19 3:29 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Refer to tab ""Behave Testcases"" in shared google sheet  https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741  to analyze and identify test coverage elsewhere of Behave tests listed in:
* Items: 1-8
* Topic: CouchDB_index.feature",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15846,FAB-15847,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00rwk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identify Alternatives for Behave Tests in bootstrap.feature,FAB-15748,40671,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,19/Jun/19 12:35 AM,28/Jul/19 3:30 AM,28/Oct/23 3:08 AM,28/Jul/19 3:30 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Refer to tab ""Behave Testcases"" in shared google sheet  https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741  to analyze and identify test coverage elsewhere of Behave tests listed in: 
* Items: 9-15, particularly 12-13
* Topic: bootstrap.feature
",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15890,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00rws:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Identify Alternatives for Behave Tests in chaincodes.feature, fabric-ca.feature, ledger.feature",FAB-15749,40672,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,19/Jun/19 12:39 AM,30/Jul/19 3:42 AM,28/Oct/23 3:08 AM,28/Jul/19 3:30 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Refer to tab ""Behave Testcases"" in shared google sheet  https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741  to analyze and identify test coverage elsewhere of Behave tests listed in: 
* Items: 16-34, 43-44
* Topic: chaincodes.feature, fabric-ca.feature, ledger.feature files in fabric-test/feature/.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15893,FAB-15894,FAB-15903,FAB-16016,FAB-16017,FAB-16022,,,,,,,,,,,,,,FAB-15967,FAB-16128,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00rx0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identify Alternatives for Behave Tests for gossip.feature including peer restarts,FAB-15750,40673,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,19/Jun/19 12:42 AM,28/Jul/19 3:30 AM,28/Oct/23 3:08 AM,28/Jul/19 3:30 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Refer to tab ""Behave Testcases"" in shared google sheet  https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741  to analyze and identify test coverage elsewhere of Behave tests listed in: 
* Items: 35-42
* Topic: gossip.feature, includes peer stops/pauses/disconnects",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15980,FAB-15981,FAB-15982,FAB-15983,FAB-15984,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00rx8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identify Alternatives for Behave Tests for orderer.feature,FAB-15751,40675,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,19/Jun/19 2:07 AM,28/Jul/19 3:30 AM,28/Oct/23 3:08 AM,28/Jul/19 3:30 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Refer to tab ""Behave Testcases"" in shared google sheet  https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741  to analyze and identify test coverage elsewhere of Behave tests listed in: 
* Items: 67-78
* Topic: fabric-test/feature/orderer.feature",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16049,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00rxg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identify Alternatives for Behave Tests for peer.feature,FAB-15752,40676,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,19/Jun/19 2:09 AM,28/Jul/19 3:30 AM,28/Oct/23 3:08 AM,28/Jul/19 3:30 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Refer to tab ""Behave Testcases"" in shared google sheet  https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741  to analyze and identify test coverage elsewhere of Behave tests listed in: 
* Items: 79-92
* Topic: peer.feature",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16050,FAB-16117,FAB-16118,FAB-16119,FAB-16120,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00rxo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove / deprecate RSA crypto and options in bccsp,FAB-15753,40677,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,mastersingh24,mastersingh24,19/Jun/19 3:43 AM,03/Nov/20 3:51 AM,28/Oct/23 3:08 AM,01/Nov/19 9:19 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,,,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-18308,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00n2e:6rri",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Oct/19 5:39 AM;sykesm;[~mastersingh24] are we just noting the deprecation of RSA options or are we removing them?

I'm picking this up with the assumption that they're being removed from fabric in v2...;;;","29/Oct/19 6:51 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/34133 Remove RSA crypto operations from BCCSP;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Deprecate SOLO orderer in favor of single node raft,FAB-15754,40678,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,mastersingh24,mastersingh24,19/Jun/19 3:43 AM,16/Nov/19 5:16 AM,28/Oct/23 3:08 AM,16/Nov/19 5:16 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,,,denyeart,jyellick,mastersingh24,siddjain,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15337,,,No,,Unset,No,,,"1|i00n2e:8zfy",,,,Unset,Unset,,(Please add steps to reproduce),1.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,mastersingh24,siddjain,sykesm,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Nov/19 12:25 AM;sykesm;Based on discussions with [~jyellick], we'd like to deprecate in v2 but leave it in.

- Deprecate in the doc
- Update all but one integration test to use single node raft
- Evaluate fabric-samples and open issues to have the owners move away from solo
- Evaluate SDK implementations and open issues to have the owners move away from solo
;;;","06/Nov/19 3:23 AM;denyeart;Discussed with [~jyellick] today.  The only issue with single node raft is that TLS is required to be configured for raft orderers. This is a barrier for people who want to do some quick trials with fabric, without getting wrapped up in the complexity of setting up TLS for each of the components. Solo is meant for exactly these types of quick trials. Personally, when I'm testing something in Fabric I like to use binaries that I can quickly build, rather than rely on whatever magic may be in the docker images and sample compose and shell scripts. Jason and I concluded that it would be simpler to keep solo around for these types of use cases, than to have a single node Raft without TLS option, since there is only a tiny amount of code required to support solo regardless.

Given the TLS consideration, what do you think [~mastersingh24] [~sykesm] [~jyellick] ?

Note that BYFN has shifted to raft already... agreed that sample networks should just use Raft with TLS configured, the consideration here is for people spinning up their own ad hoc test networks.;;;","06/Nov/19 4:42 AM;jyellick;The problem with Solo, is that people start with it, and then later down the line want to migrate off of it.  Now we have a migration path from Solo to Raft, but the relative pain between generating a TLS cert before bootstrapping your single node Raft network is quite small when compared to migrating from Solo to Raft.

We could possibly extend the Raft configuration to allow a network with no TLS certs defined, and require that you first transition from a 0 node to a 1 node network (consisting of the existing node), though I worry about adding confusing edge cases to Raft configuration.

The balance would be simply leaving solo.  From a code perspective, it's a hair over 100 lines, and about 4 times that in test.  It's some burden, but small.;;;","12/Nov/19 1:17 AM;sykesm;During our IPM today, we've decided on the following action plan:
 # Reiterate in the documentation that solo is not intended for any production use cases. (Obvious.)
 # Specifically deprecate the ""solo ordering service"" in favor of a single node RAFT ordering service so we are able to remove it if/when we decide to. This should reinforce the fact that solo really isn't what people want to use.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove ledgermgmt package level variables,FAB-15755,40679,34708,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,19/Jun/19 4:03 AM,11/Jul/19 1:32 AM,28/Oct/23 3:08 AM,09/Jul/19 1:25 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12981,FAB-13614,,,,,,,,,FAB-15915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ryc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"19/Jun/19 4:49 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/31964/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE failed if connection profile directory contains swp file,FAB-15756,40680,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,19/Jun/19 4:45 AM,19/Jun/19 10:08 PM,28/Oct/23 3:08 AM,19/Jun/19 10:08 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,PTE does not work when the connection profile contains swp file,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00ryk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"19/Jun/19 5:05 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31966;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
couchdbutil.go - comment typo,FAB-15757,40682,,Bug,Closed,FAB,Fabric,software,denyeart,,,Lowest,Done,yjchang21,yjchang21,yjchang21,19/Jun/19 10:36 AM,20/Jun/19 11:05 PM,28/Oct/23 3:08 AM,20/Jun/19 11:05 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"There is a typo in the comments for the function 'ConstructNamespaceDBName'.
It causes a little confusion to understand the comments.

line 207 - // (i.e., collectionNameAllowedLength) of collection> + (<SHA256 hash of [chainName_namespace$$pcollection]>)

'pcollection' should be 'collection'.",,denyeart,yjchang21,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rys:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yjchang21,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 9:18 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/31972/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer and peer need to support log rotation,FAB-15758,40683,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,shiyuan,shiyuan,19/Jun/19 7:19 PM,02/Dec/19 11:21 PM,28/Oct/23 3:08 AM,,v1.4.0,v1.4.1,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Orderer and peer need to support log rotation by size or time. Otherwise the size of log files will keep increasing and bring unexpected issues.,,joaquimpedrooliveira,mastersingh24,shiyuan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rz0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joaquimpedrooliveira,mastersingh24,shiyuan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jul/19 7:48 PM;mastersingh24;Not sure what you are looking for here?  The peer and orderer binaries log to stderr not to files; so not sure how we can do any type of log rotation.
And if you are using the Docker images, Docker has built-in log rotation settings.;;;","15/Jul/19 5:20 PM;shiyuan;We are developing a BaaS (blockchain as a serivce) platform. According to the requirements from some of our customers, the peer and orderer nodes are not running in docker containers but in virtual machines or bare machines directly. We can redirect log from stderr to log files but can not rotate the log files. The lograte tool can neither work with the log files. ;;;","20/Sep/19 7:30 PM;mastersingh24;[~shiyuan]  - sorry for not getting back on this one.  Have you tried using the `logger` command to send logs to syslog?
{code:java}
peer node start |logger 2>&1 &{code};;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The number of gossip member peers difference between discover command and prometheus view. ,FAB-15759,40684,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,jooskim1,jooskim1,19/Jun/19 9:06 PM,26/Jul/19 5:09 PM,28/Oct/23 3:08 AM,26/Jul/19 5:09 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-gossip,fabric-tools,,,,,0,discovery,gossip,prometheus,,,"Hi,

While My team is waiting for the answer for 'FAB-15557' , we have been monitoring peers' membership status to detect the isolated peer issue.

Thus my team is using both *prometheus metrics and* *discover cli tool* as monitoring tools to get peers' membership status.**

Then we found out that the number of gossip membership peers from prometheus does not match with a peer's gossip membership list from the discover cli tool.

For example, in a random peer isolating situation I described in the issue 'FAB-15557', the prometheus metrics from the isolated peer showed the value of gossip_membership_total_peers_known is 0. However, at the same time, from discover cli from the  isolated peer showed this peer had all other peers on the network. 

In my understanding, if gossip_membership_total_peers_known is 0, then the discover cli from the isolated peer should not show the other peers, but it still shows the other peers when the peer was already isolated(as shown in ""gossip_membership_total_peers_known"")

So I am wondering why the results are different between gossip_membership_total_peers_known status and the discover cli tool.",,jooskim1,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rz8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jooskim1,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 5:52 AM;yacovm;This is interesting. Can you be a bit more specific? What kind of query do you invoke with the discover CLI? do you pass a channel name or not?;;;","11/Jul/19 6:01 AM;yacovm;{quote}So I am wondering why the results are different between gossip_membership_total_peers_known status and the discover cli tool.
{quote}
 

Can you post some more info, like what exactly is the command you're using, the flags, and do you see all the peers in the response or only a subset, etc. ? 
I'm asking because you can ask the discovery service for a channel scoped view or a non channel scoped view, and the gossip membership tracking is per channel.;;;","16/Jul/19 6:46 PM;jooskim1;[~yacovm]

Hi, 

Below is a config yaml file for using discover cli.
{code:java}
 version: 0
 tlsconfig:
   certpath: """"
   keypath: """"
   peercacertpath: """"
   timeout: 0s
 signerconfig:
   mspid: PRODMSPID
   identitypath: /etc/hyperledger/fabric/admin/msp/signcerts/cert.pem
   keypath: /etc/hyperledger/fabric/admin/msp/keystore/secret_key{code}
Below is the command that I used for getting the isolated peer's discovery information.
{code:java}
discover peers --configFile conf.yaml --server ISOLOATED.PEER.ADDRESS:PORT
discover peers --configFile conf.yaml --server ISOLOATED.PEER.ADDRESS:PORT --channel=PRODCHANNEL
discover peers -configFile conf.yaml --server  ISOLOATED.PEER.ADDRESS:PORT -MSP=PRODCHANNELMSP {code}
Thanks.;;;","16/Jul/19 6:53 PM;yacovm;you know, you can use ""\{code}"" tags to make the above commands not be strike-through-ed. 

so in both *discover peers* commands with channel and without channel specification you see the peers, correct?;;;","16/Jul/19 7:04 PM;jooskim1;[~yacovm]

Yes.

I used all three commands mentioned in above comment, and I was able to see the peers on the gossip, when I put the isolated peer address as a value for *--server* flag. ;;;","16/Jul/19 7:13 PM;yacovm;This is interesting... can you invoke the commands in a loop many times and see if there is a difference in the number of peers shown?

 

Do you see connections (with *netstat* ) to the peers? If so, then it seems that the peers aren't really isolated, as they are seen in the membership view and connections are still established.;;;","17/Jul/19 2:17 PM;jooskim1;My team is doing a real service using hyperledger fabric. When the isolating situation occurs, the service has a serious problem, thus my team check the gossip state using *discover command* every 5 seconds. If any peer is out from the discovery member, we restart the isolated peer right after detecting. So it's hard to checkout the *netstat* at the isolated time. The problem is that there is a time gap between the gossip state information from using discover command and from prometheus metric. For example, once we find out the isolated situation by using discover command, but at the same time, the prometheus metric has no changes and after a while prometheus metric shows changed number in gossip membership.;;;","17/Jul/19 4:22 PM;yacovm;{quote}For example, once we find out the isolated situation by using discover command
{quote}
 

I don't understand, I thought you said that in the discover output they are always online?
{quote} 

the prometheus metrics from the isolated peer showed the value of gossip_membership_total_peers_known is 0. However, at the same time, from discover cli from the isolated peer showed this peer had all other peers on the network.
{quote};;;","17/Jul/19 9:42 PM;jooskim1;What my team is curious about is that why there is a time gap ( seconds to minutes ) between gossip state information from prometheus metric and the information from the discover command, not which information changed first. My team need to detect the beginning of the isolating in the organization what we are managing, so we judge the beginning of the isolating based on the discovery information from the discover command.  The reason why we use discover command is that the value of gossip state in prometheus is the sum of gossip members from multiple organizations.

 ;;;","26/Jul/19 12:29 PM;jooskim1;[~yacovm]

I think when the blockchain network has a problems, the discover command leaves the peer from the membership, but the peer is under the problem, therefore the prometheus does not work correctly. 
So I think there is no problem closing this issue.;;;","26/Jul/19 2:10 PM;yacovm;Are you saying that the peer has problems and therefore it doesn't report to prometheus? I don't understand;;;","26/Jul/19 4:02 PM;jooskim1;I parsed values from prometheus, but when a peer container stopped the peer container does not offer prometheus values anymore, thus there is a gap between parsed prometheus values and values from discover command. Thus there is no problem closing this issue. It seems like I have no rights for closing the issue. Also I will monitor the value differences when the peer loses its gossip network and recreate an issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
System Test - Kafka to Raft Migration,FAB-15760,40686,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,suryalnvs,suryalnvs,19/Jun/19 9:56 PM,09/Aug/19 12:43 AM,28/Oct/23 3:08 AM,01/Aug/19 12:11 PM,v1.4.2,v2.0.0,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,kafka,raft,,,," This story is for testcases necessary for Kafka to Raft Migration system testing

This is where add all system verification tests (SVT) involving the Kafka to Raft Migration",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15041,FAB-15741,FAB-15742,FAB-15744,FAB-15779,FAB-16259,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00rzo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE gen_cfgInputs.sh simplifies user inputs,FAB-15761,40688,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,dongming,dongming,dongming,19/Jun/19 10:24 PM,22/Jan/20 6:16 AM,28/Oct/23 3:08 AM,22/Jan/20 6:16 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Concerning user experience, need to simply PTE user inputs. 
Change gen_cfgInputs.sh to Node js.
User will only supply a file (json or yaml) contains all needed parameters
gen_cfgInputs will build all PTE inputs to execute PTE",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00whf:y",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jan/20 6:16 AM;scottz;gen_cfgInputs.sh and other scripts, as well as all the test input files in PTE/, are being sunset soon, replaced by operator. No more enhancements.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Flaky Raft UT: lagged node can catch up using snapshot,FAB-15763,40690,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,19/Jun/19 11:08 PM,09/Jul/19 5:52 AM,28/Oct/23 3:08 AM,09/Jul/19 5:52 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,,,,,"Eviction suspector currently relies on real clock, which sometimes increments block puller call count, and making assertion on call count fail",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s0k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 8:26 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/31982;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE update config.yaml ca tlsCACerts path,FAB-15764,40693,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,20/Jun/19 12:39 AM,20/Jun/19 3:58 AM,28/Oct/23 3:08 AM,20/Jun/19 3:58 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,The ca tlsCACerts path in ConnProfiles/test-network/config.yaml need to be changed from fabric/common/tools/ to fabric/internal/,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00s18:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"20/Jun/19 12:46 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/31983;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create README for k8s network launcher,FAB-15765,40694,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,20/Jun/19 12:46 AM,20/Aug/19 4:15 AM,28/Oct/23 3:08 AM,20/Aug/19 4:15 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Create README for k8s network launcher,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s1g:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,,,,,,,true,"31/Jul/19 3:37 AM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32542/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove custom tx processor package level singleton,FAB-15766,40696,34708,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,20/Jun/19 2:25 AM,09/Jul/19 2:30 AM,28/Oct/23 3:08 AM,09/Jul/19 2:30 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15586,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s1w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 3:31 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/31988/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
RAFT Orderer crash after multiple attempts to connect to other orderers,FAB-15767,40701,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,diestrin,diestrin,20/Jun/19 3:05 AM,06/Aug/19 8:54 PM,28/Oct/23 3:08 AM,06/Aug/19 8:54 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,"I'm setting up a network with multiple orderers in raft mode, but when the orderers start (all at the same time) and try to connect to each other, some times they fail and crashes the server completely.
If the network only start with one orderer this doesn't happen, only when multiple orderers are configured.

Here's the section in configtx.yaml
{code}
    Orderer:
      # Orderer Type: The orderer implementation to start
      # Available types are ""solo"", ""kafka"", ""etcdraft""
      OrdererType: etcdraft

      EtcdRaft:
        Consenters:
          - Host: orderer2.diegoigw-testfit.svc.cluster.local
            Port: 30228
            ClientTLSCert: /data/data/diegoigw-testfit-orderer-orderer2/tls/server.crt
            ServerTLSCert: /data/data/diegoigw-testfit-orderer-orderer2/tls/server.crt
          - Host: orderer2.fakeizh-testvin.svc.cluster.local
            Port: 30292
            ClientTLSCert: /data/data/fakeizh-testvin-orderer-orderer2/tls/server.crt
            ServerTLSCert: /data/data/fakeizh-testvin-orderer-orderer2/tls/server.crt

        Options:
          TickInterval: 5s
          # ElectionTick: 10
          # HeartbeatTick: 1
          # MaxInflightMsgs: 256
          # MaxSizePerMsg: 1048576

      Addresses:
        - orderer2.diegoigw-testfit.svc.cluster.local:30228
        - orderer2.fakeizh-testvin.svc.cluster.local:30292

      Organizations:
        - *diegoigw-testfit
        - *fakeizh-testvin

      BatchTimeout: 2s
      BatchSize:
        MaxMessageCount: 10
        AbsoluteMaxBytes: 99 MB
        PreferredMaxBytes: 512 KB

      Capabilities:
        <<: *OrdererCapabilities
      Policies:
        Readers:
          Type: ImplicitMeta
          Rule: ""ANY Readers""
        Writers:
          Type: ImplicitMeta
          Rule: ""ANY Writers""
        Admins:
          Type: ImplicitMeta
          Rule: ""MAJORITY Admins""
        # BlockValidation specifies what signatures must be included in the block
        # from the orderer for the peer to validate it.
        BlockValidation:
          Type: ImplicitMeta
          Rule: ""ANY Writers""
{code}

Both orderers are starting at the same time, and after seeing a couple of messages like
{code}2019-06-19 08:22:28.244 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 32d Failed to send StepRequest to 2, because: connection to 2(orderer2.fakeizh-testvin.svc.cluster.local:30292) is in state CONNECTING channel=testiiy-sys-channel node=1{code}
it crashes the server with the following error logs
{code}
2019-06-19 08:22:23.225 UTC [grpc] watcher -> DEBU 322 ccResolverWrapper: sending new addresses to cc: [{orderer2.fakeizh-testvin.svc.cluster.local:30292 0  <nil>}]
2019-06-19 08:22:23.225 UTC [grpc] switchBalancer -> DEBU 323 ClientConn switching balancer to ""pick_first""
2019-06-19 08:22:23.225 UTC [grpc] HandleSubConnStateChange -> DEBU 324 pickfirstBalancer: HandleSubConnStateChange: 0xc000014760, CONNECTING
2019-06-19 08:22:23.240 UTC [orderer.consensus.etcdraft] run -> INFO 325 This node is picked to start campaign channel=testiiy-sys-channel node=1
2019-06-19 08:22:23.243 UTC [orderer.consensus.etcdraft] apply -> INFO 326 Applied config change to add node 1, current nodes in channel: [1 2] channel=testiiy-sys-channel node=1
2019-06-19 08:22:23.243 UTC [orderer.consensus.etcdraft] apply -> INFO 327 Applied config change to add node 2, current nodes in channel: [1 2] channel=testiiy-sys-channel node=1
2019-06-19 08:22:28.243 UTC [orderer.consensus.etcdraft] Step -> INFO 328 1 is starting a new election at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:28.243 UTC [orderer.consensus.etcdraft] becomePreCandidate -> INFO 329 1 became pre-candidate at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:28.243 UTC [orderer.consensus.etcdraft] poll -> INFO 32a 1 received MsgPreVoteResp from 1 at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:28.244 UTC [orderer.consensus.etcdraft] campaign -> INFO 32b 1 [logterm: 1, index: 2] sent MsgPreVote request to 2 at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:28.244 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 32c Sending msg of 28 bytes to 2 on channel testiiy-sys-channel took 21.11µs
2019-06-19 08:22:28.244 UTC [orderer.consensus.etcdraft] logSendFailure -> ERRO 32d Failed to send StepRequest to 2, because: connection to 2(orderer2.fakeizh-testvin.svc.cluster.local:30292) is in state CONNECTING channel=testiiy-sys-channel node=1
2019-06-19 08:22:33.181 UTC [orderer.common.server] replicateDisabledChains -> DEBU 32e No inactive chains to try to replicate
2019-06-19 08:22:33.243 UTC [orderer.consensus.etcdraft] Step -> INFO 32f 1 is starting a new election at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:33.243 UTC [orderer.consensus.etcdraft] becomePreCandidate -> INFO 330 1 became pre-candidate at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:33.243 UTC [orderer.consensus.etcdraft] poll -> INFO 331 1 received MsgPreVoteResp from 1 at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:33.243 UTC [orderer.consensus.etcdraft] campaign -> INFO 332 1 [logterm: 1, index: 2] sent MsgPreVote request to 2 at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:33.243 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 333 Sending msg of 28 bytes to 2 on channel testiiy-sys-channel took 21.326µs
2019-06-19 08:22:33.243 UTC [orderer.consensus.etcdraft] logSendFailure -> DEBU 334 Failed to send StepRequest to 2, because: connection to 2(orderer2.fakeizh-testvin.svc.cluster.local:30292) is in state CONNECTING channel=testiiy-sys-channel node=1
2019-06-19 08:22:38.243 UTC [orderer.consensus.etcdraft] Step -> INFO 335 1 is starting a new election at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:38.243 UTC [orderer.consensus.etcdraft] becomePreCandidate -> INFO 336 1 became pre-candidate at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:38.243 UTC [orderer.consensus.etcdraft] poll -> INFO 337 1 received MsgPreVoteResp from 1 at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:38.244 UTC [orderer.consensus.etcdraft] campaign -> INFO 338 1 [logterm: 1, index: 2] sent MsgPreVote request to 2 at term 1 channel=testiiy-sys-channel node=1
2019-06-19 08:22:38.244 UTC [orderer.consensus.etcdraft] consensusSent -> DEBU 339 Sending msg of 28 bytes to 2 on channel testiiy-sys-channel took 61.251µs
2019-06-19 08:22:38.244 UTC [orderer.consensus.etcdraft] logSendFailure -> DEBU 33a Failed to send StepRequest to 2, because: connection to 2(orderer2.fakeizh-testvin.svc.cluster.local:30292) is in state CONNECTING channel=testiiy-sys-channel node=1
2019-06-19 08:22:43.225 UTC [grpc] createTransport -> DEBU 33b grpc: addrConn.createTransport failed to connect to {orderer2.fakeizh-testvin.svc.cluster.local:30292 0  <nil>}. Err :connection error: desc = ""transport: Error while dialing dial tcp 10.59.241.129:30292: i/o timeout"". Reconnecting...
2019-06-19 08:22:43.226 UTC [grpc] HandleSubConnStateChange -> DEBU 33c pickfirstBalancer: HandleSubConnStateChange: 0xc000014760, TRANSIENT_FAILURE
fatal error: unexpected signal during runtime execution
[signal SIGSEGV: segmentation violation code=0x1 addr=0x47 pc=0x7effd8a96259]

runtime stack:
runtime.throw(0x103c565, 0x2a)
	/opt/go/src/runtime/panic.go:608 +0x72
runtime.sigpanic()
	/opt/go/src/runtime/signal_unix.go:374 +0x2f2

goroutine 48 [syscall]:
runtime.cgocall(0xcb7a20, 0xc000425600, 0x29)
	/opt/go/src/runtime/cgocall.go:128 +0x5e fp=0xc0004255c8 sp=0xc000425590 pc=0x4039de
net._C2func_getaddrinfo(0xc00018ac60, 0x0, 0xc000505830, 0xc00000e460, 0x0, 0x0, 0x0)
	_cgo_gotypes.go:91 +0x55 fp=0xc000425600 sp=0xc0004255c8 pc=0x538015
net.cgoLookupIPCNAME.func1(0xc00018ac60, 0x0, 0xc000505830, 0xc00000e460, 0x2b, 0x2b, 0xc00027a580)
	/opt/go/src/net/cgo_unix.go:149 +0x131 fp=0xc000425648 sp=0xc000425600 pc=0x53d741
net.cgoLookupIPCNAME(0xc00018a0c0, 0x2a, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/go/src/net/cgo_unix.go:149 +0x153 fp=0xc000425738 sp=0xc000425648 pc=0x5395d3
net.cgoIPLookup(0xc000075680, 0xc00018a0c0, 0x2a)
	/opt/go/src/net/cgo_unix.go:201 +0x4d fp=0xc0004257c8 sp=0xc000425738 pc=0x539c8d
runtime.goexit()
	/opt/go/src/runtime/asm_amd64.s:1333 +0x1 fp=0xc0004257d0 sp=0xc0004257c8 pc=0x45da71
created by net.cgoLookupIP
	/opt/go/src/net/cgo_unix.go:211 +0xad

goroutine 1 [IO wait]:
internal/poll.runtime_pollWait(0x7effda62ee30, 0x72, 0x0)
	/opt/go/src/runtime/netpoll.go:173 +0x66
internal/poll.(*pollDesc).wait(0xc000100498, 0x72, 0xc00051c400, 0x0, 0x0)
	/opt/go/src/internal/poll/fd_poll_runtime.go:85 +0x9a
internal/poll.(*pollDesc).waitRead(0xc000100498, 0xffffffffffffff00, 0x0, 0x0)
	/opt/go/src/internal/poll/fd_poll_runtime.go:90 +0x3d
internal/poll.(*FD).Accept(0xc000100480, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/go/src/internal/poll/fd_unix.go:384 +0x1a0
net.(*netFD).accept(0xc000100480, 0x760000c000000300, 0xc00027c340, 0x76d4ed3c15001d73)
	/opt/go/src/net/fd_unix.go:238 +0x42
net.(*TCPListener).accept(0xc00000e3e0, 0x42be92, 0xc000550330, 0xc0005019d0)
	/opt/go/src/net/tcpsock_posix.go:139 +0x2e
net.(*TCPListener).Accept(0xc00000e3e0, 0x1063a98, 0xc000309080, 0xc00027eac0, 0x0)
	/opt/go/src/net/tcpsock.go:260 +0x47
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*Server).Serve(0xc000309080, 0x1150120, 0xc00000e3e0, 0x0, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/server.go:557 +0x210
github.com/hyperledger/fabric/core/comm.(*GRPCServer).Start(0xc0001422a0, 0xc000501cc0, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/core/comm/server.go:202 +0x41
github.com/hyperledger/fabric/orderer/common/server.Start(0x1013e09, 0x5, 0xc000234480)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:180 +0xa84
github.com/hyperledger/fabric/orderer/common/server.Main()
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:91 +0x1ce
main.main()
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/main.go:15 +0x20

goroutine 6 [syscall]:
os/signal.signal_recv(0x0)
	/opt/go/src/runtime/sigqueue.go:139 +0x9c
os/signal.loop()
	/opt/go/src/os/signal/signal_unix.go:23 +0x22
created by os/signal.init.0
	/opt/go/src/os/signal/signal_unix.go:29 +0x41

goroutine 18 [chan receive]:
github.com/hyperledger/fabric/orderer/consensus/kafka.init.1.func1(0xc000331620)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/kafka/logger.go:41 +0x31
created by github.com/hyperledger/fabric/orderer/consensus/kafka.init.1
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/kafka/logger.go:38 +0x6c

goroutine 19 [select]:
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0xc000464d20)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:206 +0x12a
created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util.NewBufferPool
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:237 +0x177

goroutine 20 [select]:
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0xc0000984e0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:90 +0xd3
created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:142 +0x40c

goroutine 21 [select]:
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0xc0000984e0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_state.go:101 +0xe7
created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:143 +0x42e

goroutine 22 [select]:
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0xc0000984e0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:834 +0x331
created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:149 +0x58c

goroutine 23 [select]:
github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0xc0000984e0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_compaction.go:762 +0x12e
created by github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.openDB
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:150 +0x5ae

goroutine 24 [IO wait]:
internal/poll.runtime_pollWait(0x7effda62ef00, 0x72, 0x0)
	/opt/go/src/runtime/netpoll.go:173 +0x66
internal/poll.(*pollDesc).wait(0xc000100318, 0x72, 0xc000072000, 0x0, 0x0)
	/opt/go/src/internal/poll/fd_poll_runtime.go:85 +0x9a
internal/poll.(*pollDesc).waitRead(0xc000100318, 0xffffffffffffff00, 0x0, 0x0)
	/opt/go/src/internal/poll/fd_poll_runtime.go:90 +0x3d
internal/poll.(*FD).Accept(0xc000100300, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)
	/opt/go/src/internal/poll/fd_unix.go:384 +0x1a0
net.(*netFD).accept(0xc000100300, 0x7effde09d000, 0x0, 0xc000052eb0)
	/opt/go/src/net/fd_unix.go:238 +0x42
net.(*TCPListener).accept(0xc00000e308, 0xc000052eb8, 0x40d248, 0x30)
	/opt/go/src/net/tcpsock_posix.go:139 +0x2e
net.(*TCPListener).Accept(0xc00000e308, 0xf671c0, 0xc000553830, 0xe979c0, 0x1b0b210)
	/opt/go/src/net/tcpsock.go:260 +0x47
net/http.(*Server).Serve(0xc0004d8d00, 0x1150120, 0xc00000e308, 0x0, 0x0)
	/opt/go/src/net/http/server.go:2826 +0x22f
created by github.com/hyperledger/fabric/core/operations.(*System).Start
	/opt/gopath/src/github.com/hyperledger/fabric/core/operations/system.go:121 +0x1a3

goroutine 25 [select]:
github.com/hyperledger/fabric/orderer/consensus/kafka.(*Metrics).PollGoMetricsUntilStop(0xc000102480, 0xdf8475800, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/kafka/metrics.go:264 +0x10e
created by github.com/hyperledger/fabric/orderer/common/server.initializeMultichannelRegistrar
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:581 +0x2dc

goroutine 26 [select]:
github.com/hyperledger/fabric/orderer/common/server.(*ticker).run(0xc0004809c0, 0xc000514060)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/sched.go:45 +0xe0
github.com/hyperledger/fabric/orderer/common/server.newTicker.func1(0xc000514060, 0xc0004809c0)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/sched.go:34 +0x5b
created by github.com/hyperledger/fabric/orderer/common/server.newTicker
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/sched.go:32 +0xc7

goroutine 27 [select]:
github.com/hyperledger/fabric/orderer/common/server.(*inactiveChainReplicator).run(0xc000075e60)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/onboarding.go:200 +0xb3
created by github.com/hyperledger/fabric/orderer/common/server.initializeEtcdraftConsenter
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:637 +0x3fc

goroutine 29 [select]:
github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/wal.(*filePipeline).run(0xc00021c700)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/wal/file_pipeline.go:98 +0x113
created by github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/wal.newFilePipeline
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/wal/file_pipeline.go:52 +0x122

goroutine 30 [select]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ccResolverWrapper).watcher(0xc0005049c0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/resolver_conn_wrapper.go:109 +0x142
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ccResolverWrapper).start
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/resolver_conn_wrapper.go:95 +0x3f

goroutine 31 [select]:
github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.(*node).run(0xc00028dd40, 0xc0001eb540)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/node.go:342 +0x4e4
created by github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft.StartNode
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/go.etcd.io/etcd/raft/node.go:233 +0x423

goroutine 32 [select]:
github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*node).run(0xc0005b40a0, 0x1)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/node.go:111 +0x272
created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*node).start
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/node.go:80 +0x218

goroutine 33 [select]:
github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).gc(0xc00014c280)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:1158 +0x18d
created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:342 +0x198

goroutine 34 [select]:
github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).serveRequest(0xc00014c280)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:700 +0x381
created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*Chain).Start
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain.go:343 +0x1ba

goroutine 35 [chan receive]:
github.com/hyperledger/fabric/orderer/common/server.handleSignals(0xc000504d80)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:263 +0x2af
created by github.com/hyperledger/fabric/orderer/common/server.Start
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/common/server/main.go:163 +0x9c2

goroutine 37 [runnable]:
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*ccBalancerWrapper).watcher(0xc00021c080)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/balancer_conn_wrappers.go:122 +0x10f
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newCCBalancerWrapper
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/balancer_conn_wrappers.go:113 +0x13d

goroutine 38 [select]:
net.(*Resolver).LookupIPAddr(0x1b64960, 0x1150fe0, 0xc000075560, 0xc00018a0c0, 0x2a, 0xc00018a0eb, 0x5, 0x7654, 0x0, 0x0)
	/opt/go/src/net/lookup.go:227 +0x55f
net.(*Resolver).internetAddrList(0x1b64960, 0x1150fe0, 0xc000075560, 0x1012919, 0x3, 0xc00018a0c0, 0x30, 0x0, 0x0, 0x0, ...)
	/opt/go/src/net/ipsock.go:279 +0x614
net.(*Resolver).resolveAddrList(0x1b64960, 0x1150fe0, 0xc000075560, 0x1012e4d, 0x4, 0x1012919, 0x3, 0xc00018a0c0, 0x30, 0x0, ...)
	/opt/go/src/net/dial.go:202 +0x4fb
net.(*Dialer).DialContext(0xc0004fb3c8, 0x1150fe0, 0xc000075560, 0x1012919, 0x3, 0xc00018a0c0, 0x30, 0x0, 0x0, 0x0, ...)
	/opt/go/src/net/dial.go:384 +0x201
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.dialContext(0x1150fe0, 0xc000075560, 0x1012919, 0x3, 0xc00018a0c0, 0x30, 0x0, 0x0, 0x0, 0xc000104700)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/go17.go:38 +0xc6
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.DialContext.func1(0x1150fe0, 0xc000075560, 0xc00018a0c0, 0x30, 0x0, 0x0, 0x113ac00, 0xc000031740)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:166 +0x4d
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.newProxyDialer.func1(0x1150fe0, 0xc000075560, 0xc00018a0c0, 0x30, 0xc0004fb568, 0x42be92, 0xc00021ceb0, 0xc0004fb588)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/proxy.go:121 +0x12b
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.dial(0x1150fe0, 0xc000075560, 0xc0003e3d80, 0xc00018a0c0, 0x30, 0x18f0e77, 0x59, 0x3d4, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_client.go:119 +0x5a
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.newHTTP2Client(0x1150fe0, 0xc000075560, 0x1150f60, 0xc00021c600, 0xc00018a0c0, 0x30, 0x0, 0x0, 0xc00018a0c0, 0x30, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/http2_client.go:152 +0x105
github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport.NewClientTransport(0x1150fe0, 0xc000075560, 0x1150f60, 0xc00021cf80, 0xc00018a0c0, 0x30, 0x0, 0x0, 0xc00018a0c0, 0x30, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/internal/transport/transport.go:498 +0xce
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).createTransport(0xc00014ca00, 0x1, 0x0, 0xbf3a9a1527a09247, 0x514906c4b, 0x1b65200, 0xbf3a9a19cd7c1f5f, 0x966e8f763, 0x1b65200, 0xc00021c500, ...)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:969 +0x2dd
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).resetTransport(0xc00014ca00, 0x1, 0x0)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:927 +0x499
github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).connect.func1(0xc00014ca00)
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:614 +0x2f
created by github.com/hyperledger/fabric/vendor/google.golang.org/grpc.(*addrConn).connect
	/opt/gopath/src/github.com/hyperledger/fabric/vendor/google.golang.org/grpc/clientconn.go:613 +0xe1

goroutine 42 [select]:
github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*node).run.func1(0xc0005b40a0, 0xc0005149c0)
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/node.go:98 +0x17d
created by github.com/hyperledger/fabric/orderer/consensus/etcdraft.(*node).run
	/opt/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/node.go:93 +0x8b2

goroutine 47 [select]:
net.cgoLookupIP(0x1150f60, 0xc00021c640, 0xc00018a0c0, 0x2a, 0x0, 0x40c9bf, 0xc000330660, 0x60, 0x60, 0xfd0de0)
	/opt/go/src/net/cgo_unix.go:212 +0x17b
net.(*Resolver).lookupIP(0x1b64960, 0x1150f60, 0xc00021c640, 0xc00018a0c0, 0x2a, 0x0, 0xc000013200, 0xc00021c180, 0x8, 0xcb14b3)
	/opt/go/src/net/lookup_unix.go:95 +0x166
net.(*Resolver).lookupIP-fm(0x1150f60, 0xc00021c640, 0xc00018a0c0, 0x2a, 0x42be92, 0x8, 0xc00021c180, 0x3, 0xc000426ea0)
	/opt/go/src/net/lookup.go:207 +0x56
net.glob..func1(0x1150f60, 0xc00021c640, 0xc0000158b0, 0xc00018a0c0, 0x2a, 0x0, 0xc000514838, 0xc000426f68, 0x4dfcbc, 0xc00028c9d0)
	/opt/go/src/net/hook.go:19 +0x52
net.(*Resolver).LookupIPAddr.func1(0x0, 0x0, 0x0, 0x0)
	/opt/go/src/net/lookup.go:221 +0xd8
internal/singleflight.(*Group).doCall(0x1b64970, 0xc0004d4780, 0xc00018a0c0, 0x2a, 0xc0005057d0)
	/opt/go/src/internal/singleflight/singleflight.go:95 +0x2e
created by internal/singleflight.(*Group).DoChan
	/opt/go/src/internal/singleflight/singleflight.go:88 +0x2a0
{code}",,diestrin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s30:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),diestrin,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jun/19 4:44 AM;yacovm;You can try to set the following environment variable in the container: *GODEBUG=netdns=go*;;;","10/Jul/19 8:28 PM;diestrin;The proposed solution fixed the problem. Thanks;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Error: Invalid channel create transaction : mismatched channel ID mychannel != testchannel,FAB-15768,40705,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,pvrbharg,pvrbharg,20/Jun/19 4:51 AM,01/Nov/19 1:49 AM,28/Oct/23 3:08 AM,01/Nov/19 12:02 AM,v1.4.0,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,documentation,,,,,"Use case does not work as documented at:

[https://hyperledger-fabric.readthedocs.io/en/release-1.4/channel_update_tutorial.html]

 

hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric-samples/first-network$ ./byfn.sh up -c testchannel -s couchdb -l node

Starting for channel 'testchannel' with CLI timeout of '10' seconds and CLI delay of '3' seconds and using database 'couchdb'
Continue? [Y/n] Y
proceeding ...
LOCAL_VERSION=1.4.0
DOCKER_IMAGE_VERSION=1.4.1
=================== WARNING ===================
 Local fabric binaries and docker images are
 out of sync. This may cause problems.
===============================================
Creating network ""net_byfn"" with the default driver
Creating volume ""net_orderer.example.com"" with default driver
Creating volume ""net_peer0.org1.example.com"" with default driver
Creating volume ""net_peer1.org1.example.com"" with default driver
Creating volume ""net_peer0.org2.example.com"" with default driver
Creating volume ""net_peer1.org2.example.com"" with default driver
Creating couchdb1 ... done
Creating orderer.example.com ... done
Creating couchdb0 ... done
Creating couchdb2 ... done
Creating couchdb3 ... done
Creating peer1.org1.example.com ... done
Creating peer0.org1.example.com ... done
Creating peer1.org2.example.com ... done
Creating peer0.org2.example.com ... done
Creating cli ... done

...

2019-06-19 19:43:30.969 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized
Error: Invalid channel create transaction : mismatched channel ID mychannel != testchannel
!!!!!!!!!!!!!!! Channel creation failed !!!!!!!!!!!!!!!!
========= ERROR !!! FAILED to execute End-2-End Scenario ===========

ERROR !!!! Test failed
hlbcadmin@ubuntu:~/go/src/github.com/hyperledger/fabric-samples/first-network$ ./byfn.sh up -c testchannel -s couchdb -l node

 ",,denyeart,mrosen52,pvrbharg,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16604,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"20/Jun/19 4:51 AM;pvrbharg;2019-06-19_15-50-49.png;https://jira.hyperledger.org/secure/attachment/17327/2019-06-19_15-50-49.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s3w:",,,,Unset,Unset,,"Try following the commands as documented at the above URL:
 ./byfn.sh up -c testchannel -s couchdb -l node",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mrosen52,pvrbharg,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Aug/19 12:28 AM;wlahti;I just tried the command in the steps to reproduce locally using 1.4.2 and don't see any issues. Can you confirm if you've continued to see this error?;;;","15/Aug/19 12:42 AM;wlahti;Ah, I think I know what the problem was. I'm guessing you generated the artifacts for byfn without specifying a channel id, so it was defaulting to ""mychannel"" at that point. Then, when starting up the network and specifying the channel id, it was trying to create ""testchannel"" using artifacts that referenced ""mychannel"". ;;;","15/Aug/19 12:45 AM;wlahti;Reopened. We should make sure to document that the generate step should also be run with the -c channel id flag before attempting to bring up a network with a non-default channel id. ;;;","16/Aug/19 1:01 AM;pvrbharg;Dear Will, 

Thank you and I am glad you are able to replicate the issue and also identify the underling issue. I believe you may be accurate on why this has happened. I encountered this issue as I was trying to perform channel configuration updates dynamically [with configtxn txn]. 

 

Hence your analysis makes perfect sense. 

 

I agree with your resolution suggestion. Another option would be - to at least alert the user - why this happened and how to recover rather than state the fact and fail. For example - the message could have been - MAKE SURE THAT YOU USE SAME -c option when you generate the artifacts and when you use them to start the network [-generate and -up].

 

Thanks.;;;","01/Nov/19 12:01 AM;wlahti;Given the planned rework of BYFN via FAB-16604 for v2.0, I'm going to mark this item as Won't Do for now. ;;;","01/Nov/19 1:49 AM;pvrbharg;Dear Will,

 

Makes sense and I agree. Thanks.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
log the reason block puller creation fails,FAB-15769,40706,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,20/Jun/19 6:05 AM,20/Jun/19 9:20 PM,28/Oct/23 3:08 AM,20/Jun/19 8:49 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,"When Raft creates a block puller and the configuration is bad, it panics without printing the error which doesn't help the user figure out what he/she did wrong.",,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s44:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 6:13 AM;yacovm;[https://gerrit.hyperledger.org/r/#/c/fabric/+/31994/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use available ports in TestPluginLoadingFailure,FAB-15770,40708,,Story,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,yoheiueda,yoheiueda,yoheiueda,20/Jun/19 2:30 PM,06/Jul/19 6:12 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,test,tests,,,,"Unit test TestPluginLoadingFailure uses fixed ports to invoke peer process.

This may cause ""bind: address already in use"", but the test result does not explicitly indicate it.

 
{noformat}
go test -count 1 github.com/hyperledger/fabric/cmd/peer -run '^TestPluginLoadingFailure$'
--- FAIL: TestPluginLoadingFailure (5.64s)
    main_test.go:52:
        No future change is possible.  Bailing out early after 0.061s.
        Expected
            <int>: 1
        to match exit code:
            <int>: 2
    --- FAIL: TestPluginLoadingFailure/ENDORSERS_ESCC (0.45s)
        testing.go:820: test executed panic(nil) or runtime.Goexit: subtest may have called FailNow on a parent test
FAIL
FAIL	github.com/hyperledger/fabric/cmd/peer	5.926s{noformat}
We can avoid this error by using available ports instead of fixed ports like other unit tests.",,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s4k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yoheiueda,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"20/Jun/19 2:32 PM;yoheiueda;My CR is: https://gerrit.hyperledger.org/r/c/fabric/+/31998;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove duplicate code snippet across tests for ledgermgmt initialization Creation,FAB-15771,40709,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,20/Jun/19 3:18 PM,09/Jul/19 2:30 AM,28/Oct/23 3:08 AM,09/Jul/19 2:30 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,,,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwzwk:i",,,,Unset,Unset,Next Items- Ledger,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 5:58 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/31999/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add unit tests to raft start sequence,FAB-15772,40712,,Task,To Do,FAB,Fabric,software,denyeart,,,Medium,,,tock,tock,20/Jun/19 4:51 PM,22/Jan/20 1:11 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,Future,,,,,,,,,,0,ipm,,,,,"On orderer/consensus/etcdraft package:
 # add a test case to consenter_test.go 
i.e. on When(""the consenter is asked for a chain"", func() \{...}
 # add a test case(s) to chain_test.go
set support.Height > 1
set Opt.MigrationInit=true
make fresh=true
start, check stuff ",,tock,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zt",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),tock,xwu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Backfill tests for core/peer,FAB-15773,40719,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,sykesm,sykesm,21/Jun/19 12:13 AM,13/Jan/20 10:59 PM,28/Oct/23 3:08 AM,,v2.0.0,,,,,,,,,,,,,Future,,,,fabric-peer,,,,,,0,ipm,,,,,"With the rework of the core/peer package, we need to pay some attention to the tests.",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14324,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:92",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"06/Sep/19 4:03 AM;MHBauer;Is this a ""get coverage up"" type task or are there tests to take from some other location to be adapted to this pkg?

Is this specific to core/peer pkg, or are sub directory pkgs included?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add migration doc to What's new,FAB-15774,40721,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,joe-alewine,joe-alewine,joe-alewine,21/Jun/19 12:33 AM,07/Jan/20 6:53 AM,28/Oct/23 3:08 AM,07/Jan/20 6:53 AM,v1.4.0,,,,,,,,,,,,,v1.4.0,,,,fabric-docs,,,,,,0,,,,,,"Need to add another entry to the What's New doc to point to the migration doc. Additionally, need to add release notes to the end of What's New",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s6s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"21/Jun/19 12:45 AM;joe-alewine;https://gerrit.hyperledger.org/r/c/fabric/+/32004;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Skip gossip unit tests unless a change is made in the packages,FAB-15775,40722,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,dereckluo,sykesm,sykesm,21/Jun/19 12:48 AM,12/Jul/19 10:36 AM,28/Oct/23 3:08 AM,12/Jul/19 10:36 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,ipm,,,,,"Given how frequently we see flakes in gossip, we need to change our unit test process to skip the gossip package unless the latest commit has made changes to gossip.

This will reduce the unit test execution time and should reduce the number of test failures we observe in this component.

This decision was made during a conversation with [~denyeart] and [~mastersingh24].",,MHBauer,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mth:f",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 12:28 AM;sykesm;Acceptance: CR builds will not test gossip if a gossip package was not changed. CR builds will test gossip if a gossip package has changed.;;;","03/Jul/19 1:48 AM;MHBauer;Is there a big list of current flakes? My list has rapidly dwindled, and I don't see a lot of reports on where the flakes are being hit. If there's some specific tests causing problems, we need to know about them so we can target them for fixes.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE update mutual TLS enrollment ca path with connection profile,FAB-15776,40727,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,21/Jun/19 3:45 AM,22/Jun/19 12:14 AM,28/Oct/23 3:08 AM,22/Jun/19 12:14 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Update PTE mutual TLS enrollment ca path with connection profile,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00s7o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"21/Jun/19 4:09 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/32008;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add migrate mode to operator tool for migrating consensus type to raft,FAB-15777,40729,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,21/Jun/19 4:07 AM,31/Jul/19 3:41 AM,28/Oct/23 3:08 AM,31/Jul/19 3:41 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add migrate mode to NL for migrating consensus type to raft,,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|hzwqrk:i",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Jun/19 5:09 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32199/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
NPE observed in gossip service UT,FAB-15778,40732,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,yacovm,yacovm,21/Jun/19 5:53 AM,14/Jan/20 3:13 AM,28/Oct/23 3:08 AM,10/Jul/19 8:57 PM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"From:
https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13160/console


{code:java}
23:02:31 ok  	github.com/hyperledger/fabric/gossip/protoext	0.007s	coverage: 95.1% of statements
23:02:44 2019-06-20 20:02:36.093 UTC [gossip.service] loadGossipConfig -> WARN 001 Configuration key peer.gossip.pvtData.transientstoreMaxBlockRetention isn't set, defaulting to 1000
23:02:44 2019-06-20 20:02:36.095 UTC [gossip.gossip#127.0.0.1:46283] NewGossipService -> WARN 002 External endpoint is empty, peer will not be accessible outside of its organization
23:02:44 2019-06-20 20:02:38.108 UTC [gossip.comm] func1 -> WARN 003 1.2.3.4:42336, PKIid:3132372e302e302e313a3432333336 isn't responsive: rpc error: code = Unavailable desc = transport is closing
23:02:44 2019-06-20 20:02:38.108 UTC [gossip.discovery#127.0.0.1:40596] expireDeadMembers -> WARN 004 Entering [3132372e302e302e313a3432333336]
23:02:44 2019-06-20 20:02:38.108 UTC [gossip.discovery#127.0.0.1:40596] expireDeadMembers -> WARN 005 Closing connection to Endpoint: 1.2.3.4:42336, InternalEndpoint: 127.0.0.1:42336, PKI-ID: 3132372e302e302e313a3432333336, Metadata: 
23:02:44 2019-06-20 20:02:38.108 UTC [gossip.discovery#127.0.0.1:40596] expireDeadMembers -> WARN 006 Exiting
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 007 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 008 Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 009 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 00a Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 00b Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 00c Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.gossip#p0] UpdateLedgerHeight -> WARN 00d No such channel [99 104 97 110 66]
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 00e Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.privdata] loadPrivDataConfig -> WARN 00f Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
23:02:44 2019-06-20 20:02:40.100 UTC [gossip.gossip#p1] UpdateLedgerHeight -> WARN 010 No such channel [99 104 97 110 66]
23:02:44 2019-06-20 20:02:44.104 UTC [gossip.privdata] loadPrivDataConfig -> WARN 011 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
23:02:44 2019-06-20 20:02:44.104 UTC [gossip.privdata] loadPrivDataConfig -> WARN 012 Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
23:02:44 2019-06-20 20:02:44.104 UTC [gossip.privdata] loadPrivDataConfig -> WARN 013 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
23:02:44 2019-06-20 20:02:44.104 UTC [gossip.privdata] loadPrivDataConfig -> WARN 014 Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
23:02:44 2019-06-20 20:02:44.105 UTC [gossip.comm] sendToEndpoint -> WARN 015 Failed obtaining connection for 127.0.0.1:43450, PKIid:3132372e302e302e313a3433343530 reason: Shutting down
23:02:44 panic: runtime error: invalid memory address or nil pointer dereference
23:02:44 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xf13e76]
23:02:44 
23:02:44 goroutine 440 [running]:
23:02:44 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).dispatch(0xc0001a6870, 0x0, 0x0)
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:361 +0x26
23:02:44 created by github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:352 +0x1ee
23:02:44 panic: runtime error: invalid memory address or nil pointer dereference
23:02:44 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xf13e76]
23:02:44 
23:02:44 goroutine 442 [running]:
23:02:44 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).dispatch(0xc0001a6870, 0x0, 0x0)
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:361 +0x26
23:02:44 created by github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:352 +0x1ee
23:02:44 panic: runtime error: invalid memory address or nil pointer dereference
23:02:44 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xf13e76]
23:02:44 
23:02:44 goroutine 438 [running]:
23:02:44 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).dispatch(0xc0001a6870, 0x0, 0x0)
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:361 +0x26
23:02:44 created by github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:352 +0x1ee
23:02:44 panic: runtime error: invalid memory address or nil pointer dereference
23:02:44 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xf13e76]
23:02:44 
23:02:44 goroutine 439 [running]:
23:02:44 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).dispatch(0xc0001a6870, 0x0, 0x0)
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:361 +0x26
23:02:44 created by github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen
23:02:44 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:352 +0x1ee
23:02:44 FAIL	github.com/hyperledger/fabric/gossip/service	8.098s
23:02:44 ?   	github.com/hyperledger/fabric/gossip/service/mocks	[no test files]
23:03:55 ok  	github.com/hyperledger/fabric/gossip/state	33.274s	coverage: 77.9% of statements
23:03:58 ok  	github.com/hyperledger/fabric/gossip/state/mocks	0.019s	coverage: 55.6% of statements
23:04:04 ok  	github.com/hyperledger/fabric/gossip/util	4.058s	coverage: 73.5% of statements
23:04:05 Makefile:199: recipe for target 'unit-test' failed
23:04:05 make: *** [unit-test] Error 1
 {code}",,MHBauer,wlahti,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15804,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00s8s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,wlahti,yacovm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jun/19 2:33 AM;wlahti;Hit this flake four times yesterday. Somehow missed this item while searching and opened (duplicate) JIRA item FAB-15804. ;;;","03/Jul/19 4:41 AM;MHBauer;code has been changed, so I think the location has moved, but I get something similar

=== RUN   TestWithStaticDeliverClientLeader
2019-07-02 12:30:59.330 PDT [gossip.comm] func1 -> WARN 002 127.0.0.1:64573, PKIid:3132372e302e302e313a3634353733 isn't responsive: rpc error: code = Unavailable desc = transport is closing
2019-07-02 12:30:59.330 PDT [gossip.discovery#127.0.0.1:64574] expireDeadMembers -> WARN 003 Entering [3132372e302e302e313a3634353733]
2019-07-02 12:30:59.330 PDT [gossip.discovery#127.0.0.1:64574] expireDeadMembers -> WARN 004 Closing connection to Endpoint: 1.2.3.4:64573, InternalEndpoint: 127.0.0.1:64573, PKI-ID: 3132372e302e302e313a3634353733, Metadata:
2019-07-02 12:30:59.330 PDT [gossip.discovery#127.0.0.1:64574] expireDeadMembers -> WARN 005 Exiting
2019-07-02 12:31:01.318 PDT [gossip.privdata] loadPrivDataConfig -> WARN 006 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
2019-07-02 12:31:01.318 PDT [gossip.privdata] loadPrivDataConfig -> WARN 007 Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
2019-07-02 12:31:01.319 PDT [gossip.privdata] loadPrivDataConfig -> WARN 008 Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
2019-07-02 12:31:01.319 PDT [gossip.privdata] loadPrivDataConfig -> WARN 009 Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
2019-07-02 12:31:01.321 PDT [gossip.privdata] loadPrivDataConfig -> WARN 00a Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
2019-07-02 12:31:01.321 PDT [gossip.privdata] loadPrivDataConfig -> WARN 00b Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
2019-07-02 12:31:01.321 PDT [gossip.gossip#p0] UpdateLedgerHeight -> WARN 00c No such channel [99 104 97 110 66]
2019-07-02 12:31:01.322 PDT [gossip.privdata] loadPrivDataConfig -> WARN 00d Configuration key peer.gossip.pvtData.reconcileSleepInterval isn't set, defaulting to 1m0s
2019-07-02 12:31:01.322 PDT [gossip.privdata] loadPrivDataConfig -> WARN 00e Configuration key peer.gossip.pvtData.reconcileBatchSize isn't set, defaulting to 10
2019-07-02 12:31:01.323 PDT [gossip.gossip#p1] UpdateLedgerHeight -> WARN 00f No such channel [99 104 97 110 66]
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0x4a9ae34]

goroutine 408 [running]:
github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).dispatch(0xc00025e3f0, 0x0, 0x0)
	/Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state.go:306 +0x34
created by github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen
	/Users/mhb/go/src/github.com/hyperledger/fabric/gossip/state/state.go:297 +0x2f8
exit status 2
FAIL	github.com/hyperledger/fabric/gossip/service	14.889s;;;","03/Jul/19 5:29 AM;MHBauer;Read from a closed channel returns nil.
;;;","03/Jul/19 5:35 AM;MHBauer;https://gerrit.hyperledger.org/r/#/c/fabric/+/32167/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Migrate from kafka to raft while traffic is running on multiple channels in network,FAB-15779,40739,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,21/Jun/19 10:03 PM,09/Aug/19 12:52 AM,28/Oct/23 3:08 AM,09/Aug/19 12:51 AM,v1.4.2,v2.0.0,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Create a network with 5 orderers, 5 kafka brokers, 3 zookeepers and 1 org with 1 peer

Create 100 channels, join peer to channel, install and instantiate samplecc and start sending invokes

While traffic is running, then migrate kafka to raft by following steps on orderer system channel and all 100 application channels:
 * Config update to change state from NORMAL to MAINTENANCE with kafka consensus type and leaving metadata to null
 * Config update with etcdraft as consensus type and raft metadata
 * Restart Ordering nodes and verify orderer logs for leader election
 * Config update to change state back to NORMAL from MAINTENANCE

*Once completed, verify the following:*
 * Send new transactions to verify invokes and send queries on all 100 channels",,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16259,,,,,,,,,FAB-15760,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i000e1:4",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 12:03 PM;scottz;This was tested in v1.4.2 and passed.

Opened a clone to automate in v2.0 system test suite with k8s.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cannot find package in hyperledger/fabric/core/chaincode/shim for Chaincode packaging in BYFN test,FAB-15780,40740,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,yukkyhira,vijaypunugubati,vijaypunugubati,21/Jun/19 10:23 PM,02/Jul/19 7:42 PM,28/Oct/23 3:08 AM,02/Jul/19 7:42 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ci-failure,,,,,"Error: error getting chaincode bytes: Error obtaining dependencies for github.com/hyperledger/fabric/core/chaincode/shim

Branch: master

Node: x86_64 & s390x

Error Snippet: 
{code:java}
/CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
00:15:22.679 CORE_PEER_ADDRESS=peer0.org1.example.com:7051
00:15:22.679 CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock
00:15:22.679 + peer lifecycle chaincode package mycc.tar.gz --path github.com/hyperledger/fabric-samples/chaincode/abstore/go/ --lang golang --label mycc_1
00:15:22.901 + res=1
00:15:22.901 + set +x
00:15:22.903 Error: error getting chaincode bytes: Error obtaining dependencies for github.com/hyperledger/fabric/core/chaincode/shim: command <go list -f {{ join .Deps ""\n""}} github.com/hyperledger/fabric/core/chaincode/shim>: failed with error: ""exit status 1""
00:15:22.903 can't load package: package github.com/hyperledger/fabric/core/chaincode/shim: cannot find package ""github.com/hyperledger/fabric/core/chaincode/shim"" in any of:
00:15:22.903 	/usr/local/go/src/github.com/hyperledger/fabric/core/chaincode/shim (from $GOROOT)
00:15:22.903 	/opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim (from $GOPATH)
00:15:22.903 
00:15:22.903 !!!!!!!!!!!!!!! Chaincode packaging on peer0.org1 has failed !!!!!!!!!!!!!!!!
00:15:22.903 ========= ERROR !!! FAILED to execute End-2-End Scenario ===========/ code placeholder
{code}
Builds: [https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-x86_64/150/console]

[https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-s390x/143/consoleFull
] [https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-master-x86_64/171/console] [|https://jenkins.hyperledger.org/view/Daily/job/fabric-end-2-end-daily-master-s390x/143/consoleFull]",,btl5037,denyeart,vijaypunugubati,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/19 3:17 PM;yukkyhira;fabric-peer-log.png;https://jira.hyperledger.org/secure/attachment/17362/fabric-peer-log.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sak:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,vijaypunugubati,yukkyhira,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/19 3:18 PM;yukkyhira;The fix for this JIRA has been already committed.

The following change was caused this issue.

 [[FAB-15732] Remove shim and protos filter in platform|http://example.com/]

[After reverted the change on 22nd Jun|https://github.com/hyperledger/fabric/commit/aa9340311e159777b067d132e103285f6d703367], the smoke test has passed again.

In first-network env on my local machine, I've also checked the test result with fabric-peer that is before or after the reverting.
 * hyperledger/fabric master branch #af155f6 {color:#de350b}Fail{color}
 * hyperledger/fabric master branch #4c7b8a1 {color:#00875a}Pass{color}

!fabric-peer-log.png|width=720!

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Please provide more background information on what peer chaincode install is actually doing,FAB-15781,40743,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mlohr,mlohr,22/Jun/19 12:46 AM,04/Sep/20 12:13 AM,28/Oct/23 3:08 AM,,v1.4.0,,,,,,,,,,,,,,,,,fabric-docs,fabric-peer,,,,,0,help-wanted,,,,,"Hey,

I'm new to Hyperledger Fabric and maybe I missed it in the documentation, but I tried to find it several times, so either it's not there, it's well hidden or I'm too stupid ;)

I started with Hyperledger Fabric to set up a blockchain network with a certain smart contract for testing/research purposes. I'm familiar with go, docker and docker-compose, so my first impression was that it should be quite easy to understand how hyperledger works. Then I came started with understanding how chaincode things are working, and I had several (but wrong) impressions about how thinks could work. For me, a lot of things were unclear for me:
 * Does ""peer chaincode install"" just add a pointer (link) to my chaincode source code or does it copy the code?
 * Where is the compiling done, host system, peer container, smart contract container?
 * Which container does need which volume for accessing my code?

A small sentence in the documentation, like the following would in my opinion, significantly clear thinks up, so maybe you could add it somewhere:
{quote}""peer chaincode install"" collects the chaincode sources and sends it to the peer node (therefore, the node where the peer command is located needs read access to the chaincode sources). When first used (e.g. for instantiating),  the peer creates a new container for this chaincode and copies the sources to this container. After that, the compiling is done in this newly created chaincode container. Finally, the compiled chaincode is started in the chaincode container.
{quote}
I know some people struggling with the same, so maybe this could help to improve documentation to make thinks more clear. After understanding this part of hyperledger, it was like ""Ok, that's quite simple"" for me.

Best regards
Matthias",,coderdude,MHBauer,mlohr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrho:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),coderdude,MHBauer,mlohr,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Jun/19 5:42 AM;yacovm;*Q:* Does ""peer chaincode install"" just add a pointer (link) to my chaincode source code or does it copy the code?

*A*: It grabs your code, packages it, and then puts it into the file system of the peer. In v2.0 it's a tar file of your code, wrapped inside another tar file, IIRC.

*Q:* Where is the compiling done, host system, peer container, smart contract container?

*A:* The compilation is done on demand. When the peer receives a command that is either an invoke or an init (instantiate) and a chaincode container image for the container doesn't exist, it spins another container to compile it, and then creates another chaincode container that is the real chaincode container and puts the compiled binary from the first container, into that second container.

*Q*: Which container does need which volume for accessing my code?

*A:* The chaincode container is self contained and doesn't need to access your source code.;;;","27/Jun/19 3:37 AM;mlohr;Thank you so much for clarification!

I can imagine there are more people wondering about the same things. Maybe you could add this to the documentation?;;;","27/Jun/19 3:45 AM;yacovm;Maybe you can do it? It seems like a good opportunity for a first contribution and we value and encourage new contributors :) 

 

[https://hyperledger-fabric.readthedocs.io/en/release-1.4/CONTRIBUTING.html]

https://hyperledger-fabric.readthedocs.io/en/release-1.4/submit_cr.html

 ;;;","03/Sep/20 11:02 PM;coderdude;Hello
[~yacovm] 
Is this still open?
Can I work on this one?;;;","04/Sep/20 12:13 AM;yacovm;No idea if this is still open but be my guest ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric Samples Builds Chaincode Inside Fabric Tools Image,FAB-15782,40744,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,btl5037,btl5037,22/Jun/19 1:11 AM,03/Aug/19 12:41 AM,28/Oct/23 3:08 AM,03/Aug/19 12:41 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,ipm,,,,,"Currently Fabric Samples creates a CLI container from the Fabric-Tools image. It mounts the chaincode inside the container and calls `peer lifecycle chaincode package`.

Fabric recently merged a change that removes the shim and protos package from the ccenv image. This means that the shim, peer protos and their dependencies must either be vendored in the chaincodes package, or exist in the GOPATH. We also removed the filter that excluded the Shim and Protos package from the `chaincode package` ""autovendoring"" process.

The issue in Fabric Samples is that the Chaincode is mounted into the CLI container where there is no hope of Fabric existing. Fabric cant be cloned locally inside the container before calling the package process because the directory is already populated by the cryptographic material. And Fabric can't be mounted into the container because the GOPATH could potentially contain multiple paths, i.e., `/usr/go:/usr/local/go:/Users/user/go` unless you first discern where Fabric exists on the GOPATH before mounting the volume.

The Fabric Samples team needs to come up with a solution that will allow for the existence of Fabric, whether that be inside the container on the GOPATH, or, packaging the chaincode outside of the CLI and then mounting the chaincode package into the container, which requires Fabric to be on the local GOPATH. We already require the users to have the binaries on their system PATH as part of the Fabric Samples prerequisites, so building it outside the container is not an unreasonable things to ask.

Fabric's new chaincode packaging model will require the dependencies to be prevendored, or exist on the GOPATH, so having developers who are running Fabric Samples have to do the same process is reasonable, given it will be expected of them when developing.

We will also need to update Fabric Samples doc to inform developers they need to clone Fabric into their GOPATH locally, if samples doesn't provide another means for packaging the chaincode.

You can test this issue by simply running ./byfn.sh up. However we have backed out the changes which cause this to break. We will reintroduce the changes, but gate them with a environment variable `CHAINCODE_VENDORSHIM` which if set to true will take the path that breaks the packaging process. You will be able to test your changes by setting this flag in your environment, whether that be locally outside of Fabric Tools, or in side of the Fabric Tools container.",,btl5037,mastersingh24,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15732,FAB-5177,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:ruii",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,mastersingh24,ymlbright,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 10:52 PM;mastersingh24;The strategy here will be to use Go modules functionality by adding a go.mod to each Go chaincode sample.
After that, we'll add a *go mod vendor* command to the various scripts;;;","25/Jun/19 10:53 PM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric-samples/+/32064;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Container for chaincode built but chaincode list --instantiated -C mychannel returns empty list,FAB-15783,40745,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Test Error,,marcello_romani_ocyan,marcello_romani_ocyan,22/Jun/19 1:18 AM,27/Jun/19 11:10 PM,28/Oct/23 3:08 AM,27/Jun/19 11:10 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"I have a H/F network deployed on Kubernetes, composed of two orderers and two peers.
The peers use CouchDB as state backend.
The Fabric version I'm using is 1.4.0

I have a simple {{go}} chaincode that I can deploy and instantiate but not invoke, as it doesn't show up in the list of the instantiated chaincodes.

I omit the install command for brevity.

The instantiate command succeeds:
{noformat}
export CORE_PEER_ADDRESS=peer0.my.network:443
peer chaincode instantiate -n <ccname> -v <ccversion> -C mychannel -c <args> --tls --cafile /path/to/pem
{noformat}

When issuing the instantiate command, the k8s logs for the {{peer0}} POD report:

{noformat}
2019-06-21 12:27:20.849 UTC [chaincode] LaunchConfig -> DEBU 1059 launchConfig: executable:""chaincode"",Args:[chaincode,-peer.address=10.0.3.216:7052],Envs:[CORE_CHAINCODE_LOGGING_LEVEL=info,CORE_CHAINCODE_LOGGING_SHIM=warning,CORE_CHAINCODE_LOGGING_FORMAT=%{color}%{time:2006-01-02 15:04:05.000 MST} [%{module}] %{shortfunc} -> %{level:.4s} %{id:03x}%{color:reset} %{message},CORE_CHAINCODE_ID_NAME=helloworldcc:v17,CORE_PEER_TLS_ENABLED=false],Files:[]
2019-06-21 12:27:20.849 UTC [chaincode] Start -> DEBU 105a start container: helloworldcc:v17
2019-06-21 12:27:20.849 UTC [chaincode] Start -> DEBU 105b start container with args: chaincode -peer.address=10.0.3.216:7052
2019-06-21 12:27:20.849 UTC [chaincode] Start -> DEBU 105c start container with env:
	CORE_CHAINCODE_LOGGING_LEVEL=info
	CORE_CHAINCODE_LOGGING_SHIM=warning
	CORE_CHAINCODE_LOGGING_FORMAT=%{color}%{time:2006-01-02 15:04:05.000 MST} [%{module}] %{shortfunc} -> %{level:.4s} %{id:03x}%{color:reset} %{message}
	CORE_CHAINCODE_ID_NAME=helloworldcc:v17
	CORE_PEER_TLS_ENABLED=false
2019-06-21 12:27:20.849 UTC [container] lockContainer -> DEBU 105d waiting for container(helloworldcc-v17) lock
2019-06-21 12:27:20.849 UTC [container] lockContainer -> DEBU 105e got container (helloworldcc-v17) lock
2019-06-21 12:27:20.850 UTC [dockercontroller] stopInternal -> DEBU 105f stopping container {""id"": ""nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:20.850 UTC [dockercontroller] stopInternal -> DEBU 1060 stop container result {""error"": ""No such container: nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:20.850 UTC [dockercontroller] stopInternal -> DEBU 1061 killing container {""id"": ""nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:20.851 UTC [dockercontroller] stopInternal -> DEBU 1062 kill container result {""id"": ""nid1-peer0-mynetwork-helloworldcc-v17"", ""error"": ""No such container: nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:20.851 UTC [dockercontroller] stopInternal -> DEBU 1063 removing container {""id"": ""nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:20.851 UTC [dockercontroller] stopInternal -> DEBU 1064 remove container result {""id"": ""nid1-peer0-mynetwork-helloworldcc-v17"", ""error"": ""No such container: nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:20.851 UTC [dockercontroller] createContainer -> DEBU 1065 create container {""imageID"": ""nid1-peer0-mynetwork-helloworldcc-v17-2d3074b2c8e2609cb5e37d98427c86bcb2cab06d7c6db38afcec728f7093fc52"", ""containerID"": ""nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:20.851 UTC [dockercontroller] getDockerHostConfig -> DEBU 1066 docker container hostconfig NetworkMode: host
2019-06-21 12:27:20.853 UTC [chaincode.platform] GenerateDockerfile -> DEBU 1067
FROM hyperledger/fabric-baseos:amd64-0.4.14
ADD binpackage.tar /usr/local/bin
LABEL org.hyperledger.fabric.chaincode.id.name=""helloworldcc"" \
      org.hyperledger.fabric.chaincode.id.version=""v17"" \
      org.hyperledger.fabric.chaincode.type=""GOLANG"" \
      org.hyperledger.fabric.version=""1.4.0"" \
      org.hyperledger.fabric.base.version=""0.4.14""
ENV CORE_CHAINCODE_BUILDLEVEL=1.4.0
2019-06-21 12:27:20.855 UTC [chaincode.platform.golang] GenerateDockerBuild -> INFO 1068 building chaincode with ldflagsOpt: '-ldflags ""-linkmode external -extldflags '-static'""'
2019-06-21 12:27:20.855 UTC [chaincode.platform.util] DockerBuild -> DEBU 1069 Attempting build with image hyperledger/fabric-ccenv:latest
2019-06-21 12:27:22.403 UTC [gossip.election] waitForInterrupt -> DEBU 106a c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Exiting
2019-06-21 12:27:22.459 UTC [gossip.election] IsLeader -> DEBU 106b c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Returning true
2019-06-21 12:27:22.493 UTC [msp] GetDefaultSigningIdentity -> DEBU 106c Obtaining default signing identity
2019-06-21 12:27:22.493 UTC [msp.identity] Sign -> DEBU 106d Sign: plaintext: 12096D796368616E6E656C1804A20132...120C08F7C38BDAB7BD8DD515106C1801
2019-06-21 12:27:22.493 UTC [msp.identity] Sign -> DEBU 106e Sign: digest: 7892305A8F9EBF350A271D4356D2D789A3BBA190185B7380EECBF020A1717350
2019-06-21 12:27:22.496 UTC [gossip.election] waitForInterrupt -> DEBU 106f c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Entering
2019-06-21 12:27:23.605 UTC [msp] GetDefaultSigningIdentity -> DEBU 1070 Obtaining default signing identity
2019-06-21 12:27:23.605 UTC [msp.identity] Sign -> DEBU 1071 Sign: plaintext: 18012A330A221A20C0DCB14894E9C787...6C120D08F7D3C4978BB58DD51510F402
2019-06-21 12:27:23.605 UTC [msp.identity] Sign -> DEBU 1072 Sign: digest: 4427785A085140D2CA45935FFDC7EA9C8DAF53F02A45EAACBADF51A82594723C
2019-06-21 12:27:23.605 UTC [msp] GetDefaultSigningIdentity -> DEBU 1073 Obtaining default signing identity
2019-06-21 12:27:23.605 UTC [msp.identity] Sign -> DEBU 1074 Sign: plaintext: 0A0F31302E302E332E3231363A37303531
2019-06-21 12:27:23.605 UTC [msp.identity] Sign -> DEBU 1075 Sign: digest: 6FCDC791755967AEF545A99BDF3E954E1C9E6249489E1905D6EDBD00BCE195D1
2019-06-21 12:27:24.516 UTC [gossip.discovery] periodicalReconnectToDead -> DEBU 1076 Sleeping 25s
2019-06-21 12:27:24.586 UTC [msp] GetDefaultSigningIdentity -> DEBU 1077 Obtaining default signing identity
2019-06-21 12:27:24.586 UTC [msp.identity] Sign -> DEBU 1078 Sign: plaintext: 18012A330A221A20C0DCB14894E9C787...6C120D08F7D3C4978BB58DD51510F502
2019-06-21 12:27:24.586 UTC [msp.identity] Sign -> DEBU 1079 Sign: digest: 373BEB535E9EAD679E241D908B745392BEEB9C85B885D90786C9A76F1D10444B
2019-06-21 12:27:24.586 UTC [msp] GetDefaultSigningIdentity -> DEBU 107a Obtaining default signing identity
2019-06-21 12:27:24.586 UTC [msp.identity] Sign -> DEBU 107b Sign: plaintext: 0A0F31302E302E332E3231363A37303531
2019-06-21 12:27:24.586 UTC [msp.identity] Sign -> DEBU 107c Sign: digest: 6FCDC791755967AEF545A99BDF3E954E1C9E6249489E1905D6EDBD00BCE195D1
2019-06-21 12:27:24.586 UTC [gossip.discovery] periodicalSendAlive -> DEBU 107d Sleeping 5s
2019-06-21 12:27:26.340 UTC [gossip.privdata] run -> DEBU 107e Start reconcile missing private info
2019-06-21 12:27:26.340 UTC [leveldbhelper] GetIterator -> DEBU 107f Getting iterator for range [[]byte{0x6d, 0x79, 0x63, 0x68, 0x61, 0x6e, 0x6e, 0x65, 0x6c, 0x0, 0x4, 0x8}] - [[]byte{0x6d, 0x79, 0x63, 0x68, 0x61, 0x6e, 0x6e, 0x65, 0x6c, 0x0, 0x4, 0x8}]
2019-06-21 12:27:26.340 UTC [gossip.privdata] reconcile -> DEBU 1080 Reconciliation cycle finished successfully. no items to reconcile
2019-06-21 12:27:27.531 UTC [gossip.election] waitForInterrupt -> DEBU 1081 c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Exiting
2019-06-21 12:27:27.531 UTC [gossip.election] IsLeader -> DEBU 1082 c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Returning true
2019-06-21 12:27:27.531 UTC [msp] GetDefaultSigningIdentity -> DEBU 1083 Obtaining default signing identity
2019-06-21 12:27:27.531 UTC [msp.identity] Sign -> DEBU 1084 Sign: plaintext: 12096D796368616E6E656C1804A20132...120C08F7C38BDAB7BD8DD515106D1801
2019-06-21 12:27:27.531 UTC [msp.identity] Sign -> DEBU 1085 Sign: digest: A6FCCA5CBC5CA2AFA5BCADFF48784431F01364535513DE6B9BDF3B30AA9D214E
2019-06-21 12:27:27.533 UTC [gossip.election] waitForInterrupt -> DEBU 1086 c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Entering
2019-06-21 12:27:27.617 UTC [msp] GetDefaultSigningIdentity -> DEBU 1087 Obtaining default signing identity
2019-06-21 12:27:27.617 UTC [msp.identity] Sign -> DEBU 1088 Sign: plaintext: 18012A330A221A20C0DCB14894E9C787...6C120D08F7D3C4978BB58DD51510F602
2019-06-21 12:27:27.617 UTC [msp.identity] Sign -> DEBU 1089 Sign: digest: F6CF87A896945F468B101C1EEAD4D86E5481EDEB757B7F00CEE721F9634B0AD4
2019-06-21 12:27:27.617 UTC [msp] GetDefaultSigningIdentity -> DEBU 108a Obtaining default signing identity
2019-06-21 12:27:27.617 UTC [msp.identity] Sign -> DEBU 108b Sign: plaintext: 0A0F31302E302E332E3231363A37303531
2019-06-21 12:27:27.617 UTC [msp.identity] Sign -> DEBU 108c Sign: digest: 6FCDC791755967AEF545A99BDF3E954E1C9E6249489E1905D6EDBD00BCE195D1
2019-06-21 12:27:29.587 UTC [msp] GetDefaultSigningIdentity -> DEBU 108d Obtaining default signing identity
2019-06-21 12:27:29.587 UTC [msp.identity] Sign -> DEBU 108e Sign: plaintext: 18012A330A221A20C0DCB14894E9C787...6C120D08F7D3C4978BB58DD51510F702
2019-06-21 12:27:29.587 UTC [msp.identity] Sign -> DEBU 108f Sign: digest: C92704E2A755F0FB1F1B636A448340CD231579BE01DCCAC8D01CC217D6EEB8B6
2019-06-21 12:27:29.587 UTC [msp] GetDefaultSigningIdentity -> DEBU 1090 Obtaining default signing identity
2019-06-21 12:27:29.587 UTC [msp.identity] Sign -> DEBU 1091 Sign: plaintext: 0A0F31302E302E332E3231363A37303531
2019-06-21 12:27:29.587 UTC [msp.identity] Sign -> DEBU 1092 Sign: digest: 6FCDC791755967AEF545A99BDF3E954E1C9E6249489E1905D6EDBD00BCE195D1
2019-06-21 12:27:29.587 UTC [gossip.discovery] periodicalSendAlive -> DEBU 1093 Sleeping 5s
2019-06-21 12:27:30.586 UTC [chaincode.platform.util] DockerBuild -> DEBU 1094 Build output is # idv
/tmp/go-link-282808672/000001.o: In function `pluginOpen':
/workdir/go/src/plugin/plugin_dlopen.go:19: warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-282808672/000021.o: In function `mygetgrouplist':
/workdir/go/src/os/user/getgrouplist_unix.go:16: warning: Using 'getgrouplist' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-282808672/000020.o: In function `mygetgrgid_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:38: warning: Using 'getgrgid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-282808672/000020.o: In function `mygetgrnam_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:43: warning: Using 'getgrnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-282808672/000020.o: In function `mygetpwnam_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:33: warning: Using 'getpwnam_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-282808672/000020.o: In function `mygetpwuid_r':
/workdir/go/src/os/user/cgo_lookup_unix.go:28: warning: Using 'getpwuid_r' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/tmp/go-link-282808672/000006.o: In function `_cgo_18049202ccd9_C2func_getaddrinfo':
/tmp/go-build/cgo-gcc-prolog:49: warning: Using 'getaddrinfo' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
2019-06-21 12:27:31.618 UTC [msp] GetDefaultSigningIdentity -> DEBU 1095 Obtaining default signing identity
2019-06-21 12:27:31.618 UTC [msp.identity] Sign -> DEBU 1096 Sign: plaintext: 18012A330A221A20C0DCB14894E9C787...6C120D08F7D3C4978BB58DD51510F802
2019-06-21 12:27:31.618 UTC [msp.identity] Sign -> DEBU 1097 Sign: digest: 4592B387C3A76105362698A5880349843A09570FFF410171D3FC7D5D1D1194D4
2019-06-21 12:27:31.618 UTC [msp] GetDefaultSigningIdentity -> DEBU 1098 Obtaining default signing identity
2019-06-21 12:27:31.618 UTC [msp.identity] Sign -> DEBU 1099 Sign: plaintext: 0A0F31302E302E332E3231363A37303531
2019-06-21 12:27:31.618 UTC [msp.identity] Sign -> DEBU 109a Sign: digest: 6FCDC791755967AEF545A99BDF3E954E1C9E6249489E1905D6EDBD00BCE195D1
2019-06-21 12:27:32.533 UTC [gossip.election] waitForInterrupt -> DEBU 109b c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Exiting
2019-06-21 12:27:32.533 UTC [gossip.election] IsLeader -> DEBU 109c c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Returning true
2019-06-21 12:27:32.533 UTC [msp] GetDefaultSigningIdentity -> DEBU 109d Obtaining default signing identity
2019-06-21 12:27:32.533 UTC [msp.identity] Sign -> DEBU 109e Sign: plaintext: 12096D796368616E6E656C1804A20132...120C08F7C38BDAB7BD8DD515106E1801
2019-06-21 12:27:32.533 UTC [msp.identity] Sign -> DEBU 109f Sign: digest: 92E573B8F00A1040E5459661D2606BD8F6C95121A9C71D70036CDE475ED37DB6
2019-06-21 12:27:32.533 UTC [gossip.election] waitForInterrupt -> DEBU 10a0 c0dcb14894e9c78780e3950ea1170cb7b09a862422fc5fc1e4c77c93ec767f6c : Entering
2019-06-21 12:27:32.564 UTC [dockercontroller] deployImage -> DEBU 10a1 Created image: nid1-peer0-mynetwork-helloworldcc-v17-2d3074b2c8e2609cb5e37d98427c86bcb2cab06d7c6db38afcec728f7093fc52
2019-06-21 12:27:32.564 UTC [dockercontroller] createContainer -> DEBU 10a2 create container {""imageID"": ""nid1-peer0-mynetwork-helloworldcc-v17-2d3074b2c8e2609cb5e37d98427c86bcb2cab06d7c6db38afcec728f7093fc52"", ""containerID"": ""nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:32.565 UTC [dockercontroller] getDockerHostConfig -> DEBU 10a3 docker container hostconfig NetworkMode: host
2019-06-21 12:27:32.623 UTC [dockercontroller] createContainer -> DEBU 10a4 created container {""imageID"": ""nid1-peer0-mynetwork-helloworldcc-v17-2d3074b2c8e2609cb5e37d98427c86bcb2cab06d7c6db38afcec728f7093fc52"", ""containerID"": ""nid1-peer0-mynetwork-helloworldcc-v17""}
2019-06-21 12:27:32.810 UTC [dockercontroller] Start -> DEBU 10a5 Started container nid1-peer0-mynetwork-helloworldcc-v17
2019-06-21 12:27:32.810 UTC [container] unlockContainer -> DEBU 10a6 container lock deleted(helloworldcc-v17)
2019-06-21 12:27:32.826 UTC [chaincode] handleMessage -> DEBU 10a7 [] Fabric side handling ChaincodeMessage of type: REGISTER in state created
2019-06-21 12:27:32.826 UTC [chaincode] HandleRegister -> DEBU 10a8 Received REGISTER in state created
2019-06-21 12:27:32.826 UTC [chaincode] Register -> DEBU 10a9 registered handler complete for chaincode helloworldcc:v17
2019-06-21 12:27:32.826 UTC [chaincode] HandleRegister -> DEBU 10aa Got REGISTER for chaincodeID = name:""helloworldcc:v17"" , sending back REGISTERED
2019-06-21 12:27:32.827 UTC [chaincode] HandleRegister -> DEBU 10ab Changed state to established for name:""helloworldcc:v17""
2019-06-21 12:27:32.827 UTC [chaincode] sendReady -> DEBU 10ac sending READY for chaincode name:""helloworldcc:v17""
2019-06-21 12:27:32.827 UTC [chaincode] sendReady -> DEBU 10ad Changed to state ready for chaincode name:""helloworldcc:v17""
2019-06-21 12:27:32.827 UTC [chaincode] Launch -> DEBU 10ae launch complete
2019-06-21 12:27:32.827 UTC [chaincode] Execute -> DEBU 10af Entry
2019-06-21 12:27:32.827 UTC [chaincode] handleMessage -> DEBU 10b0 [2da2620e] Fabric side handling ChaincodeMessage of type: COMPLETED in state ready
2019-06-21 12:27:32.827 UTC [chaincode] Notify -> DEBU 10b1 [2da2620e] notifying Txid:2da2620e22076b33e1de11f4af7c5cafc8af79a6f6c25aa1c895b456ee7154c2, channelID:mychannel
2019-06-21 12:27:32.827 UTC [chaincode] Execute -> DEBU 10b2 Exit
2019-06-21 12:27:32.827 UTC [endorser] callChaincode -> INFO 10b3 [mychannel][2da2620e] Exit chaincode: name:""lscc""  (11983ms)
2019-06-21 12:27:32.827 UTC [lockbasedtxmgr] GetTxSimulationResults -> DEBU 10b4 Simulation completed, getting simulation results
2019-06-21 12:27:32.827 UTC [lockbasedtxmgr] Done -> DEBU 10b5 Done with transaction simulation / query execution [2da2620e22076b33e1de11f4af7c5cafc8af79a6f6c25aa1c895b456ee7154c2]
2019-06-21 12:27:32.828 UTC [endorser] SimulateProposal -> DEBU 10b6 [mychannel][2da2620e] Exit
{noformat}

I've read the log carefully and from my understanding:
* the chaincode conatiner is successfully built
* the chaincode container is successfully started
* no information about the started chaincode container is added to couchdb

I've also looked around the kubernetes cluster but I couldn't find traces of the chaincode container or its image.

*UPDATE*

I managed to access the docker server on the K8s worker node, and the images are built, the container running. The 'chaincode' binary inside the container seems to be stuck while trying to send a {{REGISTER}} message to the peer node 7052 port

*UPDATE 2*

The {{REGISTER}} message is received and acknowledged by the peer, but the chaincode is not registered within couchdb.",,denyeart,marcello_romani_ocyan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sb8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,marcello_romani_ocyan,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/19 11:08 PM;denyeart;After the chaincode instantiation is endorsed, the client (CLI) should submit the endorsed instantiation transaction to orderer, and then this gets distributed to all peers in a block who will commit the instantiation.  I see no evidence that these follow-on steps happened in the peer log.  Please troubleshoot whether the endorsed instantiation transaction gets submitted to orderer and that a block gets cut.;;;","27/Jun/19 11:10 PM;denyeart;From looking at stack overflow, it looks like you identified that orderer endpoint config was wrong in the channel config. 

[~marcello_romani_ocyan] Please close issues after they are resolved.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add ENV Variable to enable the dropping of shim filtering,FAB-15784,40746,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,btl5037,btl5037,22/Jun/19 2:19 AM,23/Jan/20 7:32 AM,28/Oct/23 3:08 AM,23/Jan/20 7:32 AM,,,,,,,,,,,,,,,,,,,,,,,,0,stale-item,,,,,,,btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sbg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"23/Jan/20 7:32 AM;sykesm;Stale;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Identify Alternatives for Behave Tests for lifecycle.feature,FAB-15785,40747,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,22/Jun/19 4:11 AM,19/Jul/19 1:38 AM,28/Oct/23 3:08 AM,19/Jul/19 1:35 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Refer to tab ""Behave Testcases"" in shared google sheet https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741 to analyze and identify test coverage gaps to fill by writing tests elsewhere, for the Behave tests listed in:

Items: 45-66
Topic: fabric-test/feature/lifecycle.feature",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15819,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|hzwqsf:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jun/19 6:02 AM;scottz;I created FAB-15189 to write replacements for the tests which are not covered anywhere, as identified in the spreadsheet and in the new jira testtask.

The bigger issue about what scenarios are covered by the node-sdk and java-sdk integration tests, and what they _should_ cover, will be handled under separate tasks.;;;","19/Jul/19 1:38 AM;scottz;After further discussion, and analysis with Will, and after finding some tests covered in existing UT and IT tests, we decided we needed to create new tests for only these items: 46, 48, 49, 53, 60.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Update ""channelTX"" path in ""template-create.json"" in PTE",FAB-15786,40748,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,rameshthoomu,rameshthoomu,22/Jun/19 4:48 AM,25/Jun/19 10:31 PM,28/Oct/23 3:08 AM,25/Jun/19 10:31 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"""channelTX"" path in template-create.json file needs to be modified to src/github.com/hyperledger/fabric-test/fabric/internal/cryptogen/channel-artifacts/_CHANNELNAME_.tx"" as the updated networklauncher go script is generating and keeping channel artifacts in the above-said directory.",,dongming,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00sbw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,rameshthoomu,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"24/Jun/19 10:44 PM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/32046;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gossip comm conn.go hygiene - simplify internal stream handling,FAB-15787,40751,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,MHBauer,MHBauer,MHBauer,22/Jun/19 3:33 PM,26/Mar/20 6:04 AM,28/Oct/23 3:08 AM,26/Mar/20 6:04 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,hygiene,,,,,"some dead-ish code and non-idiomatic go to refactor away.

I was looking at this file as a whole while looking at the stack-traces for a bug.",,MHBauer,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15424,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zy",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),MHBauer,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/19 12:07 PM;MHBauer;Had a merge, but there's still some follow up to do.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
code hygine: rm ifApplicable from addBlockCommitHashIfApplicable(),FAB-15788,40752,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,23/Jun/19 12:23 AM,27/Jul/19 11:48 AM,28/Oct/23 3:08 AM,01/Jul/19 1:19 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,"IfApplicable in addBlockCommitHashIfApplicable() makes the function bit long and might be unnecessary.  Hence, remove ifApplicable and make it addBlockCommitHash()",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sck:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rename method `addLastConfigSignature` -> `addLastConfig`,FAB-15789,40755,38847,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,guoger,guoger,guoger,24/Jun/19 4:22 PM,25/Jun/19 5:37 AM,28/Oct/23 3:08 AM,25/Jun/19 5:37 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,,,,,,method does not insert signature anymore,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sd8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/19 10:51 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/32043;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document org-specific implicit private data collections for use in user chaincodes,FAB-15790,40756,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,denyeart,denyeart,24/Jun/19 6:03 PM,10/Dec/19 12:50 AM,28/Oct/23 3:08 AM,10/Dec/19 12:50 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Org-specific implicit private data collections can be used in user chaincodes, need to document it.",,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17135,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-10889,,,No,,Unset,No,,,"1|i008rj:iwx4r",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Complete design document for validation refactor,FAB-15791,40757,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,denyeart,denyeart,24/Jun/19 6:05 PM,02/Aug/19 10:55 PM,28/Oct/23 3:08 AM,02/Aug/19 10:54 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,, https://docs.google.com/document/d/1BBVA8u-GJ99ZYRT015PAnMVK4_pKv53Y-kiP9lZX8Gc/edit,,denyeart,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-12221,,,No,,Unset,No,,,"1|i008rq:zzzi",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,yoheiueda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A description of a hyperledger fabric solution incorporating identity management would be very useful,FAB-15792,40759,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,odowdaibm,davidkel,davidkel,24/Jun/19 7:28 PM,13/Jan/21 4:20 AM,28/Oct/23 3:08 AM,13/Jan/21 4:20 AM,,,,,,,,,,,,,,,,,,fabric-docs,,,,,,0,external,,,,,"Hyperledger fabric is a component in an overall solution but it's not always clear how one might want to address identity management between an end user and the default X509 based MSP implementation provided in hyperledger fabric.

It would be very handy to have a description showing a basic solution scenario that covers this.",,davidkel,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00se4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkel,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/19 3:21 AM;pandrejko;We've gotten multiple requests for this kind of content. I am looking at prioritizing it into our workflow.;;;","11/Oct/19 1:27 AM;pandrejko;Gari has suggested we also fold in this information [https://stackoverflow.com/a/58282441/6160507];;;","13/Jan/21 4:19 AM;pandrejko;We created a new [MSP Key concept topic |https://hyperledger-fabric.readthedocs.io/en/latest/membership/membership.html#msp-structure] along with a Fabric [CA Registering and Enrolling identities|https://hyperledger-fabric-ca.readthedocs.io/en/release-1.4/deployguide/use_CA.html] topic which I believe addresses this and Gari's suggestion as well.
Closing.;;;","13/Jan/21 4:20 AM;pandrejko;Already done.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
read consenter metadata from signed field,FAB-15794,40761,38847,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,24/Jun/19 9:07 PM,08/Jul/19 11:20 PM,28/Oct/23 3:08 AM,08/Jul/19 11:20 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sek:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/19 10:51 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/32044;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
stop writing to ORDERER metadata field,FAB-15795,40762,38847,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,24/Jun/19 9:08 PM,08/Jul/19 11:20 PM,28/Oct/23 3:08 AM,08/Jul/19 11:20 PM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,,,,,,,,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ses:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/19 10:51 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/32045;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Labels are not multi-line formatted in generated documentation for metrics,FAB-15796,40765,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,24/Jun/19 10:59 PM,25/Jun/19 7:49 AM,28/Oct/23 3:08 AM,25/Jun/19 7:49 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,ipm-planned,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sfg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Jun/19 11:00 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32047 [FAB-15796] fix formatting of label values;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"rollback: verification of commit hash, reset and rollback with private db using manual test",FAB-15797,40767,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,24/Jun/19 11:15 PM,01/Aug/19 12:26 PM,28/Oct/23 3:08 AM,01/Aug/19 12:26 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Purpose: verification of commit hash, reset and rollback using manual test

Network configuration:
    Orgs: O1, O2
    Peers: <O1, P1>, <O2, P2>
    Peer logging level: info
    Channels: <P1, C1|C2|C3> <P2, C1|C2|C3>

Transactions:
    Send all endorsement requests to P1 only

Steps:
1. start the network with fabric 1.4 with capability 1.4.2 enabled
1.2 Submit a few transactions
1.2 Observation:
    - each block commit, both peer would have commit hash (verify via logs)

2. Stop peers and orderer
2.1 Stop all peers and orderer
2.2 On P1, execute rollback command for channel C1 to block zero
2.3 On P1, execute rollback command for channel C2 to a random block
2.4 On P2, execute reset command
2.5 restart the peers
2.6 Observation:
    - send endorsements to
      <P1, C1|C2> and <P2, C1|C2|C3>
       They shall fail.
    - send endorsements to
      <P1, C3> (Q. does peer endorsement works if not connected to orderer?)
       They shall succeed.

3. Start orderer
3.1 Start the orderer
3.2 Observation:
    - query block height from all peers to ensure that all peers reach the original height
    - send endorsement to all peers on all channels to ensure success
    - query private data on all peers to ensure that they are available in all the peers
    - <P1, C1> blocks contain commit hash (verify via logs)
    - <P2, C1|C2|C3> blocks contain commit hash (verify via logs)
    - Commit Hash For last block in <P1, C1> matches the commit hash for last block in <P2, C2> (verify via logs)

",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16159,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i00sfw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,"1. start the network with fabric 1.4 with capability 1.4.2 enabled
1.2 Submit a few transactions
1.2 Observation:
    - each block commit, both peer would have commit hash (verify via logs)
    results: peer log shows commit has for every block

2. Stop peers and orderer
2.1 Stop all peers and orderer
2.2 On P1, execute rollback command for channel C1 to block zero
2.3 On P1, execute rollback command for channel C2 to a random block
2.4 On P2, execute reset command
2.5 restart the peers
2.6 Observation:
    - send endorsements to <P1, C1|C2> and <P2, C1|C2|C3>
       results: endorsement failed for <P1, C2|C3> and <P2, C1|C2|C3>.
    - send endorsements to <P1, C3>
       results: endorsement send to P1, C3 successfully.

3. Start orderer
3.1 Start the orderer
3.2 Observation:
    - query block height from all peers to ensure that all peers reach the original height
    results: after restart the peer and ledger restoration completed, query block height from all peers show that all peers block heights were restored to original values
    - send endorsement to all peers on all channels to ensure success
    results: send endorsement to all peers on all channels successfully.
    - query private data on all peers to ensure that they are available in all the peers
    results: query some private data on all peers successfully
    - <P1, C1> blocks contain commit hash (verify via logs)
    results: <P1, C1> peer log shows that contains commit hash.
    - <P2, C1|C2|C3> blocks contain commit hash (verify via logs)
    results: <P2, C1|C2|C3> peer log shows that blocks contain commit hash.
    - Commit Hash For last block in <P1, C1> matches the commit hash for last block in <P2, C1> (verify via logs)
    results: commit hash between P1 and P2 match.",System Test,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 12:15 PM;scottz;Passed in v1.4.2.
We will open a different one to automate and rerun rollback tests in v2.0 as part of system test suite in k8s.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
rollback: System crash test: during reset and rollback,FAB-15798,40768,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,24/Jun/19 11:25 PM,01/Aug/19 12:28 PM,28/Oct/23 3:08 AM,01/Aug/19 12:26 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Purpose: System crash test: during reset and rollback

Network configuration:
    Orgs: O1, O2
    Peers: <O1, P1>, <O2, P2>
    Channels: <P1, C1> <P2, C1>

Transactions:
    Send all endorsement requests to P1 only

Steps:
1. Setting
1.1 Setup a network with above configuration with 1.4 binary
1.2 Enable capability 1.4.2
1.3 Submit transactions with private data to create a decently large (2,000 blocks) blockchain
1.4 Shutdown P2

2. crash during rollback
2.1 loop 3 times on P2
         - Execute rollback command to 1,000 block
         - Crash the process while rolling back (before restart P2, query P2 block height to ensure that it has not reached original height)
         - Re-execute the rollback command
         - Restart P2

2.2 Observation
         - See below common observation

3. crash during rollback again
3.1 loop 3 times on P2
         - Execute rollback command
         - Crash the process while rolling back

4. Restart P2
4.1 Observation
         - send endorsement requests to P2 and it shall fail till peer reaches original height
         - query block height from P2 to ensure that it eventually reaches the original height
         - block  in <P2, C1> matches the commit hash for last block in <P1, C1> (verify via logs)
         - query private data from P2 to ensure that all data (including private data) exists on P2
         - Take a note of the time taken in rollback/reset
         - Take a note of the time taken in reprocessing

5. Repeat above with Reset command",,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16159,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,Manual,,Unset,No,,,"1|i00sg4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,"         - send endorsement requests to P2 and it shall fail till peer reaches original height
         results: endorsement requests to P2 failed until the peer reaches original height
         - query block height from P2 to ensure that it eventually reaches the original height
         results: query block height from P2 shows the block height reaches the original height
         - block  in <P2, C1> matches the commit hash for last block in <P1, C1> (verify via logs)
         results: the peer logs from P1 and P2 show they have the same commit hash
         - query private data from P2 to ensure that all data (including private data) exists on P2
         results: query private data from P2 successfully and returned the same value as it queried from P1
         - Take a note of the time taken in rollback/reset
         results: rollback 1000 blocks with 33565 transactions with 8B payload, it takes 2 min 44 sec to rollback
         - Take a note of the time taken in reprocessing
          results: it takes 7 min 35 sec to restore 1000 blocks as above.",System Test,,(Please add usage information),dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate TLS issues between Kafka and orderer,FAB-15799,40770,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,guoger,sykesm,sykesm,25/Jun/19 12:35 AM,01/Jul/19 10:43 PM,28/Oct/23 3:08 AM,01/Jul/19 10:43 PM,v1.4.1,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,ipm-planned,,,,"There have been reports on Rocket Chat of issues connecting to Kafka from the orderer with TLS. We need to make sure we have test cases in place to exercise that path and, if bugs are found, fix them back to release 1.4.",,jiwanglai,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15825,,FAB-15825,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mth:a",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jiwanglai,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer/channel/create ignores errors,FAB-15800,40775,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Done,dereckluo,sykesm,sykesm,25/Jun/19 3:38 AM,22/Jul/19 12:25 PM,28/Oct/23 3:08 AM,22/Jul/19 12:25 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,help-wanted,ipm,,,,"channel/create error processing needs to be reviewed. For example, the following in {{sanityCheckAndSignConfigTx}}.

{code}
	configSig.Signature, err = signer.Sign(util.ConcatenateBytes(configSig.SignatureHeader, configUpdateEnv.ConfigUpdate))

	configUpdateEnv.Signatures = append(configUpdateEnv.Signatures, configSig)
{code}

Where error checks are missing, handling should be added. Where tests are warranted, tests should be added.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:rr",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE adds channel name to query block log,FAB-15801,40776,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,dongming,dongming,25/Jun/19 4:42 AM,16/Jul/19 6:00 AM,28/Oct/23 3:08 AM,16/Jul/19 6:00 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add channel name to query block log to enhance readability,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00shg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"16/Jul/19 3:17 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/32337;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PTE code is not reading the channel information from the ""connection profile"" file.",FAB-15802,40777,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Won't Do,,rameshthoomu,rameshthoomu,25/Jun/19 5:36 AM,11/Jan/21 2:35 AM,28/Oct/23 3:08 AM,11/Jan/21 2:35 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Observed that the existing PTE code does not read the channel information provided in the connection profile file.

Is this one symptom of a bigger problem? (If not, then pardon my confusion and go ahead and delete this paragraph.) Just reading and counting channels and orgs and peers, etc, is not good enough for us to be able to run traffic at any connectionprofile network. We should read in and use the actual names throughout PTE code.",,btl5037,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16240,,,No,,Unset,No,,,"1|hzznys:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jan/21 2:10 AM;btl5037;As part of backlog grooming closing issue as stale. Issue can be reopened in the future.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade to v1.4.2,FAB-15803,40778,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,25/Jun/19 5:50 AM,24/Jul/19 10:22 PM,28/Oct/23 3:08 AM,24/Jul/19 10:22 PM,v1.4.2,,,,,,,,,,,,,,,,,fabric-quality,fabric-samples,,,,,0,,,,,,"Revise and add functionality to add v1_4_2 capabilities for channel and orderer groups in [https://github.com/hyperledger/fabric-samples/blob/master/first-network/scripts/upgrade_to_v14.sh|https://github.com/hyperledger/fabric-samples/blob/master/first-network/scripts/upgrade_to_v12.sh]",,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00shw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jun/19 11:30 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-samples/+/32059/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent test failure due to (GossipStateProviderImpl).dispatch,FAB-15804,40779,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,wlahti,wlahti,25/Jun/19 6:52 AM,26/Jun/19 2:32 AM,28/Oct/23 3:08 AM,26/Jun/19 2:32 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{code:java}
 16:56:22 panic: runtime error: invalid memory address or nil pointer dereference*16:56:22* [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xf27120]16:56:22 
16:56:22 goroutine 14917 [running]:
16:56:22 github.com/hyperledger/fabric/gossip/state.(GossipStateProviderImpl).dispatch(0xc002b85050, 0x0, 0x0)*
16:56:22 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:306 +0x30*
16:56:22* created by github.com/hyperledger/fabric/gossip/state.(GossipStateProviderImpl).listen*
16:56:22 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:297 +0x20c*
16:56:22* FAIL github.com/hyperledger/fabric/gossip/state 33.088s{code}

  

Hit twice today.

[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13233/console]",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15778,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00si4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"25/Jun/19 6:56 AM;wlahti;Also hit here:
{code:java}
16:54:20 panic: runtime error: invalid memory address or nil pointer dereference
16:54:20 [signal SIGSEGV: segmentation violation code=0x1 addr=0x28 pc=0xf15da6]
16:54:20 
16:54:20 goroutine 403 [running]:
16:54:20 github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).dispatch(0xc0003fad80, 0x0, 0x0)
16:54:20 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:306 +0x26
16:54:20 created by github.com/hyperledger/fabric/gossip/state.(*GossipStateProviderImpl).listen
16:54:20 	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/state/state.go:297 +0x1ee
16:54:20 FAIL	github.com/hyperledger/fabric/gossip/service	6.061s {code}
[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13234/console];;;","25/Jun/19 7:44 AM;wlahti;Hit again: 

[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13242/console]

and again: 

[https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13243/console];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
code hygine: introduce func for missingData in test,FAB-15805,40781,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,25/Jun/19 10:57 AM,27/Jul/19 11:49 AM,28/Oct/23 3:08 AM,01/Jul/19 1:19 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-ledger,,,,,,0,,,,,,"Currently, we are generating the missingPvtData and pass to the test helper in kvledger e2e test. Instead, we can have a function on the test helper to add the missingPvtData.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sic:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Useless error log when server tls handshake failed,FAB-15806,40782,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,ymlbright,ymlbright,25/Jun/19 11:37 AM,02/Jul/19 5:48 PM,28/Oct/23 3:08 AM,30/Jun/19 7:57 PM,v1.4.0,v1.4.1,,,,,,,,,,,,,,,,fabric-common,,,,,,0,common-components,,,,,"Orderer/Peer output useless error log when server tls handshake fail; it may caused by scan or other reason. User may mistakenly think that there is a problem with the node.

 

Use WARN maybe better

 
2019-06-24 17:13:15.624 UTC [core.comm] ServerHandshake -> ERRO 5fc88 TLS handshake failed with error EOF \{""server"": ""PeerServer"", ""remote address"": ""*""}
2019-06-24 17:13:15.627 UTC [core.comm] ServerHandshake -> ERRO 5fc89 TLS handshake failed with error tls: first record does not look like a TLS handshake \{""server"": ""PeerServer"", ""remote address"": ""*""}
 ",,mastersingh24,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sik:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"30/Jun/19 7:57 PM;mastersingh24;This is not a bug as this is the intended design.  The error log message was added because many times clients fail to connect and it is difficult to debug.  Without this message, you'll generally only see ""context cancelled"" in the logs (which is not helpful).
;;;","02/Jul/19 5:48 PM;ymlbright;I agree with you, but I suggest that we use an WARN log level instead of ERRO log level. Default log level is INFO in node, user can still find those helpful information in log. It‘s a little strange that Fabric node which are scanned by port scanner (such as Nmap)  print a lot of ERRO log.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fork MSP implementation to prepare the ground for version 1.4.2,FAB-15807,40783,39710,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,angelo.decaro,angelo.decaro,25/Jun/19 4:51 PM,17/Jul/19 1:12 AM,28/Oct/23 3:08 AM,17/Jul/19 1:12 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sis:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"17/Jul/19 1:12 AM;denyeart;Decided not to fork MSP in v1.4.x release. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
optimization: add index for txValidationFlags in block metadata,FAB-15808,40784,41592,Sub-task,To Do,FAB,Fabric,software,denyeart,,,Medium,,Senthil1,Senthil1,Senthil1,25/Jun/19 5:20 PM,25/Nov/19 11:28 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,v2.1.0,,,,fabric-ledger,,,,,,0,,,,,,"To identify whether a pvtData is belong to a valid or invalid transaction, we need the persisted txValidationFlags. Note that we cannot rely on GetTxValidationCodeByTxID due to the duplicate txIDs.",,denyeart,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sj0:",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Nov/19 11:36 PM;denyeart;[~manish-sethi] What do you recommend here?;;;","22/Nov/19 4:16 AM;manish-sethi;[~denyeart] - It took me a while to recollect about this. Luckly, I could find more context ([https://gerrit.hyperledger.org/r/#/c/fabric/+/30624/28/core/ledger/kvledger/kv_ledger.go@620)] that would help understand this.

Since the metadata indexing is planned as a part of larger refactoring under FAB-16190, and the benefits of this optimization would be limited to the reconciliation path, I would make this task to leverage when FAB-16190 is done.

So, IMO, this can be made as a dependent of FAB-16190.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Update to Go 1.12,FAB-15809,40786,37993,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,mastersingh24,mastersingh24,25/Jun/19 6:00 PM,25/Jun/19 9:39 PM,28/Oct/23 3:08 AM,25/Jun/19 9:39 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,,,,,,Need to update ci.properties,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sjg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jun/19 6:14 PM;mastersingh24;ttps://gerrit.hyperledger.org/r/c/fabric-samples/+/32062;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Backup/Restore - deprioritize fetching of a missing pvtData after multiple retries,FAB-15810,40790,,Story,Closed,FAB,Fabric,software,denyeart,,,High,Done,Senthil1,Senthil1,Senthil1,25/Jun/19 11:04 PM,18/Sep/20 10:50 AM,28/Oct/23 3:08 AM,18/Sep/20 10:50 AM,,,,,,,,,,,,,,v2.2.1,v2.3.0,,,fabric-gossip,fabric-ledger,,,,,0,operator,,,,,"Reconciler fetches the missing pvtData from other peers. Reconciliation should be intelligent enough to not retry pulling private data forever, based on some new configuration settings.

This may be important in the following scenarios:
 * private data is not available on any collection member, either because it was missing from the start, the peers that had the private data have gone away from the network, or peers had archived old blocks or have been more recently bootstrapped from a later snapshot.
 * with the introduction of rollback, there is a possibility of invalid pvtData transaction becoming valid (after a potential bug fix and rollback) which would result in the permantent loss of pvtData.
 * In some network level backup/restore scenarios, it may be acceptable to restore peers to a lower height than ordering service, implying that the private data between the heights is now missing.

When the user tries to read missing private state from the stateDB, it returns an error.",,denyeart,manish-sethi,robmurgai,Senthil1,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16225,,,,,,FAB-18024,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-5108,,,No,,Unset,No,,,"1|i00wur:0idr",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,manish-sethi,robmurgai,Senthil1,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"27/Jul/20 12:01 PM;denyeart;As a refresher on how reconciler works...
* In each reconciliation cycle, peer with missing private data will attempt to reconcile the last 10 blocks with missing private data (configurable with reconcileBatchSize)
* It will attempt to pull from each of the available remote peers that are members of the collection, one at a time in random order ( see loop at https://github.com/hyperledger/fabric/blob/release-2.2/gossip/privdata/pull.go#L261 , note the same logic is used for regular block commit private data pulling and reconciler pulling, the only difference is that block commit attempts remote peers for pullRetryThreshold, while reconciliation attempts each remote peer once).
* If none of the remote peers provides the data, reconciler will go back to sleep, with warning message ""reconcile -> WARN 159 missing private data is not available on other peers""
* If the missing data was successfully retrieved, the same reconciler cycle will attempt to reconcile the prior 10 blocks with missing private data. ""reconcile -> INFO 177 Reconciliation cycle finished successfully. reconciled 1 private data keys from blocks range [21 - 21]""

If the reconcileSleepInterval is fairly long, having permanently missing private data is not much of a burden on the peer or network, since peer will only attempt one pull per remote peer per reconciliation cycle.  Any newer missing private data will get reconciled first, before attempting the older permanently missing private data, so the older permanently missing private data will not block progress.

The peer admin can at any time turn reconciler off with ""reconciliationEnabled"" configuration property.

I'm thinking the solution should be kept as simple as possible, perhaps a new peer configuration setting like ""reconciliationAttempts"" to go along with ""reconciliationEnabled""  true.  If the peer can't reconcile private data for a given block range after N attempts, stop attempting.  If there is newer missing private data, the reconciler can attempt to retrieve the newer data N more times. This would be an in memory counter only, so that peer restart would reset the attempts so that peer can try again after restarting. This way if the missing private data is not available for a time, but then becomes available at a later time (e.g. a peer went offline for a period of time), it can still be reconciled later at the next peer restart, rather than forever lost.

This approach keeps things simple since there would be no changes to persisted data (e.g. no permanent retirement or tracking attempts across peer restarts).;;;","27/Jul/20 7:36 PM;Senthil1;* Instead of using new and old private data, we need to consider active and inactive data. The missing private data associated with block 10 can still be active while the current block height is 100k.
 * If all members are contacted successfully and no one is giving the requested data, can't we assume that the data is lost forever and remove those missing entries from the private data store? We could also move these entries to a separate store to keep track of missing active data.
 * If some members are unreachable and others are not giving the requested data, the retry mechanism without removing the missing entries makes sense. However, we need to have a certain limit before making them lost forever.
 * Assume that a peer has joined a new collection and the private data associated with the latest block N is missing forever (for some reason). The peer can never fetch any private data if we stop attempting reconciliation for block <= N.;;;","28/Jul/20 2:53 AM;denyeart;_If all members are contacted successfully and no one is giving the requested data, can't we assume that the data is lost forever and remove those missing entries from the private data store?_

The issue is that a remote peer with the private data may simply be offline for a day. We don't want to automatically give up forever.

_Assume that a peer has joined a new collection and the private data associated with the latest block N is missing forever (for some reason). The peer can never fetch any private data if we stop attempting reconciliation for block <= N._

Good point. So we won't be able to keep it as simple as I hoped. Per our discussion we'll need to put the private data that can't yet be reconciled into a lower priority queue to try later, while the main reconciliation continues for the private data that hasn't been attempted yet.;;;","30/Jul/20 12:23 AM;Senthil1;*Background*
 # The reconciler periodically fetches _missingDataInfo_ associated with the most recent N blocks from the private data store.
 # For each _missingEntry_ [blkNum, txNum, Ns, Coll], the reconciler fetches the collectionConfig and passes a map[missingEntry]collectionConfig to the private data puller.
 # The private data puller uses the collectionConfig to check which peers are members and which are not (peer signed data is verified against the membership policy defined in the collectionConfig to check the membership). Note that gossip maintains the current active peers in each channel.
 # The private data puller splits the active peers who are members of each collectionConfig into two sets: preferred and others.
 # The preferred peers are in the collection from the time the data was created. The other peers are also collection members but not at the time the data was created (low chances for them to have this missing data, probably, they are also running the reconciler). The priority is given to all preferred peers before moving to other peers.
 # Once peers per collectionConfig are collected, the private data puller first checks whether any member peer has already purged the missing data. Even if a single member has purged the data, the puller adds the missing data to PurgedElements and does not try to fetch it from any peers.
 # For each missing data, the puller assigns a peer (as per the order in the priority list) and try to fetch it.
 # Once the puller assigns a peer per missing data, it sends the request to peers and waits for the response. Whichever missing data did not receive a response, the puller retries with the remaining peer members until no more eligible peers or no more missing data.
 # If no peer in the network is a member of the collection associated with the missing data, puller skips the missing entry.
 # Finally, the puller returns _fetchedData_ and _purgedData_ to the reconciler. The reconciler call the ledger to store only the fetchedData.**

*Reconciler will be able to provide the following information to the ledger:*
 # fetched data
 # purged data by any single member — security issue to trust any single peer?
 # still missing data because no member is active — can happen due to network partitioning or members left the channel?
 # still missing data though all members are active — very rare. Can happen when all peers are acting as malicious.

To tag still missing data with either (3) or (4), we need to make changes to private data puller which does not look like a cakewalk.

*What the ledger can do with the above information:*
 # Fetched data would be used to fill the missing entries
 # Purged data can be moved to a separate namespace called `to-be-purged-missing-data` — no need to process them but delete it as per the purge schedule (if the block height of the peer is too behind).
 # If some data could not be fetched because all or some members are unreachable, we can move those data to a bucket and do exponential back-off.
 # If some data could not be fetched though all members are active, we can still move those data to a bucket and do exponential back-off assuming that not all peers per organization are active.

*To simplify the solution, we can make the reconciler pass only the following information without any tags:*
 # fetched data
 # purged data
 # still missing data

*Solution Approach*
 # Three namespaces at the pvtdata store – _missing,_ _tried, and to-be-purged_ (just tentative names).
 # The reconciler will pass both fetchedData and toBePurgedData.
 # The PvtDataStore will keep the list of missing data given to the reconciler so that it can find out which data are still missing.
 # The still-missing pvtdata will be moved to the _tried_ namespace.
 # The fetchedData will be used to fill the missing data and toBePrugedData will be moved to the _to-be-purged namespace_.
 # For still missing data, we can use a cache library that supports time to live and a callback on eviction.
 ## We can move these still missing data from missing namespace to _tried_.
 ## We can store these still missing data in the cache and set a time to live.
 ## When the time to live expires for an entry, the callback function would be called which will move the the entry from _tried_ to the missing namespace.
 ## To enable exponential back-off, we will store the entry with value as the number of retries performed so far in the same cache (with no time to live). Using this value, we will set actual time to live after the retry.

*An Alternative Solution Approach Proposed By* [~manish-sethi]  ** 
 # The First 5 steps are still the same (some possible changes to _to-be-purged_ namespace)
 # For every N number of iterations of reconciliation, the pvtdata will give an opportunity to missing data entries present in the _tried_ namespace.
 # If the data are still missing, the priority of those entries in the _tried_ namespace will be reduced.
 ## In order to assign priorities, we will have multiple _tried_ namespaces each prefixed with a number.
 ## The lower number denotes a high priority. Hence, to lower the priority of certain missing entries, the entries will be moved from one _tried-#_ namespace to another.
 ## If there is no such namespace with such a priority, a new namespace will be created.
 ## The priority of missing entries will be lowered after every retry.

Comparison:
| |*Approach 1*|*Approach 2*|
|Disk Writes|Low|Low to High|
|Memory Usage|Low to High|Low|
|Time-Based|Yes|Approximately|
|On Peer Failure|Knowledge is Lost|Knowledge is Preserved|
|Dependency|Caching Library|None|
|Coding Complexity|?|?|

 

As Approach 2 has better advantages over approach 1, we will go with approach 2.;;;","30/Jul/20 2:32 AM;denyeart;I agree with Approach 2. To keep things simple, the first implementation will have a single _tried_ namespace. This will address the most critical issue of permanently missing private data from blocking other private data reconciliation.

It should also be possible to configure the frequency or altogether disable the processing of the _tried_ items.;;;","02/Sep/20 2:36 AM;manish-sethi;https://github.com/hyperledger/fabric/pull/1721;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
channelconfig.BundleSource always returns a nil reference for mspManager,FAB-15811,40793,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,25/Jun/19 11:50 PM,27/Jun/19 4:09 AM,28/Oct/23 3:08 AM,27/Jun/19 3:47 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,,,,,,"The Bundle object includes an mspManager field that is never set. The BundleSource has an MSPManager method that returns the value of that field as the result.

The Bundle object gets the MSP manager from the channel config.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00skk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jun/19 12:24 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32067 [FAB-15811] remove unreferenced mspManager field;;;","26/Jun/19 12:25 AM;sykesm;1.4 cherry pick: https://gerrit.hyperledger.org/r/c/fabric/+/32069;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IOError: File name too long - because too long names of some behave testscases,FAB-15812,40794,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,vijaypunugubati,vijaypunugubati,26/Jun/19 12:24 AM,10/Jul/19 10:55 PM,28/Oct/23 3:08 AM,10/Jul/19 10:55 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,,,,,"The names of the testscases on the fabric-test/feature/chaincodes.feature file (and possibly others) are too long. When the error logfile is printed, this name is included with some other paths and things into a long name that causes an error in the behave framework when trying to report the error results.: we are seeing: *IOError [Errno 36] File name too long*

The testcase Scenario title for the snippet below is: *FAB-5797:_Test_chaincode_fabric-test_chaincodes_example02_go_cmd_deploy,_invoke,_and_query_with_chaincode_install_name_in_all_lowercase_uppercase_mixedcase_chars,_for_kafka_orderer*

The snippet below shows one error which appears to be about 296 characters. I suspect we may need to shorten the title by about 40 characters to fit inside 256 chars - but the assigned person should determine the exact number and adjust this and other lengthy testcase titles accordingly.

*Branch:* Master

*Error Snippet:* 
{code:java}
/05:50:23.156 IOError: [Errno 36] File name too long: '/tmp/lftools-da.kp0eD4/Behave_Test_Logs/f081d520949a11e9a66efa163eba0777-peer0.org1.example.com-mycc_FAB-5797:_Test_chaincode_fabric-test_chaincodes_example02_go_cmd_deploy,_invoke,_and_query_with_chaincode_install_name_in_all_lowercase_uppercase_mixedcase_chars,_for_kafka_orderer_--_@1.4_.log.gz'/ code placeholder
{code}
*Build log:*

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/284/artifact/gopath/src/github.com/hyperledger/fabric-test/feature/]",,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15813,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sks:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,vijaypunugubati,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"03/Jul/19 4:02 AM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/32160;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode deployment/instantiation fails in daily test suite,FAB-15813,40795,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,sykesm,vijaypunugubati,vijaypunugubati,26/Jun/19 12:51 AM,09/Jul/19 5:54 AM,28/Oct/23 3:08 AM,09/Jul/19 5:54 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,fabric-quality,,,,,0,ci-failure,ipm,,,,"Many tests in fabric-test behave daily test suite started failing around June 19 with the same type of error, possibly at instantiation step. Note: manual retesting confirmed:
* tests {color:#00875A}passed{color} using *fabric* commit b44cb18af07ee4e3a74570ee831cb118a80e61d4 (last one merged June 18 EDT)
* tests {color:#DE350B}failed{color} using *fabric* commit 7a2dffa7944da6b9c9ac136508027665eaa6d159 (last one merged June 19 into fabric)
* Refer to the attached peer log files for comparison.

The error was because the chaincode (named mycc or other) was found missing and not defined on the channel (e.g. mychannel or behavesystest channel). The framework does not halt when it sends the instantiation request, but the error typically shows up in the subsequent step like invoke or query.

Here is a sample sequence of install/instantiation/invoke commands, as seen in the behave_test.log for the first test error (7251):
{code:java}
     [sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/1c7e663c948e11e9a66efa163eba0777/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer1.org2.example.com CORE_PEER_ADDRESS=peer1.org2.example.com:7051 peer chaincode install --name mycc1 --version 0 --lang GOLANG --path github.com/hyperledger/fabric-samples/chaincode/marbles02/go --orderer orderer0.example.com:7050 ""]: {'peer1.org2.example.com': '', 'peer0.org1.example.com': '', 'peer0.org2.example.com': '', 'peer1.org1.example.com': ''}
      [sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/1c7e663c948e11e9a66efa163eba0777/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode instantiate --name mycc1 --version 0 --lang GOLANG --channelID mychannel1 --ctor '{\""Args\"": [\""\""]}' --orderer orderer0.example.com:7050 ""]: {'peer0.org1.example.com': ''}
      Error occurred [u'docker exec cli sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/1c7e663c948e11e9a66efa163eba0777/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode invoke --name mycc1 --orderer orderer0.example.com:7050 --ctor \'{\\""Args\\"": [\\""initMarble\\"",\\""marble100\\"",\\""red\\"",\\""5\\"",\\""cassey\\""]}\' --waitForEvent --channelID mychannel1 --peerAddresses peer0.org1.example.com:7051 ""']: [36m2019-06-22 01:37:55.075 UTC [bccsp_sw] openKeyStore -> DEBU 001[0m KeyStore opened at [/var/hyperledger/configs/1c7e663c948e11e9a66efa163eba0777/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp/keystore]...done
{code}

*Error snippet from behave test output log:*
{code:java}
/ And an admin deploys chaincode at path ""github.com/hyperledger/fabric-samples/chaincode/marbles02/go"" with args [""""] with name ""mycc1"" with language ""GOLANG"" on channel ""mychannel1""                                                                                                                                 # steps/endorser_impl.py:119
    And an admin deploys chaincode at path ""github.com/hyperledger/fabric-samples/chaincode/marbles02/go"" with args [""""] with name ""mycc2"" with language ""GOLANG"" on channel ""mychannel2""                                                                                                                                 # steps/endorser_impl.py:119
    And an admin deploys chaincode at path ""github.com/hyperledger/fabric-samples/chaincode/marbles02/go"" with args [""""] with name ""mycc3"" with language ""GOLANG"" on channel ""mychannel3""                                                                                                                                 # steps/endorser_impl.py:119
    When a user invokes on the channel ""mychannel1"" using chaincode named ""mycc1"" with args [""initMarble"",""marble1"",""green"",""10"",""matt""] on ""peer0.org1.example.com""                                                                                                                                                      # steps/endorser_impl.py:634
    And a user invokes on the channel ""mychannel2"" using chaincode named ""mycc2"" with args [""initMarble"",""marble2"",""yellow"",""20"",""alex""] on ""peer0.org1.example.com""                                                                                                                                                      # steps/endorser_impl.py:634
    And a user invokes on the channel ""mychannel3"" using chaincode named ""mycc3"" with args [""initMarble"",""marble3"",""red"",""5"",""jose""] on ""peer0.org1.example.com""                                                                                                                                                          # steps/endorser_impl.py:634
    When a user queries on the channel ""mychannel1"" using chaincode named ""mycc1"" with args [""queryMarbles"", ""{\\""selector\\"":{\\""docType\\"":\\""marble\\"",\\""owner\\"":\\""matt\\"", \\""color\\"":\\""green\\""}, \\""use_index\\"":[\\""_design/indexdoc_behave_test\\"", \\""index_behave_test\\""]}""] on ""peer0.org1.example.com""  # steps/endorser_impl.py:466
    Then a user receives a response containing ""owner"":""matt""                                                                                                                                                                                                                                                             # steps/endorser_impl.py:1228
      Assertion Failed: Expected response was ""owner"":""matt""; received Error occurred [u'docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/d46f5f6c948e11e9a66efa163eba0777/peerOrganizations/org1.example.com/users/User1@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer chaincode query --name mycc1 --ctor \'{\\""Args\\"": [\\""queryMarbles\\"", \\""{\\\\\\""selector\\\\\\"":{\\\\\\""docType\\\\\\"":\\\\\\""marble\\\\\\"",\\\\\\""owner\\\\\\"":\\\\\\""matt\\\\\\"", \\\\\\""color\\\\\\"":\\\\\\""green\\\\\\""}, \\\\\\""use_index\\\\\\"":[\\\\\\""_design/indexdoc_behave_test\\\\\\"", \\\\\\""index_behave_test\\\\\\""]}\\""]}\' --channelID mychannel1 ""']: Error: endorsement failure during query. response: status:500 message:""make sure the chaincode mycc1 has been successfully defined on channel mychannel1 and try again: chaincode mycc1 not found"" 
      / code placeholder
{code}
It's common error found on almost all test-cases that were broke in the behave-test feature on master.

*Error snippet in peer logs* (this peer happened to become the channel leader for its org, and you can see it immediately encounters errors whereas those errors normally would not occur. Also this was the peer from which we would do the next query - although that happens later on):
{code:java}
/[gossip.election] beLeader -> INFO 03e[0m 67a858c5f86674ad9c5100fed92c9ad5294f1eae4594e01ada8079a2a230d9ba : Becoming a leader
[34m2019-06-22 03:15:28.628 UTC [gossip.service] func1 -> INFO 03f[0m Elected as a leader, starting delivery service for channel behavesystest
[31m2019-06-22 03:15:28.629 UTC [comm] GetDeliverServiceCredentials -> ERRO 040[0m Attempted to obtain root CA certs of an unknown channel: behavesystest
[31m2019-06-22 03:15:28.629 UTC [ConnProducer] NewConnection -> ERRO 041[0m Failed connecting to orderer0.example.com:7050 , error: failed obtaining credentials for channel behavesystest: didn't find any root CA certs for channel behavesystest
[31m2019-06-22 03:15:28.629 UTC [ConnProducer] NewConnection -> ERRO 042[0m Could not connect to any of the endpoints: [orderer0.example.com:7050]
[31m2019-06-22 03:15:28.629 UTC [deliveryClient] connect -> ERRO 043[0m Failed obtaining connection: could not connect to any of the endpoints: [orderer0.example.com:7050]
[33m2019-06-22 03:15:28.629 UTC [deliveryClient] try -> WARN 044[0m Got error: could not connect to any of the endpoints: [orderer0.example.com:7050] , at 1 attempt. Retrying in 1s
[31m2019-06-22 03:15:29.629 UTC [comm] GetDeliverServiceCredentials -> ERRO 045[0m Attempted to obtain root CA certs of an unknown channel: behavesystest
[31m2019-06-22 03:15:29.629 UTC [ConnProducer] NewConnection -> ERRO 046[0m Failed connecting to orderer0.example.com:7050 , error: failed obtaining credentials for channel behavesystest: didn't find any root CA certs for channel behavesystest
[31m2019-06-22 03:15:29.629 UTC [ConnProducer] NewConnection -> ERRO 047[0m Could not connect to any of the endpoints: [orderer0.example.com:7050]
[31m2019-06-22 03:15:29.630 UTC [deliveryClient] connect -> ERRO 048[0m Failed obtaining connection: could not connect to any of the endpoints: [orderer0.example.com:7050]
[33m2019-06-22 03:15:29.630 UTC [deliveryClient] try -> WARN 049[0m Got error: could not connect to any of the endpoints: [orderer0.example.com:7050] , at 2 attempt. Retrying in 2s
[31m2019-06-22 03:15:31.630 UTC [comm] GetDeliverServiceCredentials -> ERRO 04a[0m Attempted to obtain root CA certs of an unknown channel: behavesystest
[31m2019-06-22 03:15:31.630 UTC [ConnProducer] NewConnection -> ERRO 04b[0m Failed connecting to orderer0.example.com:7050 , error: failed obtaining credentials for channel behavesystest: didn't find any root CA certs for channel behavesystest
[31m2019-06-22 03:15:31.630 UTC [ConnProducer] NewConnection -> ERRO 04c[0m Could not connect to any of the endpoints: [orderer0.example.com:7050]
[31m2019-06-22 03:15:31.630 UTC [deliveryClient] connect -> ERRO 04d[0m Failed obtaining connection: could not connect to any of the endpoints: [orderer0.example.com:7050]
[33m2019-06-22 03:15:31.630 UTC [deliveryClient] try -> WARN 04e[0m Got error: could not connect to any of the endpoints: [orderer0.example.com:7050] , at 3 attempt. Retrying in 4s
[31m2019-06-22 03:15:35.630 UTC [comm] GetDeliverServiceCredentials -> ERRO 04f[0m Attempted to obtain root CA certs of an unknown channel: behavesystest
[31m2019-06-22 03:15:35.630 UTC [ConnProducer] NewConnection -> ERRO 050[0m Failed connecting to orderer0.example.com:7050 , error: failed obtaining credentials for channel behavesystest: didn't find any root CA certs for channel behavesystest
[31m2019-06-22 03:15:35.630 UTC [ConnProducer] NewConnection -> ERRO 051[0m Could not connect to any of the endpoints: [orderer0.example.com:7050]
[31m2019-06-22 03:15:35.630 UTC [deliveryClient] connect -> ERRO 052[0m Failed obtaining connection: could not connect to any of the endpoints: [orderer0.example.com:7050]
[33m2019-06-22 03:15:35.631 UTC [deliveryClient] try -> WARN 053[0m Got error: could not connect to any of the endpoints: [orderer0.example.com:7050] , at 4 attempt. Retrying in 8s
[36m2019-06-22 03:15:43.509 UTC [endorser] ProcessProposal -> DEBU 054[0m Entering: request from 192.168.144.10:57614
[36m2019-06-22 03:15:43.510 UTC [endorser] preProcess -> DEBU 055[0m [][383456c0] processing txid: 383456c0ef74735882e86b31ce64958333cd425a50e6a6936ec67a384b1aad30
[36m2019-06-22 03:15:43.510 UTC [endorser] SimulateProposal -> DEBU 056[0m [][383456c0] Entry chaincode: name:""lscc"" 
[34m2019-06-22 03:15:43.510 UTC [endorser] callChaincode -> INFO 057[0m [][383456c0] Entry chaincode: name:""lscc"" 
[34m2019-06-22 03:15:43.511 UTC [lscc] executeInstall -> INFO 058[0m Installed Chaincode [mycc] Version [0] to peer
[34m2019-06-22 03:15:43.511 UTC [endorser] callChaincode -> INFO 059[0m [][383456c0] Exit chaincode: name:""lscc""  (1ms)
[36m2019-06-22 03:15:43.511 UTC [endorser] SimulateProposal -> DEBU 05a[0m [][383456c0] Exit/ code placeholder
{code}
*All Build logs:*
Go here to select _behave_tests.log_  or other fabric node logs for individual tests.
*[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/284/artifact/gopath/src/github.com/hyperledger/fabric-test/feature/]*

*[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/284/artifact/gopath/src/github.com/hyperledger/fabric-test/feature/peer0.org1.example.com_FAB-11808%3A_Test_the_use_of_the_network_model_API_to_successfully_commit_to_the_ledger_–_@1.1_.log|https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-behave-master-x86_64/284/artifact/gopath/src/github.com/hyperledger/fabric-test/feature/peer0.org1.example.com_FAB-11808%3A_Test_the_use_of_the_network_model_API_to_successfully_commit_to_the_ledger_--_@1.1_.log]*
 ",,scottz,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15812,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"26/Jun/19 5:41 AM;scottz;TC_FAB-7251_june19_good_peer0.log;https://jira.hyperledger.org/secure/attachment/17342/TC_FAB-7251_june19_good_peer0.log","26/Jun/19 5:41 AM;scottz;TC_FAB-7251_june24_bad_peer0.log;https://jira.hyperledger.org/secure/attachment/17341/TC_FAB-7251_june24_bad_peer0.log",,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,introduced June 19,Unset,No,,,"1|i00mtg:v",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,sykesm,vijaypunugubati,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jun/19 10:08 AM;sykesm;I'll dig into this in the morning but I'm pretty sure it's because of wiring I added to set a CredentialSupport reference even when TLS is disabled.;;;","26/Jun/19 11:10 PM;scottz;Looking at the new lifecycle tests, they also fail. After the installs, at the approve step.



{code:java}
00:07:46       Error occurred [u'docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer1.org1.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\""OR (\'org1.example.com.member\',\'org2.example.com.member\')\\"" ""']: Error: timed out waiting for txid on all peers
00:07:46       
00:07:46       Error occurred [u'docker exec peer0.org2.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org2.example.com:7051 --peerAddresses peer1.org2.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\""OR (\'org1.example.com.member\',\'org2.example.com.member\')\\"" ""']: Error: timed out waiting for txid on all peers
00:07:46       
00:07:46       [sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org2.example.com:7051 --peerAddresses peer1.org2.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \""OR ('org1.example.com.member','org2.example.com.member')\"" ""]: {'peer0.org1.example.com': 'Error occurred [u\'docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer1.org1.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\\\""OR (\\\'org1.example.com.member\\\',\\\'org2.example.com.member\\\')\\\\"" ""\']: Error: timed out waiting for txid on all peers\n', 'peer0.org2.example.com': 'Error occurred [u\'docker exec peer0.org2.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp CORE_PEER_LOCALMSPID=org2.example.com CORE_PEER_ID=peer0.org2.example.com CORE_PEER_ADDRESS=peer0.org2.example.com:7051 peer lifecycle chaincode approveformyorg --package-id mycc:3eb8fafd14163f23cd50941bfd68a14c18dd0d34df3959325e8aa7abf6bb9f24 --channelID behavesystest --name mycc --version 0 --peerAddresses peer0.org2.example.com:7051 --peerAddresses peer1.org2.example.com:7051 --sequence 1 --orderer orderer0.example.com:7050 --init-required --signature-policy \\\\""OR (\\\'org1.example.com.member\\\',\\\'org2.example.com.member\\\')\\\\"" ""\']: Error: timed out waiting for txid on all peers\n'}
00:07:46       Error occurred [u'docker exec peer0.org1.example.com sh -c ""CORE_PEER_MSPCONFIGPATH=/var/hyperledger/configs/9ed5d5c097c711e99f99fa163e8fa76a/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp CORE_PEER_LOCALMSPID=org1.example.com CORE_PEER_ID=peer0.org1.example.com CORE_PEER_ADDRESS=peer0.org1.example.com:7051 peer lifecycle chaincode commit --name mycc --channelID behavesystest --version 0 --sequence 1 --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer0.org2.example.com:7051 --init-required --orderer orderer0.example.com:7050 --signature-policy \\""OR (\'org1.example.com.member\',\'org2.example.com.member\')\\"" ""']: Error: proposal failed with status: 500 - failed to invoke backing implementation of 'CommitChaincodeDefinition': chaincode definition not agreed to by this org (org1.example.com)
{code}
;;;","27/Jun/19 12:14 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32099 [FAB-15813] propagate TLSenabled to DialerFactory;;;","27/Jun/19 12:24 AM;sykesm;One issue per JIRA, please. Let's not dilute the focus.;;;","27/Jun/19 4:46 AM;scottz;The new cc lifecycle tests started failing at same time, which is why I mentioned them in my previous comment, as I suspected a common cause.

Using the proposed changeset to propagate TLSenabled... I retested a couple of the new lifecycle tests along with about 10 others using the older lifecycle methods, from 3 different behave feature files, and all passed. I recommend to merge this solution. I expect most of the 93 failing tests (using ""no tls"") in the behave daily test suite should be fixed and should be able to successfully instantiate again. After seeing the results from the next daily test run, if any tests still fail due to test variations that are not covered by this fix, then we could create new bugs for them.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a an operator, I would like to use the operations service to get an orderer's/peer's version",FAB-15814,40796,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,denyeart,denyeart,26/Jun/19 4:00 AM,15/May/20 1:36 AM,28/Oct/23 3:08 AM,15/Nov/19 2:15 AM,,,,,,,,,,,,,,v1.4.4,v2.0.0,,,fabric-orderer,fabric-peer,,,,,0,ipm,,,,,"As a an operator, I would like to use the operations service to get an orderer's/peer's version. For one thing, this will help operator know when a sufficient number of orderers/peers have been upgraded such that a channel can be upgraded to the latest capability. For example, an operator may display an 'upgrade channel capability' button on a channel when a sufficient number of peers/orderers have been upgraded.",,davidkhala,denyeart,sykesm,varadatibm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-17897,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zfz",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),davidkhala,denyeart,sykesm,varadatibm,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Jun/19 4:04 AM;denyeart;[~sykesm] Is there any industry standard endpoint for this type of information?  Similar to ""healthz"" in the health check space?;;;","26/Jun/19 7:55 AM;sykesm;Already done. Metric surfaced as a gauge and documented.

fabric_version	gauge	The active version of Fabric.	 version;;;","30/Jun/19 8:46 PM;denyeart;[~varadatibm] Version is already available via the metrics. Please try it out and make sure it meets your needs. Re-open if you need anything further.

 ;;;","30/Aug/19 1:23 AM;denyeart;[~sykesm] I got clarification on the requirement... the orderer and peer version check is required such that channel administrators can know when a channel capability can be enabled, or when a peer can join a channel given the current channel capabilities. These administrators typically do not have access to individual peer operations/metrics. The only solution for them would be to include the orderer/peer version in the /healthz response JSON, or another unsecured endpoint. Do you have any issue with that?;;;","05/Nov/19 12:30 AM;sykesm;[~mastersingh24] hit me up on this one. He's looking for a new handler to provide version information on the operations endpoint. It should be a read-only endpoint on the service and does not require explicit authentication.

The endpoint should only support GET operations and must return a JSON document that includes the build information (likely from the common/metadata variables).;;;","14/Nov/19 10:56 PM;sykesm;One pending comment - move the acquisition of the logger to be wired or package state.;;;","14/Nov/19 11:01 PM;sykesm;And I believe we were asked to roll this back to 1.4. Unless there's disagreement, this seems trivial to pull back.

... and we also need to document the endpoint.;;;","15/Nov/19 12:04 AM;denyeart;Let's do the backport for v1.4.4.;;;","18/Nov/19 10:15 PM;davidkhala;Does this version endpoint under control of `CORE_OPERATIONS_TLS` configurations? ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Upgrade to 1.4.2 doc,FAB-15815,40797,,Documentation,Closed,FAB,Fabric,software,denyeart,,,High,Done,joe-alewine,joe-alewine,joe-alewine,26/Jun/19 5:51 AM,18/Jul/19 1:16 AM,28/Oct/23 3:08 AM,18/Jul/19 1:16 AM,v1.4.1,,,,,,,,,,,,,v1.4.2,,,,fabric-docs,,,,,,0,,,,,,"Need to describe the process for going from v1.4.1 to v1.4.2, including the optional process for updating the capabilities of the relevant channels.",,joe-alewine,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:65",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),joe-alewine,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
code hygine: rm uneeded if and correct values in test,FAB-15816,40798,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,26/Jun/19 12:06 PM,27/Jul/19 11:49 AM,28/Oct/23 3:08 AM,26/Jul/19 10:55 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-ledger,,,,,,0,,,,,,Fix code review comment given in https://gerrit.hyperledger.org/r/c/fabric/+/30624,,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00slo:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Investigate LAST_CONFIG field usage in peer and SDKs,FAB-15817,40800,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,jyellick,jyellick,26/Jun/19 1:29 PM,08/Jan/20 3:59 AM,28/Oct/23 3:08 AM,08/Jan/20 3:59 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,fabric-peer,,,,,0,ipm,,,,,"As with FAB-15795 we are trying to consolidate the assorted block metadata fields in use by the orderer under the single 'signature field'.  The last config value is stored in the new way, but, it is still being written to the old location for backwards compatibility reasons.

This task is to audit usage of this field in the peer and peer CLI, as well as the SDKs.  These tools likely rely on this field for retrieving the most recent config block, and they should transition away from this field, to use the one from the signature field.",,jyellick,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABN-1426,FABG-923,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8zfzw",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,sykesm,wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,dependabot/bundler/docs/nokogiri-1.14.3,0.2.x,dependabot/bundler/docs/activesupport-6.0.6.1,dependabot/go_modules/bindings/go-apiv1/golang.org/x/text-0.3.8,0.1.x,main,dependabot/go_modules/golang.org/x/net-0.7.0,dependabot/go_modules/golang.org/x/text-0.3.8,dependabot/go_modules/bindings/go-apiv1/golang.org/x/net-0.7.0,dependabot/bundler/docs/commonmarker-0.23.9,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/bindings/go-apiv2/golang.org/x/net-0.7.0,release-2.3,release-2.2,dependabot/go_modules/bindings/go-apiv2/golang.org/x/text-0.3.8,release-2.5,release-2.4,github-settings,dependabot/go_modules/bindings/go-apiv2/golang.org/x/sys-0.1.0,dependabot/go_modules/golang.org/x/sys-0.1.0,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,dependabot/go_modules/bindings/go-apiv1/golang.org/x/sys-0.1.0,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"05/Nov/19 12:31 AM;sykesm;After the audit is complete, fix the impacted code to reference the new metadata location or open an issue and link it here.;;;","06/Dec/19 1:44 AM;wlahti;[https://github.com/hyperledger/fabric/pull/363];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration flake caused by nwo/deploy EnsureCommitted,FAB-15818,40804,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,27/Jun/19 12:28 AM,28/Jun/19 10:30 PM,28/Oct/23 3:08 AM,28/Jun/19 10:30 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-common,,,,,,0,ci-flake,,,,,"{code:java}
18:44:34 [e][peer-lifecycle-chaincode-commit] 2019-06-25 22:44:33.885 UTC [chaincodeCmd] ClientWait -> INFO 002 txid [6208f8ab2c9156d1ed0d42940328daa8d92a1ff9227661f4254a5b71adfa99d8] committed with status (VALID) at 127.0.0.1:32013
18:44:34 [e][orderer-org.orderer0] 2019-06-25 22:44:33.886 UTC [orderer.common.broadcast] Handle -> WARN 033 Error reading from 127.0.0.1:53684: rpc error: code = Canceled desc = context canceled
18:44:34 [e][orderer-org.orderer0] 2019-06-25 22:44:33.886 UTC [comm.grpc.server] 1 -> INFO 034 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=127.0.0.1:53684 error=""rpc error: code = Canceled desc = context canceled"" grpc.code=Canceled grpc.call_duration=183.345833ms
18:44:34 [e][org1.peer1] 2019-06-25 22:44:33.886 UTC [comm.grpc.server] 1 -> INFO 0e3 streaming call completed grpc.service=protos.Deliver grpc.method=DeliverFiltered grpc.request_deadline=2019-06-25T22:45:03.708Z grpc.peer_address=127.0.0.1:54466 error=""context finished before block retrieved: context canceled"" grpc.code=Unknown grpc.call_duration=178.038602ms
18:44:34 [e][org2.peer1] 2019-06-25 22:44:33.886 UTC [comm.grpc.server] 1 -> INFO 06d streaming call completed grpc.service=protos.Deliver grpc.method=DeliverFiltered grpc.request_deadline=2019-06-25T22:45:03.709Z grpc.peer_address=127.0.0.1:43156 error=""context finished before block retrieved: context canceled"" grpc.code=Unknown grpc.call_duration=177.531101ms
18:44:34 [e][org1.peer1] 2019-06-25 22:44:33.941 UTC [endorser] callChaincode -> INFO 0e4 [testchannel][d285afdf] Entry chaincode: name:""_lifecycle"" 
18:44:34 [e][org1.peer1] 2019-06-25 22:44:33.942 UTC [lifecycle] QueryChaincodeDefinition -> INFO 0e5 successfully queried definition sequence: 1, endorsement info: (version: '0.0', plugin: 'escc', init required: true), validation info: (plugin: 'vscc', policy: '12202f4368616e6e656c2f4170706c69636174696f6e2f456e646f7273656d656e74'), collections: (), name 'mycc'
18:44:34 [e][org1.peer1] 2019-06-25 22:44:33.942 UTC [endorser] callChaincode -> INFO 0e6 [testchannel][d285afdf] Exit chaincode: name:""_lifecycle""  (1ms)
18:44:34 [e][org1.peer1] 2019-06-25 22:44:33.942 UTC [comm.grpc.server] 1 -> INFO 0e7 unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=127.0.0.1:54476 grpc.code=OK grpc.call_duration=1.334474ms
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] {
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] 	""sequence"": 1,
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] 	""version"": ""0.0"",
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] 	""endorsement_plugin"": ""escc"",
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] 	""validation_plugin"": ""vscc"",
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] 	""validation_parameter"": ""EiAvQ2hhbm5lbC9BcHBsaWNhdGlvbi9FbmRvcnNlbWVudA=="",
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] 	""collections"": {},
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] 	""init_required"": true
18:44:34 [o][peer-lifecycle-chaincode-querycommitted] }
18:44:34 [e][org1.peer2] 2019-06-25 22:44:34.002 UTC [endorser] callChaincode -> INFO 304 [testchannel][6d607893] Entry chaincode: name:""_lifecycle"" 
18:44:34 [e][org1.peer2] 2019-06-25 22:44:34.003 UTC [endorser] callChaincode -> INFO 305 [testchannel][6d607893] Exit chaincode: name:""_lifecycle""  (0ms)
18:44:34 [e][org1.peer2] 2019-06-25 22:44:34.003 UTC [comm.grpc.server] 1 -> INFO 306 unary call completed grpc.service=protos.Endorser grpc.method=ProcessProposal grpc.peer_address=127.0.0.1:35882 grpc.code=OK grpc.call_duration=962.088µs
18:44:34 [e][peer-lifecycle-chaincode-querycommitted] Error: query failed with status: 404 - namespace mycc is not defined 
.
.
.
18:44:34 ------------------------------
18:44:34 • Failure [25.724 seconds]
18:44:34 Network solo network [It] deploys and executes chaincode (simple) using _lifecycle 
18:44:34 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/network_test.go:96
18:44:34 
18:44:34   No future change is possible.  Bailing out early after 0.061s.
18:44:34   Expected
18:44:34       <int>: 1
18:44:34   to match exit code:
18:44:34       <int>: 0
18:44:34 
18:44:34   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/deploy.go:404
18:44:34 ------------------------------
18:46:11 ••
18:46:11 
18:46:11 Summarizing 1 Failure:
18:46:11 
18:46:11 [Fail] Network solo network [It] deploys and executes chaincode (simple) using _lifecycle {code}
Hit here: [https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9829/console]",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sn0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"27/Jun/19 5:43 AM;wlahti;I think this should do the trick: [https://gerrit.hyperledger.org/r/c/fabric/+/32108];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replacement tests to cover Behave lifecycle.feature,FAB-15819,40806,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,wlahti,scottz,scottz,27/Jun/19 12:44 AM,06/Sep/19 9:59 PM,28/Oct/23 3:08 AM,06/Sep/19 9:59 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,fabric-quality,,,,,0,,,,,,"Replace this list (below) of 11 Behave functional test scenarios, which is a large subset (but not all) of those found in https://github.com/hyperledger/fabric-test/blob/master/feature/lifecycle.feature , by extending the test scenarios in https://github.com/hyperledger/fabric/tree/master/integration/e2e/lifecycle

Additional notes may be found on tab ""Behave testcases"" (the red highlighted rows within 52-73, for column-A items 45-66) of https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741

{code:java}
lifecycle.feature:Scenario Outline: FAB-13701a: Test new chaincode lifecycle - No policy set using <interface> with <language> chaincode
lifecycle.feature:Scenario: FAB-13701c: Test new chaincode lifecycle - Recover after chaincode container goes down
lifecycle.feature:Scenario: FAB-13959: An admin from an org does not install chaincode package
lifecycle.feature:Scenario: FAB-13960: Using the wrong packageID in approveformyorg
lifecycle.feature:Scenario: FAB-13963: An admin from an org approves a different the chaincode definition
lifecycle.feature:Scenario: FAB-13965: All admins from different orgs approve different the chaincode definitions
lifecycle.feature:Scenario: FAB-13964: Install same chaincode  with different chaincode definitions
lifecycle.feature:Scenario: FAB-13966: Different orgs use different version label during upgrade
lifecycle.feature:Scenario: FAB-13969: Reuse the same sequence number
lifecycle.feature:Scenario: FAB-13970: 2 Different org admins perform the commit
lifecycle.feature:Scenario: FAB-13974: An org admin should be able to recover after sending a wrong approval
{code}
",,scottz,wlahti,,,,,,,,,,,,,,,,,,,,,,FAB-15785,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00uze:rz9",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Extended Unit Test,,(Please add usage information),scottz,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Java SDK updates to handle query enhancements,FAB-15820,40808,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bestbeforetoday,wlahti,wlahti,27/Jun/19 12:55 AM,22/Oct/19 7:36 PM,28/Oct/23 3:08 AM,22/Oct/19 7:36 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-sdk-java,,,,,,0,,,,,,"Gerrit CR [https://gerrit.hyperledger.org/r/c/fabric-sdk-java/+/32117]

Overview of the main changes so far:
 * QueryApprovalStatus renamed to CheckCommitReadiness
 * QueryChaincodeDefinition returns a map of org approvals
 * QueryInstalledChaincodes returns a map of channel name to an array of chaincode names and versions that this install package is associated with. 
 * new query QueryChaincodeDefinitions, which returns all of the chaincode definitions on the channel. This includes all the same info as QueryChaincodeDefinition minus the map of org approvals mentioned above (due to performance reasons).
 * added GetInstalledChaincodePackage function",,bestbeforetoday,denyeart,heatherp,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15821,,,,,,,,,,,,,FABJ-462,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00snw:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bestbeforetoday,denyeart,heatherp,wlahti,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jul/19 8:41 PM;wlahti;Further proto changes have been merged into fabric master. I've updated this Jira to include the latest details. ;;;","14/Aug/19 10:15 PM;bestbeforetoday;Some or all of these changes were made in response to https://jira.hyperledger.org/browse/FABJ-462

Changes for FABJ-462 were delivered in CR [https://gerrit.hyperledger.org/r/c/fabric-sdk-java/+/32611]

Please could you confirm what (if any) changes still need to be made?;;;","14/Aug/19 11:49 PM;wlahti;I won't pretend to know much about the SDK implementation, so definitely double-check and keep me honest here.

From looking at that CR, it looks like QueryChaincodeDefinition (singular) and GetInstalledChaincodePackage haven't been implemented yet. 

As far as the additional info returned in queries, I guess the SDK just returns the entire response that it receives from the server? If that's the case, then the other changes should be covered now that the lifecycle protos are current.;;;","26/Aug/19 11:55 PM;wlahti;[~bestbeforetoday] Any update on this or questions for me? Would be great to get lifecycle v2.0 completely wrapped up.;;;","05/Oct/19 12:24 PM;denyeart;[~bestbeforetoday] [~heatherp] Could you comment on which of the items mentioned above are still outstanding?  Would like to ensure lifecycle is 100% complete from SDK side and close this out.;;;","22/Oct/19 7:36 PM;heatherp;We think this is done, so closing.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Node SDK updates to handle query enhancements,FAB-15821,40809,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,harrisob@us.ibm.com,wlahti,wlahti,27/Jun/19 1:00 AM,27/Aug/19 1:13 AM,28/Oct/23 3:08 AM,27/Aug/19 1:13 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-sdk-node,,,,,,0,,,,,,"Overview of the main changes so far:
 * QueryApprovalStatus renamed to CheckCommitReadiness
 * QueryChaincodeDefinition returns a map of org approvals
 * QueryInstalledChaincodes returns a map of channel name to an array of chaincode names and versions that this install package is associated with. 
 * new query QueryChaincodeDefinitions, which returns all of the chaincode definitions on the channel. This includes all the same info as QueryChaincodeDefinition minus the map of org approvals mentioned above (due to performance reasons).
 * added GetInstalledChaincodePackage function",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16305,,FAB-15820,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00so4:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,dev,main,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"26/Aug/19 11:56 PM;wlahti;[~harrisob@us.ibm.com] Any update here or further questions for me? It'd be great to finish up lifecycle v2.0 and close this one out. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE gen_cfgInputs option for payload min/max,FAB-15822,40810,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,dongming,dongming,dongming,27/Jun/19 3:20 AM,11/Sep/19 4:06 AM,28/Oct/23 3:08 AM,11/Sep/19 4:06 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add option for user to specify payload min and payload max,,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16524,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00whf:z",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"10/Sep/19 6:13 AM;dongming;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/33398/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
DevOps (scripting) friendly CLI query methods,FAB-15824,40812,,Story,In CR Review,FAB,Fabric,software,denyeart,,,Medium,,hakan.eryargi,raft 3,raft 3,27/Jun/19 6:56 PM,19/Sep/19 6:35 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Fabric CLI provides methods to query the state of the peer and channel, however these methods are not scripting friendly. i.e. it's not easy to process the result without additional fragile tools, like grep, awk, etc.

In particular, implementing following methods will be very useful for automation scripts.

Please see _""Future (Dream) Work""_ section in this [post|https://accenture.github.io/blog/2019/06/25/hl-fabric-meets-kubernetes.html#future-dream-work]. One major step toward that goal will be making channel and chaincode flows declarative, i.e. given the desired state of network, flows will try to reach that state, and following methods will greatly simplify this task.

 
||Command||Function||
|peer channel checkexists <channelID>|Check if channel exists, return 0 if exists, 99 o/w|
|peer channel checkjoined <channelID>|Check if peer joined to channel, return 0 if joined, 99 o/w|
|peer channel checkanchors <channelID> <organization>|Check if there is a configtx exists in channel for anchor peers of organization, return 0 if exists, 99 o/w|
|peer chaincode checkinstalled <chaincode name> <version>|Check if certain version of chaincode is installed to peer, return 0 if installed, 99 o/w|
|peer chaincode checkinstantiated <chaincode name> [version] <channelID>|Check if [certain version of] chaincode is instantiated at channel, return 0 if instantiated, 99 o/w|

 

 ",,hakan.eryargi,MichaelWang,raft 3,SebCasanova,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sos:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),hakan.eryargi,MichaelWang,raft 3,SebCasanova,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Orderer can't connect to Kafka Broker with Kafka.TLS enabled,FAB-15825,40813,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,,jiwanglai,jiwanglai,27/Jun/19 7:43 PM,17/Jul/19 11:35 PM,28/Oct/23 3:08 AM,01/Jul/19 10:48 PM,v1.4.1,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ipm,kafka,,,,"When upgrading from 1.4.0 to 1.4.1, new version of orderer can't connect to Kafka broker with `ORDERER_KAFKA_TLS_ENABLED=true`.

 

Orderer's DEBUG log shows below:
{code:java}
 2019-06-27 10:29:11.023 UTC [orderer.consensus.kafka] setupTopicForChannel -> INFO 348 [channel: orderer-system-channel] Setting up the topic for this channel...
 2019-06-27 10:29:11.040 UTC [orderer.consensus.kafka] setupProducerForChannel -> INFO 34e [channel: orderer-system-channel] Setting up the producer for this channel...
 2019-06-27 10:29:11.068 UTC [orderer.consensus.kafka] startThread -> INFO 35b [channel: orderer-system-channel] Producer set up successfully
 2019-06-27 10:29:11.068 UTC [orderer.consensus.kafka] sendConnectMessage -> INFO 35c [channel: orderer-system-channel] About to post the CONNECT message...
 2019-06-27 10:29:11.087 UTC [orderer.consensus.kafka] startThread -> INFO 363 [channel: orderer-system-channel] CONNECT message posted successfully
 2019-06-27 10:29:11.087 UTC [orderer.consensus.kafka] setupParentConsumerForChannel -> INFO 364 [channel: orderer-system-channel] Setting up the parent consumer for this channel...
 2019-06-27 10:29:11.207 UTC [orderer.consensus.kafka] startThread -> INFO 371 [channel: orderer-system-channel] Parent consumer set up successfully
 2019-06-27 10:29:11.207 UTC [orderer.consensus.kafka] setupChannelConsumerForChannel -> INFO 372 [channel: orderer-system-channel] Setting up the channel consumer for this channel (star
 t offset: -2)...
 2019-06-27 10:29:11.222 UTC [orderer.consensus.kafka] startThread -> INFO 377 [channel: orderer-system-channel] Channel consumer set up successfully
 2019-06-27 10:29:11.222 UTC [orderer.consensus.kafka.sarama] subscriptionConsumer -> DEBU 378 consumer/broker/1 added subscription to orderer-system-channel/0
 2019-06-27 10:29:11.222 UTC [orderer.consensus.kafka] try -> DEBU 379 [channel: orderer-system-channel] Getting list of Kafka brokers replicating the channel
 2019-06-27 10:29:11.222 UTC [orderer.consensus.kafka.sarama] func1 -> DEBU 37a Initializing new client
 2019-06-27 10:29:11.222 UTC [orderer.consensus.kafka.sarama] NewClient -> DEBU 37b ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 2019-06-27 10:29:11.222 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 37c ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 2019-06-27 10:29:11.222 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 37d client/metadata fetching metadata for all topics from broker kafkaserver:9094
 2019-06-27 10:29:11.223 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 37e Connected to broker at kafkaserver:9094 (unregistered)
 2019-06-27 10:29:11.224 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 37f client/metadata got error from broker while fetching metadata: unexpected EOF
 2019-06-27 10:29:11.224 UTC [orderer.consensus.kafka.sarama] tryRefreshMetadata -> DEBU 380 Closed connection to broker kafkaserver:9094
 2019-06-27 10:29:11.224 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 381 ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 2019-06-27 10:29:11.224 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 382 client/metadata fetching metadata for all topics from broker kafkaserver:9092
 2019-06-27 10:29:11.225 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 383 Connected to broker at kafkaserver:9092 (unregistered)
 2019-06-27 10:29:11.227 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 384 client/metadata got error from broker while fetching metadata: unexpected EOF
 2019-06-27 10:29:11.228 UTC [orderer.consensus.kafka.sarama] tryRefreshMetadata -> DEBU 385 Closed connection to broker kafkaserver:9092
 2019-06-27 10:29:11.228 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 386 ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 2019-06-27 10:29:11.228 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 387 client/metadata fetching metadata for all topics from broker kafkaserver:9091
 2019-06-27 10:29:11.228 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 388 Connected to broker at kafkaserver:9091 (unregistered)
 2019-06-27 10:29:11.229 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 389 client/metadata got error from broker while fetching metadata: unexpected EOF
 2019-06-27 10:29:11.230 UTC [orderer.consensus.kafka.sarama] tryRefreshMetadata -> DEBU 38a Closed connection to broker kafkaserver:9091
 2019-06-27 10:29:11.230 UTC [orderer.consensus.kafka.sarama] Open -> DEBU 38b ClientID is the default of 'sarama', you should consider setting it to something application-specific.
 2019-06-27 10:29:11.230 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 38c client/metadata fetching metadata for all topics from broker kafkaserver:9093
 2019-06-27 10:29:11.230 UTC [orderer.consensus.kafka.sarama] withRecover -> DEBU 38d Connected to broker at kafkaserver:9093 (unregistered)
 2019-06-27 10:29:11.234 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 38e client/metadata got error from broker while fetching metadata: unexpected EOF
 2019-06-27 10:29:11.234 UTC [orderer.consensus.kafka.sarama] tryRefreshMetadata -> DEBU 38f Closed connection to broker kafkaserver:9093
 2019-06-27 10:29:11.234 UTC [orderer.consensus.kafka.sarama] RefreshMetadata -> DEBU 390 client/metadata no available broker to send metadata request to
 2019-06-27 10:29:11.234 UTC [orderer.consensus.kafka.sarama] tryRefreshMetadata -> DEBU 391 client/brokers resurrecting 4 dead seed brokers
 2019-06-27 10:29:11.234 UTC [orderer.consensus.kafka.sarama] tryRefreshMetadata -> DEBU 392 client/metadata retrying after 250ms... (3 attempts remaining)
{code}
 

With Kafka debug log:
{code:java}
[2019-06-27 <TIME OMITTED>] DEBUG SSLEngine.closeInBound() raised an exception. (org.apache.kafka.common.network.SslTransportLayer)
 javax.net.ssl.SSLException: Inbound closed before receiving peer's close_notify: possible truncation attack?
         at sun.security.ssl.Alerts.getSSLException(Alerts.java:208)
         at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1647)
         at sun.security.ssl.SSLEngineImpl.fatal(SSLEngineImpl.java:1615)
         at sun.security.ssl.SSLEngineImpl.closeInbound(SSLEngineImpl.java:1542)
         at org.apache.kafka.common.network.SslTransportLayer.handshakeFailure(SslTransportLayer.java:797)
         at org.apache.kafka.common.network.SslTransportLayer.handshake(SslTransportLayer.java:257)
         at org.apache.kafka.common.network.KafkaChannel.prepare(KafkaChannel.java:79)
         at org.apache.kafka.common.network.Selector.pollSelectionKeys(Selector.java:460)
         at org.apache.kafka.common.network.Selector.poll(Selector.java:398)
         at kafka.network.Processor.poll(SocketServer.scala:535)
         at kafka.network.Processor.run(SocketServer.scala:452)
         at java.lang.Thread.run(Thread.java:748)
 [2019-06-27 <TIME OMITTED>] DEBUG [SocketServer brokerId=1] Connection with /10.10.255.41 disconnected due to authentication exception (org.apache.kafka.common.network.Selector)
 org.apache.kafka.common.errors.SslAuthenticationException: SSL handshake failed
 Caused by: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
         at sun.security.ssl.EngineInputRecord.bytesInCompletePacket(EngineInputRecord.java:156)
         at sun.security.ssl.SSLEngineImpl.readNetRecord(SSLEngineImpl.java:857)
         at sun.security.ssl.SSLEngineImpl.unwrap(SSLEngineImpl.java:766)
         at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:624)
         at org.apache.kafka.common.network.SslTransportLayer.handshakeUnwrap(SslTransportLayer.java:464)
         at org.apache.kafka.common.network.SslTransportLayer.doHandshake(SslTransportLayer.java:328)
{code}
 

It seems the orderer sends plaintext but not tls package to kafka when it tries to refresh metadata of topics. Maybe the newly added kafka healthcheck FAB-13341 has some bug related with this problem.",,guoger,jiwanglai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15799,,,,FAB-15404,,FAB-13341,,,,FAB-15799,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sp0:",,,,Unset,Unset,,Start orderer with ORDERER_KAFKA_TLS_ENABLED=true,,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,jiwanglai,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Jul/19 10:48 PM;guoger;fixed in [https://gerrit.hyperledger.org/r/c/fabric/+/31310]

and cherry-picked to 1.4 branch;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Blockstorage index returns error - on error in extracting txid from transaction envelope,FAB-15826,40821,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,manish-sethi,manish-sethi,manish-sethi,28/Jun/19 5:46 AM,23/Jul/19 10:04 PM,28/Oct/23 3:08 AM,23/Jul/19 10:04 PM,v1.1.1,v1.2.1,v1.3.0,v1.4.0,v2.0.0,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,"https://github.com/hyperledger/fabric/blob/2dbd978705419740b5df434f9a36480c4ac396e6/common/ledger/blkstorage/fsblkstorage/block_serialization.go#L195

A malformed transaction could make this function return an error and cause halt of a chain.

The simplest fix should be ignore such errors.

",,ales,denyeart,manish-sethi,,,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ales,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zzf",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,denyeart,manish-sethi,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jul/19 5:01 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/32151/;;;","09/Jul/19 10:52 PM;denyeart;[~manish-sethi] Please cherry pick to master.;;;","11/Jul/19 2:23 AM;manish-sethi;CR for master - https://gerrit.hyperledger.org/r/c/fabric/+/32243;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Blockstorage data file issue in the event of a crash,FAB-15827,40822,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,manish-sethi,manish-sethi,28/Jun/19 6:01 AM,13/Jul/19 12:03 AM,28/Oct/23 3:08 AM,13/Jul/19 12:03 AM,v1.1.1,v1.2.1,v1.3.0,v1.4.0,v2.0.0,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,"There is a corner case bug in the blockstorage code. Though the possibility is of this getting triggered is a rare but this should be fixed because if triggered could cause random behavior. This can get triggered by a situation when a new file is being created and a crash causes the first block in this new file to be partially written.

At startup, this kind of file is detected (if present) during the construction of the info about the last block - in this function https://github.com/hyperledger/fabric/blob/master/common/ledger/blkstorage/fsblkstorage/blockfile_mgr.go#L110

However, this file also need to be deleted which is overlooked in the current code.",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15940,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwr6z:zzg",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jul/19 12:00 AM;manish-sethi;On a closer look at the code, it appears that I had covered this scenario before :-) Will close this Jira and add an explicit test for this under FAB-15940;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix interface{} to Config,FAB-15828,40823,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,kutenglaoshu,kutenglaoshu,28/Jun/19 12:35 PM,28/Jun/19 10:27 PM,28/Oct/23 3:08 AM,28/Jun/19 10:27 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"'TopLevel' struct member 'Consensus' type is interface{}, which actual point to struct 'Config', this will make code more clearer",,kutenglaoshu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sqc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kutenglaoshu,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Jun/19 10:27 PM;sykesm;The configuration is held as an empty interface as the shape is intended to vary based on the consensus implementation.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add RST to gitattributes for line endings,FAB-15829,40824,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,jyellick,jyellick,28/Jun/19 12:57 PM,20/Aug/19 12:57 PM,28/Oct/23 3:08 AM,20/Aug/19 12:57 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,jyellick,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sqk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jyellick,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unit tests do not depend on the peer image,FAB-15830,40827,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,28/Jun/19 10:40 PM,29/Jun/19 1:50 AM,28/Oct/23 3:08 AM,29/Jun/19 1:50 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sr0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"28/Jun/19 10:41 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32124;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Querying fails on peer lifecycle chaincode with an unknown flag for channelID,FAB-15831,40828,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,wlahti,vijaypunugubati,vijaypunugubati,28/Jun/19 10:46 PM,03/Jul/19 11:49 PM,28/Oct/23 3:08 AM,03/Jul/19 11:49 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,ci-blocker,ci-failure,,,,"Querying fails on peer lifecycle chaincode with an unknown flag for channelID in the byfn test.

*Branch:* Master**

*Platform:* ** s390x & x86_64

*Error Snippet:* 
{code:java}
/00:07:53.335 ===================== Chaincode definition approved on peer0.org1 on channel 'mychannel' ===================== 
00:07:53.335 
00:07:53.335 ===================== Querying approval status on peer0.org1 on channel 'mychannel'... ===================== 
00:08:13.339 + peer lifecycle chaincode queryapprovalstatus --channelID mychannel --name mycc --version 1 --sequence 1 --init-required
00:08:13.340 Attempting to Query approval status on peer0.org1 ...20 secs
00:08:13.408 + res=1
00:08:13.408 + set +x
00:08:33.411 Attempting to Query approval status on peer0.org1 ...41 secs
00:08:33.411 + peer lifecycle chaincode queryapprovalstatus --channelID mychannel --name mycc --version 1 --sequence 1 --init-required
00:08:33.483 + res=1
00:08:33.483 + set +x
00:08:53.487 Attempting to Query approval status on peer0.org1 ...61 secs
00:08:53.487 + peer lifecycle chaincode queryapprovalstatus --channelID mychannel --name mycc --version 1 --sequence 1 --init-required
00:08:53.556 + res=1
00:08:53.556 + set +x
00:09:13.561 Attempting to Query approval status on peer0.org1 ...81 secs
00:09:13.561 + peer lifecycle chaincode queryapprovalstatus --channelID mychannel --name mycc --version 1 --sequence 1 --init-required
00:09:13.625 + res=1
00:09:13.626 + set +x
00:09:33.629 Attempting to Query approval status on peer0.org1 ...101 secs
00:09:33.630 + peer lifecycle chaincode queryapprovalstatus --channelID mychannel --name mycc --version 1 --sequence 1 --init-required
00:09:33.701 + res=1
00:09:33.701 + set +x
00:09:53.707 Attempting to Query approval status on peer0.org1 ...121 secs
00:09:53.707 + peer lifecycle chaincode queryapprovalstatus --channelID mychannel --name mycc --version 1 --sequence 1 --init-required
00:09:53.773 + res=1
00:09:53.774 + set +x
00:09:53.774 
00:09:53.775 Error: unknown flag: --channelID
00:09:53.775 Usage:
00:09:53.775   peer lifecycle chaincode [command]
00:09:53.775 
00:09:53.775 Available Commands:
00:09:53.775   approveformyorg Approve the chaincode definition for my org.
00:09:53.775   commit          Commit the chaincode definition on the channel.
00:09:53.775   install         Install a chaincode.
00:09:53.775   package         Package a chaincode
00:09:53.776   querycommitted  Query a committed chaincode definition by channel and name on a peer.
00:09:53.776   queryinstalled  Query the installed chaincodes on a peer.
00:09:53.776   simulatecommit  Simulate committing a chaincode definition.
00:09:53.776 
00:09:53.776 Flags:
00:09:53.776       --cafile string                       Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint
00:09:53.776       --certfile string                     Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint
00:09:53.776       --clientauth                          Use mutual TLS when communicating with the orderer endpoint
00:09:53.776       --connTimeout duration                Timeout for client to connect (default 3s)
00:09:53.776   -h, --help                                help for chaincode
00:09:53.776       --keyfile string                      Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint
00:09:53.776   -o, --orderer string                      Ordering service endpoint
00:09:53.776       --ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
00:09:53.776       --tls                                 Use TLS when communicating with the orderer endpoint
00:09:53.776 
00:09:53.776 Use ""peer lifecycle chaincode [command] --help"" for more information about a command.
00:09:53.776 
00:09:53.776 !!!!!!!!!!!!!!! Query approval status result on peer0.org1 is INVALID !!!!!!!!!!!!!!!!
00:09:53.793 ================== ERROR !!! FAILED to execute End-2-End Scenario ==================
00:09:53.793 / code placeholder
{code}
*Build link:* [https://jenkins.hyperledger.org/view/Daily/job/fabric-nightly-release-job-master-s390x/181/console]",,btl5037,denyeart,sykesm,vijaypunugubati,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14831,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00sr8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,denyeart,sykesm,vijaypunugubati,wlahti,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"02/Jul/19 3:25 AM;denyeart;FAB-14831 was merged 6/27 and renamed queryapprovalstatus.
The change needs to be rippled through fabric-samples and docs.

[~ales] [~wlahti] [~negupta] Can you work together on the fabric-samples and doc fixes?  Maybe create separate subtasks under FAB-15048 for these areas. ;;;","02/Jul/19 3:53 AM;denyeart;[~vijaypunugubati] Please use label ci-blocker so that these show up on the Bugs and Tech Debt dashboard. I've switched it.;;;","03/Jul/19 1:53 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric-samples/+/32162];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Switch fabric-samples from using local binaries to docker,FAB-15832,40829,,Story,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid,,AVK 6,AVK 6,28/Jun/19 11:40 PM,19/Apr/20 2:18 PM,28/Oct/23 3:08 AM,19/Apr/20 2:18 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"/scripts/bootstrap.sh downloads architecture and version specific binary locally.

BINARY_FILE=hyperledger-fabric-${ARCH}-${VERSION}.tar.gz
CA_BINARY_FILE=hyperledger-fabric-ca-${ARCH}-${CA_VERSION}.tar.gz

My suggestion is to run this binaries from docker images all the time, which is much better for compatibility and allows us to run different version of HLF on the same machine without any issues.",,AVK 6,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00srg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),AVK 6,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Apr/20 2:18 PM;denyeart;Images do get pulled using the download script, and samples do use the images. Closing as invalid.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
replace rollbacking with rollingback,FAB-15834,40831,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,Senthil1,Senthil1,Senthil1,28/Jun/19 11:57 PM,27/Jul/19 11:49 AM,28/Oct/23 3:08 AM,15/Jul/19 8:27 PM,v1.4.2,,,,,,,,,,,,,v1.4.2,,,,fabric-ledger,,,,,,0,,,,,,"Across all the CRs, the term ""Rollbacking"" is used. The proper term is ""Rolling back"".

Rollbacking doesn't sound right to native english speakers.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00srw:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration test flake in Kafka2RaftMigration,FAB-15835,40838,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,guoger,denyeart,denyeart,30/Jun/19 8:59 PM,11/Sep/19 4:22 AM,28/Oct/23 3:08 AM,11/Sep/19 4:22 AM,v1.4.1,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ci-flake,ipm,,,,"

{code:java}
00:16:04 • Failure [60.837 seconds]
00:16:04 Kafka2RaftMigration Kafka to Raft migration raft side [It] executes bootstrap to raft - multi node 
00:16:04 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/migration_test.go:583
00:16:04 
00:16:04   No future change is possible.  Bailing out early after 0.112s.
00:16:04   Expected
00:16:04       <int>: 1
00:16:04   to match exit code:
00:16:04       <int>: 0
00:16:04 
00:16:04   /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/nwo/configblock.go:194
{code}


https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9915/consoleFull",,denyeart,guoger,sykesm,tock,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00mth:fi",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,guoger,sykesm,tock,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"30/Jun/19 9:01 PM;denyeart;[~tock] [~guoger];;;","01/Jul/19 11:51 AM;denyeart;Seen again in release-1.4:
https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9929/consoleFull;;;","01/Jul/19 1:12 PM;denyeart;And again:
https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9933/consoleFull;;;","01/Jul/19 1:14 PM;denyeart;[~tock] [~guoger] [~sykesm] [~jyellick]
Hit this flake three times this weekend, increased to High.;;;","01/Jul/19 6:46 PM;guoger;For some reason, SUCCESS is not flushed and appeared during next read, where a block was expected
{code:java}
12:16:04 [e][peer-channel-fetch] 2019-06-29 04:16:03.461 UTC [cli.common] readBlock -> INFO 002 Received block: 4
12:16:04 [e][peer-channel-fetch] 2019-06-29 04:16:03.461 UTC [cli.common] readBlock -> INFO 003 Got status: &{SUCCESS}
12:16:04 [e][peer-channel-fetch] Error: can't read the block: &{SUCCESS} {code}
 

Any change made in this area recently? (fetch cli, deliver client/server)

 

Note, this IT is getting blocks from peer;;;","01/Jul/19 7:27 PM;tock;{quote}The anomaly that I see in all the logs is:
 *07:16:04* [e][peer-channel-fetch] 2019-06-29 04:16:03.461 UTC [cli.common] readBlock -> INFO 002 Received block: 4

*07:16:04* [e][peer-channel-fetch] 2019-06-29 04:16:03.461 UTC [cli.common] readBlock -> INFO 003 Got status: &\{SUCCESS}

*07:16:04* [e][peer-channel-fetch] Error: can't read the block: &\{SUCCESS}
  
{quote}
This maps to peer/common/deliverclient.go L75, where `readBlock()` is expecting a DeliverResponse_Block but getting DeliverResponse_Status.

The problem occurs after the ordering service exits Maintenance-mode, which means that the peers are just getting the newer config blocks (3 of them, blocks 4,5,6 on testchannel1) after they were blocked during migration. it seems that the peers are getting the blocks delivered to them OK. The peer cli was asked to get the latest config block, and the session ended with a 1 rather than 0. 

As [~guoger] indicated above, it seems that the success message following block 4 is not flushed. 

The call to d.Service.Recv() on L78 does not check for an error; maybe an error was returned and it ignored it? maybe there is delay in getting the SUCCESS and we need to wrap that in a loop?

Any ideas? [~wlahti]  [~guoger] [~jyellick];;;","12/Jul/19 11:47 PM;guoger;are we still bumping into this?;;;","16/Jul/19 9:22 AM;denyeart;[~guoger] Yes, hit this twice today in this CR:
https://gerrit.hyperledger.org/r/#/c/fabric/+/32343/;;;","31/Jul/19 2:50 AM;denyeart;[~guoger] Is this still in progress?;;;","05/Aug/19 2:05 AM;guoger;[~denyeart] sorry, just saw this.. it's still on my tab, although the reason of this flake is still unclear to me.

I tried to add error check into code and ran tests repeatedly in CI. The flake _seems_ to go away. But I'm hesitating to call it a solution w/o fully understanding it.

I'm gonna timebox this for a week and come up with a decision.;;;","09/Aug/19 10:56 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/32812 would hopefully make this more investigable.;;;","22/Aug/19 11:52 PM;denyeart;Above CR is merged to clarify error messages. I haven't seen the flake recently, reducing to Medium again.;;;","11/Sep/19 4:22 AM;sykesm;Been a few weeks and nobody has pointed to a recurrence of this issue. Closing. If it becomes an issue, it can be reopened.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Clear off pre-reset height files after reset/rollback,FAB-15836,40839,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,denyeart,denyeart,denyeart,01/Jul/19 7:27 AM,26/Jul/19 3:07 AM,28/Oct/23 3:08 AM,01/Jul/19 7:34 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-ledger,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00stg:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jul/19 7:28 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/32134/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Change FileLedger Location,FAB-15837,40840,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kutenglaoshu,kutenglaoshu,kutenglaoshu,01/Jul/19 10:27 AM,02/Jul/19 10:09 PM,28/Oct/23 3:08 AM,02/Jul/19 10:07 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,Orderer FileLedger Location should relative to the config (orderer.yaml),,kutenglaoshu,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Yes,Unset,,,,,No,,Unset,No,,,"1|i00sto:","If FileLedger is specified with relative path, it will be relative to the config file, instead of where the binary is being executed.",Yes,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kutenglaoshu,mastersingh24,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jul/19 5:38 PM;mastersingh24;[~kutenglaoshu] 
couple of house keeping tips:
- please make sure to assign items you take on to yourself
- update the status as you progress (i.e. in progress and then in cr review once submitted);;;","01/Jul/19 5:38 PM;mastersingh24;https://gerrit.hyperledger.org/r/32138;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Doc - operation guide for peer reset and rollback,FAB-15838,40843,,Documentation,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,Senthil1,Senthil1,01/Jul/19 1:32 PM,13/Jan/21 2:46 AM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-docs,fabric-ledger,,,,,0,,,,,,"Document peer reset and rollback operations, including the dropping of couchdb state db data.",,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14307,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0ir",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
A peer gets isolated after a long period of disconnection,FAB-15840,40848,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,ronenschafferibm,ronenschafferibm,ronenschafferibm,01/Jul/19 10:14 PM,13/Aug/19 8:33 PM,28/Oct/23 3:08 AM,17/Jul/19 3:42 AM,v1.4.1,v2.0.0,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-gossip,,,,,,0,gossip,,,,,"A peer might be temporarily disconnected from the other peers network due to various reasons. For example, maintenance work on a router/switch that's in the middle.
If the disconnection is long enough, the peer won't get back to the peers network (its view will remain empty)

The reason for the isolation is due to the following facts:
 1. A peer will explicitly connect to its bootstrap peers only once at startup
 [https://github.com/hyperledger/fabric/blob/7d44ebc84a700061483639454f0d5c5e95e4c7eb/gossip/gossip/gossip_impl.go#L143]
 [https://github.com/hyperledger/fabric/blob/7d44ebc84a700061483639454f0d5c5e95e4c7eb/gossip/gossip/gossip_impl.go#L1155-L1179]

2. The aliveMsgStore's callback might delete all the records from
 * deadLastTS
 * aliveLastTS
 * id2Member
 * aliveMembership
 * deadMembership
 [https://github.com/hyperledger/fabric/blob/7d44ebc84a700061483639454f0d5c5e95e4c7eb/gossip/discovery/discovery_impl.go#L1019-L1030]

A possible simple solution would be to prevent the callback from removing records of a bootstrap peer

Some advanced solutions might include:
- Exponentially increment of the time interval between reconnections to dead members in order to save resources
- Defining a more complicated membership view rules on when we remove a bootstrap peer from the aliveMsgStore. For example, if our peer sees that a bootstrap peer is dead and there are no more peers in its membership view, it won't remove the bootstrap peer because otherwise, our peer might be isolated.
But, if our peer sees that a bootstrap peer is dead and its membership view has a plenty of other peers, it will remove the dead bootstrap peer.

I think the simple solution above is a reasonable tradeoff for now.

 ",,denyeart,mplisov,ronenschafferibm,seokm0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15564,,FAB-15564,FAB-15557,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00svg:",,,,Unset,Unset,,"1. yes | ./byfn.sh up
2. docker network disconnect net_byfn peer1.org1.example.com
3. sleep 10m
4. docker network connect net_byfn peer1.org1.example.com",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,mplisov,ronenschafferibm,seokm0,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"01/Jul/19 10:34 PM;ronenschafferibm;https://gerrit.hyperledger.org/r/c/fabric/+/32143;;;","02/Jul/19 6:43 AM;denyeart;Thanks [~ronenschafferibm].  Do you believe the two linked Jiras are duplicates?  If so, please Withdraw/Close as duplicate.;;;","02/Jul/19 5:16 PM;ronenschafferibm;It's hard to tell. In FAB-15557 there is a suspicion that the cause of the isolation is due to the lack of usable sockets and not due to this bug.;;;","16/Jul/19 8:26 PM;denyeart;Need to port to release-1.4 still.;;;","16/Jul/19 9:24 PM;ronenschafferibm;cherry-pick to release-1.4

[https://gerrit.hyperledger.org/r/c/fabric/+/32350]

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Release 1.4.2 regression system test,FAB-15841,40851,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,01/Jul/19 11:18 PM,26/Feb/20 10:48 PM,28/Oct/23 3:08 AM,16/Jul/19 12:40 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Manually run a set of system traffic load tests against v1.4.2 in a k8s cluster; select a good cross section covering a variety of functionalities and capabilities. These tests will become part of our Release Test Suite, to be automated in subsequent weeks for future releases.

Background: Many existing system tests use NL to launch network using docker on single host machine (so the existing CI can use them), PTE to drive traffic load of various type, gather report file, and tear down the network. Some tests cannot be run this way, as they require more machine resources and/or monitoring and validation; instead, they can be run in k8s cluster of machines with more CPU and RAM resources.",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15587,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"For this epic we need to run a selected set of tests on release 1.4.2 images. I created a list, https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=489139987, which should provide good coverage. They should be run with a heavy transaction load. As part of this epic, we should create testtasks to redesign the front end of the selected tests so we can simply run them in a k8s cluster which has a suitable network created already, and run them manually to generate significant traffic loads for an hour or more.  (Note: they should be designed to run together, in separate channels, with the objective to become part of a release test suite - but it is out of the scope of this epic in v1.4.2 to do the full automation for this release test suite, i.e. to create jobs, to start a network (or two) in k8s cluster, to run groups of tests simultaneously, to automatically determine and report test results for all the tests in the test suite.)",Not Required,Unset,Not Required,ghx-label-10,,Release 1.4.2 regression system test,Done,No,,Not Required,No,,,"1|i00svw:",,,,No,Not Required,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,Regression system testing in v1.4.2 for existing functionalities,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add more validation checks,FAB-15845,40872,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,02/Jul/19 3:41 AM,08/Aug/19 4:46 AM,28/Oct/23 3:08 AM,08/Aug/19 4:38 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,security,,,,,Additional validations to return errors such as invalid name and nil pointer at the first occurrence.,,ales,caod,denyeart,manish-sethi,wenjian,,,,,,,,,,,,,,,,,,Security issue,,,,,,,,,,,,,,,FAB-15129,FAB-15319,FAB-15631,FAB-15664,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,ales,caod,manish-sethi,wenjian,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-11237,,,No,,Unset,No,,,"1|hzwr6z:zz6i",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ales,caod,denyeart,manish-sethi,wenjian,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/19 12:16 AM;wenjian;v1.4 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32150/]

v20 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32152/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replacement test to cover Behave CouchDB_Index.feature test FAB-7251 for multiple indexes,FAB-15846,40874,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Duplicate,wlahti,scottz,scottz,02/Jul/19 8:23 AM,29/Aug/19 10:19 AM,28/Oct/23 3:08 AM,28/Aug/19 3:11 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-quality,,,,,0,,,,,,"The relevant behave tests at https://github.com/hyperledger/fabric-test/blob/master/feature/CouchDB_index.feature which are being deprecated are similar to FAB-7251; they test CouchDB indexing using marbles chaincode using golang with multiple index with 1 or more selectors.

Existing coverage in fabric integration tests is for only 1 channel and 1 index with 3 selectors.

Extend the fabric/integration/ledger tests to include a 2nd index, with 1 or 2 selectors.

(System test will cover the 2-chan scenario.)",,scottz,wlahti,,,,,,,,,,,,,,,,,,,,,,FAB-15747,,,,,,,,,,,,,,,,,,FAB-15847,,,,,,FAB-15847,FAB-16468,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00snk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Integration Test,,(Please add usage information),scottz,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"28/Aug/19 3:11 AM;wlahti;Closing this as a duplicate of FAB-15847.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replacement test to cover Behave CouchDB_Index.feature test FAB-7263 for cc upgrades with mult indexes,FAB-15847,40875,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,scottz,scottz,02/Jul/19 8:32 AM,31/Aug/19 8:00 AM,28/Oct/23 3:08 AM,31/Aug/19 8:00 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-quality,,,,,0,,,,,,"The relevant behave tests at https://github.com/hyperledger/fabric-test/blob/master/feature/CouchDB_index.feature which are being deprecated are similar to FAB-7263; they test cc upgrades when using multiple CouchDB indexes, each with multiple selectors.

Existing coverage in fabric repo tests includes:
* The fabric/integration (ledger or nwo) tests include couchdb index creation, in 1 chan, but there are no cc upgrade tests here.
* The integration/e2e/lifecycle tests do chaincode upgrades - but only with single channel - and they do not use any couchdb indexes (note: a modified or new index file would trigger the index rebuild)

Two options to test cc upgrade + indexes:
#     Further extend the ledger tests (refer to FAB-15846) by adding cc upgrades in addition to a 2nd index file (with both indexes being added/modified upon upgrade) and of course verify useful indexes.
#     Alternatively, extend the IT e2e/lifecycle tests to add 2 new index files during its upgrade tests, with different numbers of selectors, and verify the indexes are useful.",,denyeart,scottz,,,,,,,,,,,,,,,,,,,,,,FAB-15747,,,,,,,,,,,,,,FAB-15846,,,,,,FAB-15846,,,,FAB-16468,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|hzwqrk:5j9",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Integration Test,,(Please add usage information),denyeart,scottz,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Aug/19 10:15 AM;scottz;FAB-16468 is a bug written against the original behave test recently, because the test target got moved. Instead of fixing it, we will disable the test and close the issue because that test is being replaced by this IT test FAB-15846/FAB-15847.;;;","31/Aug/19 12:59 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/33192/
https://gerrit.hyperledger.org/r/#/c/fabric/+/33193/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
deliverservice.test fail on unit-test consistent in fabric merge job.,FAB-15848,40877,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dereckluo,vijaypunugubati,vijaypunugubati,02/Jul/19 11:20 PM,03/Jul/19 2:15 AM,28/Oct/23 3:08 AM,03/Jul/19 2:15 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,quality,,,,"deliverservice.test fail on unit-test because of ""not enough arguments to call service.""

*Branch:* Master**

*Platform:* x86_64

*Error Snippet:*
{code:java}
/00:17:11.494 # github.com/hyperledger/fabric/core/deliverservice [github.com/hyperledger/fabric/core/deliverservice.test]
00:17:11.494 core/deliverservice/deliveryclient_test.go:879:53: undefined: defaultConnectionTimeout
00:17:11.494 core/deliverservice/deliveryclient_test.go:887:51: not enough arguments in call to dialerFactory.Dialer(""no-such-channel"")
00:17:11.494 	have (string)
00:17:11.494 	want (string, time.Duration)
00:17:11.494 core/deliverservice/deliveryclient_test.go:892:50: not enough arguments in call to dialerFactory.Dialer(""no-such-channel"")
00:17:11.494 	have (string)
00:17:11.494 	want (string, time.Duration)/ code placeholder
{code}
*Build :* [https://jenkins.hyperledger.org/view/fabric/job/fabric-merge-x86_64/7074/console]",,btl5037,swetharepakula,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,7ede548f97f6865eb9b4e1bdd8eb2ef68af6adf9,Unset,No,,,"1|i00t0k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),btl5037,swetharepakula,vijaypunugubati,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/19 12:36 AM;swetharepakula;[https://gerrit.hyperledger.org/r/#/c/fabric/+/32157/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup networkLauncher and kubectl commands into a common function,FAB-15850,40881,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,suryalnvs,suryalnvs,03/Jul/19 4:04 AM,31/Jul/19 3:41 AM,28/Oct/23 3:08 AM,31/Jul/19 3:41 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Cleanup networkLauncher and kubectl commands into a common function,,bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00t1g:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,suryalnvs,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"30/Jul/19 3:32 AM;bharadwajambati1;[https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32199/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add mutual tls to network launcher in k8s ,FAB-15851,40882,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,suryalnvs,suryalnvs,03/Jul/19 4:05 AM,19/Jul/19 9:54 PM,28/Oct/23 3:08 AM,19/Jul/19 9:54 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add mutual tls to network launcher in k8s,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15858,FAB-15885,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00t1o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"09/Jul/19 11:07 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32213/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
gen_CfgInputs.sh script instantiating chaincodes only on org1 with --org option,FAB-15852,40883,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,dongming,rameshthoomu,rameshthoomu,03/Jul/19 4:05 AM,07/Sep/19 12:08 AM,28/Oct/23 3:08 AM,07/Sep/19 12:08 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Observed below points while doing create a channel, install and instantiate chaincodes on 4 orgs by passing *--org* argument to gen_CfgInputs.sh script. See the below command.

./gen_cfgInputs.sh -d PTEScaleTest-CP --tls serverauth --nchan 3 --chanprefix testorgschannel *{color:red}--org org1 org2 org3 org4{color}* -a samplecc marbles02 -c -i

Only chaincodes are instantiated on org1 but not on any other orgs.

NOTE: Working as expected when use *{color:red}--norg 5{color}*",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00uze:ry",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"07/Sep/19 12:08 AM;rameshthoomu;In future we may not use gen_cfgInputs.sh script to use PTE. Closing this based on the recent changes happening around test client https://jira.hyperledger.org/browse/FAB-16240 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add option to add host path as persistence to network launcher,FAB-15853,40884,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,03/Jul/19 4:06 AM,19/Jul/19 9:54 PM,28/Oct/23 3:08 AM,19/Jul/19 9:54 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add option to add host path as persistence to network launcher,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00t24:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"10/Jul/19 3:23 AM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32223/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Use common naming convention in gen_ConfigInput.tx and the pte test scripts needed for systest,FAB-15854,40885,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Jul/19 5:16 AM,15/Aug/19 11:34 PM,28/Oct/23 3:08 AM,15/Aug/19 11:33 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"ChaincodeID from gen_ConfigInput.tx script is combining ""Chaincode Name"" + ""ChannelName"".

When we instantiate a chaincode using gen_CfgInputs.sh the ChainCode_ID is appearing as ChainCode_Name + ChannelName (*{color:red}samplecctestorgschannel1{color}*)

Samplecc -- Chaincode Name
testorgschannel -- Channel Name

When we try to run invokes or queries through test_driver.sh script. You basically have to modify the ""chaincodeID"" to samplecctestorgschannel1 in invoke and query .json file of test case directory.

ex:
/home/ibmadmin/gopath/src/github.com/hyperledger/fabric-test/tools/PTE/CITest/FAB-8192-4i/marbles02/marbles02-chan1-FAB-8192-4i-TLS.json",,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-16061,,,No,,Unset,No,,,"1|hzwqrk:4r",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,scottz,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"08/Aug/19 7:12 AM;scottz;We could change gen_CfgInputs.sh script (if not too complicated), or we could modify the input files channel/chaincode names for those selected tests that we want to be able to use either as they are (standalone) or with gen_CfgInputs.sh.

The fact that gen_CfgInputs.sh does not use same naming format as the existing 100+ testcases seems like a bug. Not exactly, but this does block the easier way (using gen_CfgInputs.sh for some of the steps) to add more tests to the system test suite - so it might be worth doing this now if it is not too much work, so we could quickly add some more tests to the k8s system test suite.;;;","08/Aug/19 11:19 PM;scottz;This may be required before adding SBE test or any other tests to system test suite.;;;","10/Aug/19 1:06 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32815/;;;","15/Aug/19 11:34 PM;rameshthoomu;There are few changes missed in the previous patch, addressed them here https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32393/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Test Case: Couchdb index with rich queries and then upgrade chaincode"" on release-1.4.2",FAB-15855,40886,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Jul/19 5:20 AM,19/Jul/19 2:27 AM,28/Oct/23 3:08 AM,13/Jul/19 6:18 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Execute the below test case to validate the Couchdb Index with Rich Queries and then Upgrade the Chaincode.

Test Case# FAB-8251
Network # K8s on IKS cluster (common-quality) - Please refer FAB-15862 for network config details.
PTE Client on Vlaunch
Scripts: Use gen_cfgInputs.sh and test_driver.sh to run the tests.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15862,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,No,,Unset,No,,,"1|i00t2k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 6:17 AM;rameshthoomu;This test case has been started on July 10th stable images from nexus repo. Sent 2500 tx for each thread total of 4 threads. -- Upgraded chaincode to new version -- started sending same number of invoke transactions. Worked as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test Case: State based endorsement,FAB-15856,40887,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Jul/19 5:24 AM,19/Jul/19 2:20 AM,28/Oct/23 3:08 AM,14/Jul/19 1:09 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Execute below test case to validate the State based endorsement functionality on 1.4.2 code base.

TC # FAB-11614-2iSBE
Network: K8s on IKS - Please refer FAB-15862 for more details on network config.
PTE Client: Use Vlaunch
Use gen_ConfigInputs.sh to create and join channels, use test_driver.sh to run the above said test case.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,FAB-15873,FAB-15937,FAB-15942,,,,,,,,,,,,,,,,,,FAB-15862,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,No,,Unset,No,,,"1|i00t2s:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jul/19 12:53 AM;rameshthoomu;This test case execution is blocked by FAB-15942;;;","14/Jul/19 1:10 PM;rameshthoomu;Executed this test case on July 12th build and worked as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test Case: Raft testing,FAB-15857,40888,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,bharadwajambati1,rameshthoomu,rameshthoomu,03/Jul/19 5:25 AM,19/Jul/19 2:20 AM,28/Oct/23 3:08 AM,16/Jul/19 12:39 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Execute the below test case to validate the raft orderer functionality.

TC # FAB-14225-12i
Network: k8s on IKS - Please refer FAB-15885 for more information on the network config.
PTE Client: vlaunch
Scripts: Use below scripts to run the tests.
gen_confgInputs.sh
test_Driver.sh",,bharadwajambati1,rameshthoomu,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15885,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,Manual,,Unset,No,,,"1|i00t30:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),bharadwajambati1,rameshthoomu,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jul/19 5:51 AM;rameshthoomu;To configure fabric network for this setup, we need mutual TLS support in go Network launcher. As on today, this is not possible with go NL. FAB-15851;;;","03/Jul/19 7:53 AM;suryalnvs;I don't see use of mutual TLS in FAB-14225. [~rameshthoomu] ;;;","03/Jul/19 11:34 PM;rameshthoomu;Yes.. You are right. We don't need mutual TLS for this specific test case.;;;","10/Jul/19 4:53 AM;rameshthoomu;I will assign this test case to Baradwaj as he is working on similar testcase on latest 1.4 builds. FYI [~bharadwajambati1];;;","12/Jul/19 8:35 AM;bharadwajambati1;After migrating a kafka network of one ordererorg(3 orderers) and one peer org(1 peer) to etcdraft, executed the FAB-14228 which includes adding an ordererorg, orderers, removal of orderers and changing the other parameter values(for example *Orderer.BatchSize.MaxMessgeCount*).;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test Case: Service Discovery on peers and raft Orderers,FAB-15858,40889,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,rameshthoomu,rameshthoomu,03/Jul/19 5:28 AM,19/Jul/19 4:02 AM,28/Oct/23 3:08 AM,16/Jul/19 12:40 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Execute the below test case to validate the functionality of Service Discovery on peers and orderers.

TC # FAB-15528
Network2: k8s on IKS (community-quality)  - Refer FAB-15885 for the network Config information.
PTE Client: vlaunch
gen_configInputs.sh and test_driver.sh to create, join, install and instantiate. Use test_driver.sh to send the traffic.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,FAB-15851,FAB-15905,,,,,,,,,,,,,,,,,,,FAB-15885,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,Manual,,Unset,No,,,"1|i00t38:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jul/19 5:51 AM;rameshthoomu;To configure fabric network for this setup, we need mutual TLS support in go Network launcher. As on today, this is not possible with go NL. FAB-15851;;;","10/Jul/19 4:55 AM;rameshthoomu;Surya asked me to hold on testing on this test case as there are some changes required in configtx.yaml. Also, he is performing the same test case. So for now keeping this test case on hold.;;;","16/Jul/19 12:40 AM;rameshthoomu;Surya executed this test case on July 13th build and observed everything is working as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test Case# Different Payload tests,FAB-15859,40890,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Jul/19 5:30 AM,19/Jul/19 2:26 AM,28/Oct/23 3:08 AM,13/Jul/19 6:20 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Choose the existing test cases from PTE/CITEST directory and start executing PTE test case on the different payload size.

TC# Different Payload tests
Environment# k8s on IKS - Please refer FAB-15862 for more network config.
PTE Client # vlaunch
Scripts: Use gen_cfgInputs.sh and test_driver.sh to run the tests.
",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15862,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,No,,Unset,No,,,"1|i00t3g:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jul/19 6:20 AM;rameshthoomu;This test case has been executed with multiple payloads. Max payload is 1mb with 20K transactions. 2) executed with 1k to 2K variable payload. In both cases, on k8s cluster,  initially observed latency. but later updated peer, orderers pods cpu and memory size. All the tests are worked as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Test Case: Multiple chaincodes (go, node and Marbles02) tests",FAB-15860,40891,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Jul/19 5:32 AM,19/Jul/19 2:26 AM,28/Oct/23 3:08 AM,13/Jul/19 6:03 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Execute the below test case to validate the different type of chaincode tests.

TC# Multiple chaincodes (go, node and Marbles02) tests
Environment # k8s on IKS - Please refer FAB-15862
PTE Client # vlaunch
Scripts: use gen_cfgInputs.sh and test_driver.sh to run the tests.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15862,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,No,,Unset,No,,,"1|i00t3o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"08/Jul/19 10:29 PM;rameshthoomu;1. Created Network#1 on k8s community-quality cluster
    *  Created 3 channels and joined them on all the peers
    *  Installed Samplecc, marble02 and samplejs chaincodes on all the peers.

2. Prepared Connection Profile for the above network
3. Executed FAB-3833-2i with 25000 tx per process (2*25000=50K) - *Observed TPS = 7.97*;;;","13/Jul/19 6:03 AM;rameshthoomu;Re-ran a couple of test cases with high load on July 12th build. Observed working as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test Case: Chaos testing (restart all components),FAB-15861,40892,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,rameshthoomu,rameshthoomu,03/Jul/19 5:33 AM,19/Jul/19 2:20 AM,28/Oct/23 3:08 AM,16/Jul/19 12:39 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Execute below test case to validate fabric functionality on Chaos testing by restarting peers, orderers.

TC# Chaos testing (restart all components)
Environment: k8s on IKS - Please refer FAB-15885 for the network config details.
PTE Client: vlaunch
Scripts:
use gen_cfgInputs.sh to create/join/install/instantiate chaicodes
use test_driver.sh to send tx
after tx are successfully sent, use test_chaos.sh to restart peers, orderers components.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15885,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,No,,Unset,No,,,"1|i00t3w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/19 5:16 AM;rameshthoomu;the *test_chaos.sh* script is hardcoded to ""orderer1.example.com"" and ""peer0.org1.example.com"". This needs to modified and should be able to read them based on the configuration used for the test case.;;;","10/Jul/19 5:38 AM;rameshthoomu;NetworkLauncher doesn't support service based discovery at this moment. Surya said, he is working on this feature.;;;","16/Jul/19 12:39 AM;rameshthoomu;Surya executed this test case on July 13th build and observed service discovery is working as expected.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Create Network1 with couchdb, kafka, TLS enabled on IKS k8s",FAB-15862,40893,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,03/Jul/19 5:37 AM,19/Jul/19 5:18 AM,28/Oct/23 3:08 AM,12/Jul/19 5:31 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Create a fabric network on IKS k8s to run the below specified tests. These tests should use the k8s cluster created for system testing (community-quality)

TC # Setup fabric network on IKS k8s
Environment: k8s on IKS
PTE Client: NA
Network Launcher: go NL

*Network Config:*

peer orgs -- 5
  -- 2 peers in each org
orderer -- 3
   -- 1 orderer org
ca -5
Channel config - 3 (testorgschannel0, testorgschannel1, testorgschannel2)
Couchdb - 1
Kafka and Zookeeper  - 5/4

Make sure the network is ready with the latest 1.4.2 code base.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15860,FAB-15859,FAB-15856,FAB-15855,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,No,,Unset,No,,,"1|i00t44:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jul/19 5:31 AM;rameshthoomu;Network1 with the above configuration has been created in k8s IKS cluster. We can automate this and keep in CI scripts once this change is merged https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32199/. Pushing automation part after release-1.4.2.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Typo in Exception Msg,FAB-15863,40895,,Bug,Closed,FAB,Fabric,software,denyeart,,,Low,Invalid: Environment Issue,chill37,chill37,chill37,03/Jul/19 11:02 AM,03/Jul/19 11:04 AM,28/Oct/23 3:08 AM,03/Jul/19 11:04 AM,v1.4.1,v1.4.2,v2.0.0,,,,,,,,,,,,,,,fabric-sdk-java,,,,,,0,,,,,,"The Exception Msg when there is no SDChaincode has typo which could lead to misunderstanding the message itself.

 

Original Msg:
 ""Channel %s failed to find and endorsers for chaincode %s""


 Suggestion:
 ""Channel %s failed to find endorsers for chaincode %s""
 (There should be no 'and'. it got me confused few times)
  ",,chill37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-8779,,,No,,Unset,No,,,"1|i00t4k:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),chill37,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"03/Jul/19 11:04 AM;chill37;Should be reported in Fabric Java SDK;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove orderer metadata fallback when checkpoint and pruning is available,FAB-15864,40897,,Story,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,guoger,guoger,03/Jul/19 2:13 PM,11/May/21 11:13 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,Future,,,,fabric-orderer,,,,,,0,,,,,,"For backwards compatibility, if metadata is not found in SIGNATURES field, we need to fall back to read from ORDERER field. This fallback should be removed in a future release when we can stop supporting upgrade from *pre-1.4.1* orderer",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6135,,,No,,Unset,No,,,"1|i00t50:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/May/21 11:13 PM;guoger;This is would related to the whole picture of orderer ledger archiving, and will be revisited organically. Tentatively put back into backlog.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
block/tx indexing should be optimized to improve performance,FAB-15865,40901,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,xixuejia,xixuejia,03/Jul/19 6:11 PM,31/Jul/19 10:37 PM,28/Oct/23 3:08 AM,31/Jul/19 10:37 PM,v1.4.0,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,0,performance,,,,,"With the current fabric implementation, committing peer will receive new blocks from orderer or other peers in a fabric network. After receiving new blocks, committers will verify the new blocks and transactions mainly in two steps:
 - 1). Verify tx envelope, signature, endorsement policy, txId, txID duplicate in the same block(if this capacity is enabled) and txIds of already committed txs. This step verification is mostly done with multiple goroutines now. The result of duplicate txIds check is stored in [block metadata|https://github.com/hyperledger/fabric/blob/release-1.4/core/committer/txvalidator/validator.go#L229]

 - 2). MVCC check; save Block into filesystem; Store Block/tx indexes; etc... Indexing txIds in this step will check duplicate txIds again by querying committed txIds in goleveldb instead of reusing the txIds duplicate check result in step 1. [code here|https://github.com/hyperledger/fabric/blob/release-1.4/common/ledger/blkstorage/fsblkstorage/blockindex.go#L184-L204]

Checking duplicate txIds by querying goleveldb sometimes is not efficient, especially when there are a lot of, say 2000, txs in a single Block. That means we need to do 2000 queries against goleveldb to verify duplicate txIds, assuming there's no duplicate txId in the same Block. There's no need to hit goleveldb in step 2 as we can simply get the duplicate check result from block metadata in step 1.

I did a preliminary test to verify the impact of duplicate check in step 2 and the results are listed below.
 _maxMessageCount: 2000_
 1. markDuplicateTxids by querying goleveldb
 {color:#4c9aff}_txs_per_block:2000,blocks:1313,block_commit_total:314ms,state_validation:99ms,block_commit:214ms,state_commit:0ms_{color}
 2. markDuplicateTxids by reusing the block metadata
 {color:#4c9aff} _txs_per_block:2000,blocks:1368,block_commit_total:239ms,state_validation:101ms,block_commit:137ms,state_commit:0ms_{color}

The duration metrics were extracted from log messages printed by [fabric code|https://github.com/hyperledger/fabric/blob/release-1.4/core/ledger/kvledger/kv_ledger.go#L415]. The elapsed time for block commit is decreased by ~24%. And the txs committing rate on the committer is increased by ~23%-33% with sufficient cpu resource.",,denyeart,minollo,xixuejia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-12221,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00t5w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,minollo,xixuejia,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 10:37 PM;denyeart;This will be handled in the validation refactor work that has started under FAB-12221.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
EtcdRaft fails to start if the PEM TLS certificate differs even in an ending empty line,FAB-15868,40906,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,jlcs,jlcs,03/Jul/19 8:04 PM,05/Jul/19 9:58 PM,28/Oct/23 3:08 AM,05/Jul/19 9:58 PM,v1.4.0,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,Raft,,,,,"When deploying the orderers in Kubernetes, I passed the TLS certificate and private key as K8S secrets.

In this process, I trimmed the PEM text to remove the empty line at the end.

But the genesis block, created with configtxgen, included the empty line.

 

When the Orderer starts, it tries to find if it is a consenter from the identities in the genesis block. But it searches it with 

{{if bytes.Equal(c.Cert, cst.ServerTlsCert)}}

at [https://github.com/hyperledger/fabric/blob/release-1.4/orderer/consensus/etcdraft/consenter.go#L111]

Therefore, the last empty line forces the comparison to fail.

 

It should compare equality with other method, e.g. parsing as string and trimming whitespace, using a certificate package, etc.

 ",,jlcs,mastersingh24,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00t70:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),jlcs,mastersingh24,yacovm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Jul/19 11:58 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/fabric/+/32177/;;;","05/Jul/19 6:39 PM;mastersingh24;[~yacovm]  Do we want to backport this to 1.4.x as well?;;;","05/Jul/19 7:48 PM;yacovm;https://gerrit.hyperledger.org/r/#/c/fabric/+/32193/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Cleanup in conn.go,FAB-15870,40909,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,swetharepakula,swetharepakula,swetharepakula,03/Jul/19 10:57 PM,03/Dec/19 3:28 AM,28/Oct/23 3:08 AM,03/Dec/19 3:28 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,,,,,,0,,,,,,"Comments were left in [https://gerrit.hyperledger.org/r/#/c/fabric/+/31714/] (FAB-15627) & [https://gerrit.hyperledger.org/r/#/c/fabric/+/31580/] (FAB-15622) .

 

Followup with a patch addressing the nits.",,swetharepakula,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00t7o:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),swetharepakula,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
daily tests failures in behave lifecycle feature due to internal permissions error,FAB-15871,40910,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,03/Jul/19 11:58 PM,10/Jul/19 10:55 PM,28/Oct/23 3:08 AM,10/Jul/19 10:55 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,ci-failure,,,,,"With current codebase, the following 3 behave lifecycle.feature tests use a functionality inside the python framework that fails on mac, when trying to assign the /dev/stdout of an execution of configtxlator or cryptogen to an internal variable, due to permissions error. I think we could rewrite the new functions to mimic existing implementation by directing the output to a file and then reading in the file.

Scenario: FAB-13971: Test adding new org using new chaincode lifecycle                              # lifecycle.feature:206
When an admin adds an organization to the channel config                                            # steps/basic_impl.py:500
subprocess.CalledProcessError: Command '['configtxlator', 'proto_decode', '--input', 'behavesystest.block', '--type', 'common.Block']' returned non-zero exit status 1
 *     Unable to generate crypto material: Command '['cryptogen', 'generate', '--output=configs/87de283d985211e9a194acbc32a99e23/.', '--config=./configs/87de283d985211e9a194acbc32a99e23/crypto.yaml']' returned non-zero exit status 1

Scenario: FAB-13958: Test new chaincode lifecycle - upgrade from old to new                         # lifecycle.feature:435
When an admin updates the ""Application"" capabilities in the channel config to version ""V2_0""        # steps/basic_impl.py:539 0.049s
subprocess.CalledProcessError: Command '['configtxlator', 'proto_decode', '--input', 'behavesystest.block', '--type', 'common.Block']' returned non-zero exit status 1

Scenario: FAB-13974: An org admin should be able to recover after sending a wrong approval          # lifecycle.feature:573
When an admin adds an organization to the channel config                                            # steps/basic_impl.py:500
subprocess.CalledProcessError: Command '['configtxlator', 'proto_decode', '--input', 'behavesystest.block', '--type', 'common.Block']' returned non-zero exit status 1
",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00t7w:",,,,Unset,Unset,,"cd fabric-test/feature; behave -k -n FAB-13971 -n FAB-13958 -n FAB-13974 lifecycle.feature",,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"04/Jul/19 12:12 AM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/32160;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IT: Ensure default policy is used when no policy is set in the chaincode definition,FAB-15872,40911,40806,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mrosen52,wlahti,wlahti,04/Jul/19 12:47 AM,10/Aug/19 5:13 AM,28/Oct/23 3:08 AM,18/Jul/19 1:07 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Create an integration test that ensures the default endorsement policy (a majority of the orgs in the channel must endorse chaincode proposals) is enforced when no policy is set in the chaincode definition. 

This task will be complete when there is a test in e2e/lifecycle ([https://github.com/hyperledger/fabric/blob/master/integration/e2e/lifecycle/lifecycle_test.go) |https://github.com/hyperledger/fabric/blob/master/integration/e2e/lifecycle/lifecycle_test.go]that specifies a chaincode with an empty string as the chaincode signature policy and channel config policy, deploys the chaincode using the integration helper function, and then verifies that chaincode invocations with only one org endorsement are rejected and invocations with a majority of org endorsements (2 out of 2 endorsements represents a majority in our standard two org networks in nwo) are successful. ",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16265,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00t84:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add ""State based endorsement"" chaincode support in gen_cfgInputs.sh",FAB-15873,40913,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,rameshthoomu,rameshthoomu,rameshthoomu,04/Jul/19 3:15 AM,21/Aug/19 11:04 PM,28/Oct/23 3:08 AM,21/Aug/19 11:04 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"The existing gen_cfgInputs.sh script doesn't allow ""sbecc"" chaincode. Refer this FAB-11614-2iSBE for the network configuration.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15856,,,,,,,,,,,,,FAB-15902,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00whg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,,true,"20/Aug/19 7:32 AM;rameshthoomu;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/33005/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add ""marbles02_private"" chaincode support in gen_cfgInputs.sh",FAB-15874,40914,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,dongming,rameshthoomu,rameshthoomu,04/Jul/19 3:19 AM,22/Jan/20 6:16 AM,28/Oct/23 3:08 AM,22/Jan/20 6:16 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Existing gen_cfgInputs.sh script doesn't allow to feed marbel02_private chaincode. Add this support to execute sidedb test cases.,,dongming,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,FAB-15392,,,,,FAB-15901,FAB-16074,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00whi:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"01/Aug/19 10:43 PM;dongming;This requires PTE supports marbles02_private chaincode;;;","22/Jan/20 6:16 AM;scottz;gen_cfgInputs.sh and other scripts, as well as all the test input files in PTE/, are being sunset soon, replaced by operator. No more enhancements.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Regenerate help docs to incorporate latest CLI changes,FAB-15876,40916,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,04/Jul/19 3:41 AM,31/Jul/19 2:57 AM,28/Oct/23 3:08 AM,31/Jul/19 2:57 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,"Also, make sure to update [https://github.com/hyperledger/fabric/blob/master/internal/peer/lifecycle/chaincode/chaincode.go#L77-L85] to reflect the rename of queryapprovalstatus to simulatecommit.",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15888,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00t98:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"04/Jul/19 6:26 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric/+/32183];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Bump images to Alpine 3.10,FAB-15878,40919,,Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,mastersingh24,mastersingh24,04/Jul/19 5:08 PM,12/Aug/19 11:37 PM,28/Oct/23 3:08 AM,12/Aug/19 11:37 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,,,,,,,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABC-854,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00t9w:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replace custom pkcs11 implementation with ThalesIgnite/crypto11,FAB-15880,40924,,Task,Backlog,FAB,Fabric,software,denyeart,,,Medium,,,mastersingh24,mastersingh24,04/Jul/19 8:23 PM,04/Jul/19 8:23 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-crypto,,,,,,0,,,,,,https://github.com/ThalesIgnite/crypto11 provides a nice wrapper around miekg/pkcs11 for exposing the standard crypto.Signer interface,,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tb0:",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chaincode installation failed on peer0.org1,FAB-15881,29378,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,,Sambhav,Sambhav,13/Apr/18 9:36 PM,04/Jul/19 8:38 PM,28/Oct/23 3:08 AM,04/Jul/19 8:38 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Got this issue while running **./byfn.sh -m up**. 

byfn script is getting stuck at below command and after that showing error message.

**peer chaincode install -n mycc -v 1.0 -p github.com/chaincode/chaincode_example02/go/**

Message: which points to some java chaincode related issue.

**[chaincodeCmd] getChaincodeSpec -> DEBU 005 java chaincode disabled. Error getting chaincode code chaincode: :**

can you please let me know how to enable it? Or do I really need to enable it?

I am new to blockchain and currently doing a course from edX. So please treat me as a newbie and kindly provide a detailed description of the issue resolution. ",,mastersingh24,Sambhav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"1|hzz5t3:",,,,,,,,,,,,,,,,,,,,mastersingh24,Sambhav,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"04/Jul/19 8:38 PM;mastersingh24;no longer valid;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
peer-orderer shows connectivity issue,FAB-15884,40935,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,Clayton Sims,rhegde,rhegde,05/Jul/19 11:01 PM,21/Aug/19 4:19 AM,28/Oct/23 3:08 AM,21/Aug/19 4:19 AM,v1.0.6,,,,,,,,,,,,,,,,,fabric-peer,,,,,,0,,,,,,as per [~simsc] - this Jira would be tracked to troubleshoot the problem,,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00te4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Aug/19 4:17 AM;Clayton Sims;Rahul,   There is not much information here and I don't remember this being raised in our weekly checkpoints.    I am closing - please open service now ticket if this is still and issue. ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Create Network2 with Raft, mutual TLS on IKS k8s",FAB-15885,40936,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,rameshthoomu,rameshthoomu,rameshthoomu,05/Jul/19 11:30 PM,19/Jul/19 5:18 AM,28/Oct/23 3:08 AM,12/Jul/19 5:30 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Create a fabric network on IKS k8s to run the below specified tests. These tests should use the k8s cluster created for system testing (community-quality)

TC # Setup fabric network on IKS k8s with mutual TLS
Environment: k8s on IKS
PTE Client: NA
Network Launcher: go NL

*Network Config:*

peer orgs -- 5
  -- 2 peers in each org
orderer -- 3
   -- 1 orderer org
ca -5
Channel config - 3 (testorgschannel0, testorgschannel1, testorgschannel2)
Couchdb - 1
Kafka and Zookeeper  - 5/4
Mututal TLS = True

Make sure the network is ready with the latest 1.4.2 code base.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,FAB-15851,,,,,,,,,,,,,,,,,,,,,,,,FAB-15858,FAB-15861,FAB-15857,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15841,,,No,,Unset,No,,,"1|i00tec:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Pass,,System Test,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/19 4:49 AM;rameshthoomu;Cherrypicked this patchset https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32213/ and successfully created network2 on the same cluster (community-quality) with etcdraft and mutual TLS ordering service.;;;","11/Jul/19 6:18 AM;rameshthoomu;Will create a new folder in under CITest in fabric-test, push networkspec file with the modified test cases.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
remove rollback capability from mock,FAB-15887,40939,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,Senthil1,Senthil1,08/Jul/19 9:24 PM,27/Jul/19 11:49 AM,28/Oct/23 3:08 AM,12/Jul/19 11:55 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-peer,,,,,,0,,,,,,"In the mock, we have both Rollback and StorePvtDataOfInvalidTx capability. As the Rollback capability was renamed to StorePvtDataOfInvalidTx in production code, we need to remove the Rollback capability from the mock.",,manish-sethi,Senthil1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tf0:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,Senthil1,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 5:50 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/32207/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
The short and long form of help for the chaincode command are inconsistent,FAB-15888,40941,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,08/Jul/19 11:32 PM,31/Jul/19 2:57 AM,28/Oct/23 3:08 AM,31/Jul/19 2:57 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-peer,,,,,,0,,,,,,"From review of https://gerrit.hyperledger.org/r/c/fabric/+/32183

{code}
var chaincodeCmd = &cobra.Command{
	Use:   ""chaincode"",
	Short: ""Perform chaincode operations: package|install|queryinstalled|approveformyorg|simulatecommit|commit|querycommitted"",
	Long:  ""Perform _lifecycle operations: package|install|queryinstalled|approveformyorg|simulatecommit|commit|querycommitted"",
{code}

Seems that it should either be {{chaincode}} or {{_lifecycle}}.

/cc [~wlahti]",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15876,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tfg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 3:05 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric/+/32227];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Rename EnsureCommitted to EnsureChaincodeCommitted,FAB-15889,40942,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,sykesm,sykesm,08/Jul/19 11:39 PM,14/Jul/19 8:32 AM,28/Oct/23 3:08 AM,14/Jul/19 8:32 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-common,,,,,,0,,,,,,"{{EnsureCommitted}} is generic enough to be assumed to apply to more than just chaincode. To help reduce the chances of confusion, the function should include {{Chaincode}} in the name (like almost all other functions in nwo/deploy.go that deal with chaincode).

I also think that godoc should be added...

/cc [~wlahti]",,sykesm,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-14196,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tfo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 2:44 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric/+/32224];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replacement test to cover bootstap.feature test network without tls,FAB-15890,40943,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Low,Won't Do,dongming,scottz,scottz,09/Jul/19 12:22 AM,30/Oct/19 12:44 AM,28/Oct/23 3:08 AM,01/Oct/19 11:44 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,,,,,,"Create a replacement test in nwo integration test suite for Item 12 of tab ""Behave Testcases"" of https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741

{quote}bootstrap.feature:Scenario Outline: FAB-3856: Verify crypto material (non-TLS) generated by cryptogen{quote}


Consider also creating and including into the automated test pipeline an interoperability / system test for a full network without TLS, in addition to existing system tests with TLS, and with mutual TLS.",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,FAB-15748,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00uze:rzczqzxs",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Integration Test,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"24/Sep/19 11:39 PM;dongming;Launch a network without TLS: https://gerrit.hyperledger.org/r/#/c/fabric/+/33696/
Network with mutual TLS: https://gerrit.hyperledger.org/r/c/fabric/+/33697/2;;;","01/Oct/19 11:44 PM;dongming;per Matt, no need to do integration test with TLS disabled;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Node 10 to list of Node.js versions supported by the SDK,FAB-15891,40944,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,pandrejko,pandrejko,pandrejko,09/Jul/19 2:20 AM,25/Jul/19 11:05 PM,28/Oct/23 3:08 AM,25/Jul/19 10:28 PM,v1.4.0,,,,,,,,,,,,,v2.0.0,,,,fabric-docs,,,,,,0,,,,,,"Looking at this Fabric documentation [+{color:#0000ff}https://hyperledger-fabric.readthedocs.io/en/release-1.4/prereqs.html#node-js-runtime-and-npm{color}+], it looks like the only Node 8 is supported by the sdk.

Need to clarify that Node 10 is supported and if we can upgrade our node projects to use node10 with the fabric sdk?",,harrisob@us.ibm.com,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:67",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),harrisob@us.ibm.com,pandrejko,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"09/Jul/19 3:12 AM;pandrejko;[~harrisob@us.ibm.com]

 

1) Would it be incorrect to say version 8.9.x or higher is supported?
2) Per Mari's question do we also need to tell them they can upgrade their existing node projects to use node 10 with the fabric sdk?
3) And should we say specifically version 10.16.0 or just 10.x.x?;;;","12/Jul/19 11:00 AM;harrisob@us.ibm.com;maybe something like ... node.js version 8 is supported from 8.9.4 and higher and version 10 is supported from 10.15.3 and higher.
I think by saying we support version 10, we are saying they can upgrade to 10 if they wish.;;;","15/Jul/19 8:45 PM;pandrejko;https://gerrit.hyperledger.org/r/#/c/fabric/+/32324/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
make Once a field and not embedded,FAB-15892,40945,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,yacovm,yacovm,yacovm,09/Jul/19 2:48 AM,09/Jul/19 6:21 AM,28/Oct/23 3:08 AM,09/Jul/19 6:21 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,,,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tg4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),yacovm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replacement for chaincodes.feature test of chaincodes names variations,FAB-15893,40946,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,scottz,scottz,09/Jul/19 5:50 AM,28/Aug/19 8:02 PM,28/Oct/23 3:08 AM,28/Aug/19 8:02 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,,,,,,"Modify lifecycle tests to use all supported chars somewhere across the tests for all peer database types to ensure the LevelDB/CouchDB systems all handle the documented supported variations. Consider modifying a lifecycle test to use CouchDB as all existing tests use LevelDB. An existing IT that uses CouchDB can be found in ledger/couchdb_indexes_test.go.

Looking throughout the existing IT tests and system tests, one can see one or more of these (but not all are covered in any one place): hyphen/numerical/underscore/lowercase/uppercase/mixed. I suggest we make sure the released documentation and help texts for the cli ""peer chaincode"" commands contain the exact list of the supported chars for the chaincode names, and ensure all the supported characters are used in each of the configurations.

Refer to Item 14 of tab ""Behave Testcases"" of [https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741], which tests underscore/upper/lower characters (and add numerical digits and hyphen and any others if supported by all the components).

One place to look for other tests is fabric/core/scc/lscc/lscc_test.go",,mrosen52,scottz,,,,,,,,,,,,,,,,,,,,,,FAB-15749,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00tgc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Integration Test,,(Please add usage information),mrosen52,scottz,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"03/Aug/19 4:24 AM;mrosen52;https://gerrit.hyperledger.org/r/c/fabric/+/32684;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replacement for ledger.feature tests of functions covered by all APIs of marbles_private,FAB-15894,40949,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,dongming,scottz,scottz,09/Jul/19 6:38 AM,12/Jun/20 12:31 AM,28/Oct/23 3:08 AM,11/Sep/19 1:31 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,,,,,,"The fabric/integration/pvtdata tests only call initMarble, readMarble, and readMarblePrivateDetails. There are other APIs that use other functionalities. Since this is our sample used to verify fabric functionality for private data, it might make sense to exercise all the APIs and ensure thorough coverage. Review coverage and consider extend the existing IT tests for pvtdata.

Refer to Items 43-44 of tab ""Behave Testcases"" of https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741, which included more of the API calls for testcase FAB-6036.
Note: the ledger.feature tests are not running daily; they were never quite finished. Nishi had planned additional changes which were waiting for developer code, but then were never merged. To ensure we encompass all the functionality she planned to test for sidedb phases 2 and 3, refer to her intended testcase steps for ledger.feature at:  https://gerrit.hyperledger.org/r/c/fabric-test/+/15451",,dongming,scottz,,,,,,,,,,,,,,,,,,,,,,FAB-15749,,,,,,,,,,,,,,,,,,,,,,,,FAB-16525,FAB-16528,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|hzwqfn:m",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Integration Test,,(Please add usage information),dongming,scottz,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,mergify/bp/release-2.2/pr-4374,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,mergify/bp/release-2.2/pr-3750,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-2.5,release-2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"23/Aug/19 12:00 AM;dongming;Ported the new marbles_private chaincode from fabric-sample to fabric/integration/chaincode/marbles_private
Add three APIs test in the pvtdata test: getMarblesByRange, transferMarble, and deleteMarble

https://gerrit.hyperledger.org/r/#/c/fabric/+/33124/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Integration Tests for fabric-samples,FAB-15896,40956,,Test Task,Backlog,FAB,Fabric,software,denyeart,,,Low,,,heatherp,heatherp,09/Jul/19 11:19 PM,09/Jul/19 11:19 PM,28/Oct/23 3:08 AM,,,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,,,,,,We should have some integration tests that run the samples on a network,,heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tik:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-samples-merge job: Invoke failed on fabcar-javascript test case,FAB-15897,40957,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,sstone1,vijaypunugubati,vijaypunugubati,09/Jul/19 11:57 PM,01/Aug/19 9:52 PM,28/Oct/23 3:08 AM,31/Jul/19 12:07 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-samples,,,,,,0,ci-blocker,,,,,"Invoke failed on fabcar-javascript test case for first time with 
Error: error endorsing invoke: rpc error: code = Unavailable desc = transport is closing - proposal response: <nil>
*Branch:* Master**

*Platform:* ** x86_64

*Error Snippet:* 
{code:java}
/00:23:06.216  + echo 'Submitting initLedger transaction to smart contract on mychannel'
00:23:06.216  Submitting initLedger transaction to smart contract on mychannel
00:23:06.216  + echo 'The transaction is sent to all of the peers so that chaincode is built before receiving the following requests'
00:23:06.216  The transaction is sent to all of the peers so that chaincode is built before receiving the following requests
00:23:06.216  + docker exec -e CORE_PEER_LOCALMSPID=Org1MSP -e CORE_PEER_ADDRESS=peer0.org1.example.com:7051 -e CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp -e CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt cli peer --tls=true --cafile=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem --orderer=orderer.example.com:7050 chaincode invoke -C mychannel -n fabcar -c '{""function"":""initLedger"",""Args"":[]}' --waitForEvent --waitForEventTimeout 300s --peerAddresses peer0.org1.example.com:7051 --peerAddresses peer1.org1.example.com:8051 --peerAddresses peer0.org2.example.com:9051 --peerAddresses peer1.org2.example.com:10051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
00:24:57.676  Error: error endorsing invoke: rpc error: code = Unavailable desc = transport is closing - proposal response: <nil>
00:24:57.676  
00:24:57.676  
00:24:57.676  
00:24:57.676   fabcar-javascript test case is FAILED / code placeholder
{code}
*Build Logs:* [https://jenkins.hyperledger.org/view/Merge/job/fabric-samples-merge-x86_64/lastFailedBuild/]",,denyeart,lehors,sstone1,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tis:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,lehors,sstone1,sykesm,vijaypunugubati,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,mergify/bp/release-2.2/pr-4374,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,main,mergify/bp/release-2.2/pr-3750,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,release-2.5,release-2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"25/Jul/19 12:32 AM;denyeart;Still failing but now the chaincode invoke error is:

{code:java}
Error: could not assemble transaction: ProposalResponsePayloads do not match 
{code}
;;;","25/Jul/19 12:48 AM;denyeart;[~sstone1] Can you investigate why the fabcar tests are continually failing in fabric-samples?

Also I noticed we are only collecting the logs for one of the peers... can this be extended to collect logs for all four peers to assist in troubleshooting?
https://github.com/hyperledger/fabric-samples/blob/master/scripts/ci_scripts/fabcar.sh#L7
;;;","26/Jul/19 2:37 AM;sstone1;[~denyeart] I've extended the logs to collect all logs from all Docker containers. Unfortunately it doesn't reveal anything useful about this problem though - the peer(s) aren't crashing, everything looks *okay*.

What I have noticed though is that the ""peer chaincode invoke"" command runs through the specified list of peers (we have four) in a serial fashion:
https://github.com/hyperledger/fabric/blob/release-1.4/peer/chaincode/common.go#L468

Because each peer needs a reasonably long time to build the chaincode container, this means that we may have to wait a while before we get to the last peer in the list. The errors are coming from the last peer in the list, and it states ""transport is closing"". The error also comes 2 minutes after the command starts, and 2 minutes is interesting as it matches some of the default gRPC timeouts for idle connections.

The connections to all of the peers is done upfront before the invokes actually happen, so I'm wondering if it's possible that we're hitting this problem:

- Script submits the command
- We connect to all four peers
- We invoke on peer 1 (40 sec)
- We invoke on peer 2 (40 sec)
- We invoke on peer 3 (40 sec)
- We invoke on peer 4... but by this point the connection we created 2 minutes ago is closed by the peer as we didn't do anything with it

Sound feasible? I'm tempted to chuck in the change to make the calls to the peers in parallel anyway, as it will improve performance for anyone using the command in this way (the SDKs do these calls in parallel).;;;","26/Jul/19 3:23 AM;lehors;Interesting analysis [~sstone1]. I think it's worth a try for sure.;;;","26/Jul/19 4:02 AM;denyeart;[~sstone1] Seems reasonable and I agree it should be done in parallel regardless.
[~wlahti] Is familiar with that CLI code if you need any help.;;;","31/Jul/19 12:07 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/32531/ merged

Will close. We can re-open if fabric-samples merge job continues to fail.;;;","01/Aug/19 3:35 AM;sykesm;> Sound feasible? I'm tempted to chuck in the change to make the calls to the peers in parallel anyway, as it will improve performance for anyone using the command in this way (the SDKs do these calls in parallel).

The idea is nice but the reality is that it will end up putting a lot more strain on the system when doing the docker builds.  Basically, the cycles consumed by the docker builds can dim the lights in the lab; they're very disruptive.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Refactor logic for querying approvals to return map lower in the stack,FAB-15898,40959,39057,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,10/Jul/19 1:48 AM,22/Jul/19 11:48 PM,28/Oct/23 3:08 AM,22/Jul/19 11:48 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,Avoid interdependency between the index positions of the orgStates and the approvals. See review comment here: [https://gerrit.hyperledger.org/r/c/fabric/+/31926/20/core/chaincode/lifecycle/scc.go#97],,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tj8:",,,,Unset,Unset,v2.0,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 2:55 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric/+/32225];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Doc Node OU Support for admins and orderers,FAB-15899,40960,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,pandrejko,pandrejko,10/Jul/19 3:35 AM,03/Dec/19 8:59 AM,28/Oct/23 3:08 AM,03/Dec/19 8:59 AM,v1.4.0,v2.0.0,,,,,,,,,,,,v1.4.3,v2.0.0,,,fabric-docs,,,,,,0,,,,,,"see FAB-15388 and FAB-12620



The fabric doc that needs to be updated is https://hyperledger-fabric.readthedocs.io/en/release-1.4/msp.html#identity-classification
it mentions `client` and `peer` support since v1.1, need to add `admin` and `orderer` support as of v1.4.2.",,angelo.decaro,denyeart,joaquimpedrooliveira,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15907,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:66",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,joaquimpedrooliveira,pandrejko,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 3:53 PM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/fabric/+/32235/;;;","27/Aug/19 1:30 AM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/33044/ release-1.4;;;","27/Aug/19 1:30 AM;denyeart;Some final edits were made in release-1.4, these need to be applied to master as well.;;;","23/Sep/19 10:38 PM;pandrejko;[~denyeart] - Were the final edits applied to master? Can this be closed?;;;","03/Dec/19 6:55 AM;pandrejko;[~angelo.decaro]I think this can be closed now?  https://hyperledger-fabric.readthedocs.io/en/release-1.4/msp.html#identity-classification;;;","03/Dec/19 8:59 AM;denyeart;Looks like [~negupta] cherry picked the final edits back to master in https://gerrit.hyperledger.org/r/#/c/fabric/+/33204/ , we are good to close this now.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Document HSM capability for Fabric,FAB-15900,40961,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,negupta,ashutosh_kumar,ashutosh_kumar,10/Jul/19 4:06 AM,03/Jan/20 12:22 AM,28/Oct/23 3:08 AM,04/Dec/19 4:25 AM,,,,,,,,,,,,,,v1.4.4,v2.0.0,,,fabric-docs,,,,,,0,,,,,,"Steps to enable HSM Signing and verification should be documented for Fabric. The equivalent for Fabric CA is :

https://hyperledger-fabric-ca.readthedocs.io/en/latest/users-guide.html#hsm",,ashutosh_kumar,ChristopherFerris,denyeart,joaquimpedrooliveira,mastersingh24,negupta,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwrrq:68",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ashutosh_kumar,ChristopherFerris,denyeart,joaquimpedrooliveira,mastersingh24,negupta,pandrejko,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 4:17 AM;pandrejko;Create a new topic under: https://hyperledger-fabric.readthedocs.io/en/latest/ops_guide.html#;;;","13/Jul/19 6:06 AM;negupta;https://gerrit.hyperledger.org/r/#/c/fabric/+/32298/;;;","10/Aug/19 3:44 AM;negupta;Waiting for review from [~ashutosh_kumar]

FYI [~ales] [~adc];;;","21/Aug/19 1:36 AM;pandrejko;{color:#1d1c1d}The softhsm driver / library is not available in the fabric-ca-server container.
You will need to install it separately and/or attempt to mount it.The easiest thing is to create a Dockerfile with the following contents:FROM hyperledger/fabric-ca:2.0.0-alpha
RUN echo ""[http://dl-cdn.alpinelinux.org/alpine/v3.10/main]"" >> /etc/apk/repositories \
&& echo ""[http://dl-cdn.alpinelinux.org/alpine/v3.10/community]"" >> /etc/apk/repositories \
&& app update \
&& app add softhsm;{color}
[{color:#616061}10:54 AM{color}|https://ibm-blockchain.slack.com/archives/DA8Q5D6RZ/p1566312854009100]
{color:#1d1c1d}(from Gari){color};;;","28/Sep/19 12:08 AM;mastersingh24;[~negupta]  [~denyeart]  Should we backport this to 1.4 as well?;;;","31/Oct/19 2:49 AM;denyeart;[~negupta]

I missed this comment earlier... agree we should backport to 1.4. You could also look at my last comments in [https://gerrit.hyperledger.org/r/#/c/fabric/+/32298/] now that the config work is deferred from v2.0.;;;","31/Oct/19 10:24 PM;ChristopherFerris;[~negupta] [~pandrejko] is this complete?;;;","01/Nov/19 10:16 PM;negupta;[~ChristopherFerris] This was backported to 1.4, but I am going to use this Jira to make a change to the orderer config that dave suggested;;;","03/Jan/20 12:22 AM;denyeart;orderer config backported to release-1.4 in https://github.com/hyperledger/fabric/pull/349;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Test Case: Sidedb testing with marbles02_private,FAB-15901,40962,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,dongming,rameshthoomu,rameshthoomu,10/Jul/19 4:45 AM,01/Aug/19 12:01 PM,28/Oct/23 3:08 AM,01/Aug/19 12:01 PM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-quality,,,,,,0,,,,,,"Execute below test case to validate fabric functionality on sidedb testing with marbles02 private chaincode.

TC# Sidedb testing with marbles02_private
Environment: k8s on IKS - Please refer FAB-15885 for the network config details.
PTE Client: vlaunch
Scripts:
use gen_cfgInputs.sh to create and join channels, perform the install and instantiate on all the peers in the org.
use test_driver.sh to run the tx",,dongming,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,FAB-15874,,,,,,,,,,,,,,,,,,FAB-16074,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tjg:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,System Test,,(Please add usage information),dongming,rameshthoomu,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"19/Jul/19 2:30 AM;dongming;I have used map chaincode to execute private DB in FAB-15797 rollback test successfully.;;;","01/Aug/19 12:01 PM;scottz;Being replaced in v2.0 by FAB-16074.
Was replaced in v1.4.2 by a test using mapkeys cc instead of marbles02_private since PTE still needs to be enhanced to use the latest version of it.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Add ""sbecc"" chaincode support in gen_cfgInputs.sh",FAB-15902,40963,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,dongming,rameshthoomu,rameshthoomu,10/Jul/19 4:59 AM,21/Aug/19 6:35 AM,28/Oct/23 3:08 AM,10/Jul/19 5:00 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"Existing gen_cfgInputs.sh script doesn't allow to feed *sbecc* chaincode. Add this support to execute ""state based endorsement"" test cases.",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16066,,,,,,,,,FAB-15873,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00tjo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Replacement for Behave chaincodes.feature cc2cc tests with 2 channels or invalid channel names args,FAB-15903,40964,,Test Task,Closed,FAB,Fabric,software,denyeart,,,High,Done,dongming,scottz,scottz,10/Jul/19 5:03 AM,10/Sep/19 4:11 AM,28/Oct/23 3:09 AM,10/Sep/19 4:11 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-quality,,,,,,0,,,,,,">>>>>  

* Note: after this task was created, some UT tests were found (in fabric/core/chaincode/exectransaction_test.go). Whoever implements this task should examine the scenarios covered by those cc2cc tests, and maybe consider whether to extend those instead of new integration tests.

>>>>>

 This task is to ensure coverage in the fabric/integration/e2e tests for Items 19,21,22,49 of the ""Behave Testcases"" tab of [https://docs.google.com/spreadsheets/d/1MIz_E0iFC3lCJGCmXCmRvSYt5yvMhzhSK6Bop0QJOAY/edit#gid=663331741].

The relevant behave tests at [https://github.com/hyperledger/fabric-test/blob/master/feature/chaincodes.feature], which are being deprecated, do the following:
 * +Item 19+ old lifecycle and +Item 49+ new lifecycle - validate correct functionality of cc2cc when the chaincodes installed in different channels
 * +Item 21+ - use incorrect channel name in the invoke, to ensure proper rejection response code and error msg, when both chaincodes in *same* channel
 * +Item 22+ - use incorrect channel name in the invoke, to ensure proper rejection response code and error msg, when chaincodes in *different* channels

It should be easy to insert statments inside existing fabric/integration/e2e/lifecycle test to invoke with invalid channel name arg before using valid one, for single channel (Item 21). And do the same for the 2-channel testcase (Item 22), once that is written (Item 19/49).

Existing CR which adds the lifecycle cc2cc integration/interoperability tests: [https://gerrit.hyperledger.org/r/c/fabric/+/31730]",,dongming,scottz,wlahti,,,,,,,,,,,,,,,,,,,,,FAB-15749,FAB-15420,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15745,,,No,,Unset,No,,,"1|i00uze:rzc",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Extended Unit Test,,(Please add usage information),dongming,scottz,wlahti,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"29/Aug/19 5:26 AM;dongming;item 19 is covered in FAB-15992,
items 21 and 22 are covered in https://gerrit.hyperledger.org/r/#/c/fabric/+/33256/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add Tests for commit hash with rollback and reset,FAB-15904,40965,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,10/Jul/19 5:29 AM,13/Jul/19 12:17 AM,28/Oct/23 3:09 AM,13/Jul/19 12:17 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tk4:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 5:45 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/32229/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
PTE sends tx to localhost on service discovery tests,FAB-15905,40966,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,rameshthoomu,rameshthoomu,10/Jul/19 5:39 AM,11/Jul/19 10:47 PM,28/Oct/23 3:09 AM,11/Jul/19 10:47 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,,,dongming,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15858,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00tkc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dongming,rameshthoomu,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"11/Jul/19 12:03 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/32241;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Addess minor review comments,FAB-15906,40967,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,10/Jul/19 6:37 AM,11/Jul/19 12:55 AM,28/Oct/23 3:09 AM,11/Jul/19 12:55 AM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-ledger,,,,,,0,,,,,,"Address review comments
https://gerrit.hyperledger.org/r/#/c/fabric/+/31964/12/core/peer/mock_helpers.go@78
and
https://gerrit.hyperledger.org/r/#/c/fabric/+/31988/12/core/ledger/kvledger/tests/v11_test.go@38",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tkk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 6:50 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/32230/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fabric-CA Doc Node OU Support for admins and orderers,FAB-15907,40971,,Documentation,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid,angelo.decaro,angelo.decaro,angelo.decaro,10/Jul/19 5:17 PM,10/Jul/19 5:19 PM,28/Oct/23 3:09 AM,10/Jul/19 5:19 PM,v1.4.0,v2.0.0,,,,,,,,,,,,,,,,fabric-ca,,,,,,0,,,,,,"see FAB-15388 and FAB-12620



The fabric doc that needs to be updated is https://hyperledger-fabric.readthedocs.io/en/release-1.4/msp.html#identity-classification
it mentions `client` and `peer` support since v1.1, need to add `admin` and `orderer` support as of v1.4.2.",,angelo.decaro,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15899,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tl0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,pandrejko,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add release notes for v1.4.2,FAB-15908,40975,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,denyeart,denyeart,10/Jul/19 10:57 PM,18/Jul/19 2:52 AM,28/Oct/23 3:09 AM,18/Jul/19 2:52 AM,,,,,,,,,,,,,,v1.4.2,,,,fabric-release,,,,,,0,,,,,,,,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tlo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"10/Jul/19 11:12 PM;denyeart;https://gerrit.hyperledger.org/r/#/c/fabric/+/32240/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
run-unit-test script should not test packages that are not part of TEST_PKGS,FAB-15909,40976,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,dereckluo,dereckluo,10/Jul/19 11:14 PM,03/Aug/19 5:21 AM,28/Oct/23 3:09 AM,03/Aug/19 5:21 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"In run-unit-test.sh script, there are some issues between TEST_PKG, pluginsenabled, pkcs11 tags, and conditional packages. 

for example: 

{{TEST_PKGS=github.com/hyperledger/fabric/core/comm/... ./scripts/run-unit-tests.sh}} ends up running tests in {{core/scc}} and {{fabric/bccsp}} because of the three phases to test.

{code}
$ TEST_PKGS=github.com/hyperledger/fabric/core/comm/... ./scripts/run-unit-tests.sh 

ok  	github.com/hyperledger/fabric/core/comm	(cached)	coverage: 85.4% of statements
?   	github.com/hyperledger/fabric/core/comm/testpb	[no test files]

real	0m0.635s
user	0m0.901s
sys	0m0.655s
pluginsenabled
ok  	github.com/hyperledger/fabric/core/scc	(cached)	coverage: 84.1% of statements

real	0m0.853s
user	0m1.185s
sys	0m1.036s
pkcs11
ok  	github.com/hyperledger/fabric/bccsp	(cached)	coverage: 68.2% of statements
ok  	github.com/hyperledger/fabric/bccsp/factory	(cached)	coverage: 81.3% of statements
?   	github.com/hyperledger/fabric/bccsp/factory/test-plugin	[no test files]
ok  	github.com/hyperledger/fabric/bccsp/idemix	(cached)	coverage: 80.0% of statements
ok  	github.com/hyperledger/fabric/bccsp/idemix/bridge	(cached)	coverage: 97.0% of statements
ok  	github.com/hyperledger/fabric/bccsp/idemix/handlers	(cached)	coverage: 97.3% of statements
?   	github.com/hyperledger/fabric/bccsp/idemix/handlers/mock	[no test files]
?   	github.com/hyperledger/fabric/bccsp/mocks	[no test files]
ok  	github.com/hyperledger/fabric/bccsp/pkcs11	3.551s	coverage: 26.0% of statements
ok  	github.com/hyperledger/fabric/bccsp/signer	(cached)	coverage: 100.0% of statements
ok  	github.com/hyperledger/fabric/bccsp/sw	14.698s	coverage: 90.1% of statements
?   	github.com/hyperledger/fabric/bccsp/sw/mocks	[no test files]
ok  	github.com/hyperledger/fabric/bccsp/utils	(cached)	coverage: 85.5% of statements

real	0m16.053s
user	1m13.422s
sys	0m2.977s
{code}

There may also be interaction issues between {{TEST_PKGS}} and conditional packages (gossip).

",,dereckluo,jyellick,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/19 11:14 PM;dereckluo;image-2019-07-10-10-14-11-254.png;https://jira.hyperledger.org/secure/attachment/17390/image-2019-07-10-10-14-11-254.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:i",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dereckluo,jyellick,sykesm,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jul/19 1:45 PM;jyellick;https://gerrit.hyperledger.org/r/c/fabric/+/32262;;;","02/Aug/19 11:59 PM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32673 FAB-15909 filter pkcs11/plugin in unit-test script;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabric-sdk-java artifact publishing,FAB-15911,40978,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Won't Do,,jtonline,jtonline,10/Jul/19 11:46 PM,22/Oct/19 7:34 PM,28/Oct/23 3:09 AM,22/Oct/19 7:34 PM,,,,,,,,,,,,,,,,,,fabric-sdk-java,,,,,,0,,,,,,"fabric-sdk-java currently has a group ID of org.hyperledger.fabric-sdk-java and an artifact ID of fabric-sdk-java

For consistency it should have a group ID of org.hyperledger.fabric along with both fabric-contract-java and fabric-gateway-java

In addition, fabric-sdk-java snapshots are currently being published to oss.sonatype.org when they should be published to nexus.hyperledger.org along with fabric-contract-java and fabric-gateway-java",,heatherp,jtonline,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tm4:",,,,Unset,Unset,,"Add a fabric-gateway-java dependency where it is not available locally, e.g.

implementation 'org.hyperledger.fabric:fabric-gateway-java:1.4.0-SNAPSHOT'

",,Unset,,,,,,Unset,,Unset,,(Please add usage information),heatherp,jtonline,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"22/Oct/19 7:34 PM;heatherp;Done for the high level (gateway), not doing for the low level - sorry James!;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Multiple security issues in fabric-test,FAB-15912,40979,,Epic,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,ryjones,ryjones,10/Jul/19 11:47 PM,21/Aug/19 4:32 AM,28/Oct/23 3:09 AM,21/Aug/19 2:32 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"[^github-alerts.pdf]

Some test tools in fabric-test repo contain dependencies with outdated versions.",,ryjones,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"10/Jul/19 11:50 PM;ryjones;github-alerts.pdf;https://jira.hyperledger.org/secure/attachment/17391/github-alerts.pdf",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,ghx-label-1,,security,To Do,No,,Unset,No,,,"1|hzx30f:x",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),ryjones,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"21/Aug/19 2:32 AM;scottz;[~ryjones] what is the requirement regarding branch/releases? 
The two linked issues have been solved in master branch, corresponding to our upcoming v2.0 release of hyperledger fabric. We still maintain branch release-1.4 as well. If the security issues must be addressed there as well, then just reopen and we can try to address them too. However, I am hoping not to go back to update all the previous release branches.;;;","21/Aug/19 3:15 AM;ryjones;[~scottz] that is a question for your release management team. I can't answer it. If 1.4 is supported, it probably needs ported? Not sure.

 ;;;","21/Aug/19 4:15 AM;scottz;hmmm. yeah; makes sense. I will port them to 1.4, just in case.
If you still get ""security alert"" emails for fabric-test repo after tomorrow, they will be based on the fact that the tools exist in previous release branches of the code base, and so we can ignore them. But will we be able to differentiate those alerts from any new alerts for new code in latest release?;;;","21/Aug/19 4:32 AM;ryjones;Not sure. Wait for next week's report to be shipped, I guess?;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Panic in ledger management code during shutdown when running integration tests,FAB-15914,40981,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,11/Jul/19 12:58 AM,28/Jan/20 12:22 AM,28/Oct/23 3:09 AM,28/Jan/20 12:22 AM,,,,,,,,,,,,,,,,,,fabric-gossip,fabric-peer,,,,,0,,,,,,"{code}
[e][org2.peer2] panic: runtime error: invalid memory address or nil pointer dereference
[e][org2.peer2] [signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x48e44b9]
[e][org2.peer2] 
[e][org2.peer2] goroutine 1 [running]:
[e][org2.peer2] github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*LedgerMgr).closeLedger(0xc000143d60, 0xc00271a120, 0xb)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:168 +0x99
[e][org2.peer2] github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*closableLedger).Close(0xc002714c60)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:181 +0x40
[e][org2.peer2] github.com/hyperledger/fabric/gossip/service.privateHandler.close(0x51398e0, 0xc00289cb40, 0x5177ac0, 0xc000517ca0, 0xae00368, 0xc0028a6f00, 0x51715e0, 0xc00289cb70, 0x513d0c0, 0x4fcbc70, ...)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:161 +0x31
[e][org2.peer2] github.com/hyperledger/fabric/gossip/service.(*GossipService).Stop(0xc0005679a0)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:472 +0x2c8
[e][org2.peer2] github.com/hyperledger/fabric/internal/peer/node.serve(0x5c27628, 0x0, 0x0, 0x0, 0x0)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/internal/peer/node/start.go:707 +0x443c
[e][org2.peer2] github.com/hyperledger/fabric/internal/peer/node.glob..func1(0x5be1ba0, 0x5c27628, 0x0, 0x0, 0x0, 0x0)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/internal/peer/node/start.go:128 +0xf1
[e][org2.peer2] github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x5be1ba0, 0x5c27628, 0x0, 0x0, 0x5be1ba0, 0x5c27628)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:826 +0x465
[e][org2.peer2] github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x5be20a0, 0xc000585f60, 0x1, 0x1)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:914 +0x2fc
[e][org2.peer2] github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(...)
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:864
[e][org2.peer2] main.main()
[e][org2.peer2] 	/Users/sykesm/workspace/fabric/src/github.com/hyperledger/fabric/cmd/peer/main.go:51 +0x416
{code}

Can be recreated by running the e2e suite with {{ginkgo -r -p}}.",,denyeart,jyellick,manish-sethi,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15915,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00wur:0r",,,,Unset,Unset,v2.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jyellick,manish-sethi,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 1:03 AM;sykesm;Doesn't appear that parallel execution is needed as I just hit it in multiple peers without running tests in parallel.;;;","11/Jul/19 1:41 AM;sykesm;This is hitting builds in gerrit.

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10070/console;;;","12/Jul/19 10:38 PM;sykesm;Will integrated a tactical fix earlier but someone from the ledger should probably try to understand the ""correct"" fix.;;;","24/Sep/19 5:47 AM;jyellick;[~manish-sethi] can you take a look?;;;","09/Oct/19 12:50 PM;manish-sethi;[~jyellick] - This could be caused either of the followings

1) calling multiple times ""close()"" on a ledger

2) first calling Close() on ledgerMgr and then calling Close on individual ledgers

Both the situation are covered on the ledger side by the fix that [~wlahti] submitted for FAB-15915 (simply by ignoring the subsequent close calls i.e., making them a noop).

I think that it's a decent fix as typically you would expect for a close operation on a resource. However, if some time we would want to investigate further where in gossip call is this happening multiple times and fix that, we can keep this Jira around.;;;","28/Jan/20 12:22 AM;denyeart;Believe this is resolved with Will's fix.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Gossip closes ledger twice, resulting in a panic at end of integration tests",FAB-15915,40982,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,11/Jul/19 1:32 AM,15/Jul/19 12:00 PM,28/Oct/23 3:09 AM,15/Jul/19 12:00 PM,,,,,,,,,,,,,,v2.0.0,,,,fabric-gossip,fabric-ledger,,,,,0,,,,,,"After the recent rework of ledger code via FAB-15755, at the end of integration test runs on the current master a panic occurs in ledgermgmt: 
{code:java}
[e][org1.peer1] 2019-07-10 12:30:24.084 EDT [nodeCmd] handleSignals -> INFO 157 Received signal: 15 (terminated)
[e][org1.peer1] 2019-07-10 12:30:24.084 EDT [nodeCmd] handleSignals -> INFO 157 Received signal: 15 (terminated)
[e][org1.peer1] 2019-07-10 12:30:24.084 EDT [gossip.service] Stop -> INFO 158 Stopping chain testchannel
[e][org1.peer1] 2019-07-10 12:30:24.084 EDT [gossip.service] Stop -> INFO 159 Stopping leader election for testchannel
[e][org1.peer1] panic: runtime error: invalid memory address or nil pointer dereference
[e][org1.peer1] [signal SIGSEGV: segmentation violation code=0x1 addr=0x18 pc=0x48f9a79]
[e][org1.peer1] 
[e][org1.peer1] goroutine 1 [running]:
[e][org1.peer1] github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*LedgerMgr).closeLedger(0xc0000c6380, 0xc00277f630, 0xb)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:168 +0x99
[e][org1.peer1] github.com/hyperledger/fabric/core/ledger/ledgermgmt.(*closableLedger).Close(0xc002842060)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/core/ledger/ledgermgmt/ledger_mgmt.go:181 +0x40
[e][org1.peer1] github.com/hyperledger/fabric/gossip/service.privateHandler.close(0x5139700, 0xc002668f30, 0x51778a0, 0xc00261be30, 0x7e60918, 0xc0028ed200, 0x51713c0, 0xc002668f60, 0x513cee0, 0x4fcbaa0, ...)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:161 +0x31
[e][org1.peer1] github.com/hyperledger/fabric/gossip/service.(*GossipService).Stop(0xc000439c20)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/gossip/service/gossip_service.go:472 +0x2c8
[e][org1.peer1] github.com/hyperledger/fabric/internal/peer/node.serve(0x5c24628, 0x0, 0x0, 0x0, 0x0)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/internal/peer/node/start.go:707 +0x443c
[e][org1.peer1] github.com/hyperledger/fabric/internal/peer/node.glob..func1(0x5bdeba0, 0x5c24628, 0x0, 0x0, 0x0, 0x0)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/internal/peer/node/start.go:128 +0xf1
[e][org1.peer1] github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).execute(0x5bdeba0, 0x5c24628, 0x0, 0x0, 0x5bdeba0, 0x5c24628)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:826 +0x465
[e][org1.peer1] github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0x5bdf0a0, 0xc000385f60, 0x1, 0x1)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:914 +0x2fc
[e][org1.peer1] github.com/hyperledger/fabric/vendor/github.com/spf13/cobra.(*Command).Execute(...)
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/vendor/github.com/spf13/cobra/command.go:864
[e][org1.peer1] main.main()
[e][org1.peer1]  /Users/wlahti/gopath/src/github.com/hyperledger/fabric/cmd/peer/main.go:51 +0x416 {code}
This is due to gossip first closing the ""chain"" and then the ""privateHandler"" for that ""chain"" here: [https://github.com/hyperledger/fabric/blob/master/gossip/service/gossip_service.go#L471-L472]

cc: [~manish-sethi]",,denyeart,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15914,,FAB-15755,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tn0:",,,,Unset,Unset,,"This is reproducible on master, I assume in every integration test suite. Just run an integration test with the -v flag and you should see this at the end right before the test finishes. ",,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,wlahti,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jul/19 2:00 AM;wlahti;An initial fix to avoid the panic: [https://gerrit.hyperledger.org/r/c/fabric/+/32242]

I'm not familiar enough with gossip at the moment to determine the proper plan of action for the code that's causing this.;;;","15/Jul/19 11:59 AM;denyeart;[~wlahti] I assume this one can be closed and the additional investigation can be done in FAB-15914.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
security vulnerabilities of tool dependencies for behave test tool,FAB-15916,40983,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,11/Jul/19 1:54 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,21/Aug/19 2:28 AM,,,,,,,,,,,,,,v1.4.3,v2.0.0,,,fabric-quality,,,,,,0,,,,,,"Refer to fabric-test/feature-upgrade/requirements.txt
Fixes required:
cryptography : Upgrade to ~> 2.3
pyyaml : Upgrade to ~> 4.2b1
pyopenssl : Upgrade to ~> 17.5.0

Or, if this is unused, just delete the entire feature-upgrade folder.  :)",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15912,,,No,,Unset,No,,,"1|hzwqfn:n",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,true,"20/Aug/19 11:31 PM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/33042;;;","21/Aug/19 4:04 AM;scottz;cherrypick to release-1.4: https://gerrit.hyperledger.org/r/c/fabric-test/+/33055;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
security vulnerabilities of tool dependencies for TestViewer,FAB-15917,40984,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,scottz,scottz,11/Jul/19 2:15 AM,12/Jun/20 12:31 AM,28/Oct/23 3:09 AM,21/Aug/19 2:28 AM,,,,,,,,,,,,,,v1.4.3,v2.0.0,,,fabric-quality,,,,,,0,,,,,,"Refer to fabric-test/tools/Testviewer/app/package-lock.json
Fixes required to upgrade several package dependencies to these minimum versions:

# adm-zip 0.4.11
# url-parse 1.4.3
# timespan (low-severity vulnerability CVE-2017-16115, no secure version available)
# cryptiles 4.1.2
# webpack-dev-server 3.1.11
# lodash 4.17.11
# extend 3.0.2
# tar 2.2.2
# axios 0.18.1
# fstream 1.0.12
# ws 3.3.1
# js-yaml 3.13.1
# handlebars 4.0.14
# mem 4.0.0

Or, if this TestViewer tool is unused and no plans to use it further, we could just delete the entire Testviewer folder. :)",,scottz,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-15912,,,No,,Unset,No,,,"1|hzwqfn:o",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),scottz,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,release-1.4,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,,,,,,true,"20/Aug/19 11:16 PM;scottz;https://gerrit.hyperledger.org/r/c/fabric-test/+/33041;;;","21/Aug/19 4:06 AM;scottz;cherrypick to release-1.4: https://gerrit.hyperledger.org/r/c/fabric-test/+/33053;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add anchor peer update creation to network launcher,FAB-15918,40985,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,11/Jul/19 2:31 AM,19/Jul/19 9:51 PM,28/Oct/23 3:09 AM,19/Jul/19 9:51 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add anchor peer update creation to network launcher,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00tno:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"19/Jul/19 9:51 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32244/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add orderer endpoints list for organizations in NL,FAB-15919,40986,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,11/Jul/19 3:28 AM,19/Jul/19 9:54 PM,28/Oct/23 3:09 AM,19/Jul/19 9:54 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Add orderer endpoints list for organizations in NL,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00tnw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"19/Jul/19 9:53 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32248/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer does not respond to any calls while couchdb statedb is rebuilding,FAB-15920,40987,,Bug,Closed,FAB,Fabric,software,denyeart,,,Highest,Done,dereckluo,dbshah,dbshah,11/Jul/19 3:59 AM,30/Jun/20 10:44 PM,28/Oct/23 3:09 AM,30/Jun/20 10:42 PM,v1.2.1,v1.4.4,v1.4.6,,,,,,,,,,,v2.0.0,,,,fabric-ledger,fabric-peer,,,,,1,peer,,,,,"Scenario: Restart peer with thousands of blocks committed, with statedb as couch. The peer starts building couchdb indexes for all the channels that it is part of. During this period, the peer is listening on the webserver for `peerlisten address`, but does not respond to any requests. In fact, the requests fail at tls handshake stage. Once the indexes are built, the peer starts responding to all the requests.

 
 Peer logs:
{code:java}
2019-07-09 23:45:10.979 UTC [nodeCmd] serve -> INFO 001 Starting peer:
 Version: 1.2.1
 Commit SHA: 5017e4d
 Go version: go1.10
 OS/Arch: linux/amd64
 Experimental features: false
 Chaincode:
 Base Image Version: 0.4.10
 Base Docker Namespace: <>
 Base Docker Label: org.hyperledger.fabric
 Docker Namespace: <>
2019-07-09 23:45:10.979 UTC [ledgermgmt] initialize -> INFO 002 Initializing ledger mgmt
2019-07-09 23:45:10.979 UTC [kvledger] NewProvider -> INFO 003 Initializing ledger provider
2019-07-09 23:45:14.550 UTC [couchdb] handleRequest -> WARN 004 Retrying couchdb request in 125ms. Attempt:1 Error:Get http://localhost:5984/: dial tcp [::1]:5984: connect: connection refused
2019-07-09 23:45:14.749 UTC [couchdb] handleRequest -> WARN 005 Retrying couchdb request in 250ms. Attempt:2 Error:Get http://localhost:5984/: dial tcp [::1]:5984: connect: connection refused
2019-07-09 23:45:15.049 UTC [couchdb] handleRequest -> WARN 006 Retrying couchdb request in 500ms. Attempt:3 Error:Get http://localhost:5984/: dial tcp [::1]:5984: connect: connection refused
2019-07-09 23:45:15.550 UTC [couchdb] handleRequest -> WARN 007 Retrying couchdb request in 1s. Attempt:4 Error:Get http://localhost:5984/: dial tcp [::1]:5984: connect: connection refused
2019-07-09 23:45:16.551 UTC [couchdb] handleRequest -> WARN 008 Retrying couchdb request in 2s. Attempt:5 Error:Get http://localhost:5984/: dial tcp [::1]:5984: connect: connection refused
2019-07-09 23:45:18.552 UTC [couchdb] handleRequest -> WARN 009 Retrying couchdb request in 4s. Attempt:6 Error:Get http://localhost:5984/: dial tcp [::1]:5984: connect: connection refused
2019-07-09 23:45:23.862 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 00a Created state database _users
2019-07-09 23:45:24.056 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 00b Created state database _replicator
2019-07-09 23:45:24.254 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 00c Created state database _global_changes
2019-07-09 23:45:26.275 UTC [kvledger] NewProvider -> INFO 00d ledger provider Initialized
2019-07-09 23:45:26.278 UTC [ledgermgmt] initialize -> INFO 00e ledger mgmt initialized
2019-07-09 23:45:26.278 UTC [peer] func1 -> INFO 00f Auto-detected peer address: 172.30.253.30:31002
2019-07-09 23:45:26.279 UTC [peer] func1 -> INFO 010 Returning xyz:31002
2019-07-09 23:45:26.279 UTC [peer] func1 -> INFO 011 Auto-detected peer address: 172.30.253.30:31002
2019-07-09 23:45:26.279 UTC [peer] func1 -> INFO 012 Returning xyz:31002
2019-07-09 23:45:26.280 UTC [nodeCmd] serve -> INFO 013 Starting peer with TLS enabled
2019-07-09 23:45:26.283 UTC [eventhub_producer] start -> INFO 014 Event processor started
2019-07-09 23:45:26.349 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 015 Entering computeChaincodeEndpoint with peerHostname: xyz
2019-07-09 23:45:26.349 UTC [nodeCmd] computeChaincodeEndpoint -> INFO 016 Exit with ccEndpoint: n7fd8fb7f49e74483b5188e4d0bcf18d5-org1-peer1:31004
2019-07-09 23:45:26.351 UTC [sccapi] registerSysCC -> INFO 017 system chaincode cscc(github.com/hyperledger/fabric/core/scc/cscc) registered
2019-07-09 23:45:26.351 UTC [sccapi] registerSysCC -> INFO 018 system chaincode lscc(github.com/hyperledger/fabric/core/scc/lscc) registered
2019-07-09 23:45:26.351 UTC [sccapi] registerSysCC -> INFO 019 system chaincode qscc(github.com/hyperledger/fabric/core/scc/qscc) registered
2019-07-09 23:45:26.356 UTC [msp] DeserializeIdentity -> INFO 01a Obtaining identity
2019-07-09 23:45:26.358 UTC [gossip/gossip] NewGossipService -> INFO 01b Creating gossip service with self membership of \{ [] [63 206 236 66 22 35 137 73 216 104 87 106 49 5 225 117 205 116 175 190 17 106 200 146 66 252 5 86 141 158 155 114] xyz:31002 <nil> <nil>}
2019-07-09 23:45:26.359 UTC [gossip/gossip] NewGossipService -> WARN 01c External endpoint is empty, peer will not be accessible outside of its organization
2019-07-09 23:45:26.359 UTC [gossip/gossip] start -> INFO 01d Gossip instance xyz:31002 started
2019-07-09 23:45:26.360 UTC [cscc] Init -> INFO 01e Init CSCC
2019-07-09 23:45:26.360 UTC [sccapi] deploySysCC -> INFO 01f system chaincode cscc/(github.com/hyperledger/fabric/core/scc/cscc) deployed
2019-07-09 23:45:26.361 UTC [sccapi] deploySysCC -> INFO 020 system chaincode lscc/(github.com/hyperledger/fabric/core/scc/lscc) deployed
2019-07-09 23:45:26.362 UTC [qscc] Init -> INFO 021 Init QSCC
2019-07-09 23:45:26.362 UTC [sccapi] deploySysCC -> INFO 022 system chaincode qscc/(github.com/hyperledger/fabric/core/scc/qscc) deployed
2019-07-09 23:45:26.362 UTC [nodeCmd] serve -> INFO 023 Deployed system chaincodes
2019-07-09 23:45:26.369 UTC [peer] Initialize -> INFO 024 Loading chain defaultchannel
2019-07-09 23:45:26.369 UTC [ledgermgmt] OpenLedger -> INFO 025 Opening ledger with id = defaultchannel
2019-07-09 23:45:26.963 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 026 Created state database defaultchannel_
2019-07-09 23:45:28.462 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 027 Created state database defaultchannel_lscc
2019-07-09 23:45:28.549 UTC [cceventmgmt] HandleStateUpdates -> INFO 028 Channel [defaultchannel]: Handling LSCC state update for chaincode [cc]
2019-07-09 23:45:28.851 UTC [couchdb] CreateDatabaseIfNotExist -> INFO 029 Created state database defaultchannel_cc
{code}
{noformat}
# ss -l
Netid State      Recv-Q Send-Q                                         Local Address:Port                                                          Peer Address:Port                
tcp   LISTEN     0      128                                                        *:6984                                                                     *:*                    
tcp   LISTEN     0      128                                                127.0.0.1:9001                                                                     *:*                    
tcp   LISTEN     0      128                                                        *:5984                                                                     *:*                    
tcp   LISTEN     0      128                                                        *:8000                                                                     *:*                    
tcp   LISTEN     0      128                                                       :::2375                                                                    :::*                    
tcp   LISTEN     24     128                                                       :::31002                                                                   :::*                    
tcp   LISTEN     21     128                                                       :::31003                                                                   :::*                    
tcp   LISTEN     0      128                                                       :::31004                                                                   :::*     
{noformat}
31002 is peer address port, 31003 is the eventhub port, 31004 is the chaincod listen address port.

Calls to 31002 and 31003 get stuck in the tls handshake phase as below.
{code:java}
# curl -vvvk https://localhost:31002
* Rebuilt URL to: https://localhost:31002/
*   Trying ::1...
* TCP_NODELAY set
* Connected to localhost (::1) port 31002 (#0)
* ALPN, offering h2
* ALPN, offering http/1.1
* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: /etc/ssl/certs
* TLSv1.2 (OUT), TLS header, Certificate Status (22):
* TLSv1.2 (OUT), TLS handshake, Client hello (1):
{code}
Expected behavior: The peer should either not open up the webservers while it is still working on the indexes, or should give some error back saying that the peer is not ready.",,dbshah,denyeart,dereckluo,jyellick,lmars,manish-sethi,ymlbright,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|hzwqfn:p",,,,Unset,Unset,To Do,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),dbshah,denyeart,dereckluo,jyellick,lmars,manish-sethi,ymlbright,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jul/19 4:01 AM;jyellick;[~denyeart] [~manish-sethi] I assume this behavior is not intentional, but can you confirm?;;;","11/Jul/19 4:15 AM;manish-sethi;No [~jyellick] - Ledger statedb (re)building only blocks instantiation of ledger object. In normal circumstances, this should not have any relation to port listening. 

Though, the above is not directly related... however, if you recall, only intentional delay that was added was a recent change with ""peer node reset"" where the endorsement requests were deferred till ledger has caught up to its original height.;;;","24/Sep/19 5:46 AM;jyellick;[~manish-sethi] regardless of intent, the behavior seems to be being observed in production, can you look at the logs and investigate why this might be happening?;;;","24/Jan/20 1:12 AM;dereckluo;https://github.com/hyperledger/fabric/pull/527
;;;","24/Jun/20 4:53 PM;narendranathreddy;Hi @[~dereckluo] , Thanks for fixing the issue in 2.x version,

However, we are facing this issue in 1.4.4 and even checked in 1.4.6 

Scenario:

I have 4,50,000 blocks in our production setup and peers went offline due to some VM storage issues
 Note: peers ledger data is persisted to volumes
 when peers come online,  peers are listening on the webserver  designated address which is `peerlisten address`, but does not respond to any requests.

Nearly, after one week peers back online and back to functional ;;;","24/Jun/20 4:55 PM;narendranathreddy;[~dereckluo] During peer not responding to any requests, it emits the following logs 

 

2020-06-24 07:40:54.299 UTC [kvledger] CommitWithPvtData -> INFO 190 [netchannel] Committed block [20283] with 1 transaction(s) in 1938ms (state_validation=11ms block_and_pvtdata_commit=128ms state_commit=1786ms) commitHash=[1d8636430e50291a1c02c9cbc6a8fcf8461e6b62b640bdc03910d148be158e26]
 2020-06-24 07:40:55.058 UTC [gossip.privdata] StoreBlock -> INFO 191 [netchannel] Received block [20284] from buffer
 2020-06-24 07:40:55.061 UTC [committer.txvalidator] Validate -> INFO 192 [netchannel] Validated block [20284] in 2ms
 2020-06-24 07:40:55.299 UTC [kvledger] CommitWithPvtData -> INFO 193 [netchannel] Committed block [20284] with 1 transaction(s) in 237ms (state_validation=21ms block_and_pvtdata_commit=49ms state_commit=164ms) commitHash=[21feb934fded4425e39781812b17d0d223eacf81fb5ac078dbbb28fb8a81fdf1]
 2020-06-24 07:43:38.288 UTC [lockbasedtxmgr] CommitLostBlock -> INFO 194 Recommitting block [351000] to state database
 2020-06-24 07:47:06.696 UTC [lockbasedtxmgr] CommitLostBlock -> INFO 195 Recommitting block [352000] to state database;;;","24/Jun/20 5:22 PM;narendranathreddy;[~dereckluo] [~jyellick] [~manish-sethi] We have got impacted on our production projects, please fix this in 1.4.4, 1.4.6 version as many of projects are in production and do not force us to use 2.x version just for this fix and our clients are not interested in 2.x features and functionalities, at the moment. ;;;","25/Jun/20 6:39 AM;manish-sethi;Tagging [~denyeart] for his opinion on back porting this to 1.4.;;;","25/Jun/20 7:02 PM;denyeart;Yes, since v1.4.x is LTS release, and the fix is low risk, makes sense to backport. I've tagged for v1.4.8.

[~dereckluo] could you take a look?;;;","30/Jun/20 10:44 PM;denyeart;Upon further investigation, the code is not the same between v1.4 and v2.0, it is not possible to cherry-pick the fix to v1.4. Users will have to move to v2.x in order to get the new behavior.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove dead LoggingSetLevel struct from nwo,FAB-15921,40988,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wlahti,wlahti,wlahti,11/Jul/19 4:10 AM,16/Jul/19 3:22 AM,28/Oct/23 3:09 AM,16/Jul/19 3:22 AM,,,,,,,,,,,,,,v2.0.0,,,,fabric-common,,,,,,0,,,,,,,,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00toc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jul/19 4:16 AM;wlahti;[https://gerrit.hyperledger.org/r/c/fabric/+/32251];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add integration tests to chaincode GetPrivateDataHash API,FAB-15922,40989,,Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,wenjian,wenjian,wenjian,11/Jul/19 6:17 AM,16/Jul/19 1:35 AM,28/Oct/23 3:09 AM,16/Jul/19 1:35 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,,,,,,,0,,,,,,Add a new method to marbles_private to invoke the new shim API GetPrivateDataHash and verify that we can get the expected private data hash by querying the chaincode.,,wenjian,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tok:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wenjian,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"11/Jul/19 7:16 AM;wenjian;v1.4.2 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32255/]

v2.0 CR: [https://gerrit.hyperledger.org/r/#/c/fabric/+/32282/];;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"Implement filelock for allow only one of peer start, reset, and rollback",FAB-15923,40990,37913,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,manish-sethi,manish-sethi,11/Jul/19 7:39 AM,27/Jul/19 11:50 AM,28/Oct/23 3:09 AM,16/Jul/19 11:12 PM,,,,,,,,,,,,,,,,,,fabric-ledger,,,,,,0,,,,,,"As of now, the admin has to be careful to issue only one of the instance of one of the commands (start, reset, and rollback) at a time in order to prevent a chance of data corruption. However, these three should be made mutually exclusive in the code in order to prevent this mistake.

A simple filelock on a file in the ledger's dir can be used for this purpose",,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tos:",,,,Unset,Unset,v1.4.x,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unexpected method call in gossip/channel tests,FAB-15924,40991,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,sykesm,sykesm,11/Jul/19 8:03 AM,31/Jul/19 12:49 AM,28/Oct/23 3:09 AM,31/Jul/19 12:49 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,ci-flake,,,,,"{code}
panic: 

mock: Unexpected Method Call
-----------------------------

GetIdentityByPKIID(common.PKIidType)
		0: common.PKIidType{0x70, 0x6b, 0x69, 0x49, 0x44, 0x49, 0x6e, 0x4f, 0x72, 0x67, 0x31, 0x42, 0x75, 0x74, 0x4e, 0x6f, 0x74, 0x45, 0x6c, 0x69, 0x67, 0x69, 0x62, 0x6c, 0x65}

The closest call I have is: 

GetIdentityByPKIID(common.PKIidType)
		0: common.PKIidType{0x70, 0x6b, 0x69, 0x49, 0x44, 0x49, 0x6e, 0x4f, 0x72, 0x67, 0x31}

Difference found in argument 0:

--- Expected
+++ Actual
@@ -1,2 +1,2 @@
-(common.PKIidType) (len=11) 706b694944496e4f726731
+(common.PKIidType) (len=25) 706b694944496e4f7267314275744e6f74456c696769626c65
 

Diff: 0: FAIL:  (common.PKIidType=706b694944496e4f7267314275744e6f74456c696769626c65) != (common.PKIidType=706b694944496e4f726731)

goroutine 29 [running]:
github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).fail(0xc0001365b0, 0xfbd2fc, 0x6f, 0xc00024a1c0, 0x4, 0x4)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:236 +0x14d
github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).MethodCalled(0xc0001365b0, 0x15b7269, 0x12, 0xc0001ac2d0, 0x1, 0x1, 0xc00024a140, 0x4, 0x4)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:358 +0x800
github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock.(*Mock).Called(0xc0001365b0, 0xc0001ac2d0, 0x1, 0x1, 0xc0001b1040, 0x36, 0x0)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/vendor/github.com/stretchr/testify/mock/mock.go:334 +0x1a9
github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipAdapterMock).GetIdentityByPKIID(0xc0001365b0, 0x17f7b10, 0x19, 0x19, 0x0, 0x0, 0x0)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel_test.go:269 +0x116
github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).EligibleForChannel(0xc0002723c0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x17f7b10, 0x19, 0x19, 0x0, ...)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:510 +0x68
github.com/hyperledger/fabric/gossip/gossip/channel.(*gossipChannel).GetPeers(0xc0002723c0, 0x0, 0x0, 0x0)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:362 +0x157
github.com/hyperledger/fabric/gossip/gossip/channel.(*membershipTracker).trackMembershipChanges(0xc000281800)
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:1098 +0x49
created by github.com/hyperledger/fabric/gossip/gossip/channel.NewGossipChannel
	/w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/gossip/gossip/channel/channel.go:296 +0xa52
FAIL	github.com/hyperledger/fabric/gossip/gossip/channel	0.052s
{code}

Observed in build for https://gerrit.hyperledger.org/r/c/fabric/+/32257: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13551/",,sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 8:02 AM;sykesm;console.log;https://jira.hyperledger.org/secure/attachment/17392/console.log",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tp0:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"31/Jul/19 12:36 AM;vijaypunugubati;The above flake didn't reflect on recent builds, closing the issue.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Intermittent failure in  Chain 2-node Raft cluster [It] can remove leader by reconfiguring cluster,FAB-15926,41000,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Duplicate,,sykesm,sykesm,11/Jul/19 10:20 AM,15/Jul/19 2:15 PM,28/Oct/23 3:09 AM,15/Jul/19 2:15 PM,v2.0.0,,,,,,,,,,,,,v2.0.0,,,,fabric-orderer,,,,,,0,ci-flake,ipm,,,,"{code}
19:07:11 •2019-07-10 23:05:37.378 UTC [test] detectSelfID -> WARN 02c Could not find -----BEGIN CERTIFICATE-----
19:07:11 Y2VydCBieXRlcw==
19:07:11 -----END CERTIFICATE-----
19:07:11  among [-----BEGIN CERTIFICATE-----
19:07:11 Zm9v
19:07:11 -----END CERTIFICATE-----
19:07:11 ]
19:07:11 ••2019-07-10 23:05:37.384 UTC [test] HandleChain -> INFO 02d EvictionSuspicion not set, defaulting to 10m0s
19:07:11 •
19:07:11 
19:07:11 Summarizing 1 Failure:
19:07:11 
19:07:11 [Fail] Chain 2-node Raft cluster [It] can remove leader by reconfiguring cluster 
19:07:11 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1355
19:07:11 
19:07:11 Ran 103 of 103 Specs in 55.142 seconds
19:07:11 FAIL! -- 102 Passed | 1 Failed | 0 Pending | 0 Skipped
19:07:11 --- FAIL: TestEtcdraft (55.14s)
{code}",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15939,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"11/Jul/19 10:20 AM;sykesm;console.log.txt;https://jira.hyperledger.org/secure/attachment/17400/console.log.txt",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:ri",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jul/19 12:31 AM;sykesm;Hit again: https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13565/console;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Better expression for golang,FAB-15927,41003,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,kukgini,kukgini,kukgini,11/Jul/19 5:44 PM,18/Jul/19 12:25 PM,28/Oct/23 3:09 AM,18/Jul/19 12:25 PM,,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,,,,,,"As a hyperledger fabric beginner and golang developer, samples should be written in an expression appropriate to the language's characteristics.",,kukgini,mastersingh24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tq4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),kukgini,mastersingh24,,,,,,,,,,,,,,,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-6.11.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/tough-cookie-4.1.3,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/semver-6.3.1,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/grpc/grpc-js-1.8.17,dependabot/go_modules/high-throughput/application-go/google.golang.org/grpc-1.53.0,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/word-wrap-1.2.4,dependabot/npm_and_yarn/asset-transfer-basic/rest-api-typescript/protobufjs-and-fabric-network-7.2.4,dependabot/go_modules/asset-transfer-basic/application-go/google.golang.org/grpc-1.53.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jul/19 7:13 PM;mastersingh24;[~kukgini]  Can you provide more detail and/or an example of exactly what you are looking for?;;;","17/Jul/19 4:56 PM;kukgini;I made a pull request for it. see Git Commits

 ;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Address shellcheck items in run-integration-tests.sh,FAB-15930,41014,,Task,Closed,FAB,Fabric,software,denyeart,,,Low,Done,sykesm,sykesm,sykesm,12/Jul/19 12:26 AM,14/Jul/19 2:17 AM,28/Oct/23 3:09 AM,14/Jul/19 2:17 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,,,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ts4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jul/19 12:27 AM;sykesm;https://gerrit.hyperledger.org/r/c/fabric/+/32270;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Fix organizations in configtx.yaml template in network launcher,FAB-15931,41015,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,suryalnvs,suryalnvs,12/Jul/19 12:53 AM,19/Jul/19 9:52 PM,28/Oct/23 3:09 AM,19/Jul/19 9:52 PM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,Fix organizations in configtx.yaml template in network launcher,,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15189,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-6742,,,No,,Unset,No,,,"1|i00tsc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),suryalnvs,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"19/Jul/19 9:52 PM;suryalnvs;https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32273/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
UT: Add test case to reuse sequence number in CommitChaincodeDefinition,FAB-15932,41016,40806,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mrosen52,wlahti,wlahti,12/Jul/19 12:56 AM,10/Aug/19 5:13 AM,28/Oct/23 3:09 AM,18/Jul/19 1:07 PM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"core/chaincode/lifecycle/lifecycle_test.go currently only tests that an error message is returned if the sequence number is more than one more than the expected number. We should also have a test which attempts to commit a chaincode definition with the currently defined sequence number.

The test will be very similar to: [https://github.com/hyperledger/fabric/blob/master/core/chaincode/lifecycle/lifecycle_test.go#L1002]",,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16265,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tsk:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),wlahti,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Optional NodeOU Classification,FAB-15933,41017,39710,Sub-task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,angelo.decaro,angelo.decaro,angelo.decaro,12/Jul/19 1:40 AM,16/Aug/19 12:50 PM,28/Oct/23 3:09 AM,16/Aug/19 12:50 PM,,,,,,,,,,,,,,v1.4.3,v2.0.0,,,fabric-crypto,,,,,,0,,,,,,"Currently, once NodeOU classification is enabled, it is enforced that client, admin, peer, and orderer classification are properly specified. Though, not all organisations are required to have support for all classifications. 
Therefore, even when NodeOU classification is enabled, specific classifications can be omitted.

The expected behaviour should be the following:
1. if a classification is not provided then the setup should not fail.
2. if a classification is not provided testing an identity against that classification will fail.
3. if  NodeOU classification is enabled but no valid classification is provided, then NodeOU classification is disabled.",,angelo.decaro,denyeart,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tss:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),angelo.decaro,denyeart,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jul/19 1:44 AM;angelo.decaro;https://gerrit.hyperledger.org/r/#/c/fabric/+/32268/;;;","17/Jul/19 1:48 AM;denyeart;Converted to subtask of FAB-15388.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
IT: An organization approves a chaincode definition with an incorrect package id,FAB-15934,41018,40806,Sub-task,Closed,FAB,Fabric,software,denyeart,,,High,Invalid,mrosen52,wlahti,wlahti,12/Jul/19 2:36 AM,09/Aug/19 12:02 AM,28/Oct/23 3:09 AM,09/Aug/19 12:00 AM,,,,,,,,,,,,,,,,,,,,,,,,0,,,,,,"Create an integration test that ensures committing a chaincode definition fails when an org admin approves the chaincode definition for their org with the incorrect package id. 

This task will be complete when there is a test in e2e/lifecycle ([https://github.com/hyperledger/fabric/blob/master/integration/e2e/lifecycle/lifecycle_test.go) |https://github.com/hyperledger/fabric/blob/master/integration/e2e/lifecycle/lifecycle_test.go]that manually packages, installs, modifies the package id for one of the two org and approves the definition, and then verifies that committing the chaincode definition fails with:
{code:java}
 Error: failed to create signed transaction: ProposalResponsePayloads do not match{code}",,mrosen52,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tt0:",,,,Unset,Unset,In Progress,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mrosen52,wlahti,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"02/Aug/19 4:49 AM;mrosen52;https://gerrit.hyperledger.org/r/c/fabric/+/32340;;;","09/Aug/19 12:00 AM;wlahti;Took another look at this and I see what's going on. The negative test here for ""ProposalResponsePayloads do not match"" succeeds because the test was attempting to receive an endorsement for the commit step from not just org1 and org2 (who did approve the definition) but also org3.

I've modified the test locally and everything works as expected in the case of an incorrect package id set by an org while approving. I think we can abandon this test case which, from looking at the change history on the behave tests, appears to be based on the days when we required that the chaincode package hashes match across orgs.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
GRPC Server timeout is not configurable in Fabric v1.4,FAB-15935,41100,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,jyellick,rhegde,rhegde,12/Jul/19 3:52 AM,21/Aug/19 4:59 AM,28/Oct/23 3:09 AM,20/Aug/19 12:57 PM,v1.4.0,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-orderer,,,,,,0,,,,,,"During the TLS connection, the client is slow in completing the SSL handshake and this cause the Server to disconnect the connection with I/O timeout.
{quote}{color:#000000}2019-07-11 17:04:23.243 CEST [core.comm] ServerHandshake -> ERRO 2a4 TLS handshake failed with error read tcp 172.19.0.12:7050->10.34.40.52:57434: i/o timeout \{""server"": ""Orderer"", ""remote address"": ""10.34.40.52:57434""}{color}
{quote}
 

{color:#000000}This configuration is not configurable and would be required to be available.{color}

 

 

 ",,baohua,jyellick,rhegde,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tt8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),baohua,jyellick,rhegde,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"12/Jul/19 4:05 AM;jyellick;https://gerrit.hyperledger.org/r/c/fabric/+/32278;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
All LTE performance tests fail consistently upon startup,FAB-15936,41103,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,scottz,vijaypunugubati,vijaypunugubati,12/Jul/19 5:54 AM,19/Jul/19 3:02 AM,28/Oct/23 3:09 AM,19/Jul/19 3:02 AM,v1.4.2,,,,,,,,,,,,,v1.4.2,,,,fabric-ledger,,,,,,0,ci-failure,quality,,,,"Ledger component performance tests were failed on all 18 cases.

*Branch:* release-1.4**

*Platform:* ** *x86_64*

*Error* *Snippet:*
{code:java}
/00:02:32.224 ============================= test session starts ==============================
00:02:32.224 platform linux2 -- Python 2.7.12, pytest-2.8.7, py-1.4.31, pluggy-0.3.1 -- /usr/bin/python
00:02:32.227 cachedir: .cache
00:02:32.228 rootdir: /w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric-test/regression/daily, inifile: 
00:02:32.264 collecting ... collected 18 items
00:02:32.264 
00:03:01.454 ledger_lte.py::perf_goleveldb::test_FAB_3790_VaryNumParallelTxPerChain FAILED
00:03:04.683 ledger_lte.py::perf_goleveldb::test_FAB_3795_VaryNumChains FAILED
00:03:05.389 ledger_lte.py::perf_goleveldb::test_FAB_3798_VaryNumParallelTxWithSingleChain FAILED
00:03:06.033 ledger_lte.py::perf_goleveldb::test_FAB_3799_VaryNumChainsWithNoParallelism FAILED
00:03:07.436 ledger_lte.py::perf_goleveldb::test_FAB_3800a_VaryNumWritesInEachTx FAILED
00:03:08.360 ledger_lte.py::perf_goleveldb::test_FAB_3800b_VaryNumReadsInEachTx FAILED
00:03:09.384 ledger_lte.py::perf_goleveldb::test_FAB_3801_VaryKVSize FAILED
00:03:10.035 ledger_lte.py::perf_goleveldb::test_FAB_3802_VaryBatchSize FAILED
00:03:10.676 ledger_lte.py::perf_goleveldb::test_FAB_3803_VaryNumTxs FAILED
00:03:21.093 ledger_lte.py::perf_couchdb::test_FAB_3870_VaryNumParallelTxPerChain FAILED
00:03:33.033 ledger_lte.py::perf_couchdb::test_FAB_3871_VaryNumChain FAILED
00:03:45.182 ledger_lte.py::perf_couchdb::test_FAB_3872_VaryNumParallelTxWithSingleChain FAILED
00:03:57.829 ledger_lte.py::perf_couchdb::test_FAB_3873_VaryNumChainWithNoParallelism FAILED
00:04:06.061 ledger_lte.py::perf_couchdb::test_FAB_3874_VaryKVSize FAILED
00:04:15.428 ledger_lte.py::perf_couchdb::test_FAB_3875_VaryBatchSize FAILED
00:04:23.365 ledger_lte.py::perf_couchdb::test_FAB_3876a_VaryNumWritesInEachTx FAILED
00:04:31.209 ledger_lte.py::perf_couchdb::test_FAB_3876b_VaryNumReadsInEachTx FAILED
00:04:39.069 ledger_lte.py::perf_couchdb::test_FAB_3877_VaryNumTxs FAILED
00:04:39.071 / code placeholder
{code}
 ** 

 

*Build:* [https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-lte-release-1.4-x86_64/177/console]

*Build Logs:* 

[https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-lte-release-1.4-x86_64/]

*{color:#de350b}Follow the below pic to see the log files on Jenkins page.{color}*!Screen Shot 2019-07-11 at 4.52.01 PM.png!

For example, click ""Last Failed Build"" under the *Permalinks* section header. View a recent build from July 11th, go to the fabric-test/regression/daily/ folder to find this logfile (and all the others showing similar error)
https://jenkins.hyperledger.org/view/fabric-test/job/fabric-test-daily-lte-release-1.4-x86_64/lastFailedBuild/artifact/gopath/src/github.com/hyperledger/fabric-test/regression/daily/output_VaryBatchSize.log

{quote}found fabric repo....
Note: This is a Benchmark test. Please make sure to set an appropriate value for ulimit in your OS.
Recommended value is 10000 for default parameters.
Current ulimit=1048576
Parameter file: parameters_daily_CI.sh
INFO: outputDIR [/w/workspace/fabric-test-daily-lte-release-1.4-x86_64/gopath/src/github.com/hyperledger/fabric-test/tools/LTE/TestResults/experiments/BenchmarkInsertTxs] already exists. Output will be appended to existing file
go test -v -timeout 1000m github.com/hyperledger/fabric/test/tools/LTE/experiments -testParams=""-DataDir=/tmp/fabric/test/tools/LTE/data, -NumChains=10, -NumParallelTxPerChain=10, -NumWritesPerTx=4, -NumReadsPerTx=4, -BatchSize=10, -NumKVs=100000, -KVSize=200, -UseJSONFormat=false"" -bench=BenchmarkInsertTxs
# github.com/hyperledger/fabric/test/tools/LTE/chainmgmt
../chainmgmt/chains.go:124:59: not enough arguments in call to c.PeerLedger.CommitWithPvtData
	have (*""github.com/hyperledger/fabric/core/ledger"".BlockAndPvtData)
	want (*""github.com/hyperledger/fabric/core/ledger"".BlockAndPvtData, *""github.com/hyperledger/fabric/core/ledger"".CommitOptions)
FAIL	github.com/hyperledger/fabric/test/tools/LTE/experiments [build failed]
Failed to run the test.{quote}
",,manish-sethi,scottz,vijaypunugubati,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jul/19 5:52 AM;vijaypunugubati;Screen Shot 2019-07-11 at 4.52.01 PM.png;https://jira.hyperledger.org/secure/attachment/17500/Screen+Shot+2019-07-11+at+4.52.01+PM.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00ttw:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,scottz,vijaypunugubati,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jul/19 3:19 AM;manish-sethi;There has been a breaking change in Commit API in 1.4.2 for supporting rollback feature

https://github.com/hyperledger/fabric/blob/f57b9520a56104504decfbf4a64d9ce5712ed557/core/ledger/ledger_interface.go#L81 (on 1.4.2)
https://github.com/hyperledger/fabric/blob/d614a619a9dd2ef19a732da0e0ea9f002a3498f1/core/ledger/ledger_interface.go#L124 (on master)

If we make this change in LTE to make it run on 1.4.2, it will start failing on master. So, it would have to wait till we port rollback CRs to master.

CC: [~Senthil1], [~denyeart];;;","13/Jul/19 4:41 AM;scottz;[~manish-sethi] The test is failing in the daily 1.4.2 tests. Not failing in master yet.  Can you merge a fix for LTE on our release-1.4 branch of fabric-test repo, and wait to prop to master until when you port rollback feature to master?;;;","13/Jul/19 4:54 AM;manish-sethi;Sure, I missed noticing that there are different branches for fabric-test repo as well.;;;","13/Jul/19 6:20 AM;scottz;Manish provided a solution. I pushed the fix here: https://gerrit.hyperledger.org/r/c/fabric-test/+/32308;;;","13/Jul/19 6:21 AM;scottz;After the fabric rollback code is propped to master from 1.4.2, this LTE fix should be propped too.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Unable to create application channel after the network is launched with NL on k8s,FAB-15937,41105,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,suryalnvs,rameshthoomu,rameshthoomu,12/Jul/19 7:07 AM,15/Jul/19 11:54 PM,28/Oct/23 3:09 AM,15/Jul/19 11:14 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-quality,,,,,,0,,,,,,"Unable to create application channel after the network is launched with NL on k8s

{code:java}
2019-07-11 20:20:04.330 UTC [orderer.common.broadcast] ProcessMessage -> WARN 020 [channel: testorgschannel0] Rejecting broadcast of config message from 10.191.5.105:7020 because of error: error validating channel creation transaction for new channel 'testorgschannel0', could not succesfully apply update to template configuration: error authorizing update: error validating DeltaSet: policy for [Group]  /Channel/Application/org2 not satisfied: signature set did not satisfy policy
2019-07-11 20:20:04.331 UTC [comm.grpc.server] 1 -> INFO 021 streaming call completed grpc.service=orderer.AtomicBroadcast grpc.method=Broadcast grpc.peer_address=10.191.5.105:7020 grpc.code=OK grpc.call_duration=11.468229ms
{code}
",,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15856,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tuc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),rameshthoomu,,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"15/Jul/19 11:14 PM;rameshthoomu;This has been fixed with this patch https://gerrit.hyperledger.org/r/#/c/fabric-test/+/32290/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Peer out of sync is elected as leader,FAB-15938,41106,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Invalid: Works as Expected,,gatakka,gatakka,12/Jul/19 3:36 PM,20/Nov/20 7:26 AM,28/Oct/23 3:09 AM,20/Nov/20 7:26 AM,,,,,,,,,,,,,,,,,,fabric-gossip,,,,,,0,,,,,,"If a peer is offline (maintenance, network or hardware issues), it stays behind other peers. When this peer is bring back online, a sync process is automatically started. This part works as expected, but, in some cases this peer is elected as a leader. But because this peer is currently in synchronization, no events/new blocks are emitted until the synchronization process is complete.

In our particular case, this synchronization may take couple of hours, and our implementations and integrations relay completely on Fabric events. 

Probably peers out of sync must not participate in leader election, until they are synchronized. 

We are using official Fabric images at version amd64-1.4.1

Here is part of the logs (domain names are masked with xxx):

2019-07-12 06:03:52.033 UTC [gossip.channel] reportMembershipChanges -> INFO 033 Membership view has changed. peers went online: [[peer0.xxx.xxx:7051]] , current view: [[peer0.xxx.xxx:7051]]
 2019-07-12 06:03:52.486 UTC [gossip.state] queueNewMessage -> WARN 034 Block [1227654231] received from gossip wasn't added to payload buffer: Ledger height is at 1208654231, cannot enqueue block with sequence of 1227654231
 2019-07-12 06:03:53.275 UTC [gossip.election] beLeader -> INFO 035 03b4026405d8d9f372458b912b59f89c3a5967c8b295876cb390434d49a078fc : Becoming a leader
 2019-07-12 06:03:53.275 UTC [gossip.service] func1 -> INFO 036 Elected as a leader, starting delivery service for channel pbch
 2019-07-12 06:03:53.894 UTC [gossip.privdata] StoreBlock -> INFO 037 [pbch] Received block [1208654231] from buffer
 2019-07-12 06:03:53.896 UTC [committer.txvalidator] Validate -> INFO 038 [pbch] Validated block [1208654231] in 2ms
 2019-07-12 06:03:54.053 UTC [kvledger] CommitWithPvtData -> INFO 039 [pbch] Committed block [1208654231] with 1 transaction(s) in 157ms (state_validation=0ms block_commit=114ms state_commit=21ms)

 ",,gatakka,jyellick,manish-sethi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tuk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),gatakka,jyellick,manish-sethi,yacovm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"12/Jul/19 6:38 PM;yacovm;Yeah this is a well known ""problem"". The reason is that leader election is based on comparison of peer identities.

 ;;;","12/Jul/19 6:46 PM;gatakka;Can you give some suggestions how we can workaround this ""problem"", or I have to change the general architecture how our systems interact with Fabric.;;;","12/Jul/19 6:54 PM;yacovm;yeah... if a peer has been offline for a long time, you can disable its leader election mechanism via the configuration, and then it doesn't try to become a leader;;;","24/Sep/19 5:45 AM;jyellick;[~gatakka] did this resolution work for you?;;;","24/Sep/19 3:02 PM;gatakka;[~jyellick] 

Because this was critical for us, we change the architecture of our interaction. Currently this issue is not relevant to us anymore. We did not investigate the scenario for disabling leader elections. ;;;","20/Nov/20 7:26 AM;manish-sethi;Closing this one. Feel free to open again if there is any more info.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Raft UT flake: [It] can remove leader by reconfiguring cluster,FAB-15939,41110,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,guoger,guoger,guoger,12/Jul/19 11:45 PM,12/Nov/19 1:12 AM,28/Oct/23 3:09 AM,12/Nov/19 1:12 AM,,,,,,,,,,,,,,,,,,fabric-orderer,,,,,,0,ci-flake,ipm,,,,"{code}
21:09:05 •{""level"":""debug"",""msg"":""No snapshot found at /tmp/raft-test-876563182/node-1-824429429/snapshot"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""No WAL data found, creating new WAL at path '/tmp/raft-test-876563182/node-1-824429429/wal'"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Loading WAL at Term 0 and Index 0"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Setting HardState to {Term: 0, Commit: 0}"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Appending 0 entries to memory storage"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""No snapshot found at /tmp/raft-test-876563182/node-2-242966096/snapshot"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""No WAL data found, creating new WAL at path '/tmp/raft-test-876563182/node-2-242966096/wal'"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Loading WAL at Term 0 and Index 0"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Setting HardState to {Term: 0, Commit: 0}"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Appending 0 entries to memory storage"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Starting Raft node"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Starting raft node: #peers: 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Starting raft node as part of a new channel"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 became follower at term 0"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""newRaft 1 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 became follower at term 1"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 1.155µs"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""error"",""msg"":""Failed pulling the last config block: ledger not available"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""This node is picked to start campaign"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Applied config change to add node 1, current nodes in channel: [1 2]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Applied config change to add node 2, current nodes in channel: [1 2]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Starting Raft node"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Starting raft node: #peers: 2"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Starting raft node as part of a new channel"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 became follower at term 0"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""newRaft 2 [peers: [], term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 became follower at term 1"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 1.116µs"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""error"",""msg"":""Failed pulling the last config block: ledger not available"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Applied config change to add node 1, current nodes in channel: [1 2]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Applied config change to add node 2, current nodes in channel: [1 2]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""1 [term 1] received MsgTimeoutNow from 0 and starts an election to get leadership."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 became candidate at term 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 received MsgVoteResp from 1 at term 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 [logterm: 1, index: 2] sent MsgVote request to 2 at term 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Current active nodes in cluster are [1 2]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 [term: 1] received a MsgVote message with higher term from 1 [term: 2]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 became follower at term 2"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 [logterm: 1, index: 2, vote: 0] cast MsgVote for 1 [logterm: 1, index: 2] at term 2"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Current active nodes in cluster are [2 1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 received MsgVoteResp from 2 at term 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 [quorum:2] has received 2 MsgVoteResp votes and 0 vote rejections"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 became leader at term 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""raft.node: 1 elected leader 1 at term 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Leader 1 is present, quit campaign"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""raft.node: 2 elected leader 1 at term 2"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Raft leader changed: 0 -> 1"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""There are in flight blocks, new leader should not serve requests"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Current active nodes in cluster are [2 1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Raft leader changed: 0 -> 1"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Start accepting requests as Raft leader at block [0]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Created block [1], there are 0 blocks in flight"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Received config transaction, pause accepting transaction till it is committed"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Proposed block [1] to raft consensus"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Writing block [1] (Raft index: 4) to ledger"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Update snapshot interval size to 200 bytes (was 20971520)"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Config block just committed removes node 1, pause accepting transactions till config change is applied"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Accumulated 1511 bytes since last snapshot, exceeding size limit (200 bytes), taking snapshot at block [1] (index: 4), last snapshotted block number is 0, current nodes: [1 2]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Config block or ConfChange in flight, pause accepting transaction"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Creating snapshot at index 4 from MemoryStorage"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Persisting snapshot (term: 2, index: 4) to WAL and disk"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Writing block [1] (Raft index: 4) to ledger"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Update snapshot interval size to 200 bytes (was 20971520)"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Config block just committed removes node 1, pause accepting transactions till config change is applied"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 not forwarding to leader 1 at term 2; dropping proposal"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Creating snapshot at index 4 from MemoryStorage"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Persisting snapshot (term: 2, index: 4) to WAL and disk"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Accumulated 1511 bytes since last snapshot, exceeding size limit (200 bytes), taking snapshot at block [1] (index: 4), last snapshotted block number is 0, current nodes: [1 2]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Config block or ConfChange in flight, pause accepting transaction"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Releasing lock to wal files prior to 4"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Snapshot is taken at index 4"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Snapshots on disk (1) < limit (5), no need to purge wal/snapshot"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Applied config change to remove node 1, current nodes in channel: [2]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Current leader is being removed from channel, attempt leadership transfer"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Transferring leadership to 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 [term 2] starts to transfer leadership to 2"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 sends MsgTimeoutNow to 2 immediately as 2 already has up-to-date log"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""2 [term 2] received MsgTimeoutNow from 1 and starts an election to get leadership."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 became candidate at term 3"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 received MsgVoteResp from 2 at term 3"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""2 [logterm: 2, index: 5] sent MsgVote request to 1 at term 3"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""raft.node: 2 lost leader 1 at term 3"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Applied config change to remove node 1, current nodes in channel: [2]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Current leader is being removed from channel, attempt leadership transfer"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Releasing lock to wal files prior to 4"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Snapshot is taken at index 4"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""debug"",""msg"":""Snapshots on disk (1) < limit (5), no need to purge wal/snapshot"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Raft leader changed: 1 -> 0"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""warn"",""msg"":""No leader is present, cluster size is 1"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""1 [term: 2] received a MsgVote message with higher term from 2 [term: 3]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 became follower at term 3"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""1 [logterm: 2, index: 5, vote: 0] cast MsgVote for 2 [logterm: 2, index: 5] at term 3"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""raft.node: 1 lost leader 1 at term 3"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Raft leader changed: 1 -> 0"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""warn"",""msg"":""No leader is present, cluster size is 1"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""debug"",""msg"":""Quit proposing blocks, discarded 0 blocks in the queue"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 500.488978ms"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 500.580296ms"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 1.000958845s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 1.00115355s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 1.501438112s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 1.501664941s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 2.004034695s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 2.002215599s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 2.504561909s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 2.502744702s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 3.012153812s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 3.003243224s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 3.512634795s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 3.503743234s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 4.013196502s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 4.004136337s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 4.51384591s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 4.504624593s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 5.014418258s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 5.011388765s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 5.516867931s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 5.515320972s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 6.017405203s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 6.015927748s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 6.520227616s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 6.516472576s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 7.020728563s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 7.016968536s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 7.522623679s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 7.517517766s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 8.023150723s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 8.019277908s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 8.523695684s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 8.519738029s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 9.0242852s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 9.020234689s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 9.524871619s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 9.520742154s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 10.025440832s"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Suspecting our own eviction from the channel for 10.021293113s"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Last config block was found to be block [1]"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Our height is higher or equal than the height of the orderer we pulled the last block from, aborting."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Raft node stopped"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""This node is being removed from replica set"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Stop serving requests"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Periodic check is stopping."",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Stop garbage collecting"",""channel"":""multi-node-channel"",""node"":1}
21:09:05 {""level"":""info"",""msg"":""Raft node stopped"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Stop serving requests"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Periodic check is stopping."",""channel"":""multi-node-channel"",""node"":2}
21:09:05 {""level"":""info"",""msg"":""Stop garbage collecting"",""channel"":""multi-node-channel"",""node"":2}
21:09:05 Send artificial MsgTimeoutNow to elect node 1
21:09:05 STEP: Configuring cluster to remove node
21:09:05 
21:09:05 ------------------------------
21:09:05 • Failure [10.185 seconds]
21:09:05 Chain
21:09:05 /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:70
21:09:05   2-node Raft cluster
21:09:05   /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1279
21:09:05     can remove leader by reconfiguring cluster [It]
21:09:05     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1352
21:09:05 
21:09:05     Timed out after 10.000s.
21:09:05     Expected
21:09:05         <int>: 1
21:09:05     to equal
21:09:05         <int>: 2
21:09:05 
21:09:05     /w/workspace/fabric-verify-unit-tests-x86_64/gopath/src/github.com/hyperledger/fabric/orderer/consensus/etcdraft/chain_test.go:1363
21:09:05 ------------------------------
{code}


https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13585/consoleFull",,guoger,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15926,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2e:8w",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),guoger,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"15/Jul/19 1:04 PM;guoger;https://gerrit.hyperledger.org/r/c/fabric/+/32314;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Add an explicit test for covering the scenario mentioned in FAB-15827,FAB-15940,41111,,Test Task,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,manish-sethi,manish-sethi,manish-sethi,13/Jul/19 12:02 AM,18/Jul/19 12:42 AM,28/Oct/23 3:09 AM,18/Jul/19 12:42 AM,,,,,,,,,,,,,,v1.4.2,v2.0.0,,,fabric-ledger,,,,,,0,,,,,,,,manish-sethi,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15827,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00tvo:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jul/19 1:05 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/32288/ (for release 1.4.2)
https://gerrit.hyperledger.org/r/#/c/fabric/+/32289/ (for master);;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"PTE results success while channel creation, even it fails",FAB-15941,41114,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,dongming,bharadwajambati1,bharadwajambati1,13/Jul/19 12:42 AM,13/Jul/19 3:21 AM,28/Oct/23 3:09 AM,13/Jul/19 3:21 AM,,,,,,,,,,,,,,,,,,fabric-quality,,,,,,0,,,,,,"While creating the channel using PTE, the logs display the channel creation as successful even if it fails to create.",,bharadwajambati1,dongming,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,FAB-2247,,,No,,Unset,No,,,"1|i00tw4:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),bharadwajambati1,dongming,,,,,,,,,,,,,,,dependabot/go_modules/regression/publish/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/net-0.7.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/golang.org/x/net-0.7.0,dependabot/go_modules/tools/gotools/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/smoke/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/publish/golang.org/x/text-0.3.8,dependabot/go_modules/regression/publish/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/smoke/golang.org/x/text-0.3.8,release-2.5,dependabot/go_modules/regression/barebones/github.com/opencontainers/runc-1.1.5,release-2.4,lindluni-patch-1,dependabot/go_modules/regression/publish/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/k8s.io/client-go-0.20.0,dependabot/go_modules/tools/chaincode-integration/resources/chaincode/simple-go/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/publish/golang.org/x/net-0.7.0,dependabot/go_modules/regression/publish/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/net-0.7.0,dependabot/go_modules/regression/barebones/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/tools/operator/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/smoke/golang.org/x/sys-0.1.0,dependabot/go_modules/regression/basicnetwork/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/golang.org/x/text-0.3.8,revert-342-mergify/bp/main/pr-340,dependabot/go_modules/regression/publish/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/k8s.io/client-go-0.20.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/golang.org/x/text-0.3.8,dependabot/go_modules/regression/basicnetwork/github.com/docker/docker-20.10.24incompatible,dependabot/go_modules/regression/smoke/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/basicnetwork/golang.org/x/text-0.3.8,dependabot/go_modules/regression/barebones/golang.org/x/crypto-0.1.0,dependabot/go_modules/regression/barebones/golang.org/x/sys-0.1.0,dependabot/go_modules/tools/operator/github.com/opencontainers/runc-1.1.5,dependabot/go_modules/regression/barebones/k8s.io/client-go-0.20.0,dependabot/go_modules/chaincodes/marbles02_private/go/golang.org/x/net-0.7.0,dependabot/go_modules/tools/operator/github.com/docker/docker-20.10.24incompatible,,,,,,,true,"13/Jul/19 12:58 AM;dongming;https://gerrit.hyperledger.org/r/c/fabric-test/+/32293;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"""Instantiation"" is failing on ""Service Based Endoresment"" chaincode on release-1.4",FAB-15942,41115,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,mastersingh24,rameshthoomu,rameshthoomu,13/Jul/19 12:49 AM,15/Jul/19 11:12 PM,28/Oct/23 3:09 AM,13/Jul/19 8:52 PM,,,,,,,,,,,,,,v1.4.2,,,,fabric-peer,,,,,,0,,,,,,"""Instantiation"" is failing on ""Service Based Endoresment"" chaincode on release-1.4
Git_Commit# f2225d7
Branch: release-1.4
Orderer Type: Kakfa
Tool: PTE

Observed parsing errors:

2019-07-12T20:56:35.089Z - debug: [Channel.js]: loadConfigPolicy - base.Orderer.ordererorg1 - mod_policy: Admins
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadPolicy - base.Orderer.ordererorg1 - name: Writers - unable to parse policy TypeError: Illegal buffer
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadConfigPolicy - base.Orderer.ordererorg1 - policy name: Admins
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadConfigPolicy - base.Orderer.ordererorg1 - version: 0
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadConfigPolicy - base.Orderer.ordererorg1 - mod_policy: Admins
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadPolicy - base.Orderer.ordererorg1 - name: Admins - unable to parse policy TypeError: Illegal buffer
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadConfigPolicy - base.Orderer.ordererorg1 - policy name: Readers
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadConfigPolicy - base.Orderer.ordererorg1 - version: 0
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadConfigPolicy - base.Orderer.ordererorg1 - mod_policy: Admins
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadPolicy - base.Orderer.ordererorg1 - name: Readers - unable to parse policy TypeError: Illegal buffer
2019-07-12T20:56:35.090Z - debug: [Channel.js]: loadConfigGroup - base.Orderer.ordererorg1 - << policies
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigGroup - base.Orderer.ordererorg1 - < group
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigGroup - base.Orderer - << groups
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigGroup - base.Orderer - >> values
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer -  value name: Capabilities
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - version: 0
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - mod_policy: Admins
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - value: ByteBufferNB(offset=3705,markedOffset=-1,limit=3717,capacity=17362)
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer -  value name: KafkaBrokers
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - version: 0
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - mod_policy: Admins
2019-07-12T20:56:35.091Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - KafkaBrokers addresses value :: kafka0:9092,kafka1:9092,kafka2:9092,kafka3:9092,kafka4:9092
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer -  value name: ConsensusType
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - version: 0
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - mod_policy: Admins
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer - name: ConsensusType - *** unable to parse with error :: TypeError: Cannot set property 'ConsensusType' of undefined
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer -  value name: BatchSize
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - version: 0
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - mod_policy: Admins
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer - name: BatchSize - *** unable to parse with error :: TypeError: Cannot set property 'BatchSize' of undefined
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer -  value name: BatchTimeout
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - version: 0
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - mod_policy: Admins
2019-07-12T20:56:35.092Z - debug: [Channel.js]: loadConfigValue - base.Orderer - name: BatchTimeout - *** unable to parse with error :: TypeError: Cannot set property 'BatchTimeout' of undefined
2019-07-12T20:56:35.093Z - debug: [Channel.js]: loadConfigValue - base.Orderer -  value name: ChannelRestrictions
2019-07-12T20:56:35.093Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - version: 0
2019-07-12T20:56:35.093Z - debug: [Channel.js]: loadConfigValue - base.Orderer    - mod_policy: Admins
2019-07-12T20:56:35.093Z - debug: [Channel.js]: loadConfigValue - base.Orderer - name: ChannelRestrictions - *** unable to parse with error :: TypeError: Cannot set property 'ChannelRestrictions' of undefined

Below is the error log from peer:

{code:java}

2019-07-12 14:45:57.794 UTC [chaincode.platform] func1 -> ERRO 001 Failed to generate platform-specific docker build: Error returned from build: 1 ""opt/gopath/src/github.com/hyperledger/fabric/core/chaincode/shim/ext/statebased/statebasedimpl.go:14:2: cannot find package ""github.com/hyperledger/fabric/common/cauthdsl"" in any of:
    /opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/hyperledger/fabric/common/cauthdsl (vendor tree)
    /opt/go/src/github.com/hyperledger/fabric/common/cauthdsl (from $GOROOT)
    /chaincode/input/src/github.com/hyperledger/fabric/common/cauthdsl (from $GOPATH)
    /opt/gopath/src/github.com/hyperledger/fabric/common/cauthdsl
{code}",,mastersingh24,rameshthoomu,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15856,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jul/19 5:59 AM;rameshthoomu;SBE;https://jira.hyperledger.org/secure/attachment/17502/SBE",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00twc:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,rameshthoomu,,,,,,,,,,,,,,,release-1.4,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"13/Jul/19 7:50 AM;mastersingh24;Where is this being run?   Not sure that this could ever have worked ... looked at ccenv image for 1.4.1 and it does not have the github.com/hyperledger/fabric/common/cauthdsl package included;;;","13/Jul/19 8:14 AM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric/+/32309;;;","15/Jul/19 11:12 PM;rameshthoomu;This test case has been executed on IKS k8s environment with July 13th build. Observed the fix is working as expected.

NOTE: While instantiation, ccenv latest image is getting pulled from docker hub, as it is expecting: latest tag. So, it always pulls whatever the : latest image is available on the docker hub but this may not be current release branch code ( meaning 1.4.2). So, I have followed the below steps

1. Exec into the peer where I suppose to instantiating the chaincode.
2. Pull the ccenv:amd64-stable image from nexus which got published by daily release jobs.
3. re-tag above pulled image to :latest

repeat the same steps in other peer container pods.;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
fabcar-typescript-query test case is FAILED,FAB-15943,41116,,Bug,Closed,FAB,Fabric,software,denyeart,,,High,Done,simonstone1,denyeart,denyeart,13/Jul/19 12:53 AM,15/Jul/19 7:38 PM,28/Oct/23 3:09 AM,15/Jul/19 7:38 PM,,,,,,,,,,,,,,,,,,fabric-samples,,,,,,0,ci-blocker,,,,,"CI has been failing recently in release-1.4 fabric-samples, e.g.:

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/339/consoleFull

fabcar-typescript-query test case is FAILED",,denyeart,jtonline,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00twk:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),denyeart,jtonline,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"15/Jul/19 7:37 PM;jtonline;https://gerrit.hyperledger.org/r/c/fabric-samples/+/32294;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Ledger is rolled back without pressing Enter when launched in a container,FAB-15944,41119,,Bug,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,Senthil1,suryalnvs,suryalnvs,13/Jul/19 5:41 AM,27/Jul/19 11:50 AM,28/Oct/23 3:09 AM,16/Jul/19 11:12 PM,v1.4.2,,,,,,,,,,,,,v1.4.2,,,,fabric-peer,,,,,,0,,,,,,"Problem: Ledger got rolled back without pressing Enter when launched in a container using fabric-tools image and startup command in container with `peer node rollback` command

Steps:
 # Launch a network with 1 orderer and 2 orgs with 1 peer in each using network launcher (k8s) with persistence enabled.
 # Create a channel, join peers, install and instantiate samplecc chaincode and send 100 invokes
 # Once 100 invokes are completed, delete orderer and 2 peers
 # Launch fabric tools container with peer0 of org1 environment variables and ledger to roll back to 20th block

{code:java}
      command:
        - /bin/bash
      args:
        - -c
        - peer node rollback -c testorgschannel0 -b 20{code}
Observed:

In the fabric tools containers, noticed that without pressing enter, it rolled back to 20th block and then logged Press Enter as shown below

!image-2019-07-12-16-39-26-723.png!",,manish-sethi,scottz,suryalnvs,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,"13/Jul/19 5:39 AM;suryalnvs;image-2019-07-12-16-39-26-723.png;https://jira.hyperledger.org/secure/attachment/17501/image-2019-07-12-16-39-26-723.png",,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,f2225d7,Unset,No,,,"1|i00tx8:",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),manish-sethi,scottz,suryalnvs,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-1.4,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"16/Jul/19 1:32 AM;scottz;It seems the wait is meaningful only if some human is operating manually, in interactive mode.
In scripts, its meaningless to make it wait and automatically supply the input.
It should not prompt us to hit enter if we do not use the -t interactive flag.
And (when using interactive mode) the prompt could be reworded to say “are you sure?” and ask for a ""yes"" (instead of a blank line Enter) to confirm such a significant command.

The current behavior (if you do not use -t flag) appears to be:
on individual local desktop, I am told that it waits (even without using interactive flag)
in the docker startup command in our IKS network, it does not wait

Can we make the behavior consistent for all environments? And make the prompts consistent with the behavior?;;;","16/Jul/19 3:18 AM;manish-sethi;https://gerrit.hyperledger.org/r/#/c/fabric/+/32336/;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create fabric-protos repository and populate it with fabric protos,FAB-15945,41121,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,13/Jul/19 6:45 AM,22/Aug/19 7:03 AM,28/Oct/23 3:09 AM,22/Aug/19 7:03 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"Create a new github repository called {{fabric-protos}} and populate it with a {{protos}} directory that contains the fabric {{protos}}, the necessary LICENSE, CODE_OF_CONDUCT.md, CONTRIBUTING.md, and README.md.

This repository should not be a read-only mirror of gerrit but a simple github repo.

The repository should be configured to provide write access to the fabric maintainers. This will likely require the definition of a new github team.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-15959,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:rt",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a consumer of fabric-protos, I expect go language bindings to be available in fabric-protos-go",FAB-15946,41122,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,sykesm,sykesm,sykesm,13/Jul/19 7:14 AM,24/Aug/19 3:07 AM,28/Oct/23 3:09 AM,22/Aug/19 7:04 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"When protobuf definitions are updated in {{fabric-protos}}, an automated build process should be triggered to compile the protos to go and commit the generated artifacts to a separate source repository that gets used by or vendored into consumers. The {{fabric-protos}} repository will not contain the generated language bindings.

We have a couple of options to discuss for placement:

1. Create a {{fabric-protos-go}} repository to contain the compiled protocol buffer bindings for go. In this scenario, the import paths for the various protobuf packages would be {{github.com/hyperledger/fabric-protos-go/[common,discover,peer,orderer,etc]}}. This repo should be configured not to accept pull requests. The contents should be managed by automation.(Preferred.)
-2. Reuse the {{fabric-lib-go}} repository. In this scenario, the import paths would all be under a common {{protos}} folder and would be {{github.com/hyperledger/fabric-lib-go/protos}}.-

In either case, pull request builds for {{fabric-protos}} should generate but *not* merge/commit the artifacts to the target repo. Builds performed post-commit should generate the artifacts and commit them to the target repo.

Update: During IPM we decided to do the build and promote with Travis-CI.

[1:] Please consider branching strategies. {{fabric-protos/release-2.0}} should promote to {{fabric-protos-go/release-2.0}} while {{fabric-protos/master}} should promote to {{fabric-protos-go/master}}.
[2:] Please read https://medium.com/namely-labs/how-we-build-grpc-services-at-namely-52a3ae9e7c35 for inspriation.

",,jtonline,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FABCJ-53,,,,,,,,,FABG-899,,,,FAB-16382,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:rti",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),jtonline,sykesm,troyronda,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a chaincode developer, I would like the chaincode shim to require the minimal set of dependencies",FAB-15947,41123,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,sykesm,sykesm,13/Jul/19 8:12 AM,05/Aug/19 11:12 PM,28/Oct/23 3:09 AM,27/Jul/19 4:37 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"The current chaincode shim depends on a number of fabric packages. We need to isolate and remove the dependencies on these packages so we can move the chaincode shim to a separate repository that only relies on:

- go standard library
- grpc and its direct dependencies
- fabric protobuf definitions

In particular, {{go list -f '{{join .Deps ""\n""}}' ./core/chaincode/shim | sort -u}} shows that the following fabric packages are imported:

{code}
github.com/hyperledger/fabric/bccsp
github.com/hyperledger/fabric/bccsp/factory
github.com/hyperledger/fabric/bccsp/idemix
github.com/hyperledger/fabric/bccsp/idemix/bridge
github.com/hyperledger/fabric/bccsp/idemix/handlers
github.com/hyperledger/fabric/bccsp/signer
github.com/hyperledger/fabric/bccsp/sw
github.com/hyperledger/fabric/bccsp/utils
github.com/hyperledger/fabric/common/capabilities
github.com/hyperledger/fabric/common/cauthdsl
github.com/hyperledger/fabric/common/channelconfig
github.com/hyperledger/fabric/common/configtx
github.com/hyperledger/fabric/common/flogging
github.com/hyperledger/fabric/common/flogging/fabenc
github.com/hyperledger/fabric/common/ledger
github.com/hyperledger/fabric/common/metadata
github.com/hyperledger/fabric/common/metrics
github.com/hyperledger/fabric/common/policies
github.com/hyperledger/fabric/common/util
github.com/hyperledger/fabric/core/comm
github.com/hyperledger/fabric/idemix
github.com/hyperledger/fabric/internal/pkg/identity
github.com/hyperledger/fabric/msp
github.com/hyperledger/fabric/msp/cache
github.com/hyperledger/fabric/protos/common
github.com/hyperledger/fabric/protos/ledger/queryresult
github.com/hyperledger/fabric/protos/msp
github.com/hyperledger/fabric/protos/orderer
github.com/hyperledger/fabric/protos/orderer/etcdraft
github.com/hyperledger/fabric/protos/peer
github.com/hyperledger/fabric/protos/token
github.com/hyperledger/fabric/protoutil
{code}

Acceptance: The only remaining dependencies on code from the ""hyperledger/fabric"" repo are proto bindings for messages.

With respect to comm, we will explicitly code the default values of the client side options for grpc. If we need to export the ability to configure these, we'll do that later and in a separate story.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16214,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:ru",,,,Unset,Unset,,(Please add steps to reproduce),3.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Create fabric-chaincode-go repository and populate it with the chaincode shim,FAB-15948,41124,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,,sykesm,sykesm,13/Jul/19 8:28 AM,28/Aug/19 11:29 PM,28/Oct/23 3:09 AM,28/Aug/19 11:29 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"Keeping with the general pattern of {{fabric-chaincode-_language_}}, create a {{fabric-chaincode-go}} repository that will hold user consumable chaincode packages.

The repostiory should be updated with the typical boilerplate license, readme, contributing, etc.

This repository should be a v0 (unversioned) go module and should include {{go.mod}} and {{go.sum}} files but should *not* contain vendored dependencies. The goal is for this code to be consumed as a library by chaincode processes and we want to provide as much flexibility as possible.

Discussion: gerrit with github mirror? If gerrit, NACR review policy using the same maintainer list as fabric.

Acceptance:
1. I can build a chaincode program outside of a GOPATH that uses the shim from {{fabric-chaincode-go}}.
2. I can build a chaincode program within a GOPATH that explicitly vendors the shim from fabric-chaincode-go.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:rur",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
"As a fabric developer, I want chaincode shim changes to be tested before merge",FAB-15949,41125,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,btl5037,sykesm,sykesm,13/Jul/19 8:36 AM,20/Sep/19 5:05 AM,28/Oct/23 3:09 AM,20/Sep/19 5:05 AM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"Create a build process for {{fabric-chaincode-go}}. This process should lint the code (yes, lint - including godoc), vet the code, and run tests.

The build process should be tied into github to ensure that the code is tested prior to merge.

Acceptance: change requests cause a build and test to occur. Successful builds result in a +1 vote and failed builds result in a -1 vote.",,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:rv",,,,Unset,Unset,,(Please add steps to reproduce),,Unset,,,,,,Unset,,Unset,,(Please add usage information),sykesm,,,,,,,,,,,,,,,,release-2.3,release-2.2,dependabot/go_modules/github.com/golang/protobuf-1.5.3,main,dependabot/go_modules/google.golang.org/grpc-1.54.0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Remove fabric dependencies from shim/ext/statebased,FAB-15950,41126,,Story,Closed,FAB,Fabric,software,denyeart,,,Medium,Done,mastersingh24,sykesm,sykesm,13/Jul/19 8:47 AM,19/Jul/19 9:29 PM,28/Oct/23 3:09 AM,17/Jul/19 6:22 PM,,,,,,,,,,,,,,v2.0.0,,,,,,,,,,0,ipm,,,,,"As a consumer of the statebased package, I want to avoid dependencies on fabric/comm, fabric/protoutil, pkg/errors, and their transitive dependencies.

{go list -f '{{ join .Deps ""\n"" }}' ./core/chaincode/shim/ext/statebased} show the following fabric packages are dependencies of the statebased package. Most of these are transitive deps that are pulled in by references to {{common/cauthdsl}}.

The {{protoutil}} import drags in deps on {{internal/pkg/identity}}.

{code}
github.com/hyperledger/fabric/bccsp
github.com/hyperledger/fabric/bccsp/factory
github.com/hyperledger/fabric/bccsp/idemix
github.com/hyperledger/fabric/bccsp/idemix/bridge
github.com/hyperledger/fabric/bccsp/idemix/handlers
github.com/hyperledger/fabric/bccsp/signer
github.com/hyperledger/fabric/bccsp/sw
github.com/hyperledger/fabric/bccsp/utils
github.com/hyperledger/fabric/common/cauthdsl
github.com/hyperledger/fabric/common/flogging
github.com/hyperledger/fabric/common/flogging/fabenc
github.com/hyperledger/fabric/common/policies
github.com/hyperledger/fabric/idemix
github.com/hyperledger/fabric/internal/pkg/identity
github.com/hyperledger/fabric/msp
github.com/hyperledger/fabric/protos/common
github.com/hyperledger/fabric/protos/msp
github.com/hyperledger/fabric/protos/peer
github.com/hyperledger/fabric/protos/token
github.com/hyperledger/fabric/protoutil
{code}

Acceptance: The only fabric imports are the protos.",,mastersingh24,sykesm,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,FAB-16037,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,(Please add high level design or a link to the design),Unset,Unset,Unset,,,,,No,,Unset,No,,,"1|i00n2c:rui",,,,Unset,Unset,,(Please add steps to reproduce),2.0,Unset,,,,,,Unset,,Unset,,(Please add usage information),mastersingh24,sykesm,,,,,,,,,,,,,,,mergify/bp/release-2.2/pr-4374,release-2.5,release-2.4,main,mergify/bp/release-2.2/pr-3750,mergify/bp/release-2.5/pr-3782,mergify/bp/release-2.4/pr-3646,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,true,"17/Jul/19 3:22 AM;mastersingh24;I actually think we should pull these out from being ""subpackages"" under the shim in the future was well.  Will open a JIRA for this if there is not one already ... would really be part of moving the shim out of the fabric tree anyway;;;","17/Jul/19 4:04 AM;mastersingh24;https://gerrit.hyperledger.org/r/c/fabric/+/32357;;;",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
